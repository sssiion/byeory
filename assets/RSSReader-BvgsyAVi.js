import{Nt as e,Ot as t,jt as n,pt as r,tt as i,z as a}from"./index-D5xtHDuG.js";import{n as o}from"./SDK-CcB7I40a.js";var s=t(`rss`,[[`path`,{d:`M4 11a9 9 0 0 1 9 9`,key:`pv89mb`}],[`path`,{d:`M4 4a16 16 0 0 1 16 16`,key:`k0647b`}],[`circle`,{cx:`5`,cy:`19`,r:`1`,key:`bfqh0e`}]]),c=e(n(),1),l=a();function u({gridSize:e}){let[t,n]=o(`widget-rss-url`,``),[a,u]=(0,c.useState)([]),[d,f]=(0,c.useState)(!1),[p,m]=(0,c.useState)(null),h=async(e,r)=>{e&&e.preventDefault();let i=r||t;if(i){f(!0),m(null),r&&n(r);try{let e=`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(i)}`,t=await(await fetch(e)).json();t.status===`ok`?u(t.items.slice(0,5)):m(`Failed to load feed.`)}catch{m(`Network error (CORS?)`)}finally{f(!1)}}};return(0,c.useEffect)(()=>{t&&h(void 0,t)},[]),(e?.w||2)<2?(0,l.jsxs)(`div`,{className:`h-full flex flex-col items-center justify-center p-2 theme-bg-card rounded-xl shadow-sm border theme-border overflow-hidden group`,children:[(0,l.jsx)(s,{size:20,className:`text-orange-500 mb-1`}),a.length>0?(0,l.jsx)(`span`,{className:`text-[8px] leading-tight font-bold theme-text-primary text-center line-clamp-2`,children:a[0].title}):(0,l.jsx)(`span`,{className:`text-[8px] theme-text-secondary`,children:`RSS`})]}):(0,l.jsxs)(`div`,{className:`h-full flex flex-col p-4 theme-bg-card rounded-xl shadow-sm border theme-border overflow-hidden`,children:[(0,l.jsxs)(`div`,{className:`flex items-center gap-2 mb-3`,children:[(0,l.jsx)(s,{size:16,className:`text-orange-500`}),(0,l.jsx)(`span`,{className:`text-xs font-bold theme-text-primary`,children:`RSS Reader`})]}),(0,l.jsxs)(`form`,{onSubmit:h,className:`flex gap-2 mb-3`,children:[(0,l.jsx)(`input`,{value:t,onChange:e=>n(e.target.value),placeholder:`Feed URL...`,className:`flex-1 text-xs px-2 py-1.5 rounded theme-bg-input border theme-border outline-none focus:border-[var(--btn-bg)]`}),(0,l.jsx)(`button`,{type:`submit`,disabled:d,className:`p-1.5 rounded bg-[var(--btn-bg)] text-white hover:opacity-90 disabled:opacity-50`,children:(0,l.jsx)(i,{size:14,className:d?`animate-spin`:``})})]}),(0,l.jsx)(`div`,{className:`flex gap-2 overflow-x-auto pb-2 mb-2 scrollbar-hide`,children:[{label:`뉴스`,url:`https://news.google.com/rss?hl=ko&gl=KR&ceid=KR:ko`},{label:`과학/기술`,url:`https://news.google.com/rss/headlines/section/topic/SCITECH?hl=ko&gl=KR&ceid=KR:ko`},{label:`엔터`,url:`https://news.google.com/rss/headlines/section/topic/ENTERTAINMENT?hl=ko&gl=KR&ceid=KR:ko`},{label:`경제`,url:`https://news.google.com/rss/headlines/section/topic/BUSINESS?hl=ko&gl=KR&ceid=KR:ko`},{label:`스포츠`,url:`https://news.google.com/rss/headlines/section/topic/SPORTS?hl=ko&gl=KR&ceid=KR:ko`}].map(e=>(0,l.jsx)(`button`,{onClick:()=>h(void 0,e.url),className:`flex-shrink-0 px-3 py-1 rounded-full text-[10px] font-bold theme-bg-card-secondary theme-text-secondary border theme-border hover:theme-bg-primary hover:text-white transition-colors`,children:e.label},e.label))}),p&&(0,l.jsx)(`div`,{className:`text-[10px] text-red-500 mb-2 px-1`,children:p}),(0,l.jsxs)(`div`,{className:`flex-1 overflow-y-auto min-h-0 scrollbar-hide space-y-2`,children:[a.length===0&&!d&&!p&&(0,l.jsx)(`div`,{className:`text-center py-4 text-[10px] theme-text-secondary`,children:`No feed loaded.`}),a.map((e,t)=>(0,l.jsx)(`div`,{className:`p-2 rounded-lg theme-bg-card-secondary hover:bg-[var(--bg-card-secondary)] transition-colors group`,children:(0,l.jsxs)(`a`,{href:e.link,target:`_blank`,rel:`noopener noreferrer`,className:`block`,children:[(0,l.jsx)(`h4`,{className:`text-xs font-bold theme-text-primary mb-1 line-clamp-2 group-hover:text-[var(--btn-bg)] transition-colors`,children:e.title}),(0,l.jsxs)(`div`,{className:`flex justify-between items-center mt-1`,children:[(0,l.jsx)(`span`,{className:`text-[9px] theme-text-secondary`,children:new Date(e.pubDate).toLocaleDateString()}),(0,l.jsx)(r,{size:10,className:`text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity`})]})]})},t))]})]})}export{u as RSSReader};