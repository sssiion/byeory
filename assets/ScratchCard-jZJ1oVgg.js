import{Nt as e,jt as t,tt as n,z as r}from"./index-D5xtHDuG.js";import{t as i}from"./Shared-CEi_3vw0.js";var a=e(t(),1),o=r();const s=({className:e,style:t,text:r=`Lucky Day!`,imageSrc:s,gridSize:c})=>{let l=(0,a.useRef)(null),[u,d]=(0,a.useState)(!1),[f,p]=(0,a.useState)(r),m=()=>{let e=[`1등 당첨!`,`꽝입니다`,`한번 더!`,`행운 가득`,`커피 당첨`];p(e[Math.floor(Math.random()*e.length)]),d(!1),h()},h=()=>{let e=l.current;if(!e)return;let t=e.getContext(`2d`);if(t){t.globalCompositeOperation=`source-over`,t.fillStyle=`#CCCCCC`,t.fillRect(0,0,e.width,e.height);for(let n=0;n<500;n++)t.fillStyle=Math.random()>.5?`#BBBBBB`:`#DDDDDD`,t.fillRect(Math.random()*e.width,Math.random()*e.height,2,2);t.fillStyle=`#888888`,t.font=`bold 20px sans-serif`,t.textAlign=`center`,t.textBaseline=`middle`,t.fillText(`SCRATCH ME`,e.width/2,e.height/2)}};(0,a.useEffect)(()=>{h()},[]);let g=(e,t)=>{let n=l.current;if(!n)return;let r=n.getContext(`2d`);r&&(r.globalCompositeOperation=`destination-out`,r.beginPath(),r.arc(e,t,15,0,Math.PI*2),r.fill(),_())},_=()=>{u||d(!0)};return(0,o.jsx)(i,{className:`bg-white select-none ${e||``}`,style:t,children:(0,o.jsxs)(`div`,{className:`w-full h-full relative flex items-center justify-center overflow-hidden`,children:[(0,o.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center bg-yellow-100 text-gray-800 font-bold text-xl flex-col gap-2`,children:s?(0,o.jsx)(`img`,{src:s,alt:`Prize`,className:`w-16 h-16 object-cover rounded`}):(0,o.jsx)(`span`,{children:f})}),(0,o.jsx)(`canvas`,{ref:l,width:300,height:300,className:`absolute inset-0 w-full h-full cursor-pointer z-10 touch-none`,onMouseMove:e=>{let t=e.currentTarget.getBoundingClientRect(),n=e.currentTarget.width/t.width,r=e.currentTarget.height/t.height,i=(e.clientX-t.left)*n,a=(e.clientY-t.top)*r;e.buttons===1&&g(i,a)},onMouseDown:e=>{let t=e.currentTarget.getBoundingClientRect(),n=e.currentTarget.width/t.width,r=e.currentTarget.height/t.height;g((e.clientX-t.left)*n,(e.clientY-t.top)*r)},style:{opacity:1}}),(0,o.jsx)(`button`,{onClick:m,className:`absolute bottom-2 right-2 z-20 p-1.5 bg-white/80 rounded-full shadow-sm hover:bg-white text-gray-600 transition-opacity`,title:`New Card`,children:(0,o.jsx)(n,{size:14})})]})})};export{s as ScratchCard};