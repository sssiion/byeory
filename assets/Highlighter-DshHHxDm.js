import{n as e,t}from"./SharedController-C6uhZVoO.js";import{At as n,G as r,Nt as i,dt as a,jt as o,z as s}from"./index-D5xtHDuG.js";import"./Shared-CEi_3vw0.js";var c=i(o(),1),l=n(),u=s(),d=({onClose:t})=>{let n=(0,c.useRef)(null),[i,a]=(0,c.useState)(!1),o=(0,c.useRef)(null),[s,d]=(0,c.useState)(()=>localStorage.getItem(`highlighter-color`)||`#ffff00`),[f,p]=(0,c.useState)(()=>parseInt(localStorage.getItem(`highlighter-width`)||`15`,10));(0,c.useEffect)(()=>{localStorage.setItem(`highlighter-color`,s),localStorage.setItem(`highlighter-width`,String(f)),o.current&&(o.current.strokeStyle=m(s,.4),o.current.lineWidth=f)},[s,f]);let m=(e,t)=>`rgba(${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}, ${t})`;(0,c.useEffect)(()=>{let e=n.current;if(!e)return;e.width=window.innerWidth,e.height=window.innerHeight;let t=e.getContext(`2d`);if(!t)return;t.lineCap=`round`,t.lineJoin=`round`,t.strokeStyle=m(s,.4),t.lineWidth=f,o.current=t;let r=()=>{e.width=window.innerWidth,e.height=window.innerHeight,o.current&&(o.current.lineCap=`round`,o.current.lineJoin=`round`,o.current.strokeStyle=m(s,.4),o.current.lineWidth=f)};return window.addEventListener(`resize`,r),()=>window.removeEventListener(`resize`,r)},[]);let h=e=>{o.current&&(o.current.beginPath(),o.current.moveTo(e.clientX,e.clientY),a(!0))},g=e=>{if(!i||!o.current)return;let t=()=>(Math.random()-.5)*2;o.current.lineTo(e.clientX+t(),e.clientY+t()),o.current.stroke()},_=()=>{o.current&&(o.current.closePath(),a(!1))};return(0,l.createPortal)((0,u.jsxs)(`div`,{className:`fixed inset-0 z-[9998]`,children:[(0,u.jsx)(`canvas`,{ref:n,className:`absolute inset-0 cursor-crosshair`,onMouseDown:h,onMouseMove:g,onMouseUp:_,onMouseLeave:_}),(0,u.jsxs)(`div`,{className:`absolute top-4 left-1/2 -translate-x-1/2 bg-white px-3 py-2 rounded-full shadow-[0_4px_20px_rgba(0,0,0,0.15)] flex items-center gap-3 border border-gray-100 pointer-events-auto animate-bounce-in`,children:[(0,u.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,u.jsx)(`span`,{className:`text-[10px] font-bold text-gray-400 uppercase tracking-wider`,children:`Highlighter`})}),(0,u.jsx)(`div`,{className:`w-[1px] h-4 bg-gray-200`}),(0,u.jsx)(`div`,{className:`relative w-6 h-6 rounded-full overflow-hidden border border-gray-200 shadow-sm cursor-pointer hover:scale-105 transition-transform`,children:(0,u.jsx)(`input`,{type:`color`,value:s,onChange:e=>d(e.target.value),className:`absolute inset-0 w-[150%] h-[150%] -top-1/4 -left-1/4 cursor-pointer p-0 border-0`})}),(0,u.jsx)(`input`,{type:`range`,min:`5`,max:`50`,value:f,onChange:e=>p(Number(e.target.value)),className:`w-20 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-yellow-400`}),(0,u.jsx)(`div`,{className:`w-[1px] h-4 bg-gray-200`}),(0,u.jsx)(`button`,{onClick:()=>{n.current&&n.current.getContext(`2d`)?.clearRect(0,0,n.current.width,n.current.height)},className:`text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full p-1.5 transition-colors`,title:`Clear All`,children:(0,u.jsx)(r,{size:16})}),(0,u.jsx)(`button`,{onClick:t,className:`bg-gray-100 text-gray-500 hover:bg-red-500 hover:text-white rounded-full p-1.5 transition-all`,title:`Exit Highlighter Mode`,children:(0,u.jsx)(e,{size:16})})]})]}),document.body)};const f=({className:e,style:n,gridSize:r})=>(0,u.jsx)(t,{className:e,style:n,label:`형광펜`,icon:(0,u.jsx)(a,{size:20}),storageKey:`effect-highlighter`,children:(0,u.jsx)(d,{})});export{f as Highlighter};