import{F as e,I as t,Nt as n,V as r,jt as i,nt as a,rt as o,z as s}from"./index-D5xtHDuG.js";import{n as c}from"./SDK-CcB7I40a.js";var l=n(i(),1),u=s();function d({gridSize:n}){let[i,s]=c(`widget-random-picker-items`,[`짜장면`,`짬뽕`,`탕수육`,`볶음밥`,`마라탕`,`쌀국수`,`돈까스`,`제육볶음`]),[d,f]=(0,l.useState)(``),[p,m]=(0,l.useState)(null),[h,g]=(0,l.useState)(!1),[_,v]=(0,l.useState)(0),y=e=>{e&&e.preventDefault(),d.trim()&&(s([...i,d.trim()]),f(``))},b=e=>{i.length<=2||s(i.filter((t,n)=>n!==e))},x=()=>{if(h||i.length<2)return;g(!0),m(null);let e=360/i.length,t=_+(1800+Math.random()*360+720);v(t),setTimeout(()=>{g(!1);let n=(360-t%360)%360;m(i[Math.floor(n/e)%i.length])},3e3)},S=[`#FF6B6B`,`#4ECDC4`,`#45B7D1`,`#96CEB4`,`#FFEEAD`,`#D4A5A5`,`#9B59B6`,`#3498DB`],C=n?.w||2,w=n?.h||2,T=C>=2&&w===1,E=C===1&&w>=2;return(0,u.jsxs)(`div`,{className:`h-full flex ${T?`flex-row items-center`:`flex-col`} p-2 theme-bg-card rounded-xl shadow-sm border theme-border overflow-hidden gap-2`,children:[(0,u.jsxs)(`div`,{className:`flex-1 flex flex-col items-center justify-center relative min-h-0 ${T?`max-w-[50%]`:``}`,children:[(0,u.jsxs)(`div`,{className:`relative ${T||E?`w-24 h-24`:`w-40 h-40 sm:w-48 sm:h-48`}`,children:[(0,u.jsx)(`div`,{className:`absolute -top-4 left-1/2 -translate-x-1/2 z-20 w-0 h-0 border-l-[8px] border-l-transparent border-r-[8px] border-r-transparent border-t-[16px] border-t-red-500 drop-shadow-md`}),(0,u.jsxs)(`div`,{className:`w-full h-full rounded-full overflow-hidden shadow-lg border-4 border-white relative transition-transform duration-[3000ms] cubic-bezier(0.2, 0.8, 0.2, 1)`,style:{transform:`rotate(${_}deg)`},children:[i.map((e,t)=>(0,u.jsx)(`div`,{className:`absolute w-full h-full top-0 left-0 flex justify-center pt-2 origin-[50%_50%]`,style:{transform:`rotate(${t*360/i.length}deg)`}},t)),(0,u.jsx)(`svg`,{viewBox:`0 0 100 100`,className:`w-full h-full absolute top-0 left-0 transform -rotate-90`,children:i.map((e,t)=>{let n=t*360/i.length,r=(t+1)*360/i.length,a=50+50*Math.cos(Math.PI*n/180),o=50+50*Math.sin(Math.PI*n/180),s=50+50*Math.cos(Math.PI*r/180),c=50+50*Math.sin(Math.PI*r/180);return(0,u.jsx)(`path`,{d:`M 50 50 L ${a} ${o} A 50 50 0 ${r-n>180?1:0} 1 ${s} ${c} Z`,fill:S[t%S.length],stroke:`white`,strokeWidth:`0.5`},t)})}),i.map((e,t)=>(0,u.jsx)(`div`,{className:`absolute top-1/2 left-1/2 w-full h-[1px] origin-left flex items-center`,style:{transform:`translate(0, -50%) rotate(${t*360/i.length+360/i.length/2-90}deg)`,width:`50%`},children:(0,u.jsx)(`span`,{className:`text-white text-[8px] font-bold truncate px-1 ml-2 w-16 text-center drop-shadow-sm`,style:{transform:`rotate(90deg)`},children:e})},t))]})]}),(0,u.jsx)(t,{children:p&&(0,u.jsx)(e.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:`absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm rounded-xl z-30`,children:(0,u.jsxs)(`div`,{className:`bg-white p-4 rounded-xl shadow-xl flex flex-col items-center gap-2 animate-bounce-slow min-w-[100px]`,children:[(0,u.jsx)(`span`,{className:`text-[10px] text-gray-500`,children:`Winner!`}),(0,u.jsx)(`h3`,{className:`text-lg font-bold text-[var(--btn-bg)]`,children:p}),(0,u.jsx)(`button`,{onClick:()=>m(null),className:`mt-1 px-3 py-1 bg-gray-100 rounded-full text-[10px] font-bold text-gray-600 hover:bg-gray-200`,children:`OK`})]})})})]}),(0,u.jsxs)(`div`,{className:`flex flex-col gap-1 ${T?`flex-1 h-full overflow-hidden`:`w-full`}`,children:[(0,u.jsxs)(`div`,{className:`flex ${E?`flex-col gap-1`:`gap-1`}`,children:[!E&&(0,u.jsxs)(`form`,{onSubmit:y,className:`flex-1 flex gap-1`,children:[(0,u.jsx)(`input`,{type:`text`,value:d,onChange:e=>f(e.target.value),placeholder:`Add...`,className:`flex-1 text-[10px] px-2 py-1 theme-bg-input rounded border theme-border outline-none focus:border-[var(--btn-bg)] w-full`}),(0,u.jsx)(`button`,{type:`submit`,disabled:h,className:`p-1 rounded bg-[var(--btn-bg)] text-white hover:opacity-90 disabled:opacity-50 shrink-0`,children:(0,u.jsx)(a,{size:14})})]}),(0,u.jsxs)(`button`,{onClick:x,disabled:h||i.length<2,className:`bg-[var(--btn-bg)] text-white font-bold rounded shadow-md hover:opacity-90 active:scale-95 transition-all disabled:opacity-50 flex items-center justify-center gap-1
                        ${E?`py-1 text-xs w-full`:`px-3 py-1 text-xs shrink-0`}
                        `,children:[(0,u.jsx)(o,{size:12,fill:`currentColor`}),` `,h?`...`:E?`SPIN!`:`SPIN`]})]}),!E&&(0,u.jsx)(`div`,{className:`flex flex-wrap gap-1 overflow-y-auto mt-1 scrollbar-hide flex-1 content-start`,children:i.map((e,t)=>(0,u.jsxs)(`span`,{className:`text-[9px] px-1.5 py-0.5 rounded-full theme-bg-card-secondary theme-text-secondary flex items-center gap-1 border border-gray-100`,children:[e,i.length>2&&!h&&(0,u.jsx)(`button`,{onClick:()=>b(t),className:`hover:text-red-500`,children:(0,u.jsx)(r,{size:8})})]},t))})]})]})}export{d as RandomPicker};