const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormulaBlock-CuunH_GJ.js","assets/Shared-CEi_3vw0.js","assets/SDK-CcB7I40a.js","assets/ChatDiary-Dv_1lS4Q.js","assets/MoodAnalytics-B14AdjUY.js","assets/WordMindMapWidget-B0-dWuQ_.js","assets/RandomDiary-BMFvBz3B.js","assets/TodoList-CrBuGT3k.js","assets/Weather-CwdpYVNJ.js","assets/wind-ygbTGRBg.js","assets/Clock-XUDa_QOS.js","assets/Streak-CQUGGYMq.js","assets/Battery-BOZVU-kF.js","assets/Common-_aDISHwp.js","assets/WorryShredder-BJMVmGzp.js","assets/ScrapNote-BRh6ECJl.js","assets/RecipeCard-DgfMNkQi.js","assets/WorryDoll-Dw5g3kBf.js","assets/UnitConverter-CXLNjfsi.js","assets/Calculator-BtedpN19.js","assets/RandomPicker-CRSm75ZM.js","assets/MapPin-rHXaWcmo.js","assets/RSSReader-BvgsyAVi.js","assets/TagCloud-BbHCR5-z.js","assets/ColorPalette-B8b8MoNL.js","assets/Typewriter-DFRFmOCg.js","assets/Polaroid-DeUbPCmg.js","assets/Gallery-D2XgtghY.js","assets/MoonPhase-DIuxrOUQ.js","assets/SwitchBoard-CSHzjvRR.js","assets/FortuneCookie-8heZXinc.js","assets/OOTDSketch-DITOoNMf.js","assets/BookCover-BIx-2l4W.js","assets/BubbleWrap-CrBySjiN.js","assets/Character-BLJ2y1Pp.js","assets/ColorChip-D7Rf3-za.js","assets/MovieScene-BqYmh6ve.js","assets/TicketStub-DAwMGnmg.js","assets/NeonSign-iCFwVHS7.js","assets/Candle-DvAwOY24.js","assets/TextScroller-DrPNmdYV.js","assets/OceanWave-ClOJID4R.js","assets/MovieTicket-D5FjUxMw.js","assets/Bookshelf-Bjo1qTar.js","assets/StampCollection-BG4tp9NL.js","assets/SkyMap-VVseZMom.js","assets/BirthFlower-DwtM-6Cj.js","assets/ReceiptPrinter-JkWpaiEo.js","assets/WeatherStickers-BQIlgMFd.js","assets/DessertCase-C4y1ydiy.js","assets/CatChaser-CEMmj72J.js","assets/SnowGlobe-ia-bKHn8.js","assets/LPPlayer-BXQHgqmW.js","assets/Bonfire-BgXFItvL.js","assets/Community-CqmobMir.js","assets/TimeMachine--3A2ylxn.js","assets/ScratchCard-jZJ1oVgg.js","assets/Switches-Bax1qKZB.js","assets/CursorTrail-wxBXb_cv.js","assets/SharedController-C6uhZVoO.js","assets/Highlighter-DshHHxDm.js","assets/PhysicsBox-DIM9V3iO.js","assets/Magnifier-B0uKsWn-.js","assets/RubyText-CJxzLxQU.js"])))=>i.map(i=>d[i]);
var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__esmMin=(fn,res)=>()=>(fn&&(res=fn(fn=0)),res),__commonJSMin=(cb,mod)=>()=>(mod||cb((mod={exports:{}}).exports,mod),mod.exports),__export=all=>{let target={};for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0});return target},__copyProps=(to,from,except,desc)=>{if(from&&typeof from==`object`||typeof from==`function`)for(var keys=__getOwnPropNames(from),i$4=0,n$4=keys.length,key$1;i$4<n$4;i$4++)key$1=keys[i$4],!__hasOwnProp.call(to,key$1)&&key$1!==except&&__defProp(to,key$1,{get:(k$3=>from[k$3]).bind(null,key$1),enumerable:!(desc=__getOwnPropDesc(from,key$1))||desc.enumerable});return to},__toESM=(mod,isNodeMode,target)=>(target=mod==null?{}:__create(__getProtoOf(mod)),__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,`default`,{value:mod,enumerable:!0}):target,mod)),__toCommonJS=mod=>__copyProps(__defProp({},`__esModule`,{value:!0}),mod),__require=(x$2=>typeof require<`u`?require:typeof Proxy<`u`?new Proxy(x$2,{get:(a$4,b$3)=>(typeof require<`u`?require:a$4)[b$3]}):x$2)(function(x$2){if(typeof require<`u`)return require.apply(this,arguments);throw Error('Calling `require` for "'+x$2+"\" in an environment that doesn't expose the `require` function.")});(function(){let relList=document.createElement(`link`).relList;if(relList&&relList.supports&&relList.supports(`modulepreload`))return;for(let link of document.querySelectorAll(`link[rel="modulepreload"]`))processPreload(link);new MutationObserver(mutations=>{for(let mutation of mutations)if(mutation.type===`childList`)for(let node of mutation.addedNodes)node.tagName===`LINK`&&node.rel===`modulepreload`&&processPreload(node)}).observe(document,{childList:!0,subtree:!0});function getFetchOpts(link){let fetchOpts={};return link.integrity&&(fetchOpts.integrity=link.integrity),link.referrerPolicy&&(fetchOpts.referrerPolicy=link.referrerPolicy),link.crossOrigin===`use-credentials`?fetchOpts.credentials=`include`:link.crossOrigin===`anonymous`?fetchOpts.credentials=`omit`:fetchOpts.credentials=`same-origin`,fetchOpts}function processPreload(link){if(link.ep)return;link.ep=!0;let fetchOpts=getFetchOpts(link);fetch(link.href,fetchOpts)}})();var require_react_production=__commonJSMin((exports=>{var REACT_ELEMENT_TYPE$3=Symbol.for(`react.transitional.element`),REACT_PORTAL_TYPE$3=Symbol.for(`react.portal`),REACT_FRAGMENT_TYPE$3=Symbol.for(`react.fragment`),REACT_STRICT_MODE_TYPE$2=Symbol.for(`react.strict_mode`),REACT_PROFILER_TYPE$2=Symbol.for(`react.profiler`),REACT_CONSUMER_TYPE$2=Symbol.for(`react.consumer`),REACT_CONTEXT_TYPE$2=Symbol.for(`react.context`),REACT_FORWARD_REF_TYPE$2=Symbol.for(`react.forward_ref`),REACT_SUSPENSE_TYPE$2=Symbol.for(`react.suspense`),REACT_MEMO_TYPE$2=Symbol.for(`react.memo`),REACT_LAZY_TYPE$2=Symbol.for(`react.lazy`),REACT_ACTIVITY_TYPE$1=Symbol.for(`react.activity`),MAYBE_ITERATOR_SYMBOL$1=Symbol.iterator;function getIteratorFn$1(maybeIterable){return typeof maybeIterable!=`object`||!maybeIterable?null:(maybeIterable=MAYBE_ITERATOR_SYMBOL$1&&maybeIterable[MAYBE_ITERATOR_SYMBOL$1]||maybeIterable[`@@iterator`],typeof maybeIterable==`function`?maybeIterable:null)}var ReactNoopUpdateQueue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},assign$1=Object.assign,emptyObject={};function Component$1(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}Component$1.prototype.isReactComponent={},Component$1.prototype.setState=function(partialState,callback){if(typeof partialState!=`object`&&typeof partialState!=`function`&&partialState!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,partialState,callback,`setState`)},Component$1.prototype.forceUpdate=function(callback){this.updater.enqueueForceUpdate(this,callback,`forceUpdate`)};function ComponentDummy(){}ComponentDummy.prototype=Component$1.prototype;function PureComponent$1(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}var pureComponentPrototype=PureComponent$1.prototype=new ComponentDummy;pureComponentPrototype.constructor=PureComponent$1,assign$1(pureComponentPrototype,Component$1.prototype),pureComponentPrototype.isPureReactComponent=!0;var isArrayImpl$1=Array.isArray;function noop$9(){}var ReactSharedInternals$2={H:null,A:null,T:null,S:null},hasOwnProperty$2=Object.prototype.hasOwnProperty;function ReactElement(type,key$1,props){var refProp=props.ref;return{$$typeof:REACT_ELEMENT_TYPE$3,type,key:key$1,ref:refProp===void 0?null:refProp,props}}function cloneAndReplaceKey(oldElement,newKey){return ReactElement(oldElement.type,newKey,oldElement.props)}function isValidElement$2(object){return typeof object==`object`&&!!object&&object.$$typeof===REACT_ELEMENT_TYPE$3}function escape$2(key$1){var escaperLookup={"=":`=0`,":":`=2`};return`$`+key$1.replace(/[=:]/g,function(match){return escaperLookup[match]})}var userProvidedKeyEscapeRegex=/\/+/g;function getElementKey(element,index$2){return typeof element==`object`&&element&&element.key!=null?escape$2(``+element.key):index$2.toString(36)}function resolveThenable(thenable){switch(thenable.status){case`fulfilled`:return thenable.value;case`rejected`:throw thenable.reason;default:switch(typeof thenable.status==`string`?thenable.then(noop$9,noop$9):(thenable.status=`pending`,thenable.then(function(fulfilledValue){thenable.status===`pending`&&(thenable.status=`fulfilled`,thenable.value=fulfilledValue)},function(error$1){thenable.status===`pending`&&(thenable.status=`rejected`,thenable.reason=error$1)})),thenable.status){case`fulfilled`:return thenable.value;case`rejected`:throw thenable.reason}}throw thenable}function mapIntoArray(children$1,array$1,escapedPrefix,nameSoFar,callback){var type=typeof children$1;(type===`undefined`||type===`boolean`)&&(children$1=null);var invokeCallback=!1;if(children$1===null)invokeCallback=!0;else switch(type){case`bigint`:case`string`:case`number`:invokeCallback=!0;break;case`object`:switch(children$1.$$typeof){case REACT_ELEMENT_TYPE$3:case REACT_PORTAL_TYPE$3:invokeCallback=!0;break;case REACT_LAZY_TYPE$2:return invokeCallback=children$1._init,mapIntoArray(invokeCallback(children$1._payload),array$1,escapedPrefix,nameSoFar,callback)}}if(invokeCallback)return callback=callback(children$1),invokeCallback=nameSoFar===``?`.`+getElementKey(children$1,0):nameSoFar,isArrayImpl$1(callback)?(escapedPrefix=``,invokeCallback!=null&&(escapedPrefix=invokeCallback.replace(userProvidedKeyEscapeRegex,`$&/`)+`/`),mapIntoArray(callback,array$1,escapedPrefix,``,function(c$3){return c$3})):callback!=null&&(isValidElement$2(callback)&&(callback=cloneAndReplaceKey(callback,escapedPrefix+(callback.key==null||children$1&&children$1.key===callback.key?``:(``+callback.key).replace(userProvidedKeyEscapeRegex,`$&/`)+`/`)+invokeCallback)),array$1.push(callback)),1;invokeCallback=0;var nextNamePrefix=nameSoFar===``?`.`:nameSoFar+`:`;if(isArrayImpl$1(children$1))for(var i$4=0;i$4<children$1.length;i$4++)nameSoFar=children$1[i$4],type=nextNamePrefix+getElementKey(nameSoFar,i$4),invokeCallback+=mapIntoArray(nameSoFar,array$1,escapedPrefix,type,callback);else if(i$4=getIteratorFn$1(children$1),typeof i$4==`function`)for(children$1=i$4.call(children$1),i$4=0;!(nameSoFar=children$1.next()).done;)nameSoFar=nameSoFar.value,type=nextNamePrefix+getElementKey(nameSoFar,i$4++),invokeCallback+=mapIntoArray(nameSoFar,array$1,escapedPrefix,type,callback);else if(type===`object`){if(typeof children$1.then==`function`)return mapIntoArray(resolveThenable(children$1),array$1,escapedPrefix,nameSoFar,callback);throw array$1=String(children$1),Error(`Objects are not valid as a React child (found: `+(array$1===`[object Object]`?`object with keys {`+Object.keys(children$1).join(`, `)+`}`:array$1)+`). If you meant to render a collection of children, use an array instead.`)}return invokeCallback}function mapChildren(children$1,func,context){if(children$1==null)return children$1;var result=[],count=0;return mapIntoArray(children$1,result,``,``,function(child){return func.call(context,child,count++)}),result}function lazyInitializer(payload){if(payload._status===-1){var ctor=payload._result;ctor=ctor(),ctor.then(function(moduleObject){(payload._status===0||payload._status===-1)&&(payload._status=1,payload._result=moduleObject)},function(error$1){(payload._status===0||payload._status===-1)&&(payload._status=2,payload._result=error$1)}),payload._status===-1&&(payload._status=0,payload._result=ctor)}if(payload._status===1)return payload._result.default;throw payload._result}var reportGlobalError$1=typeof reportError==`function`?reportError:function(error$1){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var event=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof error$1==`object`&&error$1&&typeof error$1.message==`string`?String(error$1.message):String(error$1),error:error$1});if(!window.dispatchEvent(event))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,error$1);return}console.error(error$1)},Children$1={map:mapChildren,forEach:function(children$1,forEachFunc,forEachContext){mapChildren(children$1,function(){forEachFunc.apply(this,arguments)},forEachContext)},count:function(children$1){var n$4=0;return mapChildren(children$1,function(){n$4++}),n$4},toArray:function(children$1){return mapChildren(children$1,function(child){return child})||[]},only:function(children$1){if(!isValidElement$2(children$1))throw Error(`React.Children.only expected to receive a single React element child.`);return children$1}};exports.Activity=REACT_ACTIVITY_TYPE$1,exports.Children=Children$1,exports.Component=Component$1,exports.Fragment=REACT_FRAGMENT_TYPE$3,exports.Profiler=REACT_PROFILER_TYPE$2,exports.PureComponent=PureComponent$1,exports.StrictMode=REACT_STRICT_MODE_TYPE$2,exports.Suspense=REACT_SUSPENSE_TYPE$2,exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ReactSharedInternals$2,exports.__COMPILER_RUNTIME={__proto__:null,c:function(size){return ReactSharedInternals$2.H.useMemoCache(size)}},exports.cache=function(fn){return function(){return fn.apply(null,arguments)}},exports.cacheSignal=function(){return null},exports.cloneElement=function(element,config,children$1){if(element==null)throw Error(`The argument must be a React element, but you passed `+element+`.`);var props=assign$1({},element.props),key$1=element.key;if(config!=null)for(propName in config.key!==void 0&&(key$1=``+config.key),config)!hasOwnProperty$2.call(config,propName)||propName===`key`||propName===`__self`||propName===`__source`||propName===`ref`&&config.ref===void 0||(props[propName]=config[propName]);var propName=arguments.length-2;if(propName===1)props.children=children$1;else if(1<propName){for(var childArray=Array(propName),i$4=0;i$4<propName;i$4++)childArray[i$4]=arguments[i$4+2];props.children=childArray}return ReactElement(element.type,key$1,props)},exports.createContext=function(defaultValue$3){return defaultValue$3={$$typeof:REACT_CONTEXT_TYPE$2,_currentValue:defaultValue$3,_currentValue2:defaultValue$3,_threadCount:0,Provider:null,Consumer:null},defaultValue$3.Provider=defaultValue$3,defaultValue$3.Consumer={$$typeof:REACT_CONSUMER_TYPE$2,_context:defaultValue$3},defaultValue$3},exports.createElement=function(type,config,children$1){var propName,props={},key$1=null;if(config!=null)for(propName in config.key!==void 0&&(key$1=``+config.key),config)hasOwnProperty$2.call(config,propName)&&propName!==`key`&&propName!==`__self`&&propName!==`__source`&&(props[propName]=config[propName]);var childrenLength=arguments.length-2;if(childrenLength===1)props.children=children$1;else if(1<childrenLength){for(var childArray=Array(childrenLength),i$4=0;i$4<childrenLength;i$4++)childArray[i$4]=arguments[i$4+2];props.children=childArray}if(type&&type.defaultProps)for(propName in childrenLength=type.defaultProps,childrenLength)props[propName]===void 0&&(props[propName]=childrenLength[propName]);return ReactElement(type,key$1,props)},exports.createRef=function(){return{current:null}},exports.forwardRef=function(render){return{$$typeof:REACT_FORWARD_REF_TYPE$2,render}},exports.isValidElement=isValidElement$2,exports.lazy=function(ctor){return{$$typeof:REACT_LAZY_TYPE$2,_payload:{_status:-1,_result:ctor},_init:lazyInitializer}},exports.memo=function(type,compare$1){return{$$typeof:REACT_MEMO_TYPE$2,type,compare:compare$1===void 0?null:compare$1}},exports.startTransition=function(scope$1){var prevTransition=ReactSharedInternals$2.T,currentTransition={};ReactSharedInternals$2.T=currentTransition;try{var returnValue=scope$1(),onStartTransitionFinish=ReactSharedInternals$2.S;onStartTransitionFinish!==null&&onStartTransitionFinish(currentTransition,returnValue),typeof returnValue==`object`&&returnValue&&typeof returnValue.then==`function`&&returnValue.then(noop$9,reportGlobalError$1)}catch(error$1){reportGlobalError$1(error$1)}finally{prevTransition!==null&&currentTransition.types!==null&&(prevTransition.types=currentTransition.types),ReactSharedInternals$2.T=prevTransition}},exports.unstable_useCacheRefresh=function(){return ReactSharedInternals$2.H.useCacheRefresh()},exports.use=function(usable){return ReactSharedInternals$2.H.use(usable)},exports.useActionState=function(action,initialState$2,permalink){return ReactSharedInternals$2.H.useActionState(action,initialState$2,permalink)},exports.useCallback=function(callback,deps){return ReactSharedInternals$2.H.useCallback(callback,deps)},exports.useContext=function(Context$1){return ReactSharedInternals$2.H.useContext(Context$1)},exports.useDebugValue=function(){},exports.useDeferredValue=function(value,initialValue){return ReactSharedInternals$2.H.useDeferredValue(value,initialValue)},exports.useEffect=function(create$2,deps){return ReactSharedInternals$2.H.useEffect(create$2,deps)},exports.useEffectEvent=function(callback){return ReactSharedInternals$2.H.useEffectEvent(callback)},exports.useId=function(){return ReactSharedInternals$2.H.useId()},exports.useImperativeHandle=function(ref,create$2,deps){return ReactSharedInternals$2.H.useImperativeHandle(ref,create$2,deps)},exports.useInsertionEffect=function(create$2,deps){return ReactSharedInternals$2.H.useInsertionEffect(create$2,deps)},exports.useLayoutEffect=function(create$2,deps){return ReactSharedInternals$2.H.useLayoutEffect(create$2,deps)},exports.useMemo=function(create$2,deps){return ReactSharedInternals$2.H.useMemo(create$2,deps)},exports.useOptimistic=function(passthrough,reducer$2){return ReactSharedInternals$2.H.useOptimistic(passthrough,reducer$2)},exports.useReducer=function(reducer$2,initialArg,init$1){return ReactSharedInternals$2.H.useReducer(reducer$2,initialArg,init$1)},exports.useRef=function(initialValue){return ReactSharedInternals$2.H.useRef(initialValue)},exports.useState=function(initialState$2){return ReactSharedInternals$2.H.useState(initialState$2)},exports.useSyncExternalStore=function(subscribe,getSnapshot,getServerSnapshot){return ReactSharedInternals$2.H.useSyncExternalStore(subscribe,getSnapshot,getServerSnapshot)},exports.useTransition=function(){return ReactSharedInternals$2.H.useTransition()},exports.version=`19.2.3`})),require_react=__commonJSMin(((exports,module)=>{module.exports=require_react_production()})),require_scheduler_production=__commonJSMin((exports=>{function push$1(heap,node){var index$2=heap.length;heap.push(node);a:for(;0<index$2;){var parentIndex=index$2-1>>>1,parent=heap[parentIndex];if(0<compare(parent,node))heap[parentIndex]=node,heap[index$2]=parent,index$2=parentIndex;else break a}}function peek(heap){return heap.length===0?null:heap[0]}function pop$1(heap){if(heap.length===0)return null;var first=heap[0],last=heap.pop();if(last!==first){heap[0]=last;a:for(var index$2=0,length=heap.length,halfLength=length>>>1;index$2<halfLength;){var leftIndex=2*(index$2+1)-1,left=heap[leftIndex],rightIndex=leftIndex+1,right=heap[rightIndex];if(0>compare(left,last))rightIndex<length&&0>compare(right,left)?(heap[index$2]=right,heap[rightIndex]=last,index$2=rightIndex):(heap[index$2]=left,heap[leftIndex]=last,index$2=leftIndex);else if(rightIndex<length&&0>compare(right,last))heap[index$2]=right,heap[rightIndex]=last,index$2=rightIndex;else break a}}return first}function compare(a$4,b$3){var diff=a$4.sortIndex-b$3.sortIndex;return diff===0?a$4.id-b$3.id:diff}if(exports.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var localPerformance=performance;exports.unstable_now=function(){return localPerformance.now()}}else{var localDate=Date,initialTime=localDate.now();exports.unstable_now=function(){return localDate.now()-initialTime}}var taskQueue=[],timerQueue=[],taskIdCounter=1,currentTask=null,currentPriorityLevel=3,isPerformingWork=!1,isHostCallbackScheduled=!1,isHostTimeoutScheduled=!1,needsPaint=!1,localSetTimeout=typeof setTimeout==`function`?setTimeout:null,localClearTimeout=typeof clearTimeout==`function`?clearTimeout:null,localSetImmediate=typeof setImmediate<`u`?setImmediate:null;function advanceTimers(currentTime){for(var timer$1=peek(timerQueue);timer$1!==null;){if(timer$1.callback===null)pop$1(timerQueue);else if(timer$1.startTime<=currentTime)pop$1(timerQueue),timer$1.sortIndex=timer$1.expirationTime,push$1(taskQueue,timer$1);else break;timer$1=peek(timerQueue)}}function handleTimeout(currentTime){if(isHostTimeoutScheduled=!1,advanceTimers(currentTime),!isHostCallbackScheduled)if(peek(taskQueue)!==null)isHostCallbackScheduled=!0,isMessageLoopRunning||(isMessageLoopRunning=!0,schedulePerformWorkUntilDeadline());else{var firstTimer=peek(timerQueue);firstTimer!==null&&requestHostTimeout(handleTimeout,firstTimer.startTime-currentTime)}}var isMessageLoopRunning=!1,taskTimeoutID=-1,frameInterval=5,startTime=-1;function shouldYieldToHost(){return needsPaint?!0:!(exports.unstable_now()-startTime<frameInterval)}function performWorkUntilDeadline(){if(needsPaint=!1,isMessageLoopRunning){var currentTime=exports.unstable_now();startTime=currentTime;var hasMoreWork=!0;try{a:{isHostCallbackScheduled=!1,isHostTimeoutScheduled&&(isHostTimeoutScheduled=!1,localClearTimeout(taskTimeoutID),taskTimeoutID=-1),isPerformingWork=!0;var previousPriorityLevel=currentPriorityLevel;try{b:{for(advanceTimers(currentTime),currentTask=peek(taskQueue);currentTask!==null&&!(currentTask.expirationTime>currentTime&&shouldYieldToHost());){var callback=currentTask.callback;if(typeof callback==`function`){currentTask.callback=null,currentPriorityLevel=currentTask.priorityLevel;var continuationCallback=callback(currentTask.expirationTime<=currentTime);if(currentTime=exports.unstable_now(),typeof continuationCallback==`function`){currentTask.callback=continuationCallback,advanceTimers(currentTime),hasMoreWork=!0;break b}currentTask===peek(taskQueue)&&pop$1(taskQueue),advanceTimers(currentTime)}else pop$1(taskQueue);currentTask=peek(taskQueue)}if(currentTask!==null)hasMoreWork=!0;else{var firstTimer=peek(timerQueue);firstTimer!==null&&requestHostTimeout(handleTimeout,firstTimer.startTime-currentTime),hasMoreWork=!1}}break a}finally{currentTask=null,currentPriorityLevel=previousPriorityLevel,isPerformingWork=!1}hasMoreWork=void 0}}finally{hasMoreWork?schedulePerformWorkUntilDeadline():isMessageLoopRunning=!1}}}var schedulePerformWorkUntilDeadline;if(typeof localSetImmediate==`function`)schedulePerformWorkUntilDeadline=function(){localSetImmediate(performWorkUntilDeadline)};else if(typeof MessageChannel<`u`){var channel=new MessageChannel,port=channel.port2;channel.port1.onmessage=performWorkUntilDeadline,schedulePerformWorkUntilDeadline=function(){port.postMessage(null)}}else schedulePerformWorkUntilDeadline=function(){localSetTimeout(performWorkUntilDeadline,0)};function requestHostTimeout(callback,ms){taskTimeoutID=localSetTimeout(function(){callback(exports.unstable_now())},ms)}exports.unstable_IdlePriority=5,exports.unstable_ImmediatePriority=1,exports.unstable_LowPriority=4,exports.unstable_NormalPriority=3,exports.unstable_Profiling=null,exports.unstable_UserBlockingPriority=2,exports.unstable_cancelCallback=function(task){task.callback=null},exports.unstable_forceFrameRate=function(fps){0>fps||125<fps?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):frameInterval=0<fps?Math.floor(1e3/fps):5},exports.unstable_getCurrentPriorityLevel=function(){return currentPriorityLevel},exports.unstable_next=function(eventHandler){switch(currentPriorityLevel){case 1:case 2:case 3:var priorityLevel=3;break;default:priorityLevel=currentPriorityLevel}var previousPriorityLevel=currentPriorityLevel;currentPriorityLevel=priorityLevel;try{return eventHandler()}finally{currentPriorityLevel=previousPriorityLevel}},exports.unstable_requestPaint=function(){needsPaint=!0},exports.unstable_runWithPriority=function(priorityLevel,eventHandler){switch(priorityLevel){case 1:case 2:case 3:case 4:case 5:break;default:priorityLevel=3}var previousPriorityLevel=currentPriorityLevel;currentPriorityLevel=priorityLevel;try{return eventHandler()}finally{currentPriorityLevel=previousPriorityLevel}},exports.unstable_scheduleCallback=function(priorityLevel,callback,options$1){var currentTime=exports.unstable_now();switch(typeof options$1==`object`&&options$1?(options$1=options$1.delay,options$1=typeof options$1==`number`&&0<options$1?currentTime+options$1:currentTime):options$1=currentTime,priorityLevel){case 1:var timeout$1=-1;break;case 2:timeout$1=250;break;case 5:timeout$1=1073741823;break;case 4:timeout$1=1e4;break;default:timeout$1=5e3}return timeout$1=options$1+timeout$1,priorityLevel={id:taskIdCounter++,callback,priorityLevel,startTime:options$1,expirationTime:timeout$1,sortIndex:-1},options$1>currentTime?(priorityLevel.sortIndex=options$1,push$1(timerQueue,priorityLevel),peek(taskQueue)===null&&priorityLevel===peek(timerQueue)&&(isHostTimeoutScheduled?(localClearTimeout(taskTimeoutID),taskTimeoutID=-1):isHostTimeoutScheduled=!0,requestHostTimeout(handleTimeout,options$1-currentTime))):(priorityLevel.sortIndex=timeout$1,push$1(taskQueue,priorityLevel),isHostCallbackScheduled||isPerformingWork||(isHostCallbackScheduled=!0,isMessageLoopRunning||(isMessageLoopRunning=!0,schedulePerformWorkUntilDeadline()))),priorityLevel},exports.unstable_shouldYield=shouldYieldToHost,exports.unstable_wrapCallback=function(callback){var parentPriorityLevel=currentPriorityLevel;return function(){var previousPriorityLevel=currentPriorityLevel;currentPriorityLevel=parentPriorityLevel;try{return callback.apply(this,arguments)}finally{currentPriorityLevel=previousPriorityLevel}}}})),require_scheduler=__commonJSMin(((exports,module)=>{module.exports=require_scheduler_production()})),require_react_dom_production=__commonJSMin((exports=>{var React$117=require_react();function formatProdErrorMessage$3(code){var url=`https://react.dev/errors/`+code;if(1<arguments.length){url+=`?args[]=`+encodeURIComponent(arguments[1]);for(var i$4=2;i$4<arguments.length;i$4++)url+=`&args[]=`+encodeURIComponent(arguments[i$4])}return`Minified React error #`+code+`; visit `+url+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function noop$7(){}var Internals={d:{f:noop$7,r:function(){throw Error(formatProdErrorMessage$3(522))},D:noop$7,C:noop$7,L:noop$7,m:noop$7,X:noop$7,S:noop$7,M:noop$7},p:0,findDOMNode:null},REACT_PORTAL_TYPE$2=Symbol.for(`react.portal`);function createPortal$1$1(children$1,containerInfo,implementation){var key$1=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:REACT_PORTAL_TYPE$2,key:key$1==null?null:``+key$1,children:children$1,containerInfo,implementation}}var ReactSharedInternals$1=React$117.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function getCrossOriginStringAs(as,input){if(as===`font`)return``;if(typeof input==`string`)return input===`use-credentials`?input:``}exports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Internals,exports.createPortal=function(children$1,container){var key$1=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!container||container.nodeType!==1&&container.nodeType!==9&&container.nodeType!==11)throw Error(formatProdErrorMessage$3(299));return createPortal$1$1(children$1,container,null,key$1)},exports.flushSync=function(fn){var previousTransition=ReactSharedInternals$1.T,previousUpdatePriority=Internals.p;try{if(ReactSharedInternals$1.T=null,Internals.p=2,fn)return fn()}finally{ReactSharedInternals$1.T=previousTransition,Internals.p=previousUpdatePriority,Internals.d.f()}},exports.preconnect=function(href,options$1){typeof href==`string`&&(options$1?(options$1=options$1.crossOrigin,options$1=typeof options$1==`string`?options$1===`use-credentials`?options$1:``:void 0):options$1=null,Internals.d.C(href,options$1))},exports.prefetchDNS=function(href){typeof href==`string`&&Internals.d.D(href)},exports.preinit=function(href,options$1){if(typeof href==`string`&&options$1&&typeof options$1.as==`string`){var as=options$1.as,crossOrigin=getCrossOriginStringAs(as,options$1.crossOrigin),integrity=typeof options$1.integrity==`string`?options$1.integrity:void 0,fetchPriority=typeof options$1.fetchPriority==`string`?options$1.fetchPriority:void 0;as===`style`?Internals.d.S(href,typeof options$1.precedence==`string`?options$1.precedence:void 0,{crossOrigin,integrity,fetchPriority}):as===`script`&&Internals.d.X(href,{crossOrigin,integrity,fetchPriority,nonce:typeof options$1.nonce==`string`?options$1.nonce:void 0})}},exports.preinitModule=function(href,options$1){if(typeof href==`string`)if(typeof options$1==`object`&&options$1){if(options$1.as==null||options$1.as===`script`){var crossOrigin=getCrossOriginStringAs(options$1.as,options$1.crossOrigin);Internals.d.M(href,{crossOrigin,integrity:typeof options$1.integrity==`string`?options$1.integrity:void 0,nonce:typeof options$1.nonce==`string`?options$1.nonce:void 0})}}else options$1??Internals.d.M(href)},exports.preload=function(href,options$1){if(typeof href==`string`&&typeof options$1==`object`&&options$1&&typeof options$1.as==`string`){var as=options$1.as,crossOrigin=getCrossOriginStringAs(as,options$1.crossOrigin);Internals.d.L(href,as,{crossOrigin,integrity:typeof options$1.integrity==`string`?options$1.integrity:void 0,nonce:typeof options$1.nonce==`string`?options$1.nonce:void 0,type:typeof options$1.type==`string`?options$1.type:void 0,fetchPriority:typeof options$1.fetchPriority==`string`?options$1.fetchPriority:void 0,referrerPolicy:typeof options$1.referrerPolicy==`string`?options$1.referrerPolicy:void 0,imageSrcSet:typeof options$1.imageSrcSet==`string`?options$1.imageSrcSet:void 0,imageSizes:typeof options$1.imageSizes==`string`?options$1.imageSizes:void 0,media:typeof options$1.media==`string`?options$1.media:void 0})}},exports.preloadModule=function(href,options$1){if(typeof href==`string`)if(options$1){var crossOrigin=getCrossOriginStringAs(options$1.as,options$1.crossOrigin);Internals.d.m(href,{as:typeof options$1.as==`string`&&options$1.as!==`script`?options$1.as:void 0,crossOrigin,integrity:typeof options$1.integrity==`string`?options$1.integrity:void 0})}else Internals.d.m(href)},exports.requestFormReset=function(form){Internals.d.r(form)},exports.unstable_batchedUpdates=function(fn,a$4){return fn(a$4)},exports.useFormState=function(action,initialState$2,permalink){return ReactSharedInternals$1.H.useFormState(action,initialState$2,permalink)},exports.useFormStatus=function(){return ReactSharedInternals$1.H.useHostTransitionStatus()},exports.version=`19.2.3`})),require_react_dom=__commonJSMin(((exports,module)=>{function checkDCE$1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE$1)}catch(err){console.error(err)}}checkDCE$1(),module.exports=require_react_dom_production()})),require_react_dom_client_production=__commonJSMin((exports=>{var Scheduler=require_scheduler(),React$116=require_react(),ReactDOM$3=require_react_dom();function formatProdErrorMessage$2(code){var url=`https://react.dev/errors/`+code;if(1<arguments.length){url+=`?args[]=`+encodeURIComponent(arguments[1]);for(var i$4=2;i$4<arguments.length;i$4++)url+=`&args[]=`+encodeURIComponent(arguments[i$4])}return`Minified React error #`+code+`; visit `+url+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function isValidContainer(node){return!(!node||node.nodeType!==1&&node.nodeType!==9&&node.nodeType!==11)}function getNearestMountedFiber(fiber){var node=fiber,nearestMounted=fiber;if(fiber.alternate)for(;node.return;)node=node.return;else{fiber=node;do node=fiber,node.flags&4098&&(nearestMounted=node.return),fiber=node.return;while(fiber)}return node.tag===3?nearestMounted:null}function getSuspenseInstanceFromFiber(fiber){if(fiber.tag===13){var suspenseState=fiber.memoizedState;if(suspenseState===null&&(fiber=fiber.alternate,fiber!==null&&(suspenseState=fiber.memoizedState)),suspenseState!==null)return suspenseState.dehydrated}return null}function getActivityInstanceFromFiber(fiber){if(fiber.tag===31){var activityState=fiber.memoizedState;if(activityState===null&&(fiber=fiber.alternate,fiber!==null&&(activityState=fiber.memoizedState)),activityState!==null)return activityState.dehydrated}return null}function assertIsMounted(fiber){if(getNearestMountedFiber(fiber)!==fiber)throw Error(formatProdErrorMessage$2(188))}function findCurrentFiberUsingSlowPath(fiber){var alternate=fiber.alternate;if(!alternate){if(alternate=getNearestMountedFiber(fiber),alternate===null)throw Error(formatProdErrorMessage$2(188));return alternate===fiber?fiber:null}for(var a$4=fiber,b$3=alternate;;){var parentA=a$4.return;if(parentA===null)break;var parentB=parentA.alternate;if(parentB===null){if(b$3=parentA.return,b$3!==null){a$4=b$3;continue}break}if(parentA.child===parentB.child){for(parentB=parentA.child;parentB;){if(parentB===a$4)return assertIsMounted(parentA),fiber;if(parentB===b$3)return assertIsMounted(parentA),alternate;parentB=parentB.sibling}throw Error(formatProdErrorMessage$2(188))}if(a$4.return!==b$3.return)a$4=parentA,b$3=parentB;else{for(var didFindChild=!1,child$0=parentA.child;child$0;){if(child$0===a$4){didFindChild=!0,a$4=parentA,b$3=parentB;break}if(child$0===b$3){didFindChild=!0,b$3=parentA,a$4=parentB;break}child$0=child$0.sibling}if(!didFindChild){for(child$0=parentB.child;child$0;){if(child$0===a$4){didFindChild=!0,a$4=parentB,b$3=parentA;break}if(child$0===b$3){didFindChild=!0,b$3=parentB,a$4=parentA;break}child$0=child$0.sibling}if(!didFindChild)throw Error(formatProdErrorMessage$2(189))}}if(a$4.alternate!==b$3)throw Error(formatProdErrorMessage$2(190))}if(a$4.tag!==3)throw Error(formatProdErrorMessage$2(188));return a$4.stateNode.current===a$4?fiber:alternate}function findCurrentHostFiberImpl(node){var tag=node.tag;if(tag===5||tag===26||tag===27||tag===6)return node;for(node=node.child;node!==null;){if(tag=findCurrentHostFiberImpl(node),tag!==null)return tag;node=node.sibling}return null}var assign=Object.assign,REACT_LEGACY_ELEMENT_TYPE=Symbol.for(`react.element`),REACT_ELEMENT_TYPE$2=Symbol.for(`react.transitional.element`),REACT_PORTAL_TYPE$1=Symbol.for(`react.portal`),REACT_FRAGMENT_TYPE$2=Symbol.for(`react.fragment`),REACT_STRICT_MODE_TYPE$1=Symbol.for(`react.strict_mode`),REACT_PROFILER_TYPE$1=Symbol.for(`react.profiler`),REACT_CONSUMER_TYPE$1=Symbol.for(`react.consumer`),REACT_CONTEXT_TYPE$1=Symbol.for(`react.context`),REACT_FORWARD_REF_TYPE$1=Symbol.for(`react.forward_ref`),REACT_SUSPENSE_TYPE$1=Symbol.for(`react.suspense`),REACT_SUSPENSE_LIST_TYPE$1=Symbol.for(`react.suspense_list`),REACT_MEMO_TYPE$1=Symbol.for(`react.memo`),REACT_LAZY_TYPE$1=Symbol.for(`react.lazy`),REACT_ACTIVITY_TYPE=Symbol.for(`react.activity`),REACT_MEMO_CACHE_SENTINEL=Symbol.for(`react.memo_cache_sentinel`),MAYBE_ITERATOR_SYMBOL=Symbol.iterator;function getIteratorFn(maybeIterable){return typeof maybeIterable!=`object`||!maybeIterable?null:(maybeIterable=MAYBE_ITERATOR_SYMBOL&&maybeIterable[MAYBE_ITERATOR_SYMBOL]||maybeIterable[`@@iterator`],typeof maybeIterable==`function`?maybeIterable:null)}var REACT_CLIENT_REFERENCE=Symbol.for(`react.client.reference`);function getComponentNameFromType(type){if(type==null)return null;if(typeof type==`function`)return type.$$typeof===REACT_CLIENT_REFERENCE?null:type.displayName||type.name||null;if(typeof type==`string`)return type;switch(type){case REACT_FRAGMENT_TYPE$2:return`Fragment`;case REACT_PROFILER_TYPE$1:return`Profiler`;case REACT_STRICT_MODE_TYPE$1:return`StrictMode`;case REACT_SUSPENSE_TYPE$1:return`Suspense`;case REACT_SUSPENSE_LIST_TYPE$1:return`SuspenseList`;case REACT_ACTIVITY_TYPE:return`Activity`}if(typeof type==`object`)switch(type.$$typeof){case REACT_PORTAL_TYPE$1:return`Portal`;case REACT_CONTEXT_TYPE$1:return type.displayName||`Context`;case REACT_CONSUMER_TYPE$1:return(type._context.displayName||`Context`)+`.Consumer`;case REACT_FORWARD_REF_TYPE$1:var innerType=type.render;return type=type.displayName,type||=(type=innerType.displayName||innerType.name||``,type===``?`ForwardRef`:`ForwardRef(`+type+`)`),type;case REACT_MEMO_TYPE$1:return innerType=type.displayName||null,innerType===null?getComponentNameFromType(type.type)||`Memo`:innerType;case REACT_LAZY_TYPE$1:innerType=type._payload,type=type._init;try{return getComponentNameFromType(type(innerType))}catch{}}return null}var isArrayImpl=Array.isArray,ReactSharedInternals=React$116.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ReactDOMSharedInternals=ReactDOM$3.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,sharedNotPendingObject={pending:!1,data:null,method:null,action:null},valueStack=[],index$1=-1;function createCursor(defaultValue$3){return{current:defaultValue$3}}function pop(cursor){0>index$1||(cursor.current=valueStack[index$1],valueStack[index$1]=null,index$1--)}function push(cursor,value){index$1++,valueStack[index$1]=cursor.current,cursor.current=value}var contextStackCursor=createCursor(null),contextFiberStackCursor=createCursor(null),rootInstanceStackCursor=createCursor(null),hostTransitionProviderCursor=createCursor(null);function pushHostContainer(fiber,nextRootInstance){switch(push(rootInstanceStackCursor,nextRootInstance),push(contextFiberStackCursor,fiber),push(contextStackCursor,null),nextRootInstance.nodeType){case 9:case 11:fiber=(fiber=nextRootInstance.documentElement)&&(fiber=fiber.namespaceURI)?getOwnHostContext(fiber):0;break;default:if(fiber=nextRootInstance.tagName,nextRootInstance=nextRootInstance.namespaceURI)nextRootInstance=getOwnHostContext(nextRootInstance),fiber=getChildHostContextProd(nextRootInstance,fiber);else switch(fiber){case`svg`:fiber=1;break;case`math`:fiber=2;break;default:fiber=0}}pop(contextStackCursor),push(contextStackCursor,fiber)}function popHostContainer(){pop(contextStackCursor),pop(contextFiberStackCursor),pop(rootInstanceStackCursor)}function pushHostContext(fiber){fiber.memoizedState!==null&&push(hostTransitionProviderCursor,fiber);var context=contextStackCursor.current,JSCompiler_inline_result=getChildHostContextProd(context,fiber.type);context!==JSCompiler_inline_result&&(push(contextFiberStackCursor,fiber),push(contextStackCursor,JSCompiler_inline_result))}function popHostContext(fiber){contextFiberStackCursor.current===fiber&&(pop(contextStackCursor),pop(contextFiberStackCursor)),hostTransitionProviderCursor.current===fiber&&(pop(hostTransitionProviderCursor),HostTransitionContext._currentValue=sharedNotPendingObject)}var prefix$3,suffix;function describeBuiltInComponentFrame(name){if(prefix$3===void 0)try{throw Error()}catch(x$2){var match=x$2.stack.trim().match(/\n( *(at )?)/);prefix$3=match&&match[1]||``,suffix=-1<x$2.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<x$2.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+prefix$3+name+suffix}var reentry=!1;function describeNativeComponentFrame(fn,construct){if(!fn||reentry)return``;reentry=!0;var previousPrepareStackTrace=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var RunInRootFrame={DetermineComponentFrameRoot:function(){try{if(construct){var Fake=function(){throw Error()};if(Object.defineProperty(Fake.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(Fake,[])}catch(x$2){var control=x$2}Reflect.construct(fn,[],Fake)}else{try{Fake.call()}catch(x$1$1){control=x$1$1}fn.call(Fake.prototype)}}else{try{throw Error()}catch(x$2){control=x$2}(Fake=fn())&&typeof Fake.catch==`function`&&Fake.catch(function(){})}}catch(sample){if(sample&&control&&typeof sample.stack==`string`)return[sample.stack,control.stack]}return[null,null]}};RunInRootFrame.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var namePropDescriptor=Object.getOwnPropertyDescriptor(RunInRootFrame.DetermineComponentFrameRoot,`name`);namePropDescriptor&&namePropDescriptor.configurable&&Object.defineProperty(RunInRootFrame.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var _RunInRootFrame$Deter=RunInRootFrame.DetermineComponentFrameRoot(),sampleStack=_RunInRootFrame$Deter[0],controlStack=_RunInRootFrame$Deter[1];if(sampleStack&&controlStack){var sampleLines=sampleStack.split(`
`),controlLines=controlStack.split(`
`);for(namePropDescriptor=RunInRootFrame=0;RunInRootFrame<sampleLines.length&&!sampleLines[RunInRootFrame].includes(`DetermineComponentFrameRoot`);)RunInRootFrame++;for(;namePropDescriptor<controlLines.length&&!controlLines[namePropDescriptor].includes(`DetermineComponentFrameRoot`);)namePropDescriptor++;if(RunInRootFrame===sampleLines.length||namePropDescriptor===controlLines.length)for(RunInRootFrame=sampleLines.length-1,namePropDescriptor=controlLines.length-1;1<=RunInRootFrame&&0<=namePropDescriptor&&sampleLines[RunInRootFrame]!==controlLines[namePropDescriptor];)namePropDescriptor--;for(;1<=RunInRootFrame&&0<=namePropDescriptor;RunInRootFrame--,namePropDescriptor--)if(sampleLines[RunInRootFrame]!==controlLines[namePropDescriptor]){if(RunInRootFrame!==1||namePropDescriptor!==1)do if(RunInRootFrame--,namePropDescriptor--,0>namePropDescriptor||sampleLines[RunInRootFrame]!==controlLines[namePropDescriptor]){var frame$2=`
`+sampleLines[RunInRootFrame].replace(` at new `,` at `);return fn.displayName&&frame$2.includes(`<anonymous>`)&&(frame$2=frame$2.replace(`<anonymous>`,fn.displayName)),frame$2}while(1<=RunInRootFrame&&0<=namePropDescriptor);break}}}finally{reentry=!1,Error.prepareStackTrace=previousPrepareStackTrace}return(previousPrepareStackTrace=fn?fn.displayName||fn.name:``)?describeBuiltInComponentFrame(previousPrepareStackTrace):``}function describeFiber(fiber,childFiber){switch(fiber.tag){case 26:case 27:case 5:return describeBuiltInComponentFrame(fiber.type);case 16:return describeBuiltInComponentFrame(`Lazy`);case 13:return fiber.child!==childFiber&&childFiber!==null?describeBuiltInComponentFrame(`Suspense Fallback`):describeBuiltInComponentFrame(`Suspense`);case 19:return describeBuiltInComponentFrame(`SuspenseList`);case 0:case 15:return describeNativeComponentFrame(fiber.type,!1);case 11:return describeNativeComponentFrame(fiber.type.render,!1);case 1:return describeNativeComponentFrame(fiber.type,!0);case 31:return describeBuiltInComponentFrame(`Activity`);default:return``}}function getStackByFiberInDevAndProd(workInProgress$1){try{var info=``,previous=null;do info+=describeFiber(workInProgress$1,previous),previous=workInProgress$1,workInProgress$1=workInProgress$1.return;while(workInProgress$1);return info}catch(x$2){return`
Error generating stack: `+x$2.message+`
`+x$2.stack}}var hasOwnProperty$1=Object.prototype.hasOwnProperty,scheduleCallback$3=Scheduler.unstable_scheduleCallback,cancelCallback$1=Scheduler.unstable_cancelCallback,shouldYield=Scheduler.unstable_shouldYield,requestPaint=Scheduler.unstable_requestPaint,now$3=Scheduler.unstable_now,getCurrentPriorityLevel=Scheduler.unstable_getCurrentPriorityLevel,ImmediatePriority=Scheduler.unstable_ImmediatePriority,UserBlockingPriority=Scheduler.unstable_UserBlockingPriority,NormalPriority$1=Scheduler.unstable_NormalPriority,LowPriority=Scheduler.unstable_LowPriority,IdlePriority=Scheduler.unstable_IdlePriority,log$1=Scheduler.log,unstable_setDisableYieldValue=Scheduler.unstable_setDisableYieldValue,rendererID=null,injectedHook=null;function setIsStrictModeForDevtools(newIsStrictMode){if(typeof log$1==`function`&&unstable_setDisableYieldValue(newIsStrictMode),injectedHook&&typeof injectedHook.setStrictMode==`function`)try{injectedHook.setStrictMode(rendererID,newIsStrictMode)}catch{}}var clz32=Math.clz32?Math.clz32:clz32Fallback,log$2=Math.log,LN2=Math.LN2;function clz32Fallback(x$2){return x$2>>>=0,x$2===0?32:31-(log$2(x$2)/LN2|0)|0}var nextTransitionUpdateLane=256,nextTransitionDeferredLane=262144,nextRetryLane=4194304;function getHighestPriorityLanes(lanes){var pendingSyncLanes=lanes&42;if(pendingSyncLanes!==0)return pendingSyncLanes;switch(lanes&-lanes){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return lanes&261888;case 262144:case 524288:case 1048576:case 2097152:return lanes&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return lanes&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return lanes}}function getNextLanes(root$3,wipLanes,rootHasPendingCommit){var pendingLanes=root$3.pendingLanes;if(pendingLanes===0)return 0;var nextLanes=0,suspendedLanes=root$3.suspendedLanes,pingedLanes=root$3.pingedLanes;root$3=root$3.warmLanes;var nonIdlePendingLanes=pendingLanes&134217727;return nonIdlePendingLanes===0?(nonIdlePendingLanes=pendingLanes&~suspendedLanes,nonIdlePendingLanes===0?pingedLanes===0?rootHasPendingCommit||(rootHasPendingCommit=pendingLanes&~root$3,rootHasPendingCommit!==0&&(nextLanes=getHighestPriorityLanes(rootHasPendingCommit))):nextLanes=getHighestPriorityLanes(pingedLanes):nextLanes=getHighestPriorityLanes(nonIdlePendingLanes)):(pendingLanes=nonIdlePendingLanes&~suspendedLanes,pendingLanes===0?(pingedLanes&=nonIdlePendingLanes,pingedLanes===0?rootHasPendingCommit||(rootHasPendingCommit=nonIdlePendingLanes&~root$3,rootHasPendingCommit!==0&&(nextLanes=getHighestPriorityLanes(rootHasPendingCommit))):nextLanes=getHighestPriorityLanes(pingedLanes)):nextLanes=getHighestPriorityLanes(pendingLanes)),nextLanes===0?0:wipLanes!==0&&wipLanes!==nextLanes&&(wipLanes&suspendedLanes)===0&&(suspendedLanes=nextLanes&-nextLanes,rootHasPendingCommit=wipLanes&-wipLanes,suspendedLanes>=rootHasPendingCommit||suspendedLanes===32&&rootHasPendingCommit&4194048)?wipLanes:nextLanes}function checkIfRootIsPrerendering(root$3,renderLanes$1){return(root$3.pendingLanes&~(root$3.suspendedLanes&~root$3.pingedLanes)&renderLanes$1)===0}function computeExpirationTime(lane,currentTime){switch(lane){case 1:case 2:case 4:case 8:case 64:return currentTime+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return currentTime+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function claimNextRetryLane(){var lane=nextRetryLane;return nextRetryLane<<=1,!(nextRetryLane&62914560)&&(nextRetryLane=4194304),lane}function createLaneMap(initial){for(var laneMap=[],i$4=0;31>i$4;i$4++)laneMap.push(initial);return laneMap}function markRootUpdated$1(root$3,updateLane){root$3.pendingLanes|=updateLane,updateLane!==268435456&&(root$3.suspendedLanes=0,root$3.pingedLanes=0,root$3.warmLanes=0)}function markRootFinished(root$3,finishedLanes,remainingLanes,spawnedLane,updatedLanes,suspendedRetryLanes){var previouslyPendingLanes=root$3.pendingLanes;root$3.pendingLanes=remainingLanes,root$3.suspendedLanes=0,root$3.pingedLanes=0,root$3.warmLanes=0,root$3.expiredLanes&=remainingLanes,root$3.entangledLanes&=remainingLanes,root$3.errorRecoveryDisabledLanes&=remainingLanes,root$3.shellSuspendCounter=0;var entanglements=root$3.entanglements,expirationTimes=root$3.expirationTimes,hiddenUpdates=root$3.hiddenUpdates;for(remainingLanes=previouslyPendingLanes&~remainingLanes;0<remainingLanes;){var index$7=31-clz32(remainingLanes),lane=1<<index$7;entanglements[index$7]=0,expirationTimes[index$7]=-1;var hiddenUpdatesForLane=hiddenUpdates[index$7];if(hiddenUpdatesForLane!==null)for(hiddenUpdates[index$7]=null,index$7=0;index$7<hiddenUpdatesForLane.length;index$7++){var update$1=hiddenUpdatesForLane[index$7];update$1!==null&&(update$1.lane&=-536870913)}remainingLanes&=~lane}spawnedLane!==0&&markSpawnedDeferredLane(root$3,spawnedLane,0),suspendedRetryLanes!==0&&updatedLanes===0&&root$3.tag!==0&&(root$3.suspendedLanes|=suspendedRetryLanes&~(previouslyPendingLanes&~finishedLanes))}function markSpawnedDeferredLane(root$3,spawnedLane,entangledLanes){root$3.pendingLanes|=spawnedLane,root$3.suspendedLanes&=~spawnedLane;var spawnedLaneIndex=31-clz32(spawnedLane);root$3.entangledLanes|=spawnedLane,root$3.entanglements[spawnedLaneIndex]=root$3.entanglements[spawnedLaneIndex]|1073741824|entangledLanes&261930}function markRootEntangled(root$3,entangledLanes){var rootEntangledLanes=root$3.entangledLanes|=entangledLanes;for(root$3=root$3.entanglements;rootEntangledLanes;){var index$8=31-clz32(rootEntangledLanes),lane=1<<index$8;lane&entangledLanes|root$3[index$8]&entangledLanes&&(root$3[index$8]|=entangledLanes),rootEntangledLanes&=~lane}}function getBumpedLaneForHydration(root$3,renderLanes$1){var renderLane=renderLanes$1&-renderLanes$1;return renderLane=renderLane&42?1:getBumpedLaneForHydrationByLane(renderLane),(renderLane&(root$3.suspendedLanes|renderLanes$1))===0?renderLane:0}function getBumpedLaneForHydrationByLane(lane){switch(lane){case 2:lane=1;break;case 8:lane=4;break;case 32:lane=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:lane=128;break;case 268435456:lane=134217728;break;default:lane=0}return lane}function lanesToEventPriority(lanes){return lanes&=-lanes,2<lanes?8<lanes?lanes&134217727?32:268435456:8:2}function resolveUpdatePriority(){var updatePriority=ReactDOMSharedInternals.p;return updatePriority===0?(updatePriority=window.event,updatePriority===void 0?32:getEventPriority(updatePriority.type)):updatePriority}function runWithPriority(priority,fn){var previousPriority=ReactDOMSharedInternals.p;try{return ReactDOMSharedInternals.p=priority,fn()}finally{ReactDOMSharedInternals.p=previousPriority}}var randomKey=Math.random().toString(36).slice(2),internalInstanceKey=`__reactFiber$`+randomKey,internalPropsKey=`__reactProps$`+randomKey,internalContainerInstanceKey=`__reactContainer$`+randomKey,internalEventHandlersKey=`__reactEvents$`+randomKey,internalEventHandlerListenersKey=`__reactListeners$`+randomKey,internalEventHandlesSetKey=`__reactHandles$`+randomKey,internalRootNodeResourcesKey=`__reactResources$`+randomKey,internalHoistableMarker=`__reactMarker$`+randomKey;function detachDeletedInstance(node){delete node[internalInstanceKey],delete node[internalPropsKey],delete node[internalEventHandlersKey],delete node[internalEventHandlerListenersKey],delete node[internalEventHandlesSetKey]}function getClosestInstanceFromNode(targetNode){var targetInst=targetNode[internalInstanceKey];if(targetInst)return targetInst;for(var parentNode=targetNode.parentNode;parentNode;){if(targetInst=parentNode[internalContainerInstanceKey]||parentNode[internalInstanceKey]){if(parentNode=targetInst.alternate,targetInst.child!==null||parentNode!==null&&parentNode.child!==null)for(targetNode=getParentHydrationBoundary(targetNode);targetNode!==null;){if(parentNode=targetNode[internalInstanceKey])return parentNode;targetNode=getParentHydrationBoundary(targetNode)}return targetInst}targetNode=parentNode,parentNode=targetNode.parentNode}return null}function getInstanceFromNode(node){if(node=node[internalInstanceKey]||node[internalContainerInstanceKey]){var tag=node.tag;if(tag===5||tag===6||tag===13||tag===31||tag===26||tag===27||tag===3)return node}return null}function getNodeFromInstance(inst){var tag=inst.tag;if(tag===5||tag===26||tag===27||tag===6)return inst.stateNode;throw Error(formatProdErrorMessage$2(33))}function getResourcesFromRoot(root$3){var resources=root$3[internalRootNodeResourcesKey];return resources||=root$3[internalRootNodeResourcesKey]={hoistableStyles:new Map,hoistableScripts:new Map},resources}function markNodeAsHoistable(node){node[internalHoistableMarker]=!0}var allNativeEvents=new Set,registrationNameDependencies={};function registerTwoPhaseEvent(registrationName,dependencies){registerDirectEvent(registrationName,dependencies),registerDirectEvent(registrationName+`Capture`,dependencies)}function registerDirectEvent(registrationName,dependencies){for(registrationNameDependencies[registrationName]=dependencies,registrationName=0;registrationName<dependencies.length;registrationName++)allNativeEvents.add(dependencies[registrationName])}var VALID_ATTRIBUTE_NAME_REGEX=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),illegalAttributeNameCache={},validatedAttributeNameCache={};function isAttributeNameSafe(attributeName){return hasOwnProperty$1.call(validatedAttributeNameCache,attributeName)?!0:hasOwnProperty$1.call(illegalAttributeNameCache,attributeName)?!1:VALID_ATTRIBUTE_NAME_REGEX.test(attributeName)?validatedAttributeNameCache[attributeName]=!0:(illegalAttributeNameCache[attributeName]=!0,!1)}function setValueForAttribute(node,name,value){if(isAttributeNameSafe(name))if(value===null)node.removeAttribute(name);else{switch(typeof value){case`undefined`:case`function`:case`symbol`:node.removeAttribute(name);return;case`boolean`:var prefix$10=name.toLowerCase().slice(0,5);if(prefix$10!==`data-`&&prefix$10!==`aria-`){node.removeAttribute(name);return}}node.setAttribute(name,``+value)}}function setValueForKnownAttribute(node,name,value){if(value===null)node.removeAttribute(name);else{switch(typeof value){case`undefined`:case`function`:case`symbol`:case`boolean`:node.removeAttribute(name);return}node.setAttribute(name,``+value)}}function setValueForNamespacedAttribute(node,namespace,name,value){if(value===null)node.removeAttribute(name);else{switch(typeof value){case`undefined`:case`function`:case`symbol`:case`boolean`:node.removeAttribute(name);return}node.setAttributeNS(namespace,name,``+value)}}function getToStringValue(value){switch(typeof value){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return value;case`object`:return value;default:return``}}function isCheckable(elem){var type=elem.type;return(elem=elem.nodeName)&&elem.toLowerCase()===`input`&&(type===`checkbox`||type===`radio`)}function trackValueOnNode(node,valueField,currentValue){var descriptor=Object.getOwnPropertyDescriptor(node.constructor.prototype,valueField);if(!node.hasOwnProperty(valueField)&&descriptor!==void 0&&typeof descriptor.get==`function`&&typeof descriptor.set==`function`){var get$3=descriptor.get,set$2=descriptor.set;return Object.defineProperty(node,valueField,{configurable:!0,get:function(){return get$3.call(this)},set:function(value){currentValue=``+value,set$2.call(this,value)}}),Object.defineProperty(node,valueField,{enumerable:descriptor.enumerable}),{getValue:function(){return currentValue},setValue:function(value){currentValue=``+value},stopTracking:function(){node._valueTracker=null,delete node[valueField]}}}}function track(node){if(!node._valueTracker){var valueField=isCheckable(node)?`checked`:`value`;node._valueTracker=trackValueOnNode(node,valueField,``+node[valueField])}}function updateValueIfChanged(node){if(!node)return!1;var tracker=node._valueTracker;if(!tracker)return!0;var lastValue=tracker.getValue(),value=``;return node&&(value=isCheckable(node)?node.checked?`true`:`false`:node.value),node=value,node===lastValue?!1:(tracker.setValue(node),!0)}function getActiveElement(doc){if(doc||=typeof document<`u`?document:void 0,doc===void 0)return null;try{return doc.activeElement||doc.body}catch{return doc.body}}var escapeSelectorAttributeValueInsideDoubleQuotesRegex=/[\n"\\]/g;function escapeSelectorAttributeValueInsideDoubleQuotes(value){return value.replace(escapeSelectorAttributeValueInsideDoubleQuotesRegex,function(ch){return`\\`+ch.charCodeAt(0).toString(16)+` `})}function updateInput(element,value,defaultValue$3,lastDefaultValue,checked,defaultChecked,type,name){element.name=``,type!=null&&typeof type!=`function`&&typeof type!=`symbol`&&typeof type!=`boolean`?element.type=type:element.removeAttribute(`type`),value==null?type!==`submit`&&type!==`reset`||element.removeAttribute(`value`):type===`number`?(value===0&&element.value===``||element.value!=value)&&(element.value=``+getToStringValue(value)):element.value!==``+getToStringValue(value)&&(element.value=``+getToStringValue(value)),value==null?defaultValue$3==null?lastDefaultValue!=null&&element.removeAttribute(`value`):setDefaultValue(element,type,getToStringValue(defaultValue$3)):setDefaultValue(element,type,getToStringValue(value)),checked==null&&defaultChecked!=null&&(element.defaultChecked=!!defaultChecked),checked!=null&&(element.checked=checked&&typeof checked!=`function`&&typeof checked!=`symbol`),name!=null&&typeof name!=`function`&&typeof name!=`symbol`&&typeof name!=`boolean`?element.name=``+getToStringValue(name):element.removeAttribute(`name`)}function initInput(element,value,defaultValue$3,checked,defaultChecked,type,name,isHydrating$1){if(type!=null&&typeof type!=`function`&&typeof type!=`symbol`&&typeof type!=`boolean`&&(element.type=type),value!=null||defaultValue$3!=null){if(!(type!==`submit`&&type!==`reset`||value!=null)){track(element);return}defaultValue$3=defaultValue$3==null?``:``+getToStringValue(defaultValue$3),value=value==null?defaultValue$3:``+getToStringValue(value),isHydrating$1||value===element.value||(element.value=value),element.defaultValue=value}checked??=defaultChecked,checked=typeof checked!=`function`&&typeof checked!=`symbol`&&!!checked,element.checked=isHydrating$1?element.checked:!!checked,element.defaultChecked=!!checked,name!=null&&typeof name!=`function`&&typeof name!=`symbol`&&typeof name!=`boolean`&&(element.name=name),track(element)}function setDefaultValue(node,type,value){type===`number`&&getActiveElement(node.ownerDocument)===node||node.defaultValue===``+value||(node.defaultValue=``+value)}function updateOptions(node,multiple,propValue,setDefaultSelected){if(node=node.options,multiple){multiple={};for(var i$4=0;i$4<propValue.length;i$4++)multiple[`$`+propValue[i$4]]=!0;for(propValue=0;propValue<node.length;propValue++)i$4=multiple.hasOwnProperty(`$`+node[propValue].value),node[propValue].selected!==i$4&&(node[propValue].selected=i$4),i$4&&setDefaultSelected&&(node[propValue].defaultSelected=!0)}else{for(propValue=``+getToStringValue(propValue),multiple=null,i$4=0;i$4<node.length;i$4++){if(node[i$4].value===propValue){node[i$4].selected=!0,setDefaultSelected&&(node[i$4].defaultSelected=!0);return}multiple!==null||node[i$4].disabled||(multiple=node[i$4])}multiple!==null&&(multiple.selected=!0)}}function updateTextarea(element,value,defaultValue$3){if(value!=null&&(value=``+getToStringValue(value),value!==element.value&&(element.value=value),defaultValue$3==null)){element.defaultValue!==value&&(element.defaultValue=value);return}element.defaultValue=defaultValue$3==null?``:``+getToStringValue(defaultValue$3)}function initTextarea(element,value,defaultValue$3,children$1){if(value==null){if(children$1!=null){if(defaultValue$3!=null)throw Error(formatProdErrorMessage$2(92));if(isArrayImpl(children$1)){if(1<children$1.length)throw Error(formatProdErrorMessage$2(93));children$1=children$1[0]}defaultValue$3=children$1}defaultValue$3??=``,value=defaultValue$3}defaultValue$3=getToStringValue(value),element.defaultValue=defaultValue$3,children$1=element.textContent,children$1===defaultValue$3&&children$1!==``&&children$1!==null&&(element.value=children$1),track(element)}function setTextContent(node,text){if(text){var firstChild=node.firstChild;if(firstChild&&firstChild===node.lastChild&&firstChild.nodeType===3){firstChild.nodeValue=text;return}}node.textContent=text}var unitlessNumbers=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function setValueForStyle(style$3,styleName,value){var isCustomProperty=styleName.indexOf(`--`)===0;value==null||typeof value==`boolean`||value===``?isCustomProperty?style$3.setProperty(styleName,``):styleName===`float`?style$3.cssFloat=``:style$3[styleName]=``:isCustomProperty?style$3.setProperty(styleName,value):typeof value!=`number`||value===0||unitlessNumbers.has(styleName)?styleName===`float`?style$3.cssFloat=value:style$3[styleName]=(``+value).trim():style$3[styleName]=value+`px`}function setValueForStyles(node,styles$1,prevStyles){if(styles$1!=null&&typeof styles$1!=`object`)throw Error(formatProdErrorMessage$2(62));if(node=node.style,prevStyles!=null){for(var styleName in prevStyles)!prevStyles.hasOwnProperty(styleName)||styles$1!=null&&styles$1.hasOwnProperty(styleName)||(styleName.indexOf(`--`)===0?node.setProperty(styleName,``):styleName===`float`?node.cssFloat=``:node[styleName]=``);for(var styleName$16 in styles$1)styleName=styles$1[styleName$16],styles$1.hasOwnProperty(styleName$16)&&prevStyles[styleName$16]!==styleName&&setValueForStyle(node,styleName$16,styleName)}else for(var styleName$17 in styles$1)styles$1.hasOwnProperty(styleName$17)&&setValueForStyle(node,styleName$17,styles$1[styleName$17])}function isCustomElement(tagName){if(tagName.indexOf(`-`)===-1)return!1;switch(tagName){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var aliases=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),isJavaScriptProtocol=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sanitizeURL(url){return isJavaScriptProtocol.test(``+url)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:url}function noop$1$7(){}var currentReplayingEvent=null;function getEventTarget(nativeEvent){return nativeEvent=nativeEvent.target||nativeEvent.srcElement||window,nativeEvent.correspondingUseElement&&(nativeEvent=nativeEvent.correspondingUseElement),nativeEvent.nodeType===3?nativeEvent.parentNode:nativeEvent}var restoreTarget=null,restoreQueue=null;function restoreStateOfTarget(target){var internalInstance=getInstanceFromNode(target);if(internalInstance&&(target=internalInstance.stateNode)){var props=target[internalPropsKey]||null;a:switch(target=internalInstance.stateNode,internalInstance.type){case`input`:if(updateInput(target,props.value,props.defaultValue,props.defaultValue,props.checked,props.defaultChecked,props.type,props.name),internalInstance=props.name,props.type===`radio`&&internalInstance!=null){for(props=target;props.parentNode;)props=props.parentNode;for(props=props.querySelectorAll(`input[name="`+escapeSelectorAttributeValueInsideDoubleQuotes(``+internalInstance)+`"][type="radio"]`),internalInstance=0;internalInstance<props.length;internalInstance++){var otherNode=props[internalInstance];if(otherNode!==target&&otherNode.form===target.form){var otherProps=otherNode[internalPropsKey]||null;if(!otherProps)throw Error(formatProdErrorMessage$2(90));updateInput(otherNode,otherProps.value,otherProps.defaultValue,otherProps.defaultValue,otherProps.checked,otherProps.defaultChecked,otherProps.type,otherProps.name)}}for(internalInstance=0;internalInstance<props.length;internalInstance++)otherNode=props[internalInstance],otherNode.form===target.form&&updateValueIfChanged(otherNode)}break a;case`textarea`:updateTextarea(target,props.value,props.defaultValue);break a;case`select`:internalInstance=props.value,internalInstance!=null&&updateOptions(target,!!props.multiple,internalInstance,!1)}}}var isInsideEventHandler=!1;function batchedUpdates$1(fn,a$4,b$3){if(isInsideEventHandler)return fn(a$4,b$3);isInsideEventHandler=!0;try{return fn(a$4)}finally{if(isInsideEventHandler=!1,(restoreTarget!==null||restoreQueue!==null)&&(flushSyncWork$1(),restoreTarget&&(a$4=restoreTarget,fn=restoreQueue,restoreQueue=restoreTarget=null,restoreStateOfTarget(a$4),fn)))for(a$4=0;a$4<fn.length;a$4++)restoreStateOfTarget(fn[a$4])}}function getListener(inst,registrationName){var stateNode=inst.stateNode;if(stateNode===null)return null;var props=stateNode[internalPropsKey]||null;if(props===null)return null;stateNode=props[registrationName];a:switch(registrationName){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(props=!props.disabled)||(inst=inst.type,props=!(inst===`button`||inst===`input`||inst===`select`||inst===`textarea`)),inst=!props;break a;default:inst=!1}if(inst)return null;if(stateNode&&typeof stateNode!=`function`)throw Error(formatProdErrorMessage$2(231,registrationName,typeof stateNode));return stateNode}var canUseDOM$2=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),passiveBrowserEventsSupported=!1;if(canUseDOM$2)try{var options={};Object.defineProperty(options,`passive`,{get:function(){passiveBrowserEventsSupported=!0}}),window.addEventListener(`test`,options,options),window.removeEventListener(`test`,options,options)}catch{passiveBrowserEventsSupported=!1}var root$2=null,startText=null,fallbackText=null;function getData(){if(fallbackText)return fallbackText;var start$2,startValue=startText,startLength=startValue.length,end$1,endValue=`value`in root$2?root$2.value:root$2.textContent,endLength=endValue.length;for(start$2=0;start$2<startLength&&startValue[start$2]===endValue[start$2];start$2++);var minEnd=startLength-start$2;for(end$1=1;end$1<=minEnd&&startValue[startLength-end$1]===endValue[endLength-end$1];end$1++);return fallbackText=endValue.slice(start$2,1<end$1?1-end$1:void 0)}function getEventCharCode(nativeEvent){var keyCode=nativeEvent.keyCode;return`charCode`in nativeEvent?(nativeEvent=nativeEvent.charCode,nativeEvent===0&&keyCode===13&&(nativeEvent=13)):nativeEvent=keyCode,nativeEvent===10&&(nativeEvent=13),32<=nativeEvent||nativeEvent===13?nativeEvent:0}function functionThatReturnsTrue(){return!0}function functionThatReturnsFalse(){return!1}function createSyntheticEvent(Interface){function SyntheticBaseEvent(reactName,reactEventType,targetInst,nativeEvent,nativeEventTarget){for(var propName in this._reactName=reactName,this._targetInst=targetInst,this.type=reactEventType,this.nativeEvent=nativeEvent,this.target=nativeEventTarget,this.currentTarget=null,Interface)Interface.hasOwnProperty(propName)&&(reactName=Interface[propName],this[propName]=reactName?reactName(nativeEvent):nativeEvent[propName]);return this.isDefaultPrevented=(nativeEvent.defaultPrevented==null?!1===nativeEvent.returnValue:nativeEvent.defaultPrevented)?functionThatReturnsTrue:functionThatReturnsFalse,this.isPropagationStopped=functionThatReturnsFalse,this}return assign(SyntheticBaseEvent.prototype,{preventDefault:function(){this.defaultPrevented=!0;var event=this.nativeEvent;event&&(event.preventDefault?event.preventDefault():typeof event.returnValue!=`unknown`&&(event.returnValue=!1),this.isDefaultPrevented=functionThatReturnsTrue)},stopPropagation:function(){var event=this.nativeEvent;event&&(event.stopPropagation?event.stopPropagation():typeof event.cancelBubble!=`unknown`&&(event.cancelBubble=!0),this.isPropagationStopped=functionThatReturnsTrue)},persist:function(){},isPersistent:functionThatReturnsTrue}),SyntheticBaseEvent}var EventInterface={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(event){return event.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SyntheticEvent=createSyntheticEvent(EventInterface),UIEventInterface=assign({},EventInterface,{view:0,detail:0}),SyntheticUIEvent=createSyntheticEvent(UIEventInterface),lastMovementX,lastMovementY,lastMouseEvent,MouseEventInterface=assign({},UIEventInterface,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:getEventModifierState,button:0,buttons:0,relatedTarget:function(event){return event.relatedTarget===void 0?event.fromElement===event.srcElement?event.toElement:event.fromElement:event.relatedTarget},movementX:function(event){return`movementX`in event?event.movementX:(event!==lastMouseEvent&&(lastMouseEvent&&event.type===`mousemove`?(lastMovementX=event.screenX-lastMouseEvent.screenX,lastMovementY=event.screenY-lastMouseEvent.screenY):lastMovementY=lastMovementX=0,lastMouseEvent=event),lastMovementX)},movementY:function(event){return`movementY`in event?event.movementY:lastMovementY}}),SyntheticMouseEvent=createSyntheticEvent(MouseEventInterface),SyntheticDragEvent=createSyntheticEvent(assign({},MouseEventInterface,{dataTransfer:0})),SyntheticFocusEvent=createSyntheticEvent(assign({},UIEventInterface,{relatedTarget:0})),SyntheticAnimationEvent=createSyntheticEvent(assign({},EventInterface,{animationName:0,elapsedTime:0,pseudoElement:0})),SyntheticClipboardEvent=createSyntheticEvent(assign({},EventInterface,{clipboardData:function(event){return`clipboardData`in event?event.clipboardData:window.clipboardData}})),SyntheticCompositionEvent=createSyntheticEvent(assign({},EventInterface,{data:0})),normalizeKey={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},translateToKey={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},modifierKeyToProp={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function modifierStateGetter(keyArg){var nativeEvent=this.nativeEvent;return nativeEvent.getModifierState?nativeEvent.getModifierState(keyArg):(keyArg=modifierKeyToProp[keyArg])?!!nativeEvent[keyArg]:!1}function getEventModifierState(){return modifierStateGetter}var SyntheticKeyboardEvent=createSyntheticEvent(assign({},UIEventInterface,{key:function(nativeEvent){if(nativeEvent.key){var key$1=normalizeKey[nativeEvent.key]||nativeEvent.key;if(key$1!==`Unidentified`)return key$1}return nativeEvent.type===`keypress`?(nativeEvent=getEventCharCode(nativeEvent),nativeEvent===13?`Enter`:String.fromCharCode(nativeEvent)):nativeEvent.type===`keydown`||nativeEvent.type===`keyup`?translateToKey[nativeEvent.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:getEventModifierState,charCode:function(event){return event.type===`keypress`?getEventCharCode(event):0},keyCode:function(event){return event.type===`keydown`||event.type===`keyup`?event.keyCode:0},which:function(event){return event.type===`keypress`?getEventCharCode(event):event.type===`keydown`||event.type===`keyup`?event.keyCode:0}})),SyntheticPointerEvent=createSyntheticEvent(assign({},MouseEventInterface,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),SyntheticTouchEvent=createSyntheticEvent(assign({},UIEventInterface,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:getEventModifierState})),SyntheticTransitionEvent=createSyntheticEvent(assign({},EventInterface,{propertyName:0,elapsedTime:0,pseudoElement:0})),SyntheticWheelEvent=createSyntheticEvent(assign({},MouseEventInterface,{deltaX:function(event){return`deltaX`in event?event.deltaX:`wheelDeltaX`in event?-event.wheelDeltaX:0},deltaY:function(event){return`deltaY`in event?event.deltaY:`wheelDeltaY`in event?-event.wheelDeltaY:`wheelDelta`in event?-event.wheelDelta:0},deltaZ:0,deltaMode:0})),SyntheticToggleEvent=createSyntheticEvent(assign({},EventInterface,{newState:0,oldState:0})),END_KEYCODES=[9,13,27,32],canUseCompositionEvent=canUseDOM$2&&`CompositionEvent`in window,documentMode=null;canUseDOM$2&&`documentMode`in document&&(documentMode=document.documentMode);var canUseTextInputEvent=canUseDOM$2&&`TextEvent`in window&&!documentMode,useFallbackCompositionData=canUseDOM$2&&(!canUseCompositionEvent||documentMode&&8<documentMode&&11>=documentMode),SPACEBAR_CHAR=` `,hasSpaceKeypress=!1;function isFallbackCompositionEnd(domEventName,nativeEvent){switch(domEventName){case`keyup`:return END_KEYCODES.indexOf(nativeEvent.keyCode)!==-1;case`keydown`:return nativeEvent.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function getDataFromCustomEvent(nativeEvent){return nativeEvent=nativeEvent.detail,typeof nativeEvent==`object`&&`data`in nativeEvent?nativeEvent.data:null}var isComposing=!1;function getNativeBeforeInputChars(domEventName,nativeEvent){switch(domEventName){case`compositionend`:return getDataFromCustomEvent(nativeEvent);case`keypress`:return nativeEvent.which===32?(hasSpaceKeypress=!0,SPACEBAR_CHAR):null;case`textInput`:return domEventName=nativeEvent.data,domEventName===SPACEBAR_CHAR&&hasSpaceKeypress?null:domEventName;default:return null}}function getFallbackBeforeInputChars(domEventName,nativeEvent){if(isComposing)return domEventName===`compositionend`||!canUseCompositionEvent&&isFallbackCompositionEnd(domEventName,nativeEvent)?(domEventName=getData(),fallbackText=startText=root$2=null,isComposing=!1,domEventName):null;switch(domEventName){case`paste`:return null;case`keypress`:if(!(nativeEvent.ctrlKey||nativeEvent.altKey||nativeEvent.metaKey)||nativeEvent.ctrlKey&&nativeEvent.altKey){if(nativeEvent.char&&1<nativeEvent.char.length)return nativeEvent.char;if(nativeEvent.which)return String.fromCharCode(nativeEvent.which)}return null;case`compositionend`:return useFallbackCompositionData&&nativeEvent.locale!==`ko`?null:nativeEvent.data;default:return null}}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function isTextInputElement(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName===`input`?!!supportedInputTypes[elem.type]:nodeName===`textarea`}function createAndAccumulateChangeEvent(dispatchQueue,inst,nativeEvent,target){restoreTarget?restoreQueue?restoreQueue.push(target):restoreQueue=[target]:restoreTarget=target,inst=accumulateTwoPhaseListeners(inst,`onChange`),0<inst.length&&(nativeEvent=new SyntheticEvent(`onChange`,`change`,null,nativeEvent,target),dispatchQueue.push({event:nativeEvent,listeners:inst}))}var activeElement$1=null,activeElementInst$1=null;function runEventInBatch(dispatchQueue){processDispatchQueue(dispatchQueue,0)}function getInstIfValueChanged(targetInst){if(updateValueIfChanged(getNodeFromInstance(targetInst)))return targetInst}function getTargetInstForChangeEvent(domEventName,targetInst){if(domEventName===`change`)return targetInst}var isInputEventSupported=!1;if(canUseDOM$2){var JSCompiler_inline_result$jscomp$286;if(canUseDOM$2){var isSupported$jscomp$inline_427=`oninput`in document;if(!isSupported$jscomp$inline_427){var element$jscomp$inline_428=document.createElement(`div`);element$jscomp$inline_428.setAttribute(`oninput`,`return;`),isSupported$jscomp$inline_427=typeof element$jscomp$inline_428.oninput==`function`}JSCompiler_inline_result$jscomp$286=isSupported$jscomp$inline_427}else JSCompiler_inline_result$jscomp$286=!1;isInputEventSupported=JSCompiler_inline_result$jscomp$286&&(!document.documentMode||9<document.documentMode)}function stopWatchingForValueChange(){activeElement$1&&(activeElement$1.detachEvent(`onpropertychange`,handlePropertyChange),activeElementInst$1=activeElement$1=null)}function handlePropertyChange(nativeEvent){if(nativeEvent.propertyName===`value`&&getInstIfValueChanged(activeElementInst$1)){var dispatchQueue=[];createAndAccumulateChangeEvent(dispatchQueue,activeElementInst$1,nativeEvent,getEventTarget(nativeEvent)),batchedUpdates$1(runEventInBatch,dispatchQueue)}}function handleEventsForInputEventPolyfill(domEventName,target,targetInst){domEventName===`focusin`?(stopWatchingForValueChange(),activeElement$1=target,activeElementInst$1=targetInst,activeElement$1.attachEvent(`onpropertychange`,handlePropertyChange)):domEventName===`focusout`&&stopWatchingForValueChange()}function getTargetInstForInputEventPolyfill(domEventName){if(domEventName===`selectionchange`||domEventName===`keyup`||domEventName===`keydown`)return getInstIfValueChanged(activeElementInst$1)}function getTargetInstForClickEvent(domEventName,targetInst){if(domEventName===`click`)return getInstIfValueChanged(targetInst)}function getTargetInstForInputOrChangeEvent(domEventName,targetInst){if(domEventName===`input`||domEventName===`change`)return getInstIfValueChanged(targetInst)}function is$4(x$2,y$2){return x$2===y$2&&(x$2!==0||1/x$2==1/y$2)||x$2!==x$2&&y$2!==y$2}var objectIs$3=typeof Object.is==`function`?Object.is:is$4;function shallowEqual$2(objA,objB){if(objectIs$3(objA,objB))return!0;if(typeof objA!=`object`||!objA||typeof objB!=`object`||!objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(keysB=0;keysB<keysA.length;keysB++){var currentKey=keysA[keysB];if(!hasOwnProperty$1.call(objB,currentKey)||!objectIs$3(objA[currentKey],objB[currentKey]))return!1}return!0}function getLeafNode(node){for(;node&&node.firstChild;)node=node.firstChild;return node}function getNodeForCharacterOffset(root$3,offset$1){var node=getLeafNode(root$3);root$3=0;for(var nodeEnd;node;){if(node.nodeType===3){if(nodeEnd=root$3+node.textContent.length,root$3<=offset$1&&nodeEnd>=offset$1)return{node,offset:offset$1-root$3};root$3=nodeEnd}a:{for(;node;){if(node.nextSibling){node=node.nextSibling;break a}node=node.parentNode}node=void 0}node=getLeafNode(node)}}function containsNode(outerNode,innerNode){return outerNode&&innerNode?outerNode===innerNode?!0:outerNode&&outerNode.nodeType===3?!1:innerNode&&innerNode.nodeType===3?containsNode(outerNode,innerNode.parentNode):`contains`in outerNode?outerNode.contains(innerNode):outerNode.compareDocumentPosition?!!(outerNode.compareDocumentPosition(innerNode)&16):!1:!1}function getActiveElementDeep(containerInfo){containerInfo=containerInfo!=null&&containerInfo.ownerDocument!=null&&containerInfo.ownerDocument.defaultView!=null?containerInfo.ownerDocument.defaultView:window;for(var element=getActiveElement(containerInfo.document);element instanceof containerInfo.HTMLIFrameElement;){try{var JSCompiler_inline_result=typeof element.contentWindow.location.href==`string`}catch{JSCompiler_inline_result=!1}if(JSCompiler_inline_result)containerInfo=element.contentWindow;else break;element=getActiveElement(containerInfo.document)}return element}function hasSelectionCapabilities(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName&&(nodeName===`input`&&(elem.type===`text`||elem.type===`search`||elem.type===`tel`||elem.type===`url`||elem.type===`password`)||nodeName===`textarea`||elem.contentEditable===`true`)}var skipSelectionChangeEvent=canUseDOM$2&&`documentMode`in document&&11>=document.documentMode,activeElement=null,activeElementInst=null,lastSelection=null,mouseDown=!1;function constructSelectEvent(dispatchQueue,nativeEvent,nativeEventTarget){var doc=nativeEventTarget.window===nativeEventTarget?nativeEventTarget.document:nativeEventTarget.nodeType===9?nativeEventTarget:nativeEventTarget.ownerDocument;mouseDown||activeElement==null||activeElement!==getActiveElement(doc)||(doc=activeElement,`selectionStart`in doc&&hasSelectionCapabilities(doc)?doc={start:doc.selectionStart,end:doc.selectionEnd}:(doc=(doc.ownerDocument&&doc.ownerDocument.defaultView||window).getSelection(),doc={anchorNode:doc.anchorNode,anchorOffset:doc.anchorOffset,focusNode:doc.focusNode,focusOffset:doc.focusOffset}),lastSelection&&shallowEqual$2(lastSelection,doc)||(lastSelection=doc,doc=accumulateTwoPhaseListeners(activeElementInst,`onSelect`),0<doc.length&&(nativeEvent=new SyntheticEvent(`onSelect`,`select`,null,nativeEvent,nativeEventTarget),dispatchQueue.push({event:nativeEvent,listeners:doc}),nativeEvent.target=activeElement)))}function makePrefixMap(styleProp,eventName){var prefixes={};return prefixes[styleProp.toLowerCase()]=eventName.toLowerCase(),prefixes[`Webkit`+styleProp]=`webkit`+eventName,prefixes[`Moz`+styleProp]=`moz`+eventName,prefixes}var vendorPrefixes={animationend:makePrefixMap(`Animation`,`AnimationEnd`),animationiteration:makePrefixMap(`Animation`,`AnimationIteration`),animationstart:makePrefixMap(`Animation`,`AnimationStart`),transitionrun:makePrefixMap(`Transition`,`TransitionRun`),transitionstart:makePrefixMap(`Transition`,`TransitionStart`),transitioncancel:makePrefixMap(`Transition`,`TransitionCancel`),transitionend:makePrefixMap(`Transition`,`TransitionEnd`)},prefixedEventNames={},style$2={};canUseDOM$2&&(style$2=document.createElement(`div`).style,`AnimationEvent`in window||(delete vendorPrefixes.animationend.animation,delete vendorPrefixes.animationiteration.animation,delete vendorPrefixes.animationstart.animation),`TransitionEvent`in window||delete vendorPrefixes.transitionend.transition);function getVendorPrefixedEventName(eventName){if(prefixedEventNames[eventName])return prefixedEventNames[eventName];if(!vendorPrefixes[eventName])return eventName;var prefixMap=vendorPrefixes[eventName],styleProp;for(styleProp in prefixMap)if(prefixMap.hasOwnProperty(styleProp)&&styleProp in style$2)return prefixedEventNames[eventName]=prefixMap[styleProp];return eventName}var ANIMATION_END=getVendorPrefixedEventName(`animationend`),ANIMATION_ITERATION=getVendorPrefixedEventName(`animationiteration`),ANIMATION_START=getVendorPrefixedEventName(`animationstart`),TRANSITION_RUN=getVendorPrefixedEventName(`transitionrun`),TRANSITION_START=getVendorPrefixedEventName(`transitionstart`),TRANSITION_CANCEL=getVendorPrefixedEventName(`transitioncancel`),TRANSITION_END=getVendorPrefixedEventName(`transitionend`),topLevelEventsToReactNames=new Map,simpleEventPluginEvents=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);simpleEventPluginEvents.push(`scrollEnd`);function registerSimpleEvent(domEventName,reactName){topLevelEventsToReactNames.set(domEventName,reactName),registerTwoPhaseEvent(reactName,[domEventName])}var reportGlobalError=typeof reportError==`function`?reportError:function(error$1){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var event=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof error$1==`object`&&error$1&&typeof error$1.message==`string`?String(error$1.message):String(error$1),error:error$1});if(!window.dispatchEvent(event))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,error$1);return}console.error(error$1)},concurrentQueues=[],concurrentQueuesIndex=0,concurrentlyUpdatedLanes=0;function finishQueueingConcurrentUpdates(){for(var endIndex=concurrentQueuesIndex,i$4=concurrentlyUpdatedLanes=concurrentQueuesIndex=0;i$4<endIndex;){var fiber=concurrentQueues[i$4];concurrentQueues[i$4++]=null;var queue=concurrentQueues[i$4];concurrentQueues[i$4++]=null;var update$1=concurrentQueues[i$4];concurrentQueues[i$4++]=null;var lane=concurrentQueues[i$4];if(concurrentQueues[i$4++]=null,queue!==null&&update$1!==null){var pending=queue.pending;pending===null?update$1.next=update$1:(update$1.next=pending.next,pending.next=update$1),queue.pending=update$1}lane!==0&&markUpdateLaneFromFiberToRoot(fiber,update$1,lane)}}function enqueueUpdate$1(fiber,queue,update$1,lane){concurrentQueues[concurrentQueuesIndex++]=fiber,concurrentQueues[concurrentQueuesIndex++]=queue,concurrentQueues[concurrentQueuesIndex++]=update$1,concurrentQueues[concurrentQueuesIndex++]=lane,concurrentlyUpdatedLanes|=lane,fiber.lanes|=lane,fiber=fiber.alternate,fiber!==null&&(fiber.lanes|=lane)}function enqueueConcurrentHookUpdate(fiber,queue,update$1,lane){return enqueueUpdate$1(fiber,queue,update$1,lane),getRootForUpdatedFiber(fiber)}function enqueueConcurrentRenderForLane(fiber,lane){return enqueueUpdate$1(fiber,null,null,lane),getRootForUpdatedFiber(fiber)}function markUpdateLaneFromFiberToRoot(sourceFiber,update$1,lane){sourceFiber.lanes|=lane;var alternate=sourceFiber.alternate;alternate!==null&&(alternate.lanes|=lane);for(var isHidden=!1,parent=sourceFiber.return;parent!==null;)parent.childLanes|=lane,alternate=parent.alternate,alternate!==null&&(alternate.childLanes|=lane),parent.tag===22&&(sourceFiber=parent.stateNode,sourceFiber===null||sourceFiber._visibility&1||(isHidden=!0)),sourceFiber=parent,parent=parent.return;return sourceFiber.tag===3?(parent=sourceFiber.stateNode,isHidden&&update$1!==null&&(isHidden=31-clz32(lane),sourceFiber=parent.hiddenUpdates,alternate=sourceFiber[isHidden],alternate===null?sourceFiber[isHidden]=[update$1]:alternate.push(update$1),update$1.lane=lane|536870912),parent):null}function getRootForUpdatedFiber(sourceFiber){if(50<nestedUpdateCount)throw nestedUpdateCount=0,rootWithNestedUpdates=null,Error(formatProdErrorMessage$2(185));for(var parent=sourceFiber.return;parent!==null;)sourceFiber=parent,parent=sourceFiber.return;return sourceFiber.tag===3?sourceFiber.stateNode:null}var emptyContextObject={};function FiberNode(tag,pendingProps,key$1,mode){this.tag=tag,this.key=key$1,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=pendingProps,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=mode,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function createFiberImplClass(tag,pendingProps,key$1,mode){return new FiberNode(tag,pendingProps,key$1,mode)}function shouldConstruct(Component$2){return Component$2=Component$2.prototype,!(!Component$2||!Component$2.isReactComponent)}function createWorkInProgress(current,pendingProps){var workInProgress$1=current.alternate;return workInProgress$1===null?(workInProgress$1=createFiberImplClass(current.tag,pendingProps,current.key,current.mode),workInProgress$1.elementType=current.elementType,workInProgress$1.type=current.type,workInProgress$1.stateNode=current.stateNode,workInProgress$1.alternate=current,current.alternate=workInProgress$1):(workInProgress$1.pendingProps=pendingProps,workInProgress$1.type=current.type,workInProgress$1.flags=0,workInProgress$1.subtreeFlags=0,workInProgress$1.deletions=null),workInProgress$1.flags=current.flags&65011712,workInProgress$1.childLanes=current.childLanes,workInProgress$1.lanes=current.lanes,workInProgress$1.child=current.child,workInProgress$1.memoizedProps=current.memoizedProps,workInProgress$1.memoizedState=current.memoizedState,workInProgress$1.updateQueue=current.updateQueue,pendingProps=current.dependencies,workInProgress$1.dependencies=pendingProps===null?null:{lanes:pendingProps.lanes,firstContext:pendingProps.firstContext},workInProgress$1.sibling=current.sibling,workInProgress$1.index=current.index,workInProgress$1.ref=current.ref,workInProgress$1.refCleanup=current.refCleanup,workInProgress$1}function resetWorkInProgress(workInProgress$1,renderLanes$1){workInProgress$1.flags&=65011714;var current=workInProgress$1.alternate;return current===null?(workInProgress$1.childLanes=0,workInProgress$1.lanes=renderLanes$1,workInProgress$1.child=null,workInProgress$1.subtreeFlags=0,workInProgress$1.memoizedProps=null,workInProgress$1.memoizedState=null,workInProgress$1.updateQueue=null,workInProgress$1.dependencies=null,workInProgress$1.stateNode=null):(workInProgress$1.childLanes=current.childLanes,workInProgress$1.lanes=current.lanes,workInProgress$1.child=current.child,workInProgress$1.subtreeFlags=0,workInProgress$1.deletions=null,workInProgress$1.memoizedProps=current.memoizedProps,workInProgress$1.memoizedState=current.memoizedState,workInProgress$1.updateQueue=current.updateQueue,workInProgress$1.type=current.type,renderLanes$1=current.dependencies,workInProgress$1.dependencies=renderLanes$1===null?null:{lanes:renderLanes$1.lanes,firstContext:renderLanes$1.firstContext}),workInProgress$1}function createFiberFromTypeAndProps(type,key$1,pendingProps,owner,mode,lanes){var fiberTag=0;if(owner=type,typeof type==`function`)shouldConstruct(type)&&(fiberTag=1);else if(typeof type==`string`)fiberTag=isHostHoistableType(type,pendingProps,contextStackCursor.current)?26:type===`html`||type===`head`||type===`body`?27:5;else a:switch(type){case REACT_ACTIVITY_TYPE:return type=createFiberImplClass(31,pendingProps,key$1,mode),type.elementType=REACT_ACTIVITY_TYPE,type.lanes=lanes,type;case REACT_FRAGMENT_TYPE$2:return createFiberFromFragment(pendingProps.children,mode,lanes,key$1);case REACT_STRICT_MODE_TYPE$1:fiberTag=8,mode|=24;break;case REACT_PROFILER_TYPE$1:return type=createFiberImplClass(12,pendingProps,key$1,mode|2),type.elementType=REACT_PROFILER_TYPE$1,type.lanes=lanes,type;case REACT_SUSPENSE_TYPE$1:return type=createFiberImplClass(13,pendingProps,key$1,mode),type.elementType=REACT_SUSPENSE_TYPE$1,type.lanes=lanes,type;case REACT_SUSPENSE_LIST_TYPE$1:return type=createFiberImplClass(19,pendingProps,key$1,mode),type.elementType=REACT_SUSPENSE_LIST_TYPE$1,type.lanes=lanes,type;default:if(typeof type==`object`&&type)switch(type.$$typeof){case REACT_CONTEXT_TYPE$1:fiberTag=10;break a;case REACT_CONSUMER_TYPE$1:fiberTag=9;break a;case REACT_FORWARD_REF_TYPE$1:fiberTag=11;break a;case REACT_MEMO_TYPE$1:fiberTag=14;break a;case REACT_LAZY_TYPE$1:fiberTag=16,owner=null;break a}fiberTag=29,pendingProps=Error(formatProdErrorMessage$2(130,type===null?`null`:typeof type,``)),owner=null}return key$1=createFiberImplClass(fiberTag,pendingProps,key$1,mode),key$1.elementType=type,key$1.type=owner,key$1.lanes=lanes,key$1}function createFiberFromFragment(elements,mode,lanes,key$1){return elements=createFiberImplClass(7,elements,key$1,mode),elements.lanes=lanes,elements}function createFiberFromText(content,mode,lanes){return content=createFiberImplClass(6,content,null,mode),content.lanes=lanes,content}function createFiberFromDehydratedFragment(dehydratedNode){var fiber=createFiberImplClass(18,null,null,0);return fiber.stateNode=dehydratedNode,fiber}function createFiberFromPortal(portal,mode,lanes){return mode=createFiberImplClass(4,portal.children===null?[]:portal.children,portal.key,mode),mode.lanes=lanes,mode.stateNode={containerInfo:portal.containerInfo,pendingChildren:null,implementation:portal.implementation},mode}var CapturedStacks=new WeakMap;function createCapturedValueAtFiber(value,source){if(typeof value==`object`&&value){var existing=CapturedStacks.get(value);return existing===void 0?(source={value,source,stack:getStackByFiberInDevAndProd(source)},CapturedStacks.set(value,source),source):existing}return{value,source,stack:getStackByFiberInDevAndProd(source)}}var forkStack=[],forkStackIndex=0,treeForkProvider=null,treeForkCount=0,idStack=[],idStackIndex=0,treeContextProvider=null,treeContextId=1,treeContextOverflow=``;function pushTreeFork(workInProgress$1,totalChildren){forkStack[forkStackIndex++]=treeForkCount,forkStack[forkStackIndex++]=treeForkProvider,treeForkProvider=workInProgress$1,treeForkCount=totalChildren}function pushTreeId(workInProgress$1,totalChildren,index$2){idStack[idStackIndex++]=treeContextId,idStack[idStackIndex++]=treeContextOverflow,idStack[idStackIndex++]=treeContextProvider,treeContextProvider=workInProgress$1;var baseIdWithLeadingBit=treeContextId;workInProgress$1=treeContextOverflow;var baseLength=32-clz32(baseIdWithLeadingBit)-1;baseIdWithLeadingBit&=~(1<<baseLength),index$2+=1;var length=32-clz32(totalChildren)+baseLength;if(30<length){var numberOfOverflowBits=baseLength-baseLength%5;length=(baseIdWithLeadingBit&(1<<numberOfOverflowBits)-1).toString(32),baseIdWithLeadingBit>>=numberOfOverflowBits,baseLength-=numberOfOverflowBits,treeContextId=1<<32-clz32(totalChildren)+baseLength|index$2<<baseLength|baseIdWithLeadingBit,treeContextOverflow=length+workInProgress$1}else treeContextId=1<<length|index$2<<baseLength|baseIdWithLeadingBit,treeContextOverflow=workInProgress$1}function pushMaterializedTreeId(workInProgress$1){workInProgress$1.return!==null&&(pushTreeFork(workInProgress$1,1),pushTreeId(workInProgress$1,1,0))}function popTreeContext(workInProgress$1){for(;workInProgress$1===treeForkProvider;)treeForkProvider=forkStack[--forkStackIndex],forkStack[forkStackIndex]=null,treeForkCount=forkStack[--forkStackIndex],forkStack[forkStackIndex]=null;for(;workInProgress$1===treeContextProvider;)treeContextProvider=idStack[--idStackIndex],idStack[idStackIndex]=null,treeContextOverflow=idStack[--idStackIndex],idStack[idStackIndex]=null,treeContextId=idStack[--idStackIndex],idStack[idStackIndex]=null}function restoreSuspendedTreeContext(workInProgress$1,suspendedContext){idStack[idStackIndex++]=treeContextId,idStack[idStackIndex++]=treeContextOverflow,idStack[idStackIndex++]=treeContextProvider,treeContextId=suspendedContext.id,treeContextOverflow=suspendedContext.overflow,treeContextProvider=workInProgress$1}var hydrationParentFiber=null,nextHydratableInstance=null,isHydrating=!1,hydrationErrors=null,rootOrSingletonContext=!1,HydrationMismatchException=Error(formatProdErrorMessage$2(519));function throwOnHydrationMismatch(fiber){throw queueHydrationError(createCapturedValueAtFiber(Error(formatProdErrorMessage$2(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),fiber)),HydrationMismatchException}function prepareToHydrateHostInstance(fiber){var instance=fiber.stateNode,type=fiber.type,props=fiber.memoizedProps;switch(instance[internalInstanceKey]=fiber,instance[internalPropsKey]=props,type){case`dialog`:listenToNonDelegatedEvent(`cancel`,instance),listenToNonDelegatedEvent(`close`,instance);break;case`iframe`:case`object`:case`embed`:listenToNonDelegatedEvent(`load`,instance);break;case`video`:case`audio`:for(type=0;type<mediaEventTypes.length;type++)listenToNonDelegatedEvent(mediaEventTypes[type],instance);break;case`source`:listenToNonDelegatedEvent(`error`,instance);break;case`img`:case`image`:case`link`:listenToNonDelegatedEvent(`error`,instance),listenToNonDelegatedEvent(`load`,instance);break;case`details`:listenToNonDelegatedEvent(`toggle`,instance);break;case`input`:listenToNonDelegatedEvent(`invalid`,instance),initInput(instance,props.value,props.defaultValue,props.checked,props.defaultChecked,props.type,props.name,!0);break;case`select`:listenToNonDelegatedEvent(`invalid`,instance);break;case`textarea`:listenToNonDelegatedEvent(`invalid`,instance),initTextarea(instance,props.value,props.defaultValue,props.children)}type=props.children,typeof type!=`string`&&typeof type!=`number`&&typeof type!=`bigint`||instance.textContent===``+type||!0===props.suppressHydrationWarning||checkForUnmatchedText(instance.textContent,type)?(props.popover!=null&&(listenToNonDelegatedEvent(`beforetoggle`,instance),listenToNonDelegatedEvent(`toggle`,instance)),props.onScroll!=null&&listenToNonDelegatedEvent(`scroll`,instance),props.onScrollEnd!=null&&listenToNonDelegatedEvent(`scrollend`,instance),props.onClick!=null&&(instance.onclick=noop$1$7),instance=!0):instance=!1,instance||throwOnHydrationMismatch(fiber,!0)}function popToNextHostParent(fiber){for(hydrationParentFiber=fiber.return;hydrationParentFiber;)switch(hydrationParentFiber.tag){case 5:case 31:case 13:rootOrSingletonContext=!1;return;case 27:case 3:rootOrSingletonContext=!0;return;default:hydrationParentFiber=hydrationParentFiber.return}}function popHydrationState(fiber){if(fiber!==hydrationParentFiber)return!1;if(!isHydrating)return popToNextHostParent(fiber),isHydrating=!0,!1;var tag=fiber.tag,JSCompiler_temp;if((JSCompiler_temp=tag!==3&&tag!==27)&&((JSCompiler_temp=tag===5)&&(JSCompiler_temp=fiber.type,JSCompiler_temp=!(JSCompiler_temp!==`form`&&JSCompiler_temp!==`button`)||shouldSetTextContent(fiber.type,fiber.memoizedProps)),JSCompiler_temp=!JSCompiler_temp),JSCompiler_temp&&nextHydratableInstance&&throwOnHydrationMismatch(fiber),popToNextHostParent(fiber),tag===13){if(fiber=fiber.memoizedState,fiber=fiber===null?null:fiber.dehydrated,!fiber)throw Error(formatProdErrorMessage$2(317));nextHydratableInstance=getNextHydratableInstanceAfterHydrationBoundary(fiber)}else if(tag===31){if(fiber=fiber.memoizedState,fiber=fiber===null?null:fiber.dehydrated,!fiber)throw Error(formatProdErrorMessage$2(317));nextHydratableInstance=getNextHydratableInstanceAfterHydrationBoundary(fiber)}else tag===27?(tag=nextHydratableInstance,isSingletonScope(fiber.type)?(fiber=previousHydratableOnEnteringScopedSingleton,previousHydratableOnEnteringScopedSingleton=null,nextHydratableInstance=fiber):nextHydratableInstance=tag):nextHydratableInstance=hydrationParentFiber?getNextHydratable(fiber.stateNode.nextSibling):null;return!0}function resetHydrationState(){nextHydratableInstance=hydrationParentFiber=null,isHydrating=!1}function upgradeHydrationErrorsToRecoverable(){var queuedErrors=hydrationErrors;return queuedErrors!==null&&(workInProgressRootRecoverableErrors===null?workInProgressRootRecoverableErrors=queuedErrors:workInProgressRootRecoverableErrors.push.apply(workInProgressRootRecoverableErrors,queuedErrors),hydrationErrors=null),queuedErrors}function queueHydrationError(error$1){hydrationErrors===null?hydrationErrors=[error$1]:hydrationErrors.push(error$1)}var valueCursor=createCursor(null),currentlyRenderingFiber$1=null,lastContextDependency=null;function pushProvider(providerFiber,context,nextValue){push(valueCursor,context._currentValue),context._currentValue=nextValue}function popProvider(context){context._currentValue=valueCursor.current,pop(valueCursor)}function scheduleContextWorkOnParentPath(parent,renderLanes$1,propagationRoot){for(;parent!==null;){var alternate=parent.alternate;if((parent.childLanes&renderLanes$1)===renderLanes$1?alternate!==null&&(alternate.childLanes&renderLanes$1)!==renderLanes$1&&(alternate.childLanes|=renderLanes$1):(parent.childLanes|=renderLanes$1,alternate!==null&&(alternate.childLanes|=renderLanes$1)),parent===propagationRoot)break;parent=parent.return}}function propagateContextChanges(workInProgress$1,contexts,renderLanes$1,forcePropagateEntireTree){var fiber=workInProgress$1.child;for(fiber!==null&&(fiber.return=workInProgress$1);fiber!==null;){var list=fiber.dependencies;if(list!==null){var nextFiber=fiber.child;list=list.firstContext;a:for(;list!==null;){var dependency=list;list=fiber;for(var i$4=0;i$4<contexts.length;i$4++)if(dependency.context===contexts[i$4]){list.lanes|=renderLanes$1,dependency=list.alternate,dependency!==null&&(dependency.lanes|=renderLanes$1),scheduleContextWorkOnParentPath(list.return,renderLanes$1,workInProgress$1),forcePropagateEntireTree||(nextFiber=null);break a}list=dependency.next}}else if(fiber.tag===18){if(nextFiber=fiber.return,nextFiber===null)throw Error(formatProdErrorMessage$2(341));nextFiber.lanes|=renderLanes$1,list=nextFiber.alternate,list!==null&&(list.lanes|=renderLanes$1),scheduleContextWorkOnParentPath(nextFiber,renderLanes$1,workInProgress$1),nextFiber=null}else nextFiber=fiber.child;if(nextFiber!==null)nextFiber.return=fiber;else for(nextFiber=fiber;nextFiber!==null;){if(nextFiber===workInProgress$1){nextFiber=null;break}if(fiber=nextFiber.sibling,fiber!==null){fiber.return=nextFiber.return,nextFiber=fiber;break}nextFiber=nextFiber.return}fiber=nextFiber}}function propagateParentContextChanges(current,workInProgress$1,renderLanes$1,forcePropagateEntireTree){current=null;for(var parent=workInProgress$1,isInsidePropagationBailout=!1;parent!==null;){if(!isInsidePropagationBailout){if(parent.flags&524288)isInsidePropagationBailout=!0;else if(parent.flags&262144)break}if(parent.tag===10){var currentParent=parent.alternate;if(currentParent===null)throw Error(formatProdErrorMessage$2(387));if(currentParent=currentParent.memoizedProps,currentParent!==null){var context=parent.type;objectIs$3(parent.pendingProps.value,currentParent.value)||(current===null?current=[context]:current.push(context))}}else if(parent===hostTransitionProviderCursor.current){if(currentParent=parent.alternate,currentParent===null)throw Error(formatProdErrorMessage$2(387));currentParent.memoizedState.memoizedState!==parent.memoizedState.memoizedState&&(current===null?current=[HostTransitionContext]:current.push(HostTransitionContext))}parent=parent.return}current!==null&&propagateContextChanges(workInProgress$1,current,renderLanes$1,forcePropagateEntireTree),workInProgress$1.flags|=262144}function checkIfContextChanged(currentDependencies){for(currentDependencies=currentDependencies.firstContext;currentDependencies!==null;){if(!objectIs$3(currentDependencies.context._currentValue,currentDependencies.memoizedValue))return!0;currentDependencies=currentDependencies.next}return!1}function prepareToReadContext(workInProgress$1){currentlyRenderingFiber$1=workInProgress$1,lastContextDependency=null,workInProgress$1=workInProgress$1.dependencies,workInProgress$1!==null&&(workInProgress$1.firstContext=null)}function readContext(context){return readContextForConsumer(currentlyRenderingFiber$1,context)}function readContextDuringReconciliation(consumer,context){return currentlyRenderingFiber$1===null&&prepareToReadContext(consumer),readContextForConsumer(consumer,context)}function readContextForConsumer(consumer,context){var value=context._currentValue;if(context={context,memoizedValue:value,next:null},lastContextDependency===null){if(consumer===null)throw Error(formatProdErrorMessage$2(308));lastContextDependency=context,consumer.dependencies={lanes:0,firstContext:context},consumer.flags|=524288}else lastContextDependency=lastContextDependency.next=context;return value}var AbortControllerLocal=typeof AbortController<`u`?AbortController:function(){var listeners=[],signal=this.signal={aborted:!1,addEventListener:function(type,listener){listeners.push(listener)}};this.abort=function(){signal.aborted=!0,listeners.forEach(function(listener){return listener()})}},scheduleCallback$2=Scheduler.unstable_scheduleCallback,NormalPriority=Scheduler.unstable_NormalPriority,CacheContext={$$typeof:REACT_CONTEXT_TYPE$1,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function createCache(){return{controller:new AbortControllerLocal,data:new Map,refCount:0}}function releaseCache(cache){cache.refCount--,cache.refCount===0&&scheduleCallback$2(NormalPriority,function(){cache.controller.abort()})}var currentEntangledListeners=null,currentEntangledPendingCount=0,currentEntangledLane=0,currentEntangledActionThenable=null;function entangleAsyncAction(transition$1,thenable){if(currentEntangledListeners===null){var entangledListeners=currentEntangledListeners=[];currentEntangledPendingCount=0,currentEntangledLane=requestTransitionLane(),currentEntangledActionThenable={status:`pending`,value:void 0,then:function(resolve){entangledListeners.push(resolve)}}}return currentEntangledPendingCount++,thenable.then(pingEngtangledActionScope,pingEngtangledActionScope),thenable}function pingEngtangledActionScope(){if(--currentEntangledPendingCount===0&&currentEntangledListeners!==null){currentEntangledActionThenable!==null&&(currentEntangledActionThenable.status=`fulfilled`);var listeners=currentEntangledListeners;currentEntangledListeners=null,currentEntangledLane=0,currentEntangledActionThenable=null;for(var i$4=0;i$4<listeners.length;i$4++)(0,listeners[i$4])()}}function chainThenableValue(thenable,result){var listeners=[],thenableWithOverride={status:`pending`,value:null,reason:null,then:function(resolve){listeners.push(resolve)}};return thenable.then(function(){thenableWithOverride.status=`fulfilled`,thenableWithOverride.value=result;for(var i$4=0;i$4<listeners.length;i$4++)(0,listeners[i$4])(result)},function(error$1){for(thenableWithOverride.status=`rejected`,thenableWithOverride.reason=error$1,error$1=0;error$1<listeners.length;error$1++)(0,listeners[error$1])(void 0)}),thenableWithOverride}var prevOnStartTransitionFinish=ReactSharedInternals.S;ReactSharedInternals.S=function(transition$1,returnValue){globalMostRecentTransitionTime=now$3(),typeof returnValue==`object`&&returnValue&&typeof returnValue.then==`function`&&entangleAsyncAction(transition$1,returnValue),prevOnStartTransitionFinish!==null&&prevOnStartTransitionFinish(transition$1,returnValue)};var resumedCache=createCursor(null);function peekCacheFromPool(){var cacheResumedFromPreviousRender=resumedCache.current;return cacheResumedFromPreviousRender===null?workInProgressRoot.pooledCache:cacheResumedFromPreviousRender}function pushTransition(offscreenWorkInProgress,prevCachePool){prevCachePool===null?push(resumedCache,resumedCache.current):push(resumedCache,prevCachePool.pool)}function getSuspendedCache(){var cacheFromPool=peekCacheFromPool();return cacheFromPool===null?null:{parent:CacheContext._currentValue,pool:cacheFromPool}}var SuspenseException=Error(formatProdErrorMessage$2(460)),SuspenseyCommitException=Error(formatProdErrorMessage$2(474)),SuspenseActionException=Error(formatProdErrorMessage$2(542)),noopSuspenseyCommitThenable={then:function(){}};function isThenableResolved(thenable){return thenable=thenable.status,thenable===`fulfilled`||thenable===`rejected`}function trackUsedThenable(thenableState$2,thenable,index$2){switch(index$2=thenableState$2[index$2],index$2===void 0?thenableState$2.push(thenable):index$2!==thenable&&(thenable.then(noop$1$7,noop$1$7),thenable=index$2),thenable.status){case`fulfilled`:return thenable.value;case`rejected`:throw thenableState$2=thenable.reason,checkIfUseWrappedInAsyncCatch(thenableState$2),thenableState$2;default:if(typeof thenable.status==`string`)thenable.then(noop$1$7,noop$1$7);else{if(thenableState$2=workInProgressRoot,thenableState$2!==null&&100<thenableState$2.shellSuspendCounter)throw Error(formatProdErrorMessage$2(482));thenableState$2=thenable,thenableState$2.status=`pending`,thenableState$2.then(function(fulfilledValue){if(thenable.status===`pending`){var fulfilledThenable=thenable;fulfilledThenable.status=`fulfilled`,fulfilledThenable.value=fulfilledValue}},function(error$1){if(thenable.status===`pending`){var rejectedThenable=thenable;rejectedThenable.status=`rejected`,rejectedThenable.reason=error$1}})}switch(thenable.status){case`fulfilled`:return thenable.value;case`rejected`:throw thenableState$2=thenable.reason,checkIfUseWrappedInAsyncCatch(thenableState$2),thenableState$2}throw suspendedThenable=thenable,SuspenseException}}function resolveLazy(lazyType){try{var init$1=lazyType._init;return init$1(lazyType._payload)}catch(x$2){throw typeof x$2==`object`&&x$2&&typeof x$2.then==`function`?(suspendedThenable=x$2,SuspenseException):x$2}}var suspendedThenable=null;function getSuspendedThenable(){if(suspendedThenable===null)throw Error(formatProdErrorMessage$2(459));var thenable=suspendedThenable;return suspendedThenable=null,thenable}function checkIfUseWrappedInAsyncCatch(rejectedReason){if(rejectedReason===SuspenseException||rejectedReason===SuspenseActionException)throw Error(formatProdErrorMessage$2(483))}var thenableState$1=null,thenableIndexCounter$1=0;function unwrapThenable(thenable){var index$2=thenableIndexCounter$1;return thenableIndexCounter$1+=1,thenableState$1===null&&(thenableState$1=[]),trackUsedThenable(thenableState$1,thenable,index$2)}function coerceRef(workInProgress$1,element){element=element.props.ref,workInProgress$1.ref=element===void 0?null:element}function throwOnInvalidObjectTypeImpl(returnFiber,newChild){throw newChild.$$typeof===REACT_LEGACY_ELEMENT_TYPE?Error(formatProdErrorMessage$2(525)):(returnFiber=Object.prototype.toString.call(newChild),Error(formatProdErrorMessage$2(31,returnFiber===`[object Object]`?`object with keys {`+Object.keys(newChild).join(`, `)+`}`:returnFiber)))}function createChildReconciler(shouldTrackSideEffects){function deleteChild(returnFiber,childToDelete){if(shouldTrackSideEffects){var deletions=returnFiber.deletions;deletions===null?(returnFiber.deletions=[childToDelete],returnFiber.flags|=16):deletions.push(childToDelete)}}function deleteRemainingChildren(returnFiber,currentFirstChild){if(!shouldTrackSideEffects)return null;for(;currentFirstChild!==null;)deleteChild(returnFiber,currentFirstChild),currentFirstChild=currentFirstChild.sibling;return null}function mapRemainingChildren(currentFirstChild){for(var existingChildren=new Map;currentFirstChild!==null;)currentFirstChild.key===null?existingChildren.set(currentFirstChild.index,currentFirstChild):existingChildren.set(currentFirstChild.key,currentFirstChild),currentFirstChild=currentFirstChild.sibling;return existingChildren}function useFiber(fiber,pendingProps){return fiber=createWorkInProgress(fiber,pendingProps),fiber.index=0,fiber.sibling=null,fiber}function placeChild(newFiber,lastPlacedIndex,newIndex){return newFiber.index=newIndex,shouldTrackSideEffects?(newIndex=newFiber.alternate,newIndex===null?(newFiber.flags|=67108866,lastPlacedIndex):(newIndex=newIndex.index,newIndex<lastPlacedIndex?(newFiber.flags|=67108866,lastPlacedIndex):newIndex)):(newFiber.flags|=1048576,lastPlacedIndex)}function placeSingleChild(newFiber){return shouldTrackSideEffects&&newFiber.alternate===null&&(newFiber.flags|=67108866),newFiber}function updateTextNode(returnFiber,current,textContent,lanes){return current===null||current.tag!==6?(current=createFiberFromText(textContent,returnFiber.mode,lanes),current.return=returnFiber,current):(current=useFiber(current,textContent),current.return=returnFiber,current)}function updateElement(returnFiber,current,element,lanes){var elementType=element.type;return elementType===REACT_FRAGMENT_TYPE$2?updateFragment(returnFiber,current,element.props.children,lanes,element.key):current!==null&&(current.elementType===elementType||typeof elementType==`object`&&elementType&&elementType.$$typeof===REACT_LAZY_TYPE$1&&resolveLazy(elementType)===current.type)?(current=useFiber(current,element.props),coerceRef(current,element),current.return=returnFiber,current):(current=createFiberFromTypeAndProps(element.type,element.key,element.props,null,returnFiber.mode,lanes),coerceRef(current,element),current.return=returnFiber,current)}function updatePortal(returnFiber,current,portal,lanes){return current===null||current.tag!==4||current.stateNode.containerInfo!==portal.containerInfo||current.stateNode.implementation!==portal.implementation?(current=createFiberFromPortal(portal,returnFiber.mode,lanes),current.return=returnFiber,current):(current=useFiber(current,portal.children||[]),current.return=returnFiber,current)}function updateFragment(returnFiber,current,fragment,lanes,key$1){return current===null||current.tag!==7?(current=createFiberFromFragment(fragment,returnFiber.mode,lanes,key$1),current.return=returnFiber,current):(current=useFiber(current,fragment),current.return=returnFiber,current)}function createChild(returnFiber,newChild,lanes){if(typeof newChild==`string`&&newChild!==``||typeof newChild==`number`||typeof newChild==`bigint`)return newChild=createFiberFromText(``+newChild,returnFiber.mode,lanes),newChild.return=returnFiber,newChild;if(typeof newChild==`object`&&newChild){switch(newChild.$$typeof){case REACT_ELEMENT_TYPE$2:return lanes=createFiberFromTypeAndProps(newChild.type,newChild.key,newChild.props,null,returnFiber.mode,lanes),coerceRef(lanes,newChild),lanes.return=returnFiber,lanes;case REACT_PORTAL_TYPE$1:return newChild=createFiberFromPortal(newChild,returnFiber.mode,lanes),newChild.return=returnFiber,newChild;case REACT_LAZY_TYPE$1:return newChild=resolveLazy(newChild),createChild(returnFiber,newChild,lanes)}if(isArrayImpl(newChild)||getIteratorFn(newChild))return newChild=createFiberFromFragment(newChild,returnFiber.mode,lanes,null),newChild.return=returnFiber,newChild;if(typeof newChild.then==`function`)return createChild(returnFiber,unwrapThenable(newChild),lanes);if(newChild.$$typeof===REACT_CONTEXT_TYPE$1)return createChild(returnFiber,readContextDuringReconciliation(returnFiber,newChild),lanes);throwOnInvalidObjectTypeImpl(returnFiber,newChild)}return null}function updateSlot(returnFiber,oldFiber,newChild,lanes){var key$1=oldFiber===null?null:oldFiber.key;if(typeof newChild==`string`&&newChild!==``||typeof newChild==`number`||typeof newChild==`bigint`)return key$1===null?updateTextNode(returnFiber,oldFiber,``+newChild,lanes):null;if(typeof newChild==`object`&&newChild){switch(newChild.$$typeof){case REACT_ELEMENT_TYPE$2:return newChild.key===key$1?updateElement(returnFiber,oldFiber,newChild,lanes):null;case REACT_PORTAL_TYPE$1:return newChild.key===key$1?updatePortal(returnFiber,oldFiber,newChild,lanes):null;case REACT_LAZY_TYPE$1:return newChild=resolveLazy(newChild),updateSlot(returnFiber,oldFiber,newChild,lanes)}if(isArrayImpl(newChild)||getIteratorFn(newChild))return key$1===null?updateFragment(returnFiber,oldFiber,newChild,lanes,null):null;if(typeof newChild.then==`function`)return updateSlot(returnFiber,oldFiber,unwrapThenable(newChild),lanes);if(newChild.$$typeof===REACT_CONTEXT_TYPE$1)return updateSlot(returnFiber,oldFiber,readContextDuringReconciliation(returnFiber,newChild),lanes);throwOnInvalidObjectTypeImpl(returnFiber,newChild)}return null}function updateFromMap(existingChildren,returnFiber,newIdx,newChild,lanes){if(typeof newChild==`string`&&newChild!==``||typeof newChild==`number`||typeof newChild==`bigint`)return existingChildren=existingChildren.get(newIdx)||null,updateTextNode(returnFiber,existingChildren,``+newChild,lanes);if(typeof newChild==`object`&&newChild){switch(newChild.$$typeof){case REACT_ELEMENT_TYPE$2:return existingChildren=existingChildren.get(newChild.key===null?newIdx:newChild.key)||null,updateElement(returnFiber,existingChildren,newChild,lanes);case REACT_PORTAL_TYPE$1:return existingChildren=existingChildren.get(newChild.key===null?newIdx:newChild.key)||null,updatePortal(returnFiber,existingChildren,newChild,lanes);case REACT_LAZY_TYPE$1:return newChild=resolveLazy(newChild),updateFromMap(existingChildren,returnFiber,newIdx,newChild,lanes)}if(isArrayImpl(newChild)||getIteratorFn(newChild))return existingChildren=existingChildren.get(newIdx)||null,updateFragment(returnFiber,existingChildren,newChild,lanes,null);if(typeof newChild.then==`function`)return updateFromMap(existingChildren,returnFiber,newIdx,unwrapThenable(newChild),lanes);if(newChild.$$typeof===REACT_CONTEXT_TYPE$1)return updateFromMap(existingChildren,returnFiber,newIdx,readContextDuringReconciliation(returnFiber,newChild),lanes);throwOnInvalidObjectTypeImpl(returnFiber,newChild)}return null}function reconcileChildrenArray(returnFiber,currentFirstChild,newChildren,lanes){for(var resultingFirstChild=null,previousNewFiber=null,oldFiber=currentFirstChild,newIdx=currentFirstChild=0,nextOldFiber=null;oldFiber!==null&&newIdx<newChildren.length;newIdx++){oldFiber.index>newIdx?(nextOldFiber=oldFiber,oldFiber=null):nextOldFiber=oldFiber.sibling;var newFiber=updateSlot(returnFiber,oldFiber,newChildren[newIdx],lanes);if(newFiber===null){oldFiber===null&&(oldFiber=nextOldFiber);break}shouldTrackSideEffects&&oldFiber&&newFiber.alternate===null&&deleteChild(returnFiber,oldFiber),currentFirstChild=placeChild(newFiber,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=newFiber:previousNewFiber.sibling=newFiber,previousNewFiber=newFiber,oldFiber=nextOldFiber}if(newIdx===newChildren.length)return deleteRemainingChildren(returnFiber,oldFiber),isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild;if(oldFiber===null){for(;newIdx<newChildren.length;newIdx++)oldFiber=createChild(returnFiber,newChildren[newIdx],lanes),oldFiber!==null&&(currentFirstChild=placeChild(oldFiber,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=oldFiber:previousNewFiber.sibling=oldFiber,previousNewFiber=oldFiber);return isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild}for(oldFiber=mapRemainingChildren(oldFiber);newIdx<newChildren.length;newIdx++)nextOldFiber=updateFromMap(oldFiber,returnFiber,newIdx,newChildren[newIdx],lanes),nextOldFiber!==null&&(shouldTrackSideEffects&&nextOldFiber.alternate!==null&&oldFiber.delete(nextOldFiber.key===null?newIdx:nextOldFiber.key),currentFirstChild=placeChild(nextOldFiber,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=nextOldFiber:previousNewFiber.sibling=nextOldFiber,previousNewFiber=nextOldFiber);return shouldTrackSideEffects&&oldFiber.forEach(function(child){return deleteChild(returnFiber,child)}),isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild}function reconcileChildrenIterator(returnFiber,currentFirstChild,newChildren,lanes){if(newChildren==null)throw Error(formatProdErrorMessage$2(151));for(var resultingFirstChild=null,previousNewFiber=null,oldFiber=currentFirstChild,newIdx=currentFirstChild=0,nextOldFiber=null,step=newChildren.next();oldFiber!==null&&!step.done;newIdx++,step=newChildren.next()){oldFiber.index>newIdx?(nextOldFiber=oldFiber,oldFiber=null):nextOldFiber=oldFiber.sibling;var newFiber=updateSlot(returnFiber,oldFiber,step.value,lanes);if(newFiber===null){oldFiber===null&&(oldFiber=nextOldFiber);break}shouldTrackSideEffects&&oldFiber&&newFiber.alternate===null&&deleteChild(returnFiber,oldFiber),currentFirstChild=placeChild(newFiber,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=newFiber:previousNewFiber.sibling=newFiber,previousNewFiber=newFiber,oldFiber=nextOldFiber}if(step.done)return deleteRemainingChildren(returnFiber,oldFiber),isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild;if(oldFiber===null){for(;!step.done;newIdx++,step=newChildren.next())step=createChild(returnFiber,step.value,lanes),step!==null&&(currentFirstChild=placeChild(step,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=step:previousNewFiber.sibling=step,previousNewFiber=step);return isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild}for(oldFiber=mapRemainingChildren(oldFiber);!step.done;newIdx++,step=newChildren.next())step=updateFromMap(oldFiber,returnFiber,newIdx,step.value,lanes),step!==null&&(shouldTrackSideEffects&&step.alternate!==null&&oldFiber.delete(step.key===null?newIdx:step.key),currentFirstChild=placeChild(step,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=step:previousNewFiber.sibling=step,previousNewFiber=step);return shouldTrackSideEffects&&oldFiber.forEach(function(child){return deleteChild(returnFiber,child)}),isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild}function reconcileChildFibersImpl(returnFiber,currentFirstChild,newChild,lanes){if(typeof newChild==`object`&&newChild&&newChild.type===REACT_FRAGMENT_TYPE$2&&newChild.key===null&&(newChild=newChild.props.children),typeof newChild==`object`&&newChild){switch(newChild.$$typeof){case REACT_ELEMENT_TYPE$2:a:{for(var key$1=newChild.key;currentFirstChild!==null;){if(currentFirstChild.key===key$1){if(key$1=newChild.type,key$1===REACT_FRAGMENT_TYPE$2){if(currentFirstChild.tag===7){deleteRemainingChildren(returnFiber,currentFirstChild.sibling),lanes=useFiber(currentFirstChild,newChild.props.children),lanes.return=returnFiber,returnFiber=lanes;break a}}else if(currentFirstChild.elementType===key$1||typeof key$1==`object`&&key$1&&key$1.$$typeof===REACT_LAZY_TYPE$1&&resolveLazy(key$1)===currentFirstChild.type){deleteRemainingChildren(returnFiber,currentFirstChild.sibling),lanes=useFiber(currentFirstChild,newChild.props),coerceRef(lanes,newChild),lanes.return=returnFiber,returnFiber=lanes;break a}deleteRemainingChildren(returnFiber,currentFirstChild);break}else deleteChild(returnFiber,currentFirstChild);currentFirstChild=currentFirstChild.sibling}newChild.type===REACT_FRAGMENT_TYPE$2?(lanes=createFiberFromFragment(newChild.props.children,returnFiber.mode,lanes,newChild.key),lanes.return=returnFiber,returnFiber=lanes):(lanes=createFiberFromTypeAndProps(newChild.type,newChild.key,newChild.props,null,returnFiber.mode,lanes),coerceRef(lanes,newChild),lanes.return=returnFiber,returnFiber=lanes)}return placeSingleChild(returnFiber);case REACT_PORTAL_TYPE$1:a:{for(key$1=newChild.key;currentFirstChild!==null;){if(currentFirstChild.key===key$1)if(currentFirstChild.tag===4&&currentFirstChild.stateNode.containerInfo===newChild.containerInfo&&currentFirstChild.stateNode.implementation===newChild.implementation){deleteRemainingChildren(returnFiber,currentFirstChild.sibling),lanes=useFiber(currentFirstChild,newChild.children||[]),lanes.return=returnFiber,returnFiber=lanes;break a}else{deleteRemainingChildren(returnFiber,currentFirstChild);break}else deleteChild(returnFiber,currentFirstChild);currentFirstChild=currentFirstChild.sibling}lanes=createFiberFromPortal(newChild,returnFiber.mode,lanes),lanes.return=returnFiber,returnFiber=lanes}return placeSingleChild(returnFiber);case REACT_LAZY_TYPE$1:return newChild=resolveLazy(newChild),reconcileChildFibersImpl(returnFiber,currentFirstChild,newChild,lanes)}if(isArrayImpl(newChild))return reconcileChildrenArray(returnFiber,currentFirstChild,newChild,lanes);if(getIteratorFn(newChild)){if(key$1=getIteratorFn(newChild),typeof key$1!=`function`)throw Error(formatProdErrorMessage$2(150));return newChild=key$1.call(newChild),reconcileChildrenIterator(returnFiber,currentFirstChild,newChild,lanes)}if(typeof newChild.then==`function`)return reconcileChildFibersImpl(returnFiber,currentFirstChild,unwrapThenable(newChild),lanes);if(newChild.$$typeof===REACT_CONTEXT_TYPE$1)return reconcileChildFibersImpl(returnFiber,currentFirstChild,readContextDuringReconciliation(returnFiber,newChild),lanes);throwOnInvalidObjectTypeImpl(returnFiber,newChild)}return typeof newChild==`string`&&newChild!==``||typeof newChild==`number`||typeof newChild==`bigint`?(newChild=``+newChild,currentFirstChild!==null&&currentFirstChild.tag===6?(deleteRemainingChildren(returnFiber,currentFirstChild.sibling),lanes=useFiber(currentFirstChild,newChild),lanes.return=returnFiber,returnFiber=lanes):(deleteRemainingChildren(returnFiber,currentFirstChild),lanes=createFiberFromText(newChild,returnFiber.mode,lanes),lanes.return=returnFiber,returnFiber=lanes),placeSingleChild(returnFiber)):deleteRemainingChildren(returnFiber,currentFirstChild)}return function(returnFiber,currentFirstChild,newChild,lanes){try{thenableIndexCounter$1=0;var firstChildFiber=reconcileChildFibersImpl(returnFiber,currentFirstChild,newChild,lanes);return thenableState$1=null,firstChildFiber}catch(x$2){if(x$2===SuspenseException||x$2===SuspenseActionException)throw x$2;var fiber=createFiberImplClass(29,x$2,null,returnFiber.mode);return fiber.lanes=lanes,fiber.return=returnFiber,fiber}}}var reconcileChildFibers=createChildReconciler(!0),mountChildFibers=createChildReconciler(!1),hasForceUpdate=!1;function initializeUpdateQueue(fiber){fiber.updateQueue={baseState:fiber.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cloneUpdateQueue(current,workInProgress$1){current=current.updateQueue,workInProgress$1.updateQueue===current&&(workInProgress$1.updateQueue={baseState:current.baseState,firstBaseUpdate:current.firstBaseUpdate,lastBaseUpdate:current.lastBaseUpdate,shared:current.shared,callbacks:null})}function createUpdate(lane){return{lane,tag:0,payload:null,callback:null,next:null}}function enqueueUpdate(fiber,update$1,lane){var updateQueue=fiber.updateQueue;if(updateQueue===null)return null;if(updateQueue=updateQueue.shared,executionContext&2){var pending=updateQueue.pending;return pending===null?update$1.next=update$1:(update$1.next=pending.next,pending.next=update$1),updateQueue.pending=update$1,update$1=getRootForUpdatedFiber(fiber),markUpdateLaneFromFiberToRoot(fiber,null,lane),update$1}return enqueueUpdate$1(fiber,updateQueue,update$1,lane),getRootForUpdatedFiber(fiber)}function entangleTransitions(root$3,fiber,lane){if(fiber=fiber.updateQueue,fiber!==null&&(fiber=fiber.shared,lane&4194048)){var queueLanes=fiber.lanes;queueLanes&=root$3.pendingLanes,lane|=queueLanes,fiber.lanes=lane,markRootEntangled(root$3,lane)}}function enqueueCapturedUpdate(workInProgress$1,capturedUpdate){var queue=workInProgress$1.updateQueue,current=workInProgress$1.alternate;if(current!==null&&(current=current.updateQueue,queue===current)){var newFirst=null,newLast=null;if(queue=queue.firstBaseUpdate,queue!==null){do{var clone={lane:queue.lane,tag:queue.tag,payload:queue.payload,callback:null,next:null};newLast===null?newFirst=newLast=clone:newLast=newLast.next=clone,queue=queue.next}while(queue!==null);newLast===null?newFirst=newLast=capturedUpdate:newLast=newLast.next=capturedUpdate}else newFirst=newLast=capturedUpdate;queue={baseState:current.baseState,firstBaseUpdate:newFirst,lastBaseUpdate:newLast,shared:current.shared,callbacks:current.callbacks},workInProgress$1.updateQueue=queue;return}workInProgress$1=queue.lastBaseUpdate,workInProgress$1===null?queue.firstBaseUpdate=capturedUpdate:workInProgress$1.next=capturedUpdate,queue.lastBaseUpdate=capturedUpdate}var didReadFromEntangledAsyncAction=!1;function suspendIfUpdateReadFromEntangledAsyncAction(){if(didReadFromEntangledAsyncAction){var entangledActionThenable=currentEntangledActionThenable;if(entangledActionThenable!==null)throw entangledActionThenable}}function processUpdateQueue(workInProgress$jscomp$0,props,instance$jscomp$0,renderLanes$1){didReadFromEntangledAsyncAction=!1;var queue=workInProgress$jscomp$0.updateQueue;hasForceUpdate=!1;var firstBaseUpdate=queue.firstBaseUpdate,lastBaseUpdate=queue.lastBaseUpdate,pendingQueue=queue.shared.pending;if(pendingQueue!==null){queue.shared.pending=null;var lastPendingUpdate=pendingQueue,firstPendingUpdate=lastPendingUpdate.next;lastPendingUpdate.next=null,lastBaseUpdate===null?firstBaseUpdate=firstPendingUpdate:lastBaseUpdate.next=firstPendingUpdate,lastBaseUpdate=lastPendingUpdate;var current=workInProgress$jscomp$0.alternate;current!==null&&(current=current.updateQueue,pendingQueue=current.lastBaseUpdate,pendingQueue!==lastBaseUpdate&&(pendingQueue===null?current.firstBaseUpdate=firstPendingUpdate:pendingQueue.next=firstPendingUpdate,current.lastBaseUpdate=lastPendingUpdate))}if(firstBaseUpdate!==null){var newState=queue.baseState;lastBaseUpdate=0,current=firstPendingUpdate=lastPendingUpdate=null,pendingQueue=firstBaseUpdate;do{var updateLane=pendingQueue.lane&-536870913,isHiddenUpdate=updateLane!==pendingQueue.lane;if(isHiddenUpdate?(workInProgressRootRenderLanes&updateLane)===updateLane:(renderLanes$1&updateLane)===updateLane){updateLane!==0&&updateLane===currentEntangledLane&&(didReadFromEntangledAsyncAction=!0),current!==null&&(current=current.next={lane:0,tag:pendingQueue.tag,payload:pendingQueue.payload,callback:null,next:null});a:{var workInProgress$1=workInProgress$jscomp$0,update$1=pendingQueue;updateLane=props;var instance=instance$jscomp$0;switch(update$1.tag){case 1:if(workInProgress$1=update$1.payload,typeof workInProgress$1==`function`){newState=workInProgress$1.call(instance,newState,updateLane);break a}newState=workInProgress$1;break a;case 3:workInProgress$1.flags=workInProgress$1.flags&-65537|128;case 0:if(workInProgress$1=update$1.payload,updateLane=typeof workInProgress$1==`function`?workInProgress$1.call(instance,newState,updateLane):workInProgress$1,updateLane==null)break a;newState=assign({},newState,updateLane);break a;case 2:hasForceUpdate=!0}}updateLane=pendingQueue.callback,updateLane!==null&&(workInProgress$jscomp$0.flags|=64,isHiddenUpdate&&(workInProgress$jscomp$0.flags|=8192),isHiddenUpdate=queue.callbacks,isHiddenUpdate===null?queue.callbacks=[updateLane]:isHiddenUpdate.push(updateLane))}else isHiddenUpdate={lane:updateLane,tag:pendingQueue.tag,payload:pendingQueue.payload,callback:pendingQueue.callback,next:null},current===null?(firstPendingUpdate=current=isHiddenUpdate,lastPendingUpdate=newState):current=current.next=isHiddenUpdate,lastBaseUpdate|=updateLane;if(pendingQueue=pendingQueue.next,pendingQueue===null){if(pendingQueue=queue.shared.pending,pendingQueue===null)break;isHiddenUpdate=pendingQueue,pendingQueue=isHiddenUpdate.next,isHiddenUpdate.next=null,queue.lastBaseUpdate=isHiddenUpdate,queue.shared.pending=null}}while(1);current===null&&(lastPendingUpdate=newState),queue.baseState=lastPendingUpdate,queue.firstBaseUpdate=firstPendingUpdate,queue.lastBaseUpdate=current,firstBaseUpdate===null&&(queue.shared.lanes=0),workInProgressRootSkippedLanes|=lastBaseUpdate,workInProgress$jscomp$0.lanes=lastBaseUpdate,workInProgress$jscomp$0.memoizedState=newState}}function callCallback(callback,context){if(typeof callback!=`function`)throw Error(formatProdErrorMessage$2(191,callback));callback.call(context)}function commitCallbacks(updateQueue,context){var callbacks=updateQueue.callbacks;if(callbacks!==null)for(updateQueue.callbacks=null,updateQueue=0;updateQueue<callbacks.length;updateQueue++)callCallback(callbacks[updateQueue],context)}var currentTreeHiddenStackCursor=createCursor(null),prevEntangledRenderLanesCursor=createCursor(0);function pushHiddenContext(fiber,context){fiber=entangledRenderLanes,push(prevEntangledRenderLanesCursor,fiber),push(currentTreeHiddenStackCursor,context),entangledRenderLanes=fiber|context.baseLanes}function reuseHiddenContextOnStack(){push(prevEntangledRenderLanesCursor,entangledRenderLanes),push(currentTreeHiddenStackCursor,currentTreeHiddenStackCursor.current)}function popHiddenContext(){entangledRenderLanes=prevEntangledRenderLanesCursor.current,pop(currentTreeHiddenStackCursor),pop(prevEntangledRenderLanesCursor)}var suspenseHandlerStackCursor=createCursor(null),shellBoundary=null;function pushPrimaryTreeSuspenseHandler(handler){var current=handler.alternate;push(suspenseStackCursor,suspenseStackCursor.current&1),push(suspenseHandlerStackCursor,handler),shellBoundary===null&&(current===null||currentTreeHiddenStackCursor.current!==null||current.memoizedState!==null)&&(shellBoundary=handler)}function pushDehydratedActivitySuspenseHandler(fiber){push(suspenseStackCursor,suspenseStackCursor.current),push(suspenseHandlerStackCursor,fiber),shellBoundary===null&&(shellBoundary=fiber)}function pushOffscreenSuspenseHandler(fiber){fiber.tag===22?(push(suspenseStackCursor,suspenseStackCursor.current),push(suspenseHandlerStackCursor,fiber),shellBoundary===null&&(shellBoundary=fiber)):reuseSuspenseHandlerOnStack(fiber)}function reuseSuspenseHandlerOnStack(){push(suspenseStackCursor,suspenseStackCursor.current),push(suspenseHandlerStackCursor,suspenseHandlerStackCursor.current)}function popSuspenseHandler(fiber){pop(suspenseHandlerStackCursor),shellBoundary===fiber&&(shellBoundary=null),pop(suspenseStackCursor)}var suspenseStackCursor=createCursor(0);function findFirstSuspended(row){for(var node=row;node!==null;){if(node.tag===13){var state=node.memoizedState;if(state!==null&&(state=state.dehydrated,state===null||isSuspenseInstancePending(state)||isSuspenseInstanceFallback(state)))return node}else if(node.tag===19&&(node.memoizedProps.revealOrder===`forwards`||node.memoizedProps.revealOrder===`backwards`||node.memoizedProps.revealOrder===`unstable_legacy-backwards`||node.memoizedProps.revealOrder===`together`)){if(node.flags&128)return node}else if(node.child!==null){node.child.return=node,node=node.child;continue}if(node===row)break;for(;node.sibling===null;){if(node.return===null||node.return===row)return null;node=node.return}node.sibling.return=node.return,node=node.sibling}return null}var renderLanes=0,currentlyRenderingFiber=null,currentHook=null,workInProgressHook=null,didScheduleRenderPhaseUpdate=!1,didScheduleRenderPhaseUpdateDuringThisPass=!1,shouldDoubleInvokeUserFnsInHooksDEV=!1,localIdCounter=0,thenableIndexCounter=0,thenableState=null,globalClientIdCounter=0;function throwInvalidHookError(){throw Error(formatProdErrorMessage$2(321))}function areHookInputsEqual(nextDeps,prevDeps){if(prevDeps===null)return!1;for(var i$4=0;i$4<prevDeps.length&&i$4<nextDeps.length;i$4++)if(!objectIs$3(nextDeps[i$4],prevDeps[i$4]))return!1;return!0}function renderWithHooks(current,workInProgress$1,Component$2,props,secondArg,nextRenderLanes){return renderLanes=nextRenderLanes,currentlyRenderingFiber=workInProgress$1,workInProgress$1.memoizedState=null,workInProgress$1.updateQueue=null,workInProgress$1.lanes=0,ReactSharedInternals.H=current===null||current.memoizedState===null?HooksDispatcherOnMount:HooksDispatcherOnUpdate,shouldDoubleInvokeUserFnsInHooksDEV=!1,nextRenderLanes=Component$2(props,secondArg),shouldDoubleInvokeUserFnsInHooksDEV=!1,didScheduleRenderPhaseUpdateDuringThisPass&&(nextRenderLanes=renderWithHooksAgain(workInProgress$1,Component$2,props,secondArg)),finishRenderingHooks(current),nextRenderLanes}function finishRenderingHooks(current){ReactSharedInternals.H=ContextOnlyDispatcher;var didRenderTooFewHooks=currentHook!==null&&currentHook.next!==null;if(renderLanes=0,workInProgressHook=currentHook=currentlyRenderingFiber=null,didScheduleRenderPhaseUpdate=!1,thenableIndexCounter=0,thenableState=null,didRenderTooFewHooks)throw Error(formatProdErrorMessage$2(300));current===null||didReceiveUpdate||(current=current.dependencies,current!==null&&checkIfContextChanged(current)&&(didReceiveUpdate=!0))}function renderWithHooksAgain(workInProgress$1,Component$2,props,secondArg){currentlyRenderingFiber=workInProgress$1;var numberOfReRenders=0;do{if(didScheduleRenderPhaseUpdateDuringThisPass&&(thenableState=null),thenableIndexCounter=0,didScheduleRenderPhaseUpdateDuringThisPass=!1,25<=numberOfReRenders)throw Error(formatProdErrorMessage$2(301));if(numberOfReRenders+=1,workInProgressHook=currentHook=null,workInProgress$1.updateQueue!=null){var children$1=workInProgress$1.updateQueue;children$1.lastEffect=null,children$1.events=null,children$1.stores=null,children$1.memoCache!=null&&(children$1.memoCache.index=0)}ReactSharedInternals.H=HooksDispatcherOnRerender,children$1=Component$2(props,secondArg)}while(didScheduleRenderPhaseUpdateDuringThisPass);return children$1}function TransitionAwareHostComponent(){var dispatcher=ReactSharedInternals.H,maybeThenable=dispatcher.useState()[0];return maybeThenable=typeof maybeThenable.then==`function`?useThenable(maybeThenable):maybeThenable,dispatcher=dispatcher.useState()[0],(currentHook===null?null:currentHook.memoizedState)!==dispatcher&&(currentlyRenderingFiber.flags|=1024),maybeThenable}function checkDidRenderIdHook(){var didRenderIdHook=localIdCounter!==0;return localIdCounter=0,didRenderIdHook}function bailoutHooks(current,workInProgress$1,lanes){workInProgress$1.updateQueue=current.updateQueue,workInProgress$1.flags&=-2053,current.lanes&=~lanes}function resetHooksOnUnwind(workInProgress$1){if(didScheduleRenderPhaseUpdate){for(workInProgress$1=workInProgress$1.memoizedState;workInProgress$1!==null;){var queue=workInProgress$1.queue;queue!==null&&(queue.pending=null),workInProgress$1=workInProgress$1.next}didScheduleRenderPhaseUpdate=!1}renderLanes=0,workInProgressHook=currentHook=currentlyRenderingFiber=null,didScheduleRenderPhaseUpdateDuringThisPass=!1,thenableIndexCounter=localIdCounter=0,thenableState=null}function mountWorkInProgressHook(){var hook={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return workInProgressHook===null?currentlyRenderingFiber.memoizedState=workInProgressHook=hook:workInProgressHook=workInProgressHook.next=hook,workInProgressHook}function updateWorkInProgressHook(){if(currentHook===null){var nextCurrentHook=currentlyRenderingFiber.alternate;nextCurrentHook=nextCurrentHook===null?null:nextCurrentHook.memoizedState}else nextCurrentHook=currentHook.next;var nextWorkInProgressHook=workInProgressHook===null?currentlyRenderingFiber.memoizedState:workInProgressHook.next;if(nextWorkInProgressHook!==null)workInProgressHook=nextWorkInProgressHook,currentHook=nextCurrentHook;else{if(nextCurrentHook===null)throw currentlyRenderingFiber.alternate===null?Error(formatProdErrorMessage$2(467)):Error(formatProdErrorMessage$2(310));currentHook=nextCurrentHook,nextCurrentHook={memoizedState:currentHook.memoizedState,baseState:currentHook.baseState,baseQueue:currentHook.baseQueue,queue:currentHook.queue,next:null},workInProgressHook===null?currentlyRenderingFiber.memoizedState=workInProgressHook=nextCurrentHook:workInProgressHook=workInProgressHook.next=nextCurrentHook}return workInProgressHook}function createFunctionComponentUpdateQueue(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function useThenable(thenable){var index$2=thenableIndexCounter;return thenableIndexCounter+=1,thenableState===null&&(thenableState=[]),thenable=trackUsedThenable(thenableState,thenable,index$2),index$2=currentlyRenderingFiber,(workInProgressHook===null?index$2.memoizedState:workInProgressHook.next)===null&&(index$2=index$2.alternate,ReactSharedInternals.H=index$2===null||index$2.memoizedState===null?HooksDispatcherOnMount:HooksDispatcherOnUpdate),thenable}function use(usable){if(typeof usable==`object`&&usable){if(typeof usable.then==`function`)return useThenable(usable);if(usable.$$typeof===REACT_CONTEXT_TYPE$1)return readContext(usable)}throw Error(formatProdErrorMessage$2(438,String(usable)))}function useMemoCache(size){var memoCache=null,updateQueue=currentlyRenderingFiber.updateQueue;if(updateQueue!==null&&(memoCache=updateQueue.memoCache),memoCache==null){var current=currentlyRenderingFiber.alternate;current!==null&&(current=current.updateQueue,current!==null&&(current=current.memoCache,current!=null&&(memoCache={data:current.data.map(function(array$1){return array$1.slice()}),index:0})))}if(memoCache??={data:[],index:0},updateQueue===null&&(updateQueue=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=updateQueue),updateQueue.memoCache=memoCache,updateQueue=memoCache.data[memoCache.index],updateQueue===void 0)for(updateQueue=memoCache.data[memoCache.index]=Array(size),current=0;current<size;current++)updateQueue[current]=REACT_MEMO_CACHE_SENTINEL;return memoCache.index++,updateQueue}function basicStateReducer(state,action){return typeof action==`function`?action(state):action}function updateReducer(reducer$2){return updateReducerImpl(updateWorkInProgressHook(),currentHook,reducer$2)}function updateReducerImpl(hook,current,reducer$2){var queue=hook.queue;if(queue===null)throw Error(formatProdErrorMessage$2(311));queue.lastRenderedReducer=reducer$2;var baseQueue=hook.baseQueue,pendingQueue=queue.pending;if(pendingQueue!==null){if(baseQueue!==null){var baseFirst=baseQueue.next;baseQueue.next=pendingQueue.next,pendingQueue.next=baseFirst}current.baseQueue=baseQueue=pendingQueue,queue.pending=null}if(pendingQueue=hook.baseState,baseQueue===null)hook.memoizedState=pendingQueue;else{current=baseQueue.next;var newBaseQueueFirst=baseFirst=null,newBaseQueueLast=null,update$1=current,didReadFromEntangledAsyncAction$60=!1;do{var updateLane=update$1.lane&-536870913;if(updateLane===update$1.lane?(renderLanes&updateLane)===updateLane:(workInProgressRootRenderLanes&updateLane)===updateLane){var revertLane=update$1.revertLane;if(revertLane===0)newBaseQueueLast!==null&&(newBaseQueueLast=newBaseQueueLast.next={lane:0,revertLane:0,gesture:null,action:update$1.action,hasEagerState:update$1.hasEagerState,eagerState:update$1.eagerState,next:null}),updateLane===currentEntangledLane&&(didReadFromEntangledAsyncAction$60=!0);else if((renderLanes&revertLane)===revertLane){update$1=update$1.next,revertLane===currentEntangledLane&&(didReadFromEntangledAsyncAction$60=!0);continue}else updateLane={lane:0,revertLane:update$1.revertLane,gesture:null,action:update$1.action,hasEagerState:update$1.hasEagerState,eagerState:update$1.eagerState,next:null},newBaseQueueLast===null?(newBaseQueueFirst=newBaseQueueLast=updateLane,baseFirst=pendingQueue):newBaseQueueLast=newBaseQueueLast.next=updateLane,currentlyRenderingFiber.lanes|=revertLane,workInProgressRootSkippedLanes|=revertLane;updateLane=update$1.action,shouldDoubleInvokeUserFnsInHooksDEV&&reducer$2(pendingQueue,updateLane),pendingQueue=update$1.hasEagerState?update$1.eagerState:reducer$2(pendingQueue,updateLane)}else revertLane={lane:updateLane,revertLane:update$1.revertLane,gesture:update$1.gesture,action:update$1.action,hasEagerState:update$1.hasEagerState,eagerState:update$1.eagerState,next:null},newBaseQueueLast===null?(newBaseQueueFirst=newBaseQueueLast=revertLane,baseFirst=pendingQueue):newBaseQueueLast=newBaseQueueLast.next=revertLane,currentlyRenderingFiber.lanes|=updateLane,workInProgressRootSkippedLanes|=updateLane;update$1=update$1.next}while(update$1!==null&&update$1!==current);if(newBaseQueueLast===null?baseFirst=pendingQueue:newBaseQueueLast.next=newBaseQueueFirst,!objectIs$3(pendingQueue,hook.memoizedState)&&(didReceiveUpdate=!0,didReadFromEntangledAsyncAction$60&&(reducer$2=currentEntangledActionThenable,reducer$2!==null)))throw reducer$2;hook.memoizedState=pendingQueue,hook.baseState=baseFirst,hook.baseQueue=newBaseQueueLast,queue.lastRenderedState=pendingQueue}return baseQueue===null&&(queue.lanes=0),[hook.memoizedState,queue.dispatch]}function rerenderReducer(reducer$2){var hook=updateWorkInProgressHook(),queue=hook.queue;if(queue===null)throw Error(formatProdErrorMessage$2(311));queue.lastRenderedReducer=reducer$2;var dispatch$1=queue.dispatch,lastRenderPhaseUpdate=queue.pending,newState=hook.memoizedState;if(lastRenderPhaseUpdate!==null){queue.pending=null;var update$1=lastRenderPhaseUpdate=lastRenderPhaseUpdate.next;do newState=reducer$2(newState,update$1.action),update$1=update$1.next;while(update$1!==lastRenderPhaseUpdate);objectIs$3(newState,hook.memoizedState)||(didReceiveUpdate=!0),hook.memoizedState=newState,hook.baseQueue===null&&(hook.baseState=newState),queue.lastRenderedState=newState}return[newState,dispatch$1]}function updateSyncExternalStore(subscribe,getSnapshot,getServerSnapshot){var fiber=currentlyRenderingFiber,hook=updateWorkInProgressHook(),isHydrating$jscomp$0=isHydrating;if(isHydrating$jscomp$0){if(getServerSnapshot===void 0)throw Error(formatProdErrorMessage$2(407));getServerSnapshot=getServerSnapshot()}else getServerSnapshot=getSnapshot();var snapshotChanged=!objectIs$3((currentHook||hook).memoizedState,getServerSnapshot);if(snapshotChanged&&(hook.memoizedState=getServerSnapshot,didReceiveUpdate=!0),hook=hook.queue,updateEffect(subscribeToStore.bind(null,fiber,hook,subscribe),[subscribe]),hook.getSnapshot!==getSnapshot||snapshotChanged||workInProgressHook!==null&&workInProgressHook.memoizedState.tag&1){if(fiber.flags|=2048,pushSimpleEffect(9,{destroy:void 0},updateStoreInstance.bind(null,fiber,hook,getServerSnapshot,getSnapshot),null),workInProgressRoot===null)throw Error(formatProdErrorMessage$2(349));isHydrating$jscomp$0||renderLanes&127||pushStoreConsistencyCheck(fiber,getSnapshot,getServerSnapshot)}return getServerSnapshot}function pushStoreConsistencyCheck(fiber,getSnapshot,renderedSnapshot){fiber.flags|=16384,fiber={getSnapshot,value:renderedSnapshot},getSnapshot=currentlyRenderingFiber.updateQueue,getSnapshot===null?(getSnapshot=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=getSnapshot,getSnapshot.stores=[fiber]):(renderedSnapshot=getSnapshot.stores,renderedSnapshot===null?getSnapshot.stores=[fiber]:renderedSnapshot.push(fiber))}function updateStoreInstance(fiber,inst,nextSnapshot,getSnapshot){inst.value=nextSnapshot,inst.getSnapshot=getSnapshot,checkIfSnapshotChanged$1(inst)&&forceStoreRerender(fiber)}function subscribeToStore(fiber,inst,subscribe){return subscribe(function(){checkIfSnapshotChanged$1(inst)&&forceStoreRerender(fiber)})}function checkIfSnapshotChanged$1(inst){var latestGetSnapshot=inst.getSnapshot;inst=inst.value;try{var nextValue=latestGetSnapshot();return!objectIs$3(inst,nextValue)}catch{return!0}}function forceStoreRerender(fiber){var root$3=enqueueConcurrentRenderForLane(fiber,2);root$3!==null&&scheduleUpdateOnFiber(root$3,fiber,2)}function mountStateImpl(initialState$2){var hook=mountWorkInProgressHook();if(typeof initialState$2==`function`){var initialStateInitializer=initialState$2;if(initialState$2=initialStateInitializer(),shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{initialStateInitializer()}finally{setIsStrictModeForDevtools(!1)}}}return hook.memoizedState=hook.baseState=initialState$2,hook.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:initialState$2},hook}function updateOptimisticImpl(hook,current,passthrough,reducer$2){return hook.baseState=passthrough,updateReducerImpl(hook,currentHook,typeof reducer$2==`function`?reducer$2:basicStateReducer)}function dispatchActionState(fiber,actionQueue,setPendingState,setState,payload){if(isRenderPhaseUpdate(fiber))throw Error(formatProdErrorMessage$2(485));if(fiber=actionQueue.action,fiber!==null){var actionNode={payload,action:fiber,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(listener){actionNode.listeners.push(listener)}};ReactSharedInternals.T===null?actionNode.isTransition=!1:setPendingState(!0),setState(actionNode),setPendingState=actionQueue.pending,setPendingState===null?(actionNode.next=actionQueue.pending=actionNode,runActionStateAction(actionQueue,actionNode)):(actionNode.next=setPendingState.next,actionQueue.pending=setPendingState.next=actionNode)}}function runActionStateAction(actionQueue,node){var action=node.action,payload=node.payload,prevState=actionQueue.state;if(node.isTransition){var prevTransition=ReactSharedInternals.T,currentTransition={};ReactSharedInternals.T=currentTransition;try{var returnValue=action(prevState,payload),onStartTransitionFinish=ReactSharedInternals.S;onStartTransitionFinish!==null&&onStartTransitionFinish(currentTransition,returnValue),handleActionReturnValue(actionQueue,node,returnValue)}catch(error$1){onActionError(actionQueue,node,error$1)}finally{prevTransition!==null&&currentTransition.types!==null&&(prevTransition.types=currentTransition.types),ReactSharedInternals.T=prevTransition}}else try{prevTransition=action(prevState,payload),handleActionReturnValue(actionQueue,node,prevTransition)}catch(error$66){onActionError(actionQueue,node,error$66)}}function handleActionReturnValue(actionQueue,node,returnValue){typeof returnValue==`object`&&returnValue&&typeof returnValue.then==`function`?returnValue.then(function(nextState){onActionSuccess(actionQueue,node,nextState)},function(error$1){return onActionError(actionQueue,node,error$1)}):onActionSuccess(actionQueue,node,returnValue)}function onActionSuccess(actionQueue,actionNode,nextState){actionNode.status=`fulfilled`,actionNode.value=nextState,notifyActionListeners(actionNode),actionQueue.state=nextState,actionNode=actionQueue.pending,actionNode!==null&&(nextState=actionNode.next,nextState===actionNode?actionQueue.pending=null:(nextState=nextState.next,actionNode.next=nextState,runActionStateAction(actionQueue,nextState)))}function onActionError(actionQueue,actionNode,error$1){var last=actionQueue.pending;if(actionQueue.pending=null,last!==null){last=last.next;do actionNode.status=`rejected`,actionNode.reason=error$1,notifyActionListeners(actionNode),actionNode=actionNode.next;while(actionNode!==last)}actionQueue.action=null}function notifyActionListeners(actionNode){actionNode=actionNode.listeners;for(var i$4=0;i$4<actionNode.length;i$4++)(0,actionNode[i$4])()}function actionStateReducer(oldState,newState){return newState}function mountActionState(action,initialStateProp){if(isHydrating){var ssrFormState=workInProgressRoot.formState;if(ssrFormState!==null){a:{var JSCompiler_inline_result=currentlyRenderingFiber;if(isHydrating){if(nextHydratableInstance){b:{for(var JSCompiler_inline_result$jscomp$0=nextHydratableInstance,inRootOrSingleton=rootOrSingletonContext;JSCompiler_inline_result$jscomp$0.nodeType!==8;){if(!inRootOrSingleton){JSCompiler_inline_result$jscomp$0=null;break b}if(JSCompiler_inline_result$jscomp$0=getNextHydratable(JSCompiler_inline_result$jscomp$0.nextSibling),JSCompiler_inline_result$jscomp$0===null){JSCompiler_inline_result$jscomp$0=null;break b}}inRootOrSingleton=JSCompiler_inline_result$jscomp$0.data,JSCompiler_inline_result$jscomp$0=inRootOrSingleton===`F!`||inRootOrSingleton===`F`?JSCompiler_inline_result$jscomp$0:null}if(JSCompiler_inline_result$jscomp$0){nextHydratableInstance=getNextHydratable(JSCompiler_inline_result$jscomp$0.nextSibling),JSCompiler_inline_result=JSCompiler_inline_result$jscomp$0.data===`F!`;break a}}throwOnHydrationMismatch(JSCompiler_inline_result)}JSCompiler_inline_result=!1}JSCompiler_inline_result&&(initialStateProp=ssrFormState[0])}}return ssrFormState=mountWorkInProgressHook(),ssrFormState.memoizedState=ssrFormState.baseState=initialStateProp,JSCompiler_inline_result={pending:null,lanes:0,dispatch:null,lastRenderedReducer:actionStateReducer,lastRenderedState:initialStateProp},ssrFormState.queue=JSCompiler_inline_result,ssrFormState=dispatchSetState.bind(null,currentlyRenderingFiber,JSCompiler_inline_result),JSCompiler_inline_result.dispatch=ssrFormState,JSCompiler_inline_result=mountStateImpl(!1),inRootOrSingleton=dispatchOptimisticSetState.bind(null,currentlyRenderingFiber,!1,JSCompiler_inline_result.queue),JSCompiler_inline_result=mountWorkInProgressHook(),JSCompiler_inline_result$jscomp$0={state:initialStateProp,dispatch:null,action,pending:null},JSCompiler_inline_result.queue=JSCompiler_inline_result$jscomp$0,ssrFormState=dispatchActionState.bind(null,currentlyRenderingFiber,JSCompiler_inline_result$jscomp$0,inRootOrSingleton,ssrFormState),JSCompiler_inline_result$jscomp$0.dispatch=ssrFormState,JSCompiler_inline_result.memoizedState=action,[initialStateProp,ssrFormState,!1]}function updateActionState(action){return updateActionStateImpl(updateWorkInProgressHook(),currentHook,action)}function updateActionStateImpl(stateHook,currentStateHook,action){if(currentStateHook=updateReducerImpl(stateHook,currentStateHook,actionStateReducer)[0],stateHook=updateReducer(basicStateReducer)[0],typeof currentStateHook==`object`&&currentStateHook&&typeof currentStateHook.then==`function`)try{var state=useThenable(currentStateHook)}catch(x$2){throw x$2===SuspenseException?SuspenseActionException:x$2}else state=currentStateHook;currentStateHook=updateWorkInProgressHook();var actionQueue=currentStateHook.queue,dispatch$1=actionQueue.dispatch;return action!==currentStateHook.memoizedState&&(currentlyRenderingFiber.flags|=2048,pushSimpleEffect(9,{destroy:void 0},actionStateActionEffect.bind(null,actionQueue,action),null)),[state,dispatch$1,stateHook]}function actionStateActionEffect(actionQueue,action){actionQueue.action=action}function rerenderActionState(action){var stateHook=updateWorkInProgressHook(),currentStateHook=currentHook;if(currentStateHook!==null)return updateActionStateImpl(stateHook,currentStateHook,action);updateWorkInProgressHook(),stateHook=stateHook.memoizedState,currentStateHook=updateWorkInProgressHook();var dispatch$1=currentStateHook.queue.dispatch;return currentStateHook.memoizedState=action,[stateHook,dispatch$1,!1]}function pushSimpleEffect(tag,inst,create$2,deps){return tag={tag,create:create$2,deps,inst,next:null},inst=currentlyRenderingFiber.updateQueue,inst===null&&(inst=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=inst),create$2=inst.lastEffect,create$2===null?inst.lastEffect=tag.next=tag:(deps=create$2.next,create$2.next=tag,tag.next=deps,inst.lastEffect=tag),tag}function updateRef(){return updateWorkInProgressHook().memoizedState}function mountEffectImpl(fiberFlags,hookFlags,create$2,deps){var hook=mountWorkInProgressHook();currentlyRenderingFiber.flags|=fiberFlags,hook.memoizedState=pushSimpleEffect(1|hookFlags,{destroy:void 0},create$2,deps===void 0?null:deps)}function updateEffectImpl(fiberFlags,hookFlags,create$2,deps){var hook=updateWorkInProgressHook();deps=deps===void 0?null:deps;var inst=hook.memoizedState.inst;currentHook!==null&&deps!==null&&areHookInputsEqual(deps,currentHook.memoizedState.deps)?hook.memoizedState=pushSimpleEffect(hookFlags,inst,create$2,deps):(currentlyRenderingFiber.flags|=fiberFlags,hook.memoizedState=pushSimpleEffect(1|hookFlags,inst,create$2,deps))}function mountEffect(create$2,deps){mountEffectImpl(8390656,8,create$2,deps)}function updateEffect(create$2,deps){updateEffectImpl(2048,8,create$2,deps)}function useEffectEventImpl(payload){currentlyRenderingFiber.flags|=4;var componentUpdateQueue=currentlyRenderingFiber.updateQueue;if(componentUpdateQueue===null)componentUpdateQueue=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=componentUpdateQueue,componentUpdateQueue.events=[payload];else{var events$3=componentUpdateQueue.events;events$3===null?componentUpdateQueue.events=[payload]:events$3.push(payload)}}function updateEvent(callback){var ref=updateWorkInProgressHook().memoizedState;return useEffectEventImpl({ref,nextImpl:callback}),function(){if(executionContext&2)throw Error(formatProdErrorMessage$2(440));return ref.impl.apply(void 0,arguments)}}function updateInsertionEffect(create$2,deps){return updateEffectImpl(4,2,create$2,deps)}function updateLayoutEffect(create$2,deps){return updateEffectImpl(4,4,create$2,deps)}function imperativeHandleEffect(create$2,ref){if(typeof ref==`function`){create$2=create$2();var refCleanup=ref(create$2);return function(){typeof refCleanup==`function`?refCleanup():ref(null)}}if(ref!=null)return create$2=create$2(),ref.current=create$2,function(){ref.current=null}}function updateImperativeHandle(ref,create$2,deps){deps=deps==null?null:deps.concat([ref]),updateEffectImpl(4,4,imperativeHandleEffect.bind(null,create$2,ref),deps)}function mountDebugValue(){}function updateCallback(callback,deps){var hook=updateWorkInProgressHook();deps=deps===void 0?null:deps;var prevState=hook.memoizedState;return deps!==null&&areHookInputsEqual(deps,prevState[1])?prevState[0]:(hook.memoizedState=[callback,deps],callback)}function updateMemo(nextCreate,deps){var hook=updateWorkInProgressHook();deps=deps===void 0?null:deps;var prevState=hook.memoizedState;if(deps!==null&&areHookInputsEqual(deps,prevState[1]))return prevState[0];if(prevState=nextCreate(),shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{nextCreate()}finally{setIsStrictModeForDevtools(!1)}}return hook.memoizedState=[prevState,deps],prevState}function mountDeferredValueImpl(hook,value,initialValue){return initialValue===void 0||renderLanes&1073741824&&!(workInProgressRootRenderLanes&261930)?hook.memoizedState=value:(hook.memoizedState=initialValue,hook=requestDeferredLane(),currentlyRenderingFiber.lanes|=hook,workInProgressRootSkippedLanes|=hook,initialValue)}function updateDeferredValueImpl(hook,prevValue,value,initialValue){return objectIs$3(value,prevValue)?value:currentTreeHiddenStackCursor.current===null?!(renderLanes&42)||renderLanes&1073741824&&!(workInProgressRootRenderLanes&261930)?(didReceiveUpdate=!0,hook.memoizedState=value):(hook=requestDeferredLane(),currentlyRenderingFiber.lanes|=hook,workInProgressRootSkippedLanes|=hook,prevValue):(hook=mountDeferredValueImpl(hook,value,initialValue),objectIs$3(hook,prevValue)||(didReceiveUpdate=!0),hook)}function startTransition(fiber,queue,pendingState,finishedState,callback){var previousPriority=ReactDOMSharedInternals.p;ReactDOMSharedInternals.p=previousPriority!==0&&8>previousPriority?previousPriority:8;var prevTransition=ReactSharedInternals.T,currentTransition={};ReactSharedInternals.T=currentTransition,dispatchOptimisticSetState(fiber,!1,queue,pendingState);try{var returnValue=callback(),onStartTransitionFinish=ReactSharedInternals.S;onStartTransitionFinish!==null&&onStartTransitionFinish(currentTransition,returnValue),typeof returnValue==`object`&&returnValue&&typeof returnValue.then==`function`?dispatchSetStateInternal(fiber,queue,chainThenableValue(returnValue,finishedState),requestUpdateLane(fiber)):dispatchSetStateInternal(fiber,queue,finishedState,requestUpdateLane(fiber))}catch(error$1){dispatchSetStateInternal(fiber,queue,{then:function(){},status:`rejected`,reason:error$1},requestUpdateLane())}finally{ReactDOMSharedInternals.p=previousPriority,prevTransition!==null&&currentTransition.types!==null&&(prevTransition.types=currentTransition.types),ReactSharedInternals.T=prevTransition}}function noop$8(){}function startHostTransition(formFiber,pendingState,action,formData){if(formFiber.tag!==5)throw Error(formatProdErrorMessage$2(476));var queue=ensureFormComponentIsStateful(formFiber).queue;startTransition(formFiber,queue,pendingState,sharedNotPendingObject,action===null?noop$8:function(){return requestFormReset$1(formFiber),action(formData)})}function ensureFormComponentIsStateful(formFiber){var existingStateHook=formFiber.memoizedState;if(existingStateHook!==null)return existingStateHook;existingStateHook={memoizedState:sharedNotPendingObject,baseState:sharedNotPendingObject,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:sharedNotPendingObject},next:null};var initialResetState={};return existingStateHook.next={memoizedState:initialResetState,baseState:initialResetState,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:initialResetState},next:null},formFiber.memoizedState=existingStateHook,formFiber=formFiber.alternate,formFiber!==null&&(formFiber.memoizedState=existingStateHook),existingStateHook}function requestFormReset$1(formFiber){var stateHook=ensureFormComponentIsStateful(formFiber);stateHook.next===null&&(stateHook=formFiber.alternate.memoizedState),dispatchSetStateInternal(formFiber,stateHook.next.queue,{},requestUpdateLane())}function useHostTransitionStatus(){return readContext(HostTransitionContext)}function updateId(){return updateWorkInProgressHook().memoizedState}function updateRefresh(){return updateWorkInProgressHook().memoizedState}function refreshCache(fiber){for(var provider=fiber.return;provider!==null;){switch(provider.tag){case 24:case 3:var lane=requestUpdateLane();fiber=createUpdate(lane);var root$69=enqueueUpdate(provider,fiber,lane);root$69!==null&&(scheduleUpdateOnFiber(root$69,provider,lane),entangleTransitions(root$69,provider,lane)),provider={cache:createCache()},fiber.payload=provider;return}provider=provider.return}}function dispatchReducerAction(fiber,queue,action){var lane=requestUpdateLane();action={lane,revertLane:0,gesture:null,action,hasEagerState:!1,eagerState:null,next:null},isRenderPhaseUpdate(fiber)?enqueueRenderPhaseUpdate(queue,action):(action=enqueueConcurrentHookUpdate(fiber,queue,action,lane),action!==null&&(scheduleUpdateOnFiber(action,fiber,lane),entangleTransitionUpdate(action,queue,lane)))}function dispatchSetState(fiber,queue,action){dispatchSetStateInternal(fiber,queue,action,requestUpdateLane())}function dispatchSetStateInternal(fiber,queue,action,lane){var update$1={lane,revertLane:0,gesture:null,action,hasEagerState:!1,eagerState:null,next:null};if(isRenderPhaseUpdate(fiber))enqueueRenderPhaseUpdate(queue,update$1);else{var alternate=fiber.alternate;if(fiber.lanes===0&&(alternate===null||alternate.lanes===0)&&(alternate=queue.lastRenderedReducer,alternate!==null))try{var currentState=queue.lastRenderedState,eagerState=alternate(currentState,action);if(update$1.hasEagerState=!0,update$1.eagerState=eagerState,objectIs$3(eagerState,currentState))return enqueueUpdate$1(fiber,queue,update$1,0),workInProgressRoot===null&&finishQueueingConcurrentUpdates(),!1}catch{}if(action=enqueueConcurrentHookUpdate(fiber,queue,update$1,lane),action!==null)return scheduleUpdateOnFiber(action,fiber,lane),entangleTransitionUpdate(action,queue,lane),!0}return!1}function dispatchOptimisticSetState(fiber,throwIfDuringRender,queue,action){if(action={lane:2,revertLane:requestTransitionLane(),gesture:null,action,hasEagerState:!1,eagerState:null,next:null},isRenderPhaseUpdate(fiber)){if(throwIfDuringRender)throw Error(formatProdErrorMessage$2(479))}else throwIfDuringRender=enqueueConcurrentHookUpdate(fiber,queue,action,2),throwIfDuringRender!==null&&scheduleUpdateOnFiber(throwIfDuringRender,fiber,2)}function isRenderPhaseUpdate(fiber){var alternate=fiber.alternate;return fiber===currentlyRenderingFiber||alternate!==null&&alternate===currentlyRenderingFiber}function enqueueRenderPhaseUpdate(queue,update$1){didScheduleRenderPhaseUpdateDuringThisPass=didScheduleRenderPhaseUpdate=!0;var pending=queue.pending;pending===null?update$1.next=update$1:(update$1.next=pending.next,pending.next=update$1),queue.pending=update$1}function entangleTransitionUpdate(root$3,queue,lane){if(lane&4194048){var queueLanes=queue.lanes;queueLanes&=root$3.pendingLanes,lane|=queueLanes,queue.lanes=lane,markRootEntangled(root$3,lane)}}var ContextOnlyDispatcher={readContext,use,useCallback:throwInvalidHookError,useContext:throwInvalidHookError,useEffect:throwInvalidHookError,useImperativeHandle:throwInvalidHookError,useLayoutEffect:throwInvalidHookError,useInsertionEffect:throwInvalidHookError,useMemo:throwInvalidHookError,useReducer:throwInvalidHookError,useRef:throwInvalidHookError,useState:throwInvalidHookError,useDebugValue:throwInvalidHookError,useDeferredValue:throwInvalidHookError,useTransition:throwInvalidHookError,useSyncExternalStore:throwInvalidHookError,useId:throwInvalidHookError,useHostTransitionStatus:throwInvalidHookError,useFormState:throwInvalidHookError,useActionState:throwInvalidHookError,useOptimistic:throwInvalidHookError,useMemoCache:throwInvalidHookError,useCacheRefresh:throwInvalidHookError};ContextOnlyDispatcher.useEffectEvent=throwInvalidHookError;var HooksDispatcherOnMount={readContext,use,useCallback:function(callback,deps){return mountWorkInProgressHook().memoizedState=[callback,deps===void 0?null:deps],callback},useContext:readContext,useEffect:mountEffect,useImperativeHandle:function(ref,create$2,deps){deps=deps==null?null:deps.concat([ref]),mountEffectImpl(4194308,4,imperativeHandleEffect.bind(null,create$2,ref),deps)},useLayoutEffect:function(create$2,deps){return mountEffectImpl(4194308,4,create$2,deps)},useInsertionEffect:function(create$2,deps){mountEffectImpl(4,2,create$2,deps)},useMemo:function(nextCreate,deps){var hook=mountWorkInProgressHook();deps=deps===void 0?null:deps;var nextValue=nextCreate();if(shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{nextCreate()}finally{setIsStrictModeForDevtools(!1)}}return hook.memoizedState=[nextValue,deps],nextValue},useReducer:function(reducer$2,initialArg,init$1){var hook=mountWorkInProgressHook();if(init$1!==void 0){var initialState$2=init$1(initialArg);if(shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{init$1(initialArg)}finally{setIsStrictModeForDevtools(!1)}}}else initialState$2=initialArg;return hook.memoizedState=hook.baseState=initialState$2,reducer$2={pending:null,lanes:0,dispatch:null,lastRenderedReducer:reducer$2,lastRenderedState:initialState$2},hook.queue=reducer$2,reducer$2=reducer$2.dispatch=dispatchReducerAction.bind(null,currentlyRenderingFiber,reducer$2),[hook.memoizedState,reducer$2]},useRef:function(initialValue){var hook=mountWorkInProgressHook();return initialValue={current:initialValue},hook.memoizedState=initialValue},useState:function(initialState$2){initialState$2=mountStateImpl(initialState$2);var queue=initialState$2.queue,dispatch$1=dispatchSetState.bind(null,currentlyRenderingFiber,queue);return queue.dispatch=dispatch$1,[initialState$2.memoizedState,dispatch$1]},useDebugValue:mountDebugValue,useDeferredValue:function(value,initialValue){return mountDeferredValueImpl(mountWorkInProgressHook(),value,initialValue)},useTransition:function(){var stateHook=mountStateImpl(!1);return stateHook=startTransition.bind(null,currentlyRenderingFiber,stateHook.queue,!0,!1),mountWorkInProgressHook().memoizedState=stateHook,[!1,stateHook]},useSyncExternalStore:function(subscribe,getSnapshot,getServerSnapshot){var fiber=currentlyRenderingFiber,hook=mountWorkInProgressHook();if(isHydrating){if(getServerSnapshot===void 0)throw Error(formatProdErrorMessage$2(407));getServerSnapshot=getServerSnapshot()}else{if(getServerSnapshot=getSnapshot(),workInProgressRoot===null)throw Error(formatProdErrorMessage$2(349));workInProgressRootRenderLanes&127||pushStoreConsistencyCheck(fiber,getSnapshot,getServerSnapshot)}hook.memoizedState=getServerSnapshot;var inst={value:getServerSnapshot,getSnapshot};return hook.queue=inst,mountEffect(subscribeToStore.bind(null,fiber,inst,subscribe),[subscribe]),fiber.flags|=2048,pushSimpleEffect(9,{destroy:void 0},updateStoreInstance.bind(null,fiber,inst,getServerSnapshot,getSnapshot),null),getServerSnapshot},useId:function(){var hook=mountWorkInProgressHook(),identifierPrefix=workInProgressRoot.identifierPrefix;if(isHydrating){var JSCompiler_inline_result=treeContextOverflow,idWithLeadingBit=treeContextId;JSCompiler_inline_result=(idWithLeadingBit&~(1<<32-clz32(idWithLeadingBit)-1)).toString(32)+JSCompiler_inline_result,identifierPrefix=`_`+identifierPrefix+`R_`+JSCompiler_inline_result,JSCompiler_inline_result=localIdCounter++,0<JSCompiler_inline_result&&(identifierPrefix+=`H`+JSCompiler_inline_result.toString(32)),identifierPrefix+=`_`}else JSCompiler_inline_result=globalClientIdCounter++,identifierPrefix=`_`+identifierPrefix+`r_`+JSCompiler_inline_result.toString(32)+`_`;return hook.memoizedState=identifierPrefix},useHostTransitionStatus,useFormState:mountActionState,useActionState:mountActionState,useOptimistic:function(passthrough){var hook=mountWorkInProgressHook();hook.memoizedState=hook.baseState=passthrough;var queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return hook.queue=queue,hook=dispatchOptimisticSetState.bind(null,currentlyRenderingFiber,!0,queue),queue.dispatch=hook,[passthrough,hook]},useMemoCache,useCacheRefresh:function(){return mountWorkInProgressHook().memoizedState=refreshCache.bind(null,currentlyRenderingFiber)},useEffectEvent:function(callback){var hook=mountWorkInProgressHook(),ref={impl:callback};return hook.memoizedState=ref,function(){if(executionContext&2)throw Error(formatProdErrorMessage$2(440));return ref.impl.apply(void 0,arguments)}}},HooksDispatcherOnUpdate={readContext,use,useCallback:updateCallback,useContext:readContext,useEffect:updateEffect,useImperativeHandle:updateImperativeHandle,useInsertionEffect:updateInsertionEffect,useLayoutEffect:updateLayoutEffect,useMemo:updateMemo,useReducer:updateReducer,useRef:updateRef,useState:function(){return updateReducer(basicStateReducer)},useDebugValue:mountDebugValue,useDeferredValue:function(value,initialValue){return updateDeferredValueImpl(updateWorkInProgressHook(),currentHook.memoizedState,value,initialValue)},useTransition:function(){var booleanOrThenable=updateReducer(basicStateReducer)[0],start$2=updateWorkInProgressHook().memoizedState;return[typeof booleanOrThenable==`boolean`?booleanOrThenable:useThenable(booleanOrThenable),start$2]},useSyncExternalStore:updateSyncExternalStore,useId:updateId,useHostTransitionStatus,useFormState:updateActionState,useActionState:updateActionState,useOptimistic:function(passthrough,reducer$2){return updateOptimisticImpl(updateWorkInProgressHook(),currentHook,passthrough,reducer$2)},useMemoCache,useCacheRefresh:updateRefresh};HooksDispatcherOnUpdate.useEffectEvent=updateEvent;var HooksDispatcherOnRerender={readContext,use,useCallback:updateCallback,useContext:readContext,useEffect:updateEffect,useImperativeHandle:updateImperativeHandle,useInsertionEffect:updateInsertionEffect,useLayoutEffect:updateLayoutEffect,useMemo:updateMemo,useReducer:rerenderReducer,useRef:updateRef,useState:function(){return rerenderReducer(basicStateReducer)},useDebugValue:mountDebugValue,useDeferredValue:function(value,initialValue){var hook=updateWorkInProgressHook();return currentHook===null?mountDeferredValueImpl(hook,value,initialValue):updateDeferredValueImpl(hook,currentHook.memoizedState,value,initialValue)},useTransition:function(){var booleanOrThenable=rerenderReducer(basicStateReducer)[0],start$2=updateWorkInProgressHook().memoizedState;return[typeof booleanOrThenable==`boolean`?booleanOrThenable:useThenable(booleanOrThenable),start$2]},useSyncExternalStore:updateSyncExternalStore,useId:updateId,useHostTransitionStatus,useFormState:rerenderActionState,useActionState:rerenderActionState,useOptimistic:function(passthrough,reducer$2){var hook=updateWorkInProgressHook();return currentHook===null?(hook.baseState=passthrough,[passthrough,hook.queue.dispatch]):updateOptimisticImpl(hook,currentHook,passthrough,reducer$2)},useMemoCache,useCacheRefresh:updateRefresh};HooksDispatcherOnRerender.useEffectEvent=updateEvent;function applyDerivedStateFromProps(workInProgress$1,ctor,getDerivedStateFromProps,nextProps){ctor=workInProgress$1.memoizedState,getDerivedStateFromProps=getDerivedStateFromProps(nextProps,ctor),getDerivedStateFromProps=getDerivedStateFromProps==null?ctor:assign({},ctor,getDerivedStateFromProps),workInProgress$1.memoizedState=getDerivedStateFromProps,workInProgress$1.lanes===0&&(workInProgress$1.updateQueue.baseState=getDerivedStateFromProps)}var classComponentUpdater={enqueueSetState:function(inst,payload,callback){inst=inst._reactInternals;var lane=requestUpdateLane(),update$1=createUpdate(lane);update$1.payload=payload,callback!=null&&(update$1.callback=callback),payload=enqueueUpdate(inst,update$1,lane),payload!==null&&(scheduleUpdateOnFiber(payload,inst,lane),entangleTransitions(payload,inst,lane))},enqueueReplaceState:function(inst,payload,callback){inst=inst._reactInternals;var lane=requestUpdateLane(),update$1=createUpdate(lane);update$1.tag=1,update$1.payload=payload,callback!=null&&(update$1.callback=callback),payload=enqueueUpdate(inst,update$1,lane),payload!==null&&(scheduleUpdateOnFiber(payload,inst,lane),entangleTransitions(payload,inst,lane))},enqueueForceUpdate:function(inst,callback){inst=inst._reactInternals;var lane=requestUpdateLane(),update$1=createUpdate(lane);update$1.tag=2,callback!=null&&(update$1.callback=callback),callback=enqueueUpdate(inst,update$1,lane),callback!==null&&(scheduleUpdateOnFiber(callback,inst,lane),entangleTransitions(callback,inst,lane))}};function checkShouldComponentUpdate(workInProgress$1,ctor,oldProps,newProps,oldState,newState,nextContext){return workInProgress$1=workInProgress$1.stateNode,typeof workInProgress$1.shouldComponentUpdate==`function`?workInProgress$1.shouldComponentUpdate(newProps,newState,nextContext):ctor.prototype&&ctor.prototype.isPureReactComponent?!shallowEqual$2(oldProps,newProps)||!shallowEqual$2(oldState,newState):!0}function callComponentWillReceiveProps(workInProgress$1,instance,newProps,nextContext){workInProgress$1=instance.state,typeof instance.componentWillReceiveProps==`function`&&instance.componentWillReceiveProps(newProps,nextContext),typeof instance.UNSAFE_componentWillReceiveProps==`function`&&instance.UNSAFE_componentWillReceiveProps(newProps,nextContext),instance.state!==workInProgress$1&&classComponentUpdater.enqueueReplaceState(instance,instance.state,null)}function resolveClassComponentProps(Component$2,baseProps){var newProps=baseProps;if(`ref`in baseProps)for(var propName in newProps={},baseProps)propName!==`ref`&&(newProps[propName]=baseProps[propName]);if(Component$2=Component$2.defaultProps)for(var propName$73 in newProps===baseProps&&(newProps=assign({},newProps)),Component$2)newProps[propName$73]===void 0&&(newProps[propName$73]=Component$2[propName$73]);return newProps}function defaultOnUncaughtError(error$1){reportGlobalError(error$1)}function defaultOnCaughtError(error$1){console.error(error$1)}function defaultOnRecoverableError(error$1){reportGlobalError(error$1)}function logUncaughtError(root$3,errorInfo){try{var onUncaughtError=root$3.onUncaughtError;onUncaughtError(errorInfo.value,{componentStack:errorInfo.stack})}catch(e$74){setTimeout(function(){throw e$74})}}function logCaughtError(root$3,boundary,errorInfo){try{var onCaughtError=root$3.onCaughtError;onCaughtError(errorInfo.value,{componentStack:errorInfo.stack,errorBoundary:boundary.tag===1?boundary.stateNode:null})}catch(e$75){setTimeout(function(){throw e$75})}}function createRootErrorUpdate(root$3,errorInfo,lane){return lane=createUpdate(lane),lane.tag=3,lane.payload={element:null},lane.callback=function(){logUncaughtError(root$3,errorInfo)},lane}function createClassErrorUpdate(lane){return lane=createUpdate(lane),lane.tag=3,lane}function initializeClassErrorUpdate(update$1,root$3,fiber,errorInfo){var getDerivedStateFromError=fiber.type.getDerivedStateFromError;if(typeof getDerivedStateFromError==`function`){var error$1=errorInfo.value;update$1.payload=function(){return getDerivedStateFromError(error$1)},update$1.callback=function(){logCaughtError(root$3,fiber,errorInfo)}}var inst=fiber.stateNode;inst!==null&&typeof inst.componentDidCatch==`function`&&(update$1.callback=function(){logCaughtError(root$3,fiber,errorInfo),typeof getDerivedStateFromError!=`function`&&(legacyErrorBoundariesThatAlreadyFailed===null?legacyErrorBoundariesThatAlreadyFailed=new Set([this]):legacyErrorBoundariesThatAlreadyFailed.add(this));var stack=errorInfo.stack;this.componentDidCatch(errorInfo.value,{componentStack:stack===null?``:stack})})}function throwException(root$3,returnFiber,sourceFiber,value,rootRenderLanes){if(sourceFiber.flags|=32768,typeof value==`object`&&value&&typeof value.then==`function`){if(returnFiber=sourceFiber.alternate,returnFiber!==null&&propagateParentContextChanges(returnFiber,sourceFiber,rootRenderLanes,!0),sourceFiber=suspenseHandlerStackCursor.current,sourceFiber!==null){switch(sourceFiber.tag){case 31:case 13:return shellBoundary===null?renderDidSuspendDelayIfPossible():sourceFiber.alternate===null&&workInProgressRootExitStatus===0&&(workInProgressRootExitStatus=3),sourceFiber.flags&=-257,sourceFiber.flags|=65536,sourceFiber.lanes=rootRenderLanes,value===noopSuspenseyCommitThenable?sourceFiber.flags|=16384:(returnFiber=sourceFiber.updateQueue,returnFiber===null?sourceFiber.updateQueue=new Set([value]):returnFiber.add(value),attachPingListener(root$3,value,rootRenderLanes)),!1;case 22:return sourceFiber.flags|=65536,value===noopSuspenseyCommitThenable?sourceFiber.flags|=16384:(returnFiber=sourceFiber.updateQueue,returnFiber===null?(returnFiber={transitions:null,markerInstances:null,retryQueue:new Set([value])},sourceFiber.updateQueue=returnFiber):(sourceFiber=returnFiber.retryQueue,sourceFiber===null?returnFiber.retryQueue=new Set([value]):sourceFiber.add(value)),attachPingListener(root$3,value,rootRenderLanes)),!1}throw Error(formatProdErrorMessage$2(435,sourceFiber.tag))}return attachPingListener(root$3,value,rootRenderLanes),renderDidSuspendDelayIfPossible(),!1}if(isHydrating)return returnFiber=suspenseHandlerStackCursor.current,returnFiber===null?(value!==HydrationMismatchException&&(returnFiber=Error(formatProdErrorMessage$2(423),{cause:value}),queueHydrationError(createCapturedValueAtFiber(returnFiber,sourceFiber))),root$3=root$3.current.alternate,root$3.flags|=65536,rootRenderLanes&=-rootRenderLanes,root$3.lanes|=rootRenderLanes,value=createCapturedValueAtFiber(value,sourceFiber),rootRenderLanes=createRootErrorUpdate(root$3.stateNode,value,rootRenderLanes),enqueueCapturedUpdate(root$3,rootRenderLanes),workInProgressRootExitStatus!==4&&(workInProgressRootExitStatus=2)):(!(returnFiber.flags&65536)&&(returnFiber.flags|=256),returnFiber.flags|=65536,returnFiber.lanes=rootRenderLanes,value!==HydrationMismatchException&&(root$3=Error(formatProdErrorMessage$2(422),{cause:value}),queueHydrationError(createCapturedValueAtFiber(root$3,sourceFiber)))),!1;var wrapperError=Error(formatProdErrorMessage$2(520),{cause:value});if(wrapperError=createCapturedValueAtFiber(wrapperError,sourceFiber),workInProgressRootConcurrentErrors===null?workInProgressRootConcurrentErrors=[wrapperError]:workInProgressRootConcurrentErrors.push(wrapperError),workInProgressRootExitStatus!==4&&(workInProgressRootExitStatus=2),returnFiber===null)return!0;value=createCapturedValueAtFiber(value,sourceFiber),sourceFiber=returnFiber;do{switch(sourceFiber.tag){case 3:return sourceFiber.flags|=65536,root$3=rootRenderLanes&-rootRenderLanes,sourceFiber.lanes|=root$3,root$3=createRootErrorUpdate(sourceFiber.stateNode,value,root$3),enqueueCapturedUpdate(sourceFiber,root$3),!1;case 1:if(returnFiber=sourceFiber.type,wrapperError=sourceFiber.stateNode,!(sourceFiber.flags&128)&&(typeof returnFiber.getDerivedStateFromError==`function`||wrapperError!==null&&typeof wrapperError.componentDidCatch==`function`&&(legacyErrorBoundariesThatAlreadyFailed===null||!legacyErrorBoundariesThatAlreadyFailed.has(wrapperError))))return sourceFiber.flags|=65536,rootRenderLanes&=-rootRenderLanes,sourceFiber.lanes|=rootRenderLanes,rootRenderLanes=createClassErrorUpdate(rootRenderLanes),initializeClassErrorUpdate(rootRenderLanes,root$3,sourceFiber,value),enqueueCapturedUpdate(sourceFiber,rootRenderLanes),!1}sourceFiber=sourceFiber.return}while(sourceFiber!==null);return!1}var SelectiveHydrationException=Error(formatProdErrorMessage$2(461)),didReceiveUpdate=!1;function reconcileChildren(current,workInProgress$1,nextChildren,renderLanes$1){workInProgress$1.child=current===null?mountChildFibers(workInProgress$1,null,nextChildren,renderLanes$1):reconcileChildFibers(workInProgress$1,current.child,nextChildren,renderLanes$1)}function updateForwardRef(current,workInProgress$1,Component$2,nextProps,renderLanes$1){Component$2=Component$2.render;var ref=workInProgress$1.ref;if(`ref`in nextProps){var propsWithoutRef={};for(var key$1 in nextProps)key$1!==`ref`&&(propsWithoutRef[key$1]=nextProps[key$1])}else propsWithoutRef=nextProps;return prepareToReadContext(workInProgress$1),nextProps=renderWithHooks(current,workInProgress$1,Component$2,propsWithoutRef,ref,renderLanes$1),key$1=checkDidRenderIdHook(),current!==null&&!didReceiveUpdate?(bailoutHooks(current,workInProgress$1,renderLanes$1),bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)):(isHydrating&&key$1&&pushMaterializedTreeId(workInProgress$1),workInProgress$1.flags|=1,reconcileChildren(current,workInProgress$1,nextProps,renderLanes$1),workInProgress$1.child)}function updateMemoComponent(current,workInProgress$1,Component$2,nextProps,renderLanes$1){if(current===null){var type=Component$2.type;return typeof type==`function`&&!shouldConstruct(type)&&type.defaultProps===void 0&&Component$2.compare===null?(workInProgress$1.tag=15,workInProgress$1.type=type,updateSimpleMemoComponent(current,workInProgress$1,type,nextProps,renderLanes$1)):(current=createFiberFromTypeAndProps(Component$2.type,null,nextProps,workInProgress$1,workInProgress$1.mode,renderLanes$1),current.ref=workInProgress$1.ref,current.return=workInProgress$1,workInProgress$1.child=current)}if(type=current.child,!checkScheduledUpdateOrContext(current,renderLanes$1)){var prevProps=type.memoizedProps;if(Component$2=Component$2.compare,Component$2=Component$2===null?shallowEqual$2:Component$2,Component$2(prevProps,nextProps)&&current.ref===workInProgress$1.ref)return bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)}return workInProgress$1.flags|=1,current=createWorkInProgress(type,nextProps),current.ref=workInProgress$1.ref,current.return=workInProgress$1,workInProgress$1.child=current}function updateSimpleMemoComponent(current,workInProgress$1,Component$2,nextProps,renderLanes$1){if(current!==null){var prevProps=current.memoizedProps;if(shallowEqual$2(prevProps,nextProps)&&current.ref===workInProgress$1.ref)if(didReceiveUpdate=!1,workInProgress$1.pendingProps=nextProps=prevProps,checkScheduledUpdateOrContext(current,renderLanes$1))current.flags&131072&&(didReceiveUpdate=!0);else return workInProgress$1.lanes=current.lanes,bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)}return updateFunctionComponent(current,workInProgress$1,Component$2,nextProps,renderLanes$1)}function updateOffscreenComponent(current,workInProgress$1,renderLanes$1,nextProps){var nextChildren=nextProps.children,prevState=current===null?null:current.memoizedState;if(current===null&&workInProgress$1.stateNode===null&&(workInProgress$1.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),nextProps.mode===`hidden`){if(workInProgress$1.flags&128){if(prevState=prevState===null?renderLanes$1:prevState.baseLanes|renderLanes$1,current!==null){for(nextProps=workInProgress$1.child=current.child,nextChildren=0;nextProps!==null;)nextChildren=nextChildren|nextProps.lanes|nextProps.childLanes,nextProps=nextProps.sibling;nextProps=nextChildren&~prevState}else nextProps=0,workInProgress$1.child=null;return deferHiddenOffscreenComponent(current,workInProgress$1,prevState,renderLanes$1,nextProps)}if(renderLanes$1&536870912)workInProgress$1.memoizedState={baseLanes:0,cachePool:null},current!==null&&pushTransition(workInProgress$1,prevState===null?null:prevState.cachePool),prevState===null?reuseHiddenContextOnStack():pushHiddenContext(workInProgress$1,prevState),pushOffscreenSuspenseHandler(workInProgress$1);else return nextProps=workInProgress$1.lanes=536870912,deferHiddenOffscreenComponent(current,workInProgress$1,prevState===null?renderLanes$1:prevState.baseLanes|renderLanes$1,renderLanes$1,nextProps)}else prevState===null?(current!==null&&pushTransition(workInProgress$1,null),reuseHiddenContextOnStack(),reuseSuspenseHandlerOnStack(workInProgress$1)):(pushTransition(workInProgress$1,prevState.cachePool),pushHiddenContext(workInProgress$1,prevState),reuseSuspenseHandlerOnStack(workInProgress$1),workInProgress$1.memoizedState=null);return reconcileChildren(current,workInProgress$1,nextChildren,renderLanes$1),workInProgress$1.child}function bailoutOffscreenComponent(current,workInProgress$1){return current!==null&&current.tag===22||workInProgress$1.stateNode!==null||(workInProgress$1.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),workInProgress$1.sibling}function deferHiddenOffscreenComponent(current,workInProgress$1,nextBaseLanes,renderLanes$1,remainingChildLanes){var JSCompiler_inline_result=peekCacheFromPool();return JSCompiler_inline_result=JSCompiler_inline_result===null?null:{parent:CacheContext._currentValue,pool:JSCompiler_inline_result},workInProgress$1.memoizedState={baseLanes:nextBaseLanes,cachePool:JSCompiler_inline_result},current!==null&&pushTransition(workInProgress$1,null),reuseHiddenContextOnStack(),pushOffscreenSuspenseHandler(workInProgress$1),current!==null&&propagateParentContextChanges(current,workInProgress$1,renderLanes$1,!0),workInProgress$1.childLanes=remainingChildLanes,null}function mountActivityChildren(workInProgress$1,nextProps){return nextProps=mountWorkInProgressOffscreenFiber({mode:nextProps.mode,children:nextProps.children},workInProgress$1.mode),nextProps.ref=workInProgress$1.ref,workInProgress$1.child=nextProps,nextProps.return=workInProgress$1,nextProps}function retryActivityComponentWithoutHydrating(current,workInProgress$1,renderLanes$1){return reconcileChildFibers(workInProgress$1,current.child,null,renderLanes$1),current=mountActivityChildren(workInProgress$1,workInProgress$1.pendingProps),current.flags|=2,popSuspenseHandler(workInProgress$1),workInProgress$1.memoizedState=null,current}function updateActivityComponent(current,workInProgress$1,renderLanes$1){var nextProps=workInProgress$1.pendingProps,didSuspend=(workInProgress$1.flags&128)!=0;if(workInProgress$1.flags&=-129,current===null){if(isHydrating){if(nextProps.mode===`hidden`)return current=mountActivityChildren(workInProgress$1,nextProps),workInProgress$1.lanes=536870912,bailoutOffscreenComponent(null,current);if(pushDehydratedActivitySuspenseHandler(workInProgress$1),(current=nextHydratableInstance)?(current=canHydrateHydrationBoundary(current,rootOrSingletonContext),current=current!==null&&current.data===`&`?current:null,current!==null&&(workInProgress$1.memoizedState={dehydrated:current,treeContext:treeContextProvider===null?null:{id:treeContextId,overflow:treeContextOverflow},retryLane:536870912,hydrationErrors:null},renderLanes$1=createFiberFromDehydratedFragment(current),renderLanes$1.return=workInProgress$1,workInProgress$1.child=renderLanes$1,hydrationParentFiber=workInProgress$1,nextHydratableInstance=null)):current=null,current===null)throw throwOnHydrationMismatch(workInProgress$1);return workInProgress$1.lanes=536870912,null}return mountActivityChildren(workInProgress$1,nextProps)}var prevState=current.memoizedState;if(prevState!==null){var dehydrated=prevState.dehydrated;if(pushDehydratedActivitySuspenseHandler(workInProgress$1),didSuspend)if(workInProgress$1.flags&256)workInProgress$1.flags&=-257,workInProgress$1=retryActivityComponentWithoutHydrating(current,workInProgress$1,renderLanes$1);else if(workInProgress$1.memoizedState!==null)workInProgress$1.child=current.child,workInProgress$1.flags|=128,workInProgress$1=null;else throw Error(formatProdErrorMessage$2(558));else if(didReceiveUpdate||propagateParentContextChanges(current,workInProgress$1,renderLanes$1,!1),didSuspend=(renderLanes$1&current.childLanes)!==0,didReceiveUpdate||didSuspend){if(nextProps=workInProgressRoot,nextProps!==null&&(dehydrated=getBumpedLaneForHydration(nextProps,renderLanes$1),dehydrated!==0&&dehydrated!==prevState.retryLane))throw prevState.retryLane=dehydrated,enqueueConcurrentRenderForLane(current,dehydrated),scheduleUpdateOnFiber(nextProps,current,dehydrated),SelectiveHydrationException;renderDidSuspendDelayIfPossible(),workInProgress$1=retryActivityComponentWithoutHydrating(current,workInProgress$1,renderLanes$1)}else current=prevState.treeContext,nextHydratableInstance=getNextHydratable(dehydrated.nextSibling),hydrationParentFiber=workInProgress$1,isHydrating=!0,hydrationErrors=null,rootOrSingletonContext=!1,current!==null&&restoreSuspendedTreeContext(workInProgress$1,current),workInProgress$1=mountActivityChildren(workInProgress$1,nextProps),workInProgress$1.flags|=4096;return workInProgress$1}return current=createWorkInProgress(current.child,{mode:nextProps.mode,children:nextProps.children}),current.ref=workInProgress$1.ref,workInProgress$1.child=current,current.return=workInProgress$1,current}function markRef(current,workInProgress$1){var ref=workInProgress$1.ref;if(ref===null)current!==null&&current.ref!==null&&(workInProgress$1.flags|=4194816);else{if(typeof ref!=`function`&&typeof ref!=`object`)throw Error(formatProdErrorMessage$2(284));(current===null||current.ref!==ref)&&(workInProgress$1.flags|=4194816)}}function updateFunctionComponent(current,workInProgress$1,Component$2,nextProps,renderLanes$1){return prepareToReadContext(workInProgress$1),Component$2=renderWithHooks(current,workInProgress$1,Component$2,nextProps,void 0,renderLanes$1),nextProps=checkDidRenderIdHook(),current!==null&&!didReceiveUpdate?(bailoutHooks(current,workInProgress$1,renderLanes$1),bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)):(isHydrating&&nextProps&&pushMaterializedTreeId(workInProgress$1),workInProgress$1.flags|=1,reconcileChildren(current,workInProgress$1,Component$2,renderLanes$1),workInProgress$1.child)}function replayFunctionComponent(current,workInProgress$1,nextProps,Component$2,secondArg,renderLanes$1){return prepareToReadContext(workInProgress$1),workInProgress$1.updateQueue=null,nextProps=renderWithHooksAgain(workInProgress$1,Component$2,nextProps,secondArg),finishRenderingHooks(current),Component$2=checkDidRenderIdHook(),current!==null&&!didReceiveUpdate?(bailoutHooks(current,workInProgress$1,renderLanes$1),bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)):(isHydrating&&Component$2&&pushMaterializedTreeId(workInProgress$1),workInProgress$1.flags|=1,reconcileChildren(current,workInProgress$1,nextProps,renderLanes$1),workInProgress$1.child)}function updateClassComponent(current,workInProgress$1,Component$2,nextProps,renderLanes$1){if(prepareToReadContext(workInProgress$1),workInProgress$1.stateNode===null){var context=emptyContextObject,contextType=Component$2.contextType;typeof contextType==`object`&&contextType&&(context=readContext(contextType)),context=new Component$2(nextProps,context),workInProgress$1.memoizedState=context.state!==null&&context.state!==void 0?context.state:null,context.updater=classComponentUpdater,workInProgress$1.stateNode=context,context._reactInternals=workInProgress$1,context=workInProgress$1.stateNode,context.props=nextProps,context.state=workInProgress$1.memoizedState,context.refs={},initializeUpdateQueue(workInProgress$1),contextType=Component$2.contextType,context.context=typeof contextType==`object`&&contextType?readContext(contextType):emptyContextObject,context.state=workInProgress$1.memoizedState,contextType=Component$2.getDerivedStateFromProps,typeof contextType==`function`&&(applyDerivedStateFromProps(workInProgress$1,Component$2,contextType,nextProps),context.state=workInProgress$1.memoizedState),typeof Component$2.getDerivedStateFromProps==`function`||typeof context.getSnapshotBeforeUpdate==`function`||typeof context.UNSAFE_componentWillMount!=`function`&&typeof context.componentWillMount!=`function`||(contextType=context.state,typeof context.componentWillMount==`function`&&context.componentWillMount(),typeof context.UNSAFE_componentWillMount==`function`&&context.UNSAFE_componentWillMount(),contextType!==context.state&&classComponentUpdater.enqueueReplaceState(context,context.state,null),processUpdateQueue(workInProgress$1,nextProps,context,renderLanes$1),suspendIfUpdateReadFromEntangledAsyncAction(),context.state=workInProgress$1.memoizedState),typeof context.componentDidMount==`function`&&(workInProgress$1.flags|=4194308),nextProps=!0}else if(current===null){context=workInProgress$1.stateNode;var unresolvedOldProps=workInProgress$1.memoizedProps,oldProps=resolveClassComponentProps(Component$2,unresolvedOldProps);context.props=oldProps;var oldContext=context.context,contextType$jscomp$0=Component$2.contextType;contextType=emptyContextObject,typeof contextType$jscomp$0==`object`&&contextType$jscomp$0&&(contextType=readContext(contextType$jscomp$0));var getDerivedStateFromProps=Component$2.getDerivedStateFromProps;contextType$jscomp$0=typeof getDerivedStateFromProps==`function`||typeof context.getSnapshotBeforeUpdate==`function`,unresolvedOldProps=workInProgress$1.pendingProps!==unresolvedOldProps,contextType$jscomp$0||typeof context.UNSAFE_componentWillReceiveProps!=`function`&&typeof context.componentWillReceiveProps!=`function`||(unresolvedOldProps||oldContext!==contextType)&&callComponentWillReceiveProps(workInProgress$1,context,nextProps,contextType),hasForceUpdate=!1;var oldState=workInProgress$1.memoizedState;context.state=oldState,processUpdateQueue(workInProgress$1,nextProps,context,renderLanes$1),suspendIfUpdateReadFromEntangledAsyncAction(),oldContext=workInProgress$1.memoizedState,unresolvedOldProps||oldState!==oldContext||hasForceUpdate?(typeof getDerivedStateFromProps==`function`&&(applyDerivedStateFromProps(workInProgress$1,Component$2,getDerivedStateFromProps,nextProps),oldContext=workInProgress$1.memoizedState),(oldProps=hasForceUpdate||checkShouldComponentUpdate(workInProgress$1,Component$2,oldProps,nextProps,oldState,oldContext,contextType))?(contextType$jscomp$0||typeof context.UNSAFE_componentWillMount!=`function`&&typeof context.componentWillMount!=`function`||(typeof context.componentWillMount==`function`&&context.componentWillMount(),typeof context.UNSAFE_componentWillMount==`function`&&context.UNSAFE_componentWillMount()),typeof context.componentDidMount==`function`&&(workInProgress$1.flags|=4194308)):(typeof context.componentDidMount==`function`&&(workInProgress$1.flags|=4194308),workInProgress$1.memoizedProps=nextProps,workInProgress$1.memoizedState=oldContext),context.props=nextProps,context.state=oldContext,context.context=contextType,nextProps=oldProps):(typeof context.componentDidMount==`function`&&(workInProgress$1.flags|=4194308),nextProps=!1)}else{context=workInProgress$1.stateNode,cloneUpdateQueue(current,workInProgress$1),contextType=workInProgress$1.memoizedProps,contextType$jscomp$0=resolveClassComponentProps(Component$2,contextType),context.props=contextType$jscomp$0,getDerivedStateFromProps=workInProgress$1.pendingProps,oldState=context.context,oldContext=Component$2.contextType,oldProps=emptyContextObject,typeof oldContext==`object`&&oldContext&&(oldProps=readContext(oldContext)),unresolvedOldProps=Component$2.getDerivedStateFromProps,(oldContext=typeof unresolvedOldProps==`function`||typeof context.getSnapshotBeforeUpdate==`function`)||typeof context.UNSAFE_componentWillReceiveProps!=`function`&&typeof context.componentWillReceiveProps!=`function`||(contextType!==getDerivedStateFromProps||oldState!==oldProps)&&callComponentWillReceiveProps(workInProgress$1,context,nextProps,oldProps),hasForceUpdate=!1,oldState=workInProgress$1.memoizedState,context.state=oldState,processUpdateQueue(workInProgress$1,nextProps,context,renderLanes$1),suspendIfUpdateReadFromEntangledAsyncAction();var newState=workInProgress$1.memoizedState;contextType!==getDerivedStateFromProps||oldState!==newState||hasForceUpdate||current!==null&&current.dependencies!==null&&checkIfContextChanged(current.dependencies)?(typeof unresolvedOldProps==`function`&&(applyDerivedStateFromProps(workInProgress$1,Component$2,unresolvedOldProps,nextProps),newState=workInProgress$1.memoizedState),(contextType$jscomp$0=hasForceUpdate||checkShouldComponentUpdate(workInProgress$1,Component$2,contextType$jscomp$0,nextProps,oldState,newState,oldProps)||current!==null&&current.dependencies!==null&&checkIfContextChanged(current.dependencies))?(oldContext||typeof context.UNSAFE_componentWillUpdate!=`function`&&typeof context.componentWillUpdate!=`function`||(typeof context.componentWillUpdate==`function`&&context.componentWillUpdate(nextProps,newState,oldProps),typeof context.UNSAFE_componentWillUpdate==`function`&&context.UNSAFE_componentWillUpdate(nextProps,newState,oldProps)),typeof context.componentDidUpdate==`function`&&(workInProgress$1.flags|=4),typeof context.getSnapshotBeforeUpdate==`function`&&(workInProgress$1.flags|=1024)):(typeof context.componentDidUpdate!=`function`||contextType===current.memoizedProps&&oldState===current.memoizedState||(workInProgress$1.flags|=4),typeof context.getSnapshotBeforeUpdate!=`function`||contextType===current.memoizedProps&&oldState===current.memoizedState||(workInProgress$1.flags|=1024),workInProgress$1.memoizedProps=nextProps,workInProgress$1.memoizedState=newState),context.props=nextProps,context.state=newState,context.context=oldProps,nextProps=contextType$jscomp$0):(typeof context.componentDidUpdate!=`function`||contextType===current.memoizedProps&&oldState===current.memoizedState||(workInProgress$1.flags|=4),typeof context.getSnapshotBeforeUpdate!=`function`||contextType===current.memoizedProps&&oldState===current.memoizedState||(workInProgress$1.flags|=1024),nextProps=!1)}return context=nextProps,markRef(current,workInProgress$1),nextProps=(workInProgress$1.flags&128)!=0,context||nextProps?(context=workInProgress$1.stateNode,Component$2=nextProps&&typeof Component$2.getDerivedStateFromError!=`function`?null:context.render(),workInProgress$1.flags|=1,current!==null&&nextProps?(workInProgress$1.child=reconcileChildFibers(workInProgress$1,current.child,null,renderLanes$1),workInProgress$1.child=reconcileChildFibers(workInProgress$1,null,Component$2,renderLanes$1)):reconcileChildren(current,workInProgress$1,Component$2,renderLanes$1),workInProgress$1.memoizedState=context.state,current=workInProgress$1.child):current=bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1),current}function mountHostRootWithoutHydrating(current,workInProgress$1,nextChildren,renderLanes$1){return resetHydrationState(),workInProgress$1.flags|=256,reconcileChildren(current,workInProgress$1,nextChildren,renderLanes$1),workInProgress$1.child}var SUSPENDED_MARKER={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mountSuspenseOffscreenState(renderLanes$1){return{baseLanes:renderLanes$1,cachePool:getSuspendedCache()}}function getRemainingWorkInPrimaryTree(current,primaryTreeDidDefer,renderLanes$1){return current=current===null?0:current.childLanes&~renderLanes$1,primaryTreeDidDefer&&(current|=workInProgressDeferredLane),current}function updateSuspenseComponent(current,workInProgress$1,renderLanes$1){var nextProps=workInProgress$1.pendingProps,showFallback=!1,didSuspend=(workInProgress$1.flags&128)!=0,JSCompiler_temp;if((JSCompiler_temp=didSuspend)||(JSCompiler_temp=current!==null&&current.memoizedState===null?!1:(suspenseStackCursor.current&2)!=0),JSCompiler_temp&&(showFallback=!0,workInProgress$1.flags&=-129),JSCompiler_temp=(workInProgress$1.flags&32)!=0,workInProgress$1.flags&=-33,current===null){if(isHydrating){if(showFallback?pushPrimaryTreeSuspenseHandler(workInProgress$1):reuseSuspenseHandlerOnStack(workInProgress$1),(current=nextHydratableInstance)?(current=canHydrateHydrationBoundary(current,rootOrSingletonContext),current=current!==null&&current.data!==`&`?current:null,current!==null&&(workInProgress$1.memoizedState={dehydrated:current,treeContext:treeContextProvider===null?null:{id:treeContextId,overflow:treeContextOverflow},retryLane:536870912,hydrationErrors:null},renderLanes$1=createFiberFromDehydratedFragment(current),renderLanes$1.return=workInProgress$1,workInProgress$1.child=renderLanes$1,hydrationParentFiber=workInProgress$1,nextHydratableInstance=null)):current=null,current===null)throw throwOnHydrationMismatch(workInProgress$1);return isSuspenseInstanceFallback(current)?workInProgress$1.lanes=32:workInProgress$1.lanes=536870912,null}var nextPrimaryChildren=nextProps.children;return nextProps=nextProps.fallback,showFallback?(reuseSuspenseHandlerOnStack(workInProgress$1),showFallback=workInProgress$1.mode,nextPrimaryChildren=mountWorkInProgressOffscreenFiber({mode:`hidden`,children:nextPrimaryChildren},showFallback),nextProps=createFiberFromFragment(nextProps,showFallback,renderLanes$1,null),nextPrimaryChildren.return=workInProgress$1,nextProps.return=workInProgress$1,nextPrimaryChildren.sibling=nextProps,workInProgress$1.child=nextPrimaryChildren,nextProps=workInProgress$1.child,nextProps.memoizedState=mountSuspenseOffscreenState(renderLanes$1),nextProps.childLanes=getRemainingWorkInPrimaryTree(current,JSCompiler_temp,renderLanes$1),workInProgress$1.memoizedState=SUSPENDED_MARKER,bailoutOffscreenComponent(null,nextProps)):(pushPrimaryTreeSuspenseHandler(workInProgress$1),mountSuspensePrimaryChildren(workInProgress$1,nextPrimaryChildren))}var prevState=current.memoizedState;if(prevState!==null&&(nextPrimaryChildren=prevState.dehydrated,nextPrimaryChildren!==null)){if(didSuspend)workInProgress$1.flags&256?(pushPrimaryTreeSuspenseHandler(workInProgress$1),workInProgress$1.flags&=-257,workInProgress$1=retrySuspenseComponentWithoutHydrating(current,workInProgress$1,renderLanes$1)):workInProgress$1.memoizedState===null?(reuseSuspenseHandlerOnStack(workInProgress$1),nextPrimaryChildren=nextProps.fallback,showFallback=workInProgress$1.mode,nextProps=mountWorkInProgressOffscreenFiber({mode:`visible`,children:nextProps.children},showFallback),nextPrimaryChildren=createFiberFromFragment(nextPrimaryChildren,showFallback,renderLanes$1,null),nextPrimaryChildren.flags|=2,nextProps.return=workInProgress$1,nextPrimaryChildren.return=workInProgress$1,nextProps.sibling=nextPrimaryChildren,workInProgress$1.child=nextProps,reconcileChildFibers(workInProgress$1,current.child,null,renderLanes$1),nextProps=workInProgress$1.child,nextProps.memoizedState=mountSuspenseOffscreenState(renderLanes$1),nextProps.childLanes=getRemainingWorkInPrimaryTree(current,JSCompiler_temp,renderLanes$1),workInProgress$1.memoizedState=SUSPENDED_MARKER,workInProgress$1=bailoutOffscreenComponent(null,nextProps)):(reuseSuspenseHandlerOnStack(workInProgress$1),workInProgress$1.child=current.child,workInProgress$1.flags|=128,workInProgress$1=null);else if(pushPrimaryTreeSuspenseHandler(workInProgress$1),isSuspenseInstanceFallback(nextPrimaryChildren)){if(JSCompiler_temp=nextPrimaryChildren.nextSibling&&nextPrimaryChildren.nextSibling.dataset,JSCompiler_temp)var digest=JSCompiler_temp.dgst;JSCompiler_temp=digest,nextProps=Error(formatProdErrorMessage$2(419)),nextProps.stack=``,nextProps.digest=JSCompiler_temp,queueHydrationError({value:nextProps,source:null,stack:null}),workInProgress$1=retrySuspenseComponentWithoutHydrating(current,workInProgress$1,renderLanes$1)}else if(didReceiveUpdate||propagateParentContextChanges(current,workInProgress$1,renderLanes$1,!1),JSCompiler_temp=(renderLanes$1&current.childLanes)!==0,didReceiveUpdate||JSCompiler_temp){if(JSCompiler_temp=workInProgressRoot,JSCompiler_temp!==null&&(nextProps=getBumpedLaneForHydration(JSCompiler_temp,renderLanes$1),nextProps!==0&&nextProps!==prevState.retryLane))throw prevState.retryLane=nextProps,enqueueConcurrentRenderForLane(current,nextProps),scheduleUpdateOnFiber(JSCompiler_temp,current,nextProps),SelectiveHydrationException;isSuspenseInstancePending(nextPrimaryChildren)||renderDidSuspendDelayIfPossible(),workInProgress$1=retrySuspenseComponentWithoutHydrating(current,workInProgress$1,renderLanes$1)}else isSuspenseInstancePending(nextPrimaryChildren)?(workInProgress$1.flags|=192,workInProgress$1.child=current.child,workInProgress$1=null):(current=prevState.treeContext,nextHydratableInstance=getNextHydratable(nextPrimaryChildren.nextSibling),hydrationParentFiber=workInProgress$1,isHydrating=!0,hydrationErrors=null,rootOrSingletonContext=!1,current!==null&&restoreSuspendedTreeContext(workInProgress$1,current),workInProgress$1=mountSuspensePrimaryChildren(workInProgress$1,nextProps.children),workInProgress$1.flags|=4096);return workInProgress$1}return showFallback?(reuseSuspenseHandlerOnStack(workInProgress$1),nextPrimaryChildren=nextProps.fallback,showFallback=workInProgress$1.mode,prevState=current.child,digest=prevState.sibling,nextProps=createWorkInProgress(prevState,{mode:`hidden`,children:nextProps.children}),nextProps.subtreeFlags=prevState.subtreeFlags&65011712,digest===null?(nextPrimaryChildren=createFiberFromFragment(nextPrimaryChildren,showFallback,renderLanes$1,null),nextPrimaryChildren.flags|=2):nextPrimaryChildren=createWorkInProgress(digest,nextPrimaryChildren),nextPrimaryChildren.return=workInProgress$1,nextProps.return=workInProgress$1,nextProps.sibling=nextPrimaryChildren,workInProgress$1.child=nextProps,bailoutOffscreenComponent(null,nextProps),nextProps=workInProgress$1.child,nextPrimaryChildren=current.child.memoizedState,nextPrimaryChildren===null?nextPrimaryChildren=mountSuspenseOffscreenState(renderLanes$1):(showFallback=nextPrimaryChildren.cachePool,showFallback===null?showFallback=getSuspendedCache():(prevState=CacheContext._currentValue,showFallback=showFallback.parent===prevState?showFallback:{parent:prevState,pool:prevState}),nextPrimaryChildren={baseLanes:nextPrimaryChildren.baseLanes|renderLanes$1,cachePool:showFallback}),nextProps.memoizedState=nextPrimaryChildren,nextProps.childLanes=getRemainingWorkInPrimaryTree(current,JSCompiler_temp,renderLanes$1),workInProgress$1.memoizedState=SUSPENDED_MARKER,bailoutOffscreenComponent(current.child,nextProps)):(pushPrimaryTreeSuspenseHandler(workInProgress$1),renderLanes$1=current.child,current=renderLanes$1.sibling,renderLanes$1=createWorkInProgress(renderLanes$1,{mode:`visible`,children:nextProps.children}),renderLanes$1.return=workInProgress$1,renderLanes$1.sibling=null,current!==null&&(JSCompiler_temp=workInProgress$1.deletions,JSCompiler_temp===null?(workInProgress$1.deletions=[current],workInProgress$1.flags|=16):JSCompiler_temp.push(current)),workInProgress$1.child=renderLanes$1,workInProgress$1.memoizedState=null,renderLanes$1)}function mountSuspensePrimaryChildren(workInProgress$1,primaryChildren){return primaryChildren=mountWorkInProgressOffscreenFiber({mode:`visible`,children:primaryChildren},workInProgress$1.mode),primaryChildren.return=workInProgress$1,workInProgress$1.child=primaryChildren}function mountWorkInProgressOffscreenFiber(offscreenProps,mode){return offscreenProps=createFiberImplClass(22,offscreenProps,null,mode),offscreenProps.lanes=0,offscreenProps}function retrySuspenseComponentWithoutHydrating(current,workInProgress$1,renderLanes$1){return reconcileChildFibers(workInProgress$1,current.child,null,renderLanes$1),current=mountSuspensePrimaryChildren(workInProgress$1,workInProgress$1.pendingProps.children),current.flags|=2,workInProgress$1.memoizedState=null,current}function scheduleSuspenseWorkOnFiber(fiber,renderLanes$1,propagationRoot){fiber.lanes|=renderLanes$1;var alternate=fiber.alternate;alternate!==null&&(alternate.lanes|=renderLanes$1),scheduleContextWorkOnParentPath(fiber.return,renderLanes$1,propagationRoot)}function initSuspenseListRenderState(workInProgress$1,isBackwards,tail,lastContentRow,tailMode,treeForkCount$1){var renderState=workInProgress$1.memoizedState;renderState===null?workInProgress$1.memoizedState={isBackwards,rendering:null,renderingStartTime:0,last:lastContentRow,tail,tailMode,treeForkCount:treeForkCount$1}:(renderState.isBackwards=isBackwards,renderState.rendering=null,renderState.renderingStartTime=0,renderState.last=lastContentRow,renderState.tail=tail,renderState.tailMode=tailMode,renderState.treeForkCount=treeForkCount$1)}function updateSuspenseListComponent(current,workInProgress$1,renderLanes$1){var nextProps=workInProgress$1.pendingProps,revealOrder=nextProps.revealOrder,tailMode=nextProps.tail;nextProps=nextProps.children;var suspenseContext=suspenseStackCursor.current,shouldForceFallback=(suspenseContext&2)!=0;if(shouldForceFallback?(suspenseContext=suspenseContext&1|2,workInProgress$1.flags|=128):suspenseContext&=1,push(suspenseStackCursor,suspenseContext),reconcileChildren(current,workInProgress$1,nextProps,renderLanes$1),nextProps=isHydrating?treeForkCount:0,!shouldForceFallback&&current!==null&&current.flags&128)a:for(current=workInProgress$1.child;current!==null;){if(current.tag===13)current.memoizedState!==null&&scheduleSuspenseWorkOnFiber(current,renderLanes$1,workInProgress$1);else if(current.tag===19)scheduleSuspenseWorkOnFiber(current,renderLanes$1,workInProgress$1);else if(current.child!==null){current.child.return=current,current=current.child;continue}if(current===workInProgress$1)break a;for(;current.sibling===null;){if(current.return===null||current.return===workInProgress$1)break a;current=current.return}current.sibling.return=current.return,current=current.sibling}switch(revealOrder){case`forwards`:for(renderLanes$1=workInProgress$1.child,revealOrder=null;renderLanes$1!==null;)current=renderLanes$1.alternate,current!==null&&findFirstSuspended(current)===null&&(revealOrder=renderLanes$1),renderLanes$1=renderLanes$1.sibling;renderLanes$1=revealOrder,renderLanes$1===null?(revealOrder=workInProgress$1.child,workInProgress$1.child=null):(revealOrder=renderLanes$1.sibling,renderLanes$1.sibling=null),initSuspenseListRenderState(workInProgress$1,!1,revealOrder,renderLanes$1,tailMode,nextProps);break;case`backwards`:case`unstable_legacy-backwards`:for(renderLanes$1=null,revealOrder=workInProgress$1.child,workInProgress$1.child=null;revealOrder!==null;){if(current=revealOrder.alternate,current!==null&&findFirstSuspended(current)===null){workInProgress$1.child=revealOrder;break}current=revealOrder.sibling,revealOrder.sibling=renderLanes$1,renderLanes$1=revealOrder,revealOrder=current}initSuspenseListRenderState(workInProgress$1,!0,renderLanes$1,null,tailMode,nextProps);break;case`together`:initSuspenseListRenderState(workInProgress$1,!1,null,null,void 0,nextProps);break;default:workInProgress$1.memoizedState=null}return workInProgress$1.child}function bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1){if(current!==null&&(workInProgress$1.dependencies=current.dependencies),workInProgressRootSkippedLanes|=workInProgress$1.lanes,(renderLanes$1&workInProgress$1.childLanes)===0)if(current!==null){if(propagateParentContextChanges(current,workInProgress$1,renderLanes$1,!1),(renderLanes$1&workInProgress$1.childLanes)===0)return null}else return null;if(current!==null&&workInProgress$1.child!==current.child)throw Error(formatProdErrorMessage$2(153));if(workInProgress$1.child!==null){for(current=workInProgress$1.child,renderLanes$1=createWorkInProgress(current,current.pendingProps),workInProgress$1.child=renderLanes$1,renderLanes$1.return=workInProgress$1;current.sibling!==null;)current=current.sibling,renderLanes$1=renderLanes$1.sibling=createWorkInProgress(current,current.pendingProps),renderLanes$1.return=workInProgress$1;renderLanes$1.sibling=null}return workInProgress$1.child}function checkScheduledUpdateOrContext(current,renderLanes$1){return(current.lanes&renderLanes$1)===0?(current=current.dependencies,!!(current!==null&&checkIfContextChanged(current))):!0}function attemptEarlyBailoutIfNoScheduledUpdate(current,workInProgress$1,renderLanes$1){switch(workInProgress$1.tag){case 3:pushHostContainer(workInProgress$1,workInProgress$1.stateNode.containerInfo),pushProvider(workInProgress$1,CacheContext,current.memoizedState.cache),resetHydrationState();break;case 27:case 5:pushHostContext(workInProgress$1);break;case 4:pushHostContainer(workInProgress$1,workInProgress$1.stateNode.containerInfo);break;case 10:pushProvider(workInProgress$1,workInProgress$1.type,workInProgress$1.memoizedProps.value);break;case 31:if(workInProgress$1.memoizedState!==null)return workInProgress$1.flags|=128,pushDehydratedActivitySuspenseHandler(workInProgress$1),null;break;case 13:var state$102=workInProgress$1.memoizedState;if(state$102!==null)return state$102.dehydrated===null?(renderLanes$1&workInProgress$1.child.childLanes)===0?(pushPrimaryTreeSuspenseHandler(workInProgress$1),current=bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1),current===null?null:current.sibling):updateSuspenseComponent(current,workInProgress$1,renderLanes$1):(pushPrimaryTreeSuspenseHandler(workInProgress$1),workInProgress$1.flags|=128,null);pushPrimaryTreeSuspenseHandler(workInProgress$1);break;case 19:var didSuspendBefore=(current.flags&128)!=0;if(state$102=(renderLanes$1&workInProgress$1.childLanes)!==0,state$102||=(propagateParentContextChanges(current,workInProgress$1,renderLanes$1,!1),(renderLanes$1&workInProgress$1.childLanes)!==0),didSuspendBefore){if(state$102)return updateSuspenseListComponent(current,workInProgress$1,renderLanes$1);workInProgress$1.flags|=128}if(didSuspendBefore=workInProgress$1.memoizedState,didSuspendBefore!==null&&(didSuspendBefore.rendering=null,didSuspendBefore.tail=null,didSuspendBefore.lastEffect=null),push(suspenseStackCursor,suspenseStackCursor.current),state$102)break;return null;case 22:return workInProgress$1.lanes=0,updateOffscreenComponent(current,workInProgress$1,renderLanes$1,workInProgress$1.pendingProps);case 24:pushProvider(workInProgress$1,CacheContext,current.memoizedState.cache)}return bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)}function beginWork(current,workInProgress$1,renderLanes$1){if(current!==null)if(current.memoizedProps!==workInProgress$1.pendingProps)didReceiveUpdate=!0;else{if(!checkScheduledUpdateOrContext(current,renderLanes$1)&&!(workInProgress$1.flags&128))return didReceiveUpdate=!1,attemptEarlyBailoutIfNoScheduledUpdate(current,workInProgress$1,renderLanes$1);didReceiveUpdate=!!(current.flags&131072)}else didReceiveUpdate=!1,isHydrating&&workInProgress$1.flags&1048576&&pushTreeId(workInProgress$1,treeForkCount,workInProgress$1.index);switch(workInProgress$1.lanes=0,workInProgress$1.tag){case 16:a:{var props=workInProgress$1.pendingProps;if(current=resolveLazy(workInProgress$1.elementType),workInProgress$1.type=current,typeof current==`function`)shouldConstruct(current)?(props=resolveClassComponentProps(current,props),workInProgress$1.tag=1,workInProgress$1=updateClassComponent(null,workInProgress$1,current,props,renderLanes$1)):(workInProgress$1.tag=0,workInProgress$1=updateFunctionComponent(null,workInProgress$1,current,props,renderLanes$1));else{if(current!=null){var $$typeof=current.$$typeof;if($$typeof===REACT_FORWARD_REF_TYPE$1){workInProgress$1.tag=11,workInProgress$1=updateForwardRef(null,workInProgress$1,current,props,renderLanes$1);break a}else if($$typeof===REACT_MEMO_TYPE$1){workInProgress$1.tag=14,workInProgress$1=updateMemoComponent(null,workInProgress$1,current,props,renderLanes$1);break a}}throw workInProgress$1=getComponentNameFromType(current)||current,Error(formatProdErrorMessage$2(306,workInProgress$1,``))}}return workInProgress$1;case 0:return updateFunctionComponent(current,workInProgress$1,workInProgress$1.type,workInProgress$1.pendingProps,renderLanes$1);case 1:return props=workInProgress$1.type,$$typeof=resolveClassComponentProps(props,workInProgress$1.pendingProps),updateClassComponent(current,workInProgress$1,props,$$typeof,renderLanes$1);case 3:a:{if(pushHostContainer(workInProgress$1,workInProgress$1.stateNode.containerInfo),current===null)throw Error(formatProdErrorMessage$2(387));props=workInProgress$1.pendingProps;var prevState=workInProgress$1.memoizedState;$$typeof=prevState.element,cloneUpdateQueue(current,workInProgress$1),processUpdateQueue(workInProgress$1,props,null,renderLanes$1);var nextState=workInProgress$1.memoizedState;if(props=nextState.cache,pushProvider(workInProgress$1,CacheContext,props),props!==prevState.cache&&propagateContextChanges(workInProgress$1,[CacheContext],renderLanes$1,!0),suspendIfUpdateReadFromEntangledAsyncAction(),props=nextState.element,prevState.isDehydrated)if(prevState={element:props,isDehydrated:!1,cache:nextState.cache},workInProgress$1.updateQueue.baseState=prevState,workInProgress$1.memoizedState=prevState,workInProgress$1.flags&256){workInProgress$1=mountHostRootWithoutHydrating(current,workInProgress$1,props,renderLanes$1);break a}else if(props!==$$typeof){$$typeof=createCapturedValueAtFiber(Error(formatProdErrorMessage$2(424)),workInProgress$1),queueHydrationError($$typeof),workInProgress$1=mountHostRootWithoutHydrating(current,workInProgress$1,props,renderLanes$1);break a}else{switch(current=workInProgress$1.stateNode.containerInfo,current.nodeType){case 9:current=current.body;break;default:current=current.nodeName===`HTML`?current.ownerDocument.body:current}for(nextHydratableInstance=getNextHydratable(current.firstChild),hydrationParentFiber=workInProgress$1,isHydrating=!0,hydrationErrors=null,rootOrSingletonContext=!0,renderLanes$1=mountChildFibers(workInProgress$1,null,props,renderLanes$1),workInProgress$1.child=renderLanes$1;renderLanes$1;)renderLanes$1.flags=renderLanes$1.flags&-3|4096,renderLanes$1=renderLanes$1.sibling}else{if(resetHydrationState(),props===$$typeof){workInProgress$1=bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1);break a}reconcileChildren(current,workInProgress$1,props,renderLanes$1)}workInProgress$1=workInProgress$1.child}return workInProgress$1;case 26:return markRef(current,workInProgress$1),current===null?(renderLanes$1=getResource(workInProgress$1.type,null,workInProgress$1.pendingProps,null))?workInProgress$1.memoizedState=renderLanes$1:isHydrating||(renderLanes$1=workInProgress$1.type,current=workInProgress$1.pendingProps,props=getOwnerDocumentFromRootContainer(rootInstanceStackCursor.current).createElement(renderLanes$1),props[internalInstanceKey]=workInProgress$1,props[internalPropsKey]=current,setInitialProperties(props,renderLanes$1,current),markNodeAsHoistable(props),workInProgress$1.stateNode=props):workInProgress$1.memoizedState=getResource(workInProgress$1.type,current.memoizedProps,workInProgress$1.pendingProps,current.memoizedState),null;case 27:return pushHostContext(workInProgress$1),current===null&&isHydrating&&(props=workInProgress$1.stateNode=resolveSingletonInstance(workInProgress$1.type,workInProgress$1.pendingProps,rootInstanceStackCursor.current),hydrationParentFiber=workInProgress$1,rootOrSingletonContext=!0,$$typeof=nextHydratableInstance,isSingletonScope(workInProgress$1.type)?(previousHydratableOnEnteringScopedSingleton=$$typeof,nextHydratableInstance=getNextHydratable(props.firstChild)):nextHydratableInstance=$$typeof),reconcileChildren(current,workInProgress$1,workInProgress$1.pendingProps.children,renderLanes$1),markRef(current,workInProgress$1),current===null&&(workInProgress$1.flags|=4194304),workInProgress$1.child;case 5:return current===null&&isHydrating&&(($$typeof=props=nextHydratableInstance)&&(props=canHydrateInstance(props,workInProgress$1.type,workInProgress$1.pendingProps,rootOrSingletonContext),props===null?$$typeof=!1:(workInProgress$1.stateNode=props,hydrationParentFiber=workInProgress$1,nextHydratableInstance=getNextHydratable(props.firstChild),rootOrSingletonContext=!1,$$typeof=!0)),$$typeof||throwOnHydrationMismatch(workInProgress$1)),pushHostContext(workInProgress$1),$$typeof=workInProgress$1.type,prevState=workInProgress$1.pendingProps,nextState=current===null?null:current.memoizedProps,props=prevState.children,shouldSetTextContent($$typeof,prevState)?props=null:nextState!==null&&shouldSetTextContent($$typeof,nextState)&&(workInProgress$1.flags|=32),workInProgress$1.memoizedState!==null&&($$typeof=renderWithHooks(current,workInProgress$1,TransitionAwareHostComponent,null,null,renderLanes$1),HostTransitionContext._currentValue=$$typeof),markRef(current,workInProgress$1),reconcileChildren(current,workInProgress$1,props,renderLanes$1),workInProgress$1.child;case 6:return current===null&&isHydrating&&((current=renderLanes$1=nextHydratableInstance)&&(renderLanes$1=canHydrateTextInstance(renderLanes$1,workInProgress$1.pendingProps,rootOrSingletonContext),renderLanes$1===null?current=!1:(workInProgress$1.stateNode=renderLanes$1,hydrationParentFiber=workInProgress$1,nextHydratableInstance=null,current=!0)),current||throwOnHydrationMismatch(workInProgress$1)),null;case 13:return updateSuspenseComponent(current,workInProgress$1,renderLanes$1);case 4:return pushHostContainer(workInProgress$1,workInProgress$1.stateNode.containerInfo),props=workInProgress$1.pendingProps,current===null?workInProgress$1.child=reconcileChildFibers(workInProgress$1,null,props,renderLanes$1):reconcileChildren(current,workInProgress$1,props,renderLanes$1),workInProgress$1.child;case 11:return updateForwardRef(current,workInProgress$1,workInProgress$1.type,workInProgress$1.pendingProps,renderLanes$1);case 7:return reconcileChildren(current,workInProgress$1,workInProgress$1.pendingProps,renderLanes$1),workInProgress$1.child;case 8:return reconcileChildren(current,workInProgress$1,workInProgress$1.pendingProps.children,renderLanes$1),workInProgress$1.child;case 12:return reconcileChildren(current,workInProgress$1,workInProgress$1.pendingProps.children,renderLanes$1),workInProgress$1.child;case 10:return props=workInProgress$1.pendingProps,pushProvider(workInProgress$1,workInProgress$1.type,props.value),reconcileChildren(current,workInProgress$1,props.children,renderLanes$1),workInProgress$1.child;case 9:return $$typeof=workInProgress$1.type._context,props=workInProgress$1.pendingProps.children,prepareToReadContext(workInProgress$1),$$typeof=readContext($$typeof),props=props($$typeof),workInProgress$1.flags|=1,reconcileChildren(current,workInProgress$1,props,renderLanes$1),workInProgress$1.child;case 14:return updateMemoComponent(current,workInProgress$1,workInProgress$1.type,workInProgress$1.pendingProps,renderLanes$1);case 15:return updateSimpleMemoComponent(current,workInProgress$1,workInProgress$1.type,workInProgress$1.pendingProps,renderLanes$1);case 19:return updateSuspenseListComponent(current,workInProgress$1,renderLanes$1);case 31:return updateActivityComponent(current,workInProgress$1,renderLanes$1);case 22:return updateOffscreenComponent(current,workInProgress$1,renderLanes$1,workInProgress$1.pendingProps);case 24:return prepareToReadContext(workInProgress$1),props=readContext(CacheContext),current===null?($$typeof=peekCacheFromPool(),$$typeof===null&&($$typeof=workInProgressRoot,prevState=createCache(),$$typeof.pooledCache=prevState,prevState.refCount++,prevState!==null&&($$typeof.pooledCacheLanes|=renderLanes$1),$$typeof=prevState),workInProgress$1.memoizedState={parent:props,cache:$$typeof},initializeUpdateQueue(workInProgress$1),pushProvider(workInProgress$1,CacheContext,$$typeof)):((current.lanes&renderLanes$1)!==0&&(cloneUpdateQueue(current,workInProgress$1),processUpdateQueue(workInProgress$1,null,null,renderLanes$1),suspendIfUpdateReadFromEntangledAsyncAction()),$$typeof=current.memoizedState,prevState=workInProgress$1.memoizedState,$$typeof.parent===props?(props=prevState.cache,pushProvider(workInProgress$1,CacheContext,props),props!==$$typeof.cache&&propagateContextChanges(workInProgress$1,[CacheContext],renderLanes$1,!0)):($$typeof={parent:props,cache:props},workInProgress$1.memoizedState=$$typeof,workInProgress$1.lanes===0&&(workInProgress$1.memoizedState=workInProgress$1.updateQueue.baseState=$$typeof),pushProvider(workInProgress$1,CacheContext,props))),reconcileChildren(current,workInProgress$1,workInProgress$1.pendingProps.children,renderLanes$1),workInProgress$1.child;case 29:throw workInProgress$1.pendingProps}throw Error(formatProdErrorMessage$2(156,workInProgress$1.tag))}function markUpdate(workInProgress$1){workInProgress$1.flags|=4}function preloadInstanceAndSuspendIfNeeded(workInProgress$1,type,oldProps,newProps,renderLanes$1){if((type=(workInProgress$1.mode&32)!=0)&&(type=!1),type){if(workInProgress$1.flags|=16777216,(renderLanes$1&335544128)===renderLanes$1)if(workInProgress$1.stateNode.complete)workInProgress$1.flags|=8192;else if(shouldRemainOnPreviousScreen())workInProgress$1.flags|=8192;else throw suspendedThenable=noopSuspenseyCommitThenable,SuspenseyCommitException}else workInProgress$1.flags&=-16777217}function preloadResourceAndSuspendIfNeeded(workInProgress$1,resource){if(resource.type!==`stylesheet`||resource.state.loading&4)workInProgress$1.flags&=-16777217;else if(workInProgress$1.flags|=16777216,!preloadResource(resource))if(shouldRemainOnPreviousScreen())workInProgress$1.flags|=8192;else throw suspendedThenable=noopSuspenseyCommitThenable,SuspenseyCommitException}function scheduleRetryEffect(workInProgress$1,retryQueue){retryQueue!==null&&(workInProgress$1.flags|=4),workInProgress$1.flags&16384&&(retryQueue=workInProgress$1.tag===22?536870912:claimNextRetryLane(),workInProgress$1.lanes|=retryQueue,workInProgressSuspendedRetryLanes|=retryQueue)}function cutOffTailIfNeeded(renderState,hasRenderedATailFallback){if(!isHydrating)switch(renderState.tailMode){case`hidden`:hasRenderedATailFallback=renderState.tail;for(var lastTailNode=null;hasRenderedATailFallback!==null;)hasRenderedATailFallback.alternate!==null&&(lastTailNode=hasRenderedATailFallback),hasRenderedATailFallback=hasRenderedATailFallback.sibling;lastTailNode===null?renderState.tail=null:lastTailNode.sibling=null;break;case`collapsed`:lastTailNode=renderState.tail;for(var lastTailNode$106=null;lastTailNode!==null;)lastTailNode.alternate!==null&&(lastTailNode$106=lastTailNode),lastTailNode=lastTailNode.sibling;lastTailNode$106===null?hasRenderedATailFallback||renderState.tail===null?renderState.tail=null:renderState.tail.sibling=null:lastTailNode$106.sibling=null}}function bubbleProperties(completedWork){var didBailout=completedWork.alternate!==null&&completedWork.alternate.child===completedWork.child,newChildLanes=0,subtreeFlags=0;if(didBailout)for(var child$107=completedWork.child;child$107!==null;)newChildLanes|=child$107.lanes|child$107.childLanes,subtreeFlags|=child$107.subtreeFlags&65011712,subtreeFlags|=child$107.flags&65011712,child$107.return=completedWork,child$107=child$107.sibling;else for(child$107=completedWork.child;child$107!==null;)newChildLanes|=child$107.lanes|child$107.childLanes,subtreeFlags|=child$107.subtreeFlags,subtreeFlags|=child$107.flags,child$107.return=completedWork,child$107=child$107.sibling;return completedWork.subtreeFlags|=subtreeFlags,completedWork.childLanes=newChildLanes,didBailout}function completeWork(current,workInProgress$1,renderLanes$1){var newProps=workInProgress$1.pendingProps;switch(popTreeContext(workInProgress$1),workInProgress$1.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bubbleProperties(workInProgress$1),null;case 1:return bubbleProperties(workInProgress$1),null;case 3:return renderLanes$1=workInProgress$1.stateNode,newProps=null,current!==null&&(newProps=current.memoizedState.cache),workInProgress$1.memoizedState.cache!==newProps&&(workInProgress$1.flags|=2048),popProvider(CacheContext),popHostContainer(),renderLanes$1.pendingContext&&=(renderLanes$1.context=renderLanes$1.pendingContext,null),(current===null||current.child===null)&&(popHydrationState(workInProgress$1)?markUpdate(workInProgress$1):current===null||current.memoizedState.isDehydrated&&!(workInProgress$1.flags&256)||(workInProgress$1.flags|=1024,upgradeHydrationErrorsToRecoverable())),bubbleProperties(workInProgress$1),null;case 26:var type=workInProgress$1.type,nextResource=workInProgress$1.memoizedState;return current===null?(markUpdate(workInProgress$1),nextResource===null?(bubbleProperties(workInProgress$1),preloadInstanceAndSuspendIfNeeded(workInProgress$1,type,null,newProps,renderLanes$1)):(bubbleProperties(workInProgress$1),preloadResourceAndSuspendIfNeeded(workInProgress$1,nextResource))):nextResource?nextResource===current.memoizedState?(bubbleProperties(workInProgress$1),workInProgress$1.flags&=-16777217):(markUpdate(workInProgress$1),bubbleProperties(workInProgress$1),preloadResourceAndSuspendIfNeeded(workInProgress$1,nextResource)):(current=current.memoizedProps,current!==newProps&&markUpdate(workInProgress$1),bubbleProperties(workInProgress$1),preloadInstanceAndSuspendIfNeeded(workInProgress$1,type,current,newProps,renderLanes$1)),null;case 27:if(popHostContext(workInProgress$1),renderLanes$1=rootInstanceStackCursor.current,type=workInProgress$1.type,current!==null&&workInProgress$1.stateNode!=null)current.memoizedProps!==newProps&&markUpdate(workInProgress$1);else{if(!newProps){if(workInProgress$1.stateNode===null)throw Error(formatProdErrorMessage$2(166));return bubbleProperties(workInProgress$1),null}current=contextStackCursor.current,popHydrationState(workInProgress$1)?prepareToHydrateHostInstance(workInProgress$1,current):(current=resolveSingletonInstance(type,newProps,renderLanes$1),workInProgress$1.stateNode=current,markUpdate(workInProgress$1))}return bubbleProperties(workInProgress$1),null;case 5:if(popHostContext(workInProgress$1),type=workInProgress$1.type,current!==null&&workInProgress$1.stateNode!=null)current.memoizedProps!==newProps&&markUpdate(workInProgress$1);else{if(!newProps){if(workInProgress$1.stateNode===null)throw Error(formatProdErrorMessage$2(166));return bubbleProperties(workInProgress$1),null}if(nextResource=contextStackCursor.current,popHydrationState(workInProgress$1))prepareToHydrateHostInstance(workInProgress$1,nextResource);else{var ownerDocument=getOwnerDocumentFromRootContainer(rootInstanceStackCursor.current);switch(nextResource){case 1:nextResource=ownerDocument.createElementNS(`http://www.w3.org/2000/svg`,type);break;case 2:nextResource=ownerDocument.createElementNS(`http://www.w3.org/1998/Math/MathML`,type);break;default:switch(type){case`svg`:nextResource=ownerDocument.createElementNS(`http://www.w3.org/2000/svg`,type);break;case`math`:nextResource=ownerDocument.createElementNS(`http://www.w3.org/1998/Math/MathML`,type);break;case`script`:nextResource=ownerDocument.createElement(`div`),nextResource.innerHTML=`<script><\/script>`,nextResource=nextResource.removeChild(nextResource.firstChild);break;case`select`:nextResource=typeof newProps.is==`string`?ownerDocument.createElement(`select`,{is:newProps.is}):ownerDocument.createElement(`select`),newProps.multiple?nextResource.multiple=!0:newProps.size&&(nextResource.size=newProps.size);break;default:nextResource=typeof newProps.is==`string`?ownerDocument.createElement(type,{is:newProps.is}):ownerDocument.createElement(type)}}nextResource[internalInstanceKey]=workInProgress$1,nextResource[internalPropsKey]=newProps;a:for(ownerDocument=workInProgress$1.child;ownerDocument!==null;){if(ownerDocument.tag===5||ownerDocument.tag===6)nextResource.appendChild(ownerDocument.stateNode);else if(ownerDocument.tag!==4&&ownerDocument.tag!==27&&ownerDocument.child!==null){ownerDocument.child.return=ownerDocument,ownerDocument=ownerDocument.child;continue}if(ownerDocument===workInProgress$1)break a;for(;ownerDocument.sibling===null;){if(ownerDocument.return===null||ownerDocument.return===workInProgress$1)break a;ownerDocument=ownerDocument.return}ownerDocument.sibling.return=ownerDocument.return,ownerDocument=ownerDocument.sibling}workInProgress$1.stateNode=nextResource;a:switch(setInitialProperties(nextResource,type,newProps),type){case`button`:case`input`:case`select`:case`textarea`:newProps=!!newProps.autoFocus;break a;case`img`:newProps=!0;break a;default:newProps=!1}newProps&&markUpdate(workInProgress$1)}}return bubbleProperties(workInProgress$1),preloadInstanceAndSuspendIfNeeded(workInProgress$1,workInProgress$1.type,current===null?null:current.memoizedProps,workInProgress$1.pendingProps,renderLanes$1),null;case 6:if(current&&workInProgress$1.stateNode!=null)current.memoizedProps!==newProps&&markUpdate(workInProgress$1);else{if(typeof newProps!=`string`&&workInProgress$1.stateNode===null)throw Error(formatProdErrorMessage$2(166));if(current=rootInstanceStackCursor.current,popHydrationState(workInProgress$1)){if(current=workInProgress$1.stateNode,renderLanes$1=workInProgress$1.memoizedProps,newProps=null,type=hydrationParentFiber,type!==null)switch(type.tag){case 27:case 5:newProps=type.memoizedProps}current[internalInstanceKey]=workInProgress$1,current=!!(current.nodeValue===renderLanes$1||newProps!==null&&!0===newProps.suppressHydrationWarning||checkForUnmatchedText(current.nodeValue,renderLanes$1)),current||throwOnHydrationMismatch(workInProgress$1,!0)}else current=getOwnerDocumentFromRootContainer(current).createTextNode(newProps),current[internalInstanceKey]=workInProgress$1,workInProgress$1.stateNode=current}return bubbleProperties(workInProgress$1),null;case 31:if(renderLanes$1=workInProgress$1.memoizedState,current===null||current.memoizedState!==null){if(newProps=popHydrationState(workInProgress$1),renderLanes$1!==null){if(current===null){if(!newProps)throw Error(formatProdErrorMessage$2(318));if(current=workInProgress$1.memoizedState,current=current===null?null:current.dehydrated,!current)throw Error(formatProdErrorMessage$2(557));current[internalInstanceKey]=workInProgress$1}else resetHydrationState(),!(workInProgress$1.flags&128)&&(workInProgress$1.memoizedState=null),workInProgress$1.flags|=4;bubbleProperties(workInProgress$1),current=!1}else renderLanes$1=upgradeHydrationErrorsToRecoverable(),current!==null&&current.memoizedState!==null&&(current.memoizedState.hydrationErrors=renderLanes$1),current=!0;if(!current)return workInProgress$1.flags&256?(popSuspenseHandler(workInProgress$1),workInProgress$1):(popSuspenseHandler(workInProgress$1),null);if(workInProgress$1.flags&128)throw Error(formatProdErrorMessage$2(558))}return bubbleProperties(workInProgress$1),null;case 13:if(newProps=workInProgress$1.memoizedState,current===null||current.memoizedState!==null&&current.memoizedState.dehydrated!==null){if(type=popHydrationState(workInProgress$1),newProps!==null&&newProps.dehydrated!==null){if(current===null){if(!type)throw Error(formatProdErrorMessage$2(318));if(type=workInProgress$1.memoizedState,type=type===null?null:type.dehydrated,!type)throw Error(formatProdErrorMessage$2(317));type[internalInstanceKey]=workInProgress$1}else resetHydrationState(),!(workInProgress$1.flags&128)&&(workInProgress$1.memoizedState=null),workInProgress$1.flags|=4;bubbleProperties(workInProgress$1),type=!1}else type=upgradeHydrationErrorsToRecoverable(),current!==null&&current.memoizedState!==null&&(current.memoizedState.hydrationErrors=type),type=!0;if(!type)return workInProgress$1.flags&256?(popSuspenseHandler(workInProgress$1),workInProgress$1):(popSuspenseHandler(workInProgress$1),null)}return popSuspenseHandler(workInProgress$1),workInProgress$1.flags&128?(workInProgress$1.lanes=renderLanes$1,workInProgress$1):(renderLanes$1=newProps!==null,current=current!==null&&current.memoizedState!==null,renderLanes$1&&(newProps=workInProgress$1.child,type=null,newProps.alternate!==null&&newProps.alternate.memoizedState!==null&&newProps.alternate.memoizedState.cachePool!==null&&(type=newProps.alternate.memoizedState.cachePool.pool),nextResource=null,newProps.memoizedState!==null&&newProps.memoizedState.cachePool!==null&&(nextResource=newProps.memoizedState.cachePool.pool),nextResource!==type&&(newProps.flags|=2048)),renderLanes$1!==current&&renderLanes$1&&(workInProgress$1.child.flags|=8192),scheduleRetryEffect(workInProgress$1,workInProgress$1.updateQueue),bubbleProperties(workInProgress$1),null);case 4:return popHostContainer(),current===null&&listenToAllSupportedEvents(workInProgress$1.stateNode.containerInfo),bubbleProperties(workInProgress$1),null;case 10:return popProvider(workInProgress$1.type),bubbleProperties(workInProgress$1),null;case 19:if(pop(suspenseStackCursor),newProps=workInProgress$1.memoizedState,newProps===null)return bubbleProperties(workInProgress$1),null;if(type=(workInProgress$1.flags&128)!=0,nextResource=newProps.rendering,nextResource===null)if(type)cutOffTailIfNeeded(newProps,!1);else{if(workInProgressRootExitStatus!==0||current!==null&&current.flags&128)for(current=workInProgress$1.child;current!==null;){if(nextResource=findFirstSuspended(current),nextResource!==null){for(workInProgress$1.flags|=128,cutOffTailIfNeeded(newProps,!1),current=nextResource.updateQueue,workInProgress$1.updateQueue=current,scheduleRetryEffect(workInProgress$1,current),workInProgress$1.subtreeFlags=0,current=renderLanes$1,renderLanes$1=workInProgress$1.child;renderLanes$1!==null;)resetWorkInProgress(renderLanes$1,current),renderLanes$1=renderLanes$1.sibling;return push(suspenseStackCursor,suspenseStackCursor.current&1|2),isHydrating&&pushTreeFork(workInProgress$1,newProps.treeForkCount),workInProgress$1.child}current=current.sibling}newProps.tail!==null&&now$3()>workInProgressRootRenderTargetTime&&(workInProgress$1.flags|=128,type=!0,cutOffTailIfNeeded(newProps,!1),workInProgress$1.lanes=4194304)}else{if(!type)if(current=findFirstSuspended(nextResource),current!==null){if(workInProgress$1.flags|=128,type=!0,current=current.updateQueue,workInProgress$1.updateQueue=current,scheduleRetryEffect(workInProgress$1,current),cutOffTailIfNeeded(newProps,!0),newProps.tail===null&&newProps.tailMode===`hidden`&&!nextResource.alternate&&!isHydrating)return bubbleProperties(workInProgress$1),null}else 2*now$3()-newProps.renderingStartTime>workInProgressRootRenderTargetTime&&renderLanes$1!==536870912&&(workInProgress$1.flags|=128,type=!0,cutOffTailIfNeeded(newProps,!1),workInProgress$1.lanes=4194304);newProps.isBackwards?(nextResource.sibling=workInProgress$1.child,workInProgress$1.child=nextResource):(current=newProps.last,current===null?workInProgress$1.child=nextResource:current.sibling=nextResource,newProps.last=nextResource)}return newProps.tail===null?(bubbleProperties(workInProgress$1),null):(current=newProps.tail,newProps.rendering=current,newProps.tail=current.sibling,newProps.renderingStartTime=now$3(),current.sibling=null,renderLanes$1=suspenseStackCursor.current,push(suspenseStackCursor,type?renderLanes$1&1|2:renderLanes$1&1),isHydrating&&pushTreeFork(workInProgress$1,newProps.treeForkCount),current);case 22:case 23:return popSuspenseHandler(workInProgress$1),popHiddenContext(),newProps=workInProgress$1.memoizedState!==null,current===null?newProps&&(workInProgress$1.flags|=8192):current.memoizedState!==null!==newProps&&(workInProgress$1.flags|=8192),newProps?renderLanes$1&536870912&&!(workInProgress$1.flags&128)&&(bubbleProperties(workInProgress$1),workInProgress$1.subtreeFlags&6&&(workInProgress$1.flags|=8192)):bubbleProperties(workInProgress$1),renderLanes$1=workInProgress$1.updateQueue,renderLanes$1!==null&&scheduleRetryEffect(workInProgress$1,renderLanes$1.retryQueue),renderLanes$1=null,current!==null&&current.memoizedState!==null&&current.memoizedState.cachePool!==null&&(renderLanes$1=current.memoizedState.cachePool.pool),newProps=null,workInProgress$1.memoizedState!==null&&workInProgress$1.memoizedState.cachePool!==null&&(newProps=workInProgress$1.memoizedState.cachePool.pool),newProps!==renderLanes$1&&(workInProgress$1.flags|=2048),current!==null&&pop(resumedCache),null;case 24:return renderLanes$1=null,current!==null&&(renderLanes$1=current.memoizedState.cache),workInProgress$1.memoizedState.cache!==renderLanes$1&&(workInProgress$1.flags|=2048),popProvider(CacheContext),bubbleProperties(workInProgress$1),null;case 25:return null;case 30:return null}throw Error(formatProdErrorMessage$2(156,workInProgress$1.tag))}function unwindWork(current,workInProgress$1){switch(popTreeContext(workInProgress$1),workInProgress$1.tag){case 1:return current=workInProgress$1.flags,current&65536?(workInProgress$1.flags=current&-65537|128,workInProgress$1):null;case 3:return popProvider(CacheContext),popHostContainer(),current=workInProgress$1.flags,current&65536&&!(current&128)?(workInProgress$1.flags=current&-65537|128,workInProgress$1):null;case 26:case 27:case 5:return popHostContext(workInProgress$1),null;case 31:if(workInProgress$1.memoizedState!==null){if(popSuspenseHandler(workInProgress$1),workInProgress$1.alternate===null)throw Error(formatProdErrorMessage$2(340));resetHydrationState()}return current=workInProgress$1.flags,current&65536?(workInProgress$1.flags=current&-65537|128,workInProgress$1):null;case 13:if(popSuspenseHandler(workInProgress$1),current=workInProgress$1.memoizedState,current!==null&&current.dehydrated!==null){if(workInProgress$1.alternate===null)throw Error(formatProdErrorMessage$2(340));resetHydrationState()}return current=workInProgress$1.flags,current&65536?(workInProgress$1.flags=current&-65537|128,workInProgress$1):null;case 19:return pop(suspenseStackCursor),null;case 4:return popHostContainer(),null;case 10:return popProvider(workInProgress$1.type),null;case 22:case 23:return popSuspenseHandler(workInProgress$1),popHiddenContext(),current!==null&&pop(resumedCache),current=workInProgress$1.flags,current&65536?(workInProgress$1.flags=current&-65537|128,workInProgress$1):null;case 24:return popProvider(CacheContext),null;case 25:return null;default:return null}}function unwindInterruptedWork(current,interruptedWork){switch(popTreeContext(interruptedWork),interruptedWork.tag){case 3:popProvider(CacheContext),popHostContainer();break;case 26:case 27:case 5:popHostContext(interruptedWork);break;case 4:popHostContainer();break;case 31:interruptedWork.memoizedState!==null&&popSuspenseHandler(interruptedWork);break;case 13:popSuspenseHandler(interruptedWork);break;case 19:pop(suspenseStackCursor);break;case 10:popProvider(interruptedWork.type);break;case 22:case 23:popSuspenseHandler(interruptedWork),popHiddenContext(),current!==null&&pop(resumedCache);break;case 24:popProvider(CacheContext)}}function commitHookEffectListMount(flags,finishedWork){try{var updateQueue=finishedWork.updateQueue,lastEffect=updateQueue===null?null:updateQueue.lastEffect;if(lastEffect!==null){var firstEffect=lastEffect.next;updateQueue=firstEffect;do{if((updateQueue.tag&flags)===flags){lastEffect=void 0;var create$2=updateQueue.create,inst=updateQueue.inst;lastEffect=create$2(),inst.destroy=lastEffect}updateQueue=updateQueue.next}while(updateQueue!==firstEffect)}}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}function commitHookEffectListUnmount(flags,finishedWork,nearestMountedAncestor$jscomp$0){try{var updateQueue=finishedWork.updateQueue,lastEffect=updateQueue===null?null:updateQueue.lastEffect;if(lastEffect!==null){var firstEffect=lastEffect.next;updateQueue=firstEffect;do{if((updateQueue.tag&flags)===flags){var inst=updateQueue.inst,destroy=inst.destroy;if(destroy!==void 0){inst.destroy=void 0,lastEffect=finishedWork;var nearestMountedAncestor=nearestMountedAncestor$jscomp$0,destroy_=destroy;try{destroy_()}catch(error$1){captureCommitPhaseError(lastEffect,nearestMountedAncestor,error$1)}}}updateQueue=updateQueue.next}while(updateQueue!==firstEffect)}}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}function commitClassCallbacks(finishedWork){var updateQueue=finishedWork.updateQueue;if(updateQueue!==null){var instance=finishedWork.stateNode;try{commitCallbacks(updateQueue,instance)}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}}function safelyCallComponentWillUnmount(current,nearestMountedAncestor,instance){instance.props=resolveClassComponentProps(current.type,current.memoizedProps),instance.state=current.memoizedState;try{instance.componentWillUnmount()}catch(error$1){captureCommitPhaseError(current,nearestMountedAncestor,error$1)}}function safelyAttachRef(current,nearestMountedAncestor){try{var ref=current.ref;if(ref!==null){switch(current.tag){case 26:case 27:case 5:var instanceToUse=current.stateNode;break;case 30:instanceToUse=current.stateNode;break;default:instanceToUse=current.stateNode}typeof ref==`function`?current.refCleanup=ref(instanceToUse):ref.current=instanceToUse}}catch(error$1){captureCommitPhaseError(current,nearestMountedAncestor,error$1)}}function safelyDetachRef(current,nearestMountedAncestor){var ref=current.ref,refCleanup=current.refCleanup;if(ref!==null)if(typeof refCleanup==`function`)try{refCleanup()}catch(error$1){captureCommitPhaseError(current,nearestMountedAncestor,error$1)}finally{current.refCleanup=null,current=current.alternate,current!=null&&(current.refCleanup=null)}else if(typeof ref==`function`)try{ref(null)}catch(error$140){captureCommitPhaseError(current,nearestMountedAncestor,error$140)}else ref.current=null}function commitHostMount(finishedWork){var type=finishedWork.type,props=finishedWork.memoizedProps,instance=finishedWork.stateNode;try{a:switch(type){case`button`:case`input`:case`select`:case`textarea`:props.autoFocus&&instance.focus();break a;case`img`:props.src?instance.src=props.src:props.srcSet&&(instance.srcset=props.srcSet)}}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}function commitHostUpdate(finishedWork,newProps,oldProps){try{var domElement=finishedWork.stateNode;updateProperties(domElement,finishedWork.type,oldProps,newProps),domElement[internalPropsKey]=newProps}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}function isHostParent(fiber){return fiber.tag===5||fiber.tag===3||fiber.tag===26||fiber.tag===27&&isSingletonScope(fiber.type)||fiber.tag===4}function getHostSibling(fiber){a:for(;;){for(;fiber.sibling===null;){if(fiber.return===null||isHostParent(fiber.return))return null;fiber=fiber.return}for(fiber.sibling.return=fiber.return,fiber=fiber.sibling;fiber.tag!==5&&fiber.tag!==6&&fiber.tag!==18;){if(fiber.tag===27&&isSingletonScope(fiber.type)||fiber.flags&2||fiber.child===null||fiber.tag===4)continue a;fiber.child.return=fiber,fiber=fiber.child}if(!(fiber.flags&2))return fiber.stateNode}}function insertOrAppendPlacementNodeIntoContainer(node,before,parent){var tag=node.tag;if(tag===5||tag===6)node=node.stateNode,before?(parent.nodeType===9?parent.body:parent.nodeName===`HTML`?parent.ownerDocument.body:parent).insertBefore(node,before):(before=parent.nodeType===9?parent.body:parent.nodeName===`HTML`?parent.ownerDocument.body:parent,before.appendChild(node),parent=parent._reactRootContainer,parent!=null||before.onclick!==null||(before.onclick=noop$1$7));else if(tag!==4&&(tag===27&&isSingletonScope(node.type)&&(parent=node.stateNode,before=null),node=node.child,node!==null))for(insertOrAppendPlacementNodeIntoContainer(node,before,parent),node=node.sibling;node!==null;)insertOrAppendPlacementNodeIntoContainer(node,before,parent),node=node.sibling}function insertOrAppendPlacementNode(node,before,parent){var tag=node.tag;if(tag===5||tag===6)node=node.stateNode,before?parent.insertBefore(node,before):parent.appendChild(node);else if(tag!==4&&(tag===27&&isSingletonScope(node.type)&&(parent=node.stateNode),node=node.child,node!==null))for(insertOrAppendPlacementNode(node,before,parent),node=node.sibling;node!==null;)insertOrAppendPlacementNode(node,before,parent),node=node.sibling}function commitHostSingletonAcquisition(finishedWork){var singleton=finishedWork.stateNode,props=finishedWork.memoizedProps;try{for(var type=finishedWork.type,attributes=singleton.attributes;attributes.length;)singleton.removeAttributeNode(attributes[0]);setInitialProperties(singleton,type,props),singleton[internalInstanceKey]=finishedWork,singleton[internalPropsKey]=props}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}var offscreenSubtreeIsHidden=!1,offscreenSubtreeWasHidden=!1,needsFormReset=!1,PossiblyWeakSet=typeof WeakSet==`function`?WeakSet:Set,nextEffect=null;function commitBeforeMutationEffects(root$3,firstChild){if(root$3=root$3.containerInfo,eventsEnabled=_enabled,root$3=getActiveElementDeep(root$3),hasSelectionCapabilities(root$3)){if(`selectionStart`in root$3)var JSCompiler_temp={start:root$3.selectionStart,end:root$3.selectionEnd};else a:{JSCompiler_temp=(JSCompiler_temp=root$3.ownerDocument)&&JSCompiler_temp.defaultView||window;var selection$1=JSCompiler_temp.getSelection&&JSCompiler_temp.getSelection();if(selection$1&&selection$1.rangeCount!==0){JSCompiler_temp=selection$1.anchorNode;var anchorOffset=selection$1.anchorOffset,focusNode=selection$1.focusNode;selection$1=selection$1.focusOffset;try{JSCompiler_temp.nodeType,focusNode.nodeType}catch{JSCompiler_temp=null;break a}var length=0,start$2=-1,end$1=-1,indexWithinAnchor=0,indexWithinFocus=0,node=root$3,parentNode=null;b:for(;;){for(var next;node!==JSCompiler_temp||anchorOffset!==0&&node.nodeType!==3||(start$2=length+anchorOffset),node!==focusNode||selection$1!==0&&node.nodeType!==3||(end$1=length+selection$1),node.nodeType===3&&(length+=node.nodeValue.length),(next=node.firstChild)!==null;)parentNode=node,node=next;for(;;){if(node===root$3)break b;if(parentNode===JSCompiler_temp&&++indexWithinAnchor===anchorOffset&&(start$2=length),parentNode===focusNode&&++indexWithinFocus===selection$1&&(end$1=length),(next=node.nextSibling)!==null)break;node=parentNode,parentNode=node.parentNode}node=next}JSCompiler_temp=start$2===-1||end$1===-1?null:{start:start$2,end:end$1}}else JSCompiler_temp=null}JSCompiler_temp||={start:0,end:0}}else JSCompiler_temp=null;for(selectionInformation={focusedElem:root$3,selectionRange:JSCompiler_temp},_enabled=!1,nextEffect=firstChild;nextEffect!==null;)if(firstChild=nextEffect,root$3=firstChild.child,firstChild.subtreeFlags&1028&&root$3!==null)root$3.return=firstChild,nextEffect=root$3;else for(;nextEffect!==null;){switch(firstChild=nextEffect,focusNode=firstChild.alternate,root$3=firstChild.flags,firstChild.tag){case 0:if(root$3&4&&(root$3=firstChild.updateQueue,root$3=root$3===null?null:root$3.events,root$3!==null))for(JSCompiler_temp=0;JSCompiler_temp<root$3.length;JSCompiler_temp++)anchorOffset=root$3[JSCompiler_temp],anchorOffset.ref.impl=anchorOffset.nextImpl;break;case 11:case 15:break;case 1:if(root$3&1024&&focusNode!==null){root$3=void 0,JSCompiler_temp=firstChild,anchorOffset=focusNode.memoizedProps,focusNode=focusNode.memoizedState,selection$1=JSCompiler_temp.stateNode;try{var resolvedPrevProps=resolveClassComponentProps(JSCompiler_temp.type,anchorOffset);root$3=selection$1.getSnapshotBeforeUpdate(resolvedPrevProps,focusNode),selection$1.__reactInternalSnapshotBeforeUpdate=root$3}catch(error$1){captureCommitPhaseError(JSCompiler_temp,JSCompiler_temp.return,error$1)}}break;case 3:if(root$3&1024){if(root$3=firstChild.stateNode.containerInfo,JSCompiler_temp=root$3.nodeType,JSCompiler_temp===9)clearContainerSparingly(root$3);else if(JSCompiler_temp===1)switch(root$3.nodeName){case`HEAD`:case`HTML`:case`BODY`:clearContainerSparingly(root$3);break;default:root$3.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(root$3&1024)throw Error(formatProdErrorMessage$2(163))}if(root$3=firstChild.sibling,root$3!==null){root$3.return=firstChild.return,nextEffect=root$3;break}nextEffect=firstChild.return}}function commitLayoutEffectOnFiber(finishedRoot,current,finishedWork){var flags=finishedWork.flags;switch(finishedWork.tag){case 0:case 11:case 15:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),flags&4&&commitHookEffectListMount(5,finishedWork);break;case 1:if(recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),flags&4)if(finishedRoot=finishedWork.stateNode,current===null)try{finishedRoot.componentDidMount()}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}else{var prevProps=resolveClassComponentProps(finishedWork.type,current.memoizedProps);current=current.memoizedState;try{finishedRoot.componentDidUpdate(prevProps,current,finishedRoot.__reactInternalSnapshotBeforeUpdate)}catch(error$139){captureCommitPhaseError(finishedWork,finishedWork.return,error$139)}}flags&64&&commitClassCallbacks(finishedWork),flags&512&&safelyAttachRef(finishedWork,finishedWork.return);break;case 3:if(recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),flags&64&&(finishedRoot=finishedWork.updateQueue,finishedRoot!==null)){if(current=null,finishedWork.child!==null)switch(finishedWork.child.tag){case 27:case 5:current=finishedWork.child.stateNode;break;case 1:current=finishedWork.child.stateNode}try{commitCallbacks(finishedRoot,current)}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}break;case 27:current===null&&flags&4&&commitHostSingletonAcquisition(finishedWork);case 26:case 5:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),current===null&&flags&4&&commitHostMount(finishedWork),flags&512&&safelyAttachRef(finishedWork,finishedWork.return);break;case 12:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork);break;case 31:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),flags&4&&commitActivityHydrationCallbacks(finishedRoot,finishedWork);break;case 13:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),flags&4&&commitSuspenseHydrationCallbacks(finishedRoot,finishedWork),flags&64&&(finishedRoot=finishedWork.memoizedState,finishedRoot!==null&&(finishedRoot=finishedRoot.dehydrated,finishedRoot!==null&&(finishedWork=retryDehydratedSuspenseBoundary.bind(null,finishedWork),registerSuspenseInstanceRetry(finishedRoot,finishedWork))));break;case 22:if(flags=finishedWork.memoizedState!==null||offscreenSubtreeIsHidden,!flags){current=current!==null&&current.memoizedState!==null||offscreenSubtreeWasHidden,prevProps=offscreenSubtreeIsHidden;var prevOffscreenSubtreeWasHidden=offscreenSubtreeWasHidden;offscreenSubtreeIsHidden=flags,(offscreenSubtreeWasHidden=current)&&!prevOffscreenSubtreeWasHidden?recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,(finishedWork.subtreeFlags&8772)!=0):recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),offscreenSubtreeIsHidden=prevProps,offscreenSubtreeWasHidden=prevOffscreenSubtreeWasHidden}break;case 30:break;default:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork)}}function detachFiberAfterEffects(fiber){var alternate=fiber.alternate;alternate!==null&&(fiber.alternate=null,detachFiberAfterEffects(alternate)),fiber.child=null,fiber.deletions=null,fiber.sibling=null,fiber.tag===5&&(alternate=fiber.stateNode,alternate!==null&&detachDeletedInstance(alternate)),fiber.stateNode=null,fiber.return=null,fiber.dependencies=null,fiber.memoizedProps=null,fiber.memoizedState=null,fiber.pendingProps=null,fiber.stateNode=null,fiber.updateQueue=null}var hostParent=null,hostParentIsContainer=!1;function recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,parent){for(parent=parent.child;parent!==null;)commitDeletionEffectsOnFiber(finishedRoot,nearestMountedAncestor,parent),parent=parent.sibling}function commitDeletionEffectsOnFiber(finishedRoot,nearestMountedAncestor,deletedFiber){if(injectedHook&&typeof injectedHook.onCommitFiberUnmount==`function`)try{injectedHook.onCommitFiberUnmount(rendererID,deletedFiber)}catch{}switch(deletedFiber.tag){case 26:offscreenSubtreeWasHidden||safelyDetachRef(deletedFiber,nearestMountedAncestor),recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber),deletedFiber.memoizedState?deletedFiber.memoizedState.count--:deletedFiber.stateNode&&(deletedFiber=deletedFiber.stateNode,deletedFiber.parentNode.removeChild(deletedFiber));break;case 27:offscreenSubtreeWasHidden||safelyDetachRef(deletedFiber,nearestMountedAncestor);var prevHostParent=hostParent,prevHostParentIsContainer=hostParentIsContainer;isSingletonScope(deletedFiber.type)&&(hostParent=deletedFiber.stateNode,hostParentIsContainer=!1),recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber),releaseSingletonInstance(deletedFiber.stateNode),hostParent=prevHostParent,hostParentIsContainer=prevHostParentIsContainer;break;case 5:offscreenSubtreeWasHidden||safelyDetachRef(deletedFiber,nearestMountedAncestor);case 6:if(prevHostParent=hostParent,prevHostParentIsContainer=hostParentIsContainer,hostParent=null,recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber),hostParent=prevHostParent,hostParentIsContainer=prevHostParentIsContainer,hostParent!==null)if(hostParentIsContainer)try{(hostParent.nodeType===9?hostParent.body:hostParent.nodeName===`HTML`?hostParent.ownerDocument.body:hostParent).removeChild(deletedFiber.stateNode)}catch(error$1){captureCommitPhaseError(deletedFiber,nearestMountedAncestor,error$1)}else try{hostParent.removeChild(deletedFiber.stateNode)}catch(error$1){captureCommitPhaseError(deletedFiber,nearestMountedAncestor,error$1)}break;case 18:hostParent!==null&&(hostParentIsContainer?(finishedRoot=hostParent,clearHydrationBoundary(finishedRoot.nodeType===9?finishedRoot.body:finishedRoot.nodeName===`HTML`?finishedRoot.ownerDocument.body:finishedRoot,deletedFiber.stateNode),retryIfBlockedOn(finishedRoot)):clearHydrationBoundary(hostParent,deletedFiber.stateNode));break;case 4:prevHostParent=hostParent,prevHostParentIsContainer=hostParentIsContainer,hostParent=deletedFiber.stateNode.containerInfo,hostParentIsContainer=!0,recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber),hostParent=prevHostParent,hostParentIsContainer=prevHostParentIsContainer;break;case 0:case 11:case 14:case 15:commitHookEffectListUnmount(2,deletedFiber,nearestMountedAncestor),offscreenSubtreeWasHidden||commitHookEffectListUnmount(4,deletedFiber,nearestMountedAncestor),recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber);break;case 1:offscreenSubtreeWasHidden||(safelyDetachRef(deletedFiber,nearestMountedAncestor),prevHostParent=deletedFiber.stateNode,typeof prevHostParent.componentWillUnmount==`function`&&safelyCallComponentWillUnmount(deletedFiber,nearestMountedAncestor,prevHostParent)),recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber);break;case 21:recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber);break;case 22:offscreenSubtreeWasHidden=(prevHostParent=offscreenSubtreeWasHidden)||deletedFiber.memoizedState!==null,recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber),offscreenSubtreeWasHidden=prevHostParent;break;default:recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber)}}function commitActivityHydrationCallbacks(finishedRoot,finishedWork){if(finishedWork.memoizedState===null&&(finishedRoot=finishedWork.alternate,finishedRoot!==null&&(finishedRoot=finishedRoot.memoizedState,finishedRoot!==null))){finishedRoot=finishedRoot.dehydrated;try{retryIfBlockedOn(finishedRoot)}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}}function commitSuspenseHydrationCallbacks(finishedRoot,finishedWork){if(finishedWork.memoizedState===null&&(finishedRoot=finishedWork.alternate,finishedRoot!==null&&(finishedRoot=finishedRoot.memoizedState,finishedRoot!==null&&(finishedRoot=finishedRoot.dehydrated,finishedRoot!==null))))try{retryIfBlockedOn(finishedRoot)}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}function getRetryCache(finishedWork){switch(finishedWork.tag){case 31:case 13:case 19:var retryCache=finishedWork.stateNode;return retryCache===null&&(retryCache=finishedWork.stateNode=new PossiblyWeakSet),retryCache;case 22:return finishedWork=finishedWork.stateNode,retryCache=finishedWork._retryCache,retryCache===null&&(retryCache=finishedWork._retryCache=new PossiblyWeakSet),retryCache;default:throw Error(formatProdErrorMessage$2(435,finishedWork.tag))}}function attachSuspenseRetryListeners(finishedWork,wakeables){var retryCache=getRetryCache(finishedWork);wakeables.forEach(function(wakeable){if(!retryCache.has(wakeable)){retryCache.add(wakeable);var retry=resolveRetryWakeable.bind(null,finishedWork,wakeable);wakeable.then(retry,retry)}})}function recursivelyTraverseMutationEffects(root$jscomp$0,parentFiber){var deletions=parentFiber.deletions;if(deletions!==null)for(var i$4=0;i$4<deletions.length;i$4++){var childToDelete=deletions[i$4],root$3=root$jscomp$0,returnFiber=parentFiber,parent=returnFiber;a:for(;parent!==null;){switch(parent.tag){case 27:if(isSingletonScope(parent.type)){hostParent=parent.stateNode,hostParentIsContainer=!1;break a}break;case 5:hostParent=parent.stateNode,hostParentIsContainer=!1;break a;case 3:case 4:hostParent=parent.stateNode.containerInfo,hostParentIsContainer=!0;break a}parent=parent.return}if(hostParent===null)throw Error(formatProdErrorMessage$2(160));commitDeletionEffectsOnFiber(root$3,returnFiber,childToDelete),hostParent=null,hostParentIsContainer=!1,root$3=childToDelete.alternate,root$3!==null&&(root$3.return=null),childToDelete.return=null}if(parentFiber.subtreeFlags&13886)for(parentFiber=parentFiber.child;parentFiber!==null;)commitMutationEffectsOnFiber(parentFiber,root$jscomp$0),parentFiber=parentFiber.sibling}var currentHoistableRoot=null;function commitMutationEffectsOnFiber(finishedWork,root$3){var current=finishedWork.alternate,flags=finishedWork.flags;switch(finishedWork.tag){case 0:case 11:case 14:case 15:recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork),flags&4&&(commitHookEffectListUnmount(3,finishedWork,finishedWork.return),commitHookEffectListMount(3,finishedWork),commitHookEffectListUnmount(5,finishedWork,finishedWork.return));break;case 1:recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork),flags&512&&(offscreenSubtreeWasHidden||current===null||safelyDetachRef(current,current.return)),flags&64&&offscreenSubtreeIsHidden&&(finishedWork=finishedWork.updateQueue,finishedWork!==null&&(flags=finishedWork.callbacks,flags!==null&&(current=finishedWork.shared.hiddenCallbacks,finishedWork.shared.hiddenCallbacks=current===null?flags:current.concat(flags))));break;case 26:var hoistableRoot=currentHoistableRoot;if(recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork),flags&512&&(offscreenSubtreeWasHidden||current===null||safelyDetachRef(current,current.return)),flags&4){var currentResource=current===null?null:current.memoizedState;if(flags=finishedWork.memoizedState,current===null)if(flags===null)if(finishedWork.stateNode===null){a:{flags=finishedWork.type,current=finishedWork.memoizedProps,hoistableRoot=hoistableRoot.ownerDocument||hoistableRoot;b:switch(flags){case`title`:currentResource=hoistableRoot.getElementsByTagName(`title`)[0],(!currentResource||currentResource[internalHoistableMarker]||currentResource[internalInstanceKey]||currentResource.namespaceURI===`http://www.w3.org/2000/svg`||currentResource.hasAttribute(`itemprop`))&&(currentResource=hoistableRoot.createElement(flags),hoistableRoot.head.insertBefore(currentResource,hoistableRoot.querySelector(`head > title`))),setInitialProperties(currentResource,flags,current),currentResource[internalInstanceKey]=finishedWork,markNodeAsHoistable(currentResource),flags=currentResource;break a;case`link`:var maybeNodes=getHydratableHoistableCache(`link`,`href`,hoistableRoot).get(flags+(current.href||``));if(maybeNodes){for(var i$4=0;i$4<maybeNodes.length;i$4++)if(currentResource=maybeNodes[i$4],currentResource.getAttribute(`href`)===(current.href==null||current.href===``?null:current.href)&&currentResource.getAttribute(`rel`)===(current.rel==null?null:current.rel)&&currentResource.getAttribute(`title`)===(current.title==null?null:current.title)&&currentResource.getAttribute(`crossorigin`)===(current.crossOrigin==null?null:current.crossOrigin)){maybeNodes.splice(i$4,1);break b}}currentResource=hoistableRoot.createElement(flags),setInitialProperties(currentResource,flags,current),hoistableRoot.head.appendChild(currentResource);break;case`meta`:if(maybeNodes=getHydratableHoistableCache(`meta`,`content`,hoistableRoot).get(flags+(current.content||``))){for(i$4=0;i$4<maybeNodes.length;i$4++)if(currentResource=maybeNodes[i$4],currentResource.getAttribute(`content`)===(current.content==null?null:``+current.content)&&currentResource.getAttribute(`name`)===(current.name==null?null:current.name)&&currentResource.getAttribute(`property`)===(current.property==null?null:current.property)&&currentResource.getAttribute(`http-equiv`)===(current.httpEquiv==null?null:current.httpEquiv)&&currentResource.getAttribute(`charset`)===(current.charSet==null?null:current.charSet)){maybeNodes.splice(i$4,1);break b}}currentResource=hoistableRoot.createElement(flags),setInitialProperties(currentResource,flags,current),hoistableRoot.head.appendChild(currentResource);break;default:throw Error(formatProdErrorMessage$2(468,flags))}currentResource[internalInstanceKey]=finishedWork,markNodeAsHoistable(currentResource),flags=currentResource}finishedWork.stateNode=flags}else mountHoistable(hoistableRoot,finishedWork.type,finishedWork.stateNode);else finishedWork.stateNode=acquireResource(hoistableRoot,flags,finishedWork.memoizedProps);else currentResource===flags?flags===null&&finishedWork.stateNode!==null&&commitHostUpdate(finishedWork,finishedWork.memoizedProps,current.memoizedProps):(currentResource===null?current.stateNode!==null&&(current=current.stateNode,current.parentNode.removeChild(current)):currentResource.count--,flags===null?mountHoistable(hoistableRoot,finishedWork.type,finishedWork.stateNode):acquireResource(hoistableRoot,flags,finishedWork.memoizedProps))}break;case 27:recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork),flags&512&&(offscreenSubtreeWasHidden||current===null||safelyDetachRef(current,current.return)),current!==null&&flags&4&&commitHostUpdate(finishedWork,finishedWork.memoizedProps,current.memoizedProps);break;case 5:if(recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork),flags&512&&(offscreenSubtreeWasHidden||current===null||safelyDetachRef(current,current.return)),finishedWork.flags&32){hoistableRoot=finishedWork.stateNode;try{setTextContent(hoistableRoot,``)}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}flags&4&&finishedWork.stateNode!=null&&(hoistableRoot=finishedWork.memoizedProps,commitHostUpdate(finishedWork,hoistableRoot,current===null?hoistableRoot:current.memoizedProps)),flags&1024&&(needsFormReset=!0);break;case 6:if(recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork),flags&4){if(finishedWork.stateNode===null)throw Error(formatProdErrorMessage$2(162));flags=finishedWork.memoizedProps,current=finishedWork.stateNode;try{current.nodeValue=flags}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}break;case 3:if(tagCaches=null,hoistableRoot=currentHoistableRoot,currentHoistableRoot=getHoistableRoot(root$3.containerInfo),recursivelyTraverseMutationEffects(root$3,finishedWork),currentHoistableRoot=hoistableRoot,commitReconciliationEffects(finishedWork),flags&4&&current!==null&&current.memoizedState.isDehydrated)try{retryIfBlockedOn(root$3.containerInfo)}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}needsFormReset&&(needsFormReset=!1,recursivelyResetForms(finishedWork));break;case 4:flags=currentHoistableRoot,currentHoistableRoot=getHoistableRoot(finishedWork.stateNode.containerInfo),recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork),currentHoistableRoot=flags;break;case 12:recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork);break;case 31:recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork),flags&4&&(flags=finishedWork.updateQueue,flags!==null&&(finishedWork.updateQueue=null,attachSuspenseRetryListeners(finishedWork,flags)));break;case 13:recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork),finishedWork.child.flags&8192&&finishedWork.memoizedState!==null!=(current!==null&&current.memoizedState!==null)&&(globalMostRecentFallbackTime=now$3()),flags&4&&(flags=finishedWork.updateQueue,flags!==null&&(finishedWork.updateQueue=null,attachSuspenseRetryListeners(finishedWork,flags)));break;case 22:hoistableRoot=finishedWork.memoizedState!==null;var wasHidden=current!==null&&current.memoizedState!==null,prevOffscreenSubtreeIsHidden=offscreenSubtreeIsHidden,prevOffscreenSubtreeWasHidden=offscreenSubtreeWasHidden;if(offscreenSubtreeIsHidden=prevOffscreenSubtreeIsHidden||hoistableRoot,offscreenSubtreeWasHidden=prevOffscreenSubtreeWasHidden||wasHidden,recursivelyTraverseMutationEffects(root$3,finishedWork),offscreenSubtreeWasHidden=prevOffscreenSubtreeWasHidden,offscreenSubtreeIsHidden=prevOffscreenSubtreeIsHidden,commitReconciliationEffects(finishedWork),flags&8192)a:for(root$3=finishedWork.stateNode,root$3._visibility=hoistableRoot?root$3._visibility&-2:root$3._visibility|1,hoistableRoot&&(current===null||wasHidden||offscreenSubtreeIsHidden||offscreenSubtreeWasHidden||recursivelyTraverseDisappearLayoutEffects(finishedWork)),current=null,root$3=finishedWork;;){if(root$3.tag===5||root$3.tag===26){if(current===null){wasHidden=current=root$3;try{if(currentResource=wasHidden.stateNode,hoistableRoot)maybeNodes=currentResource.style,typeof maybeNodes.setProperty==`function`?maybeNodes.setProperty(`display`,`none`,`important`):maybeNodes.display=`none`;else{i$4=wasHidden.stateNode;var styleProp=wasHidden.memoizedProps.style,display=styleProp!=null&&styleProp.hasOwnProperty(`display`)?styleProp.display:null;i$4.style.display=display==null||typeof display==`boolean`?``:(``+display).trim()}}catch(error$1){captureCommitPhaseError(wasHidden,wasHidden.return,error$1)}}}else if(root$3.tag===6){if(current===null){wasHidden=root$3;try{wasHidden.stateNode.nodeValue=hoistableRoot?``:wasHidden.memoizedProps}catch(error$1){captureCommitPhaseError(wasHidden,wasHidden.return,error$1)}}}else if(root$3.tag===18){if(current===null){wasHidden=root$3;try{var instance=wasHidden.stateNode;hoistableRoot?hideOrUnhideDehydratedBoundary(instance,!0):hideOrUnhideDehydratedBoundary(wasHidden.stateNode,!1)}catch(error$1){captureCommitPhaseError(wasHidden,wasHidden.return,error$1)}}}else if((root$3.tag!==22&&root$3.tag!==23||root$3.memoizedState===null||root$3===finishedWork)&&root$3.child!==null){root$3.child.return=root$3,root$3=root$3.child;continue}if(root$3===finishedWork)break a;for(;root$3.sibling===null;){if(root$3.return===null||root$3.return===finishedWork)break a;current===root$3&&(current=null),root$3=root$3.return}current===root$3&&(current=null),root$3.sibling.return=root$3.return,root$3=root$3.sibling}flags&4&&(flags=finishedWork.updateQueue,flags!==null&&(current=flags.retryQueue,current!==null&&(flags.retryQueue=null,attachSuspenseRetryListeners(finishedWork,current))));break;case 19:recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork),flags&4&&(flags=finishedWork.updateQueue,flags!==null&&(finishedWork.updateQueue=null,attachSuspenseRetryListeners(finishedWork,flags)));break;case 30:break;case 21:break;default:recursivelyTraverseMutationEffects(root$3,finishedWork),commitReconciliationEffects(finishedWork)}}function commitReconciliationEffects(finishedWork){var flags=finishedWork.flags;if(flags&2){try{for(var hostParentFiber,parentFiber=finishedWork.return;parentFiber!==null;){if(isHostParent(parentFiber)){hostParentFiber=parentFiber;break}parentFiber=parentFiber.return}if(hostParentFiber==null)throw Error(formatProdErrorMessage$2(160));switch(hostParentFiber.tag){case 27:var parent=hostParentFiber.stateNode;insertOrAppendPlacementNode(finishedWork,getHostSibling(finishedWork),parent);break;case 5:var parent$141=hostParentFiber.stateNode;hostParentFiber.flags&32&&(setTextContent(parent$141,``),hostParentFiber.flags&=-33),insertOrAppendPlacementNode(finishedWork,getHostSibling(finishedWork),parent$141);break;case 3:case 4:var parent$143=hostParentFiber.stateNode.containerInfo;insertOrAppendPlacementNodeIntoContainer(finishedWork,getHostSibling(finishedWork),parent$143);break;default:throw Error(formatProdErrorMessage$2(161))}}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}finishedWork.flags&=-3}flags&4096&&(finishedWork.flags&=-4097)}function recursivelyResetForms(parentFiber){if(parentFiber.subtreeFlags&1024)for(parentFiber=parentFiber.child;parentFiber!==null;){var fiber=parentFiber;recursivelyResetForms(fiber),fiber.tag===5&&fiber.flags&1024&&fiber.stateNode.reset(),parentFiber=parentFiber.sibling}}function recursivelyTraverseLayoutEffects(root$3,parentFiber){if(parentFiber.subtreeFlags&8772)for(parentFiber=parentFiber.child;parentFiber!==null;)commitLayoutEffectOnFiber(root$3,parentFiber.alternate,parentFiber),parentFiber=parentFiber.sibling}function recursivelyTraverseDisappearLayoutEffects(parentFiber){for(parentFiber=parentFiber.child;parentFiber!==null;){var finishedWork=parentFiber;switch(finishedWork.tag){case 0:case 11:case 14:case 15:commitHookEffectListUnmount(4,finishedWork,finishedWork.return),recursivelyTraverseDisappearLayoutEffects(finishedWork);break;case 1:safelyDetachRef(finishedWork,finishedWork.return);var instance=finishedWork.stateNode;typeof instance.componentWillUnmount==`function`&&safelyCallComponentWillUnmount(finishedWork,finishedWork.return,instance),recursivelyTraverseDisappearLayoutEffects(finishedWork);break;case 27:releaseSingletonInstance(finishedWork.stateNode);case 26:case 5:safelyDetachRef(finishedWork,finishedWork.return),recursivelyTraverseDisappearLayoutEffects(finishedWork);break;case 22:finishedWork.memoizedState===null&&recursivelyTraverseDisappearLayoutEffects(finishedWork);break;case 30:recursivelyTraverseDisappearLayoutEffects(finishedWork);break;default:recursivelyTraverseDisappearLayoutEffects(finishedWork)}parentFiber=parentFiber.sibling}}function recursivelyTraverseReappearLayoutEffects(finishedRoot$jscomp$0,parentFiber,includeWorkInProgressEffects){for(includeWorkInProgressEffects&&=(parentFiber.subtreeFlags&8772)!=0,parentFiber=parentFiber.child;parentFiber!==null;){var current=parentFiber.alternate,finishedRoot=finishedRoot$jscomp$0,finishedWork=parentFiber,flags=finishedWork.flags;switch(finishedWork.tag){case 0:case 11:case 15:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),commitHookEffectListMount(4,finishedWork);break;case 1:if(recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),current=finishedWork,finishedRoot=current.stateNode,typeof finishedRoot.componentDidMount==`function`)try{finishedRoot.componentDidMount()}catch(error$1){captureCommitPhaseError(current,current.return,error$1)}if(current=finishedWork,finishedRoot=current.updateQueue,finishedRoot!==null){var instance=current.stateNode;try{var hiddenCallbacks=finishedRoot.shared.hiddenCallbacks;if(hiddenCallbacks!==null)for(finishedRoot.shared.hiddenCallbacks=null,finishedRoot=0;finishedRoot<hiddenCallbacks.length;finishedRoot++)callCallback(hiddenCallbacks[finishedRoot],instance)}catch(error$1){captureCommitPhaseError(current,current.return,error$1)}}includeWorkInProgressEffects&&flags&64&&commitClassCallbacks(finishedWork),safelyAttachRef(finishedWork,finishedWork.return);break;case 27:commitHostSingletonAcquisition(finishedWork);case 26:case 5:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),includeWorkInProgressEffects&&current===null&&flags&4&&commitHostMount(finishedWork),safelyAttachRef(finishedWork,finishedWork.return);break;case 12:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects);break;case 31:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),includeWorkInProgressEffects&&flags&4&&commitActivityHydrationCallbacks(finishedRoot,finishedWork);break;case 13:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),includeWorkInProgressEffects&&flags&4&&commitSuspenseHydrationCallbacks(finishedRoot,finishedWork);break;case 22:finishedWork.memoizedState===null&&recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),safelyAttachRef(finishedWork,finishedWork.return);break;case 30:break;default:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects)}parentFiber=parentFiber.sibling}}function commitOffscreenPassiveMountEffects(current,finishedWork){var previousCache=null;current!==null&&current.memoizedState!==null&&current.memoizedState.cachePool!==null&&(previousCache=current.memoizedState.cachePool.pool),current=null,finishedWork.memoizedState!==null&&finishedWork.memoizedState.cachePool!==null&&(current=finishedWork.memoizedState.cachePool.pool),current!==previousCache&&(current!=null&&current.refCount++,previousCache!=null&&releaseCache(previousCache))}function commitCachePassiveMountEffect(current,finishedWork){current=null,finishedWork.alternate!==null&&(current=finishedWork.alternate.memoizedState.cache),finishedWork=finishedWork.memoizedState.cache,finishedWork!==current&&(finishedWork.refCount++,current!=null&&releaseCache(current))}function recursivelyTraversePassiveMountEffects(root$3,parentFiber,committedLanes,committedTransitions){if(parentFiber.subtreeFlags&10256)for(parentFiber=parentFiber.child;parentFiber!==null;)commitPassiveMountOnFiber(root$3,parentFiber,committedLanes,committedTransitions),parentFiber=parentFiber.sibling}function commitPassiveMountOnFiber(finishedRoot,finishedWork,committedLanes,committedTransitions){var flags=finishedWork.flags;switch(finishedWork.tag){case 0:case 11:case 15:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions),flags&2048&&commitHookEffectListMount(9,finishedWork);break;case 1:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions);break;case 3:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions),flags&2048&&(finishedRoot=null,finishedWork.alternate!==null&&(finishedRoot=finishedWork.alternate.memoizedState.cache),finishedWork=finishedWork.memoizedState.cache,finishedWork!==finishedRoot&&(finishedWork.refCount++,finishedRoot!=null&&releaseCache(finishedRoot)));break;case 12:if(flags&2048){recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions),finishedRoot=finishedWork.stateNode;try{var _finishedWork$memoize2=finishedWork.memoizedProps,id$3=_finishedWork$memoize2.id,onPostCommit=_finishedWork$memoize2.onPostCommit;typeof onPostCommit==`function`&&onPostCommit(id$3,finishedWork.alternate===null?`mount`:`update`,finishedRoot.passiveEffectDuration,-0)}catch(error$1){captureCommitPhaseError(finishedWork,finishedWork.return,error$1)}}else recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions);break;case 31:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions);break;case 13:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions);break;case 23:break;case 22:_finishedWork$memoize2=finishedWork.stateNode,id$3=finishedWork.alternate,finishedWork.memoizedState===null?_finishedWork$memoize2._visibility&2?recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions):(_finishedWork$memoize2._visibility|=2,recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,(finishedWork.subtreeFlags&10256)!=0||!1)):_finishedWork$memoize2._visibility&2?recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions):recursivelyTraverseAtomicPassiveEffects(finishedRoot,finishedWork),flags&2048&&commitOffscreenPassiveMountEffects(id$3,finishedWork);break;case 24:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions),flags&2048&&commitCachePassiveMountEffect(finishedWork.alternate,finishedWork);break;default:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions)}}function recursivelyTraverseReconnectPassiveEffects(finishedRoot$jscomp$0,parentFiber,committedLanes$jscomp$0,committedTransitions$jscomp$0,includeWorkInProgressEffects){for(includeWorkInProgressEffects&&=(parentFiber.subtreeFlags&10256)!=0||!1,parentFiber=parentFiber.child;parentFiber!==null;){var finishedRoot=finishedRoot$jscomp$0,finishedWork=parentFiber,committedLanes=committedLanes$jscomp$0,committedTransitions=committedTransitions$jscomp$0,flags=finishedWork.flags;switch(finishedWork.tag){case 0:case 11:case 15:recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,includeWorkInProgressEffects),commitHookEffectListMount(8,finishedWork);break;case 23:break;case 22:var instance=finishedWork.stateNode;finishedWork.memoizedState===null?(instance._visibility|=2,recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,includeWorkInProgressEffects)):instance._visibility&2?recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,includeWorkInProgressEffects):recursivelyTraverseAtomicPassiveEffects(finishedRoot,finishedWork),includeWorkInProgressEffects&&flags&2048&&commitOffscreenPassiveMountEffects(finishedWork.alternate,finishedWork);break;case 24:recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,includeWorkInProgressEffects),includeWorkInProgressEffects&&flags&2048&&commitCachePassiveMountEffect(finishedWork.alternate,finishedWork);break;default:recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,includeWorkInProgressEffects)}parentFiber=parentFiber.sibling}}function recursivelyTraverseAtomicPassiveEffects(finishedRoot$jscomp$0,parentFiber){if(parentFiber.subtreeFlags&10256)for(parentFiber=parentFiber.child;parentFiber!==null;){var finishedRoot=finishedRoot$jscomp$0,finishedWork=parentFiber,flags=finishedWork.flags;switch(finishedWork.tag){case 22:recursivelyTraverseAtomicPassiveEffects(finishedRoot,finishedWork),flags&2048&&commitOffscreenPassiveMountEffects(finishedWork.alternate,finishedWork);break;case 24:recursivelyTraverseAtomicPassiveEffects(finishedRoot,finishedWork),flags&2048&&commitCachePassiveMountEffect(finishedWork.alternate,finishedWork);break;default:recursivelyTraverseAtomicPassiveEffects(finishedRoot,finishedWork)}parentFiber=parentFiber.sibling}}var suspenseyCommitFlag=8192;function recursivelyAccumulateSuspenseyCommit(parentFiber,committedLanes,suspendedState){if(parentFiber.subtreeFlags&suspenseyCommitFlag)for(parentFiber=parentFiber.child;parentFiber!==null;)accumulateSuspenseyCommitOnFiber(parentFiber,committedLanes,suspendedState),parentFiber=parentFiber.sibling}function accumulateSuspenseyCommitOnFiber(fiber,committedLanes,suspendedState){switch(fiber.tag){case 26:recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState),fiber.flags&suspenseyCommitFlag&&fiber.memoizedState!==null&&suspendResource(suspendedState,currentHoistableRoot,fiber.memoizedState,fiber.memoizedProps);break;case 5:recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState);break;case 3:case 4:var previousHoistableRoot=currentHoistableRoot;currentHoistableRoot=getHoistableRoot(fiber.stateNode.containerInfo),recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState),currentHoistableRoot=previousHoistableRoot;break;case 22:fiber.memoizedState===null&&(previousHoistableRoot=fiber.alternate,previousHoistableRoot!==null&&previousHoistableRoot.memoizedState!==null?(previousHoistableRoot=suspenseyCommitFlag,suspenseyCommitFlag=16777216,recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState),suspenseyCommitFlag=previousHoistableRoot):recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState));break;default:recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState)}}function detachAlternateSiblings(parentFiber){var previousFiber=parentFiber.alternate;if(previousFiber!==null&&(parentFiber=previousFiber.child,parentFiber!==null)){previousFiber.child=null;do previousFiber=parentFiber.sibling,parentFiber.sibling=null,parentFiber=previousFiber;while(parentFiber!==null)}}function recursivelyTraversePassiveUnmountEffects(parentFiber){var deletions=parentFiber.deletions;if(parentFiber.flags&16){if(deletions!==null)for(var i$4=0;i$4<deletions.length;i$4++){var childToDelete=deletions[i$4];nextEffect=childToDelete,commitPassiveUnmountEffectsInsideOfDeletedTree_begin(childToDelete,parentFiber)}detachAlternateSiblings(parentFiber)}if(parentFiber.subtreeFlags&10256)for(parentFiber=parentFiber.child;parentFiber!==null;)commitPassiveUnmountOnFiber(parentFiber),parentFiber=parentFiber.sibling}function commitPassiveUnmountOnFiber(finishedWork){switch(finishedWork.tag){case 0:case 11:case 15:recursivelyTraversePassiveUnmountEffects(finishedWork),finishedWork.flags&2048&&commitHookEffectListUnmount(9,finishedWork,finishedWork.return);break;case 3:recursivelyTraversePassiveUnmountEffects(finishedWork);break;case 12:recursivelyTraversePassiveUnmountEffects(finishedWork);break;case 22:var instance=finishedWork.stateNode;finishedWork.memoizedState!==null&&instance._visibility&2&&(finishedWork.return===null||finishedWork.return.tag!==13)?(instance._visibility&=-3,recursivelyTraverseDisconnectPassiveEffects(finishedWork)):recursivelyTraversePassiveUnmountEffects(finishedWork);break;default:recursivelyTraversePassiveUnmountEffects(finishedWork)}}function recursivelyTraverseDisconnectPassiveEffects(parentFiber){var deletions=parentFiber.deletions;if(parentFiber.flags&16){if(deletions!==null)for(var i$4=0;i$4<deletions.length;i$4++){var childToDelete=deletions[i$4];nextEffect=childToDelete,commitPassiveUnmountEffectsInsideOfDeletedTree_begin(childToDelete,parentFiber)}detachAlternateSiblings(parentFiber)}for(parentFiber=parentFiber.child;parentFiber!==null;){switch(deletions=parentFiber,deletions.tag){case 0:case 11:case 15:commitHookEffectListUnmount(8,deletions,deletions.return),recursivelyTraverseDisconnectPassiveEffects(deletions);break;case 22:i$4=deletions.stateNode,i$4._visibility&2&&(i$4._visibility&=-3,recursivelyTraverseDisconnectPassiveEffects(deletions));break;default:recursivelyTraverseDisconnectPassiveEffects(deletions)}parentFiber=parentFiber.sibling}}function commitPassiveUnmountEffectsInsideOfDeletedTree_begin(deletedSubtreeRoot,nearestMountedAncestor){for(;nextEffect!==null;){var fiber=nextEffect;switch(fiber.tag){case 0:case 11:case 15:commitHookEffectListUnmount(8,fiber,nearestMountedAncestor);break;case 23:case 22:if(fiber.memoizedState!==null&&fiber.memoizedState.cachePool!==null){var cache=fiber.memoizedState.cachePool.pool;cache!=null&&cache.refCount++}break;case 24:releaseCache(fiber.memoizedState.cache)}if(cache=fiber.child,cache!==null)cache.return=fiber,nextEffect=cache;else a:for(fiber=deletedSubtreeRoot;nextEffect!==null;){cache=nextEffect;var sibling=cache.sibling,returnFiber=cache.return;if(detachFiberAfterEffects(cache),cache===fiber){nextEffect=null;break a}if(sibling!==null){sibling.return=returnFiber,nextEffect=sibling;break a}nextEffect=returnFiber}}}var DefaultAsyncDispatcher={getCacheForType:function(resourceType){var cache=readContext(CacheContext),cacheForType=cache.data.get(resourceType);return cacheForType===void 0&&(cacheForType=resourceType(),cache.data.set(resourceType,cacheForType)),cacheForType},cacheSignal:function(){return readContext(CacheContext).controller.signal}},PossiblyWeakMap=typeof WeakMap==`function`?WeakMap:Map,executionContext=0,workInProgressRoot=null,workInProgress=null,workInProgressRootRenderLanes=0,workInProgressSuspendedReason=0,workInProgressThrownValue=null,workInProgressRootDidSkipSuspendedSiblings=!1,workInProgressRootIsPrerendering=!1,workInProgressRootDidAttachPingListener=!1,entangledRenderLanes=0,workInProgressRootExitStatus=0,workInProgressRootSkippedLanes=0,workInProgressRootInterleavedUpdatedLanes=0,workInProgressRootPingedLanes=0,workInProgressDeferredLane=0,workInProgressSuspendedRetryLanes=0,workInProgressRootConcurrentErrors=null,workInProgressRootRecoverableErrors=null,workInProgressRootDidIncludeRecursiveRenderUpdate=!1,globalMostRecentFallbackTime=0,globalMostRecentTransitionTime=0,workInProgressRootRenderTargetTime=1/0,workInProgressTransitions=null,legacyErrorBoundariesThatAlreadyFailed=null,pendingEffectsStatus=0,pendingEffectsRoot=null,pendingFinishedWork=null,pendingEffectsLanes=0,pendingEffectsRemainingLanes=0,pendingPassiveTransitions=null,pendingRecoverableErrors=null,nestedUpdateCount=0,rootWithNestedUpdates=null;function requestUpdateLane(){return executionContext&2&&workInProgressRootRenderLanes!==0?workInProgressRootRenderLanes&-workInProgressRootRenderLanes:ReactSharedInternals.T===null?resolveUpdatePriority():requestTransitionLane()}function requestDeferredLane(){if(workInProgressDeferredLane===0)if(!(workInProgressRootRenderLanes&536870912)||isHydrating){var lane=nextTransitionDeferredLane;nextTransitionDeferredLane<<=1,!(nextTransitionDeferredLane&3932160)&&(nextTransitionDeferredLane=262144),workInProgressDeferredLane=lane}else workInProgressDeferredLane=536870912;return lane=suspenseHandlerStackCursor.current,lane!==null&&(lane.flags|=32),workInProgressDeferredLane}function scheduleUpdateOnFiber(root$3,fiber,lane){(root$3===workInProgressRoot&&(workInProgressSuspendedReason===2||workInProgressSuspendedReason===9)||root$3.cancelPendingCommit!==null)&&(prepareFreshStack(root$3,0),markRootSuspended(root$3,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)),markRootUpdated$1(root$3,lane),(!(executionContext&2)||root$3!==workInProgressRoot)&&(root$3===workInProgressRoot&&(!(executionContext&2)&&(workInProgressRootInterleavedUpdatedLanes|=lane),workInProgressRootExitStatus===4&&markRootSuspended(root$3,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)),ensureRootIsScheduled(root$3))}function performWorkOnRoot(root$jscomp$0,lanes,forceSync){if(executionContext&6)throw Error(formatProdErrorMessage$2(327));var shouldTimeSlice=!forceSync&&(lanes&127)==0&&(lanes&root$jscomp$0.expiredLanes)===0||checkIfRootIsPrerendering(root$jscomp$0,lanes),exitStatus=shouldTimeSlice?renderRootConcurrent(root$jscomp$0,lanes):renderRootSync(root$jscomp$0,lanes,!0),renderWasConcurrent=shouldTimeSlice;do{if(exitStatus===0){workInProgressRootIsPrerendering&&!shouldTimeSlice&&markRootSuspended(root$jscomp$0,lanes,0,!1);break}else{if(forceSync=root$jscomp$0.current.alternate,renderWasConcurrent&&!isRenderConsistentWithExternalStores(forceSync)){exitStatus=renderRootSync(root$jscomp$0,lanes,!1),renderWasConcurrent=!1;continue}if(exitStatus===2){if(renderWasConcurrent=lanes,root$jscomp$0.errorRecoveryDisabledLanes&renderWasConcurrent)var JSCompiler_inline_result=0;else JSCompiler_inline_result=root$jscomp$0.pendingLanes&-536870913,JSCompiler_inline_result=JSCompiler_inline_result===0?JSCompiler_inline_result&536870912?536870912:0:JSCompiler_inline_result;if(JSCompiler_inline_result!==0){lanes=JSCompiler_inline_result;a:{var root$3=root$jscomp$0;exitStatus=workInProgressRootConcurrentErrors;var wasRootDehydrated=root$3.current.memoizedState.isDehydrated;if(wasRootDehydrated&&(prepareFreshStack(root$3,JSCompiler_inline_result).flags|=256),JSCompiler_inline_result=renderRootSync(root$3,JSCompiler_inline_result,!1),JSCompiler_inline_result!==2){if(workInProgressRootDidAttachPingListener&&!wasRootDehydrated){root$3.errorRecoveryDisabledLanes|=renderWasConcurrent,workInProgressRootInterleavedUpdatedLanes|=renderWasConcurrent,exitStatus=4;break a}renderWasConcurrent=workInProgressRootRecoverableErrors,workInProgressRootRecoverableErrors=exitStatus,renderWasConcurrent!==null&&(workInProgressRootRecoverableErrors===null?workInProgressRootRecoverableErrors=renderWasConcurrent:workInProgressRootRecoverableErrors.push.apply(workInProgressRootRecoverableErrors,renderWasConcurrent))}exitStatus=JSCompiler_inline_result}if(renderWasConcurrent=!1,exitStatus!==2)continue}}if(exitStatus===1){prepareFreshStack(root$jscomp$0,0),markRootSuspended(root$jscomp$0,lanes,0,!0);break}a:{switch(shouldTimeSlice=root$jscomp$0,renderWasConcurrent=exitStatus,renderWasConcurrent){case 0:case 1:throw Error(formatProdErrorMessage$2(345));case 4:if((lanes&4194048)!==lanes)break;case 6:markRootSuspended(shouldTimeSlice,lanes,workInProgressDeferredLane,!workInProgressRootDidSkipSuspendedSiblings);break a;case 2:workInProgressRootRecoverableErrors=null;break;case 3:case 5:break;default:throw Error(formatProdErrorMessage$2(329))}if((lanes&62914560)===lanes&&(exitStatus=globalMostRecentFallbackTime+300-now$3(),10<exitStatus)){if(markRootSuspended(shouldTimeSlice,lanes,workInProgressDeferredLane,!workInProgressRootDidSkipSuspendedSiblings),getNextLanes(shouldTimeSlice,0,!0)!==0)break a;pendingEffectsLanes=lanes,shouldTimeSlice.timeoutHandle=scheduleTimeout(commitRootWhenReady.bind(null,shouldTimeSlice,forceSync,workInProgressRootRecoverableErrors,workInProgressTransitions,workInProgressRootDidIncludeRecursiveRenderUpdate,lanes,workInProgressDeferredLane,workInProgressRootInterleavedUpdatedLanes,workInProgressSuspendedRetryLanes,workInProgressRootDidSkipSuspendedSiblings,renderWasConcurrent,`Throttled`,-0,0),exitStatus);break a}commitRootWhenReady(shouldTimeSlice,forceSync,workInProgressRootRecoverableErrors,workInProgressTransitions,workInProgressRootDidIncludeRecursiveRenderUpdate,lanes,workInProgressDeferredLane,workInProgressRootInterleavedUpdatedLanes,workInProgressSuspendedRetryLanes,workInProgressRootDidSkipSuspendedSiblings,renderWasConcurrent,null,-0,0)}}break}while(1);ensureRootIsScheduled(root$jscomp$0)}function commitRootWhenReady(root$3,finishedWork,recoverableErrors,transitions$1,didIncludeRenderPhaseUpdate,lanes,spawnedLane,updatedLanes,suspendedRetryLanes,didSkipSuspendedSiblings,exitStatus,suspendedCommitReason,completedRenderStartTime,completedRenderEndTime){if(root$3.timeoutHandle=-1,suspendedCommitReason=finishedWork.subtreeFlags,suspendedCommitReason&8192||(suspendedCommitReason&16785408)==16785408){suspendedCommitReason={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:noop$1$7},accumulateSuspenseyCommitOnFiber(finishedWork,lanes,suspendedCommitReason);var timeoutOffset=(lanes&62914560)===lanes?globalMostRecentFallbackTime-now$3():(lanes&4194048)===lanes?globalMostRecentTransitionTime-now$3():0;if(timeoutOffset=waitForCommitToBeReady(suspendedCommitReason,timeoutOffset),timeoutOffset!==null){pendingEffectsLanes=lanes,root$3.cancelPendingCommit=timeoutOffset(commitRoot.bind(null,root$3,finishedWork,lanes,recoverableErrors,transitions$1,didIncludeRenderPhaseUpdate,spawnedLane,updatedLanes,suspendedRetryLanes,exitStatus,suspendedCommitReason,null,completedRenderStartTime,completedRenderEndTime)),markRootSuspended(root$3,lanes,spawnedLane,!didSkipSuspendedSiblings);return}}commitRoot(root$3,finishedWork,lanes,recoverableErrors,transitions$1,didIncludeRenderPhaseUpdate,spawnedLane,updatedLanes,suspendedRetryLanes)}function isRenderConsistentWithExternalStores(finishedWork){for(var node=finishedWork;;){var tag=node.tag;if((tag===0||tag===11||tag===15)&&node.flags&16384&&(tag=node.updateQueue,tag!==null&&(tag=tag.stores,tag!==null)))for(var i$4=0;i$4<tag.length;i$4++){var check=tag[i$4],getSnapshot=check.getSnapshot;check=check.value;try{if(!objectIs$3(getSnapshot(),check))return!1}catch{return!1}}if(tag=node.child,node.subtreeFlags&16384&&tag!==null)tag.return=node,node=tag;else{if(node===finishedWork)break;for(;node.sibling===null;){if(node.return===null||node.return===finishedWork)return!0;node=node.return}node.sibling.return=node.return,node=node.sibling}}return!0}function markRootSuspended(root$3,suspendedLanes,spawnedLane,didAttemptEntireTree){suspendedLanes&=~workInProgressRootPingedLanes,suspendedLanes&=~workInProgressRootInterleavedUpdatedLanes,root$3.suspendedLanes|=suspendedLanes,root$3.pingedLanes&=~suspendedLanes,didAttemptEntireTree&&(root$3.warmLanes|=suspendedLanes),didAttemptEntireTree=root$3.expirationTimes;for(var lanes=suspendedLanes;0<lanes;){var index$6=31-clz32(lanes),lane=1<<index$6;didAttemptEntireTree[index$6]=-1,lanes&=~lane}spawnedLane!==0&&markSpawnedDeferredLane(root$3,spawnedLane,suspendedLanes)}function flushSyncWork$1(){return executionContext&6?!0:(flushSyncWorkAcrossRoots_impl(0,!1),!1)}function resetWorkInProgressStack(){if(workInProgress!==null){if(workInProgressSuspendedReason===0)var interruptedWork=workInProgress.return;else interruptedWork=workInProgress,lastContextDependency=currentlyRenderingFiber$1=null,resetHooksOnUnwind(interruptedWork),thenableState$1=null,thenableIndexCounter$1=0,interruptedWork=workInProgress;for(;interruptedWork!==null;)unwindInterruptedWork(interruptedWork.alternate,interruptedWork),interruptedWork=interruptedWork.return;workInProgress=null}}function prepareFreshStack(root$3,lanes){var timeoutHandle=root$3.timeoutHandle;timeoutHandle!==-1&&(root$3.timeoutHandle=-1,cancelTimeout(timeoutHandle)),timeoutHandle=root$3.cancelPendingCommit,timeoutHandle!==null&&(root$3.cancelPendingCommit=null,timeoutHandle()),pendingEffectsLanes=0,resetWorkInProgressStack(),workInProgressRoot=root$3,workInProgress=timeoutHandle=createWorkInProgress(root$3.current,null),workInProgressRootRenderLanes=lanes,workInProgressSuspendedReason=0,workInProgressThrownValue=null,workInProgressRootDidSkipSuspendedSiblings=!1,workInProgressRootIsPrerendering=checkIfRootIsPrerendering(root$3,lanes),workInProgressRootDidAttachPingListener=!1,workInProgressSuspendedRetryLanes=workInProgressDeferredLane=workInProgressRootPingedLanes=workInProgressRootInterleavedUpdatedLanes=workInProgressRootSkippedLanes=workInProgressRootExitStatus=0,workInProgressRootRecoverableErrors=workInProgressRootConcurrentErrors=null,workInProgressRootDidIncludeRecursiveRenderUpdate=!1,lanes&8&&(lanes|=lanes&32);var allEntangledLanes=root$3.entangledLanes;if(allEntangledLanes!==0)for(root$3=root$3.entanglements,allEntangledLanes&=lanes;0<allEntangledLanes;){var index$4=31-clz32(allEntangledLanes),lane=1<<index$4;lanes|=root$3[index$4],allEntangledLanes&=~lane}return entangledRenderLanes=lanes,finishQueueingConcurrentUpdates(),timeoutHandle}function handleThrow(root$3,thrownValue){currentlyRenderingFiber=null,ReactSharedInternals.H=ContextOnlyDispatcher,thrownValue===SuspenseException||thrownValue===SuspenseActionException?(thrownValue=getSuspendedThenable(),workInProgressSuspendedReason=3):thrownValue===SuspenseyCommitException?(thrownValue=getSuspendedThenable(),workInProgressSuspendedReason=4):workInProgressSuspendedReason=thrownValue===SelectiveHydrationException?8:typeof thrownValue==`object`&&thrownValue&&typeof thrownValue.then==`function`?6:1,workInProgressThrownValue=thrownValue,workInProgress===null&&(workInProgressRootExitStatus=1,logUncaughtError(root$3,createCapturedValueAtFiber(thrownValue,root$3.current)))}function shouldRemainOnPreviousScreen(){var handler=suspenseHandlerStackCursor.current;return handler===null?!0:(workInProgressRootRenderLanes&4194048)===workInProgressRootRenderLanes?shellBoundary===null:(workInProgressRootRenderLanes&62914560)===workInProgressRootRenderLanes||workInProgressRootRenderLanes&536870912?handler===shellBoundary:!1}function pushDispatcher(){var prevDispatcher=ReactSharedInternals.H;return ReactSharedInternals.H=ContextOnlyDispatcher,prevDispatcher===null?ContextOnlyDispatcher:prevDispatcher}function pushAsyncDispatcher(){var prevAsyncDispatcher=ReactSharedInternals.A;return ReactSharedInternals.A=DefaultAsyncDispatcher,prevAsyncDispatcher}function renderDidSuspendDelayIfPossible(){workInProgressRootExitStatus=4,workInProgressRootDidSkipSuspendedSiblings||(workInProgressRootRenderLanes&4194048)!==workInProgressRootRenderLanes&&suspenseHandlerStackCursor.current!==null||(workInProgressRootIsPrerendering=!0),!(workInProgressRootSkippedLanes&134217727)&&!(workInProgressRootInterleavedUpdatedLanes&134217727)||workInProgressRoot===null||markRootSuspended(workInProgressRoot,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)}function renderRootSync(root$3,lanes,shouldYieldForPrerendering){var prevExecutionContext=executionContext;executionContext|=2;var prevDispatcher=pushDispatcher(),prevAsyncDispatcher=pushAsyncDispatcher();(workInProgressRoot!==root$3||workInProgressRootRenderLanes!==lanes)&&(workInProgressTransitions=null,prepareFreshStack(root$3,lanes)),lanes=!1;var exitStatus=workInProgressRootExitStatus;a:do try{if(workInProgressSuspendedReason!==0&&workInProgress!==null){var unitOfWork=workInProgress,thrownValue=workInProgressThrownValue;switch(workInProgressSuspendedReason){case 8:resetWorkInProgressStack(),exitStatus=6;break a;case 3:case 2:case 9:case 6:suspenseHandlerStackCursor.current===null&&(lanes=!0);var reason=workInProgressSuspendedReason;if(workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$3,unitOfWork,thrownValue,reason),shouldYieldForPrerendering&&workInProgressRootIsPrerendering){exitStatus=0;break a}break;default:reason=workInProgressSuspendedReason,workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$3,unitOfWork,thrownValue,reason)}}workLoopSync(),exitStatus=workInProgressRootExitStatus;break}catch(thrownValue$165){handleThrow(root$3,thrownValue$165)}while(1);return lanes&&root$3.shellSuspendCounter++,lastContextDependency=currentlyRenderingFiber$1=null,executionContext=prevExecutionContext,ReactSharedInternals.H=prevDispatcher,ReactSharedInternals.A=prevAsyncDispatcher,workInProgress===null&&(workInProgressRoot=null,workInProgressRootRenderLanes=0,finishQueueingConcurrentUpdates()),exitStatus}function workLoopSync(){for(;workInProgress!==null;)performUnitOfWork(workInProgress)}function renderRootConcurrent(root$3,lanes){var prevExecutionContext=executionContext;executionContext|=2;var prevDispatcher=pushDispatcher(),prevAsyncDispatcher=pushAsyncDispatcher();workInProgressRoot!==root$3||workInProgressRootRenderLanes!==lanes?(workInProgressTransitions=null,workInProgressRootRenderTargetTime=now$3()+500,prepareFreshStack(root$3,lanes)):workInProgressRootIsPrerendering=checkIfRootIsPrerendering(root$3,lanes);a:do try{if(workInProgressSuspendedReason!==0&&workInProgress!==null){lanes=workInProgress;var thrownValue=workInProgressThrownValue;b:switch(workInProgressSuspendedReason){case 1:workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$3,lanes,thrownValue,1);break;case 2:case 9:if(isThenableResolved(thrownValue)){workInProgressSuspendedReason=0,workInProgressThrownValue=null,replaySuspendedUnitOfWork(lanes);break}lanes=function(){workInProgressSuspendedReason!==2&&workInProgressSuspendedReason!==9||workInProgressRoot!==root$3||(workInProgressSuspendedReason=7),ensureRootIsScheduled(root$3)},thrownValue.then(lanes,lanes);break a;case 3:workInProgressSuspendedReason=7;break a;case 4:workInProgressSuspendedReason=5;break a;case 7:isThenableResolved(thrownValue)?(workInProgressSuspendedReason=0,workInProgressThrownValue=null,replaySuspendedUnitOfWork(lanes)):(workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$3,lanes,thrownValue,7));break;case 5:var resource=null;switch(workInProgress.tag){case 26:resource=workInProgress.memoizedState;case 5:case 27:var hostFiber=workInProgress;if(resource?preloadResource(resource):hostFiber.stateNode.complete){workInProgressSuspendedReason=0,workInProgressThrownValue=null;var sibling=hostFiber.sibling;if(sibling!==null)workInProgress=sibling;else{var returnFiber=hostFiber.return;returnFiber===null?workInProgress=null:(workInProgress=returnFiber,completeUnitOfWork(returnFiber))}break b}}workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$3,lanes,thrownValue,5);break;case 6:workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$3,lanes,thrownValue,6);break;case 8:resetWorkInProgressStack(),workInProgressRootExitStatus=6;break a;default:throw Error(formatProdErrorMessage$2(462))}}workLoopConcurrentByScheduler();break}catch(thrownValue$167){handleThrow(root$3,thrownValue$167)}while(1);return lastContextDependency=currentlyRenderingFiber$1=null,ReactSharedInternals.H=prevDispatcher,ReactSharedInternals.A=prevAsyncDispatcher,executionContext=prevExecutionContext,workInProgress===null?(workInProgressRoot=null,workInProgressRootRenderLanes=0,finishQueueingConcurrentUpdates(),workInProgressRootExitStatus):0}function workLoopConcurrentByScheduler(){for(;workInProgress!==null&&!shouldYield();)performUnitOfWork(workInProgress)}function performUnitOfWork(unitOfWork){var next=beginWork(unitOfWork.alternate,unitOfWork,entangledRenderLanes);unitOfWork.memoizedProps=unitOfWork.pendingProps,next===null?completeUnitOfWork(unitOfWork):workInProgress=next}function replaySuspendedUnitOfWork(unitOfWork){var next=unitOfWork,current=next.alternate;switch(next.tag){case 15:case 0:next=replayFunctionComponent(current,next,next.pendingProps,next.type,void 0,workInProgressRootRenderLanes);break;case 11:next=replayFunctionComponent(current,next,next.pendingProps,next.type.render,next.ref,workInProgressRootRenderLanes);break;case 5:resetHooksOnUnwind(next);default:unwindInterruptedWork(current,next),next=workInProgress=resetWorkInProgress(next,entangledRenderLanes),next=beginWork(current,next,entangledRenderLanes)}unitOfWork.memoizedProps=unitOfWork.pendingProps,next===null?completeUnitOfWork(unitOfWork):workInProgress=next}function throwAndUnwindWorkLoop(root$3,unitOfWork,thrownValue,suspendedReason){lastContextDependency=currentlyRenderingFiber$1=null,resetHooksOnUnwind(unitOfWork),thenableState$1=null,thenableIndexCounter$1=0;var returnFiber=unitOfWork.return;try{if(throwException(root$3,returnFiber,unitOfWork,thrownValue,workInProgressRootRenderLanes)){workInProgressRootExitStatus=1,logUncaughtError(root$3,createCapturedValueAtFiber(thrownValue,root$3.current)),workInProgress=null;return}}catch(error$1){if(returnFiber!==null)throw workInProgress=returnFiber,error$1;workInProgressRootExitStatus=1,logUncaughtError(root$3,createCapturedValueAtFiber(thrownValue,root$3.current)),workInProgress=null;return}unitOfWork.flags&32768?(isHydrating||suspendedReason===1?root$3=!0:workInProgressRootIsPrerendering||workInProgressRootRenderLanes&536870912?root$3=!1:(workInProgressRootDidSkipSuspendedSiblings=root$3=!0,(suspendedReason===2||suspendedReason===9||suspendedReason===3||suspendedReason===6)&&(suspendedReason=suspenseHandlerStackCursor.current,suspendedReason!==null&&suspendedReason.tag===13&&(suspendedReason.flags|=16384))),unwindUnitOfWork(unitOfWork,root$3)):completeUnitOfWork(unitOfWork)}function completeUnitOfWork(unitOfWork){var completedWork=unitOfWork;do{if(completedWork.flags&32768){unwindUnitOfWork(completedWork,workInProgressRootDidSkipSuspendedSiblings);return}unitOfWork=completedWork.return;var next=completeWork(completedWork.alternate,completedWork,entangledRenderLanes);if(next!==null){workInProgress=next;return}if(completedWork=completedWork.sibling,completedWork!==null){workInProgress=completedWork;return}workInProgress=completedWork=unitOfWork}while(completedWork!==null);workInProgressRootExitStatus===0&&(workInProgressRootExitStatus=5)}function unwindUnitOfWork(unitOfWork,skipSiblings){do{var next=unwindWork(unitOfWork.alternate,unitOfWork);if(next!==null){next.flags&=32767,workInProgress=next;return}if(next=unitOfWork.return,next!==null&&(next.flags|=32768,next.subtreeFlags=0,next.deletions=null),!skipSiblings&&(unitOfWork=unitOfWork.sibling,unitOfWork!==null)){workInProgress=unitOfWork;return}workInProgress=unitOfWork=next}while(unitOfWork!==null);workInProgressRootExitStatus=6,workInProgress=null}function commitRoot(root$3,finishedWork,lanes,recoverableErrors,transitions$1,didIncludeRenderPhaseUpdate,spawnedLane,updatedLanes,suspendedRetryLanes){root$3.cancelPendingCommit=null;do flushPendingEffects();while(pendingEffectsStatus!==0);if(executionContext&6)throw Error(formatProdErrorMessage$2(327));if(finishedWork!==null){if(finishedWork===root$3.current)throw Error(formatProdErrorMessage$2(177));if(didIncludeRenderPhaseUpdate=finishedWork.lanes|finishedWork.childLanes,didIncludeRenderPhaseUpdate|=concurrentlyUpdatedLanes,markRootFinished(root$3,lanes,didIncludeRenderPhaseUpdate,spawnedLane,updatedLanes,suspendedRetryLanes),root$3===workInProgressRoot&&(workInProgress=workInProgressRoot=null,workInProgressRootRenderLanes=0),pendingFinishedWork=finishedWork,pendingEffectsRoot=root$3,pendingEffectsLanes=lanes,pendingEffectsRemainingLanes=didIncludeRenderPhaseUpdate,pendingPassiveTransitions=transitions$1,pendingRecoverableErrors=recoverableErrors,finishedWork.subtreeFlags&10256||finishedWork.flags&10256?(root$3.callbackNode=null,root$3.callbackPriority=0,scheduleCallback$1(NormalPriority$1,function(){return flushPassiveEffects(),null})):(root$3.callbackNode=null,root$3.callbackPriority=0),recoverableErrors=(finishedWork.flags&13878)!=0,finishedWork.subtreeFlags&13878||recoverableErrors){recoverableErrors=ReactSharedInternals.T,ReactSharedInternals.T=null,transitions$1=ReactDOMSharedInternals.p,ReactDOMSharedInternals.p=2,spawnedLane=executionContext,executionContext|=4;try{commitBeforeMutationEffects(root$3,finishedWork,lanes)}finally{executionContext=spawnedLane,ReactDOMSharedInternals.p=transitions$1,ReactSharedInternals.T=recoverableErrors}}pendingEffectsStatus=1,flushMutationEffects(),flushLayoutEffects(),flushSpawnedWork()}}function flushMutationEffects(){if(pendingEffectsStatus===1){pendingEffectsStatus=0;var root$3=pendingEffectsRoot,finishedWork=pendingFinishedWork,rootMutationHasEffect=(finishedWork.flags&13878)!=0;if(finishedWork.subtreeFlags&13878||rootMutationHasEffect){rootMutationHasEffect=ReactSharedInternals.T,ReactSharedInternals.T=null;var previousPriority=ReactDOMSharedInternals.p;ReactDOMSharedInternals.p=2;var prevExecutionContext=executionContext;executionContext|=4;try{commitMutationEffectsOnFiber(finishedWork,root$3);var priorSelectionInformation=selectionInformation,curFocusedElem=getActiveElementDeep(root$3.containerInfo),priorFocusedElem=priorSelectionInformation.focusedElem,priorSelectionRange=priorSelectionInformation.selectionRange;if(curFocusedElem!==priorFocusedElem&&priorFocusedElem&&priorFocusedElem.ownerDocument&&containsNode(priorFocusedElem.ownerDocument.documentElement,priorFocusedElem)){if(priorSelectionRange!==null&&hasSelectionCapabilities(priorFocusedElem)){var start$2=priorSelectionRange.start,end$1=priorSelectionRange.end;if(end$1===void 0&&(end$1=start$2),`selectionStart`in priorFocusedElem)priorFocusedElem.selectionStart=start$2,priorFocusedElem.selectionEnd=Math.min(end$1,priorFocusedElem.value.length);else{var doc=priorFocusedElem.ownerDocument||document,win$2=doc&&doc.defaultView||window;if(win$2.getSelection){var selection$1=win$2.getSelection(),length=priorFocusedElem.textContent.length,start$jscomp$0=Math.min(priorSelectionRange.start,length),end$jscomp$0=priorSelectionRange.end===void 0?start$jscomp$0:Math.min(priorSelectionRange.end,length);!selection$1.extend&&start$jscomp$0>end$jscomp$0&&(curFocusedElem=end$jscomp$0,end$jscomp$0=start$jscomp$0,start$jscomp$0=curFocusedElem);var startMarker=getNodeForCharacterOffset(priorFocusedElem,start$jscomp$0),endMarker=getNodeForCharacterOffset(priorFocusedElem,end$jscomp$0);if(startMarker&&endMarker&&(selection$1.rangeCount!==1||selection$1.anchorNode!==startMarker.node||selection$1.anchorOffset!==startMarker.offset||selection$1.focusNode!==endMarker.node||selection$1.focusOffset!==endMarker.offset)){var range=doc.createRange();range.setStart(startMarker.node,startMarker.offset),selection$1.removeAllRanges(),start$jscomp$0>end$jscomp$0?(selection$1.addRange(range),selection$1.extend(endMarker.node,endMarker.offset)):(range.setEnd(endMarker.node,endMarker.offset),selection$1.addRange(range))}}}}for(doc=[],selection$1=priorFocusedElem;selection$1=selection$1.parentNode;)selection$1.nodeType===1&&doc.push({element:selection$1,left:selection$1.scrollLeft,top:selection$1.scrollTop});for(typeof priorFocusedElem.focus==`function`&&priorFocusedElem.focus(),priorFocusedElem=0;priorFocusedElem<doc.length;priorFocusedElem++){var info=doc[priorFocusedElem];info.element.scrollLeft=info.left,info.element.scrollTop=info.top}}_enabled=!!eventsEnabled,selectionInformation=eventsEnabled=null}finally{executionContext=prevExecutionContext,ReactDOMSharedInternals.p=previousPriority,ReactSharedInternals.T=rootMutationHasEffect}}root$3.current=finishedWork,pendingEffectsStatus=2}}function flushLayoutEffects(){if(pendingEffectsStatus===2){pendingEffectsStatus=0;var root$3=pendingEffectsRoot,finishedWork=pendingFinishedWork,rootHasLayoutEffect=(finishedWork.flags&8772)!=0;if(finishedWork.subtreeFlags&8772||rootHasLayoutEffect){rootHasLayoutEffect=ReactSharedInternals.T,ReactSharedInternals.T=null;var previousPriority=ReactDOMSharedInternals.p;ReactDOMSharedInternals.p=2;var prevExecutionContext=executionContext;executionContext|=4;try{commitLayoutEffectOnFiber(root$3,finishedWork.alternate,finishedWork)}finally{executionContext=prevExecutionContext,ReactDOMSharedInternals.p=previousPriority,ReactSharedInternals.T=rootHasLayoutEffect}}pendingEffectsStatus=3}}function flushSpawnedWork(){if(pendingEffectsStatus===4||pendingEffectsStatus===3){pendingEffectsStatus=0,requestPaint();var root$3=pendingEffectsRoot,finishedWork=pendingFinishedWork,lanes=pendingEffectsLanes,recoverableErrors=pendingRecoverableErrors;finishedWork.subtreeFlags&10256||finishedWork.flags&10256?pendingEffectsStatus=5:(pendingEffectsStatus=0,pendingFinishedWork=pendingEffectsRoot=null,releaseRootPooledCache(root$3,root$3.pendingLanes));var remainingLanes=root$3.pendingLanes;if(remainingLanes===0&&(legacyErrorBoundariesThatAlreadyFailed=null),lanesToEventPriority(lanes),finishedWork=finishedWork.stateNode,injectedHook&&typeof injectedHook.onCommitFiberRoot==`function`)try{injectedHook.onCommitFiberRoot(rendererID,finishedWork,void 0,(finishedWork.current.flags&128)==128)}catch{}if(recoverableErrors!==null){finishedWork=ReactSharedInternals.T,remainingLanes=ReactDOMSharedInternals.p,ReactDOMSharedInternals.p=2,ReactSharedInternals.T=null;try{for(var onRecoverableError=root$3.onRecoverableError,i$4=0;i$4<recoverableErrors.length;i$4++){var recoverableError=recoverableErrors[i$4];onRecoverableError(recoverableError.value,{componentStack:recoverableError.stack})}}finally{ReactSharedInternals.T=finishedWork,ReactDOMSharedInternals.p=remainingLanes}}pendingEffectsLanes&3&&flushPendingEffects(),ensureRootIsScheduled(root$3),remainingLanes=root$3.pendingLanes,lanes&261930&&remainingLanes&42?root$3===rootWithNestedUpdates?nestedUpdateCount++:(nestedUpdateCount=0,rootWithNestedUpdates=root$3):nestedUpdateCount=0,flushSyncWorkAcrossRoots_impl(0,!1)}}function releaseRootPooledCache(root$3,remainingLanes){(root$3.pooledCacheLanes&=remainingLanes)===0&&(remainingLanes=root$3.pooledCache,remainingLanes!=null&&(root$3.pooledCache=null,releaseCache(remainingLanes)))}function flushPendingEffects(){return flushMutationEffects(),flushLayoutEffects(),flushSpawnedWork(),flushPassiveEffects()}function flushPassiveEffects(){if(pendingEffectsStatus!==5)return!1;var root$3=pendingEffectsRoot,remainingLanes=pendingEffectsRemainingLanes;pendingEffectsRemainingLanes=0;var renderPriority=lanesToEventPriority(pendingEffectsLanes),prevTransition=ReactSharedInternals.T,previousPriority=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=32>renderPriority?32:renderPriority,ReactSharedInternals.T=null,renderPriority=pendingPassiveTransitions,pendingPassiveTransitions=null;var root$jscomp$0=pendingEffectsRoot,lanes=pendingEffectsLanes;if(pendingEffectsStatus=0,pendingFinishedWork=pendingEffectsRoot=null,pendingEffectsLanes=0,executionContext&6)throw Error(formatProdErrorMessage$2(331));var prevExecutionContext=executionContext;if(executionContext|=4,commitPassiveUnmountOnFiber(root$jscomp$0.current),commitPassiveMountOnFiber(root$jscomp$0,root$jscomp$0.current,lanes,renderPriority),executionContext=prevExecutionContext,flushSyncWorkAcrossRoots_impl(0,!1),injectedHook&&typeof injectedHook.onPostCommitFiberRoot==`function`)try{injectedHook.onPostCommitFiberRoot(rendererID,root$jscomp$0)}catch{}return!0}finally{ReactDOMSharedInternals.p=previousPriority,ReactSharedInternals.T=prevTransition,releaseRootPooledCache(root$3,remainingLanes)}}function captureCommitPhaseErrorOnRoot(rootFiber,sourceFiber,error$1){sourceFiber=createCapturedValueAtFiber(error$1,sourceFiber),sourceFiber=createRootErrorUpdate(rootFiber.stateNode,sourceFiber,2),rootFiber=enqueueUpdate(rootFiber,sourceFiber,2),rootFiber!==null&&(markRootUpdated$1(rootFiber,2),ensureRootIsScheduled(rootFiber))}function captureCommitPhaseError(sourceFiber,nearestMountedAncestor,error$1){if(sourceFiber.tag===3)captureCommitPhaseErrorOnRoot(sourceFiber,sourceFiber,error$1);else for(;nearestMountedAncestor!==null;){if(nearestMountedAncestor.tag===3){captureCommitPhaseErrorOnRoot(nearestMountedAncestor,sourceFiber,error$1);break}else if(nearestMountedAncestor.tag===1){var instance=nearestMountedAncestor.stateNode;if(typeof nearestMountedAncestor.type.getDerivedStateFromError==`function`||typeof instance.componentDidCatch==`function`&&(legacyErrorBoundariesThatAlreadyFailed===null||!legacyErrorBoundariesThatAlreadyFailed.has(instance))){sourceFiber=createCapturedValueAtFiber(error$1,sourceFiber),error$1=createClassErrorUpdate(2),instance=enqueueUpdate(nearestMountedAncestor,error$1,2),instance!==null&&(initializeClassErrorUpdate(error$1,instance,nearestMountedAncestor,sourceFiber),markRootUpdated$1(instance,2),ensureRootIsScheduled(instance));break}}nearestMountedAncestor=nearestMountedAncestor.return}}function attachPingListener(root$3,wakeable,lanes){var pingCache=root$3.pingCache;if(pingCache===null){pingCache=root$3.pingCache=new PossiblyWeakMap;var threadIDs=new Set;pingCache.set(wakeable,threadIDs)}else threadIDs=pingCache.get(wakeable),threadIDs===void 0&&(threadIDs=new Set,pingCache.set(wakeable,threadIDs));threadIDs.has(lanes)||(workInProgressRootDidAttachPingListener=!0,threadIDs.add(lanes),root$3=pingSuspendedRoot.bind(null,root$3,wakeable,lanes),wakeable.then(root$3,root$3))}function pingSuspendedRoot(root$3,wakeable,pingedLanes){var pingCache=root$3.pingCache;pingCache!==null&&pingCache.delete(wakeable),root$3.pingedLanes|=root$3.suspendedLanes&pingedLanes,root$3.warmLanes&=~pingedLanes,workInProgressRoot===root$3&&(workInProgressRootRenderLanes&pingedLanes)===pingedLanes&&(workInProgressRootExitStatus===4||workInProgressRootExitStatus===3&&(workInProgressRootRenderLanes&62914560)===workInProgressRootRenderLanes&&300>now$3()-globalMostRecentFallbackTime?!(executionContext&2)&&prepareFreshStack(root$3,0):workInProgressRootPingedLanes|=pingedLanes,workInProgressSuspendedRetryLanes===workInProgressRootRenderLanes&&(workInProgressSuspendedRetryLanes=0)),ensureRootIsScheduled(root$3)}function retryTimedOutBoundary(boundaryFiber,retryLane){retryLane===0&&(retryLane=claimNextRetryLane()),boundaryFiber=enqueueConcurrentRenderForLane(boundaryFiber,retryLane),boundaryFiber!==null&&(markRootUpdated$1(boundaryFiber,retryLane),ensureRootIsScheduled(boundaryFiber))}function retryDehydratedSuspenseBoundary(boundaryFiber){var suspenseState=boundaryFiber.memoizedState,retryLane=0;suspenseState!==null&&(retryLane=suspenseState.retryLane),retryTimedOutBoundary(boundaryFiber,retryLane)}function resolveRetryWakeable(boundaryFiber,wakeable){var retryLane=0;switch(boundaryFiber.tag){case 31:case 13:var retryCache=boundaryFiber.stateNode,suspenseState=boundaryFiber.memoizedState;suspenseState!==null&&(retryLane=suspenseState.retryLane);break;case 19:retryCache=boundaryFiber.stateNode;break;case 22:retryCache=boundaryFiber.stateNode._retryCache;break;default:throw Error(formatProdErrorMessage$2(314))}retryCache!==null&&retryCache.delete(wakeable),retryTimedOutBoundary(boundaryFiber,retryLane)}function scheduleCallback$1(priorityLevel,callback){return scheduleCallback$3(priorityLevel,callback)}var firstScheduledRoot=null,lastScheduledRoot=null,didScheduleMicrotask=!1,mightHavePendingSyncWork=!1,isFlushingWork=!1,currentEventTransitionLane=0;function ensureRootIsScheduled(root$3){root$3!==lastScheduledRoot&&root$3.next===null&&(lastScheduledRoot===null?firstScheduledRoot=lastScheduledRoot=root$3:lastScheduledRoot=lastScheduledRoot.next=root$3),mightHavePendingSyncWork=!0,didScheduleMicrotask||(didScheduleMicrotask=!0,scheduleImmediateRootScheduleTask())}function flushSyncWorkAcrossRoots_impl(syncTransitionLanes,onlyLegacy){if(!isFlushingWork&&mightHavePendingSyncWork){isFlushingWork=!0;do for(var didPerformSomeWork=!1,root$170=firstScheduledRoot;root$170!==null;){if(!onlyLegacy)if(syncTransitionLanes!==0){var pendingLanes=root$170.pendingLanes;if(pendingLanes===0)var JSCompiler_inline_result=0;else{var suspendedLanes=root$170.suspendedLanes,pingedLanes=root$170.pingedLanes;JSCompiler_inline_result=(1<<31-clz32(42|syncTransitionLanes)+1)-1,JSCompiler_inline_result&=pendingLanes&~(suspendedLanes&~pingedLanes),JSCompiler_inline_result=JSCompiler_inline_result&201326741?JSCompiler_inline_result&201326741|1:JSCompiler_inline_result?JSCompiler_inline_result|2:0}JSCompiler_inline_result!==0&&(didPerformSomeWork=!0,performSyncWorkOnRoot(root$170,JSCompiler_inline_result))}else JSCompiler_inline_result=workInProgressRootRenderLanes,JSCompiler_inline_result=getNextLanes(root$170,root$170===workInProgressRoot?JSCompiler_inline_result:0,root$170.cancelPendingCommit!==null||root$170.timeoutHandle!==-1),!(JSCompiler_inline_result&3)||checkIfRootIsPrerendering(root$170,JSCompiler_inline_result)||(didPerformSomeWork=!0,performSyncWorkOnRoot(root$170,JSCompiler_inline_result));root$170=root$170.next}while(didPerformSomeWork);isFlushingWork=!1}}function processRootScheduleInImmediateTask(){processRootScheduleInMicrotask()}function processRootScheduleInMicrotask(){mightHavePendingSyncWork=didScheduleMicrotask=!1;var syncTransitionLanes=0;currentEventTransitionLane!==0&&shouldAttemptEagerTransition()&&(syncTransitionLanes=currentEventTransitionLane);for(var currentTime=now$3(),prev=null,root$3=firstScheduledRoot;root$3!==null;){var next=root$3.next,nextLanes=scheduleTaskForRootDuringMicrotask(root$3,currentTime);nextLanes===0?(root$3.next=null,prev===null?firstScheduledRoot=next:prev.next=next,next===null&&(lastScheduledRoot=prev)):(prev=root$3,(syncTransitionLanes!==0||nextLanes&3)&&(mightHavePendingSyncWork=!0)),root$3=next}pendingEffectsStatus!==0&&pendingEffectsStatus!==5||flushSyncWorkAcrossRoots_impl(syncTransitionLanes,!1),currentEventTransitionLane!==0&&(currentEventTransitionLane=0)}function scheduleTaskForRootDuringMicrotask(root$3,currentTime){for(var suspendedLanes=root$3.suspendedLanes,pingedLanes=root$3.pingedLanes,expirationTimes=root$3.expirationTimes,lanes=root$3.pendingLanes&-62914561;0<lanes;){var index$5=31-clz32(lanes),lane=1<<index$5,expirationTime=expirationTimes[index$5];expirationTime===-1?((lane&suspendedLanes)===0||(lane&pingedLanes)!==0)&&(expirationTimes[index$5]=computeExpirationTime(lane,currentTime)):expirationTime<=currentTime&&(root$3.expiredLanes|=lane),lanes&=~lane}if(currentTime=workInProgressRoot,suspendedLanes=workInProgressRootRenderLanes,suspendedLanes=getNextLanes(root$3,root$3===currentTime?suspendedLanes:0,root$3.cancelPendingCommit!==null||root$3.timeoutHandle!==-1),pingedLanes=root$3.callbackNode,suspendedLanes===0||root$3===currentTime&&(workInProgressSuspendedReason===2||workInProgressSuspendedReason===9)||root$3.cancelPendingCommit!==null)return pingedLanes!==null&&pingedLanes!==null&&cancelCallback$1(pingedLanes),root$3.callbackNode=null,root$3.callbackPriority=0;if(!(suspendedLanes&3)||checkIfRootIsPrerendering(root$3,suspendedLanes)){if(currentTime=suspendedLanes&-suspendedLanes,currentTime===root$3.callbackPriority)return currentTime;switch(pingedLanes!==null&&cancelCallback$1(pingedLanes),lanesToEventPriority(suspendedLanes)){case 2:case 8:suspendedLanes=UserBlockingPriority;break;case 32:suspendedLanes=NormalPriority$1;break;case 268435456:suspendedLanes=IdlePriority;break;default:suspendedLanes=NormalPriority$1}return pingedLanes=performWorkOnRootViaSchedulerTask.bind(null,root$3),suspendedLanes=scheduleCallback$3(suspendedLanes,pingedLanes),root$3.callbackPriority=currentTime,root$3.callbackNode=suspendedLanes,currentTime}return pingedLanes!==null&&pingedLanes!==null&&cancelCallback$1(pingedLanes),root$3.callbackPriority=2,root$3.callbackNode=null,2}function performWorkOnRootViaSchedulerTask(root$3,didTimeout){if(pendingEffectsStatus!==0&&pendingEffectsStatus!==5)return root$3.callbackNode=null,root$3.callbackPriority=0,null;var originalCallbackNode=root$3.callbackNode;if(flushPendingEffects()&&root$3.callbackNode!==originalCallbackNode)return null;var workInProgressRootRenderLanes$jscomp$0=workInProgressRootRenderLanes;return workInProgressRootRenderLanes$jscomp$0=getNextLanes(root$3,root$3===workInProgressRoot?workInProgressRootRenderLanes$jscomp$0:0,root$3.cancelPendingCommit!==null||root$3.timeoutHandle!==-1),workInProgressRootRenderLanes$jscomp$0===0?null:(performWorkOnRoot(root$3,workInProgressRootRenderLanes$jscomp$0,didTimeout),scheduleTaskForRootDuringMicrotask(root$3,now$3()),root$3.callbackNode!=null&&root$3.callbackNode===originalCallbackNode?performWorkOnRootViaSchedulerTask.bind(null,root$3):null)}function performSyncWorkOnRoot(root$3,lanes){if(flushPendingEffects())return null;performWorkOnRoot(root$3,lanes,!0)}function scheduleImmediateRootScheduleTask(){scheduleMicrotask(function(){executionContext&6?scheduleCallback$3(ImmediatePriority,processRootScheduleInImmediateTask):processRootScheduleInMicrotask()})}function requestTransitionLane(){if(currentEventTransitionLane===0){var actionScopeLane=currentEntangledLane;actionScopeLane===0&&(actionScopeLane=nextTransitionUpdateLane,nextTransitionUpdateLane<<=1,!(nextTransitionUpdateLane&261888)&&(nextTransitionUpdateLane=256)),currentEventTransitionLane=actionScopeLane}return currentEventTransitionLane}function coerceFormActionProp(actionProp){return actionProp==null||typeof actionProp==`symbol`||typeof actionProp==`boolean`?null:typeof actionProp==`function`?actionProp:sanitizeURL(``+actionProp)}function createFormDataWithSubmitter(form,submitter){var temp=submitter.ownerDocument.createElement(`input`);return temp.name=submitter.name,temp.value=submitter.value,form.id&&temp.setAttribute(`form`,form.id),submitter.parentNode.insertBefore(temp,submitter),form=new FormData(form),temp.parentNode.removeChild(temp),form}function extractEvents$1(dispatchQueue,domEventName,maybeTargetInst,nativeEvent,nativeEventTarget){if(domEventName===`submit`&&maybeTargetInst&&maybeTargetInst.stateNode===nativeEventTarget){var action=coerceFormActionProp((nativeEventTarget[internalPropsKey]||null).action),submitter=nativeEvent.submitter;submitter&&(domEventName=(domEventName=submitter[internalPropsKey]||null)?coerceFormActionProp(domEventName.formAction):submitter.getAttribute(`formAction`),domEventName!==null&&(action=domEventName,submitter=null));var event=new SyntheticEvent(`action`,`action`,null,nativeEvent,nativeEventTarget);dispatchQueue.push({event,listeners:[{instance:null,listener:function(){if(nativeEvent.defaultPrevented){if(currentEventTransitionLane!==0){var formData=submitter?createFormDataWithSubmitter(nativeEventTarget,submitter):new FormData(nativeEventTarget);startHostTransition(maybeTargetInst,{pending:!0,data:formData,method:nativeEventTarget.method,action},null,formData)}}else typeof action==`function`&&(event.preventDefault(),formData=submitter?createFormDataWithSubmitter(nativeEventTarget,submitter):new FormData(nativeEventTarget),startHostTransition(maybeTargetInst,{pending:!0,data:formData,method:nativeEventTarget.method,action},action,formData))},currentTarget:nativeEventTarget}]})}}for(var i$jscomp$inline_1577=0;i$jscomp$inline_1577<simpleEventPluginEvents.length;i$jscomp$inline_1577++){var eventName$jscomp$inline_1578=simpleEventPluginEvents[i$jscomp$inline_1577];registerSimpleEvent(eventName$jscomp$inline_1578.toLowerCase(),`on`+(eventName$jscomp$inline_1578[0].toUpperCase()+eventName$jscomp$inline_1578.slice(1)))}registerSimpleEvent(ANIMATION_END,`onAnimationEnd`),registerSimpleEvent(ANIMATION_ITERATION,`onAnimationIteration`),registerSimpleEvent(ANIMATION_START,`onAnimationStart`),registerSimpleEvent(`dblclick`,`onDoubleClick`),registerSimpleEvent(`focusin`,`onFocus`),registerSimpleEvent(`focusout`,`onBlur`),registerSimpleEvent(TRANSITION_RUN,`onTransitionRun`),registerSimpleEvent(TRANSITION_START,`onTransitionStart`),registerSimpleEvent(TRANSITION_CANCEL,`onTransitionCancel`),registerSimpleEvent(TRANSITION_END,`onTransitionEnd`),registerDirectEvent(`onMouseEnter`,[`mouseout`,`mouseover`]),registerDirectEvent(`onMouseLeave`,[`mouseout`,`mouseover`]),registerDirectEvent(`onPointerEnter`,[`pointerout`,`pointerover`]),registerDirectEvent(`onPointerLeave`,[`pointerout`,`pointerover`]),registerTwoPhaseEvent(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),registerTwoPhaseEvent(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),registerTwoPhaseEvent(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),registerTwoPhaseEvent(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),registerTwoPhaseEvent(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),registerTwoPhaseEvent(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var mediaEventTypes=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),nonDelegatedEvents=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(mediaEventTypes));function processDispatchQueue(dispatchQueue,eventSystemFlags){eventSystemFlags=(eventSystemFlags&4)!=0;for(var i$4=0;i$4<dispatchQueue.length;i$4++){var _dispatchQueue$i=dispatchQueue[i$4],event=_dispatchQueue$i.event;_dispatchQueue$i=_dispatchQueue$i.listeners;a:{var previousInstance=void 0;if(eventSystemFlags)for(var i$jscomp$0=_dispatchQueue$i.length-1;0<=i$jscomp$0;i$jscomp$0--){var _dispatchListeners$i=_dispatchQueue$i[i$jscomp$0],instance=_dispatchListeners$i.instance,currentTarget=_dispatchListeners$i.currentTarget;if(_dispatchListeners$i=_dispatchListeners$i.listener,instance!==previousInstance&&event.isPropagationStopped())break a;previousInstance=_dispatchListeners$i,event.currentTarget=currentTarget;try{previousInstance(event)}catch(error$1){reportGlobalError(error$1)}event.currentTarget=null,previousInstance=instance}else for(i$jscomp$0=0;i$jscomp$0<_dispatchQueue$i.length;i$jscomp$0++){if(_dispatchListeners$i=_dispatchQueue$i[i$jscomp$0],instance=_dispatchListeners$i.instance,currentTarget=_dispatchListeners$i.currentTarget,_dispatchListeners$i=_dispatchListeners$i.listener,instance!==previousInstance&&event.isPropagationStopped())break a;previousInstance=_dispatchListeners$i,event.currentTarget=currentTarget;try{previousInstance(event)}catch(error$1){reportGlobalError(error$1)}event.currentTarget=null,previousInstance=instance}}}}function listenToNonDelegatedEvent(domEventName,targetElement){var JSCompiler_inline_result=targetElement[internalEventHandlersKey];JSCompiler_inline_result===void 0&&(JSCompiler_inline_result=targetElement[internalEventHandlersKey]=new Set);var listenerSetKey=domEventName+`__bubble`;JSCompiler_inline_result.has(listenerSetKey)||(addTrappedEventListener(targetElement,domEventName,2,!1),JSCompiler_inline_result.add(listenerSetKey))}function listenToNativeEvent(domEventName,isCapturePhaseListener,target){var eventSystemFlags=0;isCapturePhaseListener&&(eventSystemFlags|=4),addTrappedEventListener(target,domEventName,eventSystemFlags,isCapturePhaseListener)}var listeningMarker=`_reactListening`+Math.random().toString(36).slice(2);function listenToAllSupportedEvents(rootContainerElement){if(!rootContainerElement[listeningMarker]){rootContainerElement[listeningMarker]=!0,allNativeEvents.forEach(function(domEventName){domEventName!==`selectionchange`&&(nonDelegatedEvents.has(domEventName)||listenToNativeEvent(domEventName,!1,rootContainerElement),listenToNativeEvent(domEventName,!0,rootContainerElement))});var ownerDocument=rootContainerElement.nodeType===9?rootContainerElement:rootContainerElement.ownerDocument;ownerDocument===null||ownerDocument[listeningMarker]||(ownerDocument[listeningMarker]=!0,listenToNativeEvent(`selectionchange`,!1,ownerDocument))}}function addTrappedEventListener(targetContainer,domEventName,eventSystemFlags,isCapturePhaseListener){switch(getEventPriority(domEventName)){case 2:var listenerWrapper=dispatchDiscreteEvent;break;case 8:listenerWrapper=dispatchContinuousEvent;break;default:listenerWrapper=dispatchEvent$1}eventSystemFlags=listenerWrapper.bind(null,domEventName,eventSystemFlags,targetContainer),listenerWrapper=void 0,!passiveBrowserEventsSupported||domEventName!==`touchstart`&&domEventName!==`touchmove`&&domEventName!==`wheel`||(listenerWrapper=!0),isCapturePhaseListener?listenerWrapper===void 0?targetContainer.addEventListener(domEventName,eventSystemFlags,!0):targetContainer.addEventListener(domEventName,eventSystemFlags,{capture:!0,passive:listenerWrapper}):listenerWrapper===void 0?targetContainer.addEventListener(domEventName,eventSystemFlags,!1):targetContainer.addEventListener(domEventName,eventSystemFlags,{passive:listenerWrapper})}function dispatchEventForPluginEventSystem(domEventName,eventSystemFlags,nativeEvent,targetInst$jscomp$0,targetContainer){var ancestorInst=targetInst$jscomp$0;if(!(eventSystemFlags&1)&&!(eventSystemFlags&2)&&targetInst$jscomp$0!==null)a:for(;;){if(targetInst$jscomp$0===null)return;var nodeTag=targetInst$jscomp$0.tag;if(nodeTag===3||nodeTag===4){var container=targetInst$jscomp$0.stateNode.containerInfo;if(container===targetContainer)break;if(nodeTag===4)for(nodeTag=targetInst$jscomp$0.return;nodeTag!==null;){var grandTag=nodeTag.tag;if((grandTag===3||grandTag===4)&&nodeTag.stateNode.containerInfo===targetContainer)return;nodeTag=nodeTag.return}for(;container!==null;){if(nodeTag=getClosestInstanceFromNode(container),nodeTag===null)return;if(grandTag=nodeTag.tag,grandTag===5||grandTag===6||grandTag===26||grandTag===27){targetInst$jscomp$0=ancestorInst=nodeTag;continue a}container=container.parentNode}}targetInst$jscomp$0=targetInst$jscomp$0.return}batchedUpdates$1(function(){var targetInst=ancestorInst,nativeEventTarget=getEventTarget(nativeEvent),dispatchQueue=[];a:{var reactName=topLevelEventsToReactNames.get(domEventName);if(reactName!==void 0){var SyntheticEventCtor=SyntheticEvent,reactEventType=domEventName;switch(domEventName){case`keypress`:if(getEventCharCode(nativeEvent)===0)break a;case`keydown`:case`keyup`:SyntheticEventCtor=SyntheticKeyboardEvent;break;case`focusin`:reactEventType=`focus`,SyntheticEventCtor=SyntheticFocusEvent;break;case`focusout`:reactEventType=`blur`,SyntheticEventCtor=SyntheticFocusEvent;break;case`beforeblur`:case`afterblur`:SyntheticEventCtor=SyntheticFocusEvent;break;case`click`:if(nativeEvent.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:SyntheticEventCtor=SyntheticMouseEvent;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:SyntheticEventCtor=SyntheticDragEvent;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:SyntheticEventCtor=SyntheticTouchEvent;break;case ANIMATION_END:case ANIMATION_ITERATION:case ANIMATION_START:SyntheticEventCtor=SyntheticAnimationEvent;break;case TRANSITION_END:SyntheticEventCtor=SyntheticTransitionEvent;break;case`scroll`:case`scrollend`:SyntheticEventCtor=SyntheticUIEvent;break;case`wheel`:SyntheticEventCtor=SyntheticWheelEvent;break;case`copy`:case`cut`:case`paste`:SyntheticEventCtor=SyntheticClipboardEvent;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:SyntheticEventCtor=SyntheticPointerEvent;break;case`toggle`:case`beforetoggle`:SyntheticEventCtor=SyntheticToggleEvent}var inCapturePhase=(eventSystemFlags&4)!=0,accumulateTargetOnly=!inCapturePhase&&(domEventName===`scroll`||domEventName===`scrollend`),reactEventName=inCapturePhase?reactName===null?null:reactName+`Capture`:reactName;inCapturePhase=[];for(var instance=targetInst,lastHostComponent;instance!==null;){var _instance=instance;if(lastHostComponent=_instance.stateNode,_instance=_instance.tag,_instance!==5&&_instance!==26&&_instance!==27||lastHostComponent===null||reactEventName===null||(_instance=getListener(instance,reactEventName),_instance!=null&&inCapturePhase.push(createDispatchListener(instance,_instance,lastHostComponent))),accumulateTargetOnly)break;instance=instance.return}0<inCapturePhase.length&&(reactName=new SyntheticEventCtor(reactName,reactEventType,null,nativeEvent,nativeEventTarget),dispatchQueue.push({event:reactName,listeners:inCapturePhase}))}}if(!(eventSystemFlags&7)){a:{if(reactName=domEventName===`mouseover`||domEventName===`pointerover`,SyntheticEventCtor=domEventName===`mouseout`||domEventName===`pointerout`,reactName&&nativeEvent!==currentReplayingEvent&&(reactEventType=nativeEvent.relatedTarget||nativeEvent.fromElement)&&(getClosestInstanceFromNode(reactEventType)||reactEventType[internalContainerInstanceKey]))break a;if((SyntheticEventCtor||reactName)&&(reactName=nativeEventTarget.window===nativeEventTarget?nativeEventTarget:(reactName=nativeEventTarget.ownerDocument)?reactName.defaultView||reactName.parentWindow:window,SyntheticEventCtor?(reactEventType=nativeEvent.relatedTarget||nativeEvent.toElement,SyntheticEventCtor=targetInst,reactEventType=reactEventType?getClosestInstanceFromNode(reactEventType):null,reactEventType!==null&&(accumulateTargetOnly=getNearestMountedFiber(reactEventType),inCapturePhase=reactEventType.tag,reactEventType!==accumulateTargetOnly||inCapturePhase!==5&&inCapturePhase!==27&&inCapturePhase!==6)&&(reactEventType=null)):(SyntheticEventCtor=null,reactEventType=targetInst),SyntheticEventCtor!==reactEventType)){if(inCapturePhase=SyntheticMouseEvent,_instance=`onMouseLeave`,reactEventName=`onMouseEnter`,instance=`mouse`,(domEventName===`pointerout`||domEventName===`pointerover`)&&(inCapturePhase=SyntheticPointerEvent,_instance=`onPointerLeave`,reactEventName=`onPointerEnter`,instance=`pointer`),accumulateTargetOnly=SyntheticEventCtor==null?reactName:getNodeFromInstance(SyntheticEventCtor),lastHostComponent=reactEventType==null?reactName:getNodeFromInstance(reactEventType),reactName=new inCapturePhase(_instance,instance+`leave`,SyntheticEventCtor,nativeEvent,nativeEventTarget),reactName.target=accumulateTargetOnly,reactName.relatedTarget=lastHostComponent,_instance=null,getClosestInstanceFromNode(nativeEventTarget)===targetInst&&(inCapturePhase=new inCapturePhase(reactEventName,instance+`enter`,reactEventType,nativeEvent,nativeEventTarget),inCapturePhase.target=lastHostComponent,inCapturePhase.relatedTarget=accumulateTargetOnly,_instance=inCapturePhase),accumulateTargetOnly=_instance,SyntheticEventCtor&&reactEventType)b:{for(inCapturePhase=getParent,reactEventName=SyntheticEventCtor,instance=reactEventType,lastHostComponent=0,_instance=reactEventName;_instance;_instance=inCapturePhase(_instance))lastHostComponent++;_instance=0;for(var tempB=instance;tempB;tempB=inCapturePhase(tempB))_instance++;for(;0<lastHostComponent-_instance;)reactEventName=inCapturePhase(reactEventName),lastHostComponent--;for(;0<_instance-lastHostComponent;)instance=inCapturePhase(instance),_instance--;for(;lastHostComponent--;){if(reactEventName===instance||instance!==null&&reactEventName===instance.alternate){inCapturePhase=reactEventName;break b}reactEventName=inCapturePhase(reactEventName),instance=inCapturePhase(instance)}inCapturePhase=null}else inCapturePhase=null;SyntheticEventCtor!==null&&accumulateEnterLeaveListenersForEvent(dispatchQueue,reactName,SyntheticEventCtor,inCapturePhase,!1),reactEventType!==null&&accumulateTargetOnly!==null&&accumulateEnterLeaveListenersForEvent(dispatchQueue,accumulateTargetOnly,reactEventType,inCapturePhase,!0)}}a:{if(reactName=targetInst?getNodeFromInstance(targetInst):window,SyntheticEventCtor=reactName.nodeName&&reactName.nodeName.toLowerCase(),SyntheticEventCtor===`select`||SyntheticEventCtor===`input`&&reactName.type===`file`)var getTargetInstFunc=getTargetInstForChangeEvent;else if(isTextInputElement(reactName))if(isInputEventSupported)getTargetInstFunc=getTargetInstForInputOrChangeEvent;else{getTargetInstFunc=getTargetInstForInputEventPolyfill;var handleEventFunc=handleEventsForInputEventPolyfill}else SyntheticEventCtor=reactName.nodeName,!SyntheticEventCtor||SyntheticEventCtor.toLowerCase()!==`input`||reactName.type!==`checkbox`&&reactName.type!==`radio`?targetInst&&isCustomElement(targetInst.elementType)&&(getTargetInstFunc=getTargetInstForChangeEvent):getTargetInstFunc=getTargetInstForClickEvent;if(getTargetInstFunc&&=getTargetInstFunc(domEventName,targetInst)){createAndAccumulateChangeEvent(dispatchQueue,getTargetInstFunc,nativeEvent,nativeEventTarget);break a}handleEventFunc&&handleEventFunc(domEventName,reactName,targetInst),domEventName===`focusout`&&targetInst&&reactName.type===`number`&&targetInst.memoizedProps.value!=null&&setDefaultValue(reactName,`number`,reactName.value)}switch(handleEventFunc=targetInst?getNodeFromInstance(targetInst):window,domEventName){case`focusin`:(isTextInputElement(handleEventFunc)||handleEventFunc.contentEditable===`true`)&&(activeElement=handleEventFunc,activeElementInst=targetInst,lastSelection=null);break;case`focusout`:lastSelection=activeElementInst=activeElement=null;break;case`mousedown`:mouseDown=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:mouseDown=!1,constructSelectEvent(dispatchQueue,nativeEvent,nativeEventTarget);break;case`selectionchange`:if(skipSelectionChangeEvent)break;case`keydown`:case`keyup`:constructSelectEvent(dispatchQueue,nativeEvent,nativeEventTarget)}var fallbackData;if(canUseCompositionEvent)b:{switch(domEventName){case`compositionstart`:var eventType=`onCompositionStart`;break b;case`compositionend`:eventType=`onCompositionEnd`;break b;case`compositionupdate`:eventType=`onCompositionUpdate`;break b}eventType=void 0}else isComposing?isFallbackCompositionEnd(domEventName,nativeEvent)&&(eventType=`onCompositionEnd`):domEventName===`keydown`&&nativeEvent.keyCode===229&&(eventType=`onCompositionStart`);eventType&&(useFallbackCompositionData&&nativeEvent.locale!==`ko`&&(isComposing||eventType!==`onCompositionStart`?eventType===`onCompositionEnd`&&isComposing&&(fallbackData=getData()):(root$2=nativeEventTarget,startText=`value`in root$2?root$2.value:root$2.textContent,isComposing=!0)),handleEventFunc=accumulateTwoPhaseListeners(targetInst,eventType),0<handleEventFunc.length&&(eventType=new SyntheticCompositionEvent(eventType,domEventName,null,nativeEvent,nativeEventTarget),dispatchQueue.push({event:eventType,listeners:handleEventFunc}),fallbackData?eventType.data=fallbackData:(fallbackData=getDataFromCustomEvent(nativeEvent),fallbackData!==null&&(eventType.data=fallbackData)))),(fallbackData=canUseTextInputEvent?getNativeBeforeInputChars(domEventName,nativeEvent):getFallbackBeforeInputChars(domEventName,nativeEvent))&&(eventType=accumulateTwoPhaseListeners(targetInst,`onBeforeInput`),0<eventType.length&&(handleEventFunc=new SyntheticCompositionEvent(`onBeforeInput`,`beforeinput`,null,nativeEvent,nativeEventTarget),dispatchQueue.push({event:handleEventFunc,listeners:eventType}),handleEventFunc.data=fallbackData)),extractEvents$1(dispatchQueue,domEventName,targetInst,nativeEvent,nativeEventTarget)}processDispatchQueue(dispatchQueue,eventSystemFlags)})}function createDispatchListener(instance,listener,currentTarget){return{instance,listener,currentTarget}}function accumulateTwoPhaseListeners(targetFiber,reactName){for(var captureName=reactName+`Capture`,listeners=[];targetFiber!==null;){var _instance2=targetFiber,stateNode=_instance2.stateNode;if(_instance2=_instance2.tag,_instance2!==5&&_instance2!==26&&_instance2!==27||stateNode===null||(_instance2=getListener(targetFiber,captureName),_instance2!=null&&listeners.unshift(createDispatchListener(targetFiber,_instance2,stateNode)),_instance2=getListener(targetFiber,reactName),_instance2!=null&&listeners.push(createDispatchListener(targetFiber,_instance2,stateNode))),targetFiber.tag===3)return listeners;targetFiber=targetFiber.return}return[]}function getParent(inst){if(inst===null)return null;do inst=inst.return;while(inst&&inst.tag!==5&&inst.tag!==27);return inst||null}function accumulateEnterLeaveListenersForEvent(dispatchQueue,event,target,common,inCapturePhase){for(var registrationName=event._reactName,listeners=[];target!==null&&target!==common;){var _instance3=target,alternate=_instance3.alternate,stateNode=_instance3.stateNode;if(_instance3=_instance3.tag,alternate!==null&&alternate===common)break;_instance3!==5&&_instance3!==26&&_instance3!==27||stateNode===null||(alternate=stateNode,inCapturePhase?(stateNode=getListener(target,registrationName),stateNode!=null&&listeners.unshift(createDispatchListener(target,stateNode,alternate))):inCapturePhase||(stateNode=getListener(target,registrationName),stateNode!=null&&listeners.push(createDispatchListener(target,stateNode,alternate)))),target=target.return}listeners.length!==0&&dispatchQueue.push({event,listeners})}var NORMALIZE_NEWLINES_REGEX=/\r\n?/g,NORMALIZE_NULL_AND_REPLACEMENT_REGEX=/\u0000|\uFFFD/g;function normalizeMarkupForTextOrAttribute(markup){return(typeof markup==`string`?markup:``+markup).replace(NORMALIZE_NEWLINES_REGEX,`
`).replace(NORMALIZE_NULL_AND_REPLACEMENT_REGEX,``)}function checkForUnmatchedText(serverText,clientText){return clientText=normalizeMarkupForTextOrAttribute(clientText),normalizeMarkupForTextOrAttribute(serverText)===clientText}function setProp(domElement,tag,key$1,value,props,prevValue){switch(key$1){case`children`:typeof value==`string`?tag===`body`||tag===`textarea`&&value===``||setTextContent(domElement,value):(typeof value==`number`||typeof value==`bigint`)&&tag!==`body`&&setTextContent(domElement,``+value);break;case`className`:setValueForKnownAttribute(domElement,`class`,value);break;case`tabIndex`:setValueForKnownAttribute(domElement,`tabindex`,value);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:setValueForKnownAttribute(domElement,key$1,value);break;case`style`:setValueForStyles(domElement,value,prevValue);break;case`data`:if(tag!==`object`){setValueForKnownAttribute(domElement,`data`,value);break}case`src`:case`href`:if(value===``&&(tag!==`a`||key$1!==`href`)){domElement.removeAttribute(key$1);break}if(value==null||typeof value==`function`||typeof value==`symbol`||typeof value==`boolean`){domElement.removeAttribute(key$1);break}value=sanitizeURL(``+value),domElement.setAttribute(key$1,value);break;case`action`:case`formAction`:if(typeof value==`function`){domElement.setAttribute(key$1,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof prevValue==`function`&&(key$1===`formAction`?(tag!==`input`&&setProp(domElement,tag,`name`,props.name,props,null),setProp(domElement,tag,`formEncType`,props.formEncType,props,null),setProp(domElement,tag,`formMethod`,props.formMethod,props,null),setProp(domElement,tag,`formTarget`,props.formTarget,props,null)):(setProp(domElement,tag,`encType`,props.encType,props,null),setProp(domElement,tag,`method`,props.method,props,null),setProp(domElement,tag,`target`,props.target,props,null)));if(value==null||typeof value==`symbol`||typeof value==`boolean`){domElement.removeAttribute(key$1);break}value=sanitizeURL(``+value),domElement.setAttribute(key$1,value);break;case`onClick`:value!=null&&(domElement.onclick=noop$1$7);break;case`onScroll`:value!=null&&listenToNonDelegatedEvent(`scroll`,domElement);break;case`onScrollEnd`:value!=null&&listenToNonDelegatedEvent(`scrollend`,domElement);break;case`dangerouslySetInnerHTML`:if(value!=null){if(typeof value!=`object`||!(`__html`in value))throw Error(formatProdErrorMessage$2(61));if(key$1=value.__html,key$1!=null){if(props.children!=null)throw Error(formatProdErrorMessage$2(60));domElement.innerHTML=key$1}}break;case`multiple`:domElement.multiple=value&&typeof value!=`function`&&typeof value!=`symbol`;break;case`muted`:domElement.muted=value&&typeof value!=`function`&&typeof value!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(value==null||typeof value==`function`||typeof value==`boolean`||typeof value==`symbol`){domElement.removeAttribute(`xlink:href`);break}key$1=sanitizeURL(``+value),domElement.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,key$1);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:value!=null&&typeof value!=`function`&&typeof value!=`symbol`?domElement.setAttribute(key$1,``+value):domElement.removeAttribute(key$1);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:value&&typeof value!=`function`&&typeof value!=`symbol`?domElement.setAttribute(key$1,``):domElement.removeAttribute(key$1);break;case`capture`:case`download`:!0===value?domElement.setAttribute(key$1,``):!1!==value&&value!=null&&typeof value!=`function`&&typeof value!=`symbol`?domElement.setAttribute(key$1,value):domElement.removeAttribute(key$1);break;case`cols`:case`rows`:case`size`:case`span`:value!=null&&typeof value!=`function`&&typeof value!=`symbol`&&!isNaN(value)&&1<=value?domElement.setAttribute(key$1,value):domElement.removeAttribute(key$1);break;case`rowSpan`:case`start`:value==null||typeof value==`function`||typeof value==`symbol`||isNaN(value)?domElement.removeAttribute(key$1):domElement.setAttribute(key$1,value);break;case`popover`:listenToNonDelegatedEvent(`beforetoggle`,domElement),listenToNonDelegatedEvent(`toggle`,domElement),setValueForAttribute(domElement,`popover`,value);break;case`xlinkActuate`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:actuate`,value);break;case`xlinkArcrole`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,value);break;case`xlinkRole`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:role`,value);break;case`xlinkShow`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:show`,value);break;case`xlinkTitle`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:title`,value);break;case`xlinkType`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:type`,value);break;case`xmlBase`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/XML/1998/namespace`,`xml:base`,value);break;case`xmlLang`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,value);break;case`xmlSpace`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/XML/1998/namespace`,`xml:space`,value);break;case`is`:setValueForAttribute(domElement,`is`,value);break;case`innerText`:case`textContent`:break;default:(!(2<key$1.length)||key$1[0]!==`o`&&key$1[0]!==`O`||key$1[1]!==`n`&&key$1[1]!==`N`)&&(key$1=aliases.get(key$1)||key$1,setValueForAttribute(domElement,key$1,value))}}function setPropOnCustomElement(domElement,tag,key$1,value,props,prevValue){switch(key$1){case`style`:setValueForStyles(domElement,value,prevValue);break;case`dangerouslySetInnerHTML`:if(value!=null){if(typeof value!=`object`||!(`__html`in value))throw Error(formatProdErrorMessage$2(61));if(key$1=value.__html,key$1!=null){if(props.children!=null)throw Error(formatProdErrorMessage$2(60));domElement.innerHTML=key$1}}break;case`children`:typeof value==`string`?setTextContent(domElement,value):(typeof value==`number`||typeof value==`bigint`)&&setTextContent(domElement,``+value);break;case`onScroll`:value!=null&&listenToNonDelegatedEvent(`scroll`,domElement);break;case`onScrollEnd`:value!=null&&listenToNonDelegatedEvent(`scrollend`,domElement);break;case`onClick`:value!=null&&(domElement.onclick=noop$1$7);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!registrationNameDependencies.hasOwnProperty(key$1))a:{if(key$1[0]===`o`&&key$1[1]===`n`&&(props=key$1.endsWith(`Capture`),tag=key$1.slice(2,props?key$1.length-7:void 0),prevValue=domElement[internalPropsKey]||null,prevValue=prevValue==null?null:prevValue[key$1],typeof prevValue==`function`&&domElement.removeEventListener(tag,prevValue,props),typeof value==`function`)){typeof prevValue!=`function`&&prevValue!==null&&(key$1 in domElement?domElement[key$1]=null:domElement.hasAttribute(key$1)&&domElement.removeAttribute(key$1)),domElement.addEventListener(tag,value,props);break a}key$1 in domElement?domElement[key$1]=value:!0===value?domElement.setAttribute(key$1,``):setValueForAttribute(domElement,key$1,value)}}}function setInitialProperties(domElement,tag,props){switch(tag){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:listenToNonDelegatedEvent(`error`,domElement),listenToNonDelegatedEvent(`load`,domElement);var hasSrc=!1,hasSrcSet=!1,propKey;for(propKey in props)if(props.hasOwnProperty(propKey)){var propValue=props[propKey];if(propValue!=null)switch(propKey){case`src`:hasSrc=!0;break;case`srcSet`:hasSrcSet=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(formatProdErrorMessage$2(137,tag));default:setProp(domElement,tag,propKey,propValue,props,null)}}hasSrcSet&&setProp(domElement,tag,`srcSet`,props.srcSet,props,null),hasSrc&&setProp(domElement,tag,`src`,props.src,props,null);return;case`input`:listenToNonDelegatedEvent(`invalid`,domElement);var defaultValue$3=propKey=propValue=hasSrcSet=null,checked=null,defaultChecked=null;for(hasSrc in props)if(props.hasOwnProperty(hasSrc)){var propValue$184=props[hasSrc];if(propValue$184!=null)switch(hasSrc){case`name`:hasSrcSet=propValue$184;break;case`type`:propValue=propValue$184;break;case`checked`:checked=propValue$184;break;case`defaultChecked`:defaultChecked=propValue$184;break;case`value`:propKey=propValue$184;break;case`defaultValue`:defaultValue$3=propValue$184;break;case`children`:case`dangerouslySetInnerHTML`:if(propValue$184!=null)throw Error(formatProdErrorMessage$2(137,tag));break;default:setProp(domElement,tag,hasSrc,propValue$184,props,null)}}initInput(domElement,propKey,defaultValue$3,checked,defaultChecked,propValue,hasSrcSet,!1);return;case`select`:for(hasSrcSet in listenToNonDelegatedEvent(`invalid`,domElement),hasSrc=propValue=propKey=null,props)if(props.hasOwnProperty(hasSrcSet)&&(defaultValue$3=props[hasSrcSet],defaultValue$3!=null))switch(hasSrcSet){case`value`:propKey=defaultValue$3;break;case`defaultValue`:propValue=defaultValue$3;break;case`multiple`:hasSrc=defaultValue$3;default:setProp(domElement,tag,hasSrcSet,defaultValue$3,props,null)}tag=propKey,props=propValue,domElement.multiple=!!hasSrc,tag==null?props!=null&&updateOptions(domElement,!!hasSrc,props,!0):updateOptions(domElement,!!hasSrc,tag,!1);return;case`textarea`:for(propValue in listenToNonDelegatedEvent(`invalid`,domElement),propKey=hasSrcSet=hasSrc=null,props)if(props.hasOwnProperty(propValue)&&(defaultValue$3=props[propValue],defaultValue$3!=null))switch(propValue){case`value`:hasSrc=defaultValue$3;break;case`defaultValue`:hasSrcSet=defaultValue$3;break;case`children`:propKey=defaultValue$3;break;case`dangerouslySetInnerHTML`:if(defaultValue$3!=null)throw Error(formatProdErrorMessage$2(91));break;default:setProp(domElement,tag,propValue,defaultValue$3,props,null)}initTextarea(domElement,hasSrc,hasSrcSet,propKey);return;case`option`:for(checked in props)if(props.hasOwnProperty(checked)&&(hasSrc=props[checked],hasSrc!=null))switch(checked){case`selected`:domElement.selected=hasSrc&&typeof hasSrc!=`function`&&typeof hasSrc!=`symbol`;break;default:setProp(domElement,tag,checked,hasSrc,props,null)}return;case`dialog`:listenToNonDelegatedEvent(`beforetoggle`,domElement),listenToNonDelegatedEvent(`toggle`,domElement),listenToNonDelegatedEvent(`cancel`,domElement),listenToNonDelegatedEvent(`close`,domElement);break;case`iframe`:case`object`:listenToNonDelegatedEvent(`load`,domElement);break;case`video`:case`audio`:for(hasSrc=0;hasSrc<mediaEventTypes.length;hasSrc++)listenToNonDelegatedEvent(mediaEventTypes[hasSrc],domElement);break;case`image`:listenToNonDelegatedEvent(`error`,domElement),listenToNonDelegatedEvent(`load`,domElement);break;case`details`:listenToNonDelegatedEvent(`toggle`,domElement);break;case`embed`:case`source`:case`link`:listenToNonDelegatedEvent(`error`,domElement),listenToNonDelegatedEvent(`load`,domElement);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(defaultChecked in props)if(props.hasOwnProperty(defaultChecked)&&(hasSrc=props[defaultChecked],hasSrc!=null))switch(defaultChecked){case`children`:case`dangerouslySetInnerHTML`:throw Error(formatProdErrorMessage$2(137,tag));default:setProp(domElement,tag,defaultChecked,hasSrc,props,null)}return;default:if(isCustomElement(tag)){for(propValue$184 in props)props.hasOwnProperty(propValue$184)&&(hasSrc=props[propValue$184],hasSrc!==void 0&&setPropOnCustomElement(domElement,tag,propValue$184,hasSrc,props,void 0));return}}for(defaultValue$3 in props)props.hasOwnProperty(defaultValue$3)&&(hasSrc=props[defaultValue$3],hasSrc!=null&&setProp(domElement,tag,defaultValue$3,hasSrc,props,null))}function updateProperties(domElement,tag,lastProps,nextProps){switch(tag){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var name=null,type=null,value=null,defaultValue$3=null,lastDefaultValue=null,checked=null,defaultChecked=null;for(propKey in lastProps){var lastProp=lastProps[propKey];if(lastProps.hasOwnProperty(propKey)&&lastProp!=null)switch(propKey){case`checked`:break;case`value`:break;case`defaultValue`:lastDefaultValue=lastProp;default:nextProps.hasOwnProperty(propKey)||setProp(domElement,tag,propKey,null,nextProps,lastProp)}}for(var propKey$201 in nextProps){var propKey=nextProps[propKey$201];if(lastProp=lastProps[propKey$201],nextProps.hasOwnProperty(propKey$201)&&(propKey!=null||lastProp!=null))switch(propKey$201){case`type`:type=propKey;break;case`name`:name=propKey;break;case`checked`:checked=propKey;break;case`defaultChecked`:defaultChecked=propKey;break;case`value`:value=propKey;break;case`defaultValue`:defaultValue$3=propKey;break;case`children`:case`dangerouslySetInnerHTML`:if(propKey!=null)throw Error(formatProdErrorMessage$2(137,tag));break;default:propKey!==lastProp&&setProp(domElement,tag,propKey$201,propKey,nextProps,lastProp)}}updateInput(domElement,value,defaultValue$3,lastDefaultValue,checked,defaultChecked,type,name);return;case`select`:for(type in propKey=value=defaultValue$3=propKey$201=null,lastProps)if(lastDefaultValue=lastProps[type],lastProps.hasOwnProperty(type)&&lastDefaultValue!=null)switch(type){case`value`:break;case`multiple`:propKey=lastDefaultValue;default:nextProps.hasOwnProperty(type)||setProp(domElement,tag,type,null,nextProps,lastDefaultValue)}for(name in nextProps)if(type=nextProps[name],lastDefaultValue=lastProps[name],nextProps.hasOwnProperty(name)&&(type!=null||lastDefaultValue!=null))switch(name){case`value`:propKey$201=type;break;case`defaultValue`:defaultValue$3=type;break;case`multiple`:value=type;default:type!==lastDefaultValue&&setProp(domElement,tag,name,type,nextProps,lastDefaultValue)}tag=defaultValue$3,lastProps=value,nextProps=propKey,propKey$201==null?!!nextProps!=!!lastProps&&(tag==null?updateOptions(domElement,!!lastProps,lastProps?[]:``,!1):updateOptions(domElement,!!lastProps,tag,!0)):updateOptions(domElement,!!lastProps,propKey$201,!1);return;case`textarea`:for(defaultValue$3 in propKey=propKey$201=null,lastProps)if(name=lastProps[defaultValue$3],lastProps.hasOwnProperty(defaultValue$3)&&name!=null&&!nextProps.hasOwnProperty(defaultValue$3))switch(defaultValue$3){case`value`:break;case`children`:break;default:setProp(domElement,tag,defaultValue$3,null,nextProps,name)}for(value in nextProps)if(name=nextProps[value],type=lastProps[value],nextProps.hasOwnProperty(value)&&(name!=null||type!=null))switch(value){case`value`:propKey$201=name;break;case`defaultValue`:propKey=name;break;case`children`:break;case`dangerouslySetInnerHTML`:if(name!=null)throw Error(formatProdErrorMessage$2(91));break;default:name!==type&&setProp(domElement,tag,value,name,nextProps,type)}updateTextarea(domElement,propKey$201,propKey);return;case`option`:for(var propKey$217 in lastProps)if(propKey$201=lastProps[propKey$217],lastProps.hasOwnProperty(propKey$217)&&propKey$201!=null&&!nextProps.hasOwnProperty(propKey$217))switch(propKey$217){case`selected`:domElement.selected=!1;break;default:setProp(domElement,tag,propKey$217,null,nextProps,propKey$201)}for(lastDefaultValue in nextProps)if(propKey$201=nextProps[lastDefaultValue],propKey=lastProps[lastDefaultValue],nextProps.hasOwnProperty(lastDefaultValue)&&propKey$201!==propKey&&(propKey$201!=null||propKey!=null))switch(lastDefaultValue){case`selected`:domElement.selected=propKey$201&&typeof propKey$201!=`function`&&typeof propKey$201!=`symbol`;break;default:setProp(domElement,tag,lastDefaultValue,propKey$201,nextProps,propKey)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var propKey$222 in lastProps)propKey$201=lastProps[propKey$222],lastProps.hasOwnProperty(propKey$222)&&propKey$201!=null&&!nextProps.hasOwnProperty(propKey$222)&&setProp(domElement,tag,propKey$222,null,nextProps,propKey$201);for(checked in nextProps)if(propKey$201=nextProps[checked],propKey=lastProps[checked],nextProps.hasOwnProperty(checked)&&propKey$201!==propKey&&(propKey$201!=null||propKey!=null))switch(checked){case`children`:case`dangerouslySetInnerHTML`:if(propKey$201!=null)throw Error(formatProdErrorMessage$2(137,tag));break;default:setProp(domElement,tag,checked,propKey$201,nextProps,propKey)}return;default:if(isCustomElement(tag)){for(var propKey$227 in lastProps)propKey$201=lastProps[propKey$227],lastProps.hasOwnProperty(propKey$227)&&propKey$201!==void 0&&!nextProps.hasOwnProperty(propKey$227)&&setPropOnCustomElement(domElement,tag,propKey$227,void 0,nextProps,propKey$201);for(defaultChecked in nextProps)propKey$201=nextProps[defaultChecked],propKey=lastProps[defaultChecked],!nextProps.hasOwnProperty(defaultChecked)||propKey$201===propKey||propKey$201===void 0&&propKey===void 0||setPropOnCustomElement(domElement,tag,defaultChecked,propKey$201,nextProps,propKey);return}}for(var propKey$232 in lastProps)propKey$201=lastProps[propKey$232],lastProps.hasOwnProperty(propKey$232)&&propKey$201!=null&&!nextProps.hasOwnProperty(propKey$232)&&setProp(domElement,tag,propKey$232,null,nextProps,propKey$201);for(lastProp in nextProps)propKey$201=nextProps[lastProp],propKey=lastProps[lastProp],!nextProps.hasOwnProperty(lastProp)||propKey$201===propKey||propKey$201==null&&propKey==null||setProp(domElement,tag,lastProp,propKey$201,nextProps,propKey)}function isLikelyStaticResource(initiatorType){switch(initiatorType){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function estimateBandwidth(){if(typeof performance.getEntriesByType==`function`){for(var count=0,bits=0,resourceEntries=performance.getEntriesByType(`resource`),i$4=0;i$4<resourceEntries.length;i$4++){var entry=resourceEntries[i$4],transferSize=entry.transferSize,initiatorType=entry.initiatorType,duration=entry.duration;if(transferSize&&duration&&isLikelyStaticResource(initiatorType)){for(initiatorType=0,duration=entry.responseEnd,i$4+=1;i$4<resourceEntries.length;i$4++){var overlapEntry=resourceEntries[i$4],overlapStartTime=overlapEntry.startTime;if(overlapStartTime>duration)break;var overlapTransferSize=overlapEntry.transferSize,overlapInitiatorType=overlapEntry.initiatorType;overlapTransferSize&&isLikelyStaticResource(overlapInitiatorType)&&(overlapEntry=overlapEntry.responseEnd,initiatorType+=overlapTransferSize*(overlapEntry<duration?1:(duration-overlapStartTime)/(overlapEntry-overlapStartTime)))}if(--i$4,bits+=8*(transferSize+initiatorType)/(entry.duration/1e3),count++,10<count)break}}if(0<count)return bits/count/1e6}return navigator.connection&&(count=navigator.connection.downlink,typeof count==`number`)?count:5}var eventsEnabled=null,selectionInformation=null;function getOwnerDocumentFromRootContainer(rootContainerElement){return rootContainerElement.nodeType===9?rootContainerElement:rootContainerElement.ownerDocument}function getOwnHostContext(namespaceURI){switch(namespaceURI){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function getChildHostContextProd(parentNamespace,type){if(parentNamespace===0)switch(type){case`svg`:return 1;case`math`:return 2;default:return 0}return parentNamespace===1&&type===`foreignObject`?0:parentNamespace}function shouldSetTextContent(type,props){return type===`textarea`||type===`noscript`||typeof props.children==`string`||typeof props.children==`number`||typeof props.children==`bigint`||typeof props.dangerouslySetInnerHTML==`object`&&props.dangerouslySetInnerHTML!==null&&props.dangerouslySetInnerHTML.__html!=null}var currentPopstateTransitionEvent=null;function shouldAttemptEagerTransition(){var event=window.event;return event&&event.type===`popstate`?event===currentPopstateTransitionEvent?!1:(currentPopstateTransitionEvent=event,!0):(currentPopstateTransitionEvent=null,!1)}var scheduleTimeout=typeof setTimeout==`function`?setTimeout:void 0,cancelTimeout=typeof clearTimeout==`function`?clearTimeout:void 0,localPromise=typeof Promise==`function`?Promise:void 0,scheduleMicrotask=typeof queueMicrotask==`function`?queueMicrotask:localPromise===void 0?scheduleTimeout:function(callback){return localPromise.resolve(null).then(callback).catch(handleErrorInNextTick)};function handleErrorInNextTick(error$1){setTimeout(function(){throw error$1})}function isSingletonScope(type){return type===`head`}function clearHydrationBoundary(parentInstance,hydrationInstance){var node=hydrationInstance,depth=0;do{var nextNode=node.nextSibling;if(parentInstance.removeChild(node),nextNode&&nextNode.nodeType===8)if(node=nextNode.data,node===`/$`||node===`/&`){if(depth===0){parentInstance.removeChild(nextNode),retryIfBlockedOn(hydrationInstance);return}depth--}else if(node===`$`||node===`$?`||node===`$~`||node===`$!`||node===`&`)depth++;else if(node===`html`)releaseSingletonInstance(parentInstance.ownerDocument.documentElement);else if(node===`head`){node=parentInstance.ownerDocument.head,releaseSingletonInstance(node);for(var node$jscomp$0=node.firstChild;node$jscomp$0;){var nextNode$jscomp$0=node$jscomp$0.nextSibling,nodeName=node$jscomp$0.nodeName;node$jscomp$0[internalHoistableMarker]||nodeName===`SCRIPT`||nodeName===`STYLE`||nodeName===`LINK`&&node$jscomp$0.rel.toLowerCase()===`stylesheet`||node.removeChild(node$jscomp$0),node$jscomp$0=nextNode$jscomp$0}}else node===`body`&&releaseSingletonInstance(parentInstance.ownerDocument.body);node=nextNode}while(node);retryIfBlockedOn(hydrationInstance)}function hideOrUnhideDehydratedBoundary(suspenseInstance,isHidden){var node=suspenseInstance;suspenseInstance=0;do{var nextNode=node.nextSibling;if(node.nodeType===1?isHidden?(node._stashedDisplay=node.style.display,node.style.display=`none`):(node.style.display=node._stashedDisplay||``,node.getAttribute(`style`)===``&&node.removeAttribute(`style`)):node.nodeType===3&&(isHidden?(node._stashedText=node.nodeValue,node.nodeValue=``):node.nodeValue=node._stashedText||``),nextNode&&nextNode.nodeType===8)if(node=nextNode.data,node===`/$`){if(suspenseInstance===0)break;suspenseInstance--}else node!==`$`&&node!==`$?`&&node!==`$~`&&node!==`$!`||suspenseInstance++;node=nextNode}while(node)}function clearContainerSparingly(container){var nextNode=container.firstChild;for(nextNode&&nextNode.nodeType===10&&(nextNode=nextNode.nextSibling);nextNode;){var node=nextNode;switch(nextNode=nextNode.nextSibling,node.nodeName){case`HTML`:case`HEAD`:case`BODY`:clearContainerSparingly(node),detachDeletedInstance(node);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(node.rel.toLowerCase()===`stylesheet`)continue}container.removeChild(node)}}function canHydrateInstance(instance,type,props,inRootOrSingleton){for(;instance.nodeType===1;){var anyProps=props;if(instance.nodeName.toLowerCase()!==type.toLowerCase()){if(!inRootOrSingleton&&(instance.nodeName!==`INPUT`||instance.type!==`hidden`))break}else if(inRootOrSingleton){if(!instance[internalHoistableMarker])switch(type){case`meta`:if(!instance.hasAttribute(`itemprop`))break;return instance;case`link`:if(name=instance.getAttribute(`rel`),name===`stylesheet`&&instance.hasAttribute(`data-precedence`)||name!==anyProps.rel||instance.getAttribute(`href`)!==(anyProps.href==null||anyProps.href===``?null:anyProps.href)||instance.getAttribute(`crossorigin`)!==(anyProps.crossOrigin==null?null:anyProps.crossOrigin)||instance.getAttribute(`title`)!==(anyProps.title==null?null:anyProps.title))break;return instance;case`style`:if(instance.hasAttribute(`data-precedence`))break;return instance;case`script`:if(name=instance.getAttribute(`src`),(name!==(anyProps.src==null?null:anyProps.src)||instance.getAttribute(`type`)!==(anyProps.type==null?null:anyProps.type)||instance.getAttribute(`crossorigin`)!==(anyProps.crossOrigin==null?null:anyProps.crossOrigin))&&name&&instance.hasAttribute(`async`)&&!instance.hasAttribute(`itemprop`))break;return instance;default:return instance}}else if(type===`input`&&instance.type===`hidden`){var name=anyProps.name==null?null:``+anyProps.name;if(anyProps.type===`hidden`&&instance.getAttribute(`name`)===name)return instance}else return instance;if(instance=getNextHydratable(instance.nextSibling),instance===null)break}return null}function canHydrateTextInstance(instance,text,inRootOrSingleton){if(text===``)return null;for(;instance.nodeType!==3;)if((instance.nodeType!==1||instance.nodeName!==`INPUT`||instance.type!==`hidden`)&&!inRootOrSingleton||(instance=getNextHydratable(instance.nextSibling),instance===null))return null;return instance}function canHydrateHydrationBoundary(instance,inRootOrSingleton){for(;instance.nodeType!==8;)if((instance.nodeType!==1||instance.nodeName!==`INPUT`||instance.type!==`hidden`)&&!inRootOrSingleton||(instance=getNextHydratable(instance.nextSibling),instance===null))return null;return instance}function isSuspenseInstancePending(instance){return instance.data===`$?`||instance.data===`$~`}function isSuspenseInstanceFallback(instance){return instance.data===`$!`||instance.data===`$?`&&instance.ownerDocument.readyState!==`loading`}function registerSuspenseInstanceRetry(instance,callback){var ownerDocument=instance.ownerDocument;if(instance.data===`$~`)instance._reactRetry=callback;else if(instance.data!==`$?`||ownerDocument.readyState!==`loading`)callback();else{var listener=function(){callback(),ownerDocument.removeEventListener(`DOMContentLoaded`,listener)};ownerDocument.addEventListener(`DOMContentLoaded`,listener),instance._reactRetry=listener}}function getNextHydratable(node){for(;node!=null;node=node.nextSibling){var nodeType=node.nodeType;if(nodeType===1||nodeType===3)break;if(nodeType===8){if(nodeType=node.data,nodeType===`$`||nodeType===`$!`||nodeType===`$?`||nodeType===`$~`||nodeType===`&`||nodeType===`F!`||nodeType===`F`)break;if(nodeType===`/$`||nodeType===`/&`)return null}}return node}var previousHydratableOnEnteringScopedSingleton=null;function getNextHydratableInstanceAfterHydrationBoundary(hydrationInstance){hydrationInstance=hydrationInstance.nextSibling;for(var depth=0;hydrationInstance;){if(hydrationInstance.nodeType===8){var data=hydrationInstance.data;if(data===`/$`||data===`/&`){if(depth===0)return getNextHydratable(hydrationInstance.nextSibling);depth--}else data!==`$`&&data!==`$!`&&data!==`$?`&&data!==`$~`&&data!==`&`||depth++}hydrationInstance=hydrationInstance.nextSibling}return null}function getParentHydrationBoundary(targetInstance){targetInstance=targetInstance.previousSibling;for(var depth=0;targetInstance;){if(targetInstance.nodeType===8){var data=targetInstance.data;if(data===`$`||data===`$!`||data===`$?`||data===`$~`||data===`&`){if(depth===0)return targetInstance;depth--}else data!==`/$`&&data!==`/&`||depth++}targetInstance=targetInstance.previousSibling}return null}function resolveSingletonInstance(type,props,rootContainerInstance){switch(props=getOwnerDocumentFromRootContainer(rootContainerInstance),type){case`html`:if(type=props.documentElement,!type)throw Error(formatProdErrorMessage$2(452));return type;case`head`:if(type=props.head,!type)throw Error(formatProdErrorMessage$2(453));return type;case`body`:if(type=props.body,!type)throw Error(formatProdErrorMessage$2(454));return type;default:throw Error(formatProdErrorMessage$2(451))}}function releaseSingletonInstance(instance){for(var attributes=instance.attributes;attributes.length;)instance.removeAttributeNode(attributes[0]);detachDeletedInstance(instance)}var preloadPropsMap=new Map,preconnectsSet=new Set;function getHoistableRoot(container){return typeof container.getRootNode==`function`?container.getRootNode():container.nodeType===9?container:container.ownerDocument}var previousDispatcher=ReactDOMSharedInternals.d;ReactDOMSharedInternals.d={f:flushSyncWork,r:requestFormReset,D:prefetchDNS,C:preconnect,L:preload,m:preloadModule,X:preinitScript,S:preinitStyle,M:preinitModuleScript};function flushSyncWork(){var previousWasRendering=previousDispatcher.f(),wasRendering=flushSyncWork$1();return previousWasRendering||wasRendering}function requestFormReset(form){var formInst=getInstanceFromNode(form);formInst!==null&&formInst.tag===5&&formInst.type===`form`?requestFormReset$1(formInst):previousDispatcher.r(form)}var globalDocument=typeof document>`u`?null:document;function preconnectAs(rel,href,crossOrigin){var ownerDocument=globalDocument;if(ownerDocument&&typeof href==`string`&&href){var limitedEscapedHref=escapeSelectorAttributeValueInsideDoubleQuotes(href);limitedEscapedHref=`link[rel="`+rel+`"][href="`+limitedEscapedHref+`"]`,typeof crossOrigin==`string`&&(limitedEscapedHref+=`[crossorigin="`+crossOrigin+`"]`),preconnectsSet.has(limitedEscapedHref)||(preconnectsSet.add(limitedEscapedHref),rel={rel,crossOrigin,href},ownerDocument.querySelector(limitedEscapedHref)===null&&(href=ownerDocument.createElement(`link`),setInitialProperties(href,`link`,rel),markNodeAsHoistable(href),ownerDocument.head.appendChild(href)))}}function prefetchDNS(href){previousDispatcher.D(href),preconnectAs(`dns-prefetch`,href,null)}function preconnect(href,crossOrigin){previousDispatcher.C(href,crossOrigin),preconnectAs(`preconnect`,href,crossOrigin)}function preload(href,as,options$1){previousDispatcher.L(href,as,options$1);var ownerDocument=globalDocument;if(ownerDocument&&href&&as){var preloadSelector=`link[rel="preload"][as="`+escapeSelectorAttributeValueInsideDoubleQuotes(as)+`"]`;as===`image`&&options$1&&options$1.imageSrcSet?(preloadSelector+=`[imagesrcset="`+escapeSelectorAttributeValueInsideDoubleQuotes(options$1.imageSrcSet)+`"]`,typeof options$1.imageSizes==`string`&&(preloadSelector+=`[imagesizes="`+escapeSelectorAttributeValueInsideDoubleQuotes(options$1.imageSizes)+`"]`)):preloadSelector+=`[href="`+escapeSelectorAttributeValueInsideDoubleQuotes(href)+`"]`;var key$1=preloadSelector;switch(as){case`style`:key$1=getStyleKey(href);break;case`script`:key$1=getScriptKey(href)}preloadPropsMap.has(key$1)||(href=assign({rel:`preload`,href:as===`image`&&options$1&&options$1.imageSrcSet?void 0:href,as},options$1),preloadPropsMap.set(key$1,href),ownerDocument.querySelector(preloadSelector)!==null||as===`style`&&ownerDocument.querySelector(getStylesheetSelectorFromKey(key$1))||as===`script`&&ownerDocument.querySelector(getScriptSelectorFromKey(key$1))||(as=ownerDocument.createElement(`link`),setInitialProperties(as,`link`,href),markNodeAsHoistable(as),ownerDocument.head.appendChild(as)))}}function preloadModule(href,options$1){previousDispatcher.m(href,options$1);var ownerDocument=globalDocument;if(ownerDocument&&href){var as=options$1&&typeof options$1.as==`string`?options$1.as:`script`,preloadSelector=`link[rel="modulepreload"][as="`+escapeSelectorAttributeValueInsideDoubleQuotes(as)+`"][href="`+escapeSelectorAttributeValueInsideDoubleQuotes(href)+`"]`,key$1=preloadSelector;switch(as){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:key$1=getScriptKey(href)}if(!preloadPropsMap.has(key$1)&&(href=assign({rel:`modulepreload`,href},options$1),preloadPropsMap.set(key$1,href),ownerDocument.querySelector(preloadSelector)===null)){switch(as){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(ownerDocument.querySelector(getScriptSelectorFromKey(key$1)))return}as=ownerDocument.createElement(`link`),setInitialProperties(as,`link`,href),markNodeAsHoistable(as),ownerDocument.head.appendChild(as)}}}function preinitStyle(href,precedence,options$1){previousDispatcher.S(href,precedence,options$1);var ownerDocument=globalDocument;if(ownerDocument&&href){var styles$1=getResourcesFromRoot(ownerDocument).hoistableStyles,key$1=getStyleKey(href);precedence||=`default`;var resource=styles$1.get(key$1);if(!resource){var state={loading:0,preload:null};if(resource=ownerDocument.querySelector(getStylesheetSelectorFromKey(key$1)))state.loading=5;else{href=assign({rel:`stylesheet`,href,"data-precedence":precedence},options$1),(options$1=preloadPropsMap.get(key$1))&&adoptPreloadPropsForStylesheet(href,options$1);var link=resource=ownerDocument.createElement(`link`);markNodeAsHoistable(link),setInitialProperties(link,`link`,href),link._p=new Promise(function(resolve,reject){link.onload=resolve,link.onerror=reject}),link.addEventListener(`load`,function(){state.loading|=1}),link.addEventListener(`error`,function(){state.loading|=2}),state.loading|=4,insertStylesheet(resource,precedence,ownerDocument)}resource={type:`stylesheet`,instance:resource,count:1,state},styles$1.set(key$1,resource)}}}function preinitScript(src,options$1){previousDispatcher.X(src,options$1);var ownerDocument=globalDocument;if(ownerDocument&&src){var scripts=getResourcesFromRoot(ownerDocument).hoistableScripts,key$1=getScriptKey(src),resource=scripts.get(key$1);resource||(resource=ownerDocument.querySelector(getScriptSelectorFromKey(key$1)),resource||(src=assign({src,async:!0},options$1),(options$1=preloadPropsMap.get(key$1))&&adoptPreloadPropsForScript(src,options$1),resource=ownerDocument.createElement(`script`),markNodeAsHoistable(resource),setInitialProperties(resource,`link`,src),ownerDocument.head.appendChild(resource)),resource={type:`script`,instance:resource,count:1,state:null},scripts.set(key$1,resource))}}function preinitModuleScript(src,options$1){previousDispatcher.M(src,options$1);var ownerDocument=globalDocument;if(ownerDocument&&src){var scripts=getResourcesFromRoot(ownerDocument).hoistableScripts,key$1=getScriptKey(src),resource=scripts.get(key$1);resource||(resource=ownerDocument.querySelector(getScriptSelectorFromKey(key$1)),resource||(src=assign({src,async:!0,type:`module`},options$1),(options$1=preloadPropsMap.get(key$1))&&adoptPreloadPropsForScript(src,options$1),resource=ownerDocument.createElement(`script`),markNodeAsHoistable(resource),setInitialProperties(resource,`link`,src),ownerDocument.head.appendChild(resource)),resource={type:`script`,instance:resource,count:1,state:null},scripts.set(key$1,resource))}}function getResource(type,currentProps,pendingProps,currentResource){var JSCompiler_inline_result=(JSCompiler_inline_result=rootInstanceStackCursor.current)?getHoistableRoot(JSCompiler_inline_result):null;if(!JSCompiler_inline_result)throw Error(formatProdErrorMessage$2(446));switch(type){case`meta`:case`title`:return null;case`style`:return typeof pendingProps.precedence==`string`&&typeof pendingProps.href==`string`?(currentProps=getStyleKey(pendingProps.href),pendingProps=getResourcesFromRoot(JSCompiler_inline_result).hoistableStyles,currentResource=pendingProps.get(currentProps),currentResource||(currentResource={type:`style`,instance:null,count:0,state:null},pendingProps.set(currentProps,currentResource)),currentResource):{type:`void`,instance:null,count:0,state:null};case`link`:if(pendingProps.rel===`stylesheet`&&typeof pendingProps.href==`string`&&typeof pendingProps.precedence==`string`){type=getStyleKey(pendingProps.href);var styles$243=getResourcesFromRoot(JSCompiler_inline_result).hoistableStyles,resource$244=styles$243.get(type);if(resource$244||(JSCompiler_inline_result=JSCompiler_inline_result.ownerDocument||JSCompiler_inline_result,resource$244={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},styles$243.set(type,resource$244),(styles$243=JSCompiler_inline_result.querySelector(getStylesheetSelectorFromKey(type)))&&!styles$243._p&&(resource$244.instance=styles$243,resource$244.state.loading=5),preloadPropsMap.has(type)||(pendingProps={rel:`preload`,as:`style`,href:pendingProps.href,crossOrigin:pendingProps.crossOrigin,integrity:pendingProps.integrity,media:pendingProps.media,hrefLang:pendingProps.hrefLang,referrerPolicy:pendingProps.referrerPolicy},preloadPropsMap.set(type,pendingProps),styles$243||preloadStylesheet(JSCompiler_inline_result,type,pendingProps,resource$244.state))),currentProps&&currentResource===null)throw Error(formatProdErrorMessage$2(528,``));return resource$244}if(currentProps&&currentResource!==null)throw Error(formatProdErrorMessage$2(529,``));return null;case`script`:return currentProps=pendingProps.async,pendingProps=pendingProps.src,typeof pendingProps==`string`&&currentProps&&typeof currentProps!=`function`&&typeof currentProps!=`symbol`?(currentProps=getScriptKey(pendingProps),pendingProps=getResourcesFromRoot(JSCompiler_inline_result).hoistableScripts,currentResource=pendingProps.get(currentProps),currentResource||(currentResource={type:`script`,instance:null,count:0,state:null},pendingProps.set(currentProps,currentResource)),currentResource):{type:`void`,instance:null,count:0,state:null};default:throw Error(formatProdErrorMessage$2(444,type))}}function getStyleKey(href){return`href="`+escapeSelectorAttributeValueInsideDoubleQuotes(href)+`"`}function getStylesheetSelectorFromKey(key$1){return`link[rel="stylesheet"][`+key$1+`]`}function stylesheetPropsFromRawProps(rawProps){return assign({},rawProps,{"data-precedence":rawProps.precedence,precedence:null})}function preloadStylesheet(ownerDocument,key$1,preloadProps,state){ownerDocument.querySelector(`link[rel="preload"][as="style"][`+key$1+`]`)?state.loading=1:(key$1=ownerDocument.createElement(`link`),state.preload=key$1,key$1.addEventListener(`load`,function(){return state.loading|=1}),key$1.addEventListener(`error`,function(){return state.loading|=2}),setInitialProperties(key$1,`link`,preloadProps),markNodeAsHoistable(key$1),ownerDocument.head.appendChild(key$1))}function getScriptKey(src){return`[src="`+escapeSelectorAttributeValueInsideDoubleQuotes(src)+`"]`}function getScriptSelectorFromKey(key$1){return`script[async]`+key$1}function acquireResource(hoistableRoot,resource,props){if(resource.count++,resource.instance===null)switch(resource.type){case`style`:var instance=hoistableRoot.querySelector(`style[data-href~="`+escapeSelectorAttributeValueInsideDoubleQuotes(props.href)+`"]`);if(instance)return resource.instance=instance,markNodeAsHoistable(instance),instance;var styleProps=assign({},props,{"data-href":props.href,"data-precedence":props.precedence,href:null,precedence:null});return instance=(hoistableRoot.ownerDocument||hoistableRoot).createElement(`style`),markNodeAsHoistable(instance),setInitialProperties(instance,`style`,styleProps),insertStylesheet(instance,props.precedence,hoistableRoot),resource.instance=instance;case`stylesheet`:styleProps=getStyleKey(props.href);var instance$249=hoistableRoot.querySelector(getStylesheetSelectorFromKey(styleProps));if(instance$249)return resource.state.loading|=4,resource.instance=instance$249,markNodeAsHoistable(instance$249),instance$249;instance=stylesheetPropsFromRawProps(props),(styleProps=preloadPropsMap.get(styleProps))&&adoptPreloadPropsForStylesheet(instance,styleProps),instance$249=(hoistableRoot.ownerDocument||hoistableRoot).createElement(`link`),markNodeAsHoistable(instance$249);var linkInstance=instance$249;return linkInstance._p=new Promise(function(resolve,reject){linkInstance.onload=resolve,linkInstance.onerror=reject}),setInitialProperties(instance$249,`link`,instance),resource.state.loading|=4,insertStylesheet(instance$249,props.precedence,hoistableRoot),resource.instance=instance$249;case`script`:return instance$249=getScriptKey(props.src),(styleProps=hoistableRoot.querySelector(getScriptSelectorFromKey(instance$249)))?(resource.instance=styleProps,markNodeAsHoistable(styleProps),styleProps):(instance=props,(styleProps=preloadPropsMap.get(instance$249))&&(instance=assign({},props),adoptPreloadPropsForScript(instance,styleProps)),hoistableRoot=hoistableRoot.ownerDocument||hoistableRoot,styleProps=hoistableRoot.createElement(`script`),markNodeAsHoistable(styleProps),setInitialProperties(styleProps,`link`,instance),hoistableRoot.head.appendChild(styleProps),resource.instance=styleProps);case`void`:return null;default:throw Error(formatProdErrorMessage$2(443,resource.type))}else resource.type===`stylesheet`&&!(resource.state.loading&4)&&(instance=resource.instance,resource.state.loading|=4,insertStylesheet(instance,props.precedence,hoistableRoot));return resource.instance}function insertStylesheet(instance,precedence,root$3){for(var nodes=root$3.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),last=nodes.length?nodes[nodes.length-1]:null,prior=last,i$4=0;i$4<nodes.length;i$4++){var node=nodes[i$4];if(node.dataset.precedence===precedence)prior=node;else if(prior!==last)break}prior?prior.parentNode.insertBefore(instance,prior.nextSibling):(precedence=root$3.nodeType===9?root$3.head:root$3,precedence.insertBefore(instance,precedence.firstChild))}function adoptPreloadPropsForStylesheet(stylesheetProps,preloadProps){stylesheetProps.crossOrigin??=preloadProps.crossOrigin,stylesheetProps.referrerPolicy??=preloadProps.referrerPolicy,stylesheetProps.title??=preloadProps.title}function adoptPreloadPropsForScript(scriptProps,preloadProps){scriptProps.crossOrigin??=preloadProps.crossOrigin,scriptProps.referrerPolicy??=preloadProps.referrerPolicy,scriptProps.integrity??=preloadProps.integrity}var tagCaches=null;function getHydratableHoistableCache(type,keyAttribute,ownerDocument){if(tagCaches===null){var cache=new Map,caches=tagCaches=new Map;caches.set(ownerDocument,cache)}else caches=tagCaches,cache=caches.get(ownerDocument),cache||(cache=new Map,caches.set(ownerDocument,cache));if(cache.has(type))return cache;for(cache.set(type,null),ownerDocument=ownerDocument.getElementsByTagName(type),caches=0;caches<ownerDocument.length;caches++){var node=ownerDocument[caches];if(!(node[internalHoistableMarker]||node[internalInstanceKey]||type===`link`&&node.getAttribute(`rel`)===`stylesheet`)&&node.namespaceURI!==`http://www.w3.org/2000/svg`){var nodeKey=node.getAttribute(keyAttribute)||``;nodeKey=type+nodeKey;var existing=cache.get(nodeKey);existing?existing.push(node):cache.set(nodeKey,[node])}}return cache}function mountHoistable(hoistableRoot,type,instance){hoistableRoot=hoistableRoot.ownerDocument||hoistableRoot,hoistableRoot.head.insertBefore(instance,type===`title`?hoistableRoot.querySelector(`head > title`):null)}function isHostHoistableType(type,props,hostContext){if(hostContext===1||props.itemProp!=null)return!1;switch(type){case`meta`:case`title`:return!0;case`style`:if(typeof props.precedence!=`string`||typeof props.href!=`string`||props.href===``)break;return!0;case`link`:if(typeof props.rel!=`string`||typeof props.href!=`string`||props.href===``||props.onLoad||props.onError)break;switch(props.rel){case`stylesheet`:return type=props.disabled,typeof props.precedence==`string`&&type==null;default:return!0}case`script`:if(props.async&&typeof props.async!=`function`&&typeof props.async!=`symbol`&&!props.onLoad&&!props.onError&&props.src&&typeof props.src==`string`)return!0}return!1}function preloadResource(resource){return!(resource.type===`stylesheet`&&!(resource.state.loading&3))}function suspendResource(state,hoistableRoot,resource,props){if(resource.type===`stylesheet`&&(typeof props.media!=`string`||!1!==matchMedia(props.media).matches)&&!(resource.state.loading&4)){if(resource.instance===null){var key$1=getStyleKey(props.href),instance=hoistableRoot.querySelector(getStylesheetSelectorFromKey(key$1));if(instance){hoistableRoot=instance._p,typeof hoistableRoot==`object`&&hoistableRoot&&typeof hoistableRoot.then==`function`&&(state.count++,state=onUnsuspend.bind(state),hoistableRoot.then(state,state)),resource.state.loading|=4,resource.instance=instance,markNodeAsHoistable(instance);return}instance=hoistableRoot.ownerDocument||hoistableRoot,props=stylesheetPropsFromRawProps(props),(key$1=preloadPropsMap.get(key$1))&&adoptPreloadPropsForStylesheet(props,key$1),instance=instance.createElement(`link`),markNodeAsHoistable(instance);var linkInstance=instance;linkInstance._p=new Promise(function(resolve,reject){linkInstance.onload=resolve,linkInstance.onerror=reject}),setInitialProperties(instance,`link`,props),resource.instance=instance}state.stylesheets===null&&(state.stylesheets=new Map),state.stylesheets.set(resource,hoistableRoot),(hoistableRoot=resource.state.preload)&&!(resource.state.loading&3)&&(state.count++,resource=onUnsuspend.bind(state),hoistableRoot.addEventListener(`load`,resource),hoistableRoot.addEventListener(`error`,resource))}}var estimatedBytesWithinLimit=0;function waitForCommitToBeReady(state,timeoutOffset){return state.stylesheets&&state.count===0&&insertSuspendedStylesheets(state,state.stylesheets),0<state.count||0<state.imgCount?function(commit){var stylesheetTimer=setTimeout(function(){if(state.stylesheets&&insertSuspendedStylesheets(state,state.stylesheets),state.unsuspend){var unsuspend=state.unsuspend;state.unsuspend=null,unsuspend()}},6e4+timeoutOffset);0<state.imgBytes&&estimatedBytesWithinLimit===0&&(estimatedBytesWithinLimit=62500*estimateBandwidth());var imgTimer=setTimeout(function(){if(state.waitingForImages=!1,state.count===0&&(state.stylesheets&&insertSuspendedStylesheets(state,state.stylesheets),state.unsuspend)){var unsuspend=state.unsuspend;state.unsuspend=null,unsuspend()}},(state.imgBytes>estimatedBytesWithinLimit?50:800)+timeoutOffset);return state.unsuspend=commit,function(){state.unsuspend=null,clearTimeout(stylesheetTimer),clearTimeout(imgTimer)}}:null}function onUnsuspend(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)insertSuspendedStylesheets(this,this.stylesheets);else if(this.unsuspend){var unsuspend=this.unsuspend;this.unsuspend=null,unsuspend()}}}var precedencesByRoot=null;function insertSuspendedStylesheets(state,resources){state.stylesheets=null,state.unsuspend!==null&&(state.count++,precedencesByRoot=new Map,resources.forEach(insertStylesheetIntoRoot,state),precedencesByRoot=null,onUnsuspend.call(state))}function insertStylesheetIntoRoot(root$3,resource){if(!(resource.state.loading&4)){var precedences=precedencesByRoot.get(root$3);if(precedences)var last=precedences.get(null);else{precedences=new Map,precedencesByRoot.set(root$3,precedences);for(var nodes=root$3.querySelectorAll(`link[data-precedence],style[data-precedence]`),i$4=0;i$4<nodes.length;i$4++){var node=nodes[i$4];(node.nodeName===`LINK`||node.getAttribute(`media`)!==`not all`)&&(precedences.set(node.dataset.precedence,node),last=node)}last&&precedences.set(null,last)}nodes=resource.instance,node=nodes.getAttribute(`data-precedence`),i$4=precedences.get(node)||last,i$4===last&&precedences.set(null,nodes),precedences.set(node,nodes),this.count++,last=onUnsuspend.bind(this),nodes.addEventListener(`load`,last),nodes.addEventListener(`error`,last),i$4?i$4.parentNode.insertBefore(nodes,i$4.nextSibling):(root$3=root$3.nodeType===9?root$3.head:root$3,root$3.insertBefore(nodes,root$3.firstChild)),resource.state.loading|=4}}var HostTransitionContext={$$typeof:REACT_CONTEXT_TYPE$1,Provider:null,Consumer:null,_currentValue:sharedNotPendingObject,_currentValue2:sharedNotPendingObject,_threadCount:0};function FiberRootNode(containerInfo,tag,hydrate,identifierPrefix,onUncaughtError,onCaughtError,onRecoverableError,onDefaultTransitionIndicator,formState){this.tag=1,this.containerInfo=containerInfo,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=createLaneMap(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=createLaneMap(0),this.hiddenUpdates=createLaneMap(null),this.identifierPrefix=identifierPrefix,this.onUncaughtError=onUncaughtError,this.onCaughtError=onCaughtError,this.onRecoverableError=onRecoverableError,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=formState,this.incompleteTransitions=new Map}function createFiberRoot(containerInfo,tag,hydrate,initialChildren,hydrationCallbacks,isStrictMode,identifierPrefix,formState,onUncaughtError,onCaughtError,onRecoverableError,onDefaultTransitionIndicator){return containerInfo=new FiberRootNode(containerInfo,tag,hydrate,identifierPrefix,onUncaughtError,onCaughtError,onRecoverableError,onDefaultTransitionIndicator,formState),tag=1,!0===isStrictMode&&(tag|=24),isStrictMode=createFiberImplClass(3,null,null,tag),containerInfo.current=isStrictMode,isStrictMode.stateNode=containerInfo,tag=createCache(),tag.refCount++,containerInfo.pooledCache=tag,tag.refCount++,isStrictMode.memoizedState={element:initialChildren,isDehydrated:hydrate,cache:tag},initializeUpdateQueue(isStrictMode),containerInfo}function getContextForSubtree(parentComponent){return parentComponent?(parentComponent=emptyContextObject,parentComponent):emptyContextObject}function updateContainerImpl(rootFiber,lane,element,container,parentComponent,callback){parentComponent=getContextForSubtree(parentComponent),container.context===null?container.context=parentComponent:container.pendingContext=parentComponent,container=createUpdate(lane),container.payload={element},callback=callback===void 0?null:callback,callback!==null&&(container.callback=callback),element=enqueueUpdate(rootFiber,container,lane),element!==null&&(scheduleUpdateOnFiber(element,rootFiber,lane),entangleTransitions(element,rootFiber,lane))}function markRetryLaneImpl(fiber,retryLane){if(fiber=fiber.memoizedState,fiber!==null&&fiber.dehydrated!==null){var a$4=fiber.retryLane;fiber.retryLane=a$4!==0&&a$4<retryLane?a$4:retryLane}}function markRetryLaneIfNotHydrated(fiber,retryLane){markRetryLaneImpl(fiber,retryLane),(fiber=fiber.alternate)&&markRetryLaneImpl(fiber,retryLane)}function attemptContinuousHydration(fiber){if(fiber.tag===13||fiber.tag===31){var root$3=enqueueConcurrentRenderForLane(fiber,67108864);root$3!==null&&scheduleUpdateOnFiber(root$3,fiber,67108864),markRetryLaneIfNotHydrated(fiber,67108864)}}function attemptHydrationAtCurrentPriority(fiber){if(fiber.tag===13||fiber.tag===31){var lane=requestUpdateLane();lane=getBumpedLaneForHydrationByLane(lane);var root$3=enqueueConcurrentRenderForLane(fiber,lane);root$3!==null&&scheduleUpdateOnFiber(root$3,fiber,lane),markRetryLaneIfNotHydrated(fiber,lane)}}var _enabled=!0;function dispatchDiscreteEvent(domEventName,eventSystemFlags,container,nativeEvent){var prevTransition=ReactSharedInternals.T;ReactSharedInternals.T=null;var previousPriority=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=2,dispatchEvent$1(domEventName,eventSystemFlags,container,nativeEvent)}finally{ReactDOMSharedInternals.p=previousPriority,ReactSharedInternals.T=prevTransition}}function dispatchContinuousEvent(domEventName,eventSystemFlags,container,nativeEvent){var prevTransition=ReactSharedInternals.T;ReactSharedInternals.T=null;var previousPriority=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=8,dispatchEvent$1(domEventName,eventSystemFlags,container,nativeEvent)}finally{ReactDOMSharedInternals.p=previousPriority,ReactSharedInternals.T=prevTransition}}function dispatchEvent$1(domEventName,eventSystemFlags,targetContainer,nativeEvent){if(_enabled){var blockedOn=findInstanceBlockingEvent(nativeEvent);if(blockedOn===null)dispatchEventForPluginEventSystem(domEventName,eventSystemFlags,nativeEvent,return_targetInst,targetContainer),clearIfContinuousEvent(domEventName,nativeEvent);else if(queueIfContinuousEvent(blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent))nativeEvent.stopPropagation();else if(clearIfContinuousEvent(domEventName,nativeEvent),eventSystemFlags&4&&-1<discreteReplayableEvents.indexOf(domEventName)){for(;blockedOn!==null;){var fiber=getInstanceFromNode(blockedOn);if(fiber!==null)switch(fiber.tag){case 3:if(fiber=fiber.stateNode,fiber.current.memoizedState.isDehydrated){var lanes=getHighestPriorityLanes(fiber.pendingLanes);if(lanes!==0){var root$3=fiber;for(root$3.pendingLanes|=2,root$3.entangledLanes|=2;lanes;){var lane=1<<31-clz32(lanes);root$3.entanglements[1]|=lane,lanes&=~lane}ensureRootIsScheduled(fiber),!(executionContext&6)&&(workInProgressRootRenderTargetTime=now$3()+500,flushSyncWorkAcrossRoots_impl(0,!1))}}break;case 31:case 13:root$3=enqueueConcurrentRenderForLane(fiber,2),root$3!==null&&scheduleUpdateOnFiber(root$3,fiber,2),flushSyncWork$1(),markRetryLaneIfNotHydrated(fiber,2)}if(fiber=findInstanceBlockingEvent(nativeEvent),fiber===null&&dispatchEventForPluginEventSystem(domEventName,eventSystemFlags,nativeEvent,return_targetInst,targetContainer),fiber===blockedOn)break;blockedOn=fiber}blockedOn!==null&&nativeEvent.stopPropagation()}else dispatchEventForPluginEventSystem(domEventName,eventSystemFlags,nativeEvent,null,targetContainer)}}function findInstanceBlockingEvent(nativeEvent){return nativeEvent=getEventTarget(nativeEvent),findInstanceBlockingTarget(nativeEvent)}var return_targetInst=null;function findInstanceBlockingTarget(targetNode){if(return_targetInst=null,targetNode=getClosestInstanceFromNode(targetNode),targetNode!==null){var nearestMounted=getNearestMountedFiber(targetNode);if(nearestMounted===null)targetNode=null;else{var tag=nearestMounted.tag;if(tag===13){if(targetNode=getSuspenseInstanceFromFiber(nearestMounted),targetNode!==null)return targetNode;targetNode=null}else if(tag===31){if(targetNode=getActivityInstanceFromFiber(nearestMounted),targetNode!==null)return targetNode;targetNode=null}else if(tag===3){if(nearestMounted.stateNode.current.memoizedState.isDehydrated)return nearestMounted.tag===3?nearestMounted.stateNode.containerInfo:null;targetNode=null}else nearestMounted!==targetNode&&(targetNode=null)}}return return_targetInst=targetNode,null}function getEventPriority(domEventName){switch(domEventName){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(getCurrentPriorityLevel()){case ImmediatePriority:return 2;case UserBlockingPriority:return 8;case NormalPriority$1:case LowPriority:return 32;case IdlePriority:return 268435456;default:return 32}default:return 32}}var hasScheduledReplayAttempt=!1,queuedFocus=null,queuedDrag=null,queuedMouse=null,queuedPointers=new Map,queuedPointerCaptures=new Map,queuedExplicitHydrationTargets=[],discreteReplayableEvents=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function clearIfContinuousEvent(domEventName,nativeEvent){switch(domEventName){case`focusin`:case`focusout`:queuedFocus=null;break;case`dragenter`:case`dragleave`:queuedDrag=null;break;case`mouseover`:case`mouseout`:queuedMouse=null;break;case`pointerover`:case`pointerout`:queuedPointers.delete(nativeEvent.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:queuedPointerCaptures.delete(nativeEvent.pointerId)}}function accumulateOrCreateContinuousQueuedReplayableEvent(existingQueuedEvent,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent){return existingQueuedEvent===null||existingQueuedEvent.nativeEvent!==nativeEvent?(existingQueuedEvent={blockedOn,domEventName,eventSystemFlags,nativeEvent,targetContainers:[targetContainer]},blockedOn!==null&&(blockedOn=getInstanceFromNode(blockedOn),blockedOn!==null&&attemptContinuousHydration(blockedOn)),existingQueuedEvent):(existingQueuedEvent.eventSystemFlags|=eventSystemFlags,blockedOn=existingQueuedEvent.targetContainers,targetContainer!==null&&blockedOn.indexOf(targetContainer)===-1&&blockedOn.push(targetContainer),existingQueuedEvent)}function queueIfContinuousEvent(blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent){switch(domEventName){case`focusin`:return queuedFocus=accumulateOrCreateContinuousQueuedReplayableEvent(queuedFocus,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent),!0;case`dragenter`:return queuedDrag=accumulateOrCreateContinuousQueuedReplayableEvent(queuedDrag,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent),!0;case`mouseover`:return queuedMouse=accumulateOrCreateContinuousQueuedReplayableEvent(queuedMouse,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent),!0;case`pointerover`:var pointerId=nativeEvent.pointerId;return queuedPointers.set(pointerId,accumulateOrCreateContinuousQueuedReplayableEvent(queuedPointers.get(pointerId)||null,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent)),!0;case`gotpointercapture`:return pointerId=nativeEvent.pointerId,queuedPointerCaptures.set(pointerId,accumulateOrCreateContinuousQueuedReplayableEvent(queuedPointerCaptures.get(pointerId)||null,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent)),!0}return!1}function attemptExplicitHydrationTarget(queuedTarget){var targetInst=getClosestInstanceFromNode(queuedTarget.target);if(targetInst!==null){var nearestMounted=getNearestMountedFiber(targetInst);if(nearestMounted!==null){if(targetInst=nearestMounted.tag,targetInst===13){if(targetInst=getSuspenseInstanceFromFiber(nearestMounted),targetInst!==null){queuedTarget.blockedOn=targetInst,runWithPriority(queuedTarget.priority,function(){attemptHydrationAtCurrentPriority(nearestMounted)});return}}else if(targetInst===31){if(targetInst=getActivityInstanceFromFiber(nearestMounted),targetInst!==null){queuedTarget.blockedOn=targetInst,runWithPriority(queuedTarget.priority,function(){attemptHydrationAtCurrentPriority(nearestMounted)});return}}else if(targetInst===3&&nearestMounted.stateNode.current.memoizedState.isDehydrated){queuedTarget.blockedOn=nearestMounted.tag===3?nearestMounted.stateNode.containerInfo:null;return}}}queuedTarget.blockedOn=null}function attemptReplayContinuousQueuedEvent(queuedEvent){if(queuedEvent.blockedOn!==null)return!1;for(var targetContainers=queuedEvent.targetContainers;0<targetContainers.length;){var nextBlockedOn=findInstanceBlockingEvent(queuedEvent.nativeEvent);if(nextBlockedOn===null){nextBlockedOn=queuedEvent.nativeEvent;var nativeEventClone=new nextBlockedOn.constructor(nextBlockedOn.type,nextBlockedOn);currentReplayingEvent=nativeEventClone,nextBlockedOn.target.dispatchEvent(nativeEventClone),currentReplayingEvent=null}else return targetContainers=getInstanceFromNode(nextBlockedOn),targetContainers!==null&&attemptContinuousHydration(targetContainers),queuedEvent.blockedOn=nextBlockedOn,!1;targetContainers.shift()}return!0}function attemptReplayContinuousQueuedEventInMap(queuedEvent,key$1,map){attemptReplayContinuousQueuedEvent(queuedEvent)&&map.delete(key$1)}function replayUnblockedEvents(){hasScheduledReplayAttempt=!1,queuedFocus!==null&&attemptReplayContinuousQueuedEvent(queuedFocus)&&(queuedFocus=null),queuedDrag!==null&&attemptReplayContinuousQueuedEvent(queuedDrag)&&(queuedDrag=null),queuedMouse!==null&&attemptReplayContinuousQueuedEvent(queuedMouse)&&(queuedMouse=null),queuedPointers.forEach(attemptReplayContinuousQueuedEventInMap),queuedPointerCaptures.forEach(attemptReplayContinuousQueuedEventInMap)}function scheduleCallbackIfUnblocked(queuedEvent,unblocked){queuedEvent.blockedOn===unblocked&&(queuedEvent.blockedOn=null,hasScheduledReplayAttempt||(hasScheduledReplayAttempt=!0,Scheduler.unstable_scheduleCallback(Scheduler.unstable_NormalPriority,replayUnblockedEvents)))}var lastScheduledReplayQueue=null;function scheduleReplayQueueIfNeeded(formReplayingQueue){lastScheduledReplayQueue!==formReplayingQueue&&(lastScheduledReplayQueue=formReplayingQueue,Scheduler.unstable_scheduleCallback(Scheduler.unstable_NormalPriority,function(){lastScheduledReplayQueue===formReplayingQueue&&(lastScheduledReplayQueue=null);for(var i$4=0;i$4<formReplayingQueue.length;i$4+=3){var form=formReplayingQueue[i$4],submitterOrAction=formReplayingQueue[i$4+1],formData=formReplayingQueue[i$4+2];if(typeof submitterOrAction!=`function`){if(findInstanceBlockingTarget(submitterOrAction||form)===null)continue;break}var formInst=getInstanceFromNode(form);formInst!==null&&(formReplayingQueue.splice(i$4,3),i$4-=3,startHostTransition(formInst,{pending:!0,data:formData,method:form.method,action:submitterOrAction},submitterOrAction,formData))}}))}function retryIfBlockedOn(unblocked){function unblock(queuedEvent){return scheduleCallbackIfUnblocked(queuedEvent,unblocked)}queuedFocus!==null&&scheduleCallbackIfUnblocked(queuedFocus,unblocked),queuedDrag!==null&&scheduleCallbackIfUnblocked(queuedDrag,unblocked),queuedMouse!==null&&scheduleCallbackIfUnblocked(queuedMouse,unblocked),queuedPointers.forEach(unblock),queuedPointerCaptures.forEach(unblock);for(var i$4=0;i$4<queuedExplicitHydrationTargets.length;i$4++){var queuedTarget=queuedExplicitHydrationTargets[i$4];queuedTarget.blockedOn===unblocked&&(queuedTarget.blockedOn=null)}for(;0<queuedExplicitHydrationTargets.length&&(i$4=queuedExplicitHydrationTargets[0],i$4.blockedOn===null);)attemptExplicitHydrationTarget(i$4),i$4.blockedOn===null&&queuedExplicitHydrationTargets.shift();if(i$4=(unblocked.ownerDocument||unblocked).$$reactFormReplay,i$4!=null)for(queuedTarget=0;queuedTarget<i$4.length;queuedTarget+=3){var form=i$4[queuedTarget],submitterOrAction=i$4[queuedTarget+1],formProps=form[internalPropsKey]||null;if(typeof submitterOrAction==`function`)formProps||scheduleReplayQueueIfNeeded(i$4);else if(formProps){var action=null;if(submitterOrAction&&submitterOrAction.hasAttribute(`formAction`)){if(form=submitterOrAction,formProps=submitterOrAction[internalPropsKey]||null)action=formProps.formAction;else if(findInstanceBlockingTarget(form)!==null)continue}else action=formProps.action;typeof action==`function`?i$4[queuedTarget+1]=action:(i$4.splice(queuedTarget,3),queuedTarget-=3),scheduleReplayQueueIfNeeded(i$4)}}}function defaultOnDefaultTransitionIndicator(){function handleNavigate(event){event.canIntercept&&event.info===`react-transition`&&event.intercept({handler:function(){return new Promise(function(resolve){return pendingResolve=resolve})},focusReset:`manual`,scroll:`manual`})}function handleNavigateComplete(){pendingResolve!==null&&(pendingResolve(),pendingResolve=null),isCancelled||setTimeout(startFakeNavigation,20)}function startFakeNavigation(){if(!isCancelled&&!navigation.transition){var currentEntry=navigation.currentEntry;currentEntry&&currentEntry.url!=null&&navigation.navigate(currentEntry.url,{state:currentEntry.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var isCancelled=!1,pendingResolve=null;return navigation.addEventListener(`navigate`,handleNavigate),navigation.addEventListener(`navigatesuccess`,handleNavigateComplete),navigation.addEventListener(`navigateerror`,handleNavigateComplete),setTimeout(startFakeNavigation,100),function(){isCancelled=!0,navigation.removeEventListener(`navigate`,handleNavigate),navigation.removeEventListener(`navigatesuccess`,handleNavigateComplete),navigation.removeEventListener(`navigateerror`,handleNavigateComplete),pendingResolve!==null&&(pendingResolve(),pendingResolve=null)}}}function ReactDOMRoot(internalRoot){this._internalRoot=internalRoot}ReactDOMHydrationRoot.prototype.render=ReactDOMRoot.prototype.render=function(children$1){var root$3=this._internalRoot;if(root$3===null)throw Error(formatProdErrorMessage$2(409));var current=root$3.current;updateContainerImpl(current,requestUpdateLane(),children$1,root$3,null,null)},ReactDOMHydrationRoot.prototype.unmount=ReactDOMRoot.prototype.unmount=function(){var root$3=this._internalRoot;if(root$3!==null){this._internalRoot=null;var container=root$3.containerInfo;updateContainerImpl(root$3.current,2,null,root$3,null,null),flushSyncWork$1(),container[internalContainerInstanceKey]=null}};function ReactDOMHydrationRoot(internalRoot){this._internalRoot=internalRoot}ReactDOMHydrationRoot.prototype.unstable_scheduleHydration=function(target){if(target){var updatePriority=resolveUpdatePriority();target={blockedOn:null,target,priority:updatePriority};for(var i$4=0;i$4<queuedExplicitHydrationTargets.length&&updatePriority!==0&&updatePriority<queuedExplicitHydrationTargets[i$4].priority;i$4++);queuedExplicitHydrationTargets.splice(i$4,0,target),i$4===0&&attemptExplicitHydrationTarget(target)}};var isomorphicReactPackageVersion$jscomp$inline_1840=React$116.version;if(isomorphicReactPackageVersion$jscomp$inline_1840!==`19.2.3`)throw Error(formatProdErrorMessage$2(527,isomorphicReactPackageVersion$jscomp$inline_1840,`19.2.3`));ReactDOMSharedInternals.findDOMNode=function(componentOrElement){var fiber=componentOrElement._reactInternals;if(fiber===void 0)throw typeof componentOrElement.render==`function`?Error(formatProdErrorMessage$2(188)):(componentOrElement=Object.keys(componentOrElement).join(`,`),Error(formatProdErrorMessage$2(268,componentOrElement)));return componentOrElement=findCurrentFiberUsingSlowPath(fiber),componentOrElement=componentOrElement===null?null:findCurrentHostFiberImpl(componentOrElement),componentOrElement=componentOrElement===null?null:componentOrElement.stateNode,componentOrElement};var internals$jscomp$inline_2347={bundleType:0,version:`19.2.3`,rendererPackageName:`react-dom`,currentDispatcherRef:ReactSharedInternals,reconcilerVersion:`19.2.3`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var hook$jscomp$inline_2348=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hook$jscomp$inline_2348.isDisabled&&hook$jscomp$inline_2348.supportsFiber)try{rendererID=hook$jscomp$inline_2348.inject(internals$jscomp$inline_2347),injectedHook=hook$jscomp$inline_2348}catch{}}exports.createRoot=function(container,options$1){if(!isValidContainer(container))throw Error(formatProdErrorMessage$2(299));var isStrictMode=!1,identifierPrefix=``,onUncaughtError=defaultOnUncaughtError,onCaughtError=defaultOnCaughtError,onRecoverableError=defaultOnRecoverableError;return options$1!=null&&(!0===options$1.unstable_strictMode&&(isStrictMode=!0),options$1.identifierPrefix!==void 0&&(identifierPrefix=options$1.identifierPrefix),options$1.onUncaughtError!==void 0&&(onUncaughtError=options$1.onUncaughtError),options$1.onCaughtError!==void 0&&(onCaughtError=options$1.onCaughtError),options$1.onRecoverableError!==void 0&&(onRecoverableError=options$1.onRecoverableError)),options$1=createFiberRoot(container,1,!1,null,null,isStrictMode,identifierPrefix,null,onUncaughtError,onCaughtError,onRecoverableError,defaultOnDefaultTransitionIndicator),container[internalContainerInstanceKey]=options$1.current,listenToAllSupportedEvents(container),new ReactDOMRoot(options$1)}})),require_client=__commonJSMin(((exports,module)=>{function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(err){console.error(err)}}checkDCE(),module.exports=require_react_dom_client_production()})),import_client=require_client(),import_react_dom$6=__toESM(require_react_dom(),1),import_react=__toESM(require_react(),1),scriptRel=`modulepreload`,assetsURL=function(dep){return`/byeory/`+dep},seen={};const __vitePreload=function(baseModule,deps,importerUrl){let promise=Promise.resolve();if(deps&&deps.length>0){let links=document.getElementsByTagName(`link`),cspNonceMeta=document.querySelector(`meta[property=csp-nonce]`),cspNonce=cspNonceMeta?.nonce||cspNonceMeta?.getAttribute(`nonce`);function allSettled(promises$2){return Promise.all(promises$2.map(p$3=>Promise.resolve(p$3).then(value$1=>({status:`fulfilled`,value:value$1}),reason=>({status:`rejected`,reason}))))}promise=allSettled(deps.map(dep=>{if(dep=assetsURL(dep,importerUrl),dep in seen)return;seen[dep]=!0;let isCss=dep.endsWith(`.css`),cssSelector=isCss?`[rel="stylesheet"]`:``;if(importerUrl)for(let i$1$1=links.length-1;i$1$1>=0;i$1$1--){let link$1=links[i$1$1];if(link$1.href===dep&&(!isCss||link$1.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${dep}"]${cssSelector}`))return;let link=document.createElement(`link`);if(link.rel=isCss?`stylesheet`:scriptRel,isCss||(link.as=`script`),link.crossOrigin=``,link.href=dep,cspNonce&&link.setAttribute(`nonce`,cspNonce),document.head.appendChild(link),isCss)return new Promise((res,rej)=>{link.addEventListener(`load`,res),link.addEventListener(`error`,()=>rej(Error(`Unable to preload CSS for ${dep}`)))})}))}function handlePreloadError(err$2){let e$1$1=new Event(`vite:preloadError`,{cancelable:!0});if(e$1$1.payload=err$2,window.dispatchEvent(e$1$1),!e$1$1.defaultPrevented)throw err$2}return promise.then(res=>{for(let item of res||[])item.status===`rejected`&&handlePreloadError(item.reason);return baseModule().catch(handlePreloadError)})};var __typeError=msg=>{throw TypeError(msg)},__accessCheck=(obj,member,msg)=>member.has(obj)||__typeError(`Cannot `+msg),__privateGet=(obj,member,getter)=>(__accessCheck(obj,member,`read from private field`),getter?getter.call(obj):member.get(obj)),__privateAdd=(obj,member,value)=>member.has(obj)?__typeError(`Cannot add the same private member more than once`):member instanceof WeakSet?member.add(obj):member.set(obj,value),PopStateEventType=`popstate`;function createBrowserHistory(options$1={}){function createBrowserLocation(window2,globalHistory){let{pathname,search,hash}=window2.location;return createLocation(``,{pathname,search,hash},globalHistory.state&&globalHistory.state.usr||null,globalHistory.state&&globalHistory.state.key||`default`)}function createBrowserHref(window2,to){return typeof to==`string`?to:createPath(to)}return getUrlBasedHistory(createBrowserLocation,createBrowserHref,null,options$1)}function invariant$4(value,message){if(value===!1||value==null)throw Error(message)}function warning$1(cond,message){if(!cond){typeof console<`u`&&console.warn(message);try{throw Error(message)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(location$1,index$2){return{usr:location$1.state,key:location$1.key,idx:index$2}}function createLocation(current,to,state=null,key$1){return{pathname:typeof current==`string`?current:current.pathname,search:``,hash:``,...typeof to==`string`?parsePath(to):to,state,key:to&&to.key||key$1||createKey()}}function createPath({pathname=`/`,search=``,hash=``}){return search&&search!==`?`&&(pathname+=search.charAt(0)===`?`?search:`?`+search),hash&&hash!==`#`&&(pathname+=hash.charAt(0)===`#`?hash:`#`+hash),pathname}function parsePath(path){let parsedPath={};if(path){let hashIndex=path.indexOf(`#`);hashIndex>=0&&(parsedPath.hash=path.substring(hashIndex),path=path.substring(0,hashIndex));let searchIndex=path.indexOf(`?`);searchIndex>=0&&(parsedPath.search=path.substring(searchIndex),path=path.substring(0,searchIndex)),path&&(parsedPath.pathname=path)}return parsedPath}function getUrlBasedHistory(getLocation,createHref2,validateLocation,options$1={}){let{window:window2=document.defaultView,v5Compat=!1}=options$1,globalHistory=window2.history,action=`POP`,listener=null,index$2=getIndex();index$2??(index$2=0,globalHistory.replaceState({...globalHistory.state,idx:index$2},``));function getIndex(){return(globalHistory.state||{idx:null}).idx}function handlePop(){action=`POP`;let nextIndex=getIndex(),delta=nextIndex==null?null:nextIndex-index$2;index$2=nextIndex,listener&&listener({action,location:history.location,delta})}function push$2(to,state){action=`PUSH`;let location$1=createLocation(history.location,to,state);validateLocation&&validateLocation(location$1,to),index$2=getIndex()+1;let historyState=getHistoryState(location$1,index$2),url=history.createHref(location$1);try{globalHistory.pushState(historyState,``,url)}catch(error$1){if(error$1 instanceof DOMException&&error$1.name===`DataCloneError`)throw error$1;window2.location.assign(url)}v5Compat&&listener&&listener({action,location:history.location,delta:1})}function replace2(to,state){action=`REPLACE`;let location$1=createLocation(history.location,to,state);validateLocation&&validateLocation(location$1,to),index$2=getIndex();let historyState=getHistoryState(location$1,index$2),url=history.createHref(location$1);globalHistory.replaceState(historyState,``,url),v5Compat&&listener&&listener({action,location:history.location,delta:0})}function createURL(to){return createBrowserURLImpl(to)}let history={get action(){return action},get location(){return getLocation(window2,globalHistory)},listen(fn){if(listener)throw Error(`A history only accepts one active listener`);return window2.addEventListener(PopStateEventType,handlePop),listener=fn,()=>{window2.removeEventListener(PopStateEventType,handlePop),listener=null}},createHref(to){return createHref2(window2,to)},createURL,encodeLocation(to){let url=createURL(to);return{pathname:url.pathname,search:url.search,hash:url.hash}},push:push$2,replace:replace2,go(n$4){return globalHistory.go(n$4)}};return history}function createBrowserURLImpl(to,isAbsolute=!1){let base=`http://localhost`;typeof window<`u`&&(base=window.location.origin===`null`?window.location.href:window.location.origin),invariant$4(base,`No window.location.(origin|href) available to create URL`);let href=typeof to==`string`?to:createPath(to);return href=href.replace(/ $/,`%20`),!isAbsolute&&href.startsWith(`//`)&&(href=base+href),new URL(href,base)}function createContext$15(defaultValue$3){return{defaultValue:defaultValue$3}}var _map,RouterContextProvider=class{constructor(init$1){if(__privateAdd(this,_map,new Map),init$1)for(let[context,value]of init$1)this.set(context,value)}get(context){if(__privateGet(this,_map).has(context))return __privateGet(this,_map).get(context);if(context.defaultValue!==void 0)return context.defaultValue;throw Error(`No value found for context`)}set(context,value){__privateGet(this,_map).set(context,value)}};_map=new WeakMap;var unsupportedLazyRouteObjectKeys=new Set([`lazy`,`caseSensitive`,`path`,`id`,`index`,`children`]);function isUnsupportedLazyRouteObjectKey(key$1){return unsupportedLazyRouteObjectKeys.has(key$1)}var unsupportedLazyRouteFunctionKeys=new Set([`lazy`,`caseSensitive`,`path`,`id`,`index`,`middleware`,`children`]);function isUnsupportedLazyRouteFunctionKey(key$1){return unsupportedLazyRouteFunctionKeys.has(key$1)}function isIndexRoute(route){return route.index===!0}function convertRoutesToDataRoutes(routes,mapRouteProperties2,parentPath=[],manifest={},allowInPlaceMutations=!1){return routes.map((route,index$2)=>{let treePath=[...parentPath,String(index$2)],id$3=typeof route.id==`string`?route.id:treePath.join(`-`);if(invariant$4(route.index!==!0||!route.children,`Cannot specify children on an index route`),invariant$4(allowInPlaceMutations||!manifest[id$3],`Found a route id collision on id "${id$3}".  Route id's must be globally unique within Data Router usages`),isIndexRoute(route)){let indexRoute={...route,id:id$3};return manifest[id$3]=mergeRouteUpdates(indexRoute,mapRouteProperties2(indexRoute)),indexRoute}else{let pathOrLayoutRoute={...route,id:id$3,children:void 0};return manifest[id$3]=mergeRouteUpdates(pathOrLayoutRoute,mapRouteProperties2(pathOrLayoutRoute)),route.children&&(pathOrLayoutRoute.children=convertRoutesToDataRoutes(route.children,mapRouteProperties2,treePath,manifest,allowInPlaceMutations)),pathOrLayoutRoute}})}function mergeRouteUpdates(route,updates){return Object.assign(route,{...updates,...typeof updates.lazy==`object`&&updates.lazy!=null?{lazy:{...route.lazy,...updates.lazy}}:{}})}function matchRoutes(routes,locationArg,basename=`/`){return matchRoutesImpl(routes,locationArg,basename,!1)}function matchRoutesImpl(routes,locationArg,basename,allowPartial){let pathname=stripBasename((typeof locationArg==`string`?parsePath(locationArg):locationArg).pathname||`/`,basename);if(pathname==null)return null;let branches=flattenRoutes(routes);rankRouteBranches(branches);let matches=null;for(let i$4=0;matches==null&&i$4<branches.length;++i$4){let decoded=decodePath(pathname);matches=matchRouteBranch(branches[i$4],decoded,allowPartial)}return matches}function convertRouteMatchToUiMatch(match,loaderData){let{route,pathname,params}=match;return{id:route.id,pathname,params,data:loaderData[route.id],loaderData:loaderData[route.id],handle:route.handle}}function flattenRoutes(routes,branches=[],parentsMeta=[],parentPath=``,_hasParentOptionalSegments=!1){let flattenRoute=(route,index$2,hasParentOptionalSegments=_hasParentOptionalSegments,relativePath)=>{let meta={relativePath:relativePath===void 0?route.path||``:relativePath,caseSensitive:route.caseSensitive===!0,childrenIndex:index$2,route};if(meta.relativePath.startsWith(`/`)){if(!meta.relativePath.startsWith(parentPath)&&hasParentOptionalSegments)return;invariant$4(meta.relativePath.startsWith(parentPath),`Absolute route path "${meta.relativePath}" nested under path "${parentPath}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),meta.relativePath=meta.relativePath.slice(parentPath.length)}let path=joinPaths([parentPath,meta.relativePath]),routesMeta=parentsMeta.concat(meta);route.children&&route.children.length>0&&(invariant$4(route.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${path}".`),flattenRoutes(route.children,branches,routesMeta,path,hasParentOptionalSegments)),!(route.path==null&&!route.index)&&branches.push({path,score:computeScore(path,route.index),routesMeta})};return routes.forEach((route,index$2)=>{if(route.path===``||!route.path?.includes(`?`))flattenRoute(route,index$2);else for(let exploded of explodeOptionalSegments(route.path))flattenRoute(route,index$2,!0,exploded)}),branches}function explodeOptionalSegments(path){let segments=path.split(`/`);if(segments.length===0)return[];let[first,...rest]=segments,isOptional=first.endsWith(`?`),required=first.replace(/\?$/,``);if(rest.length===0)return isOptional?[required,``]:[required];let restExploded=explodeOptionalSegments(rest.join(`/`)),result=[];return result.push(...restExploded.map(subpath=>subpath===``?required:[required,subpath].join(`/`))),isOptional&&result.push(...restExploded),result.map(exploded=>path.startsWith(`/`)&&exploded===``?`/`:exploded)}function rankRouteBranches(branches){branches.sort((a$4,b$3)=>a$4.score===b$3.score?compareIndexes(a$4.routesMeta.map(meta=>meta.childrenIndex),b$3.routesMeta.map(meta=>meta.childrenIndex)):b$3.score-a$4.score)}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=s$3=>s$3===`*`;function computeScore(path,index$2){let segments=path.split(`/`),initialScore=segments.length;return segments.some(isSplat)&&(initialScore+=splatPenalty),index$2&&(initialScore+=indexRouteValue),segments.filter(s$3=>!isSplat(s$3)).reduce((score,segment)=>score+(paramRe.test(segment)?dynamicSegmentValue:segment===``?emptySegmentValue:staticSegmentValue),initialScore)}function compareIndexes(a$4,b$3){return a$4.length===b$3.length&&a$4.slice(0,-1).every((n$4,i$4)=>n$4===b$3[i$4])?a$4[a$4.length-1]-b$3[b$3.length-1]:0}function matchRouteBranch(branch,pathname,allowPartial=!1){let{routesMeta}=branch,matchedParams={},matchedPathname=`/`,matches=[];for(let i$4=0;i$4<routesMeta.length;++i$4){let meta=routesMeta[i$4],end$1=i$4===routesMeta.length-1,remainingPathname=matchedPathname===`/`?pathname:pathname.slice(matchedPathname.length)||`/`,match=matchPath({path:meta.relativePath,caseSensitive:meta.caseSensitive,end:end$1},remainingPathname),route=meta.route;if(!match&&end$1&&allowPartial&&!routesMeta[routesMeta.length-1].route.index&&(match=matchPath({path:meta.relativePath,caseSensitive:meta.caseSensitive,end:!1},remainingPathname)),!match)return null;Object.assign(matchedParams,match.params),matches.push({params:matchedParams,pathname:joinPaths([matchedPathname,match.pathname]),pathnameBase:normalizePathname(joinPaths([matchedPathname,match.pathnameBase])),route}),match.pathnameBase!==`/`&&(matchedPathname=joinPaths([matchedPathname,match.pathnameBase]))}return matches}function matchPath(pattern,pathname){typeof pattern==`string`&&(pattern={path:pattern,caseSensitive:!1,end:!0});let[matcher,compiledParams]=compilePath(pattern.path,pattern.caseSensitive,pattern.end),match=pathname.match(matcher);if(!match)return null;let matchedPathname=match[0],pathnameBase=matchedPathname.replace(/(.)\/+$/,`$1`),captureGroups=match.slice(1);return{params:compiledParams.reduce((memo2,{paramName,isOptional},index$2)=>{if(paramName===`*`){let splatValue=captureGroups[index$2]||``;pathnameBase=matchedPathname.slice(0,matchedPathname.length-splatValue.length).replace(/(.)\/+$/,`$1`)}let value=captureGroups[index$2];return isOptional&&!value?memo2[paramName]=void 0:memo2[paramName]=(value||``).replace(/%2F/g,`/`),memo2},{}),pathname:matchedPathname,pathnameBase,pattern}}function compilePath(path,caseSensitive=!1,end$1=!0){warning$1(path===`*`||!path.endsWith(`*`)||path.endsWith(`/*`),`Route path "${path}" will be treated as if it were "${path.replace(/\*$/,`/*`)}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${path.replace(/\*$/,`/*`)}".`);let params=[],regexpSource=`^`+path.replace(/\/*\*?$/,``).replace(/^\/*/,`/`).replace(/[\\.*+^${}|()[\]]/g,`\\$&`).replace(/\/:([\w-]+)(\?)?/g,(_$1,paramName,isOptional)=>(params.push({paramName,isOptional:isOptional!=null}),isOptional?`/?([^\\/]+)?`:`/([^\\/]+)`)).replace(/\/([\w-]+)\?(\/|$)/g,`(/$1)?$2`);return path.endsWith(`*`)?(params.push({paramName:`*`}),regexpSource+=path===`*`||path===`/*`?`(.*)$`:`(?:\\/(.+)|\\/*)$`):end$1?regexpSource+=`\\/*$`:path!==``&&path!==`/`&&(regexpSource+=`(?:(?=\\/|$))`),[new RegExp(regexpSource,caseSensitive?void 0:`i`),params]}function decodePath(value){try{return value.split(`/`).map(v$3=>decodeURIComponent(v$3).replace(/\//g,`%2F`)).join(`/`)}catch(error$1){return warning$1(!1,`The URL path "${value}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${error$1}).`),value}}function stripBasename(pathname,basename){if(basename===`/`)return pathname;if(!pathname.toLowerCase().startsWith(basename.toLowerCase()))return null;let startIndex=basename.endsWith(`/`)?basename.length-1:basename.length,nextChar=pathname.charAt(startIndex);return nextChar&&nextChar!==`/`?null:pathname.slice(startIndex)||`/`}function prependBasename({basename,pathname}){return pathname===`/`?basename:joinPaths([basename,pathname])}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=url=>ABSOLUTE_URL_REGEX.test(url);function resolvePath(to,fromPathname=`/`){let{pathname:toPathname,search=``,hash=``}=typeof to==`string`?parsePath(to):to,pathname;if(toPathname)if(isAbsoluteUrl(toPathname))pathname=toPathname;else{if(toPathname.includes(`//`)){let oldPathname=toPathname;toPathname=toPathname.replace(/\/\/+/g,`/`),warning$1(!1,`Pathnames cannot have embedded double slashes - normalizing ${oldPathname} -> ${toPathname}`)}pathname=toPathname.startsWith(`/`)?resolvePathname(toPathname.substring(1),`/`):resolvePathname(toPathname,fromPathname)}else pathname=fromPathname;return{pathname,search:normalizeSearch(search),hash:normalizeHash(hash)}}function resolvePathname(relativePath,fromPathname){let segments=fromPathname.replace(/\/+$/,``).split(`/`);return relativePath.split(`/`).forEach(segment=>{segment===`..`?segments.length>1&&segments.pop():segment!==`.`&&segments.push(segment)}),segments.length>1?segments.join(`/`):`/`}function getInvalidPathError(char,field,dest,path){return`Cannot include a '${char}' character in a manually specified \`to.${field}\` field [${JSON.stringify(path)}].  Please separate it out to the \`to.${dest}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(matches){return matches.filter((match,index$2)=>index$2===0||match.route.path&&match.route.path.length>0)}function getResolveToMatches(matches){let pathMatches=getPathContributingMatches(matches);return pathMatches.map((match,idx)=>idx===pathMatches.length-1?match.pathname:match.pathnameBase)}function resolveTo(toArg,routePathnames,locationPathname,isPathRelative=!1){let to;typeof toArg==`string`?to=parsePath(toArg):(to={...toArg},invariant$4(!to.pathname||!to.pathname.includes(`?`),getInvalidPathError(`?`,`pathname`,`search`,to)),invariant$4(!to.pathname||!to.pathname.includes(`#`),getInvalidPathError(`#`,`pathname`,`hash`,to)),invariant$4(!to.search||!to.search.includes(`#`),getInvalidPathError(`#`,`search`,`hash`,to)));let isEmptyPath=toArg===``||to.pathname===``,toPathname=isEmptyPath?`/`:to.pathname,from;if(toPathname==null)from=locationPathname;else{let routePathnameIndex=routePathnames.length-1;if(!isPathRelative&&toPathname.startsWith(`..`)){let toSegments=toPathname.split(`/`);for(;toSegments[0]===`..`;)toSegments.shift(),--routePathnameIndex;to.pathname=toSegments.join(`/`)}from=routePathnameIndex>=0?routePathnames[routePathnameIndex]:`/`}let path=resolvePath(to,from),hasExplicitTrailingSlash=toPathname&&toPathname!==`/`&&toPathname.endsWith(`/`),hasCurrentTrailingSlash=(isEmptyPath||toPathname===`.`)&&locationPathname.endsWith(`/`);return!path.pathname.endsWith(`/`)&&(hasExplicitTrailingSlash||hasCurrentTrailingSlash)&&(path.pathname+=`/`),path}var joinPaths=paths=>paths.join(`/`).replace(/\/\/+/g,`/`),normalizePathname=pathname=>pathname.replace(/\/+$/,``).replace(/^\/*/,`/`),normalizeSearch=search=>!search||search===`?`?``:search.startsWith(`?`)?search:`?`+search,normalizeHash=hash=>!hash||hash===`#`?``:hash.startsWith(`#`)?hash:`#`+hash,ErrorResponseImpl=class{constructor(status,statusText,data2,internal=!1){this.status=status,this.statusText=statusText||``,this.internal=internal,data2 instanceof Error?(this.data=data2.toString(),this.error=data2):this.data=data2}};function isRouteErrorResponse(error$1){return error$1!=null&&typeof error$1.status==`number`&&typeof error$1.statusText==`string`&&typeof error$1.internal==`boolean`&&`data`in error$1}function getRoutePattern(matches){return matches.map(m$3=>m$3.route.path).filter(Boolean).join(`/`).replace(/\/\/*/g,`/`)||`/`}var isBrowser$2=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0;function parseToInfo(_to,basename){let to=_to;if(typeof to!=`string`||!ABSOLUTE_URL_REGEX.test(to))return{absoluteURL:void 0,isExternal:!1,to};let absoluteURL=to,isExternal=!1;if(isBrowser$2)try{let currentUrl=new URL(window.location.href),targetUrl=to.startsWith(`//`)?new URL(currentUrl.protocol+to):new URL(to),path=stripBasename(targetUrl.pathname,basename);targetUrl.origin===currentUrl.origin&&path!=null?to=path+targetUrl.search+targetUrl.hash:isExternal=!0}catch{warning$1(!1,`<Link to="${to}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL,isExternal,to}}var UninstrumentedSymbol=Symbol(`Uninstrumented`);function getRouteInstrumentationUpdates(fns,route){let aggregated={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};fns.forEach(fn=>fn({id:route.id,index:route.index,path:route.path,instrument(i$4){let keys=Object.keys(aggregated);for(let key$1 of keys)i$4[key$1]&&aggregated[key$1].push(i$4[key$1])}}));let updates={};if(typeof route.lazy==`function`&&aggregated.lazy.length>0){let instrumented=wrapImpl(aggregated.lazy,route.lazy,()=>void 0);instrumented&&(updates.lazy=instrumented)}if(typeof route.lazy==`object`){let lazyObject=route.lazy;[`middleware`,`loader`,`action`].forEach(key$1=>{let lazyFn=lazyObject[key$1],instrumentations=aggregated[`lazy.${key$1}`];if(typeof lazyFn==`function`&&instrumentations.length>0){let instrumented=wrapImpl(instrumentations,lazyFn,()=>void 0);instrumented&&(updates.lazy=Object.assign(updates.lazy||{},{[key$1]:instrumented}))}})}return[`loader`,`action`].forEach(key$1=>{let handler=route[key$1];if(typeof handler==`function`&&aggregated[key$1].length>0){let original=handler[UninstrumentedSymbol]??handler,instrumented=wrapImpl(aggregated[key$1],original,(...args)=>getHandlerInfo(args[0]));instrumented&&(key$1===`loader`&&original.hydrate===!0&&(instrumented.hydrate=!0),instrumented[UninstrumentedSymbol]=original,updates[key$1]=instrumented)}}),route.middleware&&route.middleware.length>0&&aggregated.middleware.length>0&&(updates.middleware=route.middleware.map(middleware=>{let original=middleware[UninstrumentedSymbol]??middleware,instrumented=wrapImpl(aggregated.middleware,original,(...args)=>getHandlerInfo(args[0]));return instrumented?(instrumented[UninstrumentedSymbol]=original,instrumented):middleware})),updates}function instrumentClientSideRouter(router$1,fns){let aggregated={navigate:[],fetch:[]};if(fns.forEach(fn=>fn({instrument(i$4){let keys=Object.keys(i$4);for(let key$1 of keys)i$4[key$1]&&aggregated[key$1].push(i$4[key$1])}})),aggregated.navigate.length>0){let navigate=router$1.navigate[UninstrumentedSymbol]??router$1.navigate,instrumentedNavigate=wrapImpl(aggregated.navigate,navigate,(...args)=>{let[to,opts]=args;return{to:typeof to==`number`||typeof to==`string`?to:to?createPath(to):`.`,...getRouterInfo(router$1,opts??{})}});instrumentedNavigate&&(instrumentedNavigate[UninstrumentedSymbol]=navigate,router$1.navigate=instrumentedNavigate)}if(aggregated.fetch.length>0){let fetch2=router$1.fetch[UninstrumentedSymbol]??router$1.fetch,instrumentedFetch=wrapImpl(aggregated.fetch,fetch2,(...args)=>{let[key$1,,href,opts]=args;return{href:href??`.`,fetcherKey:key$1,...getRouterInfo(router$1,opts??{})}});instrumentedFetch&&(instrumentedFetch[UninstrumentedSymbol]=fetch2,router$1.fetch=instrumentedFetch)}return router$1}function wrapImpl(impls,handler,getInfo){return impls.length===0?null:async(...args)=>{let result=await recurseRight(impls,getInfo(...args),()=>handler(...args),impls.length-1);if(result.type===`error`)throw result.value;return result.value}}async function recurseRight(impls,info,handler,index$2){let impl=impls[index$2],result;if(impl){let handlerPromise,callHandler=async()=>(handlerPromise?console.error(`You cannot call instrumented handlers more than once`):handlerPromise=recurseRight(impls,info,handler,index$2-1),result=await handlerPromise,invariant$4(result,`Expected a result`),result.type===`error`&&result.value instanceof Error?{status:`error`,error:result.value}:{status:`success`,error:void 0});try{await impl(callHandler,info)}catch(e$4){console.error(`An instrumentation function threw an error:`,e$4)}handlerPromise||await callHandler(),await handlerPromise}else try{result={type:`success`,value:await handler()}}catch(e$4){result={type:`error`,value:e$4}}return result||{type:`error`,value:Error(`No result assigned in instrumentation chain.`)}}function getHandlerInfo(args){let{request,context,params,unstable_pattern}=args;return{request:getReadonlyRequest(request),params:{...params},unstable_pattern,context:getReadonlyContext(context)}}function getRouterInfo(router$1,opts){return{currentUrl:createPath(router$1.state.location),...`formMethod`in opts?{formMethod:opts.formMethod}:{},...`formEncType`in opts?{formEncType:opts.formEncType}:{},...`formData`in opts?{formData:opts.formData}:{},...`body`in opts?{body:opts.body}:{}}}function getReadonlyRequest(request){return{method:request.method,url:request.url,headers:{get:(...args)=>request.headers.get(...args)}}}function getReadonlyContext(context){if(isPlainObject$3(context)){let frozen={...context};return Object.freeze(frozen),frozen}else return{get:ctx=>context.get(ctx)}}var objectProtoNames=Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`);function isPlainObject$3(thing){if(typeof thing!=`object`||!thing)return!1;let proto=Object.getPrototypeOf(thing);return proto===Object.prototype||proto===null||Object.getOwnPropertyNames(proto).sort().join(`\0`)===objectProtoNames}var validMutationMethodsArr=[`POST`,`PUT`,`PATCH`,`DELETE`],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=[`GET`,...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:`idle`,location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:`idle`,data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:`unblocked`,proceed:void 0,reset:void 0,location:void 0},defaultMapRouteProperties=route=>({hasErrorBoundary:!!route.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY=`remix-router-transitions`,ResetLoaderDataSymbol=Symbol(`ResetLoaderData`);function createRouter(init$1){let routerWindow=init$1.window?init$1.window:typeof window<`u`?window:void 0,isBrowser3=routerWindow!==void 0&&routerWindow.document!==void 0&&routerWindow.document.createElement!==void 0;invariant$4(init$1.routes.length>0,`You must provide a non-empty routes array to createRouter`);let hydrationRouteProperties2=init$1.hydrationRouteProperties||[],_mapRouteProperties=init$1.mapRouteProperties||defaultMapRouteProperties,mapRouteProperties2=_mapRouteProperties;if(init$1.unstable_instrumentations){let instrumentations=init$1.unstable_instrumentations;mapRouteProperties2=route=>({..._mapRouteProperties(route),...getRouteInstrumentationUpdates(instrumentations.map(i$4=>i$4.route).filter(Boolean),route)})}let manifest={},dataRoutes=convertRoutesToDataRoutes(init$1.routes,mapRouteProperties2,void 0,manifest),inFlightDataRoutes,basename=init$1.basename||`/`;basename.startsWith(`/`)||(basename=`/${basename}`);let dataStrategyImpl=init$1.dataStrategy||defaultDataStrategyWithMiddleware,future={...init$1.future},unlistenHistory=null,subscribers=new Set,savedScrollPositions2=null,getScrollRestorationKey2=null,getScrollPosition$1=null,initialScrollRestored=init$1.hydrationData!=null,initialMatches=matchRoutes(dataRoutes,init$1.history.location,basename),initialMatchesIsFOW=!1,initialErrors=null,initialized;if(initialMatches==null&&!init$1.patchRoutesOnNavigation){let error$1=getInternalRouterError(404,{pathname:init$1.history.location.pathname}),{matches,route}=getShortCircuitMatches(dataRoutes);initialized=!0,initialMatches=matches,initialErrors={[route.id]:error$1}}else if(initialMatches&&!init$1.hydrationData&&checkFogOfWar(initialMatches,dataRoutes,init$1.history.location.pathname).active&&(initialMatches=null),initialMatches)if(initialMatches.some(m$3=>m$3.route.lazy))initialized=!1;else if(!initialMatches.some(m$3=>routeHasLoaderOrMiddleware(m$3.route)))initialized=!0;else{let loaderData=init$1.hydrationData?init$1.hydrationData.loaderData:null,errors=init$1.hydrationData?init$1.hydrationData.errors:null;if(errors){let idx=initialMatches.findIndex(m$3=>errors[m$3.route.id]!==void 0);initialized=initialMatches.slice(0,idx+1).every(m$3=>!shouldLoadRouteOnHydration(m$3.route,loaderData,errors))}else initialized=initialMatches.every(m$3=>!shouldLoadRouteOnHydration(m$3.route,loaderData,errors))}else{initialized=!1,initialMatches=[];let fogOfWar=checkFogOfWar(null,dataRoutes,init$1.history.location.pathname);fogOfWar.active&&fogOfWar.matches&&(initialMatchesIsFOW=!0,initialMatches=fogOfWar.matches)}let router$1,state={historyAction:init$1.history.action,location:init$1.history.location,matches:initialMatches,initialized,navigation:IDLE_NAVIGATION,restoreScrollPosition:init$1.hydrationData==null?null:!1,preventScrollReset:!1,revalidation:`idle`,loaderData:init$1.hydrationData&&init$1.hydrationData.loaderData||{},actionData:init$1.hydrationData&&init$1.hydrationData.actionData||null,errors:init$1.hydrationData&&init$1.hydrationData.errors||initialErrors,fetchers:new Map,blockers:new Map},pendingAction=`POP`,pendingPopstateNavigationDfd=null,pendingPreventScrollReset=!1,pendingNavigationController,pendingViewTransitionEnabled=!1,appliedViewTransitions=new Map,removePageHideEventListener=null,isUninterruptedRevalidation=!1,isRevalidationRequired=!1,cancelledFetcherLoads=new Set,fetchControllers=new Map,incrementingLoadId=0,pendingNavigationLoadId=-1,fetchReloadIds=new Map,fetchRedirectIds=new Set,fetchLoadMatches=new Map,activeFetchers=new Map,fetchersQueuedForDeletion=new Set,blockerFunctions=new Map,unblockBlockerHistoryUpdate,pendingRevalidationDfd=null;function initialize(){if(unlistenHistory=init$1.history.listen(({action:historyAction,location:location$1,delta})=>{if(unblockBlockerHistoryUpdate){unblockBlockerHistoryUpdate(),unblockBlockerHistoryUpdate=void 0;return}warning$1(blockerFunctions.size===0||delta!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let blockerKey=shouldBlockNavigation({currentLocation:state.location,nextLocation:location$1,historyAction});if(blockerKey&&delta!=null){let nextHistoryUpdatePromise=new Promise(resolve=>{unblockBlockerHistoryUpdate=resolve});init$1.history.go(delta*-1),updateBlocker(blockerKey,{state:`blocked`,location:location$1,proceed(){updateBlocker(blockerKey,{state:`proceeding`,proceed:void 0,reset:void 0,location:location$1}),nextHistoryUpdatePromise.then(()=>init$1.history.go(delta))},reset(){let blockers=new Map(state.blockers);blockers.set(blockerKey,IDLE_BLOCKER),updateState({blockers})}}),pendingPopstateNavigationDfd?.resolve(),pendingPopstateNavigationDfd=null;return}return startNavigation(historyAction,location$1)}),isBrowser3){restoreAppliedTransitions(routerWindow,appliedViewTransitions);let _saveAppliedTransitions=()=>persistAppliedTransitions(routerWindow,appliedViewTransitions);routerWindow.addEventListener(`pagehide`,_saveAppliedTransitions),removePageHideEventListener=()=>routerWindow.removeEventListener(`pagehide`,_saveAppliedTransitions)}return state.initialized||startNavigation(`POP`,state.location,{initialHydration:!0}),router$1}function dispose(){unlistenHistory&&unlistenHistory(),removePageHideEventListener&&removePageHideEventListener(),subscribers.clear(),pendingNavigationController&&pendingNavigationController.abort(),state.fetchers.forEach((_$1,key$1)=>deleteFetcher(key$1)),state.blockers.forEach((_$1,key$1)=>deleteBlocker(key$1))}function subscribe(fn){return subscribers.add(fn),()=>subscribers.delete(fn)}function updateState(newState,opts={}){newState.matches&&=newState.matches.map(m$3=>{let route=manifest[m$3.route.id],matchRoute=m$3.route;return matchRoute.element!==route.element||matchRoute.errorElement!==route.errorElement||matchRoute.hydrateFallbackElement!==route.hydrateFallbackElement?{...m$3,route}:m$3}),state={...state,...newState};let unmountedFetchers=[],mountedFetchers=[];state.fetchers.forEach((fetcher,key$1)=>{fetcher.state===`idle`&&(fetchersQueuedForDeletion.has(key$1)?unmountedFetchers.push(key$1):mountedFetchers.push(key$1))}),fetchersQueuedForDeletion.forEach(key$1=>{!state.fetchers.has(key$1)&&!fetchControllers.has(key$1)&&unmountedFetchers.push(key$1)}),[...subscribers].forEach(subscriber=>subscriber(state,{deletedFetchers:unmountedFetchers,newErrors:newState.errors??null,viewTransitionOpts:opts.viewTransitionOpts,flushSync:opts.flushSync===!0})),unmountedFetchers.forEach(key$1=>deleteFetcher(key$1)),mountedFetchers.forEach(key$1=>state.fetchers.delete(key$1))}function completeNavigation(location$1,newState,{flushSync:flushSync$2}={}){let isActionReload=state.actionData!=null&&state.navigation.formMethod!=null&&isMutationMethod(state.navigation.formMethod)&&state.navigation.state===`loading`&&location$1.state?._isRedirect!==!0,actionData;actionData=newState.actionData?Object.keys(newState.actionData).length>0?newState.actionData:null:isActionReload?state.actionData:null;let loaderData=newState.loaderData?mergeLoaderData(state.loaderData,newState.loaderData,newState.matches||[],newState.errors):state.loaderData,blockers=state.blockers;blockers.size>0&&(blockers=new Map(blockers),blockers.forEach((_$1,k$3)=>blockers.set(k$3,IDLE_BLOCKER)));let restoreScrollPosition$1=isUninterruptedRevalidation?!1:getSavedScrollPosition(location$1,newState.matches||state.matches),preventScrollReset=pendingPreventScrollReset===!0||state.navigation.formMethod!=null&&isMutationMethod(state.navigation.formMethod)&&location$1.state?._isRedirect!==!0;inFlightDataRoutes&&=(dataRoutes=inFlightDataRoutes,void 0),isUninterruptedRevalidation||pendingAction===`POP`||(pendingAction===`PUSH`?init$1.history.push(location$1,location$1.state):pendingAction===`REPLACE`&&init$1.history.replace(location$1,location$1.state));let viewTransitionOpts;if(pendingAction===`POP`){let priorPaths=appliedViewTransitions.get(state.location.pathname);priorPaths&&priorPaths.has(location$1.pathname)?viewTransitionOpts={currentLocation:state.location,nextLocation:location$1}:appliedViewTransitions.has(location$1.pathname)&&(viewTransitionOpts={currentLocation:location$1,nextLocation:state.location})}else if(pendingViewTransitionEnabled){let toPaths=appliedViewTransitions.get(state.location.pathname);toPaths?toPaths.add(location$1.pathname):(toPaths=new Set([location$1.pathname]),appliedViewTransitions.set(state.location.pathname,toPaths)),viewTransitionOpts={currentLocation:state.location,nextLocation:location$1}}updateState({...newState,actionData,loaderData,historyAction:pendingAction,location:location$1,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:`idle`,restoreScrollPosition:restoreScrollPosition$1,preventScrollReset,blockers},{viewTransitionOpts,flushSync:flushSync$2===!0}),pendingAction=`POP`,pendingPreventScrollReset=!1,pendingViewTransitionEnabled=!1,isUninterruptedRevalidation=!1,isRevalidationRequired=!1,pendingPopstateNavigationDfd?.resolve(),pendingPopstateNavigationDfd=null,pendingRevalidationDfd?.resolve(),pendingRevalidationDfd=null}async function navigate(to,opts){if(pendingPopstateNavigationDfd?.resolve(),pendingPopstateNavigationDfd=null,typeof to==`number`){pendingPopstateNavigationDfd||=createDeferred();let promise=pendingPopstateNavigationDfd.promise;return init$1.history.go(to),promise}let{path,submission,error:error$1}=normalizeNavigateOptions(!1,normalizeTo(state.location,state.matches,basename,to,opts?.fromRouteId,opts?.relative),opts),currentLocation=state.location,nextLocation=createLocation(state.location,path,opts&&opts.state);nextLocation={...nextLocation,...init$1.history.encodeLocation(nextLocation)};let userReplace=opts&&opts.replace!=null?opts.replace:void 0,historyAction=`PUSH`;userReplace===!0?historyAction=`REPLACE`:userReplace===!1||submission!=null&&isMutationMethod(submission.formMethod)&&submission.formAction===state.location.pathname+state.location.search&&(historyAction=`REPLACE`);let preventScrollReset=opts&&`preventScrollReset`in opts?opts.preventScrollReset===!0:void 0,flushSync$2=(opts&&opts.flushSync)===!0,blockerKey=shouldBlockNavigation({currentLocation,nextLocation,historyAction});if(blockerKey){updateBlocker(blockerKey,{state:`blocked`,location:nextLocation,proceed(){updateBlocker(blockerKey,{state:`proceeding`,proceed:void 0,reset:void 0,location:nextLocation}),navigate(to,opts)},reset(){let blockers=new Map(state.blockers);blockers.set(blockerKey,IDLE_BLOCKER),updateState({blockers})}});return}await startNavigation(historyAction,nextLocation,{submission,pendingError:error$1,preventScrollReset,replace:opts&&opts.replace,enableViewTransition:opts&&opts.viewTransition,flushSync:flushSync$2,callSiteDefaultShouldRevalidate:opts&&opts.unstable_defaultShouldRevalidate})}function revalidate(){pendingRevalidationDfd||=createDeferred(),interruptActiveLoads(),updateState({revalidation:`loading`});let promise=pendingRevalidationDfd.promise;return state.navigation.state===`submitting`?promise:state.navigation.state===`idle`?(startNavigation(state.historyAction,state.location,{startUninterruptedRevalidation:!0}),promise):(startNavigation(pendingAction||state.historyAction,state.navigation.location,{overrideNavigation:state.navigation,enableViewTransition:pendingViewTransitionEnabled===!0}),promise)}async function startNavigation(historyAction,location$1,opts){pendingNavigationController&&pendingNavigationController.abort(),pendingNavigationController=null,pendingAction=historyAction,isUninterruptedRevalidation=(opts&&opts.startUninterruptedRevalidation)===!0,saveScrollPosition(state.location,state.matches),pendingPreventScrollReset=(opts&&opts.preventScrollReset)===!0,pendingViewTransitionEnabled=(opts&&opts.enableViewTransition)===!0;let routesToUse=inFlightDataRoutes||dataRoutes,loadingNavigation=opts&&opts.overrideNavigation,matches=opts?.initialHydration&&state.matches&&state.matches.length>0&&!initialMatchesIsFOW?state.matches:matchRoutes(routesToUse,location$1,basename),flushSync$2=(opts&&opts.flushSync)===!0;if(matches&&state.initialized&&!isRevalidationRequired&&isHashChangeOnly(state.location,location$1)&&!(opts&&opts.submission&&isMutationMethod(opts.submission.formMethod))){completeNavigation(location$1,{matches},{flushSync:flushSync$2});return}let fogOfWar=checkFogOfWar(matches,routesToUse,location$1.pathname);if(fogOfWar.active&&fogOfWar.matches&&(matches=fogOfWar.matches),!matches){let{error:error$1,notFoundMatches,route}=handleNavigational404(location$1.pathname);completeNavigation(location$1,{matches:notFoundMatches,loaderData:{},errors:{[route.id]:error$1}},{flushSync:flushSync$2});return}pendingNavigationController=new AbortController;let request=createClientSideRequest(init$1.history,location$1,pendingNavigationController.signal,opts&&opts.submission),scopedContext=init$1.getContext?await init$1.getContext():new RouterContextProvider,pendingActionResult;if(opts&&opts.pendingError)pendingActionResult=[findNearestBoundary(matches).route.id,{type:`error`,error:opts.pendingError}];else if(opts&&opts.submission&&isMutationMethod(opts.submission.formMethod)){let actionResult=await handleAction(request,location$1,opts.submission,matches,scopedContext,fogOfWar.active,opts&&opts.initialHydration===!0,{replace:opts.replace,flushSync:flushSync$2});if(actionResult.shortCircuited)return;if(actionResult.pendingActionResult){let[routeId,result]=actionResult.pendingActionResult;if(isErrorResult(result)&&isRouteErrorResponse(result.error)&&result.error.status===404){pendingNavigationController=null,completeNavigation(location$1,{matches:actionResult.matches,loaderData:{},errors:{[routeId]:result.error}});return}}matches=actionResult.matches||matches,pendingActionResult=actionResult.pendingActionResult,loadingNavigation=getLoadingNavigation(location$1,opts.submission),flushSync$2=!1,fogOfWar.active=!1,request=createClientSideRequest(init$1.history,request.url,request.signal)}let{shortCircuited,matches:updatedMatches,loaderData,errors}=await handleLoaders(request,location$1,matches,scopedContext,fogOfWar.active,loadingNavigation,opts&&opts.submission,opts&&opts.fetcherSubmission,opts&&opts.replace,opts&&opts.initialHydration===!0,flushSync$2,pendingActionResult,opts&&opts.callSiteDefaultShouldRevalidate);shortCircuited||(pendingNavigationController=null,completeNavigation(location$1,{matches:updatedMatches||matches,...getActionDataForCommit(pendingActionResult),loaderData,errors}))}async function handleAction(request,location$1,submission,matches,scopedContext,isFogOfWar,initialHydration,opts={}){if(interruptActiveLoads(),updateState({navigation:getSubmittingNavigation(location$1,submission)},{flushSync:opts.flushSync===!0}),isFogOfWar){let discoverResult=await discoverRoutes(matches,location$1.pathname,request.signal);if(discoverResult.type===`aborted`)return{shortCircuited:!0};if(discoverResult.type===`error`){if(discoverResult.partialMatches.length===0){let{matches:matches2,route}=getShortCircuitMatches(dataRoutes);return{matches:matches2,pendingActionResult:[route.id,{type:`error`,error:discoverResult.error}]}}let boundaryId=findNearestBoundary(discoverResult.partialMatches).route.id;return{matches:discoverResult.partialMatches,pendingActionResult:[boundaryId,{type:`error`,error:discoverResult.error}]}}else if(discoverResult.matches)matches=discoverResult.matches;else{let{notFoundMatches,error:error$1,route}=handleNavigational404(location$1.pathname);return{matches:notFoundMatches,pendingActionResult:[route.id,{type:`error`,error:error$1}]}}}let result,actionMatch=getTargetMatch(matches,location$1);if(!actionMatch.route.action&&!actionMatch.route.lazy)result={type:`error`,error:getInternalRouterError(405,{method:request.method,pathname:location$1.pathname,routeId:actionMatch.route.id})};else{let results=await callDataStrategy(request,getTargetedDataStrategyMatches(mapRouteProperties2,manifest,request,matches,actionMatch,initialHydration?[]:hydrationRouteProperties2,scopedContext),scopedContext,null);if(result=results[actionMatch.route.id],!result){for(let match of matches)if(results[match.route.id]){result=results[match.route.id];break}}if(request.signal.aborted)return{shortCircuited:!0}}if(isRedirectResult(result)){let replace2;return replace2=opts&&opts.replace!=null?opts.replace:normalizeRedirectLocation(result.response.headers.get(`Location`),new URL(request.url),basename,init$1.history)===state.location.pathname+state.location.search,await startRedirectNavigation(request,result,!0,{submission,replace:replace2}),{shortCircuited:!0}}if(isErrorResult(result)){let boundaryMatch=findNearestBoundary(matches,actionMatch.route.id);return(opts&&opts.replace)!==!0&&(pendingAction=`PUSH`),{matches,pendingActionResult:[boundaryMatch.route.id,result,actionMatch.route.id]}}return{matches,pendingActionResult:[actionMatch.route.id,result]}}async function handleLoaders(request,location$1,matches,scopedContext,isFogOfWar,overrideNavigation,submission,fetcherSubmission,replace2,initialHydration,flushSync$2,pendingActionResult,callSiteDefaultShouldRevalidate){let loadingNavigation=overrideNavigation||getLoadingNavigation(location$1,submission),activeSubmission=submission||fetcherSubmission||getSubmissionFromNavigation(loadingNavigation),shouldUpdateNavigationState=!isUninterruptedRevalidation&&!initialHydration;if(isFogOfWar){if(shouldUpdateNavigationState){let actionData=getUpdatedActionData(pendingActionResult);updateState({navigation:loadingNavigation,...actionData===void 0?{}:{actionData}},{flushSync:flushSync$2})}let discoverResult=await discoverRoutes(matches,location$1.pathname,request.signal);if(discoverResult.type===`aborted`)return{shortCircuited:!0};if(discoverResult.type===`error`){if(discoverResult.partialMatches.length===0){let{matches:matches2,route}=getShortCircuitMatches(dataRoutes);return{matches:matches2,loaderData:{},errors:{[route.id]:discoverResult.error}}}let boundaryId=findNearestBoundary(discoverResult.partialMatches).route.id;return{matches:discoverResult.partialMatches,loaderData:{},errors:{[boundaryId]:discoverResult.error}}}else if(discoverResult.matches)matches=discoverResult.matches;else{let{error:error$1,notFoundMatches,route}=handleNavigational404(location$1.pathname);return{matches:notFoundMatches,loaderData:{},errors:{[route.id]:error$1}}}}let routesToUse=inFlightDataRoutes||dataRoutes,{dsMatches,revalidatingFetchers}=getMatchesToLoad(request,scopedContext,mapRouteProperties2,manifest,init$1.history,state,matches,activeSubmission,location$1,initialHydration?[]:hydrationRouteProperties2,initialHydration===!0,isRevalidationRequired,cancelledFetcherLoads,fetchersQueuedForDeletion,fetchLoadMatches,fetchRedirectIds,routesToUse,basename,init$1.patchRoutesOnNavigation!=null,pendingActionResult,callSiteDefaultShouldRevalidate);if(pendingNavigationLoadId=++incrementingLoadId,!init$1.dataStrategy&&!dsMatches.some(m$3=>m$3.shouldLoad)&&!dsMatches.some(m$3=>m$3.route.middleware&&m$3.route.middleware.length>0)&&revalidatingFetchers.length===0){let updatedFetchers2=markFetchRedirectsDone();return completeNavigation(location$1,{matches,loaderData:{},errors:pendingActionResult&&isErrorResult(pendingActionResult[1])?{[pendingActionResult[0]]:pendingActionResult[1].error}:null,...getActionDataForCommit(pendingActionResult),...updatedFetchers2?{fetchers:new Map(state.fetchers)}:{}},{flushSync:flushSync$2}),{shortCircuited:!0}}if(shouldUpdateNavigationState){let updates={};if(!isFogOfWar){updates.navigation=loadingNavigation;let actionData=getUpdatedActionData(pendingActionResult);actionData!==void 0&&(updates.actionData=actionData)}revalidatingFetchers.length>0&&(updates.fetchers=getUpdatedRevalidatingFetchers(revalidatingFetchers)),updateState(updates,{flushSync:flushSync$2})}revalidatingFetchers.forEach(rf=>{abortFetcher(rf.key),rf.controller&&fetchControllers.set(rf.key,rf.controller)});let abortPendingFetchRevalidations=()=>revalidatingFetchers.forEach(f$3=>abortFetcher(f$3.key));pendingNavigationController&&pendingNavigationController.signal.addEventListener(`abort`,abortPendingFetchRevalidations);let{loaderResults,fetcherResults}=await callLoadersAndMaybeResolveData(dsMatches,revalidatingFetchers,request,scopedContext);if(request.signal.aborted)return{shortCircuited:!0};pendingNavigationController&&pendingNavigationController.signal.removeEventListener(`abort`,abortPendingFetchRevalidations),revalidatingFetchers.forEach(rf=>fetchControllers.delete(rf.key));let redirect2=findRedirect(loaderResults);if(redirect2)return await startRedirectNavigation(request,redirect2.result,!0,{replace:replace2}),{shortCircuited:!0};if(redirect2=findRedirect(fetcherResults),redirect2)return fetchRedirectIds.add(redirect2.key),await startRedirectNavigation(request,redirect2.result,!0,{replace:replace2}),{shortCircuited:!0};let{loaderData,errors}=processLoaderData(state,matches,loaderResults,pendingActionResult,revalidatingFetchers,fetcherResults);initialHydration&&state.errors&&(errors={...state.errors,...errors});let updatedFetchers=markFetchRedirectsDone(),didAbortFetchLoads=abortStaleFetchLoads(pendingNavigationLoadId),shouldUpdateFetchers=updatedFetchers||didAbortFetchLoads||revalidatingFetchers.length>0;return{matches,loaderData,errors,...shouldUpdateFetchers?{fetchers:new Map(state.fetchers)}:{}}}function getUpdatedActionData(pendingActionResult){if(pendingActionResult&&!isErrorResult(pendingActionResult[1]))return{[pendingActionResult[0]]:pendingActionResult[1].data};if(state.actionData)return Object.keys(state.actionData).length===0?null:state.actionData}function getUpdatedRevalidatingFetchers(revalidatingFetchers){return revalidatingFetchers.forEach(rf=>{let fetcher=state.fetchers.get(rf.key),revalidatingFetcher=getLoadingFetcher(void 0,fetcher?fetcher.data:void 0);state.fetchers.set(rf.key,revalidatingFetcher)}),new Map(state.fetchers)}async function fetch2(key$1,routeId,href,opts){abortFetcher(key$1);let flushSync$2=(opts&&opts.flushSync)===!0,routesToUse=inFlightDataRoutes||dataRoutes,normalizedPath=normalizeTo(state.location,state.matches,basename,href,routeId,opts?.relative),matches=matchRoutes(routesToUse,normalizedPath,basename),fogOfWar=checkFogOfWar(matches,routesToUse,normalizedPath);if(fogOfWar.active&&fogOfWar.matches&&(matches=fogOfWar.matches),!matches){setFetcherError(key$1,routeId,getInternalRouterError(404,{pathname:normalizedPath}),{flushSync:flushSync$2});return}let{path,submission,error:error$1}=normalizeNavigateOptions(!0,normalizedPath,opts);if(error$1){setFetcherError(key$1,routeId,error$1,{flushSync:flushSync$2});return}let scopedContext=init$1.getContext?await init$1.getContext():new RouterContextProvider,preventScrollReset=(opts&&opts.preventScrollReset)===!0;if(submission&&isMutationMethod(submission.formMethod)){await handleFetcherAction(key$1,routeId,path,matches,scopedContext,fogOfWar.active,flushSync$2,preventScrollReset,submission,opts&&opts.unstable_defaultShouldRevalidate);return}fetchLoadMatches.set(key$1,{routeId,path}),await handleFetcherLoader(key$1,routeId,path,matches,scopedContext,fogOfWar.active,flushSync$2,preventScrollReset,submission)}async function handleFetcherAction(key$1,routeId,path,requestMatches,scopedContext,isFogOfWar,flushSync$2,preventScrollReset,submission,callSiteDefaultShouldRevalidate){interruptActiveLoads(),fetchLoadMatches.delete(key$1),updateFetcherState(key$1,getSubmittingFetcher(submission,state.fetchers.get(key$1)),{flushSync:flushSync$2});let abortController=new AbortController,fetchRequest=createClientSideRequest(init$1.history,path,abortController.signal,submission);if(isFogOfWar){let discoverResult=await discoverRoutes(requestMatches,new URL(fetchRequest.url).pathname,fetchRequest.signal,key$1);if(discoverResult.type===`aborted`)return;if(discoverResult.type===`error`){setFetcherError(key$1,routeId,discoverResult.error,{flushSync:flushSync$2});return}else if(discoverResult.matches)requestMatches=discoverResult.matches;else{setFetcherError(key$1,routeId,getInternalRouterError(404,{pathname:path}),{flushSync:flushSync$2});return}}let match=getTargetMatch(requestMatches,path);if(!match.route.action&&!match.route.lazy){setFetcherError(key$1,routeId,getInternalRouterError(405,{method:submission.formMethod,pathname:path,routeId}),{flushSync:flushSync$2});return}fetchControllers.set(key$1,abortController);let originatingLoadId=incrementingLoadId,fetchMatches=getTargetedDataStrategyMatches(mapRouteProperties2,manifest,fetchRequest,requestMatches,match,hydrationRouteProperties2,scopedContext),actionResults=await callDataStrategy(fetchRequest,fetchMatches,scopedContext,key$1),actionResult=actionResults[match.route.id];if(!actionResult){for(let match2 of fetchMatches)if(actionResults[match2.route.id]){actionResult=actionResults[match2.route.id];break}}if(fetchRequest.signal.aborted){fetchControllers.get(key$1)===abortController&&fetchControllers.delete(key$1);return}if(fetchersQueuedForDeletion.has(key$1)){if(isRedirectResult(actionResult)||isErrorResult(actionResult)){updateFetcherState(key$1,getDoneFetcher(void 0));return}}else{if(isRedirectResult(actionResult))if(fetchControllers.delete(key$1),pendingNavigationLoadId>originatingLoadId){updateFetcherState(key$1,getDoneFetcher(void 0));return}else return fetchRedirectIds.add(key$1),updateFetcherState(key$1,getLoadingFetcher(submission)),startRedirectNavigation(fetchRequest,actionResult,!1,{fetcherSubmission:submission,preventScrollReset});if(isErrorResult(actionResult)){setFetcherError(key$1,routeId,actionResult.error);return}}let nextLocation=state.navigation.location||state.location,revalidationRequest=createClientSideRequest(init$1.history,nextLocation,abortController.signal),routesToUse=inFlightDataRoutes||dataRoutes,matches=state.navigation.state===`idle`?state.matches:matchRoutes(routesToUse,state.navigation.location,basename);invariant$4(matches,`Didn't find any matches after fetcher action`);let loadId=++incrementingLoadId;fetchReloadIds.set(key$1,loadId);let loadFetcher=getLoadingFetcher(submission,actionResult.data);state.fetchers.set(key$1,loadFetcher);let{dsMatches,revalidatingFetchers}=getMatchesToLoad(revalidationRequest,scopedContext,mapRouteProperties2,manifest,init$1.history,state,matches,submission,nextLocation,hydrationRouteProperties2,!1,isRevalidationRequired,cancelledFetcherLoads,fetchersQueuedForDeletion,fetchLoadMatches,fetchRedirectIds,routesToUse,basename,init$1.patchRoutesOnNavigation!=null,[match.route.id,actionResult],callSiteDefaultShouldRevalidate);revalidatingFetchers.filter(rf=>rf.key!==key$1).forEach(rf=>{let staleKey=rf.key,existingFetcher2=state.fetchers.get(staleKey),revalidatingFetcher=getLoadingFetcher(void 0,existingFetcher2?existingFetcher2.data:void 0);state.fetchers.set(staleKey,revalidatingFetcher),abortFetcher(staleKey),rf.controller&&fetchControllers.set(staleKey,rf.controller)}),updateState({fetchers:new Map(state.fetchers)});let abortPendingFetchRevalidations=()=>revalidatingFetchers.forEach(rf=>abortFetcher(rf.key));abortController.signal.addEventListener(`abort`,abortPendingFetchRevalidations);let{loaderResults,fetcherResults}=await callLoadersAndMaybeResolveData(dsMatches,revalidatingFetchers,revalidationRequest,scopedContext);if(abortController.signal.aborted)return;if(abortController.signal.removeEventListener(`abort`,abortPendingFetchRevalidations),fetchReloadIds.delete(key$1),fetchControllers.delete(key$1),revalidatingFetchers.forEach(r$4=>fetchControllers.delete(r$4.key)),state.fetchers.has(key$1)){let doneFetcher=getDoneFetcher(actionResult.data);state.fetchers.set(key$1,doneFetcher)}let redirect2=findRedirect(loaderResults);if(redirect2)return startRedirectNavigation(revalidationRequest,redirect2.result,!1,{preventScrollReset});if(redirect2=findRedirect(fetcherResults),redirect2)return fetchRedirectIds.add(redirect2.key),startRedirectNavigation(revalidationRequest,redirect2.result,!1,{preventScrollReset});let{loaderData,errors}=processLoaderData(state,matches,loaderResults,void 0,revalidatingFetchers,fetcherResults);abortStaleFetchLoads(loadId),state.navigation.state===`loading`&&loadId>pendingNavigationLoadId?(invariant$4(pendingAction,`Expected pending action`),pendingNavigationController&&pendingNavigationController.abort(),completeNavigation(state.navigation.location,{matches,loaderData,errors,fetchers:new Map(state.fetchers)})):(updateState({errors,loaderData:mergeLoaderData(state.loaderData,loaderData,matches,errors),fetchers:new Map(state.fetchers)}),isRevalidationRequired=!1)}async function handleFetcherLoader(key$1,routeId,path,matches,scopedContext,isFogOfWar,flushSync$2,preventScrollReset,submission){let existingFetcher=state.fetchers.get(key$1);updateFetcherState(key$1,getLoadingFetcher(submission,existingFetcher?existingFetcher.data:void 0),{flushSync:flushSync$2});let abortController=new AbortController,fetchRequest=createClientSideRequest(init$1.history,path,abortController.signal);if(isFogOfWar){let discoverResult=await discoverRoutes(matches,new URL(fetchRequest.url).pathname,fetchRequest.signal,key$1);if(discoverResult.type===`aborted`)return;if(discoverResult.type===`error`){setFetcherError(key$1,routeId,discoverResult.error,{flushSync:flushSync$2});return}else if(discoverResult.matches)matches=discoverResult.matches;else{setFetcherError(key$1,routeId,getInternalRouterError(404,{pathname:path}),{flushSync:flushSync$2});return}}let match=getTargetMatch(matches,path);fetchControllers.set(key$1,abortController);let originatingLoadId=incrementingLoadId,result=(await callDataStrategy(fetchRequest,getTargetedDataStrategyMatches(mapRouteProperties2,manifest,fetchRequest,matches,match,hydrationRouteProperties2,scopedContext),scopedContext,key$1))[match.route.id];if(fetchControllers.get(key$1)===abortController&&fetchControllers.delete(key$1),!fetchRequest.signal.aborted){if(fetchersQueuedForDeletion.has(key$1)){updateFetcherState(key$1,getDoneFetcher(void 0));return}if(isRedirectResult(result))if(pendingNavigationLoadId>originatingLoadId){updateFetcherState(key$1,getDoneFetcher(void 0));return}else{fetchRedirectIds.add(key$1),await startRedirectNavigation(fetchRequest,result,!1,{preventScrollReset});return}if(isErrorResult(result)){setFetcherError(key$1,routeId,result.error);return}updateFetcherState(key$1,getDoneFetcher(result.data))}}async function startRedirectNavigation(request,redirect2,isNavigation,{submission,fetcherSubmission,preventScrollReset,replace:replace2}={}){isNavigation||(pendingPopstateNavigationDfd?.resolve(),pendingPopstateNavigationDfd=null),redirect2.response.headers.has(`X-Remix-Revalidate`)&&(isRevalidationRequired=!0);let location$1=redirect2.response.headers.get(`Location`);invariant$4(location$1,`Expected a Location header on the redirect Response`),location$1=normalizeRedirectLocation(location$1,new URL(request.url),basename,init$1.history);let redirectLocation=createLocation(state.location,location$1,{_isRedirect:!0});if(isBrowser3){let isDocumentReload=!1;if(redirect2.response.headers.has(`X-Remix-Reload-Document`))isDocumentReload=!0;else if(isAbsoluteUrl(location$1)){let url=createBrowserURLImpl(location$1,!0);isDocumentReload=url.origin!==routerWindow.location.origin||stripBasename(url.pathname,basename)==null}if(isDocumentReload){replace2?routerWindow.location.replace(location$1):routerWindow.location.assign(location$1);return}}pendingNavigationController=null;let redirectNavigationType=replace2===!0||redirect2.response.headers.has(`X-Remix-Replace`)?`REPLACE`:`PUSH`,{formMethod,formAction,formEncType}=state.navigation;!submission&&!fetcherSubmission&&formMethod&&formAction&&formEncType&&(submission=getSubmissionFromNavigation(state.navigation));let activeSubmission=submission||fetcherSubmission;redirectPreserveMethodStatusCodes.has(redirect2.response.status)&&activeSubmission&&isMutationMethod(activeSubmission.formMethod)?await startNavigation(redirectNavigationType,redirectLocation,{submission:{...activeSubmission,formAction:location$1},preventScrollReset:preventScrollReset||pendingPreventScrollReset,enableViewTransition:isNavigation?pendingViewTransitionEnabled:void 0}):await startNavigation(redirectNavigationType,redirectLocation,{overrideNavigation:getLoadingNavigation(redirectLocation,submission),fetcherSubmission,preventScrollReset:preventScrollReset||pendingPreventScrollReset,enableViewTransition:isNavigation?pendingViewTransitionEnabled:void 0})}async function callDataStrategy(request,matches,scopedContext,fetcherKey){let results,dataResults={};try{results=await callDataStrategyImpl(dataStrategyImpl,request,matches,fetcherKey,scopedContext,!1)}catch(e$4){return matches.filter(m$3=>m$3.shouldLoad).forEach(m$3=>{dataResults[m$3.route.id]={type:`error`,error:e$4}}),dataResults}if(request.signal.aborted)return dataResults;if(!isMutationMethod(request.method))for(let match of matches){if(results[match.route.id]?.type===`error`)break;!results.hasOwnProperty(match.route.id)&&!state.loaderData.hasOwnProperty(match.route.id)&&(!state.errors||!state.errors.hasOwnProperty(match.route.id))&&match.shouldCallHandler()&&(results[match.route.id]={type:`error`,result:Error(`No result returned from dataStrategy for route ${match.route.id}`)})}for(let[routeId,result]of Object.entries(results))if(isRedirectDataStrategyResult(result)){let response=result.result;dataResults[routeId]={type:`redirect`,response:normalizeRelativeRoutingRedirectResponse(response,request,routeId,matches,basename)}}else dataResults[routeId]=await convertDataStrategyResultToDataResult(result);return dataResults}async function callLoadersAndMaybeResolveData(matches,fetchersToLoad,request,scopedContext){let loaderResultsPromise=callDataStrategy(request,matches,scopedContext,null),fetcherResultsPromise=Promise.all(fetchersToLoad.map(async f$3=>{if(f$3.matches&&f$3.match&&f$3.request&&f$3.controller){let result=(await callDataStrategy(f$3.request,f$3.matches,scopedContext,f$3.key))[f$3.match.route.id];return{[f$3.key]:result}}else return Promise.resolve({[f$3.key]:{type:`error`,error:getInternalRouterError(404,{pathname:f$3.path})}})}));return{loaderResults:await loaderResultsPromise,fetcherResults:(await fetcherResultsPromise).reduce((acc,r$4)=>Object.assign(acc,r$4),{})}}function interruptActiveLoads(){isRevalidationRequired=!0,fetchLoadMatches.forEach((_$1,key$1)=>{fetchControllers.has(key$1)&&cancelledFetcherLoads.add(key$1),abortFetcher(key$1)})}function updateFetcherState(key$1,fetcher,opts={}){state.fetchers.set(key$1,fetcher),updateState({fetchers:new Map(state.fetchers)},{flushSync:(opts&&opts.flushSync)===!0})}function setFetcherError(key$1,routeId,error$1,opts={}){let boundaryMatch=findNearestBoundary(state.matches,routeId);deleteFetcher(key$1),updateState({errors:{[boundaryMatch.route.id]:error$1},fetchers:new Map(state.fetchers)},{flushSync:(opts&&opts.flushSync)===!0})}function getFetcher(key$1){return activeFetchers.set(key$1,(activeFetchers.get(key$1)||0)+1),fetchersQueuedForDeletion.has(key$1)&&fetchersQueuedForDeletion.delete(key$1),state.fetchers.get(key$1)||IDLE_FETCHER}function resetFetcher(key$1,opts){abortFetcher(key$1,opts?.reason),updateFetcherState(key$1,getDoneFetcher(null))}function deleteFetcher(key$1){let fetcher=state.fetchers.get(key$1);fetchControllers.has(key$1)&&!(fetcher&&fetcher.state===`loading`&&fetchReloadIds.has(key$1))&&abortFetcher(key$1),fetchLoadMatches.delete(key$1),fetchReloadIds.delete(key$1),fetchRedirectIds.delete(key$1),fetchersQueuedForDeletion.delete(key$1),cancelledFetcherLoads.delete(key$1),state.fetchers.delete(key$1)}function queueFetcherForDeletion(key$1){let count=(activeFetchers.get(key$1)||0)-1;count<=0?(activeFetchers.delete(key$1),fetchersQueuedForDeletion.add(key$1)):activeFetchers.set(key$1,count),updateState({fetchers:new Map(state.fetchers)})}function abortFetcher(key$1,reason){let controller=fetchControllers.get(key$1);controller&&(controller.abort(reason),fetchControllers.delete(key$1))}function markFetchersDone(keys){for(let key$1 of keys){let doneFetcher=getDoneFetcher(getFetcher(key$1).data);state.fetchers.set(key$1,doneFetcher)}}function markFetchRedirectsDone(){let doneKeys=[],updatedFetchers=!1;for(let key$1 of fetchRedirectIds){let fetcher=state.fetchers.get(key$1);invariant$4(fetcher,`Expected fetcher: ${key$1}`),fetcher.state===`loading`&&(fetchRedirectIds.delete(key$1),doneKeys.push(key$1),updatedFetchers=!0)}return markFetchersDone(doneKeys),updatedFetchers}function abortStaleFetchLoads(landedId){let yeetedKeys=[];for(let[key$1,id$3]of fetchReloadIds)if(id$3<landedId){let fetcher=state.fetchers.get(key$1);invariant$4(fetcher,`Expected fetcher: ${key$1}`),fetcher.state===`loading`&&(abortFetcher(key$1),fetchReloadIds.delete(key$1),yeetedKeys.push(key$1))}return markFetchersDone(yeetedKeys),yeetedKeys.length>0}function getBlocker(key$1,fn){let blocker=state.blockers.get(key$1)||IDLE_BLOCKER;return blockerFunctions.get(key$1)!==fn&&blockerFunctions.set(key$1,fn),blocker}function deleteBlocker(key$1){state.blockers.delete(key$1),blockerFunctions.delete(key$1)}function updateBlocker(key$1,newBlocker){let blocker=state.blockers.get(key$1)||IDLE_BLOCKER;invariant$4(blocker.state===`unblocked`&&newBlocker.state===`blocked`||blocker.state===`blocked`&&newBlocker.state===`blocked`||blocker.state===`blocked`&&newBlocker.state===`proceeding`||blocker.state===`blocked`&&newBlocker.state===`unblocked`||blocker.state===`proceeding`&&newBlocker.state===`unblocked`,`Invalid blocker state transition: ${blocker.state} -> ${newBlocker.state}`);let blockers=new Map(state.blockers);blockers.set(key$1,newBlocker),updateState({blockers})}function shouldBlockNavigation({currentLocation,nextLocation,historyAction}){if(blockerFunctions.size===0)return;blockerFunctions.size>1&&warning$1(!1,`A router only supports one blocker at a time`);let entries=Array.from(blockerFunctions.entries()),[blockerKey,blockerFunction]=entries[entries.length-1],blocker=state.blockers.get(blockerKey);if(!(blocker&&blocker.state===`proceeding`)&&blockerFunction({currentLocation,nextLocation,historyAction}))return blockerKey}function handleNavigational404(pathname){let error$1=getInternalRouterError(404,{pathname}),{matches,route}=getShortCircuitMatches(inFlightDataRoutes||dataRoutes);return{notFoundMatches:matches,route,error:error$1}}function enableScrollRestoration(positions,getPosition,getKey){if(savedScrollPositions2=positions,getScrollPosition$1=getPosition,getScrollRestorationKey2=getKey||null,!initialScrollRestored&&state.navigation===IDLE_NAVIGATION){initialScrollRestored=!0;let y$2=getSavedScrollPosition(state.location,state.matches);y$2!=null&&updateState({restoreScrollPosition:y$2})}return()=>{savedScrollPositions2=null,getScrollPosition$1=null,getScrollRestorationKey2=null}}function getScrollKey(location$1,matches){return getScrollRestorationKey2&&getScrollRestorationKey2(location$1,matches.map(m$3=>convertRouteMatchToUiMatch(m$3,state.loaderData)))||location$1.key}function saveScrollPosition(location$1,matches){if(savedScrollPositions2&&getScrollPosition$1){let key$1=getScrollKey(location$1,matches);savedScrollPositions2[key$1]=getScrollPosition$1()}}function getSavedScrollPosition(location$1,matches){if(savedScrollPositions2){let key$1=getScrollKey(location$1,matches),y$2=savedScrollPositions2[key$1];if(typeof y$2==`number`)return y$2}return null}function checkFogOfWar(matches,routesToUse,pathname){if(init$1.patchRoutesOnNavigation)if(matches){if(Object.keys(matches[0].params).length>0)return{active:!0,matches:matchRoutesImpl(routesToUse,pathname,basename,!0)}}else return{active:!0,matches:matchRoutesImpl(routesToUse,pathname,basename,!0)||[]};return{active:!1,matches:null}}async function discoverRoutes(matches,pathname,signal,fetcherKey){if(!init$1.patchRoutesOnNavigation)return{type:`success`,matches};let partialMatches=matches;for(;;){let isNonHMR=inFlightDataRoutes==null,routesToUse=inFlightDataRoutes||dataRoutes,localManifest=manifest;try{await init$1.patchRoutesOnNavigation({signal,path:pathname,matches:partialMatches,fetcherKey,patch:(routeId,children$1)=>{signal.aborted||patchRoutesImpl(routeId,children$1,routesToUse,localManifest,mapRouteProperties2,!1)}})}catch(e$4){return{type:`error`,error:e$4,partialMatches}}finally{isNonHMR&&!signal.aborted&&(dataRoutes=[...dataRoutes])}if(signal.aborted)return{type:`aborted`};let newMatches=matchRoutes(routesToUse,pathname,basename),newPartialMatches=null;if(newMatches&&(Object.keys(newMatches[0].params).length===0||(newPartialMatches=matchRoutesImpl(routesToUse,pathname,basename,!0),!(newPartialMatches&&partialMatches.length<newPartialMatches.length&&compareMatches(partialMatches,newPartialMatches.slice(0,partialMatches.length))))))return{type:`success`,matches:newMatches};if(newPartialMatches||=matchRoutesImpl(routesToUse,pathname,basename,!0),!newPartialMatches||compareMatches(partialMatches,newPartialMatches))return{type:`success`,matches:null};partialMatches=newPartialMatches}}function compareMatches(a$4,b$3){return a$4.length===b$3.length&&a$4.every((m$3,i$4)=>m$3.route.id===b$3[i$4].route.id)}function _internalSetRoutes(newRoutes){manifest={},inFlightDataRoutes=convertRoutesToDataRoutes(newRoutes,mapRouteProperties2,void 0,manifest)}function patchRoutes(routeId,children$1,unstable_allowElementMutations=!1){let isNonHMR=inFlightDataRoutes==null;patchRoutesImpl(routeId,children$1,inFlightDataRoutes||dataRoutes,manifest,mapRouteProperties2,unstable_allowElementMutations),isNonHMR&&(dataRoutes=[...dataRoutes],updateState({}))}return router$1={get basename(){return basename},get future(){return future},get state(){return state},get routes(){return dataRoutes},get window(){return routerWindow},initialize,subscribe,enableScrollRestoration,navigate,fetch:fetch2,revalidate,createHref:to=>init$1.history.createHref(to),encodeLocation:to=>init$1.history.encodeLocation(to),getFetcher,resetFetcher,deleteFetcher:queueFetcherForDeletion,dispose,getBlocker,deleteBlocker,patchRoutes,_internalFetchControllers:fetchControllers,_internalSetRoutes,_internalSetStateDoNotUseOrYouWillBreakYourApp(newState){updateState(newState)}},init$1.unstable_instrumentations&&(router$1=instrumentClientSideRouter(router$1,init$1.unstable_instrumentations.map(i$4=>i$4.router).filter(Boolean))),router$1}function isSubmissionNavigation(opts){return opts!=null&&(`formData`in opts&&opts.formData!=null||`body`in opts&&opts.body!==void 0)}function normalizeTo(location$1,matches,basename,to,fromRouteId,relative){let contextualMatches,activeRouteMatch;if(fromRouteId){contextualMatches=[];for(let match of matches)if(contextualMatches.push(match),match.route.id===fromRouteId){activeRouteMatch=match;break}}else contextualMatches=matches,activeRouteMatch=matches[matches.length-1];let path=resolveTo(to||`.`,getResolveToMatches(contextualMatches),stripBasename(location$1.pathname,basename)||location$1.pathname,relative===`path`);if(to??(path.search=location$1.search,path.hash=location$1.hash),(to==null||to===``||to===`.`)&&activeRouteMatch){let nakedIndex=hasNakedIndexQuery(path.search);if(activeRouteMatch.route.index&&!nakedIndex)path.search=path.search?path.search.replace(/^\?/,`?index&`):`?index`;else if(!activeRouteMatch.route.index&&nakedIndex){let params=new URLSearchParams(path.search),indexValues=params.getAll(`index`);params.delete(`index`),indexValues.filter(v$3=>v$3).forEach(v$3=>params.append(`index`,v$3));let qs=params.toString();path.search=qs?`?${qs}`:``}}return basename!==`/`&&(path.pathname=prependBasename({basename,pathname:path.pathname})),createPath(path)}function normalizeNavigateOptions(isFetcher,path,opts){if(!opts||!isSubmissionNavigation(opts))return{path};if(opts.formMethod&&!isValidMethod(opts.formMethod))return{path,error:getInternalRouterError(405,{method:opts.formMethod})};let getInvalidBodyError=()=>({path,error:getInternalRouterError(400,{type:`invalid-body`})}),formMethod=(opts.formMethod||`get`).toUpperCase(),formAction=stripHashFromPath(path);if(opts.body!==void 0){if(opts.formEncType===`text/plain`){if(!isMutationMethod(formMethod))return getInvalidBodyError();let text=typeof opts.body==`string`?opts.body:opts.body instanceof FormData||opts.body instanceof URLSearchParams?Array.from(opts.body.entries()).reduce((acc,[name,value])=>`${acc}${name}=${value}
`,``):String(opts.body);return{path,submission:{formMethod,formAction,formEncType:opts.formEncType,formData:void 0,json:void 0,text}}}else if(opts.formEncType===`application/json`){if(!isMutationMethod(formMethod))return getInvalidBodyError();try{let json=typeof opts.body==`string`?JSON.parse(opts.body):opts.body;return{path,submission:{formMethod,formAction,formEncType:opts.formEncType,formData:void 0,json,text:void 0}}}catch{return getInvalidBodyError()}}}invariant$4(typeof FormData==`function`,`FormData is not available in this environment`);let searchParams,formData;if(opts.formData)searchParams=convertFormDataToSearchParams(opts.formData),formData=opts.formData;else if(opts.body instanceof FormData)searchParams=convertFormDataToSearchParams(opts.body),formData=opts.body;else if(opts.body instanceof URLSearchParams)searchParams=opts.body,formData=convertSearchParamsToFormData(searchParams);else if(opts.body==null)searchParams=new URLSearchParams,formData=new FormData;else try{searchParams=new URLSearchParams(opts.body),formData=convertSearchParamsToFormData(searchParams)}catch{return getInvalidBodyError()}let submission={formMethod,formAction,formEncType:opts&&opts.formEncType||`application/x-www-form-urlencoded`,formData,json:void 0,text:void 0};if(isMutationMethod(submission.formMethod))return{path,submission};let parsedPath=parsePath(path);return isFetcher&&parsedPath.search&&hasNakedIndexQuery(parsedPath.search)&&searchParams.append(`index`,``),parsedPath.search=`?${searchParams}`,{path:createPath(parsedPath),submission}}function getMatchesToLoad(request,scopedContext,mapRouteProperties2,manifest,history,state,matches,submission,location$1,lazyRoutePropertiesToSkip,initialHydration,isRevalidationRequired,cancelledFetcherLoads,fetchersQueuedForDeletion,fetchLoadMatches,fetchRedirectIds,routesToUse,basename,hasPatchRoutesOnNavigation,pendingActionResult,callSiteDefaultShouldRevalidate){let actionResult=pendingActionResult?isErrorResult(pendingActionResult[1])?pendingActionResult[1].error:pendingActionResult[1].data:void 0,currentUrl=history.createURL(state.location),nextUrl=history.createURL(location$1),maxIdx;if(initialHydration&&state.errors){let boundaryId=Object.keys(state.errors)[0];maxIdx=matches.findIndex(m$3=>m$3.route.id===boundaryId)}else if(pendingActionResult&&isErrorResult(pendingActionResult[1])){let boundaryId=pendingActionResult[0];maxIdx=matches.findIndex(m$3=>m$3.route.id===boundaryId)-1}let actionStatus=pendingActionResult?pendingActionResult[1].statusCode:void 0,shouldSkipRevalidation=actionStatus&&actionStatus>=400,baseShouldRevalidateArgs={currentUrl,currentParams:state.matches[0]?.params||{},nextUrl,nextParams:matches[0].params,...submission,actionResult,actionStatus},pattern=getRoutePattern(matches),dsMatches=matches.map((match,index$2)=>{let{route}=match,forceShouldLoad=null;if(maxIdx!=null&&index$2>maxIdx?forceShouldLoad=!1:route.lazy?forceShouldLoad=!0:routeHasLoaderOrMiddleware(route)?initialHydration?forceShouldLoad=shouldLoadRouteOnHydration(route,state.loaderData,state.errors):isNewLoader(state.loaderData,state.matches[index$2],match)&&(forceShouldLoad=!0):forceShouldLoad=!1,forceShouldLoad!==null)return getDataStrategyMatch(mapRouteProperties2,manifest,request,pattern,match,lazyRoutePropertiesToSkip,scopedContext,forceShouldLoad);let defaultShouldRevalidate=!1;typeof callSiteDefaultShouldRevalidate==`boolean`?defaultShouldRevalidate=callSiteDefaultShouldRevalidate:shouldSkipRevalidation?defaultShouldRevalidate=!1:isRevalidationRequired||currentUrl.pathname+currentUrl.search===nextUrl.pathname+nextUrl.search?defaultShouldRevalidate=!0:currentUrl.search===nextUrl.search?isNewRouteInstance(state.matches[index$2],match)&&(defaultShouldRevalidate=!0):defaultShouldRevalidate=!0;let shouldRevalidateArgs={...baseShouldRevalidateArgs,defaultShouldRevalidate};return getDataStrategyMatch(mapRouteProperties2,manifest,request,pattern,match,lazyRoutePropertiesToSkip,scopedContext,shouldRevalidateLoader(match,shouldRevalidateArgs),shouldRevalidateArgs,callSiteDefaultShouldRevalidate)}),revalidatingFetchers=[];return fetchLoadMatches.forEach((f$3,key$1)=>{if(initialHydration||!matches.some(m$3=>m$3.route.id===f$3.routeId)||fetchersQueuedForDeletion.has(key$1))return;let fetcher=state.fetchers.get(key$1),isMidInitialLoad=fetcher&&fetcher.state!==`idle`&&fetcher.data===void 0,fetcherMatches=matchRoutes(routesToUse,f$3.path,basename);if(!fetcherMatches){if(hasPatchRoutesOnNavigation&&isMidInitialLoad)return;revalidatingFetchers.push({key:key$1,routeId:f$3.routeId,path:f$3.path,matches:null,match:null,request:null,controller:null});return}if(fetchRedirectIds.has(key$1))return;let fetcherMatch=getTargetMatch(fetcherMatches,f$3.path),fetchController=new AbortController,fetchRequest=createClientSideRequest(history,f$3.path,fetchController.signal),fetcherDsMatches=null;if(cancelledFetcherLoads.has(key$1))cancelledFetcherLoads.delete(key$1),fetcherDsMatches=getTargetedDataStrategyMatches(mapRouteProperties2,manifest,fetchRequest,fetcherMatches,fetcherMatch,lazyRoutePropertiesToSkip,scopedContext);else if(isMidInitialLoad)isRevalidationRequired&&(fetcherDsMatches=getTargetedDataStrategyMatches(mapRouteProperties2,manifest,fetchRequest,fetcherMatches,fetcherMatch,lazyRoutePropertiesToSkip,scopedContext));else{let defaultShouldRevalidate;defaultShouldRevalidate=typeof callSiteDefaultShouldRevalidate==`boolean`?callSiteDefaultShouldRevalidate:shouldSkipRevalidation?!1:isRevalidationRequired;let shouldRevalidateArgs={...baseShouldRevalidateArgs,defaultShouldRevalidate};shouldRevalidateLoader(fetcherMatch,shouldRevalidateArgs)&&(fetcherDsMatches=getTargetedDataStrategyMatches(mapRouteProperties2,manifest,fetchRequest,fetcherMatches,fetcherMatch,lazyRoutePropertiesToSkip,scopedContext,shouldRevalidateArgs))}fetcherDsMatches&&revalidatingFetchers.push({key:key$1,routeId:f$3.routeId,path:f$3.path,matches:fetcherDsMatches,match:fetcherMatch,request:fetchRequest,controller:fetchController})}),{dsMatches,revalidatingFetchers}}function routeHasLoaderOrMiddleware(route){return route.loader!=null||route.middleware!=null&&route.middleware.length>0}function shouldLoadRouteOnHydration(route,loaderData,errors){if(route.lazy)return!0;if(!routeHasLoaderOrMiddleware(route))return!1;let hasData=loaderData!=null&&route.id in loaderData,hasError=errors!=null&&errors[route.id]!==void 0;return!hasData&&hasError?!1:typeof route.loader==`function`&&route.loader.hydrate===!0?!0:!hasData&&!hasError}function isNewLoader(currentLoaderData,currentMatch,match){let isNew=!currentMatch||match.route.id!==currentMatch.route.id,isMissingData=!currentLoaderData.hasOwnProperty(match.route.id);return isNew||isMissingData}function isNewRouteInstance(currentMatch,match){let currentPath=currentMatch.route.path;return currentMatch.pathname!==match.pathname||currentPath!=null&&currentPath.endsWith(`*`)&&currentMatch.params[`*`]!==match.params[`*`]}function shouldRevalidateLoader(loaderMatch,arg){if(loaderMatch.route.shouldRevalidate){let routeChoice=loaderMatch.route.shouldRevalidate(arg);if(typeof routeChoice==`boolean`)return routeChoice}return arg.defaultShouldRevalidate}function patchRoutesImpl(routeId,children$1,routesToUse,manifest,mapRouteProperties2,allowElementMutations){let childrenToPatch;if(routeId){let route=manifest[routeId];invariant$4(route,`No route found to patch children into: routeId = ${routeId}`),route.children||=[],childrenToPatch=route.children}else childrenToPatch=routesToUse;let uniqueChildren=[],existingChildren=[];if(children$1.forEach(newRoute=>{let existingRoute=childrenToPatch.find(existingRoute2=>isSameRoute(newRoute,existingRoute2));existingRoute?existingChildren.push({existingRoute,newRoute}):uniqueChildren.push(newRoute)}),uniqueChildren.length>0){let newRoutes=convertRoutesToDataRoutes(uniqueChildren,mapRouteProperties2,[routeId||`_`,`patch`,String(childrenToPatch?.length||`0`)],manifest);childrenToPatch.push(...newRoutes)}if(allowElementMutations&&existingChildren.length>0)for(let i$4=0;i$4<existingChildren.length;i$4++){let{existingRoute,newRoute}=existingChildren[i$4],existingRouteTyped=existingRoute,[newRouteTyped]=convertRoutesToDataRoutes([newRoute],mapRouteProperties2,[],{},!0);Object.assign(existingRouteTyped,{element:newRouteTyped.element?newRouteTyped.element:existingRouteTyped.element,errorElement:newRouteTyped.errorElement?newRouteTyped.errorElement:existingRouteTyped.errorElement,hydrateFallbackElement:newRouteTyped.hydrateFallbackElement?newRouteTyped.hydrateFallbackElement:existingRouteTyped.hydrateFallbackElement})}}function isSameRoute(newRoute,existingRoute){return`id`in newRoute&&`id`in existingRoute&&newRoute.id===existingRoute.id?!0:newRoute.index===existingRoute.index&&newRoute.path===existingRoute.path&&newRoute.caseSensitive===existingRoute.caseSensitive?(!newRoute.children||newRoute.children.length===0)&&(!existingRoute.children||existingRoute.children.length===0)?!0:newRoute.children.every((aChild,i$4)=>existingRoute.children?.some(bChild=>isSameRoute(aChild,bChild))):!1}var lazyRoutePropertyCache=new WeakMap,loadLazyRouteProperty=({key:key$1,route,manifest,mapRouteProperties:mapRouteProperties2})=>{let routeToUpdate=manifest[route.id];if(invariant$4(routeToUpdate,`No route found in manifest`),!routeToUpdate.lazy||typeof routeToUpdate.lazy!=`object`)return;let lazyFn=routeToUpdate.lazy[key$1];if(!lazyFn)return;let cache=lazyRoutePropertyCache.get(routeToUpdate);cache||(cache={},lazyRoutePropertyCache.set(routeToUpdate,cache));let cachedPromise=cache[key$1];if(cachedPromise)return cachedPromise;let propertyPromise=(async()=>{let isUnsupported=isUnsupportedLazyRouteObjectKey(key$1),isStaticallyDefined=routeToUpdate[key$1]!==void 0&&key$1!==`hasErrorBoundary`;if(isUnsupported)warning$1(!isUnsupported,`Route property `+key$1+` is not a supported lazy route property. This property will be ignored.`),cache[key$1]=Promise.resolve();else if(isStaticallyDefined)warning$1(!1,`Route "${routeToUpdate.id}" has a static property "${key$1}" defined. The lazy property will be ignored.`);else{let value=await lazyFn();value!=null&&(Object.assign(routeToUpdate,{[key$1]:value}),Object.assign(routeToUpdate,mapRouteProperties2(routeToUpdate)))}typeof routeToUpdate.lazy==`object`&&(routeToUpdate.lazy[key$1]=void 0,Object.values(routeToUpdate.lazy).every(value=>value===void 0)&&(routeToUpdate.lazy=void 0))})();return cache[key$1]=propertyPromise,propertyPromise},lazyRouteFunctionCache=new WeakMap;function loadLazyRoute(route,type,manifest,mapRouteProperties2,lazyRoutePropertiesToSkip){let routeToUpdate=manifest[route.id];if(invariant$4(routeToUpdate,`No route found in manifest`),!route.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof route.lazy==`function`){let cachedPromise=lazyRouteFunctionCache.get(routeToUpdate);if(cachedPromise)return{lazyRoutePromise:cachedPromise,lazyHandlerPromise:cachedPromise};let lazyRoutePromise2=(async()=>{invariant$4(typeof route.lazy==`function`,`No lazy route function found`);let lazyRoute=await route.lazy(),routeUpdates={};for(let lazyRouteProperty in lazyRoute){let lazyValue=lazyRoute[lazyRouteProperty];if(lazyValue===void 0)continue;let isUnsupported=isUnsupportedLazyRouteFunctionKey(lazyRouteProperty),isStaticallyDefined=routeToUpdate[lazyRouteProperty]!==void 0&&lazyRouteProperty!==`hasErrorBoundary`;isUnsupported?warning$1(!isUnsupported,`Route property `+lazyRouteProperty+` is not a supported property to be returned from a lazy route function. This property will be ignored.`):isStaticallyDefined?warning$1(!isStaticallyDefined,`Route "${routeToUpdate.id}" has a static property "${lazyRouteProperty}" defined but its lazy function is also returning a value for this property. The lazy route property "${lazyRouteProperty}" will be ignored.`):routeUpdates[lazyRouteProperty]=lazyValue}Object.assign(routeToUpdate,routeUpdates),Object.assign(routeToUpdate,{...mapRouteProperties2(routeToUpdate),lazy:void 0})})();return lazyRouteFunctionCache.set(routeToUpdate,lazyRoutePromise2),lazyRoutePromise2.catch(()=>{}),{lazyRoutePromise:lazyRoutePromise2,lazyHandlerPromise:lazyRoutePromise2}}let lazyKeys=Object.keys(route.lazy),lazyPropertyPromises=[],lazyHandlerPromise;for(let key$1 of lazyKeys){if(lazyRoutePropertiesToSkip&&lazyRoutePropertiesToSkip.includes(key$1))continue;let promise=loadLazyRouteProperty({key:key$1,route,manifest,mapRouteProperties:mapRouteProperties2});promise&&(lazyPropertyPromises.push(promise),key$1===type&&(lazyHandlerPromise=promise))}let lazyRoutePromise=lazyPropertyPromises.length>0?Promise.all(lazyPropertyPromises).then(()=>{}):void 0;return lazyRoutePromise?.catch(()=>{}),lazyHandlerPromise?.catch(()=>{}),{lazyRoutePromise,lazyHandlerPromise}}async function defaultDataStrategy(args){let matchesToLoad=args.matches.filter(m$3=>m$3.shouldLoad),keyedResults={};return(await Promise.all(matchesToLoad.map(m$3=>m$3.resolve()))).forEach((result,i$4)=>{keyedResults[matchesToLoad[i$4].route.id]=result}),keyedResults}async function defaultDataStrategyWithMiddleware(args){return args.matches.some(m$3=>m$3.route.middleware)?runClientMiddlewarePipeline(args,()=>defaultDataStrategy(args)):defaultDataStrategy(args)}function runClientMiddlewarePipeline(args,handler){return runMiddlewarePipeline(args,handler,r$4=>{if(isRedirectResponse(r$4))throw r$4;return r$4},isDataStrategyResults,errorHandler);function errorHandler(error$1,routeId,nextResult){if(nextResult)return Promise.resolve(Object.assign(nextResult.value,{[routeId]:{type:`error`,result:error$1}}));{let{matches}=args,boundaryRouteId=findNearestBoundary(matches,matches[Math.min(Math.max(matches.findIndex(m$3=>m$3.route.id===routeId),0),Math.max(matches.findIndex(m$3=>m$3.shouldCallHandler()),0))].route.id).route.id;return Promise.resolve({[boundaryRouteId]:{type:`error`,result:error$1}})}}}async function runMiddlewarePipeline(args,handler,processResult,isResult,errorHandler){let{matches,request,params,context,unstable_pattern}=args,tuples=matches.flatMap(m$3=>m$3.route.middleware?m$3.route.middleware.map(fn=>[m$3.route.id,fn]):[]);return await callRouteMiddleware({request,params,context,unstable_pattern},tuples,handler,processResult,isResult,errorHandler)}async function callRouteMiddleware(args,middlewares,handler,processResult,isResult,errorHandler,idx=0){let{request}=args;if(request.signal.aborted)throw request.signal.reason??Error(`Request aborted: ${request.method} ${request.url}`);let tuple=middlewares[idx];if(!tuple)return await handler();let[routeId,middleware]=tuple,nextResult,next=async()=>{if(nextResult)throw Error("You may only call `next()` once per middleware");try{return nextResult={value:await callRouteMiddleware(args,middlewares,handler,processResult,isResult,errorHandler,idx+1)},nextResult.value}catch(error$1){return nextResult={value:await errorHandler(error$1,routeId,nextResult)},nextResult.value}};try{let value=await middleware(args,next),result=value==null?void 0:processResult(value);return isResult(result)?result:nextResult?result??nextResult.value:(nextResult={value:await next()},nextResult.value)}catch(error$1){return await errorHandler(error$1,routeId,nextResult)}}function getDataStrategyMatchLazyPromises(mapRouteProperties2,manifest,request,match,lazyRoutePropertiesToSkip){let lazyMiddlewarePromise=loadLazyRouteProperty({key:`middleware`,route:match.route,manifest,mapRouteProperties:mapRouteProperties2}),lazyRoutePromises=loadLazyRoute(match.route,isMutationMethod(request.method)?`action`:`loader`,manifest,mapRouteProperties2,lazyRoutePropertiesToSkip);return{middleware:lazyMiddlewarePromise,route:lazyRoutePromises.lazyRoutePromise,handler:lazyRoutePromises.lazyHandlerPromise}}function getDataStrategyMatch(mapRouteProperties2,manifest,request,unstable_pattern,match,lazyRoutePropertiesToSkip,scopedContext,shouldLoad,shouldRevalidateArgs=null,callSiteDefaultShouldRevalidate){let isUsingNewApi=!1,_lazyPromises=getDataStrategyMatchLazyPromises(mapRouteProperties2,manifest,request,match,lazyRoutePropertiesToSkip);return{...match,_lazyPromises,shouldLoad,shouldRevalidateArgs,shouldCallHandler(defaultShouldRevalidate){return isUsingNewApi=!0,shouldRevalidateArgs?typeof callSiteDefaultShouldRevalidate==`boolean`?shouldRevalidateLoader(match,{...shouldRevalidateArgs,defaultShouldRevalidate:callSiteDefaultShouldRevalidate}):typeof defaultShouldRevalidate==`boolean`?shouldRevalidateLoader(match,{...shouldRevalidateArgs,defaultShouldRevalidate}):shouldRevalidateLoader(match,shouldRevalidateArgs):shouldLoad},resolve(handlerOverride){let{lazy:lazy$1,loader,middleware}=match.route,callHandler=isUsingNewApi||shouldLoad||handlerOverride&&!isMutationMethod(request.method)&&(lazy$1||loader),isMiddlewareOnlyRoute=middleware&&middleware.length>0&&!loader&&!lazy$1;return callHandler&&(isMutationMethod(request.method)||!isMiddlewareOnlyRoute)?callLoaderOrAction({request,unstable_pattern,match,lazyHandlerPromise:_lazyPromises?.handler,lazyRoutePromise:_lazyPromises?.route,handlerOverride,scopedContext}):Promise.resolve({type:`data`,result:void 0})}}}function getTargetedDataStrategyMatches(mapRouteProperties2,manifest,request,matches,targetMatch,lazyRoutePropertiesToSkip,scopedContext,shouldRevalidateArgs=null){return matches.map(match=>match.route.id===targetMatch.route.id?getDataStrategyMatch(mapRouteProperties2,manifest,request,getRoutePattern(matches),match,lazyRoutePropertiesToSkip,scopedContext,!0,shouldRevalidateArgs):{...match,shouldLoad:!1,shouldRevalidateArgs,shouldCallHandler:()=>!1,_lazyPromises:getDataStrategyMatchLazyPromises(mapRouteProperties2,manifest,request,match,lazyRoutePropertiesToSkip),resolve:()=>Promise.resolve({type:`data`,result:void 0})})}async function callDataStrategyImpl(dataStrategyImpl,request,matches,fetcherKey,scopedContext,isStaticHandler){matches.some(m$3=>m$3._lazyPromises?.middleware)&&await Promise.all(matches.map(m$3=>m$3._lazyPromises?.middleware));let dataStrategyArgs={request,unstable_pattern:getRoutePattern(matches),params:matches[0].params,context:scopedContext,matches},runClientMiddleware=isStaticHandler?()=>{throw Error("You cannot call `runClientMiddleware()` from a static handler `dataStrategy`. Middleware is run outside of `dataStrategy` during SSR in order to bubble up the Response.  You can enable middleware via the `respond` API in `query`/`queryRoute`")}:cb=>{let typedDataStrategyArgs=dataStrategyArgs;return runClientMiddlewarePipeline(typedDataStrategyArgs,()=>cb({...typedDataStrategyArgs,fetcherKey,runClientMiddleware:()=>{throw Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))},results=await dataStrategyImpl({...dataStrategyArgs,fetcherKey,runClientMiddleware});try{await Promise.all(matches.flatMap(m$3=>[m$3._lazyPromises?.handler,m$3._lazyPromises?.route]))}catch{}return results}async function callLoaderOrAction({request,unstable_pattern,match,lazyHandlerPromise,lazyRoutePromise,handlerOverride,scopedContext}){let result,onReject,isAction=isMutationMethod(request.method),type=isAction?`action`:`loader`,runHandler=handler=>{let reject,abortPromise=new Promise((_$1,r$4)=>reject=r$4);onReject=()=>reject(),request.signal.addEventListener(`abort`,onReject);let actualHandler=ctx=>typeof handler==`function`?handler({request,unstable_pattern,params:match.params,context:scopedContext},...ctx===void 0?[]:[ctx]):Promise.reject(Error(`You cannot call the handler for a route which defines a boolean "${type}" [routeId: ${match.route.id}]`)),handlerPromise=(async()=>{try{return{type:`data`,result:await(handlerOverride?handlerOverride(ctx=>actualHandler(ctx)):actualHandler())}}catch(e$4){return{type:`error`,result:e$4}}})();return Promise.race([handlerPromise,abortPromise])};try{let handler=isAction?match.route.action:match.route.loader;if(lazyHandlerPromise||lazyRoutePromise)if(handler){let handlerError,[value]=await Promise.all([runHandler(handler).catch(e$4=>{handlerError=e$4}),lazyHandlerPromise,lazyRoutePromise]);if(handlerError!==void 0)throw handlerError;result=value}else{await lazyHandlerPromise;let handler2=isAction?match.route.action:match.route.loader;if(handler2)[result]=await Promise.all([runHandler(handler2),lazyRoutePromise]);else if(type===`action`){let url=new URL(request.url),pathname=url.pathname+url.search;throw getInternalRouterError(405,{method:request.method,pathname,routeId:match.route.id})}else return{type:`data`,result:void 0}}else if(handler)result=await runHandler(handler);else{let url=new URL(request.url);throw getInternalRouterError(404,{pathname:url.pathname+url.search})}}catch(e$4){return{type:`error`,result:e$4}}finally{onReject&&request.signal.removeEventListener(`abort`,onReject)}return result}async function parseResponseBody(response){let contentType=response.headers.get(`Content-Type`);return contentType&&/\bapplication\/json\b/.test(contentType)?response.body==null?null:response.json():response.text()}async function convertDataStrategyResultToDataResult(dataStrategyResult){let{result,type}=dataStrategyResult;if(isResponse$1(result)){let data2;try{data2=await parseResponseBody(result)}catch(e$4){return{type:`error`,error:e$4}}return type===`error`?{type:`error`,error:new ErrorResponseImpl(result.status,result.statusText,data2),statusCode:result.status,headers:result.headers}:{type:`data`,data:data2,statusCode:result.status,headers:result.headers}}return type===`error`?isDataWithResponseInit(result)?result.data instanceof Error?{type:`error`,error:result.data,statusCode:result.init?.status,headers:result.init?.headers?new Headers(result.init.headers):void 0}:{type:`error`,error:dataWithResponseInitToErrorResponse(result),statusCode:isRouteErrorResponse(result)?result.status:void 0,headers:result.init?.headers?new Headers(result.init.headers):void 0}:{type:`error`,error:result,statusCode:isRouteErrorResponse(result)?result.status:void 0}:isDataWithResponseInit(result)?{type:`data`,data:result.data,statusCode:result.init?.status,headers:result.init?.headers?new Headers(result.init.headers):void 0}:{type:`data`,data:result}}function normalizeRelativeRoutingRedirectResponse(response,request,routeId,matches,basename){let location$1=response.headers.get(`Location`);if(invariant$4(location$1,`Redirects returned/thrown from loaders/actions must have a Location header`),!isAbsoluteUrl(location$1)){let trimmedMatches=matches.slice(0,matches.findIndex(m$3=>m$3.route.id===routeId)+1);location$1=normalizeTo(new URL(request.url),trimmedMatches,basename,location$1),response.headers.set(`Location`,location$1)}return response}function normalizeRedirectLocation(location$1,currentUrl,basename,historyInstance){let invalidProtocols=[`about:`,`blob:`,`chrome:`,`chrome-untrusted:`,`content:`,`data:`,`devtools:`,`file:`,`filesystem:`,`javascript:`];if(isAbsoluteUrl(location$1)){let normalizedLocation=location$1,url=normalizedLocation.startsWith(`//`)?new URL(currentUrl.protocol+normalizedLocation):new URL(normalizedLocation);if(invalidProtocols.includes(url.protocol))throw Error(`Invalid redirect location`);let isSameBasename=stripBasename(url.pathname,basename)!=null;if(url.origin===currentUrl.origin&&isSameBasename)return url.pathname+url.search+url.hash}try{let url=historyInstance.createURL(location$1);if(invalidProtocols.includes(url.protocol))throw Error(`Invalid redirect location`)}catch{}return location$1}function createClientSideRequest(history,location$1,signal,submission){let url=history.createURL(stripHashFromPath(location$1)).toString(),init$1={signal};if(submission&&isMutationMethod(submission.formMethod)){let{formMethod,formEncType}=submission;init$1.method=formMethod.toUpperCase(),formEncType===`application/json`?(init$1.headers=new Headers({"Content-Type":formEncType}),init$1.body=JSON.stringify(submission.json)):formEncType===`text/plain`?init$1.body=submission.text:formEncType===`application/x-www-form-urlencoded`&&submission.formData?init$1.body=convertFormDataToSearchParams(submission.formData):init$1.body=submission.formData}return new Request(url,init$1)}function convertFormDataToSearchParams(formData){let searchParams=new URLSearchParams;for(let[key$1,value]of formData.entries())searchParams.append(key$1,typeof value==`string`?value:value.name);return searchParams}function convertSearchParamsToFormData(searchParams){let formData=new FormData;for(let[key$1,value]of searchParams.entries())formData.append(key$1,value);return formData}function processRouteLoaderData(matches,results,pendingActionResult,isStaticHandler=!1,skipLoaderErrorBubbling=!1){let loaderData={},errors=null,statusCode,foundError=!1,loaderHeaders={},pendingError=pendingActionResult&&isErrorResult(pendingActionResult[1])?pendingActionResult[1].error:void 0;return matches.forEach(match=>{if(!(match.route.id in results))return;let id$3=match.route.id,result=results[id$3];if(invariant$4(!isRedirectResult(result),`Cannot handle redirect results in processLoaderData`),isErrorResult(result)){let error$1=result.error;if(pendingError!==void 0&&(error$1=pendingError,pendingError=void 0),errors||={},skipLoaderErrorBubbling)errors[id$3]=error$1;else{let boundaryMatch=findNearestBoundary(matches,id$3);errors[boundaryMatch.route.id]??(errors[boundaryMatch.route.id]=error$1)}isStaticHandler||(loaderData[id$3]=ResetLoaderDataSymbol),foundError||(foundError=!0,statusCode=isRouteErrorResponse(result.error)?result.error.status:500),result.headers&&(loaderHeaders[id$3]=result.headers)}else loaderData[id$3]=result.data,result.statusCode&&result.statusCode!==200&&!foundError&&(statusCode=result.statusCode),result.headers&&(loaderHeaders[id$3]=result.headers)}),pendingError!==void 0&&pendingActionResult&&(errors={[pendingActionResult[0]]:pendingError},pendingActionResult[2]&&(loaderData[pendingActionResult[2]]=void 0)),{loaderData,errors,statusCode:statusCode||200,loaderHeaders}}function processLoaderData(state,matches,results,pendingActionResult,revalidatingFetchers,fetcherResults){let{loaderData,errors}=processRouteLoaderData(matches,results,pendingActionResult);return revalidatingFetchers.filter(f$3=>!f$3.matches||f$3.matches.some(m$3=>m$3.shouldLoad)).forEach(rf=>{let{key:key$1,match,controller}=rf;if(controller&&controller.signal.aborted)return;let result=fetcherResults[key$1];if(invariant$4(result,`Did not find corresponding fetcher result`),isErrorResult(result)){let boundaryMatch=findNearestBoundary(state.matches,match?.route.id);errors&&errors[boundaryMatch.route.id]||(errors={...errors,[boundaryMatch.route.id]:result.error}),state.fetchers.delete(key$1)}else if(isRedirectResult(result))invariant$4(!1,`Unhandled fetcher revalidation redirect`);else{let doneFetcher=getDoneFetcher(result.data);state.fetchers.set(key$1,doneFetcher)}}),{loaderData,errors}}function mergeLoaderData(loaderData,newLoaderData,matches,errors){let mergedLoaderData=Object.entries(newLoaderData).filter(([,v$3])=>v$3!==ResetLoaderDataSymbol).reduce((merged,[k$3,v$3])=>(merged[k$3]=v$3,merged),{});for(let match of matches){let id$3=match.route.id;if(!newLoaderData.hasOwnProperty(id$3)&&loaderData.hasOwnProperty(id$3)&&match.route.loader&&(mergedLoaderData[id$3]=loaderData[id$3]),errors&&errors.hasOwnProperty(id$3))break}return mergedLoaderData}function getActionDataForCommit(pendingActionResult){return pendingActionResult?isErrorResult(pendingActionResult[1])?{actionData:{}}:{actionData:{[pendingActionResult[0]]:pendingActionResult[1].data}}:{}}function findNearestBoundary(matches,routeId){return(routeId?matches.slice(0,matches.findIndex(m$3=>m$3.route.id===routeId)+1):[...matches]).reverse().find(m$3=>m$3.route.hasErrorBoundary===!0)||matches[0]}function getShortCircuitMatches(routes){let route=routes.length===1?routes[0]:routes.find(r$4=>r$4.index||!r$4.path||r$4.path===`/`)||{id:`__shim-error-route__`};return{matches:[{params:{},pathname:``,pathnameBase:``,route}],route}}function getInternalRouterError(status,{pathname,routeId,method,type,message}={}){let statusText=`Unknown Server Error`,errorMessage=`Unknown @remix-run/router error`;return status===400?(statusText=`Bad Request`,method&&pathname&&routeId?errorMessage=`You made a ${method} request to "${pathname}" but did not provide a \`loader\` for route "${routeId}", so there is no way to handle the request.`:type===`invalid-body`&&(errorMessage=`Unable to encode submission body`)):status===403?(statusText=`Forbidden`,errorMessage=`Route "${routeId}" does not match URL "${pathname}"`):status===404?(statusText=`Not Found`,errorMessage=`No route matches URL "${pathname}"`):status===405&&(statusText=`Method Not Allowed`,method&&pathname&&routeId?errorMessage=`You made a ${method.toUpperCase()} request to "${pathname}" but did not provide an \`action\` for route "${routeId}", so there is no way to handle the request.`:method&&(errorMessage=`Invalid request method "${method.toUpperCase()}"`)),new ErrorResponseImpl(status||500,statusText,Error(errorMessage),!0)}function findRedirect(results){let entries=Object.entries(results);for(let i$4=entries.length-1;i$4>=0;i$4--){let[key$1,result]=entries[i$4];if(isRedirectResult(result))return{key:key$1,result}}}function stripHashFromPath(path){return createPath({...typeof path==`string`?parsePath(path):path,hash:``})}function isHashChangeOnly(a$4,b$3){return a$4.pathname!==b$3.pathname||a$4.search!==b$3.search?!1:a$4.hash===``?b$3.hash!==``:a$4.hash===b$3.hash?!0:b$3.hash!==``}function dataWithResponseInitToErrorResponse(data2){return new ErrorResponseImpl(data2.init?.status??500,data2.init?.statusText??`Internal Server Error`,data2.data)}function isDataStrategyResults(result){return typeof result==`object`&&!!result&&Object.entries(result).every(([key$1,value])=>typeof key$1==`string`&&isDataStrategyResult(value))}function isDataStrategyResult(result){return typeof result==`object`&&!!result&&`type`in result&&`result`in result&&(result.type===`data`||result.type===`error`)}function isRedirectDataStrategyResult(result){return isResponse$1(result.result)&&redirectStatusCodes.has(result.result.status)}function isErrorResult(result){return result.type===`error`}function isRedirectResult(result){return(result&&result.type)===`redirect`}function isDataWithResponseInit(value){return typeof value==`object`&&!!value&&`type`in value&&`data`in value&&`init`in value&&value.type===`DataWithResponseInit`}function isResponse$1(value){return value!=null&&typeof value.status==`number`&&typeof value.statusText==`string`&&typeof value.headers==`object`&&value.body!==void 0}function isRedirectStatusCode(statusCode){return redirectStatusCodes.has(statusCode)}function isRedirectResponse(result){return isResponse$1(result)&&isRedirectStatusCode(result.status)&&result.headers.has(`Location`)}function isValidMethod(method){return validRequestMethods.has(method.toUpperCase())}function isMutationMethod(method){return validMutationMethods.has(method.toUpperCase())}function hasNakedIndexQuery(search){return new URLSearchParams(search).getAll(`index`).some(v$3=>v$3===``)}function getTargetMatch(matches,location$1){let search=typeof location$1==`string`?parsePath(location$1).search:location$1.search;if(matches[matches.length-1].route.index&&hasNakedIndexQuery(search||``))return matches[matches.length-1];let pathMatches=getPathContributingMatches(matches);return pathMatches[pathMatches.length-1]}function getSubmissionFromNavigation(navigation$1){let{formMethod,formAction,formEncType,text,formData,json}=navigation$1;if(!(!formMethod||!formAction||!formEncType)){if(text!=null)return{formMethod,formAction,formEncType,formData:void 0,json:void 0,text};if(formData!=null)return{formMethod,formAction,formEncType,formData,json:void 0,text:void 0};if(json!==void 0)return{formMethod,formAction,formEncType,formData:void 0,json,text:void 0}}}function getLoadingNavigation(location$1,submission){return submission?{state:`loading`,location:location$1,formMethod:submission.formMethod,formAction:submission.formAction,formEncType:submission.formEncType,formData:submission.formData,json:submission.json,text:submission.text}:{state:`loading`,location:location$1,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(location$1,submission){return{state:`submitting`,location:location$1,formMethod:submission.formMethod,formAction:submission.formAction,formEncType:submission.formEncType,formData:submission.formData,json:submission.json,text:submission.text}}function getLoadingFetcher(submission,data2){return submission?{state:`loading`,formMethod:submission.formMethod,formAction:submission.formAction,formEncType:submission.formEncType,formData:submission.formData,json:submission.json,text:submission.text,data:data2}:{state:`loading`,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:data2}}function getSubmittingFetcher(submission,existingFetcher){return{state:`submitting`,formMethod:submission.formMethod,formAction:submission.formAction,formEncType:submission.formEncType,formData:submission.formData,json:submission.json,text:submission.text,data:existingFetcher?existingFetcher.data:void 0}}function getDoneFetcher(data2){return{state:`idle`,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:data2}}function restoreAppliedTransitions(_window,transitions$1){try{let sessionPositions=_window.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(sessionPositions){let json=JSON.parse(sessionPositions);for(let[k$3,v$3]of Object.entries(json||{}))v$3&&Array.isArray(v$3)&&transitions$1.set(k$3,new Set(v$3||[]))}}catch{}}function persistAppliedTransitions(_window,transitions$1){if(transitions$1.size>0){let json={};for(let[k$3,v$3]of transitions$1)json[k$3]=[...v$3];try{_window.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(json))}catch(error$1){warning$1(!1,`Failed to save applied view transitions in sessionStorage (${error$1}).`)}}}function createDeferred(){let resolve,reject,promise=new Promise((res,rej)=>{resolve=async val=>{res(val);try{await promise}catch{}},reject=async error$1=>{rej(error$1);try{await promise}catch{}}});return{promise,resolve,reject}}var DataRouterContext=import_react.createContext(null);DataRouterContext.displayName=`DataRouter`;var DataRouterStateContext=import_react.createContext(null);DataRouterStateContext.displayName=`DataRouterState`;var RSCRouterContext=import_react.createContext(!1);function useIsRSCRouterContext(){return import_react.useContext(RSCRouterContext)}var ViewTransitionContext=import_react.createContext({isTransitioning:!1});ViewTransitionContext.displayName=`ViewTransition`;var FetchersContext=import_react.createContext(new Map);FetchersContext.displayName=`Fetchers`;var AwaitContext=import_react.createContext(null);AwaitContext.displayName=`Await`;var NavigationContext=import_react.createContext(null);NavigationContext.displayName=`Navigation`;var LocationContext=import_react.createContext(null);LocationContext.displayName=`Location`;var RouteContext=import_react.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName=`Route`;var RouteErrorContext=import_react.createContext(null);RouteErrorContext.displayName=`RouteError`;var ENABLE_DEV_WARNINGS=!0,ERROR_DIGEST_BASE=`REACT_ROUTER_ERROR`,ERROR_DIGEST_REDIRECT=`REDIRECT`,ERROR_DIGEST_ROUTE_ERROR_RESPONSE=`ROUTE_ERROR_RESPONSE`;function decodeRedirectErrorDigest(digest){if(digest.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_REDIRECT}:{`))try{let parsed=JSON.parse(digest.slice(28));if(typeof parsed==`object`&&parsed&&typeof parsed.status==`number`&&typeof parsed.statusText==`string`&&typeof parsed.location==`string`&&typeof parsed.reloadDocument==`boolean`&&typeof parsed.replace==`boolean`)return parsed}catch{}}function decodeRouteErrorResponseDigest(digest){if(digest.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_ROUTE_ERROR_RESPONSE}:{`))try{let parsed=JSON.parse(digest.slice(40));if(typeof parsed==`object`&&parsed&&typeof parsed.status==`number`&&typeof parsed.statusText==`string`)return new ErrorResponseImpl(parsed.status,parsed.statusText,parsed.data)}catch{}}function useHref(to,{relative}={}){invariant$4(useInRouterContext(),`useHref() may be used only in the context of a <Router> component.`);let{basename,navigator:navigator$1}=import_react.useContext(NavigationContext),{hash,pathname,search}=useResolvedPath(to,{relative}),joinedPathname=pathname;return basename!==`/`&&(joinedPathname=pathname===`/`?basename:joinPaths([basename,pathname])),navigator$1.createHref({pathname:joinedPathname,search,hash})}function useInRouterContext(){return import_react.useContext(LocationContext)!=null}function useLocation(){return invariant$4(useInRouterContext(),`useLocation() may be used only in the context of a <Router> component.`),import_react.useContext(LocationContext).location}var navigateEffectWarning=`You should call navigate() in a React.useEffect(), not when your component is first rendered.`;function useIsomorphicLayoutEffect$6(cb){import_react.useContext(NavigationContext).static||import_react.useLayoutEffect(cb)}function useNavigate(){let{isDataRoute}=import_react.useContext(RouteContext);return isDataRoute?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$4(useInRouterContext(),`useNavigate() may be used only in the context of a <Router> component.`);let dataRouterContext=import_react.useContext(DataRouterContext),{basename,navigator:navigator$1}=import_react.useContext(NavigationContext),{matches}=import_react.useContext(RouteContext),{pathname:locationPathname}=useLocation(),routePathnamesJson=JSON.stringify(getResolveToMatches(matches)),activeRef=import_react.useRef(!1);return useIsomorphicLayoutEffect$6(()=>{activeRef.current=!0}),import_react.useCallback((to,options$1={})=>{if(warning$1(activeRef.current,navigateEffectWarning),!activeRef.current)return;if(typeof to==`number`){navigator$1.go(to);return}let path=resolveTo(to,JSON.parse(routePathnamesJson),locationPathname,options$1.relative===`path`);dataRouterContext==null&&basename!==`/`&&(path.pathname=path.pathname===`/`?basename:joinPaths([basename,path.pathname])),(options$1.replace?navigator$1.replace:navigator$1.push)(path,options$1.state,options$1)},[basename,navigator$1,routePathnamesJson,locationPathname,dataRouterContext])}var OutletContext=import_react.createContext(null);function useOutlet(context){let outlet=import_react.useContext(RouteContext).outlet;return import_react.useMemo(()=>outlet&&import_react.createElement(OutletContext.Provider,{value:context},outlet),[outlet,context])}function useParams(){let{matches}=import_react.useContext(RouteContext),routeMatch=matches[matches.length-1];return routeMatch?routeMatch.params:{}}function useResolvedPath(to,{relative}={}){let{matches}=import_react.useContext(RouteContext),{pathname:locationPathname}=useLocation(),routePathnamesJson=JSON.stringify(getResolveToMatches(matches));return import_react.useMemo(()=>resolveTo(to,JSON.parse(routePathnamesJson),locationPathname,relative===`path`),[to,routePathnamesJson,locationPathname,relative])}function useRoutesImpl(routes,locationArg,dataRouterState,onError,future){invariant$4(useInRouterContext(),`useRoutes() may be used only in the context of a <Router> component.`);let{navigator:navigator$1}=import_react.useContext(NavigationContext),{matches:parentMatches}=import_react.useContext(RouteContext),routeMatch=parentMatches[parentMatches.length-1],parentParams=routeMatch?routeMatch.params:{},parentPathname=routeMatch?routeMatch.pathname:`/`,parentPathnameBase=routeMatch?routeMatch.pathnameBase:`/`,parentRoute=routeMatch&&routeMatch.route;{let parentPath=parentRoute&&parentRoute.path||``;warningOnce(parentPathname,!parentRoute||parentPath.endsWith(`*`)||parentPath.endsWith(`*?`),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${parentPathname}" (under <Route path="${parentPath}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${parentPath}"> to <Route path="${parentPath===`/`?`*`:`${parentPath}/*`}">.`)}let locationFromContext=useLocation(),location$1;if(locationArg){let parsedLocationArg=typeof locationArg==`string`?parsePath(locationArg):locationArg;invariant$4(parentPathnameBase===`/`||parsedLocationArg.pathname?.startsWith(parentPathnameBase),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${parentPathnameBase}" but pathname "${parsedLocationArg.pathname}" was given in the \`location\` prop.`),location$1=parsedLocationArg}else location$1=locationFromContext;let pathname=location$1.pathname||`/`,remainingPathname=pathname;if(parentPathnameBase!==`/`){let parentSegments=parentPathnameBase.replace(/^\//,``).split(`/`);remainingPathname=`/`+pathname.replace(/^\//,``).split(`/`).slice(parentSegments.length).join(`/`)}let matches=matchRoutes(routes,{pathname:remainingPathname});warning$1(parentRoute||matches!=null,`No routes matched location "${location$1.pathname}${location$1.search}${location$1.hash}" `),warning$1(matches==null||matches[matches.length-1].route.element!==void 0||matches[matches.length-1].route.Component!==void 0||matches[matches.length-1].route.lazy!==void 0,`Matched leaf route at location "${location$1.pathname}${location$1.search}${location$1.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let renderedMatches=_renderMatches(matches&&matches.map(match=>Object.assign({},match,{params:Object.assign({},parentParams,match.params),pathname:joinPaths([parentPathnameBase,navigator$1.encodeLocation?navigator$1.encodeLocation(match.pathname.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:match.pathname]),pathnameBase:match.pathnameBase===`/`?parentPathnameBase:joinPaths([parentPathnameBase,navigator$1.encodeLocation?navigator$1.encodeLocation(match.pathnameBase.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:match.pathnameBase])})),parentMatches,dataRouterState,onError,future);return locationArg&&renderedMatches?import_react.createElement(LocationContext.Provider,{value:{location:{pathname:`/`,search:``,hash:``,state:null,key:`default`,...location$1},navigationType:`POP`}},renderedMatches):renderedMatches}function DefaultErrorComponent(){let error$1=useRouteError(),message=isRouteErrorResponse(error$1)?`${error$1.status} ${error$1.statusText}`:error$1 instanceof Error?error$1.message:JSON.stringify(error$1),stack=error$1 instanceof Error?error$1.stack:null,lightgrey=`rgba(200,200,200, 0.5)`,preStyles={padding:`0.5rem`,backgroundColor:lightgrey},codeStyles={padding:`2px 4px`,backgroundColor:lightgrey},devInfo=null;return console.error(`Error handled by React Router default ErrorBoundary:`,error$1),devInfo=import_react.createElement(import_react.Fragment,null,import_react.createElement(`p`,null,` Hey developer `),import_react.createElement(`p`,null,`You can provide a way better UX than this when your app throws errors by providing your own `,import_react.createElement(`code`,{style:codeStyles},`ErrorBoundary`),` or`,` `,import_react.createElement(`code`,{style:codeStyles},`errorElement`),` prop on your route.`)),import_react.createElement(import_react.Fragment,null,import_react.createElement(`h2`,null,`Unexpected Application Error!`),import_react.createElement(`h3`,{style:{fontStyle:`italic`}},message),stack?import_react.createElement(`pre`,{style:preStyles},stack):null,devInfo)}var defaultErrorElement=import_react.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends import_react.Component{constructor(props){super(props),this.state={location:props.location,revalidation:props.revalidation,error:props.error}}static getDerivedStateFromError(error$1){return{error:error$1}}static getDerivedStateFromProps(props,state){return state.location!==props.location||state.revalidation!==`idle`&&props.revalidation===`idle`?{error:props.error,location:props.location,revalidation:props.revalidation}:{error:props.error===void 0?state.error:props.error,location:state.location,revalidation:props.revalidation||state.revalidation}}componentDidCatch(error$1,errorInfo){this.props.onError?this.props.onError(error$1,errorInfo):console.error(`React Router caught the following error during render`,error$1)}render(){let error$1=this.state.error;if(this.context&&typeof error$1==`object`&&error$1&&`digest`in error$1&&typeof error$1.digest==`string`){let decoded=decodeRouteErrorResponseDigest(error$1.digest);decoded&&(error$1=decoded)}let result=error$1===void 0?this.props.children:import_react.createElement(RouteContext.Provider,{value:this.props.routeContext},import_react.createElement(RouteErrorContext.Provider,{value:error$1,children:this.props.component}));return this.context?import_react.createElement(RSCErrorHandler,{error:error$1},result):result}};RenderErrorBoundary.contextType=RSCRouterContext;var errorRedirectHandledMap=new WeakMap;function RSCErrorHandler({children:children$1,error:error$1}){let{basename}=import_react.useContext(NavigationContext);if(typeof error$1==`object`&&error$1&&`digest`in error$1&&typeof error$1.digest==`string`){let redirect2=decodeRedirectErrorDigest(error$1.digest);if(redirect2){let existingRedirect=errorRedirectHandledMap.get(error$1);if(existingRedirect)throw existingRedirect;let parsed=parseToInfo(redirect2.location,basename);if(isBrowser$2&&!errorRedirectHandledMap.get(error$1))if(parsed.isExternal||redirect2.reloadDocument)window.location.href=parsed.absoluteURL||parsed.to;else{let redirectPromise=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(parsed.to,{replace:redirect2.replace}));throw errorRedirectHandledMap.set(error$1,redirectPromise),redirectPromise}return import_react.createElement(`meta`,{httpEquiv:`refresh`,content:`0;url=${parsed.absoluteURL||parsed.to}`})}}return children$1}function RenderedRoute({routeContext,match,children:children$1}){let dataRouterContext=import_react.useContext(DataRouterContext);return dataRouterContext&&dataRouterContext.static&&dataRouterContext.staticContext&&(match.route.errorElement||match.route.ErrorBoundary)&&(dataRouterContext.staticContext._deepestRenderedBoundaryId=match.route.id),import_react.createElement(RouteContext.Provider,{value:routeContext},children$1)}function _renderMatches(matches,parentMatches=[],dataRouterState=null,onErrorHandler=null,future=null){if(matches==null){if(!dataRouterState)return null;if(dataRouterState.errors)matches=dataRouterState.matches;else if(parentMatches.length===0&&!dataRouterState.initialized&&dataRouterState.matches.length>0)matches=dataRouterState.matches;else return null}let renderedMatches=matches,errors=dataRouterState?.errors;if(errors!=null){let errorIndex=renderedMatches.findIndex(m$3=>m$3.route.id&&errors?.[m$3.route.id]!==void 0);invariant$4(errorIndex>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(errors).join(`,`)}`),renderedMatches=renderedMatches.slice(0,Math.min(renderedMatches.length,errorIndex+1))}let renderFallback=!1,fallbackIndex=-1;if(dataRouterState)for(let i$4=0;i$4<renderedMatches.length;i$4++){let match=renderedMatches[i$4];if((match.route.HydrateFallback||match.route.hydrateFallbackElement)&&(fallbackIndex=i$4),match.route.id){let{loaderData,errors:errors2}=dataRouterState,needsToRunLoader=match.route.loader&&!loaderData.hasOwnProperty(match.route.id)&&(!errors2||errors2[match.route.id]===void 0);if(match.route.lazy||needsToRunLoader){renderFallback=!0,renderedMatches=fallbackIndex>=0?renderedMatches.slice(0,fallbackIndex+1):[renderedMatches[0]];break}}}let onError=dataRouterState&&onErrorHandler?(error$1,errorInfo)=>{onErrorHandler(error$1,{location:dataRouterState.location,params:dataRouterState.matches?.[0]?.params??{},unstable_pattern:getRoutePattern(dataRouterState.matches),errorInfo})}:void 0;return renderedMatches.reduceRight((outlet,match,index$2)=>{let error$1,shouldRenderHydrateFallback=!1,errorElement=null,hydrateFallbackElement=null;dataRouterState&&(error$1=errors&&match.route.id?errors[match.route.id]:void 0,errorElement=match.route.errorElement||defaultErrorElement,renderFallback&&(fallbackIndex<0&&index$2===0?(warningOnce(`route-fallback`,!1,"No `HydrateFallback` element provided to render during initial hydration"),shouldRenderHydrateFallback=!0,hydrateFallbackElement=null):fallbackIndex===index$2&&(shouldRenderHydrateFallback=!0,hydrateFallbackElement=match.route.hydrateFallbackElement||null)));let matches2=parentMatches.concat(renderedMatches.slice(0,index$2+1)),getChildren=()=>{let children$1;return children$1=error$1?errorElement:shouldRenderHydrateFallback?hydrateFallbackElement:match.route.Component?import_react.createElement(match.route.Component,null):match.route.element?match.route.element:outlet,import_react.createElement(RenderedRoute,{match,routeContext:{outlet,matches:matches2,isDataRoute:dataRouterState!=null},children:children$1})};return dataRouterState&&(match.route.ErrorBoundary||match.route.errorElement||index$2===0)?import_react.createElement(RenderErrorBoundary,{location:dataRouterState.location,revalidation:dataRouterState.revalidation,component:errorElement,error:error$1,children:getChildren(),routeContext:{outlet:null,matches:matches2,isDataRoute:!0},onError}):getChildren()},null)}function getDataRouterConsoleError(hookName){return`${hookName} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(hookName){let ctx=import_react.useContext(DataRouterContext);return invariant$4(ctx,getDataRouterConsoleError(hookName)),ctx}function useDataRouterState(hookName){let state=import_react.useContext(DataRouterStateContext);return invariant$4(state,getDataRouterConsoleError(hookName)),state}function useRouteContext(hookName){let route=import_react.useContext(RouteContext);return invariant$4(route,getDataRouterConsoleError(hookName)),route}function useCurrentRouteId(hookName){let route=useRouteContext(hookName),thisRoute=route.matches[route.matches.length-1];return invariant$4(thisRoute.route.id,`${hookName} can only be used on routes that contain a unique "id"`),thisRoute.route.id}function useRouteId(){return useCurrentRouteId(`useRouteId`)}function useNavigation(){return useDataRouterState(`useNavigation`).navigation}function useMatches(){let{matches,loaderData}=useDataRouterState(`useMatches`);return import_react.useMemo(()=>matches.map(m$3=>convertRouteMatchToUiMatch(m$3,loaderData)),[matches,loaderData])}function useRouteError(){let error$1=import_react.useContext(RouteErrorContext),state=useDataRouterState(`useRouteError`),routeId=useCurrentRouteId(`useRouteError`);return error$1===void 0?state.errors?.[routeId]:error$1}var blockerId=0;function useBlocker(shouldBlock){let{router:router$1,basename}=useDataRouterContext(`useBlocker`),state=useDataRouterState(`useBlocker`),[blockerKey,setBlockerKey]=import_react.useState(``),blockerFunction=import_react.useCallback(arg=>{if(typeof shouldBlock!=`function`)return!!shouldBlock;if(basename===`/`)return shouldBlock(arg);let{currentLocation,nextLocation,historyAction}=arg;return shouldBlock({currentLocation:{...currentLocation,pathname:stripBasename(currentLocation.pathname,basename)||currentLocation.pathname},nextLocation:{...nextLocation,pathname:stripBasename(nextLocation.pathname,basename)||nextLocation.pathname},historyAction})},[basename,shouldBlock]);return import_react.useEffect(()=>{let key$1=String(++blockerId);return setBlockerKey(key$1),()=>router$1.deleteBlocker(key$1)},[router$1]),import_react.useEffect(()=>{blockerKey!==``&&router$1.getBlocker(blockerKey,blockerFunction)},[router$1,blockerKey,blockerFunction]),blockerKey&&state.blockers.has(blockerKey)?state.blockers.get(blockerKey):IDLE_BLOCKER}function useNavigateStable(){let{router:router$1}=useDataRouterContext(`useNavigate`),id$3=useCurrentRouteId(`useNavigate`),activeRef=import_react.useRef(!1);return useIsomorphicLayoutEffect$6(()=>{activeRef.current=!0}),import_react.useCallback(async(to,options$1={})=>{warning$1(activeRef.current,navigateEffectWarning),activeRef.current&&(typeof to==`number`?await router$1.navigate(to):await router$1.navigate(to,{fromRouteId:id$3,...options$1}))},[router$1,id$3])}var alreadyWarned={};function warningOnce(key$1,cond,message){!cond&&!alreadyWarned[key$1]&&(alreadyWarned[key$1]=!0,warning$1(!1,message))}var alreadyWarned2={};function warnOnce$1(condition,message){!condition&&!alreadyWarned2[message]&&(alreadyWarned2[message]=!0,console.warn(message))}var useOptimisticImpl=import_react.useOptimistic,stableUseOptimisticSetter=()=>void 0;function useOptimisticSafe(val){return useOptimisticImpl?useOptimisticImpl(val):[val,stableUseOptimisticSetter]}function mapRouteProperties(route){let updates={hasErrorBoundary:route.hasErrorBoundary||route.ErrorBoundary!=null||route.errorElement!=null};return route.Component&&(route.element&&warning$1(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(updates,{element:import_react.createElement(route.Component),Component:void 0})),route.HydrateFallback&&(route.hydrateFallbackElement&&warning$1(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(updates,{hydrateFallbackElement:import_react.createElement(route.HydrateFallback),HydrateFallback:void 0})),route.ErrorBoundary&&(route.errorElement&&warning$1(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(updates,{errorElement:import_react.createElement(route.ErrorBoundary),ErrorBoundary:void 0})),updates}var hydrationRouteProperties=[`HydrateFallback`,`hydrateFallbackElement`],Deferred=class{constructor(){this.status=`pending`,this.promise=new Promise((resolve,reject)=>{this.resolve=value=>{this.status===`pending`&&(this.status=`resolved`,resolve(value))},this.reject=reason=>{this.status===`pending`&&(this.status=`rejected`,reject(reason))}})}};function RouterProvider({router:router$1,flushSync:reactDomFlushSyncImpl,onError,unstable_useTransitions}){unstable_useTransitions=useIsRSCRouterContext()||unstable_useTransitions;let[_state,setStateImpl]=import_react.useState(router$1.state),[state,setOptimisticState]=useOptimisticSafe(_state),[pendingState,setPendingState]=import_react.useState(),[vtContext,setVtContext]=import_react.useState({isTransitioning:!1}),[renderDfd,setRenderDfd]=import_react.useState(),[transition$1,setTransition]=import_react.useState(),[interruption,setInterruption]=import_react.useState(),fetcherData=import_react.useRef(new Map),setState=import_react.useCallback((newState,{deletedFetchers,newErrors,flushSync:flushSync$2,viewTransitionOpts})=>{newErrors&&onError&&Object.values(newErrors).forEach(error$1=>onError(error$1,{location:newState.location,params:newState.matches[0]?.params??{},unstable_pattern:getRoutePattern(newState.matches)})),newState.fetchers.forEach((fetcher,key$1)=>{fetcher.data!==void 0&&fetcherData.current.set(key$1,fetcher.data)}),deletedFetchers.forEach(key$1=>fetcherData.current.delete(key$1)),warnOnce$1(flushSync$2===!1||reactDomFlushSyncImpl!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let isViewTransitionAvailable=router$1.window!=null&&router$1.window.document!=null&&typeof router$1.window.document.startViewTransition==`function`;if(warnOnce$1(viewTransitionOpts==null||isViewTransitionAvailable,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!viewTransitionOpts||!isViewTransitionAvailable){reactDomFlushSyncImpl&&flushSync$2?reactDomFlushSyncImpl(()=>setStateImpl(newState)):unstable_useTransitions===!1?setStateImpl(newState):import_react.startTransition(()=>{unstable_useTransitions===!0&&setOptimisticState(s$3=>getOptimisticRouterState(s$3,newState)),setStateImpl(newState)});return}if(reactDomFlushSyncImpl&&flushSync$2){reactDomFlushSyncImpl(()=>{transition$1&&(renderDfd?.resolve(),transition$1.skipTransition()),setVtContext({isTransitioning:!0,flushSync:!0,currentLocation:viewTransitionOpts.currentLocation,nextLocation:viewTransitionOpts.nextLocation})});let t$4=router$1.window.document.startViewTransition(()=>{reactDomFlushSyncImpl(()=>setStateImpl(newState))});t$4.finished.finally(()=>{reactDomFlushSyncImpl(()=>{setRenderDfd(void 0),setTransition(void 0),setPendingState(void 0),setVtContext({isTransitioning:!1})})}),reactDomFlushSyncImpl(()=>setTransition(t$4));return}transition$1?(renderDfd?.resolve(),transition$1.skipTransition(),setInterruption({state:newState,currentLocation:viewTransitionOpts.currentLocation,nextLocation:viewTransitionOpts.nextLocation})):(setPendingState(newState),setVtContext({isTransitioning:!0,flushSync:!1,currentLocation:viewTransitionOpts.currentLocation,nextLocation:viewTransitionOpts.nextLocation}))},[router$1.window,reactDomFlushSyncImpl,transition$1,renderDfd,unstable_useTransitions,setOptimisticState,onError]);import_react.useLayoutEffect(()=>router$1.subscribe(setState),[router$1,setState]),import_react.useEffect(()=>{vtContext.isTransitioning&&!vtContext.flushSync&&setRenderDfd(new Deferred)},[vtContext]),import_react.useEffect(()=>{if(renderDfd&&pendingState&&router$1.window){let newState=pendingState,renderPromise=renderDfd.promise,transition2=router$1.window.document.startViewTransition(async()=>{unstable_useTransitions===!1?setStateImpl(newState):import_react.startTransition(()=>{unstable_useTransitions===!0&&setOptimisticState(s$3=>getOptimisticRouterState(s$3,newState)),setStateImpl(newState)}),await renderPromise});transition2.finished.finally(()=>{setRenderDfd(void 0),setTransition(void 0),setPendingState(void 0),setVtContext({isTransitioning:!1})}),setTransition(transition2)}},[pendingState,renderDfd,router$1.window,unstable_useTransitions,setOptimisticState]),import_react.useEffect(()=>{renderDfd&&pendingState&&state.location.key===pendingState.location.key&&renderDfd.resolve()},[renderDfd,transition$1,state.location,pendingState]),import_react.useEffect(()=>{!vtContext.isTransitioning&&interruption&&(setPendingState(interruption.state),setVtContext({isTransitioning:!0,flushSync:!1,currentLocation:interruption.currentLocation,nextLocation:interruption.nextLocation}),setInterruption(void 0))},[vtContext.isTransitioning,interruption]);let navigator$1=import_react.useMemo(()=>({createHref:router$1.createHref,encodeLocation:router$1.encodeLocation,go:n$4=>router$1.navigate(n$4),push:(to,state2,opts)=>router$1.navigate(to,{state:state2,preventScrollReset:opts?.preventScrollReset}),replace:(to,state2,opts)=>router$1.navigate(to,{replace:!0,state:state2,preventScrollReset:opts?.preventScrollReset})}),[router$1]),basename=router$1.basename||`/`,dataRouterContext=import_react.useMemo(()=>({router:router$1,navigator:navigator$1,static:!1,basename,onError}),[router$1,navigator$1,basename,onError]);return import_react.createElement(import_react.Fragment,null,import_react.createElement(DataRouterContext.Provider,{value:dataRouterContext},import_react.createElement(DataRouterStateContext.Provider,{value:state},import_react.createElement(FetchersContext.Provider,{value:fetcherData.current},import_react.createElement(ViewTransitionContext.Provider,{value:vtContext},import_react.createElement(Router,{basename,location:state.location,navigationType:state.historyAction,navigator:navigator$1,unstable_useTransitions},import_react.createElement(MemoizedDataRoutes,{routes:router$1.routes,future:router$1.future,state,onError})))))),null)}function getOptimisticRouterState(currentState,newState){return{...currentState,navigation:newState.navigation.state===`idle`?currentState.navigation:newState.navigation,revalidation:newState.revalidation===`idle`?currentState.revalidation:newState.revalidation,actionData:newState.navigation.state===`submitting`?currentState.actionData:newState.actionData,fetchers:newState.fetchers}}var MemoizedDataRoutes=import_react.memo(DataRoutes);function DataRoutes({routes,future,state,onError}){return useRoutesImpl(routes,void 0,state,onError,future)}function Navigate({to,replace:replace2,state,relative}){invariant$4(useInRouterContext(),`<Navigate> may be used only in the context of a <Router> component.`);let{static:isStatic}=import_react.useContext(NavigationContext);warning$1(!isStatic,`<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.`);let{matches}=import_react.useContext(RouteContext),{pathname:locationPathname}=useLocation(),navigate=useNavigate(),path=resolveTo(to,getResolveToMatches(matches),locationPathname,relative===`path`),jsonPath=JSON.stringify(path);return import_react.useEffect(()=>{navigate(JSON.parse(jsonPath),{replace:replace2,state,relative})},[navigate,jsonPath,relative,replace2,state]),null}function Outlet(props){return useOutlet(props.context)}function Router({basename:basenameProp=`/`,children:children$1=null,location:locationProp,navigationType=`POP`,navigator:navigator$1,static:staticProp=!1,unstable_useTransitions}){invariant$4(!useInRouterContext(),`You cannot render a <Router> inside another <Router>. You should never have more than one in your app.`);let basename=basenameProp.replace(/^\/*/,`/`),navigationContext=import_react.useMemo(()=>({basename,navigator:navigator$1,static:staticProp,unstable_useTransitions,future:{}}),[basename,navigator$1,staticProp,unstable_useTransitions]);typeof locationProp==`string`&&(locationProp=parsePath(locationProp));let{pathname=`/`,search=``,hash=``,state=null,key:key$1=`default`}=locationProp,locationContext=import_react.useMemo(()=>{let trailingPathname=stripBasename(pathname,basename);return trailingPathname==null?null:{location:{pathname:trailingPathname,search,hash,state,key:key$1},navigationType}},[basename,pathname,search,hash,state,key$1,navigationType]);return warning$1(locationContext!=null,`<Router basename="${basename}"> is not able to match the URL "${pathname}${search}${hash}" because it does not start with the basename, so the <Router> won't render anything.`),locationContext==null?null:import_react.createElement(NavigationContext.Provider,{value:navigationContext},import_react.createElement(LocationContext.Provider,{children:children$1,value:locationContext}))}var defaultMethod=`get`,defaultEncType=`application/x-www-form-urlencoded`;function isHtmlElement$1(object){return typeof HTMLElement<`u`&&object instanceof HTMLElement}function isButtonElement(object){return isHtmlElement$1(object)&&object.tagName.toLowerCase()===`button`}function isFormElement(object){return isHtmlElement$1(object)&&object.tagName.toLowerCase()===`form`}function isInputElement$1(object){return isHtmlElement$1(object)&&object.tagName.toLowerCase()===`input`}function isModifiedEvent(event){return!!(event.metaKey||event.altKey||event.ctrlKey||event.shiftKey)}function shouldProcessLinkClick(event,target){return event.button===0&&(!target||target===`_self`)&&!isModifiedEvent(event)}function createSearchParams(init$1=``){return new URLSearchParams(typeof init$1==`string`||Array.isArray(init$1)||init$1 instanceof URLSearchParams?init$1:Object.keys(init$1).reduce((memo2,key$1)=>{let value=init$1[key$1];return memo2.concat(Array.isArray(value)?value.map(v$3=>[key$1,v$3]):[[key$1,value]])},[]))}function getSearchParamsForLocation(locationSearch,defaultSearchParams){let searchParams=createSearchParams(locationSearch);return defaultSearchParams&&defaultSearchParams.forEach((_$1,key$1)=>{searchParams.has(key$1)||defaultSearchParams.getAll(key$1).forEach(value=>{searchParams.append(key$1,value)})}),searchParams}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement(`form`),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set([`application/x-www-form-urlencoded`,`multipart/form-data`,`text/plain`]);function getFormEncType(encType){return encType!=null&&!supportedFormEncTypes.has(encType)?(warning$1(!1,`"${encType}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):encType}function getFormSubmissionInfo(target,basename){let method,action,encType,formData,body;if(isFormElement(target)){let attr=target.getAttribute(`action`);action=attr?stripBasename(attr,basename):null,method=target.getAttribute(`method`)||defaultMethod,encType=getFormEncType(target.getAttribute(`enctype`))||defaultEncType,formData=new FormData(target)}else if(isButtonElement(target)||isInputElement$1(target)&&(target.type===`submit`||target.type===`image`)){let form=target.form;if(form==null)throw Error(`Cannot submit a <button> or <input type="submit"> without a <form>`);let attr=target.getAttribute(`formaction`)||form.getAttribute(`action`);if(action=attr?stripBasename(attr,basename):null,method=target.getAttribute(`formmethod`)||form.getAttribute(`method`)||defaultMethod,encType=getFormEncType(target.getAttribute(`formenctype`))||getFormEncType(form.getAttribute(`enctype`))||defaultEncType,formData=new FormData(form,target),!isFormDataSubmitterSupported()){let{name,type,value}=target;if(type===`image`){let prefix$4=name?`${name}.`:``;formData.append(`${prefix$4}x`,`0`),formData.append(`${prefix$4}y`,`0`)}else name&&formData.append(name,value)}}else if(isHtmlElement$1(target))throw Error(`Cannot submit element that is not <form>, <button>, or <input type="submit|image">`);else method=defaultMethod,action=null,encType=defaultEncType,body=target;return formData&&encType===`text/plain`&&(body=formData,formData=void 0),{action,method:method.toLowerCase(),encType,formData,body}}var objectProtoNames2=Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`),ESCAPE_LOOKUP={"&":`\\u0026`,">":`\\u003e`,"<":`\\u003c`,"\u2028":`\\u2028`,"\u2029":`\\u2029`},ESCAPE_REGEX=/[&><\u2028\u2029]/g;function escapeHtml(html){return html.replace(ESCAPE_REGEX,match=>ESCAPE_LOOKUP[match])}function invariant2(value,message){if(value===!1||value==null)throw Error(message)}function singleFetchUrl(reqUrl,basename,trailingSlashAware,extension){let url=typeof reqUrl==`string`?new URL(reqUrl,typeof window>`u`?`server://singlefetch/`:window.location.origin):reqUrl;return trailingSlashAware?url.pathname.endsWith(`/`)?url.pathname=`${url.pathname}_.${extension}`:url.pathname=`${url.pathname}.${extension}`:url.pathname===`/`?url.pathname=`_root.${extension}`:basename&&stripBasename(url.pathname,basename)===`/`?url.pathname=`${basename.replace(/\/$/,``)}/_root.${extension}`:url.pathname=`${url.pathname.replace(/\/$/,``)}.${extension}`,url}async function loadRouteModule(route,routeModulesCache){if(route.id in routeModulesCache)return routeModulesCache[route.id];try{let routeModule=await __vitePreload(()=>import(route.module),[]);return routeModulesCache[route.id]=routeModule,routeModule}catch(error$1){return console.error(`Error loading route module \`${route.module}\`, reloading page...`),console.error(error$1),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isPageLinkDescriptor(object){return object!=null&&typeof object.page==`string`}function isHtmlLinkDescriptor(object){return object==null?!1:object.href==null?object.rel===`preload`&&typeof object.imageSrcSet==`string`&&typeof object.imageSizes==`string`:typeof object.rel==`string`&&typeof object.href==`string`}async function getKeyedPrefetchLinks(matches,manifest,routeModules){return dedupeLinkDescriptors((await Promise.all(matches.map(async match=>{let route=manifest.routes[match.route.id];if(route){let mod=await loadRouteModule(route,routeModules);return mod.links?mod.links():[]}return[]}))).flat(1).filter(isHtmlLinkDescriptor).filter(link=>link.rel===`stylesheet`||link.rel===`preload`).map(link=>link.rel===`stylesheet`?{...link,rel:`prefetch`,as:`style`}:{...link,rel:`prefetch`}))}function getNewMatchesForLinks(page,nextMatches,currentMatches,manifest,location$1,mode){let isNew=(match,index$2)=>currentMatches[index$2]?match.route.id!==currentMatches[index$2].route.id:!0,matchPathChanged=(match,index$2)=>currentMatches[index$2].pathname!==match.pathname||currentMatches[index$2].route.path?.endsWith(`*`)&&currentMatches[index$2].params[`*`]!==match.params[`*`];return mode===`assets`?nextMatches.filter((match,index$2)=>isNew(match,index$2)||matchPathChanged(match,index$2)):mode===`data`?nextMatches.filter((match,index$2)=>{let manifestRoute=manifest.routes[match.route.id];if(!manifestRoute||!manifestRoute.hasLoader)return!1;if(isNew(match,index$2)||matchPathChanged(match,index$2))return!0;if(match.route.shouldRevalidate){let routeChoice=match.route.shouldRevalidate({currentUrl:new URL(location$1.pathname+location$1.search+location$1.hash,window.origin),currentParams:currentMatches[0]?.params||{},nextUrl:new URL(page,window.origin),nextParams:match.params,defaultShouldRevalidate:!0});if(typeof routeChoice==`boolean`)return routeChoice}return!0}):[]}function getModuleLinkHrefs(matches,manifest,{includeHydrateFallback}={}){return dedupeHrefs(matches.map(match=>{let route=manifest.routes[match.route.id];if(!route)return[];let hrefs=[route.module];return route.clientActionModule&&(hrefs=hrefs.concat(route.clientActionModule)),route.clientLoaderModule&&(hrefs=hrefs.concat(route.clientLoaderModule)),includeHydrateFallback&&route.hydrateFallbackModule&&(hrefs=hrefs.concat(route.hydrateFallbackModule)),route.imports&&(hrefs=hrefs.concat(route.imports)),hrefs}).flat(1))}function dedupeHrefs(hrefs){return[...new Set(hrefs)]}function sortKeys(obj){let sorted={},keys=Object.keys(obj).sort();for(let key$1 of keys)sorted[key$1]=obj[key$1];return sorted}function dedupeLinkDescriptors(descriptors$1,preloads){let set$2=new Set,preloadsSet=new Set(preloads);return descriptors$1.reduce((deduped,descriptor)=>{if(preloads&&!isPageLinkDescriptor(descriptor)&&descriptor.as===`script`&&descriptor.href&&preloadsSet.has(descriptor.href))return deduped;let key$1=JSON.stringify(sortKeys(descriptor));return set$2.has(key$1)||(set$2.add(key$1),deduped.push({key:key$1,link:descriptor})),deduped},[])}function useDataRouterContext2(){let context=import_react.useContext(DataRouterContext);return invariant2(context,`You must render this element inside a <DataRouterContext.Provider> element`),context}function useDataRouterStateContext(){let context=import_react.useContext(DataRouterStateContext);return invariant2(context,`You must render this element inside a <DataRouterStateContext.Provider> element`),context}var FrameworkContext=import_react.createContext(void 0);FrameworkContext.displayName=`FrameworkContext`;function useFrameworkContext(){let context=import_react.useContext(FrameworkContext);return invariant2(context,`You must render this element inside a <HydratedRouter> element`),context}function usePrefetchBehavior(prefetch,theirElementProps){let frameworkContext=import_react.useContext(FrameworkContext),[maybePrefetch,setMaybePrefetch]=import_react.useState(!1),[shouldPrefetch,setShouldPrefetch]=import_react.useState(!1),{onFocus,onBlur,onMouseEnter,onMouseLeave,onTouchStart}=theirElementProps,ref=import_react.useRef(null);import_react.useEffect(()=>{if(prefetch===`render`&&setShouldPrefetch(!0),prefetch===`viewport`){let observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{setShouldPrefetch(entry.isIntersecting)})},{threshold:.5});return ref.current&&observer.observe(ref.current),()=>{observer.disconnect()}}},[prefetch]),import_react.useEffect(()=>{if(maybePrefetch){let id$3=setTimeout(()=>{setShouldPrefetch(!0)},100);return()=>{clearTimeout(id$3)}}},[maybePrefetch]);let setIntent=()=>{setMaybePrefetch(!0)},cancelIntent=()=>{setMaybePrefetch(!1),setShouldPrefetch(!1)};return frameworkContext?prefetch===`intent`?[shouldPrefetch,ref,{onFocus:composeEventHandlers(onFocus,setIntent),onBlur:composeEventHandlers(onBlur,cancelIntent),onMouseEnter:composeEventHandlers(onMouseEnter,setIntent),onMouseLeave:composeEventHandlers(onMouseLeave,cancelIntent),onTouchStart:composeEventHandlers(onTouchStart,setIntent)}]:[shouldPrefetch,ref,{}]:[!1,ref,{}]}function composeEventHandlers(theirHandler,ourHandler){return event=>{theirHandler&&theirHandler(event),event.defaultPrevented||ourHandler(event)}}function PrefetchPageLinks({page,...linkProps}){let{router:router$1}=useDataRouterContext2(),matches=import_react.useMemo(()=>matchRoutes(router$1.routes,page,router$1.basename),[router$1.routes,page,router$1.basename]);return matches?import_react.createElement(PrefetchPageLinksImpl,{page,matches,...linkProps}):null}function useKeyedPrefetchLinks(matches){let{manifest,routeModules}=useFrameworkContext(),[keyedPrefetchLinks,setKeyedPrefetchLinks]=import_react.useState([]);return import_react.useEffect(()=>{let interrupted=!1;return getKeyedPrefetchLinks(matches,manifest,routeModules).then(links=>{interrupted||setKeyedPrefetchLinks(links)}),()=>{interrupted=!0}},[matches,manifest,routeModules]),keyedPrefetchLinks}function PrefetchPageLinksImpl({page,matches:nextMatches,...linkProps}){let location$1=useLocation(),{future,manifest,routeModules}=useFrameworkContext(),{basename}=useDataRouterContext2(),{loaderData,matches}=useDataRouterStateContext(),newMatchesForData=import_react.useMemo(()=>getNewMatchesForLinks(page,nextMatches,matches,manifest,location$1,`data`),[page,nextMatches,matches,manifest,location$1]),newMatchesForAssets=import_react.useMemo(()=>getNewMatchesForLinks(page,nextMatches,matches,manifest,location$1,`assets`),[page,nextMatches,matches,manifest,location$1]),dataHrefs=import_react.useMemo(()=>{if(page===location$1.pathname+location$1.search+location$1.hash)return[];let routesParams=new Set,foundOptOutRoute=!1;if(nextMatches.forEach(m$3=>{let manifestRoute=manifest.routes[m$3.route.id];!manifestRoute||!manifestRoute.hasLoader||(!newMatchesForData.some(m2=>m2.route.id===m$3.route.id)&&m$3.route.id in loaderData&&routeModules[m$3.route.id]?.shouldRevalidate||manifestRoute.hasClientLoader?foundOptOutRoute=!0:routesParams.add(m$3.route.id))}),routesParams.size===0)return[];let url=singleFetchUrl(page,basename,future.unstable_trailingSlashAwareDataRequests,`data`);return foundOptOutRoute&&routesParams.size>0&&url.searchParams.set(`_routes`,nextMatches.filter(m$3=>routesParams.has(m$3.route.id)).map(m$3=>m$3.route.id).join(`,`)),[url.pathname+url.search]},[basename,future.unstable_trailingSlashAwareDataRequests,loaderData,location$1,manifest,newMatchesForData,nextMatches,page,routeModules]),moduleHrefs=import_react.useMemo(()=>getModuleLinkHrefs(newMatchesForAssets,manifest),[newMatchesForAssets,manifest]),keyedPrefetchLinks=useKeyedPrefetchLinks(newMatchesForAssets);return import_react.createElement(import_react.Fragment,null,dataHrefs.map(href=>import_react.createElement(`link`,{key:href,rel:`prefetch`,as:`fetch`,href,...linkProps})),moduleHrefs.map(href=>import_react.createElement(`link`,{key:href,rel:`modulepreload`,href,...linkProps})),keyedPrefetchLinks.map(({key:key$1,link})=>import_react.createElement(`link`,{key:key$1,nonce:linkProps.nonce,...link})))}function mergeRefs(...refs){return value=>{refs.forEach(ref=>{typeof ref==`function`?ref(value):ref!=null&&(ref.current=value)})}}var isBrowser2=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0;try{isBrowser2&&(window.__reactRouterVersion=`7.12.0`)}catch{}function createBrowserRouter(routes,opts){return createRouter({basename:opts?.basename,getContext:opts?.getContext,future:opts?.future,history:createBrowserHistory({window:opts?.window}),hydrationData:opts?.hydrationData||parseHydrationData(),routes,mapRouteProperties,hydrationRouteProperties,dataStrategy:opts?.dataStrategy,patchRoutesOnNavigation:opts?.patchRoutesOnNavigation,window:opts?.window,unstable_instrumentations:opts?.unstable_instrumentations}).initialize()}function parseHydrationData(){let state=window?.__staticRouterHydrationData;return state&&state.errors&&(state={...state,errors:deserializeErrors(state.errors)}),state}function deserializeErrors(errors){if(!errors)return null;let entries=Object.entries(errors),serialized={};for(let[key$1,val]of entries)if(val&&val.__type===`RouteErrorResponse`)serialized[key$1]=new ErrorResponseImpl(val.status,val.statusText,val.data,val.internal===!0);else if(val&&val.__type===`Error`){if(val.__subType){let ErrorConstructor=window[val.__subType];if(typeof ErrorConstructor==`function`)try{let error$1=new ErrorConstructor(val.message);error$1.stack=``,serialized[key$1]=error$1}catch{}}if(serialized[key$1]==null){let error$1=Error(val.message);error$1.stack=``,serialized[key$1]=error$1}}else serialized[key$1]=val;return serialized}function HistoryRouter({basename,children:children$1,history,unstable_useTransitions}){let[state,setStateImpl]=import_react.useState({action:history.action,location:history.location}),setState=import_react.useCallback(newState=>{unstable_useTransitions===!1?setStateImpl(newState):import_react.startTransition(()=>setStateImpl(newState))},[unstable_useTransitions]);return import_react.useLayoutEffect(()=>history.listen(setState),[history,setState]),import_react.createElement(Router,{basename,children:children$1,location:state.location,navigationType:state.action,navigator:history,unstable_useTransitions})}HistoryRouter.displayName=`unstable_HistoryRouter`;var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=import_react.forwardRef(function({onClick,discover=`render`,prefetch=`none`,relative,reloadDocument,replace:replace2,state,target,to,preventScrollReset,viewTransition,unstable_defaultShouldRevalidate,...rest},forwardedRef){let{basename,unstable_useTransitions}=import_react.useContext(NavigationContext),isAbsolute=typeof to==`string`&&ABSOLUTE_URL_REGEX2.test(to),parsed=parseToInfo(to,basename);to=parsed.to;let href=useHref(to,{relative}),[shouldPrefetch,prefetchRef,prefetchHandlers]=usePrefetchBehavior(prefetch,rest),internalOnClick=useLinkClickHandler(to,{replace:replace2,state,target,preventScrollReset,relative,viewTransition,unstable_defaultShouldRevalidate,unstable_useTransitions});function handleClick(event){onClick&&onClick(event),event.defaultPrevented||internalOnClick(event)}let link=import_react.createElement(`a`,{...rest,...prefetchHandlers,href:parsed.absoluteURL||href,onClick:parsed.isExternal||reloadDocument?onClick:handleClick,ref:mergeRefs(forwardedRef,prefetchRef),target,"data-discover":!isAbsolute&&discover===`render`?`true`:void 0});return shouldPrefetch&&!isAbsolute?import_react.createElement(import_react.Fragment,null,link,import_react.createElement(PrefetchPageLinks,{page:href})):link});Link.displayName=`Link`;var NavLink=import_react.forwardRef(function({"aria-current":ariaCurrentProp=`page`,caseSensitive=!1,className:classNameProp=``,end:end$1=!1,style:styleProp,to,viewTransition,children:children$1,...rest},ref){let path=useResolvedPath(to,{relative:rest.relative}),location$1=useLocation(),routerState=import_react.useContext(DataRouterStateContext),{navigator:navigator$1,basename}=import_react.useContext(NavigationContext),isTransitioning=routerState!=null&&useViewTransitionState(path)&&viewTransition===!0,toPathname=navigator$1.encodeLocation?navigator$1.encodeLocation(path).pathname:path.pathname,locationPathname=location$1.pathname,nextLocationPathname=routerState&&routerState.navigation&&routerState.navigation.location?routerState.navigation.location.pathname:null;caseSensitive||(locationPathname=locationPathname.toLowerCase(),nextLocationPathname=nextLocationPathname?nextLocationPathname.toLowerCase():null,toPathname=toPathname.toLowerCase()),nextLocationPathname&&basename&&(nextLocationPathname=stripBasename(nextLocationPathname,basename)||nextLocationPathname);let endSlashPosition=toPathname!==`/`&&toPathname.endsWith(`/`)?toPathname.length-1:toPathname.length,isActive$1=locationPathname===toPathname||!end$1&&locationPathname.startsWith(toPathname)&&locationPathname.charAt(endSlashPosition)===`/`,isPending=nextLocationPathname!=null&&(nextLocationPathname===toPathname||!end$1&&nextLocationPathname.startsWith(toPathname)&&nextLocationPathname.charAt(toPathname.length)===`/`),renderProps={isActive:isActive$1,isPending,isTransitioning},ariaCurrent=isActive$1?ariaCurrentProp:void 0,className;className=typeof classNameProp==`function`?classNameProp(renderProps):[classNameProp,isActive$1?`active`:null,isPending?`pending`:null,isTransitioning?`transitioning`:null].filter(Boolean).join(` `);let style$3=typeof styleProp==`function`?styleProp(renderProps):styleProp;return import_react.createElement(Link,{...rest,"aria-current":ariaCurrent,className,ref,style:style$3,to,viewTransition},typeof children$1==`function`?children$1(renderProps):children$1)});NavLink.displayName=`NavLink`;var Form=import_react.forwardRef(({discover=`render`,fetcherKey,navigate,reloadDocument,replace:replace2,state,method=defaultMethod,action,onSubmit,relative,preventScrollReset,viewTransition,unstable_defaultShouldRevalidate,...props},forwardedRef)=>{let{unstable_useTransitions}=import_react.useContext(NavigationContext),submit=useSubmit(),formAction=useFormAction(action,{relative}),formMethod=method.toLowerCase()===`get`?`get`:`post`,isAbsolute=typeof action==`string`&&ABSOLUTE_URL_REGEX2.test(action);return import_react.createElement(`form`,{ref:forwardedRef,method:formMethod,action:formAction,onSubmit:reloadDocument?onSubmit:event=>{if(onSubmit&&onSubmit(event),event.defaultPrevented)return;event.preventDefault();let submitter=event.nativeEvent.submitter,submitMethod=submitter?.getAttribute(`formmethod`)||method,doSubmit=()=>submit(submitter||event.currentTarget,{fetcherKey,method:submitMethod,navigate,replace:replace2,state,relative,preventScrollReset,viewTransition,unstable_defaultShouldRevalidate});unstable_useTransitions&&navigate!==!1?import_react.startTransition(()=>doSubmit()):doSubmit()},...props,"data-discover":!isAbsolute&&discover===`render`?`true`:void 0})});Form.displayName=`Form`;function ScrollRestoration({getKey,storageKey,...props}){let remixContext=import_react.useContext(FrameworkContext),{basename}=import_react.useContext(NavigationContext),location$1=useLocation(),matches=useMatches();useScrollRestoration({getKey,storageKey});let ssrKey=import_react.useMemo(()=>{if(!remixContext||!getKey)return null;let userKey=getScrollRestorationKey(location$1,matches,basename,getKey);return userKey===location$1.key?null:userKey},[]);if(!remixContext||remixContext.isSpaMode)return null;let restoreScroll=((storageKey2,restoreKey)=>{if(!window.history.state||!window.history.state.key){let key$1=Math.random().toString(32).slice(2);window.history.replaceState({key:key$1},``)}try{let storedY=JSON.parse(sessionStorage.getItem(storageKey2)||`{}`)[restoreKey||window.history.state.key];typeof storedY==`number`&&window.scrollTo(0,storedY)}catch(error$1){console.error(error$1),sessionStorage.removeItem(storageKey2)}}).toString();return import_react.createElement(`script`,{...props,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${restoreScroll})(${escapeHtml(JSON.stringify(storageKey||SCROLL_RESTORATION_STORAGE_KEY))}, ${escapeHtml(JSON.stringify(ssrKey))})`}})}ScrollRestoration.displayName=`ScrollRestoration`;function getDataRouterConsoleError2(hookName){return`${hookName} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(hookName){let ctx=import_react.useContext(DataRouterContext);return invariant$4(ctx,getDataRouterConsoleError2(hookName)),ctx}function useDataRouterState2(hookName){let state=import_react.useContext(DataRouterStateContext);return invariant$4(state,getDataRouterConsoleError2(hookName)),state}function useLinkClickHandler(to,{target,replace:replaceProp,state,preventScrollReset,relative,viewTransition,unstable_defaultShouldRevalidate,unstable_useTransitions}={}){let navigate=useNavigate(),location$1=useLocation(),path=useResolvedPath(to,{relative});return import_react.useCallback(event=>{if(shouldProcessLinkClick(event,target)){event.preventDefault();let replace2=replaceProp===void 0?createPath(location$1)===createPath(path):replaceProp,doNavigate=()=>navigate(to,{replace:replace2,state,preventScrollReset,relative,viewTransition,unstable_defaultShouldRevalidate});unstable_useTransitions?import_react.startTransition(()=>doNavigate()):doNavigate()}},[location$1,navigate,path,replaceProp,state,target,to,preventScrollReset,relative,viewTransition,unstable_defaultShouldRevalidate,unstable_useTransitions])}function useSearchParams(defaultInit){warning$1(typeof URLSearchParams<`u`,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let defaultSearchParamsRef=import_react.useRef(createSearchParams(defaultInit)),hasSetSearchParamsRef=import_react.useRef(!1),location$1=useLocation(),searchParams=import_react.useMemo(()=>getSearchParamsForLocation(location$1.search,hasSetSearchParamsRef.current?null:defaultSearchParamsRef.current),[location$1.search]),navigate=useNavigate();return[searchParams,import_react.useCallback((nextInit,navigateOptions)=>{let newSearchParams=createSearchParams(typeof nextInit==`function`?nextInit(new URLSearchParams(searchParams)):nextInit);hasSetSearchParamsRef.current=!0,navigate(`?`+newSearchParams,navigateOptions)},[navigate,searchParams])]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:router$1}=useDataRouterContext3(`useSubmit`),{basename}=import_react.useContext(NavigationContext),currentRouteId=useRouteId(),routerFetch=router$1.fetch,routerNavigate=router$1.navigate;return import_react.useCallback(async(target,options$1={})=>{let{action,method,encType,formData,body}=getFormSubmissionInfo(target,basename);options$1.navigate===!1?await routerFetch(options$1.fetcherKey||getUniqueFetcherId(),currentRouteId,options$1.action||action,{unstable_defaultShouldRevalidate:options$1.unstable_defaultShouldRevalidate,preventScrollReset:options$1.preventScrollReset,formData,body,formMethod:options$1.method||method,formEncType:options$1.encType||encType,flushSync:options$1.flushSync}):await routerNavigate(options$1.action||action,{unstable_defaultShouldRevalidate:options$1.unstable_defaultShouldRevalidate,preventScrollReset:options$1.preventScrollReset,formData,body,formMethod:options$1.method||method,formEncType:options$1.encType||encType,replace:options$1.replace,state:options$1.state,fromRouteId:currentRouteId,flushSync:options$1.flushSync,viewTransition:options$1.viewTransition})},[routerFetch,routerNavigate,basename,currentRouteId])}function useFormAction(action,{relative}={}){let{basename}=import_react.useContext(NavigationContext),routeContext=import_react.useContext(RouteContext);invariant$4(routeContext,`useFormAction must be used inside a RouteContext`);let[match]=routeContext.matches.slice(-1),path={...useResolvedPath(action||`.`,{relative})},location$1=useLocation();if(action==null){path.search=location$1.search;let params=new URLSearchParams(path.search),indexValues=params.getAll(`index`);if(indexValues.some(v$3=>v$3===``)){params.delete(`index`),indexValues.filter(v$3=>v$3).forEach(v$3=>params.append(`index`,v$3));let qs=params.toString();path.search=qs?`?${qs}`:``}}return(!action||action===`.`)&&match.route.index&&(path.search=path.search?path.search.replace(/^\?/,`?index&`):`?index`),basename!==`/`&&(path.pathname=path.pathname===`/`?basename:joinPaths([basename,path.pathname])),createPath(path)}var SCROLL_RESTORATION_STORAGE_KEY=`react-router-scroll-positions`,savedScrollPositions={};function getScrollRestorationKey(location$1,matches,basename,getKey){let key$1=null;return getKey&&(key$1=getKey(basename===`/`?location$1:{...location$1,pathname:stripBasename(location$1.pathname,basename)||location$1.pathname},matches)),key$1??=location$1.key,key$1}function useScrollRestoration({getKey,storageKey}={}){let{router:router$1}=useDataRouterContext3(`useScrollRestoration`),{restoreScrollPosition:restoreScrollPosition$1,preventScrollReset}=useDataRouterState2(`useScrollRestoration`),{basename}=import_react.useContext(NavigationContext),location$1=useLocation(),matches=useMatches(),navigation$1=useNavigation();import_react.useEffect(()=>(window.history.scrollRestoration=`manual`,()=>{window.history.scrollRestoration=`auto`}),[]),usePageHide(import_react.useCallback(()=>{if(navigation$1.state===`idle`){let key$1=getScrollRestorationKey(location$1,matches,basename,getKey);savedScrollPositions[key$1]=window.scrollY}try{sessionStorage.setItem(storageKey||SCROLL_RESTORATION_STORAGE_KEY,JSON.stringify(savedScrollPositions))}catch(error$1){warning$1(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${error$1}).`)}window.history.scrollRestoration=`auto`},[navigation$1.state,getKey,basename,location$1,matches,storageKey])),typeof document<`u`&&(import_react.useLayoutEffect(()=>{try{let sessionPositions=sessionStorage.getItem(storageKey||SCROLL_RESTORATION_STORAGE_KEY);sessionPositions&&(savedScrollPositions=JSON.parse(sessionPositions))}catch{}},[storageKey]),import_react.useLayoutEffect(()=>{let disableScrollRestoration=router$1?.enableScrollRestoration(savedScrollPositions,()=>window.scrollY,getKey?(location2,matches2)=>getScrollRestorationKey(location2,matches2,basename,getKey):void 0);return()=>disableScrollRestoration&&disableScrollRestoration()},[router$1,basename,getKey]),import_react.useLayoutEffect(()=>{if(restoreScrollPosition$1!==!1){if(typeof restoreScrollPosition$1==`number`){window.scrollTo(0,restoreScrollPosition$1);return}try{if(location$1.hash){let el=document.getElementById(decodeURIComponent(location$1.hash.slice(1)));if(el){el.scrollIntoView();return}}}catch{warning$1(!1,`"${location$1.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}preventScrollReset!==!0&&window.scrollTo(0,0)}},[location$1,restoreScrollPosition$1,preventScrollReset]))}function usePageHide(callback,options$1){let{capture}=options$1||{};import_react.useEffect(()=>{let opts=capture==null?void 0:{capture};return window.addEventListener(`pagehide`,callback,opts),()=>{window.removeEventListener(`pagehide`,callback,opts)}},[callback,capture])}function useViewTransitionState(to,{relative}={}){let vtContext=import_react.useContext(ViewTransitionContext);invariant$4(vtContext!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename}=useDataRouterContext3(`useViewTransitionState`),path=useResolvedPath(to,{relative});if(!vtContext.isTransitioning)return!1;let currentPath=stripBasename(vtContext.currentLocation.pathname,basename)||vtContext.currentLocation.pathname,nextPath=stripBasename(vtContext.nextLocation.pathname,basename)||vtContext.nextLocation.pathname;return matchPath(path.pathname,nextPath)!=null||matchPath(path.pathname,currentPath)!=null}var import_react_dom$7=__toESM(require_react_dom(),1);function RouterProvider2(props){return import_react.createElement(RouterProvider,{flushSync:import_react_dom$6.flushSync,...props})}var renderedRoutesContext=createContext$15(),toKebabCase=string=>string.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),toCamelCase$1=string=>string.replace(/^([A-Z])|[\s-_]+(\w)/g,(match,p1,p2)=>p2?p2.toUpperCase():p1.toLowerCase()),toPascalCase=string=>{let camelCase=toCamelCase$1(string);return camelCase.charAt(0).toUpperCase()+camelCase.slice(1)},mergeClasses=(...classes)=>classes.filter((className,index$2,array$1)=>!!className&&className.trim()!==``&&array$1.indexOf(className)===index$2).join(` `).trim(),hasA11yProp=props=>{for(let prop in props)if(prop.startsWith(`aria-`)||prop===`role`||prop===`title`)return!0},defaultAttributes$1={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},Icon=(0,import_react.forwardRef)(({color:color$2=`currentColor`,size=24,strokeWidth=2,absoluteStrokeWidth,className=``,children:children$1,iconNode,...rest},ref)=>(0,import_react.createElement)(`svg`,{ref,...defaultAttributes$1,width:size,height:size,stroke:color$2,strokeWidth:absoluteStrokeWidth?Number(strokeWidth)*24/Number(size):strokeWidth,className:mergeClasses(`lucide`,className),...!children$1&&!hasA11yProp(rest)&&{"aria-hidden":`true`},...rest},[...iconNode.map(([tag,attrs])=>(0,import_react.createElement)(tag,attrs)),...Array.isArray(children$1)?children$1:[children$1]])),createLucideIcon=(iconName,iconNode)=>{let Component$2=(0,import_react.forwardRef)(({className,...props},ref)=>(0,import_react.createElement)(Icon,{ref,iconNode,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(iconName))}`,`lucide-${iconName}`,className),...props}));return Component$2.displayName=toPascalCase(iconName),Component$2},__iconNode$158=[[`path`,{d:`M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2`,key:`169zse`}]],Activity=createLucideIcon(`activity`,__iconNode$158),__iconNode$157=[[`rect`,{width:`9`,height:`6`,x:`6`,y:`14`,rx:`2`,key:`lpm2y7`}],[`rect`,{width:`16`,height:`6`,x:`6`,y:`4`,rx:`2`,key:`rdj6ps`}],[`path`,{d:`M2 2v20`,key:`1ivd8o`}]],AlignStartVertical=createLucideIcon(`align-start-vertical`,__iconNode$157),__iconNode$156=[[`rect`,{width:`14`,height:`6`,x:`5`,y:`16`,rx:`2`,key:`1i8z2d`}],[`rect`,{width:`10`,height:`6`,x:`7`,y:`2`,rx:`2`,key:`ypihtt`}],[`path`,{d:`M2 12h20`,key:`9i4pu4`}]],AlignVerticalJustifyCenter=createLucideIcon(`align-vertical-justify-center`,__iconNode$156),__iconNode$155=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M16 16s-1.5-2-4-2-4 2-4 2`,key:`epbg0q`}],[`path`,{d:`M7.5 8 10 9`,key:`olxxln`}],[`path`,{d:`m14 9 2.5-1`,key:`1j6cij`}],[`path`,{d:`M9 10h.01`,key:`qbtxuw`}],[`path`,{d:`M15 10h.01`,key:`1qmjsl`}]],Angry=createLucideIcon(`angry`,__iconNode$155),__iconNode$154=[[`path`,{d:`M17 7 7 17`,key:`15tmo1`}],[`path`,{d:`M17 17H7V7`,key:`1org7z`}]],ArrowDownLeft=createLucideIcon(`arrow-down-left`,__iconNode$154),__iconNode$153=[[`path`,{d:`m7 7 10 10`,key:`1fmybs`}],[`path`,{d:`M17 7v10H7`,key:`6fjiku`}]],ArrowDownRight=createLucideIcon(`arrow-down-right`,__iconNode$153),__iconNode$152=[[`path`,{d:`M12 5v14`,key:`s699le`}],[`path`,{d:`m19 12-7 7-7-7`,key:`1idqje`}]],ArrowDown=createLucideIcon(`arrow-down`,__iconNode$152),__iconNode$151=[[`path`,{d:`M8 3 4 7l4 4`,key:`9rb6wj`}],[`path`,{d:`M4 7h16`,key:`6tx8e3`}],[`path`,{d:`m16 21 4-4-4-4`,key:`siv7j2`}],[`path`,{d:`M20 17H4`,key:`h6l3hr`}]],ArrowLeftRight=createLucideIcon(`arrow-left-right`,__iconNode$151),__iconNode$150=[[`path`,{d:`m12 19-7-7 7-7`,key:`1l729n`}],[`path`,{d:`M19 12H5`,key:`x3x0zl`}]],ArrowLeft=createLucideIcon(`arrow-left`,__iconNode$150),__iconNode$149=[[`path`,{d:`m16 3 4 4-4 4`,key:`1x1c3m`}],[`path`,{d:`M20 7H4`,key:`zbl0bi`}],[`path`,{d:`m8 21-4-4 4-4`,key:`h9nckh`}],[`path`,{d:`M4 17h16`,key:`g4d7ey`}]],ArrowRightLeft=createLucideIcon(`arrow-right-left`,__iconNode$149),__iconNode$148=[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`m12 5 7 7-7 7`,key:`xquz4c`}]],ArrowRight=createLucideIcon(`arrow-right`,__iconNode$148),__iconNode$147=[[`path`,{d:`M7 17V7h10`,key:`11bw93`}],[`path`,{d:`M17 17 7 7`,key:`2786uv`}]],ArrowUpLeft=createLucideIcon(`arrow-up-left`,__iconNode$147),__iconNode$146=[[`path`,{d:`M7 7h10v10`,key:`1tivn9`}],[`path`,{d:`M7 17 17 7`,key:`1vkiza`}]],ArrowUpRight=createLucideIcon(`arrow-up-right`,__iconNode$146),__iconNode$145=[[`path`,{d:`m5 12 7-7 7 7`,key:`hav0vg`}],[`path`,{d:`M12 19V5`,key:`x0mq9r`}]],ArrowUp=createLucideIcon(`arrow-up`,__iconNode$145),__iconNode$144=[[`path`,{d:`M4.929 4.929 19.07 19.071`,key:`196cmz`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]],Ban=createLucideIcon(`ban`,__iconNode$144),__iconNode$143=[[`path`,{d:`M 22 14 L 22 10`,key:`nqc4tb`}],[`rect`,{x:`2`,y:`6`,width:`16`,height:`12`,rx:`2`,key:`13zb55`}]],Battery=createLucideIcon(`battery`,__iconNode$143),__iconNode$142=[[`path`,{d:`M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8`,key:`mg9rjx`}]],Bold=createLucideIcon(`bold`,__iconNode$142),__iconNode$141=[[`path`,{d:`M12 7v14`,key:`1akyts`}],[`path`,{d:`M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z`,key:`ruj8y`}]],BookOpen=createLucideIcon(`book-open`,__iconNode$141),__iconNode$140=[[`path`,{d:`M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20`,key:`k3hazp`}]],Book=createLucideIcon(`book`,__iconNode$140),__iconNode$139=[[`path`,{d:`M12 8V4H8`,key:`hb8ula`}],[`rect`,{width:`16`,height:`12`,x:`4`,y:`8`,rx:`2`,key:`enze0r`}],[`path`,{d:`M2 14h2`,key:`vft8re`}],[`path`,{d:`M20 14h2`,key:`4cs60a`}],[`path`,{d:`M15 13v2`,key:`1xurst`}],[`path`,{d:`M9 13v2`,key:`rq6x2g`}]],Bot=createLucideIcon(`bot`,__iconNode$139),__iconNode$138=[[`rect`,{x:`8`,y:`8`,width:`8`,height:`8`,rx:`2`,key:`yj20xf`}],[`path`,{d:`M4 10a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2`,key:`1ltk23`}],[`path`,{d:`M14 20a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2`,key:`1q24h9`}]],BringToFront=createLucideIcon(`bring-to-front`,__iconNode$138),__iconNode$137=[[`rect`,{width:`16`,height:`20`,x:`4`,y:`2`,rx:`2`,key:`1nb95v`}],[`line`,{x1:`8`,x2:`16`,y1:`6`,y2:`6`,key:`x4nwl0`}],[`line`,{x1:`16`,x2:`16`,y1:`14`,y2:`18`,key:`wjye3r`}],[`path`,{d:`M16 10h.01`,key:`1m94wz`}],[`path`,{d:`M12 10h.01`,key:`1nrarc`}],[`path`,{d:`M8 10h.01`,key:`19clt8`}],[`path`,{d:`M12 14h.01`,key:`1etili`}],[`path`,{d:`M8 14h.01`,key:`6423bh`}],[`path`,{d:`M12 18h.01`,key:`mhygvu`}],[`path`,{d:`M8 18h.01`,key:`lrp35t`}]],Calculator=createLucideIcon(`calculator`,__iconNode$137),__iconNode$136=[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}],[`path`,{d:`M8 14h.01`,key:`6423bh`}],[`path`,{d:`M12 14h.01`,key:`1etili`}],[`path`,{d:`M16 14h.01`,key:`1gbofw`}],[`path`,{d:`M8 18h.01`,key:`lrp35t`}],[`path`,{d:`M12 18h.01`,key:`mhygvu`}],[`path`,{d:`M16 18h.01`,key:`kzsmim`}]],CalendarDays=createLucideIcon(`calendar-days`,__iconNode$136),__iconNode$135=[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}]],Calendar=createLucideIcon(`calendar`,__iconNode$135),__iconNode$134=[[`path`,{d:`M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z`,key:`18u6gg`}],[`circle`,{cx:`12`,cy:`13`,r:`3`,key:`1vg3eu`}]],Camera=createLucideIcon(`camera`,__iconNode$134),__iconNode$133=[[`path`,{d:`M3 3v16a2 2 0 0 0 2 2h16`,key:`c24i48`}],[`path`,{d:`M18 17V9`,key:`2bz60n`}],[`path`,{d:`M13 17V5`,key:`1frdt8`}],[`path`,{d:`M8 17v-3`,key:`17ska0`}]],ChartColumn=createLucideIcon(`chart-column`,__iconNode$133),__iconNode$132=[[`path`,{d:`M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z`,key:`pzmjnu`}],[`path`,{d:`M21.21 15.89A10 10 0 1 1 8 2.83`,key:`k2fpak`}]],ChartPie=createLucideIcon(`chart-pie`,__iconNode$132),__iconNode$131=[[`path`,{d:`M18 6 7 17l-5-5`,key:`116fxf`}],[`path`,{d:`m22 10-7.5 7.5L13 16`,key:`ke71qq`}]],CheckCheck=createLucideIcon(`check-check`,__iconNode$131),__iconNode$130=[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]],Check=createLucideIcon(`check`,__iconNode$130),__iconNode$129=[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]],ChevronDown=createLucideIcon(`chevron-down`,__iconNode$129),__iconNode$128=[[`path`,{d:`m15 18-6-6 6-6`,key:`1wnfg3`}]],ChevronLeft=createLucideIcon(`chevron-left`,__iconNode$128),__iconNode$127=[[`path`,{d:`m9 18 6-6-6-6`,key:`mthhwq`}]],ChevronRight=createLucideIcon(`chevron-right`,__iconNode$127),__iconNode$126=[[`path`,{d:`m18 15-6-6-6 6`,key:`153udz`}]],ChevronUp=createLucideIcon(`chevron-up`,__iconNode$126),__iconNode$125=[[`path`,{d:`m6 17 5-5-5-5`,key:`xnjwq`}],[`path`,{d:`m13 17 5-5-5-5`,key:`17xmmf`}]],ChevronsRight=createLucideIcon(`chevrons-right`,__iconNode$125),__iconNode$124=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`12`,x2:`12`,y1:`8`,y2:`12`,key:`1pkeuh`}],[`line`,{x1:`12`,x2:`12.01`,y1:`16`,y2:`16`,key:`4dfq90`}]],CircleAlert=createLucideIcon(`circle-alert`,__iconNode$124),__iconNode$123=[[`path`,{d:`M21.801 10A10 10 0 1 1 17 3.335`,key:`yps3ct`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]],CircleCheckBig=createLucideIcon(`circle-check-big`,__iconNode$123),__iconNode$122=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m9 12 2 2 4-4`,key:`dzmm74`}]],CircleCheck=createLucideIcon(`circle-check`,__iconNode$122),__iconNode$121=[[`path`,{d:`M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z`,key:`kmsa83`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]],CirclePlay=createLucideIcon(`circle-play`,__iconNode$121),__iconNode$120=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M8 12h8`,key:`1wcyev`}],[`path`,{d:`M12 8v8`,key:`napkw2`}]],CirclePlus=createLucideIcon(`circle-plus`,__iconNode$120),__iconNode$119=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3`,key:`1u773s`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]],CircleQuestionMark=createLucideIcon(`circle-question-mark`,__iconNode$119),__iconNode$118=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m15 9-6 6`,key:`1uzhvr`}],[`path`,{d:`m9 9 6 6`,key:`z0biqf`}]],CircleX=createLucideIcon(`circle-x`,__iconNode$118),__iconNode$117=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]],Circle=createLucideIcon(`circle`,__iconNode$117),__iconNode$116=[[`path`,{d:`M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z`,key:`1tn4o7`}],[`path`,{d:`m6.2 5.3 3.1 3.9`,key:`iuk76l`}],[`path`,{d:`m12.4 3.4 3.1 4`,key:`6hsd6n`}],[`path`,{d:`M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z`,key:`ltgou9`}]],Clapperboard=createLucideIcon(`clapperboard`,__iconNode$116),__iconNode$115=[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]],Clock=createLucideIcon(`clock`,__iconNode$115),__iconNode$114=[[`path`,{d:`M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242`,key:`1pljnt`}],[`path`,{d:`M16 14v6`,key:`1j4efv`}],[`path`,{d:`M8 14v6`,key:`17c4r9`}],[`path`,{d:`M12 16v6`,key:`c8a4gj`}]],CloudRain=createLucideIcon(`cloud-rain`,__iconNode$114),__iconNode$113=[[`path`,{d:`M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z`,key:`p7xjir`}]],Cloud=createLucideIcon(`cloud`,__iconNode$113),__iconNode$112=[[`circle`,{cx:`8`,cy:`8`,r:`6`,key:`3yglwk`}],[`path`,{d:`M18.09 10.37A6 6 0 1 1 10.34 18`,key:`t5s6rm`}],[`path`,{d:`M7 6h1v4`,key:`1obek4`}],[`path`,{d:`m16.71 13.88.7.71-2.82 2.82`,key:`1rbuyh`}]],Coins=createLucideIcon(`coins`,__iconNode$112),__iconNode$111=[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M12 3v18`,key:`108xh3`}]],Columns2=createLucideIcon(`columns-2`,__iconNode$111),__iconNode$110=[[`rect`,{width:`14`,height:`14`,x:`8`,y:`8`,rx:`2`,ry:`2`,key:`17jyea`}],[`path`,{d:`M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2`,key:`zix9uf`}]],Copy=createLucideIcon(`copy`,__iconNode$110),__iconNode$109=[[`rect`,{width:`20`,height:`14`,x:`2`,y:`5`,rx:`2`,key:`ynyp8z`}],[`line`,{x1:`2`,x2:`22`,y1:`10`,y2:`10`,key:`1b3vmo`}]],CreditCard=createLucideIcon(`credit-card`,__iconNode$109),__iconNode$108=[[`ellipse`,{cx:`12`,cy:`5`,rx:`9`,ry:`3`,key:`msslwz`}],[`path`,{d:`M3 5V19A9 3 0 0 0 21 19V5`,key:`1wlel7`}],[`path`,{d:`M3 12A9 3 0 0 0 21 12`,key:`mv7ke4`}]],Database=createLucideIcon(`database`,__iconNode$108),__iconNode$107=[[`path`,{d:`M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z`,key:`1yo7s0`}],[`path`,{d:`m12 9 6 6`,key:`anjzzh`}],[`path`,{d:`m18 9-6 6`,key:`1fp51s`}]],Delete=createLucideIcon(`delete`,__iconNode$107),__iconNode$106=[[`line`,{x1:`12`,x2:`12`,y1:`2`,y2:`22`,key:`7eqyqh`}],[`path`,{d:`M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6`,key:`1b0p4s`}]],DollarSign=createLucideIcon(`dollar-sign`,__iconNode$106),__iconNode$105=[[`path`,{d:`M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z`,key:`c7niix`}]],Droplet=createLucideIcon(`droplet`,__iconNode$105),__iconNode$104=[[`circle`,{cx:`12`,cy:`12`,r:`1`,key:`41hilf`}],[`circle`,{cx:`12`,cy:`5`,r:`1`,key:`gxeob9`}],[`circle`,{cx:`12`,cy:`19`,r:`1`,key:`lyex9k`}]],EllipsisVertical=createLucideIcon(`ellipsis-vertical`,__iconNode$104),__iconNode$103=[[`path`,{d:`M15 3h6v6`,key:`1q9fwt`}],[`path`,{d:`M10 14 21 3`,key:`gplh6r`}],[`path`,{d:`M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6`,key:`a6xqqp`}]],ExternalLink=createLucideIcon(`external-link`,__iconNode$103),__iconNode$102=[[`path`,{d:`M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49`,key:`ct8e1f`}],[`path`,{d:`M14.084 14.158a3 3 0 0 1-4.242-4.242`,key:`151rxh`}],[`path`,{d:`M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143`,key:`13bj9a`}],[`path`,{d:`m2 2 20 20`,key:`1ooewy`}]],EyeOff=createLucideIcon(`eye-off`,__iconNode$102),__iconNode$101=[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]],Eye=createLucideIcon(`eye`,__iconNode$101),__iconNode$100=[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M10 9H8`,key:`b1mrlr`}],[`path`,{d:`M16 13H8`,key:`t4e002`}],[`path`,{d:`M16 17H8`,key:`z1uh3a`}]],FileText=createLucideIcon(`file-text`,__iconNode$100),__iconNode$99=[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M7 3v18`,key:`bbkbws`}],[`path`,{d:`M3 7.5h4`,key:`zfgn84`}],[`path`,{d:`M3 12h18`,key:`1i2n21`}],[`path`,{d:`M3 16.5h4`,key:`1230mu`}],[`path`,{d:`M17 3v18`,key:`in4fa5`}],[`path`,{d:`M17 7.5h4`,key:`myr1c1`}],[`path`,{d:`M17 16.5h4`,key:`go4c1d`}]],Film=createLucideIcon(`film`,__iconNode$99),__iconNode$98=[[`path`,{d:`m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2`,key:`usdka0`}]],FolderOpen=createLucideIcon(`folder-open`,__iconNode$98),__iconNode$97=[[`path`,{d:`M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z`,key:`1kt360`}]],Folder=createLucideIcon(`folder`,__iconNode$97),__iconNode$96=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M16 16s-1.5-2-4-2-4 2-4 2`,key:`epbg0q`}],[`line`,{x1:`9`,x2:`9.01`,y1:`9`,y2:`9`,key:`yxxnd0`}],[`line`,{x1:`15`,x2:`15.01`,y1:`9`,y2:`9`,key:`1p4y9e`}]],Frown=createLucideIcon(`frown`,__iconNode$96),__iconNode$95=[[`rect`,{x:`3`,y:`8`,width:`18`,height:`4`,rx:`1`,key:`bkv52`}],[`path`,{d:`M12 8v13`,key:`1c76mn`}],[`path`,{d:`M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7`,key:`6wjy6b`}],[`path`,{d:`M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5`,key:`1ihvrl`}]],Gift=createLucideIcon(`gift`,__iconNode$95),__iconNode$94=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20`,key:`13o1zl`}],[`path`,{d:`M2 12h20`,key:`9i4pu4`}]],Globe=createLucideIcon(`globe`,__iconNode$94),__iconNode$93=[[`path`,{d:`M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z`,key:`j76jl0`}],[`path`,{d:`M22 10v6`,key:`1lu8f3`}],[`path`,{d:`M6 12.5V16a6 3 0 0 0 12 0v-3.5`,key:`1r8lef`}]],GraduationCap=createLucideIcon(`graduation-cap`,__iconNode$93),__iconNode$92=[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M3 9h18`,key:`1pudct`}],[`path`,{d:`M3 15h18`,key:`5xshup`}],[`path`,{d:`M9 3v18`,key:`fh3hqa`}],[`path`,{d:`M15 3v18`,key:`14nvp0`}]],Grid3x3=createLucideIcon(`grid-3x3`,__iconNode$92),__iconNode$91=[[`circle`,{cx:`9`,cy:`12`,r:`1`,key:`1vctgf`}],[`circle`,{cx:`9`,cy:`5`,r:`1`,key:`hp0tcf`}],[`circle`,{cx:`9`,cy:`19`,r:`1`,key:`fkjjf6`}],[`circle`,{cx:`15`,cy:`12`,r:`1`,key:`1tmaij`}],[`circle`,{cx:`15`,cy:`5`,r:`1`,key:`19l28e`}],[`circle`,{cx:`15`,cy:`19`,r:`1`,key:`f4zoj3`}]],GripVertical=createLucideIcon(`grip-vertical`,__iconNode$91),__iconNode$90=[[`line`,{x1:`4`,x2:`20`,y1:`9`,y2:`9`,key:`4lhtct`}],[`line`,{x1:`4`,x2:`20`,y1:`15`,y2:`15`,key:`vyu0kd`}],[`line`,{x1:`10`,x2:`8`,y1:`3`,y2:`21`,key:`1ggp8o`}],[`line`,{x1:`16`,x2:`14`,y1:`3`,y2:`21`,key:`weycgp`}]],Hash=createLucideIcon(`hash`,__iconNode$90),__iconNode$89=[[`path`,{d:`M4 12h8`,key:`17cfdx`}],[`path`,{d:`M4 18V6`,key:`1rz3zl`}],[`path`,{d:`M12 18V6`,key:`zqpxq5`}],[`path`,{d:`m17 12 3-2v8`,key:`1hhhft`}]],Heading1=createLucideIcon(`heading-1`,__iconNode$89),__iconNode$88=[[`path`,{d:`M12.409 5.824c-.702.792-1.15 1.496-1.415 2.166l2.153 2.156a.5.5 0 0 1 0 .707l-2.293 2.293a.5.5 0 0 0 0 .707L12 15`,key:`idzbju`}],[`path`,{d:`M13.508 20.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5a5.5 5.5 0 0 1 9.591-3.677.6.6 0 0 0 .818.001A5.5 5.5 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5z`,key:`1su70f`}]],HeartCrack=createLucideIcon(`heart-crack`,__iconNode$88),__iconNode$87=[[`path`,{d:`M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5`,key:`mvr1a0`}]],Heart=createLucideIcon(`heart`,__iconNode$87),__iconNode$86=[[`path`,{d:`m9 11-6 6v3h9l3-3`,key:`1a3l36`}],[`path`,{d:`m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4`,key:`14a9rk`}]],Highlighter=createLucideIcon(`highlighter`,__iconNode$86),__iconNode$85=[[`path`,{d:`M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`1357e3`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}],[`path`,{d:`M12 7v5l4 2`,key:`1fdv2h`}]],History=createLucideIcon(`history`,__iconNode$85),__iconNode$84=[[`path`,{d:`M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8`,key:`5wwlr5`}],[`path`,{d:`M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z`,key:`r6nss1`}]],House=createLucideIcon(`house`,__iconNode$84),__iconNode$83=[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,ry:`2`,key:`1m3agn`}],[`circle`,{cx:`9`,cy:`9`,r:`2`,key:`af1f0g`}],[`path`,{d:`m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21`,key:`1xmnt7`}]],Image$1=createLucideIcon(`image`,__iconNode$83),__iconNode$82=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M12 16v-4`,key:`1dtifu`}],[`path`,{d:`M12 8h.01`,key:`e9boi3`}]],Info=createLucideIcon(`info`,__iconNode$82),__iconNode$81=[[`line`,{x1:`19`,x2:`10`,y1:`4`,y2:`4`,key:`15jd3p`}],[`line`,{x1:`14`,x2:`5`,y1:`20`,y2:`20`,key:`bu0au3`}],[`line`,{x1:`15`,x2:`9`,y1:`4`,y2:`20`,key:`uljnxc`}]],Italic=createLucideIcon(`italic`,__iconNode$81),__iconNode$80=[[`path`,{d:`M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z`,key:`zw3jo`}],[`path`,{d:`M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12`,key:`1wduqc`}],[`path`,{d:`M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17`,key:`kqbvx6`}]],Layers=createLucideIcon(`layers`,__iconNode$80),__iconNode$79=[[`rect`,{width:`7`,height:`7`,x:`3`,y:`3`,rx:`1`,key:`1g98yp`}],[`rect`,{width:`7`,height:`7`,x:`14`,y:`3`,rx:`1`,key:`6d4xhi`}],[`rect`,{width:`7`,height:`7`,x:`14`,y:`14`,rx:`1`,key:`nxv5o0`}],[`rect`,{width:`7`,height:`7`,x:`3`,y:`14`,rx:`1`,key:`1bb6yr`}]],LayoutGrid=createLucideIcon(`layout-grid`,__iconNode$79),__iconNode$78=[[`rect`,{width:`18`,height:`7`,x:`3`,y:`3`,rx:`1`,key:`f1a2em`}],[`rect`,{width:`9`,height:`7`,x:`3`,y:`14`,rx:`1`,key:`jqznyg`}],[`rect`,{width:`5`,height:`7`,x:`16`,y:`14`,rx:`1`,key:`q5h2i8`}]],LayoutTemplate=createLucideIcon(`layout-template`,__iconNode$78),__iconNode$77=[[`path`,{d:`M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71`,key:`1cjeqo`}],[`path`,{d:`M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71`,key:`19qd67`}]],Link$1=createLucideIcon(`link`,__iconNode$77),__iconNode$76=[[`path`,{d:`M11 5h10`,key:`1cz7ny`}],[`path`,{d:`M11 12h10`,key:`1438ji`}],[`path`,{d:`M11 19h10`,key:`11t30w`}],[`path`,{d:`M4 4h1v5`,key:`10yrso`}],[`path`,{d:`M4 9h2`,key:`r1h2o0`}],[`path`,{d:`M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02`,key:`xtkcd5`}]],ListOrdered=createLucideIcon(`list-ordered`,__iconNode$76),__iconNode$75=[[`path`,{d:`M3 5h.01`,key:`18ugdj`}],[`path`,{d:`M3 12h.01`,key:`nlz23k`}],[`path`,{d:`M3 19h.01`,key:`noohij`}],[`path`,{d:`M8 5h13`,key:`1pao27`}],[`path`,{d:`M8 12h13`,key:`1za7za`}],[`path`,{d:`M8 19h13`,key:`m83p4d`}]],List=createLucideIcon(`list`,__iconNode$75),__iconNode$74=[[`path`,{d:`M21 12a9 9 0 1 1-6.219-8.56`,key:`13zald`}]],LoaderCircle=createLucideIcon(`loader-circle`,__iconNode$74),__iconNode$73=[[`path`,{d:`M12 2v4`,key:`3427ic`}],[`path`,{d:`m16.2 7.8 2.9-2.9`,key:`r700ao`}],[`path`,{d:`M18 12h4`,key:`wj9ykh`}],[`path`,{d:`m16.2 16.2 2.9 2.9`,key:`1bxg5t`}],[`path`,{d:`M12 18v4`,key:`jadmvz`}],[`path`,{d:`m4.9 19.1 2.9-2.9`,key:`bwix9q`}],[`path`,{d:`M2 12h4`,key:`j09sii`}],[`path`,{d:`m4.9 4.9 2.9 2.9`,key:`giyufr`}]],Loader=createLucideIcon(`loader`,__iconNode$73),__iconNode$72=[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`,key:`fwvmzm`}]],Lock=createLucideIcon(`lock`,__iconNode$72),__iconNode$71=[[`path`,{d:`m16 17 5-5-5-5`,key:`1bji2h`}],[`path`,{d:`M21 12H9`,key:`dn1m92`}],[`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`,key:`1uf3rs`}]],LogOut=createLucideIcon(`log-out`,__iconNode$71),__iconNode$70=[[`path`,{d:`m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7`,key:`132q7q`}],[`rect`,{x:`2`,y:`4`,width:`20`,height:`16`,rx:`2`,key:`izxlao`}]],Mail=createLucideIcon(`mail`,__iconNode$70),__iconNode$69=[[`path`,{d:`M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0`,key:`1r0f0z`}],[`circle`,{cx:`12`,cy:`10`,r:`3`,key:`ilqhr7`}]],MapPin=createLucideIcon(`map-pin`,__iconNode$69),__iconNode$68=[[`path`,{d:`M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z`,key:`169xi5`}],[`path`,{d:`M15 5.764v15`,key:`1pn4in`}],[`path`,{d:`M9 3.236v15`,key:`1uimfh`}]],Map$1=createLucideIcon(`map`,__iconNode$68),__iconNode$67=[[`path`,{d:`M8 3H5a2 2 0 0 0-2 2v3`,key:`1dcmit`}],[`path`,{d:`M21 8V5a2 2 0 0 0-2-2h-3`,key:`1e4gt3`}],[`path`,{d:`M3 16v3a2 2 0 0 0 2 2h3`,key:`wsl5sc`}],[`path`,{d:`M16 21h3a2 2 0 0 0 2-2v-3`,key:`18trek`}]],Maximize=createLucideIcon(`maximize`,__iconNode$67),__iconNode$66=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`8`,x2:`16`,y1:`15`,y2:`15`,key:`1xb1d9`}],[`line`,{x1:`9`,x2:`9.01`,y1:`9`,y2:`9`,key:`yxxnd0`}],[`line`,{x1:`15`,x2:`15.01`,y1:`9`,y2:`9`,key:`1p4y9e`}]],Meh=createLucideIcon(`meh`,__iconNode$66),__iconNode$65=[[`path`,{d:`M4 5h16`,key:`1tepv9`}],[`path`,{d:`M4 12h16`,key:`1lakjw`}],[`path`,{d:`M4 19h16`,key:`1djgab`}]],Menu=createLucideIcon(`menu`,__iconNode$65),__iconNode$64=[[`path`,{d:`M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719`,key:`1sd12s`}]],MessageCircle=createLucideIcon(`message-circle`,__iconNode$64),__iconNode$63=[[`path`,{d:`M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z`,key:`18887p`}]],MessageSquare=createLucideIcon(`message-square`,__iconNode$63),__iconNode$62=[[`path`,{d:`M12 19v3`,key:`npa21l`}],[`path`,{d:`M15 9.34V5a3 3 0 0 0-5.68-1.33`,key:`1gzdoj`}],[`path`,{d:`M16.95 16.95A7 7 0 0 1 5 12v-2`,key:`cqa7eg`}],[`path`,{d:`M18.89 13.23A7 7 0 0 0 19 12v-2`,key:`16hl24`}],[`path`,{d:`m2 2 20 20`,key:`1ooewy`}],[`path`,{d:`M9 9v3a3 3 0 0 0 5.12 2.12`,key:`r2i35w`}]],MicOff=createLucideIcon(`mic-off`,__iconNode$62),__iconNode$61=[[`path`,{d:`M12 19v3`,key:`npa21l`}],[`path`,{d:`M19 10v2a7 7 0 0 1-14 0v-2`,key:`1vc78b`}],[`rect`,{x:`9`,y:`2`,width:`6`,height:`13`,rx:`3`,key:`s6n7sd`}]],Mic=createLucideIcon(`mic`,__iconNode$61),__iconNode$60=[[`path`,{d:`M5 12h14`,key:`1ays0h`}]],Minus=createLucideIcon(`minus`,__iconNode$60),__iconNode$59=[[`rect`,{width:`20`,height:`14`,x:`2`,y:`3`,rx:`2`,key:`48i651`}],[`line`,{x1:`8`,x2:`16`,y1:`21`,y2:`21`,key:`1svkeh`}],[`line`,{x1:`12`,x2:`12`,y1:`17`,y2:`21`,key:`vw1qmm`}]],Monitor=createLucideIcon(`monitor`,__iconNode$59),__iconNode$58=[[`path`,{d:`M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401`,key:`kfwtm`}]],Moon=createLucideIcon(`moon`,__iconNode$58),__iconNode$57=[[`path`,{d:`M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z`,key:`edeuup`}]],MousePointer2=createLucideIcon(`mouse-pointer-2`,__iconNode$57),__iconNode$56=[[`path`,{d:`M14 4.1 12 6`,key:`ita8i4`}],[`path`,{d:`m5.1 8-2.9-.8`,key:`1go3kf`}],[`path`,{d:`m6 12-1.9 2`,key:`mnht97`}],[`path`,{d:`M7.2 2.2 8 5.1`,key:`1cfko1`}],[`path`,{d:`M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z`,key:`s0h3yz`}]],MousePointerClick=createLucideIcon(`mouse-pointer-click`,__iconNode$56),__iconNode$55=[[`path`,{d:`M12 2v20`,key:`t6zp3m`}],[`path`,{d:`m15 19-3 3-3-3`,key:`11eu04`}],[`path`,{d:`m19 9 3 3-3 3`,key:`1mg7y2`}],[`path`,{d:`M2 12h20`,key:`9i4pu4`}],[`path`,{d:`m5 9-3 3 3 3`,key:`j64kie`}],[`path`,{d:`m9 5 3-3 3 3`,key:`l8vdw6`}]],Move=createLucideIcon(`move`,__iconNode$55),__iconNode$54=[[`path`,{d:`M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z`,key:`e79jfc`}],[`circle`,{cx:`13.5`,cy:`6.5`,r:`.5`,fill:`currentColor`,key:`1okk4w`}],[`circle`,{cx:`17.5`,cy:`10.5`,r:`.5`,fill:`currentColor`,key:`f64h9f`}],[`circle`,{cx:`6.5`,cy:`12.5`,r:`.5`,fill:`currentColor`,key:`qy21gx`}],[`circle`,{cx:`8.5`,cy:`7.5`,r:`.5`,fill:`currentColor`,key:`fotxhn`}]],Palette=createLucideIcon(`palette`,__iconNode$54),__iconNode$53=[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M9 3v18`,key:`fh3hqa`}]],PanelLeft=createLucideIcon(`panel-left`,__iconNode$53),__iconNode$52=[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M15 3v18`,key:`14nvp0`}]],PanelRight=createLucideIcon(`panel-right`,__iconNode$52),__iconNode$51=[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M3 9h18`,key:`1pudct`}],[`path`,{d:`M9 21V9`,key:`1oto5p`}]],PanelsTopLeft=createLucideIcon(`panels-top-left`,__iconNode$51),__iconNode$50=[[`rect`,{x:`14`,y:`3`,width:`5`,height:`18`,rx:`1`,key:`kaeet6`}],[`rect`,{x:`5`,y:`3`,width:`5`,height:`18`,rx:`1`,key:`1wsw3u`}]],Pause=createLucideIcon(`pause`,__iconNode$50),__iconNode$49=[[`path`,{d:`M13 21h8`,key:`1jsn5i`}],[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}]],PenLine=createLucideIcon(`pen-line`,__iconNode$49),__iconNode$48=[[`path`,{d:`M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z`,key:`nt11vn`}],[`path`,{d:`m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18`,key:`15qc1e`}],[`path`,{d:`m2.3 2.3 7.286 7.286`,key:`1wuzzi`}],[`circle`,{cx:`11`,cy:`11`,r:`2`,key:`xmgehs`}]],PenTool=createLucideIcon(`pen-tool`,__iconNode$48),__iconNode$47=[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}],[`path`,{d:`m15 5 4 4`,key:`1mk7zo`}]],Pencil=createLucideIcon(`pencil`,__iconNode$47),__iconNode$46=[[`path`,{d:`M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384`,key:`9njp5v`}]],Phone=createLucideIcon(`phone`,__iconNode$46),__iconNode$45=[[`path`,{d:`M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z`,key:`10ikf1`}]],Play=createLucideIcon(`play`,__iconNode$45),__iconNode$44=[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`M12 5v14`,key:`s699le`}]],Plus=createLucideIcon(`plus`,__iconNode$44),__iconNode$43=[[`path`,{d:`M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z`,key:`rib7q0`}],[`path`,{d:`M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z`,key:`1ymkrd`}]],Quote=createLucideIcon(`quote`,__iconNode$43),__iconNode$42=[[`path`,{d:`M19.07 4.93A10 10 0 0 0 6.99 3.34`,key:`z3du51`}],[`path`,{d:`M4 6h.01`,key:`oypzma`}],[`path`,{d:`M2.29 9.62A10 10 0 1 0 21.31 8.35`,key:`qzzz0`}],[`path`,{d:`M16.24 7.76A6 6 0 1 0 8.23 16.67`,key:`1yjesh`}],[`path`,{d:`M12 18h.01`,key:`mhygvu`}],[`path`,{d:`M17.99 11.66A6 6 0 0 1 15.77 16.67`,key:`1u2y91`}],[`circle`,{cx:`12`,cy:`12`,r:`2`,key:`1c9p78`}],[`path`,{d:`m13.41 10.59 5.66-5.66`,key:`mhq4k0`}]],Radar=createLucideIcon(`radar`,__iconNode$42),__iconNode$41=[[`path`,{d:`M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8`,key:`v9h5vc`}],[`path`,{d:`M21 3v5h-5`,key:`1q7to0`}],[`path`,{d:`M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16`,key:`3uifl3`}],[`path`,{d:`M8 16H3v5`,key:`1cv678`}]],RefreshCw=createLucideIcon(`refresh-cw`,__iconNode$41),__iconNode$40=[[`path`,{d:`M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`1357e3`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}]],RotateCcw=createLucideIcon(`rotate-ccw`,__iconNode$40),__iconNode$39=[[`path`,{d:`M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8`,key:`1p45f6`}],[`path`,{d:`M21 3v5h-5`,key:`1q7to0`}]],RotateCw=createLucideIcon(`rotate-cw`,__iconNode$39),__iconNode$38=[[`path`,{d:`M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z`,key:`1c8476`}],[`path`,{d:`M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7`,key:`1ydtos`}],[`path`,{d:`M7 3v4a1 1 0 0 0 1 1h7`,key:`t51u73`}]],Save=createLucideIcon(`save`,__iconNode$38),__iconNode$37=[[`path`,{d:`M15 12h-5`,key:`r7krc0`}],[`path`,{d:`M15 8h-5`,key:`1khuty`}],[`path`,{d:`M19 17V5a2 2 0 0 0-2-2H4`,key:`zz82l3`}],[`path`,{d:`M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3`,key:`1ph1d7`}]],ScrollText=createLucideIcon(`scroll-text`,__iconNode$37),__iconNode$36=[[`path`,{d:`m21 21-4.34-4.34`,key:`14j7rj`}],[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}]],Search=createLucideIcon(`search`,__iconNode$36),__iconNode$35=[[`rect`,{x:`14`,y:`14`,width:`8`,height:`8`,rx:`2`,key:`1b0bso`}],[`rect`,{x:`2`,y:`2`,width:`8`,height:`8`,rx:`2`,key:`1x09vl`}],[`path`,{d:`M7 14v1a2 2 0 0 0 2 2h1`,key:`pao6x6`}],[`path`,{d:`M14 7h1a2 2 0 0 1 2 2v1`,key:`19tdru`}]],SendToBack=createLucideIcon(`send-to-back`,__iconNode$35),__iconNode$34=[[`path`,{d:`M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z`,key:`1ffxy3`}],[`path`,{d:`m21.854 2.147-10.94 10.939`,key:`12cjpa`}]],Send=createLucideIcon(`send`,__iconNode$34),__iconNode$33=[[`path`,{d:`M14 17H5`,key:`gfn3mx`}],[`path`,{d:`M19 7h-9`,key:`6i9tg`}],[`circle`,{cx:`17`,cy:`17`,r:`3`,key:`18b49y`}],[`circle`,{cx:`7`,cy:`7`,r:`3`,key:`dfmy0x`}]],Settings2=createLucideIcon(`settings-2`,__iconNode$33),__iconNode$32=[[`circle`,{cx:`18`,cy:`5`,r:`3`,key:`gq8acd`}],[`circle`,{cx:`6`,cy:`12`,r:`3`,key:`w7nqdw`}],[`circle`,{cx:`18`,cy:`19`,r:`3`,key:`1xt0gg`}],[`line`,{x1:`8.59`,x2:`15.42`,y1:`13.51`,y2:`17.49`,key:`47mynk`}],[`line`,{x1:`15.41`,x2:`8.59`,y1:`6.51`,y2:`10.49`,key:`1n3mei`}]],Share2=createLucideIcon(`share-2`,__iconNode$32),__iconNode$31=[[`path`,{d:`M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915`,key:`1i5ecw`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]],Settings=createLucideIcon(`settings`,__iconNode$31),__iconNode$30=[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}],[`path`,{d:`M12 8v4`,key:`1got3b`}],[`path`,{d:`M12 16h.01`,key:`1drbdi`}]],ShieldAlert=createLucideIcon(`shield-alert`,__iconNode$30),__iconNode$29=[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}]],Shield=createLucideIcon(`shield`,__iconNode$29),__iconNode$28=[[`path`,{d:`M16 10a4 4 0 0 1-8 0`,key:`1ltviw`}],[`path`,{d:`M3.103 6.034h17.794`,key:`awc11p`}],[`path`,{d:`M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z`,key:`o988cm`}]],ShoppingBag=createLucideIcon(`shopping-bag`,__iconNode$28),__iconNode$27=[[`path`,{d:`M10 8h4`,key:`1sr2af`}],[`path`,{d:`M12 21v-9`,key:`17s77i`}],[`path`,{d:`M12 8V3`,key:`13r4qs`}],[`path`,{d:`M17 16h4`,key:`h1uq16`}],[`path`,{d:`M19 12V3`,key:`o1uvq1`}],[`path`,{d:`M19 21v-5`,key:`qua636`}],[`path`,{d:`M3 14h4`,key:`bcjad9`}],[`path`,{d:`M5 10V3`,key:`cb8scm`}],[`path`,{d:`M5 21v-7`,key:`1w1uti`}]],SlidersVertical=createLucideIcon(`sliders-vertical`,__iconNode$27),__iconNode$26=[[`rect`,{width:`14`,height:`20`,x:`5`,y:`2`,rx:`2`,ry:`2`,key:`1yt0o3`}],[`path`,{d:`M12 18h.01`,key:`mhygvu`}]],Smartphone=createLucideIcon(`smartphone`,__iconNode$26),__iconNode$25=[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M8 14s1.5 2 4 2 4-2 4-2`,key:`1y1vjs`}],[`line`,{x1:`9`,x2:`9.01`,y1:`9`,y2:`9`,key:`yxxnd0`}],[`line`,{x1:`15`,x2:`15.01`,y1:`9`,y2:`9`,key:`1p4y9e`}]],Smile=createLucideIcon(`smile`,__iconNode$25),__iconNode$24=[[`path`,{d:`m10 20-1.25-2.5L6 18`,key:`18frcb`}],[`path`,{d:`M10 4 8.75 6.5 6 6`,key:`7mghy3`}],[`path`,{d:`m14 20 1.25-2.5L18 18`,key:`1chtki`}],[`path`,{d:`m14 4 1.25 2.5L18 6`,key:`1b4wsy`}],[`path`,{d:`m17 21-3-6h-4`,key:`15hhxa`}],[`path`,{d:`m17 3-3 6 1.5 3`,key:`11697g`}],[`path`,{d:`M2 12h6.5L10 9`,key:`kv9z4n`}],[`path`,{d:`m20 10-1.5 2 1.5 2`,key:`1swlpi`}],[`path`,{d:`M22 12h-6.5L14 15`,key:`1mxi28`}],[`path`,{d:`m4 10 1.5 2L4 14`,key:`k9enpj`}],[`path`,{d:`m7 21 3-6-1.5-3`,key:`j8hb9u`}],[`path`,{d:`m7 3 3 6h4`,key:`1otusx`}]],Snowflake=createLucideIcon(`snowflake`,__iconNode$24),__iconNode$23=[[`path`,{d:`M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z`,key:`1s2grr`}],[`path`,{d:`M20 2v4`,key:`1rf3ol`}],[`path`,{d:`M22 4h-4`,key:`gwowj6`}],[`circle`,{cx:`4`,cy:`20`,r:`2`,key:`6kqj1y`}]],Sparkles=createLucideIcon(`sparkles`,__iconNode$23),__iconNode$22=[[`path`,{d:`M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344`,key:`2acyp4`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]],SquareCheckBig=createLucideIcon(`square-check-big`,__iconNode$22),__iconNode$21=[[`path`,{d:`M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`,key:`1m0v6g`}],[`path`,{d:`M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z`,key:`ohrbg2`}]],SquarePen=createLucideIcon(`square-pen`,__iconNode$21),__iconNode$20=[[`path`,{d:`M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z`,key:`r04s7s`}]],Star=createLucideIcon(`star`,__iconNode$20),__iconNode$19=[[`path`,{d:`M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z`,key:`1dfntj`}],[`path`,{d:`M15 3v5a1 1 0 0 0 1 1h5`,key:`6s6qgf`}]],StickyNote=createLucideIcon(`sticky-note`,__iconNode$19),__iconNode$18=[[`path`,{d:`M16 4H9a3 3 0 0 0-2.83 4`,key:`43sutm`}],[`path`,{d:`M14 12a4 4 0 0 1 0 8H6`,key:`nlfj13`}],[`line`,{x1:`4`,x2:`20`,y1:`12`,y2:`12`,key:`1e0a9i`}]],Strikethrough=createLucideIcon(`strikethrough`,__iconNode$18),__iconNode$17=[[`circle`,{cx:`12`,cy:`12`,r:`4`,key:`4exip2`}],[`path`,{d:`M12 2v2`,key:`tus03m`}],[`path`,{d:`M12 20v2`,key:`1lh1kg`}],[`path`,{d:`m4.93 4.93 1.41 1.41`,key:`149t6j`}],[`path`,{d:`m17.66 17.66 1.41 1.41`,key:`ptbguv`}],[`path`,{d:`M2 12h2`,key:`1t8f8n`}],[`path`,{d:`M20 12h2`,key:`1q8mjw`}],[`path`,{d:`m6.34 17.66-1.41 1.41`,key:`1m8zz5`}],[`path`,{d:`m19.07 4.93-1.41 1.41`,key:`1shlcs`}]],Sun=createLucideIcon(`sun`,__iconNode$17),__iconNode$16=[[`path`,{d:`M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z`,key:`vktsd0`}],[`circle`,{cx:`7.5`,cy:`7.5`,r:`.5`,fill:`currentColor`,key:`kqv944`}]],Tag=createLucideIcon(`tag`,__iconNode$16),__iconNode$15=[[`path`,{d:`M21 5H3`,key:`1fi0y6`}],[`path`,{d:`M21 12H9`,key:`dn1m92`}],[`path`,{d:`M21 19H7`,key:`4cu937`}]],TextAlignEnd=createLucideIcon(`text-align-end`,__iconNode$15),__iconNode$14=[[`path`,{d:`M21 5H3`,key:`1fi0y6`}],[`path`,{d:`M17 12H7`,key:`16if0g`}],[`path`,{d:`M19 19H5`,key:`vjpgq2`}]],TextAlignCenter=createLucideIcon(`text-align-center`,__iconNode$14),__iconNode$13=[[`path`,{d:`M21 5H3`,key:`1fi0y6`}],[`path`,{d:`M15 12H3`,key:`6jk70r`}],[`path`,{d:`M17 19H3`,key:`z6ezky`}]],TextAlignStart=createLucideIcon(`text-align-start`,__iconNode$13),__iconNode$12=[[`path`,{d:`M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z`,key:`emmmcr`}],[`path`,{d:`M7 10v12`,key:`1qc93n`}]],ThumbsUp=createLucideIcon(`thumbs-up`,__iconNode$12),__iconNode$11=[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]],Trash2=createLucideIcon(`trash-2`,__iconNode$11),__iconNode$10=[[`path`,{d:`m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3`,key:`wmoenq`}],[`path`,{d:`M12 9v4`,key:`juzpu7`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]],TriangleAlert=createLucideIcon(`triangle-alert`,__iconNode$10),__iconNode$9=[[`path`,{d:`M12 4v16`,key:`1654pz`}],[`path`,{d:`M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2`,key:`e0r10z`}],[`path`,{d:`M9 20h6`,key:`s66wpe`}]],Type=createLucideIcon(`type`,__iconNode$9),__iconNode$8=[[`path`,{d:`M6 4v6a6 6 0 0 0 12 0V4`,key:`9kb039`}],[`line`,{x1:`4`,x2:`20`,y1:`20`,y2:`20`,key:`nun2al`}]],Underline=createLucideIcon(`underline`,__iconNode$8),__iconNode$7=[[`path`,{d:`M9 14 4 9l5-5`,key:`102s5s`}],[`path`,{d:`M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11`,key:`f3b9sd`}]],Undo2=createLucideIcon(`undo-2`,__iconNode$7),__iconNode$6=[[`path`,{d:`M12 3v12`,key:`1x0j5s`}],[`path`,{d:`m17 8-5-5-5 5`,key:`7q97r8`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}]],Upload=createLucideIcon(`upload`,__iconNode$6),__iconNode$5=[[`path`,{d:`M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2`,key:`975kel`}],[`circle`,{cx:`12`,cy:`7`,r:`4`,key:`17ys0d`}]],User=createLucideIcon(`user`,__iconNode$5),__iconNode$4=[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`path`,{d:`M16 3.128a4 4 0 0 1 0 7.744`,key:`16gr8j`}],[`path`,{d:`M22 21v-2a4 4 0 0 0-3-3.87`,key:`kshegd`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]],Users=createLucideIcon(`users`,__iconNode$4),__iconNode$3=[[`path`,{d:`M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1`,key:`18etb6`}],[`path`,{d:`M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4`,key:`xoc0q4`}]],Wallet=createLucideIcon(`wallet`,__iconNode$3),__iconNode$2=[[`path`,{d:`M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z`,key:`1ngwbx`}]],Wrench=createLucideIcon(`wrench`,__iconNode$2),__iconNode$1=[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]],X=createLucideIcon(`x`,__iconNode$1),__iconNode=[[`path`,{d:`M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z`,key:`1xq2db`}]],Zap=createLucideIcon(`zap`,__iconNode),require_react_jsx_runtime_production=__commonJSMin((exports=>{var REACT_ELEMENT_TYPE$1=Symbol.for(`react.transitional.element`),REACT_FRAGMENT_TYPE$1=Symbol.for(`react.fragment`);function jsxProd(type,config,maybeKey){var key$1=null;if(maybeKey!==void 0&&(key$1=``+maybeKey),config.key!==void 0&&(key$1=``+config.key),`key`in config)for(var propName in maybeKey={},config)propName!==`key`&&(maybeKey[propName]=config[propName]);else maybeKey=config;return config=maybeKey.ref,{$$typeof:REACT_ELEMENT_TYPE$1,type,key:key$1,ref:config===void 0?null:config,props:maybeKey}}exports.Fragment=REACT_FRAGMENT_TYPE$1,exports.jsx=jsxProd,exports.jsxs=jsxProd})),require_jsx_runtime=__commonJSMin(((exports,module)=>{module.exports=require_react_jsx_runtime_production()})),import_jsx_runtime=require_jsx_runtime(),fontFamilies=[{name:`Noto Sans KR ()`,value:`'Noto Sans KR', sans-serif`},{name:`Nanum Gothic ()`,value:`'Nanum Gothic', sans-serif`},{name:`Nanum Myeongjo ()`,value:`'Nanum Myeongjo', serif`},{name:`Gowun Dodum ()`,value:`'Gowun Dodum', sans-serif`},{name:`Gowun Batang ()`,value:`'Gowun Batang', serif`},{name:`Song Myung ()`,value:`'Song Myung', serif`},{name:`Black Han Sans ()`,value:`'Black Han Sans', sans-serif`},{name:`Do Hyeon ()`,value:`'Do Hyeon', sans-serif`},{name:`Jua ()`,value:`'Jua', sans-serif`},{name:`Yeon Sung ()`,value:`'Yeon Sung', cursive`},{name:`Sunflower ()`,value:`'Sunflower', sans-serif`},{name:`Gothic A1 ( A1)`,value:`'Gothic A1', sans-serif`},{name:`Hi Melody ()`,value:`'Hi Melody', cursive`},{name:`Gamja Flower ()`,value:`'Gamja Flower', cursive`},{name:`Poor Story ()`,value:`'Poor Story', cursive`},{name:`IBM Plex Sans KR`,value:`'IBM Plex Sans KR', sans-serif`},{name:`Bagel Fat One ()`,value:`'Bagel Fat One', cursive`},{name:`Dongle ()`,value:`'Dongle', sans-serif`},{name:`Single Day ()`,value:`'Single Day', cursive`},{name:`Roboto`,value:`'Roboto', sans-serif`},{name:`System Default`,value:`ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif`}],DEFAULT_FONT_FAMILY=`'Noto Sans KR', sans-serif`,DEFAULT_FONT_SIZE=16,DIRECTIONS=[{value:`to top left`,icon:ArrowUpLeft},{value:`to top`,icon:ArrowUp},{value:`to top right`,icon:ArrowUpRight},{value:`to left`,icon:ArrowLeft},{value:`to right`,icon:ArrowRight},{value:`to bottom left`,icon:ArrowDownLeft},{value:`to bottom`,icon:ArrowDown},{value:`to bottom right`,icon:ArrowDownRight}],TEXT_COLORS=[`#000000`,`#333333`,`#555555`,`#ef4444`,`#3b82f6`,`#22c55e`,`#f59e0b`,`#8b5cf6`],BG_COLORS=[`#ffffff`,`#f8fafc`,`#f0f9ff`,`#f0fdf4`,`#fefce8`,`#fff7ed`,`#fef2f2`,`#faf5ff`],ColorPicker$1=({label,color:color$2,onChange,colors})=>(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-sm font-medium theme-text-primary`,children:label}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap gap-3 p-2`,children:[colors.map(c$3=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onChange(c$3),className:`
                        w-10 h-10 rounded-full shadow-sm transition-transform hover:scale-110 focus:outline-none border border-gray-200
                        ${color$2===c$3?`ring-2 ring-offset-2 ring-gray-400`:``}
                    `,style:{backgroundColor:c$3}},c$3)),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative w-10 h-10 rounded-full overflow-hidden shadow-sm transition-transform hover:scale-110 cursor-pointer ring-1 ring-gray-200`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`color`,value:color$2,onChange:e$4=>onChange(e$4.target.value),className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[150%] h-[150%] p-0 border-0 cursor-pointer`}),(0,import_jsx_runtime.jsx)(Palette,{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none`})]})]})]});function PersonalSettings({onBack,onClose,currentTheme,onThemeChange}){let[activeTab,setActiveTab]=(0,import_react.useState)(`font`),[manualSubTab,setManualSubTab]=(0,import_react.useState)(`text`),[fontFamily,setFontFamily]=(0,import_react.useState)(()=>localStorage.getItem(`fontFamily`)||DEFAULT_FONT_FAMILY),[fontSize,setFontSize]=(0,import_react.useState)(()=>parseInt(localStorage.getItem(`fontSize`)||String(DEFAULT_FONT_SIZE))),[isFontDropdownOpen,setIsFontDropdownOpen]=(0,import_react.useState)(!1),dropdownRef=(0,import_react.useRef)(null),[manualTextColor,setManualTextColor]=(0,import_react.useState)(()=>localStorage.getItem(`manualTextColor`)||`#1a1a1a`),[manualTextIntensity,setManualTextIntensity]=(0,import_react.useState)(()=>parseInt(localStorage.getItem(`manualTextIntensity`)||`100`)),[isGradient,setIsGradient]=(0,import_react.useState)(()=>localStorage.getItem(`manualIsGradient`)===`true`),[manualBgColor,setManualBgColor]=(0,import_react.useState)(()=>localStorage.getItem(`manualBgColor`)||`#ffffff`),[manualBgIntensity,setManualBgIntensity]=(0,import_react.useState)(()=>parseInt(localStorage.getItem(`manualBgIntensity`)||`100`)),[manualCardColor,setManualCardColor]=(0,import_react.useState)(()=>localStorage.getItem(`manualCardColor`)||`#ffffff`),[manualBgImage,setManualBgImage]=(0,import_react.useState)(()=>localStorage.getItem(`manualBgImage`)||``),[manualBgSize,setManualBgSize]=(0,import_react.useState)(()=>localStorage.getItem(`manualBgSize`)||`cover`),[manualBtnColor,setManualBtnColor]=(0,import_react.useState)(()=>localStorage.getItem(`manualBtnColor`)||`#2563eb`),[manualBtnTextColor,setManualBtnTextColor]=(0,import_react.useState)(()=>localStorage.getItem(`manualBtnTextColor`)||`#ffffff`),[gradientDirection,setGradientDirection]=(0,import_react.useState)(()=>localStorage.getItem(`manualGradientDirection`)||`to bottom right`),[gradientStartColor,setGradientStartColor]=(0,import_react.useState)(()=>localStorage.getItem(`manualGradientStartColor`)||`#ffffff`),[gradientEndColor,setGradientEndColor]=(0,import_react.useState)(()=>localStorage.getItem(`manualGradientEndColor`)||`#3b82f6`);(0,import_react.useEffect)(()=>{function handleClickOutside(event){dropdownRef.current&&!dropdownRef.current.contains(event.target)&&setIsFontDropdownOpen(!1)}return document.addEventListener(`mousedown`,handleClickOutside),()=>{document.removeEventListener(`mousedown`,handleClickOutside)}},[dropdownRef]);let recommendedThemes=[{id:`custom-purple`,name:`Purple`,previewClass:`bg-gradient-to-br from-[#e0c3fc] to-[#8ec5fc]`},{id:`custom-green`,name:`Green`,previewClass:`bg-gradient-to-br from-[#d4fc79] to-[#96e6a1]`},{id:`custom-blue`,name:`Blue`,previewClass:`bg-gradient-to-br from-[#89f7fe] to-[#66a6ff]`},{id:`custom-red`,name:`Red`,previewClass:`bg-gradient-to-br from-[#ff9a9e] to-[#fecfef]`},{id:`custom-orange`,name:`Orange`,previewClass:`bg-gradient-to-br from-[#f6d365] to-[#fda085]`},{id:`custom-pink`,name:`Pink`,previewClass:`bg-gradient-to-br from-[#ffc3a0] to-[#ffafbd]`},{id:`custom-teal`,name:`Teal`,previewClass:`bg-gradient-to-br from-[#84fab0] to-[#8fd3f4]`},{id:`custom-indigo`,name:`Indigo`,previewClass:`bg-gradient-to-br from-[#a18cd1] to-[#fbc2eb]`},{id:`custom-gray`,name:`Gray`,previewClass:`bg-gradient-to-t from-[#cfd9df] to-[#e2ebf0]`},{id:`custom-sunset`,name:`Sunset`,previewClass:`bg-gradient-to-br from-[#fa709a] to-[#fee140]`},{id:`custom-ocean`,name:`Ocean`,previewClass:`bg-gradient-to-t from-[#48c6ef] to-[#6f86d6]`},{id:`custom-forest`,name:`Forest`,previewClass:`bg-gradient-to-br from-[#f093fb] to-[#f5576c]`}],saveThemeToBackend=async(mode,fontData,manualData)=>{let token=localStorage.getItem(`accessToken`);if(!token)return;let payload={mode,font:fontData,manualConfig:mode===`manual`?manualData:null};try{await fetch(`/api/setting/theme`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify(payload)})}catch(e$4){console.error(`Failed to save theme to backend`,e$4)}},getManualConfig=()=>({text:{color:manualTextColor,intensity:manualTextIntensity},background:{isGradient,color:manualBgColor,intensity:manualBgIntensity,gradientDirection,gradientStart:gradientStartColor,gradientEnd:gradientEndColor,image:manualBgImage,size:manualBgSize},component:{cardColor:manualCardColor,btnColor:manualBtnColor,btnTextColor:manualBtnTextColor}}),handleSaveFont=()=>{document.documentElement.style.setProperty(`--font-family`,fontFamily),document.documentElement.style.setProperty(`--font-size`,`${fontSize}px`),localStorage.setItem(`fontFamily`,fontFamily),localStorage.setItem(`fontSize`,`${fontSize}px`);let manualConfig=getManualConfig();saveThemeToBackend(currentTheme,{family:fontFamily,size:`${fontSize}px`},manualConfig)},handleResetFont=()=>{setFontFamily(DEFAULT_FONT_FAMILY),setFontSize(DEFAULT_FONT_SIZE)},getFontName=value=>fontFamilies.find(f$3=>f$3.value===value)?.name||`Custom Font`,applyManualTheme=()=>{onThemeChange(`manual`);let tr=parseInt(manualTextColor.slice(1,3),16),tg=parseInt(manualTextColor.slice(3,5),16),tb=parseInt(manualTextColor.slice(5,7),16);if(document.documentElement.style.setProperty(`--manual-text-color`,`${tr}, ${tg}, ${tb}`),document.documentElement.style.setProperty(`--manual-text-intensity`,`${manualTextIntensity/100}`),localStorage.setItem(`manualTextColor`,manualTextColor),localStorage.setItem(`manualTextIntensity`,String(manualTextIntensity)),manualBgImage)document.documentElement.style.setProperty(`--manual-gradient`,`url(${manualBgImage})`),document.documentElement.style.setProperty(`--manual-bg-intensity`,`0`),localStorage.setItem(`manualBgImage`,manualBgImage),document.documentElement.style.setProperty(`--manual-bg-size`,manualBgSize===`repeat`?`auto`:manualBgSize),document.documentElement.style.setProperty(`--manual-bg-repeat`,manualBgSize===`repeat`?`repeat`:`no-repeat`);else if(isGradient)document.documentElement.style.setProperty(`--manual-gradient`,`linear-gradient(${gradientDirection}, ${gradientStartColor}, ${gradientEndColor})`),document.documentElement.style.setProperty(`--manual-bg-intensity`,`1`),document.documentElement.style.setProperty(`--manual-bg-size`,`cover`),document.documentElement.style.setProperty(`--manual-bg-repeat`,`no-repeat`);else{document.documentElement.style.setProperty(`--manual-gradient`,`none`);let r$4=parseInt(manualBgColor.slice(1,3),16),g$3=parseInt(manualBgColor.slice(3,5),16),b$3=parseInt(manualBgColor.slice(5,7),16);document.documentElement.style.setProperty(`--manual-bg-color`,`${r$4}, ${g$3}, ${b$3}`),document.documentElement.style.setProperty(`--manual-bg-intensity`,`${manualBgIntensity/100}`),document.documentElement.style.setProperty(`--manual-bg-size`,`cover`),document.documentElement.style.setProperty(`--manual-bg-repeat`,`no-repeat`)}let cr=parseInt(manualCardColor.slice(1,3),16),cg=parseInt(manualCardColor.slice(3,5),16),cb=parseInt(manualCardColor.slice(5,7),16);document.documentElement.style.setProperty(`--manual-card-color`,`${cr}, ${cg}, ${cb}`),localStorage.setItem(`manualCardColor`,manualCardColor),document.documentElement.style.setProperty(`--manual-btn-bg`,manualBtnColor),document.documentElement.style.setProperty(`--manual-btn-text`,manualBtnTextColor),localStorage.setItem(`manualTextColor`,manualTextColor),localStorage.setItem(`manualTextIntensity`,manualTextIntensity.toString()),localStorage.setItem(`manualIsGradient`,isGradient.toString()),localStorage.setItem(`manualBgColor`,manualBgColor),localStorage.setItem(`manualBgIntensity`,manualBgIntensity.toString()),localStorage.setItem(`manualGradientDirection`,gradientDirection),localStorage.setItem(`manualGradientStartColor`,gradientStartColor),localStorage.setItem(`manualGradientEndColor`,gradientEndColor),localStorage.setItem(`manualBtnColor`,manualBtnColor),localStorage.setItem(`manualBtnTextColor`,manualBtnTextColor),localStorage.setItem(`manualBgImage`,manualBgImage),localStorage.setItem(`manualBgSize`,manualBgSize);let manualConfig=getManualConfig();saveThemeToBackend(`manual`,{family:fontFamily,size:`${fontSize}px`},manualConfig)},handleImageUpload=e$4=>{let file=e$4.target.files?.[0];if(file){if(file.size>3*1024*1024){alert(`   . 3MB    .
(         .)`);return}let reader=new FileReader;reader.onloadend=()=>{let base64String=reader.result;try{localStorage.setItem(`temp_test_storage`,base64String),localStorage.removeItem(`temp_test_storage`),setManualBgImage(base64String)}catch(error$1){console.error(`Storage quota exceeded`,error$1),alert(`       .
    ,   .`)}},reader.readAsDataURL(file)}},handleResetManualTheme=()=>{setManualTextColor(`#1a1a1a`),setManualTextIntensity(100),setIsGradient(!1),setManualBgColor(`#ffffff`),setManualBgIntensity(100),setManualCardColor(`#ffffff`),setManualBtnColor(`#2563eb`),setManualBtnTextColor(`#ffffff`),setManualBgImage(``),setManualBgSize(`cover`),setGradientDirection(`to bottom right`),setGradientStartColor(`#ffffff`),setGradientEndColor(`#3b82f6`)};return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col h-full`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onBack,className:`p-2 -ml-2 theme-text-secondary hover:bg-black/5 rounded-full transition-colors`,children:(0,import_jsx_runtime.jsx)(ArrowLeft,{className:`w-6 h-6`})}),(0,import_jsx_runtime.jsx)(`h2`,{className:`text-xl theme-text-primary`,children:` `})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-2 theme-text-secondary hover:bg-black/5 rounded-full transition-colors`,children:(0,import_jsx_runtime.jsx)(X,{className:`w-6 h-6`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex space-x-1 theme-bg-card-secondary p-1 rounded-xl mb-6`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setActiveTab(`font`),className:`flex-1 flex items-center justify-center gap-2 py-2.5 text-sm font-medium rounded-lg transition-all ${activeTab===`font`?`theme-bg-card theme-text-primary shadow-sm`:`theme-text-secondary hover:bg-black/5`}`,children:[(0,import_jsx_runtime.jsx)(Type,{className:`w-4 h-4`}),``]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setActiveTab(`recommended`),className:`flex-1 flex items-center justify-center gap-2 py-2.5 text-sm font-medium rounded-lg transition-all ${activeTab===`recommended`?`theme-bg-card theme-text-primary shadow-sm`:`theme-text-secondary hover:bg-black/5`}`,children:[(0,import_jsx_runtime.jsx)(Star,{className:`w-4 h-4`}),` `]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setActiveTab(`manual`),className:`flex-1 flex items-center justify-center gap-2 py-2.5 text-sm font-medium rounded-lg transition-all ${activeTab===`manual`?`theme-bg-card theme-text-primary shadow-sm`:`theme-text-secondary hover:bg-black/5`}`,children:[(0,import_jsx_runtime.jsx)(PenTool,{className:`w-4 h-4`}),` `]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 overflow-y-auto`,children:[activeTab===`font`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`relative theme-bg-card-secondary rounded-xl p-8 min-h-[120px] flex flex-col justify-center transition-all duration-200`,style:{fontFamily,fontSize:`${fontSize}px`},children:[(0,import_jsx_runtime.jsx)(`p`,{className:`theme-text-primary font-bold mb-2`,children:`   `}),(0,import_jsx_runtime.jsx)(`p`,{className:`theme-text-secondary`,children:`The quick brown fox jumps over the lazy dog.`}),(0,import_jsx_runtime.jsx)(`span`,{className:`absolute bottom-3 right-4 text-xs theme-text-secondary opacity-60 font-sans`,children:``})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,ref:dropdownRef,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-sm font-medium theme-text-primary`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsFontDropdownOpen(!isFontDropdownOpen),className:`w-full flex items-center justify-between p-3 rounded-lg theme-border border theme-bg-card theme-text-primary hover:bg-black/5 transition-colors`,children:[(0,import_jsx_runtime.jsx)(`span`,{style:{fontFamily},children:getFontName(fontFamily)}),(0,import_jsx_runtime.jsx)(ChevronDown,{className:`w-4 h-4 transition-transform ${isFontDropdownOpen?`rotate-180`:``}`})]}),isFontDropdownOpen&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute z-10 w-full mt-1 theme-bg-card theme-border border rounded-lg shadow-lg overflow-hidden max-h-60 overflow-y-auto`,children:fontFamilies.map(font=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{setFontFamily(font.value),setIsFontDropdownOpen(!1)},className:`
                                                    w-full flex items-center justify-between p-3 text-left hover:bg-black/5 transition-colors
                                                    ${fontFamily===font.value?`bg-black/5 theme-text-primary font-bold`:`theme-text-secondary`}
                                                `,children:[(0,import_jsx_runtime.jsx)(`span`,{style:{fontFamily:font.value},children:font.name}),fontFamily===font.value&&(0,import_jsx_runtime.jsx)(Check,{className:`w-4 h-4 theme-text-primary`})]},font.name))})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-sm font-medium theme-text-primary`,children:` `}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-sm theme-text-primary font-bold`,children:[fontSize,`px`]})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`12`,max:`24`,step:`1`,value:fontSize,onChange:e$4=>setFontSize(parseInt(e$4.target.value)),className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[color:var(--btn-bg)]`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between text-xs theme-text-secondary`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:``}),(0,import_jsx_runtime.jsx)(`span`,{children:``}),(0,import_jsx_runtime.jsx)(`span`,{children:``})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3 mt-8 pt-4 border-t theme-border`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:handleResetFont,className:`flex-1 py-3 rounded-xl font-medium theme-bg-card theme-border border theme-text-secondary hover:bg-black/5 flex items-center justify-center gap-2 transition-colors`,children:[(0,import_jsx_runtime.jsx)(RotateCcw,{className:`w-4 h-4`}),``]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:handleSaveFont,className:`flex-1 py-3 rounded-xl font-bold theme-btn flex items-center justify-center gap-2 shadow-md transition-transform active:scale-95`,children:[(0,import_jsx_runtime.jsx)(Check,{className:`w-4 h-4`}),``]})]})]}),activeTab===`recommended`&&(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 md:grid-cols-3 gap-3`,children:recommendedThemes.map(theme=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>onThemeChange(theme.id),style:{borderColor:currentTheme===theme.id?`var(--text-primary)`:`var(--border-color)`},className:`
                                    relative flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all duration-200
                                    theme-bg-card
                                    ${currentTheme===theme.id?`bg-black/5`:`hover:bg-black/5`}
                                `,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-10 h-10 rounded-full mb-2 shadow-inner ${theme.previewClass}`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-medium ${currentTheme===theme.id?`theme-text-primary`:`theme-text-secondary`}`,children:theme.name}),currentTheme===theme.id&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-2 right-2 theme-btn rounded-full p-0.5`,children:(0,import_jsx_runtime.jsx)(Check,{className:`w-2 h-2 text-white`})})]},theme.id))}),activeTab===`manual`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex p-1 theme-bg-card-secondary rounded-lg mb-4`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setManualSubTab(`text`),className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${manualSubTab===`text`?`theme-bg-card theme-text-primary shadow-sm`:`theme-text-secondary hover:bg-black/5`}`,children:`Text`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setManualSubTab(`colors`),className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${manualSubTab===`colors`?`theme-bg-card theme-text-primary shadow-sm`:`theme-text-secondary hover:bg-black/5`}`,children:`Colors & Buttons`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setManualSubTab(`image`),className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${manualSubTab===`image`?`theme-bg-card theme-text-primary shadow-sm`:`theme-text-secondary hover:bg-black/5`}`,children:`Image`})]}),manualSubTab===`text`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`relative rounded-xl p-8 min-h-[120px] flex flex-col justify-center transition-all duration-200 shadow-inner theme-bg-card-secondary`,children:[(0,import_jsx_runtime.jsx)(`p`,{className:`font-bold mb-2 text-xl`,style:{color:`rgba(${parseInt(manualTextColor.slice(1,3),16)}, ${parseInt(manualTextColor.slice(3,5),16)}, ${parseInt(manualTextColor.slice(5,7),16)}, ${manualTextIntensity/100})`},children:`   `}),(0,import_jsx_runtime.jsx)(`p`,{className:`theme-text-secondary`,children:`The quick brown fox jumps over the lazy dog.`}),(0,import_jsx_runtime.jsx)(`span`,{className:`absolute bottom-3 right-4 text-xs theme-text-secondary opacity-60 font-sans`,children:``})]}),(0,import_jsx_runtime.jsx)(ColorPicker$1,{label:`  (Text Color)`,color:manualTextColor,onChange:setManualTextColor,colors:TEXT_COLORS}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-sm font-medium theme-text-primary`,children:` (Opacity)`}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-sm theme-text-primary font-bold`,children:[manualTextIntensity,`%`]})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`0`,max:`100`,step:`1`,value:manualTextIntensity,onChange:e$4=>setManualTextIntensity(parseInt(e$4.target.value)),className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[color:var(--btn-bg)]`})]})]}),manualSubTab===`colors`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`relative rounded-xl p-8 min-h-[120px] flex flex-col justify-between transition-all duration-200 shadow-inner`,style:{background:isGradient?`linear-gradient(${gradientDirection}, ${gradientStartColor}, ${gradientEndColor})`:`rgba(${parseInt(manualBgColor.slice(1,3),16)}, ${parseInt(manualBgColor.slice(3,5),16)}, ${parseInt(manualBgColor.slice(5,7),16)}, ${manualBgIntensity/100})`,borderColor:isGradient?gradientEndColor:manualBgColor},children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`p`,{className:`font-bold mb-2 theme-text-primary`,children:`   `}),(0,import_jsx_runtime.jsx)(`p`,{className:`theme-text-secondary`,children:`The quick brown fox jumps over the lazy dog.`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex gap-2 mt-4`,children:(0,import_jsx_runtime.jsx)(`button`,{className:`px-4 py-2 rounded-lg font-medium text-sm`,style:{backgroundColor:manualBtnColor,color:manualBtnTextColor},children:`Button`})}),(0,import_jsx_runtime.jsx)(`span`,{className:`absolute bottom-3 right-4 text-xs theme-text-secondary opacity-60 font-sans`,children:``})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between p-3 rounded-xl theme-bg-card-secondary`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-medium theme-text-primary`,children:` `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsGradient(!isGradient),className:`
                                            relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none
                                            ${isGradient?`bg-blue-600`:`bg-gray-200`}
                                        `,children:(0,import_jsx_runtime.jsx)(`span`,{className:`
                                                inline-block h-4 w-4 transform rounded-full bg-white transition-transform
                                                ${isGradient?`translate-x-6`:`translate-x-1`}
                                            `})})]}),isGradient?(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-sm font-medium theme-text-primary`,children:` (Direction)`}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-4 gap-2`,children:DIRECTIONS.map(dir=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setGradientDirection(dir.value),className:`
                                                            flex items-center justify-center p-2 rounded-lg border transition-all
                                                            ${gradientDirection===dir.value?`theme-bg-card theme-border border-blue-500 text-blue-500 shadow-sm`:`theme-bg-card-secondary border-transparent theme-text-secondary hover:bg-black/5`}
                                                        `,children:(0,import_jsx_runtime.jsx)(dir.icon,{className:`w-5 h-5`})},dir.value))})]}),(0,import_jsx_runtime.jsx)(ColorPicker$1,{label:`  (Start Color)`,color:gradientStartColor,onChange:setGradientStartColor,colors:BG_COLORS}),(0,import_jsx_runtime.jsx)(ColorPicker$1,{label:`  (End Color)`,color:gradientEndColor,onChange:setGradientEndColor,colors:BG_COLORS})]}):(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(ColorPicker$1,{label:`  (Base Color)`,color:manualBgColor,onChange:setManualBgColor,colors:BG_COLORS}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-sm font-medium theme-text-primary`,children:` (Opacity)`}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-sm theme-text-primary font-bold`,children:[manualBgIntensity,`%`]})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`0`,max:`100`,step:`1`,value:manualBgIntensity,onChange:e$4=>setManualBgIntensity(parseInt(e$4.target.value)),className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[color:var(--btn-bg)]`})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`border-t theme-border pt-4`,children:(0,import_jsx_runtime.jsx)(ColorPicker$1,{label:`/  (Card Color)`,color:manualCardColor,onChange:setManualCardColor,colors:BG_COLORS})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`border-t theme-border pt-4`,children:[(0,import_jsx_runtime.jsx)(ColorPicker$1,{label:`  (Button Color)`,color:manualBtnColor,onChange:setManualBtnColor,colors:TEXT_COLORS}),(0,import_jsx_runtime.jsx)(`div`,{className:`mt-4`,children:(0,import_jsx_runtime.jsx)(ColorPicker$1,{label:`   (Button Text Color)`,color:manualBtnTextColor,onChange:setManualBtnTextColor,colors:[`#ffffff`,`#000000`,...TEXT_COLORS.slice(2)]})})]})]}),manualSubTab===`image`&&(0,import_jsx_runtime.jsx)(`div`,{className:`space-y-6 animate-fadeIn`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-sm font-medium theme-text-primary block mb-4`,children:`  (Background Image)`}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-xl p-6 transition-colors hover:border-blue-500 bg-gray-50/50 mb-4`,children:manualBgImage?(0,import_jsx_runtime.jsxs)(`div`,{className:`relative w-full aspect-video rounded-lg overflow-hidden shadow-md group bg-gray-100 border border-gray-200`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full transition-all duration-300`,style:{backgroundImage:`url(${manualBgImage})`,backgroundSize:manualBgSize===`repeat`?`25%`:`cover`,backgroundRepeat:manualBgSize===`repeat`?`repeat`:`no-repeat`,backgroundPosition:`center`}}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center`,children:(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setManualBgImage(``),className:`p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors`,children:(0,import_jsx_runtime.jsx)(X,{className:`w-5 h-5`})})})]}):(0,import_jsx_runtime.jsxs)(`label`,{className:`flex flex-col items-center cursor-pointer w-full h-full`,children:[(0,import_jsx_runtime.jsx)(Image$1,{className:`w-10 h-10 text-gray-400 mb-2`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm text-gray-500 font-medium`,children:`  (Click to Upload)`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-gray-400 mt-1`,children:`Supported: PNG, JPG, GIF`}),(0,import_jsx_runtime.jsx)(`input`,{type:`file`,accept:`image/*`,onChange:handleImageUpload,className:`hidden`})]})}),manualBgImage&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-center theme-text-secondary mb-4`,children:`       .`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-sm font-medium theme-text-primary block mb-4`,children:`  (Background Size)`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-4 px-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setManualBgSize(`cover`),className:`flex-1 py-3 text-sm font-medium rounded-xl border transition-all ${manualBgSize===`cover`?`theme-bg-card theme-border border-blue-500 text-blue-500 ring-2 ring-blue-500 ring-offset-2`:`theme-bg-card-secondary border-transparent theme-text-secondary hover:bg-black/5`}`,children:`  (Cover)`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setManualBgSize(`repeat`),className:`flex-1 py-3 text-sm font-medium rounded-xl border transition-all ${manualBgSize===`repeat`?`theme-bg-card theme-border border-blue-500 text-blue-500 ring-2 ring-blue-500 ring-offset-2`:`theme-bg-card-secondary border-transparent theme-text-secondary hover:bg-black/5`}`,children:` (Repeat)`})]})]})]})]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3 mt-8 pt-4 border-t theme-border`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:handleResetManualTheme,className:`flex-1 py-3 rounded-xl font-medium theme-bg-card theme-border border theme-text-secondary hover:bg-black/5 flex items-center justify-center gap-2 transition-colors`,children:[(0,import_jsx_runtime.jsx)(RotateCcw,{className:`w-4 h-4`}),``]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:applyManualTheme,className:`flex-1 py-3 rounded-xl font-bold theme-btn flex items-center justify-center gap-2 shadow-md transition-transform active:scale-95`,children:[(0,import_jsx_runtime.jsx)(Check,{className:`w-4 h-4`}),``]})]})]})]})]})}function ThemeSettings({onBack,onClose}){let[selectedTheme,setSelectedTheme]=(0,import_react.useState)(()=>localStorage.getItem(`theme`)||`default`),[showPersonalSettings,setShowPersonalSettings]=(0,import_react.useState)(!1);(0,import_react.useEffect)(()=>{document.documentElement.setAttribute(`data-theme`,selectedTheme),localStorage.setItem(`theme`,selectedTheme),(async()=>{let token=localStorage.getItem(`accessToken`);if(token&&selectedTheme!==`manual`)try{let fontFamily=localStorage.getItem(`fontFamily`)||`'Noto Sans KR', sans-serif`,fontSize=localStorage.getItem(`fontSize`)||`16px`;await fetch(`/api/setting/theme`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({mode:selectedTheme,font:{family:fontFamily,size:fontSize},manualConfig:null})})}catch(e$4){console.error(e$4)}})()},[selectedTheme]);let themes=[{id:`default`,name:` `,icon:Monitor,description:`    `},{id:`light`,name:` `,icon:Sun,description:`  `},{id:`dark`,name:` `,icon:Moon,description:`   `},{id:`personal`,name:` `,icon:Settings,description:`   `}];return showPersonalSettings?(0,import_jsx_runtime.jsx)(PersonalSettings,{onBack:()=>setShowPersonalSettings(!1),onClose,currentTheme:selectedTheme,onThemeChange:theme=>setSelectedTheme(theme)}):(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col h-full`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onBack,className:`p-2 -ml-2 theme-text-secondary hover:bg-black/5 rounded-full transition-colors`,children:(0,import_jsx_runtime.jsx)(ArrowLeft,{className:`w-6 h-6`})}),(0,import_jsx_runtime.jsx)(`h2`,{className:`text-xl theme-text-primary`,children:` `})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-2 theme-text-secondary hover:bg-black/5 rounded-full transition-colors`,children:(0,import_jsx_runtime.jsx)(X,{className:`w-6 h-6`})})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 gap-3 sm:gap-4`,children:themes.map(theme=>{let isPersonalBtn=theme.id===`personal`,isPersonalActive=isPersonalBtn&&(selectedTheme===`custom`||selectedTheme.startsWith(`custom-`)||selectedTheme===`manual`),isActive$1=theme.id===selectedTheme||isPersonalActive;return(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{isPersonalBtn?setShowPersonalSettings(!0):setSelectedTheme(theme.id)},style:{borderColor:isActive$1?`var(--text-primary)`:`var(--border-color)`},className:`
                                relative flex flex-col items-start p-4 bg-white rounded-xl border-2 transition-all duration-200
                                theme-bg-card
                                ${isActive$1?`bg-black/5`:`hover:bg-black/5`}
                            `,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`
                                p-3 rounded-lg mb-3
                                ${isActive$1?`bg-black/10 theme-text-primary`:`bg-black/5 theme-text-secondary`}
                            `,children:(0,import_jsx_runtime.jsx)(theme.icon,{className:`w-6 h-6`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between w-full mb-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-base sm:text-lg whitespace-nowrap theme-text-primary`,children:theme.name}),isActive$1&&(0,import_jsx_runtime.jsx)(`div`,{className:`theme-btn rounded-full p-1 ml-1 flex-shrink-0`,children:isPersonalBtn?(0,import_jsx_runtime.jsx)(Settings,{className:`w-3 h-3 text-white`}):(0,import_jsx_runtime.jsx)(Check,{className:`w-3 h-3 text-white`})})]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm theme-text-secondary text-left break-keep leading-tight`,children:theme.description})]},theme.id)})})]})}var pages=[{id:`home`,name:`Home`,path:`/home`,icon:House},{id:`post`,name:``,path:`/post`,icon:FileText},{id:`community`,name:``,path:`/community`,icon:Users},{id:`market`,name:``,path:`/market`,icon:SquareCheckBig}];function DefaultPageSettings({onBack,onClose}){let[selectedPath,setSelectedPath]=(0,import_react.useState)(`/home`);(0,import_react.useEffect)(()=>{setSelectedPath(localStorage.getItem(`defaultPage`)||`/home`)},[]);let handleSelect=async path=>{setSelectedPath(path),localStorage.setItem(`defaultPage`,path);let token=localStorage.getItem(`accessToken`);if(token)try{await fetch(`/api/setting/page`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({defaultPage:path})})}catch(e$4){console.error(`Failed to save default page to backend`,e$4)}};return(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[onBack&&(0,import_jsx_runtime.jsx)(`button`,{onClick:onBack,className:`p-2 -ml-2 rounded-full hover:bg-black/5 theme-text-secondary transition-colors`,children:(0,import_jsx_runtime.jsx)(ArrowLeft,{className:`w-6 h-6`})}),(0,import_jsx_runtime.jsx)(`h2`,{className:`text-xl theme-text-primary`,children:`  `})]}),onClose&&(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`theme-text-secondary hover:bg-black/5 rounded-full p-2 transition-colors`,children:(0,import_jsx_runtime.jsx)(X,{className:`w-6 h-6`})})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 gap-3 sm:gap-4`,children:pages.map(page=>{let isSelected=selectedPath===page.path;return(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>handleSelect(page.path),className:`
                                relative flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all duration-200 gap-2
                                ${isSelected?`border-[color:var(--text-primary)] theme-bg-card shadow-md scale-[1.02]`:`theme-border theme-bg-card hover:border-[color:var(--text-secondary)] hover:bg-black/5`}
                            `,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`
                                p-3 rounded-full transition-colors
                                ${isSelected?`theme-btn`:`bg-gray-100 dark:bg-gray-800 text-gray-400`}
                            `,children:(0,import_jsx_runtime.jsx)(page.icon,{size:24})}),(0,import_jsx_runtime.jsx)(`span`,{className:`font-medium ${isSelected?`theme-text-primary font-bold`:`theme-text-secondary`}`,children:page.name}),isSelected&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-3 right-3 theme-text-primary`,children:(0,import_jsx_runtime.jsx)(Check,{size:20})})]},page.id)})}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm theme-text-secondary text-center mt-6`,children:`        .`})]})}function SettingsModal({isOpen,onClose,onMenuEditMode,initialView=`main`}){let navigate=useNavigate(),[currentView,setCurrentView]=(0,import_react.useState)(`main`);if((0,import_react.useEffect)(()=>{isOpen&&setCurrentView(initialView)},[isOpen,initialView]),!isOpen)return null;let handleClose=()=>{setCurrentView(`main`),onClose()};return(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm`,onClick:handleClose,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-modal theme-border max-h-[85vh] w-full max-w-2xl overflow-y-auto rounded-lg border p-4 shadow-xl sm:p-6 transition-colors duration-300`,onClick:e$4=>e$4.stopPropagation(),children:[currentView===`main`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`mb-6 flex items-center justify-between`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`theme-text-primary text-xl`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleClose,className:`theme-text-secondary hover:bg-black/5 rounded-full p-2 transition-colors`,children:(0,import_jsx_runtime.jsx)(X,{className:`w-6 h-6`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setCurrentView(`theme`),className:`group theme-border theme-bg-card hover:border-[color:var(--text-primary)] flex flex-col items-center justify-center gap-3 rounded-lg border-2 py-12 transition-all hover:scale-105 hover:shadow-md`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`theme-text-primary transition-colors`,children:(0,import_jsx_runtime.jsx)(Palette,{className:`w-8 h-8`})}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-primary font-medium`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{onMenuEditMode?.(),handleClose()},className:`group theme-border theme-bg-card hover:border-[color:var(--text-primary)] flex flex-col items-center justify-center gap-3 rounded-lg border-2 py-12 transition-all hover:scale-105 hover:shadow-md`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`theme-text-primary transition-colors`,children:(0,import_jsx_runtime.jsx)(Menu,{className:`w-8 h-8`})}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-primary font-medium`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setCurrentView(`defaultPage`),className:`group theme-border theme-bg-card hover:border-[color:var(--text-primary)] flex flex-col items-center justify-center gap-3 rounded-lg border-2 py-12 transition-all hover:scale-105 hover:shadow-md`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`theme-text-primary transition-colors`,children:(0,import_jsx_runtime.jsx)(House,{className:`w-8 h-8`})}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-primary font-medium`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{navigate(`/home?editMode=widget`),handleClose()},className:`group theme-border theme-bg-card hover:border-[color:var(--text-primary)] flex flex-col items-center justify-center gap-3 rounded-lg border-2 py-12 transition-all hover:scale-105 hover:shadow-md`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`theme-text-primary transition-colors`,children:(0,import_jsx_runtime.jsx)(PanelsTopLeft,{className:`w-8 h-8`})}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-primary font-medium`,children:` `})]})]})]}),currentView===`theme`&&(0,import_jsx_runtime.jsx)(ThemeSettings,{onBack:()=>setCurrentView(`main`),onClose:handleClose}),currentView===`defaultPage`&&(0,import_jsx_runtime.jsx)(DefaultPageSettings,{onBack:()=>setCurrentView(`main`),onClose:handleClose})]})})}var CreditContext=(0,import_react.createContext)(void 0);const CreditProvider=({children:children$1})=>{let[userId,setUserId]=(0,import_react.useState)(null),[credits,setCredits]=(0,import_react.useState)(0),[resetTime,setResetTime]=(0,import_react.useState)(``),refreshCredits=(0,import_react.useCallback)(async()=>{let token=localStorage.getItem(`accessToken`);if(token)try{let response=await fetch(`/api/user/profile`,{headers:{Authorization:`Bearer ${token}`}});if(response.ok){let profile=await response.json();profile.id&&setUserId(String(profile.id)),profile.credits!==void 0&&setCredits(profile.credits)}}catch(e$4){console.error(`Failed to fetch credits`,e$4)}},[]),getKSTDateString=(0,import_react.useCallback)(()=>new Date().toLocaleDateString(`en-US`,{timeZone:`Asia/Seoul`}),[]),getDefaultQuests=(0,import_react.useCallback)(()=>[{id:`login`,description:` `,reward:50,isCompleted:!1,isClaimable:!0,type:`login`},{id:`time_30m`,description:`30  `,reward:50,isCompleted:!1,isClaimable:!1,type:`time`,targetValue:30},{id:`time_1h`,description:`1  `,reward:100,isCompleted:!1,isClaimable:!1,type:`time`,targetValue:60},{id:`widget_play`,description:` `,reward:100,isCompleted:!1,isClaimable:!1,type:`widget`},{id:`write_post`,description:` `,reward:100,isCompleted:!1,isClaimable:!1,type:`post`}],[]),[dailyQuests,setDailyQuests]=(0,import_react.useState)(getDefaultQuests());(0,import_react.useEffect)(()=>{if(!userId){setDailyQuests(getDefaultQuests());return}let todayKST=getKSTDateString(),questKey=`daily_quests_${userId}`,dateKey=`last_quest_date_${userId}`,savedQuests=localStorage.getItem(questKey),lastQuestDate=localStorage.getItem(dateKey);if(savedQuests&&lastQuestDate===todayKST)try{let parsed=JSON.parse(savedQuests);setDailyQuests(getDefaultQuests().map(def=>{let saved=parsed.find(p$3=>p$3.id===def.id);return saved?{...def,isCompleted:saved.isCompleted,isClaimable:saved.isClaimable}:def}))}catch(e$4){console.error(`Failed to parse saved quests`,e$4),setDailyQuests(getDefaultQuests())}else setDailyQuests(getDefaultQuests())},[userId,getKSTDateString,getDefaultQuests]),(0,import_react.useEffect)(()=>{refreshCredits()},[refreshCredits]),(0,import_react.useEffect)(()=>{if(!userId)return;let todayKST=getKSTDateString(),questKey=`daily_quests_${userId}`,dateKey=`last_quest_date_${userId}`;localStorage.setItem(questKey,JSON.stringify(dailyQuests)),localStorage.setItem(dateKey,todayKST)},[dailyQuests,userId,getKSTDateString]),(0,import_react.useEffect)(()=>{let interval$1=setInterval(()=>{let now$4=new Date,utc=now$4.getTime()+now$4.getTimezoneOffset()*6e4,nowKST=new Date(utc+540*6e4),tomorrowKST=new Date(nowKST);tomorrowKST.setHours(24,0,0,0);let diff=tomorrowKST.getTime()-nowKST.getTime(),hours=Math.floor(diff/(1e3*60*60)),minutes=Math.floor(diff%(1e3*60*60)/(1e3*60)),seconds=Math.floor(diff%(1e3*60)/1e3);setResetTime(`${hours.toString().padStart(2,`0`)}:${minutes.toString().padStart(2,`0`)}:${seconds.toString().padStart(2,`0`)}`)},1e3);return()=>clearInterval(interval$1)},[]),(0,import_react.useEffect)(()=>{let checkServerPlayTime=async()=>{let token=localStorage.getItem(`accessToken`);if(token)try{let response=await fetch(`/api/user/playtime`,{headers:{Authorization:`Bearer ${token}`}});if(response.ok){let totalSeconds=await response.json(),totalMinutes=Math.floor(totalSeconds/60);setDailyQuests(prev=>prev.map(q$1=>q$1.type===`time`&&!q$1.isCompleted&&!q$1.isClaimable&&q$1.targetValue&&totalMinutes>=q$1.targetValue?{...q$1,isClaimable:!0}:q$1))}}catch(e$4){console.error(`Failed to check server playtime for quests`,e$4)}},interval$1=setInterval(checkServerPlayTime,6e4);return checkServerPlayTime(),()=>clearInterval(interval$1)},[]);let addCredits=(0,import_react.useCallback)(async amount=>{let token=localStorage.getItem(`accessToken`);if(token)try{let response=await fetch(`/api/credits/add`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({amount})});if(!response.ok)throw Error(`Failed to add credits: ${response.status}`);await refreshCredits()}catch(e$4){throw console.error(`Failed to add credits`,e$4),e$4}},[refreshCredits]),spendCredits=(0,import_react.useCallback)(amount=>credits>=amount?(setCredits(prev=>prev-amount),addCredits(-amount).catch(e$4=>{console.error(`Failed to sync spent credits`,e$4),refreshCredits()}),!0):!1,[credits,addCredits,refreshCredits]),claimQuest=(0,import_react.useCallback)(async questId=>{let token=localStorage.getItem(`accessToken`);if(!token)return;let questType={login:`DAILY_LOGIN`,time_30m:`DAILY_PLAYTIME_30MIN`,time_1h:`DAILY_PLAYTIME_1HR`,write_post:`DAILY_POST_WRITE`,widget_play:`DAILY_TOUCH`}[questId];if(!questType){console.error(`Unknown quest type:`,questId);return}try{let response=await fetch(`/api/quest/claim`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({questType})});if(response.ok)setDailyQuests(prev=>prev.map(q$1=>q$1.id===questId?{...q$1,isCompleted:!0}:q$1)),await refreshCredits();else{let error$1=await response.text();throw console.error(`Quest claim failed:`,error$1),error$1.includes(`Already claimed`)?Error(`   .`):Error(`    . ( )`)}}catch(e$4){throw console.error(`Failed to claim quest`,e$4),e$4}},[refreshCredits]);(0,import_react.useEffect)(()=>{setDailyQuests(prev=>prev.map(q$1=>q$1.type===`login`&&!q$1.isCompleted?{...q$1,isClaimable:!0}:q$1))},[]);let triggerWidgetInteraction=(0,import_react.useCallback)(()=>{setDailyQuests(prev=>prev.map(q$1=>q$1.id===`widget_play`&&!q$1.isCompleted?{...q$1,isClaimable:!0}:q$1))},[]),triggerPostCreation=(0,import_react.useCallback)(()=>{setDailyQuests(prev=>prev.map(q$1=>q$1.id===`write_post`&&!q$1.isCompleted?{...q$1,isClaimable:!0}:q$1))},[]),contextValue=(0,import_react.useMemo)(()=>({userId,credits,addCredits,spendCredits,dailyQuests,claimQuest,resetTime,triggerWidgetInteraction,triggerPostCreation,refreshCredits}),[userId,credits,addCredits,spendCredits,dailyQuests,claimQuest,resetTime,triggerWidgetInteraction,triggerPostCreation,refreshCredits]);return(0,import_jsx_runtime.jsx)(CreditContext.Provider,{value:contextValue,children:children$1})},useCredits=()=>{let context=(0,import_react.useContext)(CreditContext);if(context===void 0)throw Error(`useCredits must be used within a CreditProvider`);return context};var import_react_dom$5=__toESM(require_react_dom(),1),ForcedPinInputModal=({onSubmit,onUnlockRequest,isLocked=!1})=>{let[pin,setPin]=(0,import_react.useState)(``),[isSubmitting,setIsSubmitting]=(0,import_react.useState)(!1),[error$1,setError]=(0,import_react.useState)(null),[statusMessage,setStatusMessage]=(0,import_react.useState)(null),numbers=[1,2,3,4,5,6,7,8,9,0];(0,import_react.useEffect)(()=>{let observer=new MutationObserver(mutations=>{for(let mutation of mutations)mutation.type===`childList`&&Array.from(mutation.removedNodes).some(node=>node instanceof HTMLElement&&node.id===`pin-lock-overlay`)&&window.location.reload()});return observer.observe(document.body,{childList:!0}),()=>observer.disconnect()},[]),(0,import_react.useEffect)(()=>{pin.length===6?handleSubmit(pin):pin.length>0&&error$1&&setError(null)},[pin]);let handleNumberClick=num=>{pin.length<6&&!isSubmitting&&setPin(prev=>prev+num.toString())},handleDelete=()=>{isSubmitting||setPin(prev=>prev.slice(0,-1))},handleRequestCode=async()=>{if(!(!onUnlockRequest||isSubmitting)){setIsSubmitting(!0),setError(null),setStatusMessage(null);try{let err=await onUnlockRequest();err?setError(err):setStatusMessage(` .`)}catch{setError(`    .`)}finally{setIsSubmitting(!0),setTimeout(()=>setIsSubmitting(!1),2e3)}}},handleSubmit=async currentPin=>{setIsSubmitting(!0),setError(null),setStatusMessage(null);try{let errorMsg=await onSubmit(currentPin);errorMsg?(setPin(``),setError(errorMsg),setIsSubmitting(!1)):(setPin(``),setIsSubmitting(!1))}catch(error$2){console.error(`PIN submission error:`,error$2),setPin(``),setError(` .`),setIsSubmitting(!1)}};return import_react_dom$5.createPortal((0,import_jsx_runtime.jsxs)(`div`,{id:`pin-lock-overlay`,className:`fixed inset-0 z-[9999] flex items-center justify-center w-screen h-screen overflow-hidden`,style:{background:`var(--bg-gradient)`,backgroundColor:`var(--bg-solid)`,backgroundSize:`cover`,backgroundRepeat:`no-repeat`,backgroundPosition:`center`},onContextMenu:e$4=>e$4.preventDefault(),children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-white dark:bg-gray-900 -z-10`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 -z-5`,style:{background:`var(--bg-gradient)`,backgroundColor:`var(--bg-solid)`,backgroundSize:`cover`,backgroundRepeat:`no-repeat`,backgroundPosition:`center`}}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full max-w-[28rem] flex flex-col animate-scale-up mx-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`px-4 pb-4 pt-10 text-center`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-3xl font-bold mb-3 theme-text-primary drop-shadow-sm`,children:isLocked?` `:`PIN `}),(0,import_jsx_runtime.jsx)(`p`,{className:`theme-text-secondary mb-2 font-medium opacity-90`,children:isLocked?`     `:`  PIN `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`h-6 mb-2`,children:[error$1&&(0,import_jsx_runtime.jsx)(`p`,{className:`text-red-500 font-bold animate-shake drop-shadow-sm`,children:error$1}),statusMessage&&(0,import_jsx_runtime.jsx)(`p`,{className:`text-green-500 font-bold drop-shadow-sm`,children:statusMessage})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex justify-center gap-3 mb-6 mt-2`,children:[...[,,,,,,]].map((_$1,i$4)=>(0,import_jsx_runtime.jsx)(`div`,{className:`w-12 h-14 rounded-xl flex items-center justify-center text-3xl transition-all duration-200 backdrop-blur-sm ${i$4<pin.length?`bg-[var(--btn-bg)] text-white shadow-lg scale-105 border-transparent`:`bg-white/20 dark:bg-black/20 border-2 theme-border`}`,children:i$4<pin.length&&(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold ${isLocked?``:`translate-y-[0.15em] inline-block`}`,children:isLocked?pin[i$4]:`*`})},i$4))}),isLocked&&(0,import_jsx_runtime.jsx)(`button`,{onClick:handleRequestCode,disabled:isSubmitting,className:`mb-4 px-6 py-2 rounded-full bg-white/10 hover:bg-white/20 theme-text-primary border theme-border transition-all text-sm font-medium disabled:opacity-50`,children:statusMessage?` `:`  `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 grid grid-cols-3 gap-y-4 gap-x-6`,children:[numbers.slice(0,9).map(num=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleNumberClick(num),className:`h-20 w-20 mx-auto flex items-center justify-center text-3xl font-medium rounded-full hover:bg-white/10 transition-all theme-text-primary active:scale-95 active:bg-white/20`,disabled:isSubmitting,children:num},num)),(0,import_jsx_runtime.jsx)(`div`,{className:`col-start-2`,children:(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleNumberClick(0),className:`h-20 w-20 mx-auto flex items-center justify-center text-3xl font-medium rounded-full hover:bg-white/10 transition-all theme-text-primary active:scale-95 active:bg-white/20`,disabled:isSubmitting,children:`0`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`col-start-3`,children:(0,import_jsx_runtime.jsx)(`button`,{onClick:handleDelete,className:`h-20 w-20 mx-auto flex items-center justify-center rounded-full hover:bg-white/10 transition-all theme-text-primary active:scale-95 active:bg-white/20`,disabled:isSubmitting,children:(0,import_jsx_runtime.jsx)(Delete,{className:`w-8 h-8`})})})]})]})]}),document.body)},ForcedPinInputModal_default=ForcedPinInputModal,API_BASE_URL$9=``;const authService={checkPinStatus:async token=>{let res=await fetch(`${API_BASE_URL$9}/api/pin/status`,{headers:{Authorization:`Bearer ${token}`}});if(!res.ok)throw Error(`Failed to check pin status`);return res.json()},checkPinSet:async token=>{let res=await fetch(`${API_BASE_URL$9}/api/pin/check`,{headers:{Authorization:`Bearer ${token}`}});if(!res.ok)throw Error(`Failed to check pin set`);return res.json()},socialLogin:async loginData=>{let response=await fetch(`${API_BASE_URL$9}/auth/social-login`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify(loginData)});if(!response.ok)throw response;return response.json()},localLogin:async(email,password)=>{let response=await fetch(`${API_BASE_URL$9}/auth/login`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({email,password})});if(!response.ok)throw response;return response.json()},join:async joinData=>{let response=await fetch(`${API_BASE_URL$9}/auth/join`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify(joinData)});if(!response.ok)throw response;return response},verifyProfile:async token=>(await fetch(`${API_BASE_URL$9}/api/user/profile`,{headers:{Authorization:`Bearer ${token}`}})).ok};var API_BASE_URL$8=`/api/pin`;const pinService={verifyPin:async(token,pin)=>{let response=await fetch(`${API_BASE_URL$8}/verify`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({pin})});if(!response.ok)throw response;return response.json()},requestUnlock:async token=>(await fetch(`${API_BASE_URL$8}/unlock-request`,{method:`POST`,headers:{Authorization:`Bearer ${token}`}})).ok,verifyUnlockCode:async(token,code)=>{let response=await fetch(`${API_BASE_URL$8}/unlock`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({code})});if(!response.ok)throw response;return response.ok},getStatus:async token=>{let response=await fetch(`${API_BASE_URL$8}/status`,{headers:{Authorization:`Bearer ${token}`}});if(response.ok)return response.json();throw Error(`Failed to get status`)}};var AuthContext=(0,import_react.createContext)(void 0);const AuthProvider=({children:children$1})=>{let[isLoggedIn,setIsLoggedIn]=(0,import_react.useState)(!1),[user,setUser]=(0,import_react.useState)(null),[sessionStartTime,setSessionStartTime]=(0,import_react.useState)(null),[showPinModal,setShowPinModal]=(0,import_react.useState)(!1),[isPinLocked,setIsPinLocked]=(0,import_react.useState)(!1),triggerPinFlow=async token=>{try{let locked=!1;try{locked=(await authService.checkPinStatus(token)).locked}catch{}await authService.checkPinSet(token)===!0&&sessionStorage.getItem(`pin_verified`)!==`true`&&(setIsPinLocked(locked),setShowPinModal(!0))}catch(err){console.error(`PIN check failed`,err)}},parseJwt=token=>{try{return JSON.parse(atob(token.split(`.`)[1]))}catch{return null}};(0,import_react.useEffect)(()=>{let token=localStorage.getItem(`accessToken`);if(token){let payload=parseJwt(token);if(payload){setIsLoggedIn(!0),setUser({email:payload.email});let storedStartTime=localStorage.getItem(`sessionStartTime`);if(storedStartTime)setSessionStartTime(parseInt(storedStartTime,10));else{let now$4=Date.now();setSessionStartTime(now$4),localStorage.setItem(`sessionStartTime`,now$4.toString())}triggerPinFlow(token)}else localStorage.removeItem(`accessToken`),localStorage.removeItem(`sessionStartTime`)}else localStorage.removeItem(`sessionStartTime`);localStorage.removeItem(`isLoggedIn`),localStorage.removeItem(`userEmail`)},[]);let checkPinStatus=async()=>{let token=localStorage.getItem(`accessToken`);if(!token)return!1;try{return await authService.checkPinSet(token)===!0}catch(error$1){console.error(`Failed to check PIN status:`,error$1)}return!1},setLoginState=email=>{setIsLoggedIn(!0),setUser({email});let now$4=Date.now();setSessionStartTime(now$4),localStorage.setItem(`sessionStartTime`,now$4.toString())},socialLogin=async tokenOrData=>{try{let email,providerId,provider=`GOOGLE`,profileData={};if(typeof tokenOrData==`string`){let payload=parseJwt(tokenOrData);if(!payload)throw Error(`Invalid token`);email=payload.email,providerId=payload.sub}else{email=tokenOrData.email,providerId=tokenOrData.providerId,tokenOrData.provider&&(provider=tokenOrData.provider);let{name,nickname,profileImage,gender,birthday,birthyear,mobile}=tokenOrData;profileData={name,nickname,profileImage,gender,birthday,birthyear,mobile}}let loginData={email,provider,providerId},data=await authService.socialLogin(loginData);if(data.accessToken){localStorage.setItem(`accessToken`,data.accessToken),localStorage.removeItem(`isProfileSetupCompleted`);try{await authService.verifyProfile(data.accessToken)?(localStorage.setItem(`isProfileSetupCompleted`,`true`),localStorage.removeItem(`temp_social_profile`)):Object.keys(profileData).length>0&&localStorage.setItem(`temp_social_profile`,JSON.stringify(profileData))}catch(e$4){console.error(`Profile check failed`,e$4)}return setLoginState(email),await triggerPinFlow(data.accessToken),!0}else return console.error(`Login failed: No access token received`),!1}catch(error$1){if(console.error(`Social login error:`,error$1),error$1.status)try{let errorText=await error$1.text();console.error(`Error response:`,errorText)}catch{}return!1}},localLogin=async(email,password)=>{try{let data=await authService.localLogin(email,password);if(data.accessToken){localStorage.setItem(`accessToken`,data.accessToken),localStorage.removeItem(`isProfileSetupCompleted`);try{await authService.verifyProfile(data.accessToken)&&localStorage.setItem(`isProfileSetupCompleted`,`true`)}catch(e$4){console.error(`Profile check failed`,e$4)}return setLoginState(email),await triggerPinFlow(data.accessToken),!0}else return alert(` :    .`),!1}catch(error$1){if(console.error(`Local login error:`,error$1),error$1.status===404)alert(`  .`);else if(error$1.status===401)alert(` .`);else try{let data=await error$1.json();alert(` : `+(data.message||`   .`))}catch{alert(` :    .`)}return!1}},signup=async(email,password)=>{try{let joinData={email,password,provider:`LOCAL`};return await authService.join(joinData),!0}catch(error$1){if(console.error(`Signup error:`,error$1),error$1.status===409)alert(`  .`);else try{let data=await error$1.json();alert(` : `+(data.message||` .`))}catch{alert(` :  .`)}return!1}},logout=()=>{setIsLoggedIn(!1),setUser(null),setSessionStartTime(null),setShowPinModal(!1),setIsPinLocked(!1),localStorage.removeItem(`accessToken`),localStorage.removeItem(`isLoggedIn`),localStorage.removeItem(`userEmail`),localStorage.removeItem(`sessionStartTime`),localStorage.removeItem(`isProfileSetupCompleted`),localStorage.removeItem(`temp_social_profile`),localStorage.removeItem(`my_dashboard_widgets_v3`),localStorage.removeItem(`my_dashboard_grid_size_v4`),sessionStorage.removeItem(`pin_verified`),sessionStorage.removeItem(`session_playtime_seconds`)},handlePinSubmit=async pin=>{let token=localStorage.getItem(`accessToken`);if(!token)return` .`;try{try{return await pinService.verifyPin(token,pin)===!0?(setShowPinModal(!1),setIsPinLocked(!1),sessionStorage.setItem(`pin_verified`,`true`),null):`PIN   .`}catch{try{let status=await pinService.getStatus(token);if(status.locked)return setIsPinLocked(!0),`PIN     . (${status.failureCount}/5)`;if(status.failureCount>0)return`PIN   . (${status.failureCount}/5)`}catch{}return`  .`}}catch(error$1){return console.error(`PIN verification error:`,error$1),`   .`}},handleUnlockRequest=async()=>{let token=localStorage.getItem(`accessToken`);if(!token)return` .`;try{return await pinService.requestUnlock(token)?null:`  .`}catch(error$1){return console.error(`Unlock request error:`,error$1),`   .`}},handleEmailCodeSubmit=async code=>{let token=localStorage.getItem(`accessToken`);if(!token)return` .`;try{try{return await pinService.verifyUnlockCode(token,code),setShowPinModal(!1),setIsPinLocked(!1),sessionStorage.setItem(`pin_verified`,`true`),null}catch{return`  .`}}catch(error$1){return console.error(`Unlock verification error:`,error$1),`   .`}};return(0,import_jsx_runtime.jsxs)(AuthContext.Provider,{value:{isLoggedIn,socialLogin,localLogin,signup,logout,user,sessionStartTime,checkPinStatus,unlockRequest:handleUnlockRequest,unlockVerify:handleEmailCodeSubmit},children:[children$1,showPinModal&&(0,import_jsx_runtime.jsx)(ForcedPinInputModal_default,{onSubmit:isPinLocked?handleEmailCodeSubmit:handlePinSubmit,onUnlockRequest:handleUnlockRequest,isLocked:isPinLocked})]})},useAuth=()=>{let context=(0,import_react.useContext)(AuthContext);if(context===void 0)throw Error(`useAuth must be used within an AuthProvider`);return context};var DEFAULT_ITEMS=[{name:`Home`,path:`/home`,icon:House,id:`/home`},{name:`Post`,path:`/post`,icon:FileText,id:`/post`},{name:`Community`,path:`/community`,icon:Users,id:`/community`},{name:`Market`,path:`/market`,icon:ShoppingBag,id:`/market`}],MenuContext=(0,import_react.createContext)(void 0);const MenuProvider=({children:children$1})=>{let{isLoggedIn}=useAuth(),[menuItems,setMenuItems]=(0,import_react.useState)(DEFAULT_ITEMS),[isEditMode,setIsEditMode]=(0,import_react.useState)(!1),[originalItems,setOriginalItems]=(0,import_react.useState)(DEFAULT_ITEMS),applyMenuOrder=orderIds=>{let reordered=orderIds.map(id$3=>DEFAULT_ITEMS.find(item=>item.id===id$3)).filter(item=>item!==void 0);reordered.length===DEFAULT_ITEMS.length&&(setMenuItems(reordered),setOriginalItems(reordered))};return(0,import_react.useEffect)(()=>{let savedOrder=localStorage.getItem(`menuOrder`);if(savedOrder)try{applyMenuOrder(JSON.parse(savedOrder))}catch(e$4){console.error(`Failed to parse local menu order`,e$4)}},[]),(0,import_react.useEffect)(()=>{(async()=>{if(!isLoggedIn)return;let token=localStorage.getItem(`accessToken`);if(token)try{let response=await fetch(`/api/setting/menu`,{headers:{Authorization:`Bearer ${token}`}});if(response.ok){let data=await response.json();data.menuOrder&&Array.isArray(data.menuOrder)&&(applyMenuOrder(data.menuOrder),localStorage.setItem(`menuOrder`,JSON.stringify(data.menuOrder)))}}catch(e$4){console.error(`Failed to fetch menu order`,e$4)}})()},[isLoggedIn]),(0,import_jsx_runtime.jsx)(MenuContext.Provider,{value:{menuItems,setMenuItems,isEditMode,setIsEditMode:mode=>{mode&&setOriginalItems([...menuItems]),setIsEditMode(mode)},saveMenuOrder:async()=>{let orderIds=menuItems.map(item=>item.id);localStorage.setItem(`menuOrder`,JSON.stringify(orderIds)),setOriginalItems(menuItems),setIsEditMode(!1);let token=localStorage.getItem(`accessToken`);if(token)try{await fetch(`/api/setting/menu`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({menuOrder:orderIds})})}catch(e$4){console.error(`Failed to save menu order to backend`,e$4)}},cancelMenuOrder:()=>{setMenuItems(originalItems),setIsEditMode(!1)},moveMenuItem:(dragIndex,hoverIndex)=>{let updatedItems=[...menuItems],[draggedItem]=updatedItems.splice(dragIndex,1);updatedItems.splice(hoverIndex,0,draggedItem),setMenuItems(updatedItems)}},children:children$1})},useMenu=()=>{let context=(0,import_react.useContext)(MenuContext);if(!context)throw Error(`useMenu must be used within a MenuProvider`);return context};var MenuSettings=()=>{let{saveMenuOrder,cancelMenuOrder}=useMenu();return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col items-start justify-start p-4 md:p-8 text-left animate-fade-in pb-10 md:pb-8 w-full`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`mb-4 md:mb-6 relative`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-16 h-16 md:w-20 md:h-20 rounded-2xl bg-primary/10 flex items-center justify-center theme-text-primary mb-2 md:mb-4 animate-bounce-slow`,children:(0,import_jsx_runtime.jsx)(MousePointerClick,{className:`w-8 h-8 md:w-10 md:h-10`})})}),(0,import_jsx_runtime.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold theme-text-primary mb-2 md:mb-4`,children:`  `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`theme-text-secondary text-base md:text-lg max-w-lg mb-6 md:mb-8 leading-relaxed`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`md:inline hidden`,children:`  `}),(0,import_jsx_runtime.jsx)(`span`,{className:`md:hidden inline`,children:`  `}),` `,(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-primary font-bold`,children:``}),`   .`,(0,import_jsx_runtime.jsx)(`br`,{}),`    .`]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3 md:gap-4`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:cancelMenuOrder,className:`flex items-center gap-2 px-4 py-2 md:px-6 md:py-3 rounded-xl theme-bg-card theme-border border hover:bg-black/5 transition-all duration-300 font-medium text-sm md:text-base theme-text-secondary hover:theme-text-primary hover:shadow-md`,children:[(0,import_jsx_runtime.jsx)(CircleX,{className:`w-4 h-4 md:w-5 md:h-5`}),(0,import_jsx_runtime.jsx)(`span`,{children:``})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:saveMenuOrder,className:`flex items-center gap-2 px-4 py-2 md:px-6 md:py-3 rounded-xl theme-bg-primary text-white shadow-lg hover:opacity-90 transition-all duration-300 font-bold text-sm md:text-base hover:shadow-primary/30 hover:-translate-y-1 border`,children:[(0,import_jsx_runtime.jsx)(Save,{className:`w-4 h-4 md:w-5 md:h-5`}),(0,import_jsx_runtime.jsx)(`span`,{children:` `})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`mt-12 p-4 rounded-xl theme-bg-card-secondary theme-border border max-w-md w-full`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-start gap-2 text-sm theme-text-secondary`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-blue-500 animate-pulse`}),(0,import_jsx_runtime.jsx)(`span`,{className:`md:inline hidden`,children:`      .`}),(0,import_jsx_runtime.jsx)(`span`,{className:`md:hidden inline`,children:`    .`})]})})]})},MenuSettings_default=MenuSettings;function useIsMobile(breakpoint=768){let[isMobile$1,setIsMobile]=(0,import_react.useState)(()=>typeof window<`u`?window.innerWidth<breakpoint:!1);return(0,import_react.useEffect)(()=>{let checkIsMobile=()=>{setIsMobile(window.innerWidth<breakpoint)};return window.addEventListener(`resize`,checkIsMobile),()=>window.removeEventListener(`resize`,checkIsMobile)},[breakpoint]),isMobile$1}const DndContext$1=(0,import_react.createContext)({dragDropManager:void 0});function formatProdErrorMessage$1(code){return`Minified Redux error #`+code+`; visit https://redux.js.org/Errors?code=`+code+` for the full message or use the non-minified dev environment for full errors. `}var $$observable=(function(){return typeof Symbol==`function`&&Symbol.observable||`@@observable`})(),randomString$1=function(){return Math.random().toString(36).substring(7).split(``).join(`.`)},ActionTypes={INIT:`@@redux/INIT`+randomString$1(),REPLACE:`@@redux/REPLACE`+randomString$1(),PROBE_UNKNOWN_ACTION:function(){return`@@redux/PROBE_UNKNOWN_ACTION`+randomString$1()}};function isPlainObject$2(obj){if(typeof obj!=`object`||!obj)return!1;for(var proto=obj;Object.getPrototypeOf(proto)!==null;)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(obj)===proto}function createStore$4(reducer$2,preloadedState,enhancer){var _ref2;if(typeof preloadedState==`function`&&typeof enhancer==`function`||typeof enhancer==`function`&&typeof arguments[3]==`function`)throw Error(formatProdErrorMessage$1(0));if(typeof preloadedState==`function`&&enhancer===void 0&&(enhancer=preloadedState,preloadedState=void 0),enhancer!==void 0){if(typeof enhancer!=`function`)throw Error(formatProdErrorMessage$1(1));return enhancer(createStore$4)(reducer$2,preloadedState)}if(typeof reducer$2!=`function`)throw Error(formatProdErrorMessage$1(2));var currentReducer=reducer$2,currentState=preloadedState,currentListeners=[],nextListeners=currentListeners,isDispatching=!1;function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function getState(){if(isDispatching)throw Error(formatProdErrorMessage$1(3));return currentState}function subscribe(listener){if(typeof listener!=`function`)throw Error(formatProdErrorMessage$1(4));if(isDispatching)throw Error(formatProdErrorMessage$1(5));var isSubscribed=!0;return ensureCanMutateNextListeners(),nextListeners.push(listener),function(){if(isSubscribed){if(isDispatching)throw Error(formatProdErrorMessage$1(6));isSubscribed=!1,ensureCanMutateNextListeners();var index$2=nextListeners.indexOf(listener);nextListeners.splice(index$2,1),currentListeners=null}}}function dispatch$1(action){if(!isPlainObject$2(action))throw Error(formatProdErrorMessage$1(7));if(action.type===void 0)throw Error(formatProdErrorMessage$1(8));if(isDispatching)throw Error(formatProdErrorMessage$1(9));try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}for(var listeners=currentListeners=nextListeners,i$4=0;i$4<listeners.length;i$4++){var listener=listeners[i$4];listener()}return action}function replaceReducer(nextReducer){if(typeof nextReducer!=`function`)throw Error(formatProdErrorMessage$1(10));currentReducer=nextReducer,dispatch$1({type:ActionTypes.REPLACE})}function observable(){var _ref,outerSubscribe=subscribe;return _ref={subscribe:function(observer){if(typeof observer!=`object`||!observer)throw Error(formatProdErrorMessage$1(11));function observeState(){observer.next&&observer.next(getState())}return observeState(),{unsubscribe:outerSubscribe(observeState)}}},_ref[$$observable]=function(){return this},_ref}return dispatch$1({type:ActionTypes.INIT}),_ref2={dispatch:dispatch$1,subscribe,getState,replaceReducer},_ref2[$$observable]=observable,_ref2}function invariant$2(condition,format,...args){if(isProduction$1()&&format===void 0)throw Error(`invariant requires an error message argument`);if(!condition){let error$1;if(format===void 0)error$1=Error(`Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.`);else{let argIndex=0;error$1=Error(format.replace(/%s/g,function(){return args[argIndex++]})),error$1.name=`Invariant Violation`}throw error$1.framesToPop=1,error$1}}function isProduction$1(){return typeof process<`u`&&!0}function get$2(obj,path,defaultValue$3){return path.split(`.`).reduce((a$4,c$3)=>a$4&&a$4[c$3]?a$4[c$3]:defaultValue$3||null,obj)}function without$1(items,item){return items.filter(i$4=>i$4!==item)}function isObject$3(input){return typeof input==`object`}function xor$1(itemsA,itemsB){let map=new Map,insertItem=item=>{map.set(item,map.has(item)?map.get(item)+1:1)};itemsA.forEach(insertItem),itemsB.forEach(insertItem);let result=[];return map.forEach((count,key$1)=>{count===1&&result.push(key$1)}),result}function intersection(itemsA,itemsB){return itemsA.filter(t$4=>itemsB.indexOf(t$4)>-1)}const INIT_COORDS=`dnd-core/INIT_COORDS`,BEGIN_DRAG=`dnd-core/BEGIN_DRAG`,PUBLISH_DRAG_SOURCE=`dnd-core/PUBLISH_DRAG_SOURCE`,HOVER=`dnd-core/HOVER`,DROP=`dnd-core/DROP`,END_DRAG=`dnd-core/END_DRAG`;function setClientOffset(clientOffset,sourceClientOffset){return{type:INIT_COORDS,payload:{sourceClientOffset:sourceClientOffset||null,clientOffset:clientOffset||null}}}var ResetCoordinatesAction={type:INIT_COORDS,payload:{clientOffset:null,sourceClientOffset:null}};function createBeginDrag(manager){return function(sourceIds=[],options$1={publishSource:!0}){let{publishSource=!0,clientOffset,getSourceClientOffset:getSourceClientOffset$1}=options$1,monitor=manager.getMonitor(),registry=manager.getRegistry();manager.dispatch(setClientOffset(clientOffset)),verifyInvariants$1(sourceIds,monitor,registry);let sourceId=getDraggableSource(sourceIds,monitor);if(sourceId==null){manager.dispatch(ResetCoordinatesAction);return}let sourceClientOffset=null;if(clientOffset){if(!getSourceClientOffset$1)throw Error(`getSourceClientOffset must be defined`);verifyGetSourceClientOffsetIsFunction(getSourceClientOffset$1),sourceClientOffset=getSourceClientOffset$1(sourceId)}manager.dispatch(setClientOffset(clientOffset,sourceClientOffset));let item=registry.getSource(sourceId).beginDrag(monitor,sourceId);if(item!=null)return verifyItemIsObject(item),registry.pinSource(sourceId),{type:BEGIN_DRAG,payload:{itemType:registry.getSourceType(sourceId),item,sourceId,clientOffset:clientOffset||null,sourceClientOffset:sourceClientOffset||null,isSourcePublic:!!publishSource}}}}function verifyInvariants$1(sourceIds,monitor,registry){invariant$2(!monitor.isDragging(),`Cannot call beginDrag while dragging.`),sourceIds.forEach(function(sourceId){invariant$2(registry.getSource(sourceId),`Expected sourceIds to be registered.`)})}function verifyGetSourceClientOffsetIsFunction(getSourceClientOffset$1){invariant$2(typeof getSourceClientOffset$1==`function`,`When clientOffset is provided, getSourceClientOffset must be a function.`)}function verifyItemIsObject(item){invariant$2(isObject$3(item),`Item must be an object.`)}function getDraggableSource(sourceIds,monitor){let sourceId=null;for(let i$4=sourceIds.length-1;i$4>=0;i$4--)if(monitor.canDragSource(sourceIds[i$4])){sourceId=sourceIds[i$4];break}return sourceId}function _defineProperty$4(obj,key$1,value){return key$1 in obj?Object.defineProperty(obj,key$1,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key$1]=value,obj}function _objectSpread$4(target){for(var i$4=1;i$4<arguments.length;i$4++){var source=arguments[i$4]==null?{}:arguments[i$4],ownKeys=Object.keys(source);typeof Object.getOwnPropertySymbols==`function`&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key$1){_defineProperty$4(target,key$1,source[key$1])})}return target}function createDrop(manager){return function(options$1={}){let monitor=manager.getMonitor(),registry=manager.getRegistry();verifyInvariants(monitor),getDroppableTargets(monitor).forEach((targetId,index$2)=>{let action={type:DROP,payload:{dropResult:_objectSpread$4({},options$1,determineDropResult(targetId,index$2,registry,monitor))}};manager.dispatch(action)})}}function verifyInvariants(monitor){invariant$2(monitor.isDragging(),`Cannot call drop while not dragging.`),invariant$2(!monitor.didDrop(),`Cannot call drop twice during one drag operation.`)}function determineDropResult(targetId,index$2,registry,monitor){let target=registry.getTarget(targetId),dropResult=target?target.drop(monitor,targetId):void 0;return verifyDropResultType(dropResult),dropResult===void 0&&(dropResult=index$2===0?{}:monitor.getDropResult()),dropResult}function verifyDropResultType(dropResult){invariant$2(dropResult===void 0||isObject$3(dropResult),`Drop result must either be an object or undefined.`)}function getDroppableTargets(monitor){let targetIds=monitor.getTargetIds().filter(monitor.canDropOnTarget,monitor);return targetIds.reverse(),targetIds}function createEndDrag(manager){return function(){let monitor=manager.getMonitor(),registry=manager.getRegistry();verifyIsDragging(monitor);let sourceId=monitor.getSourceId();return sourceId!=null&&(registry.getSource(sourceId,!0).endDrag(monitor,sourceId),registry.unpinSource()),{type:END_DRAG}}}function verifyIsDragging(monitor){invariant$2(monitor.isDragging(),`Cannot call endDrag while not dragging.`)}function matchesType(targetType,draggedItemType){return draggedItemType===null?targetType===null:Array.isArray(targetType)?targetType.some(t$4=>t$4===draggedItemType):targetType===draggedItemType}function createHover(manager){return function(targetIdsArg,{clientOffset}={}){verifyTargetIdsIsArray(targetIdsArg);let targetIds=targetIdsArg.slice(0),monitor=manager.getMonitor(),registry=manager.getRegistry();return removeNonMatchingTargetIds(targetIds,registry,monitor.getItemType()),checkInvariants(targetIds,monitor,registry),hoverAllTargets(targetIds,monitor,registry),{type:HOVER,payload:{targetIds,clientOffset:clientOffset||null}}}}function verifyTargetIdsIsArray(targetIdsArg){invariant$2(Array.isArray(targetIdsArg),`Expected targetIds to be an array.`)}function checkInvariants(targetIds,monitor,registry){invariant$2(monitor.isDragging(),`Cannot call hover while not dragging.`),invariant$2(!monitor.didDrop(),`Cannot call hover after drop.`);for(let i$4=0;i$4<targetIds.length;i$4++){let targetId=targetIds[i$4];invariant$2(targetIds.lastIndexOf(targetId)===i$4,`Expected targetIds to be unique in the passed array.`),invariant$2(registry.getTarget(targetId),`Expected targetIds to be registered.`)}}function removeNonMatchingTargetIds(targetIds,registry,draggedItemType){for(let i$4=targetIds.length-1;i$4>=0;i$4--){let targetId=targetIds[i$4];matchesType(registry.getTargetType(targetId),draggedItemType)||targetIds.splice(i$4,1)}}function hoverAllTargets(targetIds,monitor,registry){targetIds.forEach(function(targetId){registry.getTarget(targetId).hover(monitor,targetId)})}function createPublishDragSource(manager){return function(){if(manager.getMonitor().isDragging())return{type:PUBLISH_DRAG_SOURCE}}}function createDragDropActions(manager){return{beginDrag:createBeginDrag(manager),publishDragSource:createPublishDragSource(manager),hover:createHover(manager),drop:createDrop(manager),endDrag:createEndDrag(manager)}}var DragDropManagerImpl=class{receiveBackend(backend){this.backend=backend}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let manager=this,{dispatch:dispatch$1}=this.store;function bindActionCreator$1(actionCreator){return(...args)=>{let action=actionCreator.apply(manager,args);action!==void 0&&dispatch$1(action)}}let actions=createDragDropActions(this);return Object.keys(actions).reduce((boundActions,key$1)=>{let action=actions[key$1];return boundActions[key$1]=bindActionCreator$1(action),boundActions},{})}dispatch(action){this.store.dispatch(action)}constructor(store,monitor){this.isSetUp=!1,this.handleRefCountChange=()=>{let shouldSetUp=this.store.getState().refCount>0;this.backend&&(shouldSetUp&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!shouldSetUp&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=store,this.monitor=monitor,store.subscribe(this.handleRefCountChange)}};function add$2(a$4,b$3){return{x:a$4.x+b$3.x,y:a$4.y+b$3.y}}function subtract$2(a$4,b$3){return{x:a$4.x-b$3.x,y:a$4.y-b$3.y}}function getSourceClientOffset(state){let{clientOffset,initialClientOffset,initialSourceClientOffset}=state;return!clientOffset||!initialClientOffset||!initialSourceClientOffset?null:subtract$2(add$2(clientOffset,initialSourceClientOffset),initialClientOffset)}function getDifferenceFromInitialOffset(state){let{clientOffset,initialClientOffset}=state;return!clientOffset||!initialClientOffset?null:subtract$2(clientOffset,initialClientOffset)}const NONE=[],ALL=[];NONE.__IS_NONE__=!0,ALL.__IS_ALL__=!0;function areDirty(dirtyIds,handlerIds){return dirtyIds===NONE?!1:dirtyIds===ALL||handlerIds===void 0?!0:intersection(handlerIds,dirtyIds).length>0}var DragDropMonitorImpl=class{subscribeToStateChange(listener,options$1={}){let{handlerIds}=options$1;invariant$2(typeof listener==`function`,`listener must be a function.`),invariant$2(handlerIds===void 0||Array.isArray(handlerIds),`handlerIds, when specified, must be an array of strings.`);let prevStateId=this.store.getState().stateId;return this.store.subscribe(()=>{let state=this.store.getState(),currentStateId=state.stateId;try{currentStateId===prevStateId||currentStateId===prevStateId+1&&!areDirty(state.dirtyHandlerIds,handlerIds)||listener()}finally{prevStateId=currentStateId}})}subscribeToOffsetChange(listener){invariant$2(typeof listener==`function`,`listener must be a function.`);let previousState=this.store.getState().dragOffset;return this.store.subscribe(()=>{let nextState=this.store.getState().dragOffset;nextState!==previousState&&(previousState=nextState,listener())})}canDragSource(sourceId){if(!sourceId)return!1;let source=this.registry.getSource(sourceId);return invariant$2(source,`Expected to find a valid source. sourceId=${sourceId}`),this.isDragging()?!1:source.canDrag(this,sourceId)}canDropOnTarget(targetId){if(!targetId)return!1;let target=this.registry.getTarget(targetId);return invariant$2(target,`Expected to find a valid target. targetId=${targetId}`),!this.isDragging()||this.didDrop()?!1:matchesType(this.registry.getTargetType(targetId),this.getItemType())&&target.canDrop(this,targetId)}isDragging(){return!!this.getItemType()}isDraggingSource(sourceId){if(!sourceId)return!1;let source=this.registry.getSource(sourceId,!0);return invariant$2(source,`Expected to find a valid source. sourceId=${sourceId}`),!this.isDragging()||!this.isSourcePublic()||this.registry.getSourceType(sourceId)!==this.getItemType()?!1:source.isDragging(this,sourceId)}isOverTarget(targetId,options$1={shallow:!1}){if(!targetId)return!1;let{shallow}=options$1;if(!this.isDragging())return!1;let targetType=this.registry.getTargetType(targetId),draggedItemType=this.getItemType();if(draggedItemType&&!matchesType(targetType,draggedItemType))return!1;let targetIds=this.getTargetIds();if(!targetIds.length)return!1;let index$2=targetIds.indexOf(targetId);return shallow?index$2===targetIds.length-1:index$2>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return getSourceClientOffset(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return getDifferenceFromInitialOffset(this.store.getState().dragOffset)}constructor(store,registry){this.store=store,this.registry=registry}},scope=typeof global<`u`?global:self,BrowserMutationObserver=scope.MutationObserver||scope.WebKitMutationObserver;function makeRequestCallFromTimer(callback){return function(){let timeoutHandle=setTimeout(handleTimer,0),intervalHandle=setInterval(handleTimer,50);function handleTimer(){clearTimeout(timeoutHandle),clearInterval(intervalHandle),callback()}}}function makeRequestCallFromMutationObserver(callback){let toggle=1,observer=new BrowserMutationObserver(callback),node=document.createTextNode(``);return observer.observe(node,{characterData:!0}),function(){toggle=-toggle,node.data=toggle}}const makeRequestCall=typeof BrowserMutationObserver==`function`?makeRequestCallFromMutationObserver:makeRequestCallFromTimer;var AsapQueue=class{enqueueTask(task){let{queue:q$1,requestFlush}=this;q$1.length||(requestFlush(),this.flushing=!0),q$1[q$1.length]=task}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:q$1}=this;for(;this.index<q$1.length;){let currentIndex=this.index;if(this.index++,q$1[currentIndex].call(),this.index>this.capacity){for(let scan=0,newLength=q$1.length-this.index;scan<newLength;scan++)q$1[scan]=q$1[scan+this.index];q$1.length-=this.index,this.index=0}}q$1.length=0,this.index=0,this.flushing=!1},this.registerPendingError=err=>{this.pendingErrors.push(err),this.requestErrorThrow()},this.requestFlush=makeRequestCall(this.flush),this.requestErrorThrow=makeRequestCallFromTimer(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},RawTask=class{call(){try{this.task&&this.task()}catch(error$1){this.onError(error$1)}finally{this.task=null,this.release(this)}}constructor(onError,release){this.onError=onError,this.release=release,this.task=null}},TaskFactory=class{create(task){let tasks=this.freeTasks,t1=tasks.length?tasks.pop():new RawTask(this.onError,t$4=>tasks[tasks.length]=t$4);return t1.task=task,t1}constructor(onError){this.onError=onError,this.freeTasks=[]}},asapQueue=new AsapQueue,taskFactory=new TaskFactory(asapQueue.registerPendingError);function asap$1(task){asapQueue.enqueueTask(taskFactory.create(task))}const ADD_SOURCE=`dnd-core/ADD_SOURCE`,ADD_TARGET=`dnd-core/ADD_TARGET`,REMOVE_SOURCE=`dnd-core/REMOVE_SOURCE`,REMOVE_TARGET=`dnd-core/REMOVE_TARGET`;function addSource(sourceId){return{type:ADD_SOURCE,payload:{sourceId}}}function addTarget(targetId){return{type:ADD_TARGET,payload:{targetId}}}function removeSource(sourceId){return{type:REMOVE_SOURCE,payload:{sourceId}}}function removeTarget(targetId){return{type:REMOVE_TARGET,payload:{targetId}}}function validateSourceContract(source){invariant$2(typeof source.canDrag==`function`,`Expected canDrag to be a function.`),invariant$2(typeof source.beginDrag==`function`,`Expected beginDrag to be a function.`),invariant$2(typeof source.endDrag==`function`,`Expected endDrag to be a function.`)}function validateTargetContract(target){invariant$2(typeof target.canDrop==`function`,`Expected canDrop to be a function.`),invariant$2(typeof target.hover==`function`,`Expected hover to be a function.`),invariant$2(typeof target.drop==`function`,`Expected beginDrag to be a function.`)}function validateType(type,allowArray){if(allowArray&&Array.isArray(type)){type.forEach(t$4=>validateType(t$4,!1));return}invariant$2(typeof type==`string`||typeof type==`symbol`,allowArray?`Type can only be a string, a symbol, or an array of either.`:`Type can only be a string or a symbol.`)}var HandlerRole;(function(HandlerRole$1){HandlerRole$1.SOURCE=`SOURCE`,HandlerRole$1.TARGET=`TARGET`})(HandlerRole||={});var nextUniqueId=0;function getNextUniqueId(){return nextUniqueId++}function getNextHandlerId(role){let id$3=getNextUniqueId().toString();switch(role){case HandlerRole.SOURCE:return`S${id$3}`;case HandlerRole.TARGET:return`T${id$3}`;default:throw Error(`Unknown Handler Role: ${role}`)}}function parseRoleFromHandlerId(handlerId){switch(handlerId[0]){case`S`:return HandlerRole.SOURCE;case`T`:return HandlerRole.TARGET;default:throw Error(`Cannot parse handler ID: ${handlerId}`)}}function mapContainsValue(map,searchValue){let entries=map.entries(),isDone=!1;do{let{done,value:[,value]}=entries.next();if(value===searchValue)return!0;isDone=!!done}while(!isDone);return!1}var HandlerRegistryImpl=class{addSource(type,source){validateType(type),validateSourceContract(source);let sourceId=this.addHandler(HandlerRole.SOURCE,type,source);return this.store.dispatch(addSource(sourceId)),sourceId}addTarget(type,target){validateType(type,!0),validateTargetContract(target);let targetId=this.addHandler(HandlerRole.TARGET,type,target);return this.store.dispatch(addTarget(targetId)),targetId}containsHandler(handler){return mapContainsValue(this.dragSources,handler)||mapContainsValue(this.dropTargets,handler)}getSource(sourceId,includePinned=!1){return invariant$2(this.isSourceId(sourceId),`Expected a valid source ID.`),includePinned&&sourceId===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(sourceId)}getTarget(targetId){return invariant$2(this.isTargetId(targetId),`Expected a valid target ID.`),this.dropTargets.get(targetId)}getSourceType(sourceId){return invariant$2(this.isSourceId(sourceId),`Expected a valid source ID.`),this.types.get(sourceId)}getTargetType(targetId){return invariant$2(this.isTargetId(targetId),`Expected a valid target ID.`),this.types.get(targetId)}isSourceId(handlerId){return parseRoleFromHandlerId(handlerId)===HandlerRole.SOURCE}isTargetId(handlerId){return parseRoleFromHandlerId(handlerId)===HandlerRole.TARGET}removeSource(sourceId){invariant$2(this.getSource(sourceId),`Expected an existing source.`),this.store.dispatch(removeSource(sourceId)),asap$1(()=>{this.dragSources.delete(sourceId),this.types.delete(sourceId)})}removeTarget(targetId){invariant$2(this.getTarget(targetId),`Expected an existing target.`),this.store.dispatch(removeTarget(targetId)),this.dropTargets.delete(targetId),this.types.delete(targetId)}pinSource(sourceId){let source=this.getSource(sourceId);invariant$2(source,`Expected an existing source.`),this.pinnedSourceId=sourceId,this.pinnedSource=source}unpinSource(){invariant$2(this.pinnedSource,`No source is pinned at the time.`),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(role,type,handler){let id$3=getNextHandlerId(role);return this.types.set(id$3,type),role===HandlerRole.SOURCE?this.dragSources.set(id$3,handler):role===HandlerRole.TARGET&&this.dropTargets.set(id$3,handler),id$3}constructor(store){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=store}};const strictEquality=(a$4,b$3)=>a$4===b$3;function areCoordsEqual(offsetA,offsetB){return!offsetA&&!offsetB?!0:!offsetA||!offsetB?!1:offsetA.x===offsetB.x&&offsetA.y===offsetB.y}function areArraysEqual(a$4,b$3,isEqual$3=strictEquality){if(a$4.length!==b$3.length)return!1;for(let i$4=0;i$4<a$4.length;++i$4)if(!isEqual$3(a$4[i$4],b$3[i$4]))return!1;return!0}function reduce$1(_state=NONE,action){switch(action.type){case HOVER:break;case ADD_SOURCE:case ADD_TARGET:case REMOVE_TARGET:case REMOVE_SOURCE:return NONE;case BEGIN_DRAG:case PUBLISH_DRAG_SOURCE:case END_DRAG:case DROP:default:return ALL}let{targetIds=[],prevTargetIds=[]}=action.payload,result=xor$1(targetIds,prevTargetIds);if(!(result.length>0||!areArraysEqual(targetIds,prevTargetIds)))return NONE;let prevInnermostTargetId=prevTargetIds[prevTargetIds.length-1],innermostTargetId=targetIds[targetIds.length-1];return prevInnermostTargetId!==innermostTargetId&&(prevInnermostTargetId&&result.push(prevInnermostTargetId),innermostTargetId&&result.push(innermostTargetId)),result}function _defineProperty$3(obj,key$1,value){return key$1 in obj?Object.defineProperty(obj,key$1,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key$1]=value,obj}function _objectSpread$3(target){for(var i$4=1;i$4<arguments.length;i$4++){var source=arguments[i$4]==null?{}:arguments[i$4],ownKeys=Object.keys(source);typeof Object.getOwnPropertySymbols==`function`&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key$1){_defineProperty$3(target,key$1,source[key$1])})}return target}var initialState$1={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function reduce$2(state=initialState$1,action){let{payload}=action;switch(action.type){case INIT_COORDS:case BEGIN_DRAG:return{initialSourceClientOffset:payload.sourceClientOffset,initialClientOffset:payload.clientOffset,clientOffset:payload.clientOffset};case HOVER:return areCoordsEqual(state.clientOffset,payload.clientOffset)?state:_objectSpread$3({},state,{clientOffset:payload.clientOffset});case END_DRAG:case DROP:return initialState$1;default:return state}}function _defineProperty$2(obj,key$1,value){return key$1 in obj?Object.defineProperty(obj,key$1,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key$1]=value,obj}function _objectSpread$2(target){for(var i$4=1;i$4<arguments.length;i$4++){var source=arguments[i$4]==null?{}:arguments[i$4],ownKeys=Object.keys(source);typeof Object.getOwnPropertySymbols==`function`&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key$1){_defineProperty$2(target,key$1,source[key$1])})}return target}var initialState={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function reduce$3(state=initialState,action){let{payload}=action;switch(action.type){case BEGIN_DRAG:return _objectSpread$2({},state,{itemType:payload.itemType,item:payload.item,sourceId:payload.sourceId,isSourcePublic:payload.isSourcePublic,dropResult:null,didDrop:!1});case PUBLISH_DRAG_SOURCE:return _objectSpread$2({},state,{isSourcePublic:!0});case HOVER:return _objectSpread$2({},state,{targetIds:payload.targetIds});case REMOVE_TARGET:return state.targetIds.indexOf(payload.targetId)===-1?state:_objectSpread$2({},state,{targetIds:without$1(state.targetIds,payload.targetId)});case DROP:return _objectSpread$2({},state,{dropResult:payload.dropResult,didDrop:!0,targetIds:[]});case END_DRAG:return _objectSpread$2({},state,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return state}}function reduce$4(state=0,action){switch(action.type){case ADD_SOURCE:case ADD_TARGET:return state+1;case REMOVE_SOURCE:case REMOVE_TARGET:return state-1;default:return state}}function reduce$5(state=0){return state+1}function _defineProperty$1(obj,key$1,value){return key$1 in obj?Object.defineProperty(obj,key$1,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key$1]=value,obj}function _objectSpread$1(target){for(var i$4=1;i$4<arguments.length;i$4++){var source=arguments[i$4]==null?{}:arguments[i$4],ownKeys=Object.keys(source);typeof Object.getOwnPropertySymbols==`function`&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key$1){_defineProperty$1(target,key$1,source[key$1])})}return target}function reduce(state={},action){return{dirtyHandlerIds:reduce$1(state.dirtyHandlerIds,{type:action.type,payload:_objectSpread$1({},action.payload,{prevTargetIds:get$2(state,`dragOperation.targetIds`,[])})}),dragOffset:reduce$2(state.dragOffset,action),refCount:reduce$4(state.refCount,action),dragOperation:reduce$3(state.dragOperation,action),stateId:reduce$5(state.stateId)}}function createDragDropManager(backendFactory,globalContext=void 0,backendOptions$1={},debugMode=!1){let store=makeStoreInstance(debugMode),manager=new DragDropManagerImpl(store,new DragDropMonitorImpl(store,new HandlerRegistryImpl(store))),backend=backendFactory(manager,globalContext,backendOptions$1);return manager.receiveBackend(backend),manager}function makeStoreInstance(debugMode){let reduxDevTools=typeof window<`u`&&window.__REDUX_DEVTOOLS_EXTENSION__;return createStore$4(reduce,debugMode&&reduxDevTools&&reduxDevTools({name:`dnd-core`,instanceId:`dnd-core`}))}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded),key$1,i$4;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i$4=0;i$4<sourceSymbolKeys.length;i$4++)key$1=sourceSymbolKeys[i$4],!(excluded.indexOf(key$1)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key$1)&&(target[key$1]=source[key$1])}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={},sourceKeys=Object.keys(source),key$1,i$4;for(i$4=0;i$4<sourceKeys.length;i$4++)key$1=sourceKeys[i$4],!(excluded.indexOf(key$1)>=0)&&(target[key$1]=source[key$1]);return target}var refCount=0,INSTANCE_SYM=Symbol.for(`__REACT_DND_CONTEXT_INSTANCE__`),DndProvider=(0,import_react.memo)(function(_param){var{children:children$1}=_param;let[manager,isGlobalInstance]=getDndContextValue(_objectWithoutProperties(_param,[`children`]));return(0,import_react.useEffect)(()=>{if(isGlobalInstance){let context=getGlobalContext();return++refCount,()=>{--refCount===0&&(context[INSTANCE_SYM]=null)}}},[]),(0,import_jsx_runtime.jsx)(DndContext$1.Provider,{value:manager,children:children$1})});function getDndContextValue(props){return`manager`in props?[{dragDropManager:props.manager},!1]:[createSingletonDndContext(props.backend,props.context,props.options,props.debugMode),!props.context]}function createSingletonDndContext(backend,context=getGlobalContext(),options$1,debugMode){let ctx=context;return ctx[INSTANCE_SYM]||(ctx[INSTANCE_SYM]={dragDropManager:createDragDropManager(backend,context,options$1,debugMode)}),ctx[INSTANCE_SYM]}function getGlobalContext(){return typeof global<`u`?global:window}var require_fast_deep_equal=__commonJSMin(((exports,module)=>{module.exports=function equal$1(a$4,b$3){if(a$4===b$3)return!0;if(a$4&&b$3&&typeof a$4==`object`&&typeof b$3==`object`){if(a$4.constructor!==b$3.constructor)return!1;var length,i$4,keys;if(Array.isArray(a$4)){if(length=a$4.length,length!=b$3.length)return!1;for(i$4=length;i$4--!==0;)if(!equal$1(a$4[i$4],b$3[i$4]))return!1;return!0}if(a$4.constructor===RegExp)return a$4.source===b$3.source&&a$4.flags===b$3.flags;if(a$4.valueOf!==Object.prototype.valueOf)return a$4.valueOf()===b$3.valueOf();if(a$4.toString!==Object.prototype.toString)return a$4.toString()===b$3.toString();if(keys=Object.keys(a$4),length=keys.length,length!==Object.keys(b$3).length)return!1;for(i$4=length;i$4--!==0;)if(!Object.prototype.hasOwnProperty.call(b$3,keys[i$4]))return!1;for(i$4=length;i$4--!==0;){var key$1=keys[i$4];if(!equal$1(a$4[key$1],b$3[key$1]))return!1}return!0}return a$4!==a$4&&b$3!==b$3}}));const useIsomorphicLayoutEffect$5=typeof window<`u`?import_react.useLayoutEffect:import_react.useEffect;var import_fast_deep_equal=__toESM(require_fast_deep_equal(),1);function useCollector(monitor,collect,onUpdate){let[collected,setCollected]=(0,import_react.useState)(()=>collect(monitor)),updateCollected=(0,import_react.useCallback)(()=>{let nextValue=collect(monitor);(0,import_fast_deep_equal.default)(collected,nextValue)||(setCollected(nextValue),onUpdate&&onUpdate())},[collected,monitor,onUpdate]);return useIsomorphicLayoutEffect$5(updateCollected),[collected,updateCollected]}function useMonitorOutput(monitor,collect,onCollect){let[collected,updateCollected]=useCollector(monitor,collect,onCollect);return useIsomorphicLayoutEffect$5(function(){let handlerId=monitor.getHandlerId();if(handlerId!=null)return monitor.subscribeToStateChange(updateCollected,{handlerIds:[handlerId]})},[monitor,updateCollected]),collected}function useCollectedProps(collector,monitor,connector){return useMonitorOutput(monitor,collector||(()=>({})),()=>connector.reconnect())}function useOptionalFactory(arg,deps){let memoDeps=[...deps||[]];return deps==null&&typeof arg!=`function`&&memoDeps.push(arg),(0,import_react.useMemo)(()=>typeof arg==`function`?arg():arg,memoDeps)}function useConnectDragSource(connector){return(0,import_react.useMemo)(()=>connector.hooks.dragSource(),[connector])}function useConnectDragPreview(connector){return(0,import_react.useMemo)(()=>connector.hooks.dragPreview(),[connector])}var isCallingCanDrag=!1,isCallingIsDragging=!1,DragSourceMonitorImpl=class{receiveHandlerId(sourceId){this.sourceId=sourceId}getHandlerId(){return this.sourceId}canDrag(){invariant$2(!isCallingCanDrag,`You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor`);try{return isCallingCanDrag=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{isCallingCanDrag=!1}}isDragging(){if(!this.sourceId)return!1;invariant$2(!isCallingIsDragging,`You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor`);try{return isCallingIsDragging=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{isCallingIsDragging=!1}}subscribeToStateChange(listener,options$1){return this.internalMonitor.subscribeToStateChange(listener,options$1)}isDraggingSource(sourceId){return this.internalMonitor.isDraggingSource(sourceId)}isOverTarget(targetId,options$1){return this.internalMonitor.isOverTarget(targetId,options$1)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(listener){return this.internalMonitor.subscribeToOffsetChange(listener)}canDragSource(sourceId){return this.internalMonitor.canDragSource(sourceId)}canDropOnTarget(targetId){return this.internalMonitor.canDropOnTarget(targetId)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(manager){this.sourceId=null,this.internalMonitor=manager.getMonitor()}},isCallingCanDrop=!1,DropTargetMonitorImpl=class{receiveHandlerId(targetId){this.targetId=targetId}getHandlerId(){return this.targetId}subscribeToStateChange(listener,options$1){return this.internalMonitor.subscribeToStateChange(listener,options$1)}canDrop(){if(!this.targetId)return!1;invariant$2(!isCallingCanDrop,`You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor`);try{return isCallingCanDrop=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{isCallingCanDrop=!1}}isOver(options$1){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,options$1):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(manager){this.targetId=null,this.internalMonitor=manager.getMonitor()}};function registerTarget(type,target,manager){let registry=manager.getRegistry(),targetId=registry.addTarget(type,target);return[targetId,()=>registry.removeTarget(targetId)]}function registerSource(type,source,manager){let registry=manager.getRegistry(),sourceId=registry.addSource(type,source);return[sourceId,()=>registry.removeSource(sourceId)]}function shallowEqual$1(objA,objB,compare$1,compareContext){let compareResult=compare$1?compare$1.call(compareContext,objA,objB):void 0;if(compareResult!==void 0)return!!compareResult;if(objA===objB)return!0;if(typeof objA!=`object`||!objA||typeof objB!=`object`||!objB)return!1;let keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;let bHasOwnProperty=Object.prototype.hasOwnProperty.bind(objB);for(let idx=0;idx<keysA.length;idx++){let key$1=keysA[idx];if(!bHasOwnProperty(key$1))return!1;let valueA=objA[key$1],valueB=objB[key$1];if(compareResult=compare$1?compare$1.call(compareContext,valueA,valueB,key$1):void 0,compareResult===!1||compareResult===void 0&&valueA!==valueB)return!1}return!0}function isRef(obj){return typeof obj==`object`&&!!obj&&Object.prototype.hasOwnProperty.call(obj,`current`)}function throwIfCompositeComponentElement(element){if(typeof element.type==`string`)return;let displayName=element.type.displayName||element.type.name||`the component`;throw Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${displayName} into a <div>, or turn it into a drag source or a drop target itself.`)}function wrapHookToRecognizeElement(hook){return(elementOrNode=null,options$1=null)=>{if(!(0,import_react.isValidElement)(elementOrNode)){let node=elementOrNode;return hook(node,options$1),node}let element=elementOrNode;return throwIfCompositeComponentElement(element),cloneWithRef(element,options$1?node=>hook(node,options$1):hook)}}function wrapConnectorHooks(hooks){let wrappedHooks={};return Object.keys(hooks).forEach(key$1=>{let hook=hooks[key$1];if(key$1.endsWith(`Ref`))wrappedHooks[key$1]=hooks[key$1];else{let wrappedHook=wrapHookToRecognizeElement(hook);wrappedHooks[key$1]=()=>wrappedHook}}),wrappedHooks}function setRef$1(ref,node){typeof ref==`function`?ref(node):ref.current=node}function cloneWithRef(element,newRef){let previousRef=element.ref;return invariant$2(typeof previousRef!=`string`,`Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs`),previousRef?(0,import_react.cloneElement)(element,{ref:node=>{setRef$1(previousRef,node),setRef$1(newRef,node)}}):(0,import_react.cloneElement)(element,{ref:newRef})}var SourceConnector=class{receiveHandlerId(newHandlerId){this.handlerId!==newHandlerId&&(this.handlerId=newHandlerId,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(options$1){this.dragSourceOptionsInternal=options$1}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(options$1){this.dragPreviewOptionsInternal=options$1}reconnect(){let didChange=this.reconnectDragSource();this.reconnectDragPreview(didChange)}reconnectDragSource(){let dragSource=this.dragSource,didChange=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return didChange&&this.disconnectDragSource(),this.handlerId?dragSource?(didChange&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=dragSource,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,dragSource,this.dragSourceOptions)),didChange):(this.lastConnectedDragSource=dragSource,didChange):didChange}reconnectDragPreview(forceDidChange=!1){let dragPreview=this.dragPreview,didChange=forceDidChange||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(didChange&&this.disconnectDragPreview(),this.handlerId){if(!dragPreview){this.lastConnectedDragPreview=dragPreview;return}didChange&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=dragPreview,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,dragPreview,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!shallowEqual$1(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!shallowEqual$1(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&=(this.dragSourceUnsubscribe(),void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(backend){this.hooks=wrapConnectorHooks({dragSource:(node,options$1)=>{this.clearDragSource(),this.dragSourceOptions=options$1||null,isRef(node)?this.dragSourceRef=node:this.dragSourceNode=node,this.reconnectDragSource()},dragPreview:(node,options$1)=>{this.clearDragPreview(),this.dragPreviewOptions=options$1||null,isRef(node)?this.dragPreviewRef=node:this.dragPreviewNode=node,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=backend}},TargetConnector=class{get connectTarget(){return this.dropTarget}reconnect(){let didChange=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();didChange&&this.disconnectDropTarget();let dropTarget=this.dropTarget;if(this.handlerId){if(!dropTarget){this.lastConnectedDropTarget=dropTarget;return}didChange&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=dropTarget,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,dropTarget,this.dropTargetOptions))}}receiveHandlerId(newHandlerId){newHandlerId!==this.handlerId&&(this.handlerId=newHandlerId,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(options$1){this.dropTargetOptionsInternal=options$1}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!shallowEqual$1(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&=(this.unsubscribeDropTarget(),void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(backend){this.hooks=wrapConnectorHooks({dropTarget:(node,options$1)=>{this.clearDropTarget(),this.dropTargetOptions=options$1,isRef(node)?this.dropTargetRef=node:this.dropTargetNode=node,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=backend}};function useDragDropManager(){let{dragDropManager}=(0,import_react.useContext)(DndContext$1);return invariant$2(dragDropManager!=null,`Expected drag drop context`),dragDropManager}function useDragSourceConnector(dragSourceOptions,dragPreviewOptions){let manager=useDragDropManager(),connector=(0,import_react.useMemo)(()=>new SourceConnector(manager.getBackend()),[manager]);return useIsomorphicLayoutEffect$5(()=>(connector.dragSourceOptions=dragSourceOptions||null,connector.reconnect(),()=>connector.disconnectDragSource()),[connector,dragSourceOptions]),useIsomorphicLayoutEffect$5(()=>(connector.dragPreviewOptions=dragPreviewOptions||null,connector.reconnect(),()=>connector.disconnectDragPreview()),[connector,dragPreviewOptions]),connector}function useDragSourceMonitor(){let manager=useDragDropManager();return(0,import_react.useMemo)(()=>new DragSourceMonitorImpl(manager),[manager])}var DragSourceImpl=class{beginDrag(){let spec=this.spec,monitor=this.monitor,result=null;return result=typeof spec.item==`object`?spec.item:typeof spec.item==`function`?spec.item(monitor):{},result??null}canDrag(){let spec=this.spec,monitor=this.monitor;return typeof spec.canDrag==`boolean`?spec.canDrag:typeof spec.canDrag==`function`?spec.canDrag(monitor):!0}isDragging(globalMonitor,target){let spec=this.spec,monitor=this.monitor,{isDragging:isDragging$2}=spec;return isDragging$2?isDragging$2(monitor):target===globalMonitor.getSourceId()}endDrag(){let spec=this.spec,monitor=this.monitor,connector=this.connector,{end:end$1}=spec;end$1&&end$1(monitor.getItem(),monitor),connector.reconnect()}constructor(spec,monitor,connector){this.spec=spec,this.monitor=monitor,this.connector=connector}};function useDragSource(spec,monitor,connector){let handler=(0,import_react.useMemo)(()=>new DragSourceImpl(spec,monitor,connector),[monitor,connector]);return(0,import_react.useEffect)(()=>{handler.spec=spec},[spec]),handler}function useDragType(spec){return(0,import_react.useMemo)(()=>{let result=spec.type;return invariant$2(result!=null,`spec.type must be defined`),result},[spec])}function useRegisteredDragSource(spec,monitor,connector){let manager=useDragDropManager(),handler=useDragSource(spec,monitor,connector),itemType=useDragType(spec);useIsomorphicLayoutEffect$5(function(){if(itemType!=null){let[handlerId,unregister]=registerSource(itemType,handler,manager);return monitor.receiveHandlerId(handlerId),connector.receiveHandlerId(handlerId),unregister}},[manager,monitor,connector,handler,itemType])}function useDrag(specArg,deps){let spec=useOptionalFactory(specArg,deps);invariant$2(!spec.begin,`useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)`);let monitor=useDragSourceMonitor(),connector=useDragSourceConnector(spec.options,spec.previewOptions);return useRegisteredDragSource(spec,monitor,connector),[useCollectedProps(spec.collect,monitor,connector),useConnectDragSource(connector),useConnectDragPreview(connector)]}function useDragLayer(collect){let monitor=useDragDropManager().getMonitor(),[collected,updateCollected]=useCollector(monitor,collect);return(0,import_react.useEffect)(()=>monitor.subscribeToOffsetChange(updateCollected)),(0,import_react.useEffect)(()=>monitor.subscribeToStateChange(updateCollected)),collected}function useConnectDropTarget(connector){return(0,import_react.useMemo)(()=>connector.hooks.dropTarget(),[connector])}function useDropTargetConnector(options$1){let manager=useDragDropManager(),connector=(0,import_react.useMemo)(()=>new TargetConnector(manager.getBackend()),[manager]);return useIsomorphicLayoutEffect$5(()=>(connector.dropTargetOptions=options$1||null,connector.reconnect(),()=>connector.disconnectDropTarget()),[options$1]),connector}function useDropTargetMonitor(){let manager=useDragDropManager();return(0,import_react.useMemo)(()=>new DropTargetMonitorImpl(manager),[manager])}function useAccept(spec){let{accept}=spec;return(0,import_react.useMemo)(()=>(invariant$2(spec.accept!=null,`accept must be defined`),Array.isArray(accept)?accept:[accept]),[accept])}var DropTargetImpl=class{canDrop(){let spec=this.spec,monitor=this.monitor;return spec.canDrop?spec.canDrop(monitor.getItem(),monitor):!0}hover(){let spec=this.spec,monitor=this.monitor;spec.hover&&spec.hover(monitor.getItem(),monitor)}drop(){let spec=this.spec,monitor=this.monitor;if(spec.drop)return spec.drop(monitor.getItem(),monitor)}constructor(spec,monitor){this.spec=spec,this.monitor=monitor}};function useDropTarget(spec,monitor){let dropTarget=(0,import_react.useMemo)(()=>new DropTargetImpl(spec,monitor),[monitor]);return(0,import_react.useEffect)(()=>{dropTarget.spec=spec},[spec]),dropTarget}function useRegisteredDropTarget(spec,monitor,connector){let manager=useDragDropManager(),dropTarget=useDropTarget(spec,monitor),accept=useAccept(spec);useIsomorphicLayoutEffect$5(function(){let[handlerId,unregister]=registerTarget(accept,dropTarget,manager);return monitor.receiveHandlerId(handlerId),connector.receiveHandlerId(handlerId),unregister},[manager,monitor,dropTarget,connector,accept.map(a$4=>a$4.toString()).join(`|`)])}function useDrop(specArg,deps){let spec=useOptionalFactory(specArg,deps),monitor=useDropTargetMonitor(),connector=useDropTargetConnector(spec.options);return useRegisteredDropTarget(spec,monitor,connector),[useCollectedProps(spec.collect,monitor,connector),useConnectDropTarget(connector)]}var SCROLL_ZONE_SIZE=150,MAX_SCROLL_SPEED=15;function useAutoScroll(){let{isDragging:isDragging$2,currentOffset}=useDragLayer(monitor=>({isDragging:monitor.isDragging(),currentOffset:monitor.getClientOffset()})),reqId=(0,import_react.useRef)(null);(0,import_react.useEffect)(()=>{if(!isDragging$2||!currentOffset){cancelScroll();return}let handleScroll=()=>{let{y:y$2}=currentOffset,winH=window.innerHeight,scrollTop=window.scrollY,maxScroll=document.documentElement.scrollHeight-winH,nextScrollY=scrollTop,shouldScroll=!1;if(y$2>winH-SCROLL_ZONE_SIZE){let speed=MAX_SCROLL_SPEED*((y$2-(winH-SCROLL_ZONE_SIZE))/SCROLL_ZONE_SIZE);nextScrollY=Math.min(maxScroll,scrollTop+speed),shouldScroll=!0}else if(y$2<SCROLL_ZONE_SIZE){let speed=MAX_SCROLL_SPEED*((SCROLL_ZONE_SIZE-y$2)/SCROLL_ZONE_SIZE);nextScrollY=Math.max(0,scrollTop-speed),shouldScroll=!0}shouldScroll?(window.scrollTo(0,nextScrollY),reqId.current=requestAnimationFrame(handleScroll)):cancelScroll()};return handleScroll(),cancelScroll},[isDragging$2,currentOffset]);function cancelScroll(){reqId.current&&=(cancelAnimationFrame(reqId.current),null)}}function bind(fn,thisArg){return function(){return fn.apply(thisArg,arguments)}}var{toString}=Object.prototype,{getPrototypeOf:getPrototypeOf$1}=Object,{iterator,toStringTag}=Symbol,kindOf=(cache=>thing=>{let str=toString.call(thing);return cache[str]||(cache[str]=str.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=type=>(type=type.toLowerCase(),thing=>kindOf(thing)===type),typeOfTest=type=>thing=>typeof thing===type,{isArray}=Array,isUndefined=typeOfTest(`undefined`);function isBuffer(val){return val!==null&&!isUndefined(val)&&val.constructor!==null&&!isUndefined(val.constructor)&&isFunction$1(val.constructor.isBuffer)&&val.constructor.isBuffer(val)}var isArrayBuffer=kindOfTest(`ArrayBuffer`);function isArrayBufferView(val){let result;return result=typeof ArrayBuffer<`u`&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&isArrayBuffer(val.buffer),result}var isString=typeOfTest(`string`),isFunction$1=typeOfTest(`function`),isNumber=typeOfTest(`number`),isObject$2=thing=>typeof thing==`object`&&!!thing,isBoolean$1=thing=>thing===!0||thing===!1,isPlainObject$1=val=>{if(kindOf(val)!==`object`)return!1;let prototype$2=getPrototypeOf$1(val);return(prototype$2===null||prototype$2===Object.prototype||Object.getPrototypeOf(prototype$2)===null)&&!(toStringTag in val)&&!(iterator in val)},isEmptyObject=val=>{if(!isObject$2(val)||isBuffer(val))return!1;try{return Object.keys(val).length===0&&Object.getPrototypeOf(val)===Object.prototype}catch{return!1}},isDate=kindOfTest(`Date`),isFile=kindOfTest(`File`),isBlob=kindOfTest(`Blob`),isFileList=kindOfTest(`FileList`),isStream=val=>isObject$2(val)&&isFunction$1(val.pipe),isFormData=thing=>{let kind;return thing&&(typeof FormData==`function`&&thing instanceof FormData||isFunction$1(thing.append)&&((kind=kindOf(thing))===`formdata`||kind===`object`&&isFunction$1(thing.toString)&&thing.toString()===`[object FormData]`))},isURLSearchParams=kindOfTest(`URLSearchParams`),[isReadableStream,isRequest,isResponse,isHeaders]=[`ReadableStream`,`Request`,`Response`,`Headers`].map(kindOfTest),trim=str=>str.trim?str.trim():str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,``);function forEach(obj,fn,{allOwnKeys=!1}={}){if(obj==null)return;let i$4,l$3;if(typeof obj!=`object`&&(obj=[obj]),isArray(obj))for(i$4=0,l$3=obj.length;i$4<l$3;i$4++)fn.call(null,obj[i$4],i$4,obj);else{if(isBuffer(obj))return;let keys=allOwnKeys?Object.getOwnPropertyNames(obj):Object.keys(obj),len=keys.length,key$1;for(i$4=0;i$4<len;i$4++)key$1=keys[i$4],fn.call(null,obj[key$1],key$1,obj)}}function findKey(obj,key$1){if(isBuffer(obj))return null;key$1=key$1.toLowerCase();let keys=Object.keys(obj),i$4=keys.length,_key;for(;i$4-- >0;)if(_key=keys[i$4],key$1===_key.toLowerCase())return _key;return null}var _global=(()=>typeof globalThis<`u`?globalThis:typeof self<`u`?self:typeof window<`u`?window:global)(),isContextDefined=context=>!isUndefined(context)&&context!==_global;function merge(){let{caseless,skipUndefined}=isContextDefined(this)&&this||{},result={},assignValue=(val,key$1)=>{let targetKey=caseless&&findKey(result,key$1)||key$1;isPlainObject$1(result[targetKey])&&isPlainObject$1(val)?result[targetKey]=merge(result[targetKey],val):isPlainObject$1(val)?result[targetKey]=merge({},val):isArray(val)?result[targetKey]=val.slice():(!skipUndefined||!isUndefined(val))&&(result[targetKey]=val)};for(let i$4=0,l$3=arguments.length;i$4<l$3;i$4++)arguments[i$4]&&forEach(arguments[i$4],assignValue);return result}var extend$1=(a$4,b$3,thisArg,{allOwnKeys}={})=>(forEach(b$3,(val,key$1)=>{thisArg&&isFunction$1(val)?a$4[key$1]=bind(val,thisArg):a$4[key$1]=val},{allOwnKeys}),a$4),stripBOM=content=>(content.charCodeAt(0)===65279&&(content=content.slice(1)),content),inherits=(constructor,superConstructor,props,descriptors$1)=>{constructor.prototype=Object.create(superConstructor.prototype,descriptors$1),constructor.prototype.constructor=constructor,Object.defineProperty(constructor,`super`,{value:superConstructor.prototype}),props&&Object.assign(constructor.prototype,props)},toFlatObject=(sourceObj,destObj,filter$2,propFilter)=>{let props,i$4,prop,merged={};if(destObj||={},sourceObj==null)return destObj;do{for(props=Object.getOwnPropertyNames(sourceObj),i$4=props.length;i$4-- >0;)prop=props[i$4],(!propFilter||propFilter(prop,sourceObj,destObj))&&!merged[prop]&&(destObj[prop]=sourceObj[prop],merged[prop]=!0);sourceObj=filter$2!==!1&&getPrototypeOf$1(sourceObj)}while(sourceObj&&(!filter$2||filter$2(sourceObj,destObj))&&sourceObj!==Object.prototype);return destObj},endsWith=(str,searchString,position$1)=>{str=String(str),(position$1===void 0||position$1>str.length)&&(position$1=str.length),position$1-=searchString.length;let lastIndex=str.indexOf(searchString,position$1);return lastIndex!==-1&&lastIndex===position$1},toArray=thing=>{if(!thing)return null;if(isArray(thing))return thing;let i$4=thing.length;if(!isNumber(i$4))return null;let arr=Array(i$4);for(;i$4-- >0;)arr[i$4]=thing[i$4];return arr},isTypedArray=(TypedArray=>thing=>TypedArray&&thing instanceof TypedArray)(typeof Uint8Array<`u`&&getPrototypeOf$1(Uint8Array)),forEachEntry=(obj,fn)=>{let _iterator=(obj&&obj[iterator]).call(obj),result;for(;(result=_iterator.next())&&!result.done;){let pair=result.value;fn.call(obj,pair[0],pair[1])}},matchAll=(regExp,str)=>{let matches,arr=[];for(;(matches=regExp.exec(str))!==null;)arr.push(matches);return arr},isHTMLForm=kindOfTest(`HTMLFormElement`),toCamelCase=str=>str.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(m$3,p1,p2){return p1.toUpperCase()+p2}),hasOwnProperty=(({hasOwnProperty:hasOwnProperty$3})=>(obj,prop)=>hasOwnProperty$3.call(obj,prop))(Object.prototype),isRegExp=kindOfTest(`RegExp`),reduceDescriptors=(obj,reducer$2)=>{let descriptors$1=Object.getOwnPropertyDescriptors(obj),reducedDescriptors={};forEach(descriptors$1,(descriptor,name)=>{let ret;(ret=reducer$2(descriptor,name,obj))!==!1&&(reducedDescriptors[name]=ret||descriptor)}),Object.defineProperties(obj,reducedDescriptors)},freezeMethods=obj=>{reduceDescriptors(obj,(descriptor,name)=>{if(isFunction$1(obj)&&[`arguments`,`caller`,`callee`].indexOf(name)!==-1)return!1;let value=obj[name];if(isFunction$1(value)){if(descriptor.enumerable=!1,`writable`in descriptor){descriptor.writable=!1;return}descriptor.set||=()=>{throw Error(`Can not rewrite read-only method '`+name+`'`)}}})},toObjectSet=(arrayOrString,delimiter)=>{let obj={},define$1=arr=>{arr.forEach(value=>{obj[value]=!0})};return isArray(arrayOrString)?define$1(arrayOrString):define$1(String(arrayOrString).split(delimiter)),obj},noop$6=()=>{},toFiniteNumber=(value,defaultValue$3)=>value!=null&&Number.isFinite(value=+value)?value:defaultValue$3;function isSpecCompliantForm(thing){return!!(thing&&isFunction$1(thing.append)&&thing[toStringTag]===`FormData`&&thing[iterator])}var toJSONObject=obj=>{let stack=Array(10),visit=(source,i$4)=>{if(isObject$2(source)){if(stack.indexOf(source)>=0)return;if(isBuffer(source))return source;if(!(`toJSON`in source)){stack[i$4]=source;let target=isArray(source)?[]:{};return forEach(source,(value,key$1)=>{let reducedValue=visit(value,i$4+1);!isUndefined(reducedValue)&&(target[key$1]=reducedValue)}),stack[i$4]=void 0,target}}return source};return visit(obj,0)},isAsyncFn=kindOfTest(`AsyncFunction`),isThenable=thing=>thing&&(isObject$2(thing)||isFunction$1(thing))&&isFunction$1(thing.then)&&isFunction$1(thing.catch),_setImmediate=((setImmediateSupported,postMessageSupported)=>setImmediateSupported?setImmediate:postMessageSupported?((token,callbacks)=>(_global.addEventListener(`message`,({source,data})=>{source===_global&&data===token&&callbacks.length&&callbacks.shift()()},!1),cb=>{callbacks.push(cb),_global.postMessage(token,`*`)}))(`axios@${Math.random()}`,[]):cb=>setTimeout(cb))(typeof setImmediate==`function`,isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<`u`?queueMicrotask.bind(_global):typeof process<`u`&&process.nextTick||_setImmediate,isIterable=thing=>thing!=null&&isFunction$1(thing[iterator]),utils_default={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean:isBoolean$1,isObject:isObject$2,isPlainObject:isPlainObject$1,isEmptyObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$6,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};function AxiosError(message,code,config,request,response){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=message,this.name=`AxiosError`,code&&(this.code=code),config&&(this.config=config),request&&(this.request=request),response&&(this.response=response,this.status=response.status?response.status:null)}utils_default.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils_default.toJSONObject(this.config),code:this.code,status:this.status}}});var prototype$1=AxiosError.prototype,descriptors={};[`ERR_BAD_OPTION_VALUE`,`ERR_BAD_OPTION`,`ECONNABORTED`,`ETIMEDOUT`,`ERR_NETWORK`,`ERR_FR_TOO_MANY_REDIRECTS`,`ERR_DEPRECATED`,`ERR_BAD_RESPONSE`,`ERR_BAD_REQUEST`,`ERR_CANCELED`,`ERR_NOT_SUPPORT`,`ERR_INVALID_URL`].forEach(code=>{descriptors[code]={value:code}}),Object.defineProperties(AxiosError,descriptors),Object.defineProperty(prototype$1,`isAxiosError`,{value:!0}),AxiosError.from=(error$1,code,config,request,response,customProps)=>{let axiosError=Object.create(prototype$1);utils_default.toFlatObject(error$1,axiosError,function(obj){return obj!==Error.prototype},prop=>prop!==`isAxiosError`);let msg=error$1&&error$1.message?error$1.message:`Error`,errCode=code==null&&error$1?error$1.code:code;return AxiosError.call(axiosError,msg,errCode,config,request,response),error$1&&axiosError.cause==null&&Object.defineProperty(axiosError,`cause`,{value:error$1,configurable:!0}),axiosError.name=error$1&&error$1.name||`Error`,customProps&&Object.assign(axiosError,customProps),axiosError};var AxiosError_default=AxiosError,null_default=null;function isVisitable(thing){return utils_default.isPlainObject(thing)||utils_default.isArray(thing)}function removeBrackets(key$1){return utils_default.endsWith(key$1,`[]`)?key$1.slice(0,-2):key$1}function renderKey(path,key$1,dots){return path?path.concat(key$1).map(function(token,i$4){return token=removeBrackets(token),!dots&&i$4?`[`+token+`]`:token}).join(dots?`.`:``):key$1}function isFlatArray(arr){return utils_default.isArray(arr)&&!arr.some(isVisitable)}var predicates=utils_default.toFlatObject(utils_default,{},null,function(prop){return/^is[A-Z]/.test(prop)});function toFormData(obj,formData,options$1){if(!utils_default.isObject(obj))throw TypeError(`target must be an object`);formData||=new FormData,options$1=utils_default.toFlatObject(options$1,{metaTokens:!0,dots:!1,indexes:!1},!1,function(option,source){return!utils_default.isUndefined(source[option])});let metaTokens=options$1.metaTokens,visitor=options$1.visitor||defaultVisitor,dots=options$1.dots,indexes=options$1.indexes,useBlob=(options$1.Blob||typeof Blob<`u`&&Blob)&&utils_default.isSpecCompliantForm(formData);if(!utils_default.isFunction(visitor))throw TypeError(`visitor must be a function`);function convertValue(value){if(value===null)return``;if(utils_default.isDate(value))return value.toISOString();if(utils_default.isBoolean(value))return value.toString();if(!useBlob&&utils_default.isBlob(value))throw new AxiosError_default(`Blob is not supported. Use a Buffer instead.`);return utils_default.isArrayBuffer(value)||utils_default.isTypedArray(value)?useBlob&&typeof Blob==`function`?new Blob([value]):Buffer.from(value):value}function defaultVisitor(value,key$1,path){let arr=value;if(value&&!path&&typeof value==`object`){if(utils_default.endsWith(key$1,`{}`))key$1=metaTokens?key$1:key$1.slice(0,-2),value=JSON.stringify(value);else if(utils_default.isArray(value)&&isFlatArray(value)||(utils_default.isFileList(value)||utils_default.endsWith(key$1,`[]`))&&(arr=utils_default.toArray(value)))return key$1=removeBrackets(key$1),arr.forEach(function(el,index$2){!(utils_default.isUndefined(el)||el===null)&&formData.append(indexes===!0?renderKey([key$1],index$2,dots):indexes===null?key$1:key$1+`[]`,convertValue(el))}),!1}return isVisitable(value)?!0:(formData.append(renderKey(path,key$1,dots),convertValue(value)),!1)}let stack=[],exposedHelpers=Object.assign(predicates,{defaultVisitor,convertValue,isVisitable});function build(value,path){if(!utils_default.isUndefined(value)){if(stack.indexOf(value)!==-1)throw Error(`Circular reference detected in `+path.join(`.`));stack.push(value),utils_default.forEach(value,function(el,key$1){(!(utils_default.isUndefined(el)||el===null)&&visitor.call(formData,el,utils_default.isString(key$1)?key$1.trim():key$1,path,exposedHelpers))===!0&&build(el,path?path.concat(key$1):[key$1])}),stack.pop()}}if(!utils_default.isObject(obj))throw TypeError(`data must be an object`);return build(obj),formData}var toFormData_default=toFormData;function encode$1(str){let charMap={"!":`%21`,"'":`%27`,"(":`%28`,")":`%29`,"~":`%7E`,"%20":`+`,"%00":`\0`};return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g,function(match){return charMap[match]})}function AxiosURLSearchParams(params,options$1){this._pairs=[],params&&toFormData_default(params,this,options$1)}var prototype=AxiosURLSearchParams.prototype;prototype.append=function(name,value){this._pairs.push([name,value])},prototype.toString=function(encoder){let _encode=encoder?function(value){return encoder.call(this,value,encode$1)}:encode$1;return this._pairs.map(function(pair){return _encode(pair[0])+`=`+_encode(pair[1])},``).join(`&`)};var AxiosURLSearchParams_default=AxiosURLSearchParams;function encode(val){return encodeURIComponent(val).replace(/%3A/gi,`:`).replace(/%24/g,`$`).replace(/%2C/gi,`,`).replace(/%20/g,`+`)}function buildURL(url,params,options$1){if(!params)return url;let _encode=options$1&&options$1.encode||encode;utils_default.isFunction(options$1)&&(options$1={serialize:options$1});let serializeFn=options$1&&options$1.serialize,serializedParams;if(serializedParams=serializeFn?serializeFn(params,options$1):utils_default.isURLSearchParams(params)?params.toString():new AxiosURLSearchParams_default(params,options$1).toString(_encode),serializedParams){let hashmarkIndex=url.indexOf(`#`);hashmarkIndex!==-1&&(url=url.slice(0,hashmarkIndex)),url+=(url.indexOf(`?`)===-1?`?`:`&`)+serializedParams}return url}var InterceptorManager=class{constructor(){this.handlers=[]}use(fulfilled,rejected,options$1){return this.handlers.push({fulfilled,rejected,synchronous:options$1?options$1.synchronous:!1,runWhen:options$1?options$1.runWhen:null}),this.handlers.length-1}eject(id$3){this.handlers[id$3]&&(this.handlers[id$3]=null)}clear(){this.handlers&&=[]}forEach(fn){utils_default.forEach(this.handlers,function(h$3){h$3!==null&&fn(h$3)})}},InterceptorManager_default=InterceptorManager,transitional_default={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams_default=typeof URLSearchParams<`u`?URLSearchParams:AxiosURLSearchParams_default,FormData_default=typeof FormData<`u`?FormData:null,Blob_default=typeof Blob<`u`?Blob:null,browser_default={isBrowser:!0,classes:{URLSearchParams:URLSearchParams_default,FormData:FormData_default,Blob:Blob_default},protocols:[`http`,`https`,`file`,`blob`,`url`,`data`]},utils_exports=__export({hasBrowserEnv:()=>hasBrowserEnv,hasStandardBrowserEnv:()=>hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv:()=>hasStandardBrowserWebWorkerEnv,navigator:()=>_navigator,origin:()=>origin$1}),hasBrowserEnv=typeof window<`u`&&typeof document<`u`,_navigator=typeof navigator==`object`&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||[`ReactNative`,`NativeScript`,`NS`].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<`u`&&self instanceof WorkerGlobalScope&&typeof self.importScripts==`function`)(),origin$1=hasBrowserEnv&&window.location.href||`http://localhost`,platform_default={...utils_exports,...browser_default};function toURLEncodedForm(data,options$1){return toFormData_default(data,new platform_default.classes.URLSearchParams,{visitor:function(value,key$1,path,helpers){return platform_default.isNode&&utils_default.isBuffer(value)?(this.append(key$1,value.toString(`base64`)),!1):helpers.defaultVisitor.apply(this,arguments)},...options$1})}function parsePropPath(name){return utils_default.matchAll(/\w+|\[(\w*)]/g,name).map(match=>match[0]===`[]`?``:match[1]||match[0])}function arrayToObject(arr){let obj={},keys=Object.keys(arr),i$4,len=keys.length,key$1;for(i$4=0;i$4<len;i$4++)key$1=keys[i$4],obj[key$1]=arr[key$1];return obj}function formDataToJSON(formData){function buildPath(path,value,target,index$2){let name=path[index$2++];if(name===`__proto__`)return!0;let isNumericKey=Number.isFinite(+name),isLast=index$2>=path.length;return name=!name&&utils_default.isArray(target)?target.length:name,isLast?(utils_default.hasOwnProp(target,name)?target[name]=[target[name],value]:target[name]=value,!isNumericKey):((!target[name]||!utils_default.isObject(target[name]))&&(target[name]=[]),buildPath(path,value,target[name],index$2)&&utils_default.isArray(target[name])&&(target[name]=arrayToObject(target[name])),!isNumericKey)}if(utils_default.isFormData(formData)&&utils_default.isFunction(formData.entries)){let obj={};return utils_default.forEachEntry(formData,(name,value)=>{buildPath(parsePropPath(name),value,obj,0)}),obj}return null}var formDataToJSON_default=formDataToJSON;function stringifySafely(rawValue,parser,encoder){if(utils_default.isString(rawValue))try{return(parser||JSON.parse)(rawValue),utils_default.trim(rawValue)}catch(e$4){if(e$4.name!==`SyntaxError`)throw e$4}return(encoder||JSON.stringify)(rawValue)}var defaults$1={transitional:transitional_default,adapter:[`xhr`,`http`,`fetch`],transformRequest:[function(data,headers){let contentType=headers.getContentType()||``,hasJSONContentType=contentType.indexOf(`application/json`)>-1,isObjectPayload=utils_default.isObject(data);if(isObjectPayload&&utils_default.isHTMLForm(data)&&(data=new FormData(data)),utils_default.isFormData(data))return hasJSONContentType?JSON.stringify(formDataToJSON_default(data)):data;if(utils_default.isArrayBuffer(data)||utils_default.isBuffer(data)||utils_default.isStream(data)||utils_default.isFile(data)||utils_default.isBlob(data)||utils_default.isReadableStream(data))return data;if(utils_default.isArrayBufferView(data))return data.buffer;if(utils_default.isURLSearchParams(data))return headers.setContentType(`application/x-www-form-urlencoded;charset=utf-8`,!1),data.toString();let isFileList$1;if(isObjectPayload){if(contentType.indexOf(`application/x-www-form-urlencoded`)>-1)return toURLEncodedForm(data,this.formSerializer).toString();if((isFileList$1=utils_default.isFileList(data))||contentType.indexOf(`multipart/form-data`)>-1){let _FormData=this.env&&this.env.FormData;return toFormData_default(isFileList$1?{"files[]":data}:data,_FormData&&new _FormData,this.formSerializer)}}return isObjectPayload||hasJSONContentType?(headers.setContentType(`application/json`,!1),stringifySafely(data)):data}],transformResponse:[function(data){let transitional=this.transitional||defaults$1.transitional,forcedJSONParsing=transitional&&transitional.forcedJSONParsing,JSONRequested=this.responseType===`json`;if(utils_default.isResponse(data)||utils_default.isReadableStream(data))return data;if(data&&utils_default.isString(data)&&(forcedJSONParsing&&!this.responseType||JSONRequested)){let strictJSONParsing=!(transitional&&transitional.silentJSONParsing)&&JSONRequested;try{return JSON.parse(data,this.parseReviver)}catch(e$4){if(strictJSONParsing)throw e$4.name===`SyntaxError`?AxiosError_default.from(e$4,AxiosError_default.ERR_BAD_RESPONSE,this,null,this.response):e$4}}return data}],timeout:0,xsrfCookieName:`XSRF-TOKEN`,xsrfHeaderName:`X-XSRF-TOKEN`,maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform_default.classes.FormData,Blob:platform_default.classes.Blob},validateStatus:function(status){return status>=200&&status<300},headers:{common:{Accept:`application/json, text/plain, */*`,"Content-Type":void 0}}};utils_default.forEach([`delete`,`get`,`head`,`post`,`put`,`patch`],method=>{defaults$1.headers[method]={}});var defaults_default=defaults$1,ignoreDuplicateOf=utils_default.toObjectSet([`age`,`authorization`,`content-length`,`content-type`,`etag`,`expires`,`from`,`host`,`if-modified-since`,`if-unmodified-since`,`last-modified`,`location`,`max-forwards`,`proxy-authorization`,`referer`,`retry-after`,`user-agent`]),parseHeaders_default=rawHeaders=>{let parsed={},key$1,val,i$4;return rawHeaders&&rawHeaders.split(`
`).forEach(function(line){i$4=line.indexOf(`:`),key$1=line.substring(0,i$4).trim().toLowerCase(),val=line.substring(i$4+1).trim(),!(!key$1||parsed[key$1]&&ignoreDuplicateOf[key$1])&&(key$1===`set-cookie`?parsed[key$1]?parsed[key$1].push(val):parsed[key$1]=[val]:parsed[key$1]=parsed[key$1]?parsed[key$1]+`, `+val:val)}),parsed},$internals=Symbol(`internals`);function normalizeHeader(header){return header&&String(header).trim().toLowerCase()}function normalizeValue(value){return value===!1||value==null?value:utils_default.isArray(value)?value.map(normalizeValue):String(value)}function parseTokens(str){let tokens=Object.create(null),tokensRE=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,match;for(;match=tokensRE.exec(str);)tokens[match[1]]=match[2];return tokens}var isValidHeaderName=str=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());function matchHeaderValue(context,value,header,filter$2,isHeaderNameFilter){if(utils_default.isFunction(filter$2))return filter$2.call(this,value,header);if(isHeaderNameFilter&&(value=header),utils_default.isString(value)){if(utils_default.isString(filter$2))return value.indexOf(filter$2)!==-1;if(utils_default.isRegExp(filter$2))return filter$2.test(value)}}function formatHeader(header){return header.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(w$1,char,str)=>char.toUpperCase()+str)}function buildAccessors(obj,header){let accessorName=utils_default.toCamelCase(` `+header);[`get`,`set`,`has`].forEach(methodName=>{Object.defineProperty(obj,methodName+accessorName,{value:function(arg1,arg2,arg3){return this[methodName].call(this,header,arg1,arg2,arg3)},configurable:!0})})}var AxiosHeaders=class{constructor(headers){headers&&this.set(headers)}set(header,valueOrRewrite,rewrite){let self$1=this;function setHeader(_value,_header,_rewrite){let lHeader=normalizeHeader(_header);if(!lHeader)throw Error(`header name must be a non-empty string`);let key$1=utils_default.findKey(self$1,lHeader);(!key$1||self$1[key$1]===void 0||_rewrite===!0||_rewrite===void 0&&self$1[key$1]!==!1)&&(self$1[key$1||_header]=normalizeValue(_value))}let setHeaders=(headers,_rewrite)=>utils_default.forEach(headers,(_value,_header)=>setHeader(_value,_header,_rewrite));if(utils_default.isPlainObject(header)||header instanceof this.constructor)setHeaders(header,valueOrRewrite);else if(utils_default.isString(header)&&(header=header.trim())&&!isValidHeaderName(header))setHeaders(parseHeaders_default(header),valueOrRewrite);else if(utils_default.isObject(header)&&utils_default.isIterable(header)){let obj={},dest,key$1;for(let entry of header){if(!utils_default.isArray(entry))throw TypeError(`Object iterator must return a key-value pair`);obj[key$1=entry[0]]=(dest=obj[key$1])?utils_default.isArray(dest)?[...dest,entry[1]]:[dest,entry[1]]:entry[1]}setHeaders(obj,valueOrRewrite)}else header!=null&&setHeader(valueOrRewrite,header,rewrite);return this}get(header,parser){if(header=normalizeHeader(header),header){let key$1=utils_default.findKey(this,header);if(key$1){let value=this[key$1];if(!parser)return value;if(parser===!0)return parseTokens(value);if(utils_default.isFunction(parser))return parser.call(this,value,key$1);if(utils_default.isRegExp(parser))return parser.exec(value);throw TypeError(`parser must be boolean|regexp|function`)}}}has(header,matcher){if(header=normalizeHeader(header),header){let key$1=utils_default.findKey(this,header);return!!(key$1&&this[key$1]!==void 0&&(!matcher||matchHeaderValue(this,this[key$1],key$1,matcher)))}return!1}delete(header,matcher){let self$1=this,deleted=!1;function deleteHeader(_header){if(_header=normalizeHeader(_header),_header){let key$1=utils_default.findKey(self$1,_header);key$1&&(!matcher||matchHeaderValue(self$1,self$1[key$1],key$1,matcher))&&(delete self$1[key$1],deleted=!0)}}return utils_default.isArray(header)?header.forEach(deleteHeader):deleteHeader(header),deleted}clear(matcher){let keys=Object.keys(this),i$4=keys.length,deleted=!1;for(;i$4--;){let key$1=keys[i$4];(!matcher||matchHeaderValue(this,this[key$1],key$1,matcher,!0))&&(delete this[key$1],deleted=!0)}return deleted}normalize(format){let self$1=this,headers={};return utils_default.forEach(this,(value,header)=>{let key$1=utils_default.findKey(headers,header);if(key$1){self$1[key$1]=normalizeValue(value),delete self$1[header];return}let normalized=format?formatHeader(header):String(header).trim();normalized!==header&&delete self$1[header],self$1[normalized]=normalizeValue(value),headers[normalized]=!0}),this}concat(...targets){return this.constructor.concat(this,...targets)}toJSON(asStrings){let obj=Object.create(null);return utils_default.forEach(this,(value,header)=>{value!=null&&value!==!1&&(obj[header]=asStrings&&utils_default.isArray(value)?value.join(`, `):value)}),obj}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([header,value])=>header+`: `+value).join(`
`)}getSetCookie(){return this.get(`set-cookie`)||[]}get[Symbol.toStringTag](){return`AxiosHeaders`}static from(thing){return thing instanceof this?thing:new this(thing)}static concat(first,...targets){let computed=new this(first);return targets.forEach(target=>computed.set(target)),computed}static accessor(header){let accessors=(this[$internals]=this[$internals]={accessors:{}}).accessors,prototype$2=this.prototype;function defineAccessor(_header){let lHeader=normalizeHeader(_header);accessors[lHeader]||(buildAccessors(prototype$2,_header),accessors[lHeader]=!0)}return utils_default.isArray(header)?header.forEach(defineAccessor):defineAccessor(header),this}};AxiosHeaders.accessor([`Content-Type`,`Content-Length`,`Accept`,`Accept-Encoding`,`User-Agent`,`Authorization`]),utils_default.reduceDescriptors(AxiosHeaders.prototype,({value},key$1)=>{let mapped=key$1[0].toUpperCase()+key$1.slice(1);return{get:()=>value,set(headerValue){this[mapped]=headerValue}}}),utils_default.freezeMethods(AxiosHeaders);var AxiosHeaders_default=AxiosHeaders;function transformData(fns,response){let config=this||defaults_default,context=response||config,headers=AxiosHeaders_default.from(context.headers),data=context.data;return utils_default.forEach(fns,function(fn){data=fn.call(config,data,headers.normalize(),response?response.status:void 0)}),headers.normalize(),data}function isCancel(value){return!!(value&&value.__CANCEL__)}function CanceledError(message,config,request){AxiosError_default.call(this,message??`canceled`,AxiosError_default.ERR_CANCELED,config,request),this.name=`CanceledError`}utils_default.inherits(CanceledError,AxiosError_default,{__CANCEL__:!0});var CanceledError_default=CanceledError;function settle(resolve,reject,response){let validateStatus=response.config.validateStatus;!response.status||!validateStatus||validateStatus(response.status)?resolve(response):reject(new AxiosError_default(`Request failed with status code `+response.status,[AxiosError_default.ERR_BAD_REQUEST,AxiosError_default.ERR_BAD_RESPONSE][Math.floor(response.status/100)-4],response.config,response.request,response))}function parseProtocol(url){let match=/^([-+\w]{1,25})(:?\/\/|:)/.exec(url);return match&&match[1]||``}function speedometer(samplesCount,min){samplesCount||=10;let bytes=Array(samplesCount),timestamps=Array(samplesCount),head=0,tail=0,firstSampleTS;return min=min===void 0?1e3:min,function(chunkLength){let now$4=Date.now(),startedAt=timestamps[tail];firstSampleTS||=now$4,bytes[head]=chunkLength,timestamps[head]=now$4;let i$4=tail,bytesCount=0;for(;i$4!==head;)bytesCount+=bytes[i$4++],i$4%=samplesCount;if(head=(head+1)%samplesCount,head===tail&&(tail=(tail+1)%samplesCount),now$4-firstSampleTS<min)return;let passed=startedAt&&now$4-startedAt;return passed?Math.round(bytesCount*1e3/passed):void 0}}var speedometer_default=speedometer;function throttle(fn,freq){let timestamp=0,threshold=1e3/freq,lastArgs,timer$1,invoke=(args,now$4=Date.now())=>{timestamp=now$4,lastArgs=null,timer$1&&=(clearTimeout(timer$1),null),fn(...args)};return[(...args)=>{let now$4=Date.now(),passed=now$4-timestamp;passed>=threshold?invoke(args,now$4):(lastArgs=args,timer$1||=setTimeout(()=>{timer$1=null,invoke(lastArgs)},threshold-passed))},()=>lastArgs&&invoke(lastArgs)]}var throttle_default=throttle;const progressEventReducer=(listener,isDownloadStream,freq=3)=>{let bytesNotified=0,_speedometer=speedometer_default(50,250);return throttle_default(e$4=>{let loaded=e$4.loaded,total=e$4.lengthComputable?e$4.total:void 0,progressBytes=loaded-bytesNotified,rate=_speedometer(progressBytes),inRange=loaded<=total;bytesNotified=loaded,listener({loaded,total,progress:total?loaded/total:void 0,bytes:progressBytes,rate:rate||void 0,estimated:rate&&total&&inRange?(total-loaded)/rate:void 0,event:e$4,lengthComputable:total!=null,[isDownloadStream?`download`:`upload`]:!0})},freq)},progressEventDecorator=(total,throttled)=>{let lengthComputable=total!=null;return[loaded=>throttled[0]({lengthComputable,total,loaded}),throttled[1]]},asyncDecorator=fn=>(...args)=>utils_default.asap(()=>fn(...args));var isURLSameOrigin_default=platform_default.hasStandardBrowserEnv?((origin$2,isMSIE)=>url=>(url=new URL(url,platform_default.origin),origin$2.protocol===url.protocol&&origin$2.host===url.host&&(isMSIE||origin$2.port===url.port)))(new URL(platform_default.origin),platform_default.navigator&&/(msie|trident)/i.test(platform_default.navigator.userAgent)):()=>!0,cookies_default=platform_default.hasStandardBrowserEnv?{write(name,value,expires,path,domain,secure,sameSite){if(typeof document>`u`)return;let cookie=[`${name}=${encodeURIComponent(value)}`];utils_default.isNumber(expires)&&cookie.push(`expires=${new Date(expires).toUTCString()}`),utils_default.isString(path)&&cookie.push(`path=${path}`),utils_default.isString(domain)&&cookie.push(`domain=${domain}`),secure===!0&&cookie.push(`secure`),utils_default.isString(sameSite)&&cookie.push(`SameSite=${sameSite}`),document.cookie=cookie.join(`; `)},read(name){if(typeof document>`u`)return null;let match=document.cookie.match(RegExp(`(?:^|; )`+name+`=([^;]*)`));return match?decodeURIComponent(match[1]):null},remove(name){this.write(name,``,Date.now()-864e5,`/`)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(url){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(url)}function combineURLs(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/?\/$/,``)+`/`+relativeURL.replace(/^\/+/,``):baseURL}function buildFullPath(baseURL,requestedURL,allowAbsoluteUrls){let isRelativeUrl=!isAbsoluteURL(requestedURL);return baseURL&&(isRelativeUrl||allowAbsoluteUrls==0)?combineURLs(baseURL,requestedURL):requestedURL}var headersToObject=thing=>thing instanceof AxiosHeaders_default?{...thing}:thing;function mergeConfig(config1,config2){config2||={};let config={};function getMergedValue(target,source,prop,caseless){return utils_default.isPlainObject(target)&&utils_default.isPlainObject(source)?utils_default.merge.call({caseless},target,source):utils_default.isPlainObject(source)?utils_default.merge({},source):utils_default.isArray(source)?source.slice():source}function mergeDeepProperties(a$4,b$3,prop,caseless){if(utils_default.isUndefined(b$3)){if(!utils_default.isUndefined(a$4))return getMergedValue(void 0,a$4,prop,caseless)}else return getMergedValue(a$4,b$3,prop,caseless)}function valueFromConfig2(a$4,b$3){if(!utils_default.isUndefined(b$3))return getMergedValue(void 0,b$3)}function defaultToConfig2(a$4,b$3){if(utils_default.isUndefined(b$3)){if(!utils_default.isUndefined(a$4))return getMergedValue(void 0,a$4)}else return getMergedValue(void 0,b$3)}function mergeDirectKeys(a$4,b$3,prop){if(prop in config2)return getMergedValue(a$4,b$3);if(prop in config1)return getMergedValue(void 0,a$4)}let mergeMap={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,withXSRFToken:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,beforeRedirect:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys,headers:(a$4,b$3,prop)=>mergeDeepProperties(headersToObject(a$4),headersToObject(b$3),prop,!0)};return utils_default.forEach(Object.keys({...config1,...config2}),function(prop){let merge$1=mergeMap[prop]||mergeDeepProperties,configValue=merge$1(config1[prop],config2[prop],prop);utils_default.isUndefined(configValue)&&merge$1!==mergeDirectKeys||(config[prop]=configValue)}),config}var resolveConfig_default=config=>{let newConfig=mergeConfig({},config),{data,withXSRFToken,xsrfHeaderName,xsrfCookieName,headers,auth}=newConfig;if(newConfig.headers=headers=AxiosHeaders_default.from(headers),newConfig.url=buildURL(buildFullPath(newConfig.baseURL,newConfig.url,newConfig.allowAbsoluteUrls),config.params,config.paramsSerializer),auth&&headers.set(`Authorization`,`Basic `+btoa((auth.username||``)+`:`+(auth.password?unescape(encodeURIComponent(auth.password)):``))),utils_default.isFormData(data)){if(platform_default.hasStandardBrowserEnv||platform_default.hasStandardBrowserWebWorkerEnv)headers.setContentType(void 0);else if(utils_default.isFunction(data.getHeaders)){let formHeaders=data.getHeaders(),allowedHeaders=[`content-type`,`content-length`];Object.entries(formHeaders).forEach(([key$1,val])=>{allowedHeaders.includes(key$1.toLowerCase())&&headers.set(key$1,val)})}}if(platform_default.hasStandardBrowserEnv&&(withXSRFToken&&utils_default.isFunction(withXSRFToken)&&(withXSRFToken=withXSRFToken(newConfig)),withXSRFToken||withXSRFToken!==!1&&isURLSameOrigin_default(newConfig.url))){let xsrfValue=xsrfHeaderName&&xsrfCookieName&&cookies_default.read(xsrfCookieName);xsrfValue&&headers.set(xsrfHeaderName,xsrfValue)}return newConfig},isXHRAdapterSupported=typeof XMLHttpRequest<`u`,xhr_default=isXHRAdapterSupported&&function(config){return new Promise(function(resolve,reject){let _config=resolveConfig_default(config),requestData=_config.data,requestHeaders=AxiosHeaders_default.from(_config.headers).normalize(),{responseType,onUploadProgress,onDownloadProgress}=_config,onCanceled,uploadThrottled,downloadThrottled,flushUpload,flushDownload;function done(){flushUpload&&flushUpload(),flushDownload&&flushDownload(),_config.cancelToken&&_config.cancelToken.unsubscribe(onCanceled),_config.signal&&_config.signal.removeEventListener(`abort`,onCanceled)}let request=new XMLHttpRequest;request.open(_config.method.toUpperCase(),_config.url,!0),request.timeout=_config.timeout;function onloadend(){if(!request)return;let responseHeaders=AxiosHeaders_default.from(`getAllResponseHeaders`in request&&request.getAllResponseHeaders());settle(function(value){resolve(value),done()},function(err){reject(err),done()},{data:!responseType||responseType===`text`||responseType===`json`?request.responseText:request.response,status:request.status,statusText:request.statusText,headers:responseHeaders,config,request}),request=null}`onloadend`in request?request.onloadend=onloadend:request.onreadystatechange=function(){!request||request.readyState!==4||request.status===0&&!(request.responseURL&&request.responseURL.indexOf(`file:`)===0)||setTimeout(onloadend)},request.onabort=function(){request&&=(reject(new AxiosError_default(`Request aborted`,AxiosError_default.ECONNABORTED,config,request)),null)},request.onerror=function(event){let err=new AxiosError_default(event&&event.message?event.message:`Network Error`,AxiosError_default.ERR_NETWORK,config,request);err.event=event||null,reject(err),request=null},request.ontimeout=function(){let timeoutErrorMessage=_config.timeout?`timeout of `+_config.timeout+`ms exceeded`:`timeout exceeded`,transitional=_config.transitional||transitional_default;_config.timeoutErrorMessage&&(timeoutErrorMessage=_config.timeoutErrorMessage),reject(new AxiosError_default(timeoutErrorMessage,transitional.clarifyTimeoutError?AxiosError_default.ETIMEDOUT:AxiosError_default.ECONNABORTED,config,request)),request=null},requestData===void 0&&requestHeaders.setContentType(null),`setRequestHeader`in request&&utils_default.forEach(requestHeaders.toJSON(),function(val,key$1){request.setRequestHeader(key$1,val)}),utils_default.isUndefined(_config.withCredentials)||(request.withCredentials=!!_config.withCredentials),responseType&&responseType!==`json`&&(request.responseType=_config.responseType),onDownloadProgress&&([downloadThrottled,flushDownload]=progressEventReducer(onDownloadProgress,!0),request.addEventListener(`progress`,downloadThrottled)),onUploadProgress&&request.upload&&([uploadThrottled,flushUpload]=progressEventReducer(onUploadProgress),request.upload.addEventListener(`progress`,uploadThrottled),request.upload.addEventListener(`loadend`,flushUpload)),(_config.cancelToken||_config.signal)&&(onCanceled=cancel=>{request&&=(reject(!cancel||cancel.type?new CanceledError_default(null,config,request):cancel),request.abort(),null)},_config.cancelToken&&_config.cancelToken.subscribe(onCanceled),_config.signal&&(_config.signal.aborted?onCanceled():_config.signal.addEventListener(`abort`,onCanceled)));let protocol=parseProtocol(_config.url);if(protocol&&platform_default.protocols.indexOf(protocol)===-1){reject(new AxiosError_default(`Unsupported protocol `+protocol+`:`,AxiosError_default.ERR_BAD_REQUEST,config));return}request.send(requestData||null)})},composeSignals=(signals,timeout$1)=>{let{length}=signals=signals?signals.filter(Boolean):[];if(timeout$1||length){let controller=new AbortController,aborted,onabort=function(reason){if(!aborted){aborted=!0,unsubscribe();let err=reason instanceof Error?reason:this.reason;controller.abort(err instanceof AxiosError_default?err:new CanceledError_default(err instanceof Error?err.message:err))}},timer$1=timeout$1&&setTimeout(()=>{timer$1=null,onabort(new AxiosError_default(`timeout ${timeout$1} of ms exceeded`,AxiosError_default.ETIMEDOUT))},timeout$1),unsubscribe=()=>{signals&&=(timer$1&&clearTimeout(timer$1),timer$1=null,signals.forEach(signal$1=>{signal$1.unsubscribe?signal$1.unsubscribe(onabort):signal$1.removeEventListener(`abort`,onabort)}),null)};signals.forEach(signal$1=>signal$1.addEventListener(`abort`,onabort));let{signal}=controller;return signal.unsubscribe=()=>utils_default.asap(unsubscribe),signal}},composeSignals_default=composeSignals;const streamChunk=function*(chunk,chunkSize){let len=chunk.byteLength;if(!chunkSize||len<chunkSize){yield chunk;return}let pos=0,end$1;for(;pos<len;)end$1=pos+chunkSize,yield chunk.slice(pos,end$1),pos=end$1},readBytes=async function*(iterable,chunkSize){for await(let chunk of readStream(iterable))yield*streamChunk(chunk,chunkSize)};var readStream=async function*(stream){if(stream[Symbol.asyncIterator]){yield*stream;return}let reader=stream.getReader();try{for(;;){let{done,value}=await reader.read();if(done)break;yield value}}finally{await reader.cancel()}};const trackStream=(stream,chunkSize,onProgress,onFinish)=>{let iterator$1=readBytes(stream,chunkSize),bytes=0,done,_onFinish=e$4=>{done||(done=!0,onFinish&&onFinish(e$4))};return new ReadableStream({async pull(controller){try{let{done:done$1,value}=await iterator$1.next();if(done$1){_onFinish(),controller.close();return}let len=value.byteLength;onProgress&&onProgress(bytes+=len),controller.enqueue(new Uint8Array(value))}catch(err){throw _onFinish(err),err}},cancel(reason){return _onFinish(reason),iterator$1.return()}},{highWaterMark:2})};var DEFAULT_CHUNK_SIZE=64*1024,{isFunction}=utils_default,globalFetchAPI=(({Request:Request$1,Response:Response$1})=>({Request:Request$1,Response:Response$1}))(utils_default.global),{ReadableStream:ReadableStream$1,TextEncoder:TextEncoder$1}=utils_default.global,test$1=(fn,...args)=>{try{return!!fn(...args)}catch{return!1}},factory=env=>{env=utils_default.merge.call({skipUndefined:!0},globalFetchAPI,env);let{fetch:envFetch,Request:Request$1,Response:Response$1}=env,isFetchSupported=envFetch?isFunction(envFetch):typeof fetch==`function`,isRequestSupported=isFunction(Request$1),isResponseSupported=isFunction(Response$1);if(!isFetchSupported)return!1;let isReadableStreamSupported=isFetchSupported&&isFunction(ReadableStream$1),encodeText=isFetchSupported&&(typeof TextEncoder$1==`function`?(encoder=>str=>encoder.encode(str))(new TextEncoder$1):async str=>new Uint8Array(await new Request$1(str).arrayBuffer())),supportsRequestStream=isRequestSupported&&isReadableStreamSupported&&test$1(()=>{let duplexAccessed=!1,hasContentType=new Request$1(platform_default.origin,{body:new ReadableStream$1,method:`POST`,get duplex(){return duplexAccessed=!0,`half`}}).headers.has(`Content-Type`);return duplexAccessed&&!hasContentType}),supportsResponseStream=isResponseSupported&&isReadableStreamSupported&&test$1(()=>utils_default.isReadableStream(new Response$1(``).body)),resolvers={stream:supportsResponseStream&&(res=>res.body)};isFetchSupported&&[`text`,`arrayBuffer`,`blob`,`formData`,`stream`].forEach(type=>{!resolvers[type]&&(resolvers[type]=(res,config)=>{let method=res&&res[type];if(method)return method.call(res);throw new AxiosError_default(`Response type '${type}' is not supported`,AxiosError_default.ERR_NOT_SUPPORT,config)})});let getBodyLength=async body=>{if(body==null)return 0;if(utils_default.isBlob(body))return body.size;if(utils_default.isSpecCompliantForm(body))return(await new Request$1(platform_default.origin,{method:`POST`,body}).arrayBuffer()).byteLength;if(utils_default.isArrayBufferView(body)||utils_default.isArrayBuffer(body))return body.byteLength;if(utils_default.isURLSearchParams(body)&&(body+=``),utils_default.isString(body))return(await encodeText(body)).byteLength},resolveBodyLength=async(headers,body)=>utils_default.toFiniteNumber(headers.getContentLength())??getBodyLength(body);return async config=>{let{url,method,data,signal,cancelToken,timeout:timeout$1,onDownloadProgress,onUploadProgress,responseType,headers,withCredentials=`same-origin`,fetchOptions}=resolveConfig_default(config),_fetch=envFetch||fetch;responseType=responseType?(responseType+``).toLowerCase():`text`;let composedSignal=composeSignals_default([signal,cancelToken&&cancelToken.toAbortSignal()],timeout$1),request=null,unsubscribe=composedSignal&&composedSignal.unsubscribe&&(()=>{composedSignal.unsubscribe()}),requestContentLength;try{if(onUploadProgress&&supportsRequestStream&&method!==`get`&&method!==`head`&&(requestContentLength=await resolveBodyLength(headers,data))!==0){let _request=new Request$1(url,{method:`POST`,body:data,duplex:`half`}),contentTypeHeader;if(utils_default.isFormData(data)&&(contentTypeHeader=_request.headers.get(`content-type`))&&headers.setContentType(contentTypeHeader),_request.body){let[onProgress,flush$1]=progressEventDecorator(requestContentLength,progressEventReducer(asyncDecorator(onUploadProgress)));data=trackStream(_request.body,DEFAULT_CHUNK_SIZE,onProgress,flush$1)}}utils_default.isString(withCredentials)||(withCredentials=withCredentials?`include`:`omit`);let isCredentialsSupported=isRequestSupported&&`credentials`in Request$1.prototype,resolvedOptions={...fetchOptions,signal:composedSignal,method:method.toUpperCase(),headers:headers.normalize().toJSON(),body:data,duplex:`half`,credentials:isCredentialsSupported?withCredentials:void 0};request=isRequestSupported&&new Request$1(url,resolvedOptions);let response=await(isRequestSupported?_fetch(request,fetchOptions):_fetch(url,resolvedOptions)),isStreamResponse=supportsResponseStream&&(responseType===`stream`||responseType===`response`);if(supportsResponseStream&&(onDownloadProgress||isStreamResponse&&unsubscribe)){let options$1={};[`status`,`statusText`,`headers`].forEach(prop=>{options$1[prop]=response[prop]});let responseContentLength=utils_default.toFiniteNumber(response.headers.get(`content-length`)),[onProgress,flush$1]=onDownloadProgress&&progressEventDecorator(responseContentLength,progressEventReducer(asyncDecorator(onDownloadProgress),!0))||[];response=new Response$1(trackStream(response.body,DEFAULT_CHUNK_SIZE,onProgress,()=>{flush$1&&flush$1(),unsubscribe&&unsubscribe()}),options$1)}responseType||=`text`;let responseData=await resolvers[utils_default.findKey(resolvers,responseType)||`text`](response,config);return!isStreamResponse&&unsubscribe&&unsubscribe(),await new Promise((resolve,reject)=>{settle(resolve,reject,{data:responseData,headers:AxiosHeaders_default.from(response.headers),status:response.status,statusText:response.statusText,config,request})})}catch(err){throw unsubscribe&&unsubscribe(),err&&err.name===`TypeError`&&/Load failed|fetch/i.test(err.message)?Object.assign(new AxiosError_default(`Network Error`,AxiosError_default.ERR_NETWORK,config,request),{cause:err.cause||err}):AxiosError_default.from(err,err&&err.code,config,request)}}},seedCache=new Map;const getFetch=config=>{let env=config&&config.env||{},{fetch:fetch$1,Request:Request$1,Response:Response$1}=env,seeds=[Request$1,Response$1,fetch$1],i$4=seeds.length,seed,target,map=seedCache;for(;i$4--;)seed=seeds[i$4],target=map.get(seed),target===void 0&&map.set(seed,target=i$4?new Map:factory(env)),map=target;return target};var adapter=getFetch(),knownAdapters={http:null,xhr:xhr_default,fetch:{get:getFetch}};utils_default.forEach(knownAdapters,(fn,value)=>{if(fn){try{Object.defineProperty(fn,`name`,{value})}catch{}Object.defineProperty(fn,`adapterName`,{value})}});var renderReason=reason=>`- ${reason}`,isResolvedHandle=adapter$1=>utils_default.isFunction(adapter$1)||adapter$1===null||adapter$1===!1;function getAdapter(adapters,config){adapters=utils_default.isArray(adapters)?adapters:[adapters];let{length}=adapters,nameOrAdapter,adapter$1,rejectedReasons={};for(let i$4=0;i$4<length;i$4++){nameOrAdapter=adapters[i$4];let id$3;if(adapter$1=nameOrAdapter,!isResolvedHandle(nameOrAdapter)&&(adapter$1=knownAdapters[(id$3=String(nameOrAdapter)).toLowerCase()],adapter$1===void 0))throw new AxiosError_default(`Unknown adapter '${id$3}'`);if(adapter$1&&(utils_default.isFunction(adapter$1)||(adapter$1=adapter$1.get(config))))break;rejectedReasons[id$3||`#`+i$4]=adapter$1}if(!adapter$1){let reasons=Object.entries(rejectedReasons).map(([id$3,state])=>`adapter ${id$3} `+(state===!1?`is not supported by the environment`:`is not available in the build`));throw new AxiosError_default(`There is no suitable adapter to dispatch the request `+(length?reasons.length>1?`since :
`+reasons.map(renderReason).join(`
`):` `+renderReason(reasons[0]):`as no adapter specified`),`ERR_NOT_SUPPORT`)}return adapter$1}var adapters_default={getAdapter,adapters:knownAdapters};function throwIfCancellationRequested(config){if(config.cancelToken&&config.cancelToken.throwIfRequested(),config.signal&&config.signal.aborted)throw new CanceledError_default(null,config)}function dispatchRequest(config){return throwIfCancellationRequested(config),config.headers=AxiosHeaders_default.from(config.headers),config.data=transformData.call(config,config.transformRequest),[`post`,`put`,`patch`].indexOf(config.method)!==-1&&config.headers.setContentType(`application/x-www-form-urlencoded`,!1),adapters_default.getAdapter(config.adapter||defaults_default.adapter,config)(config).then(function(response){return throwIfCancellationRequested(config),response.data=transformData.call(config,config.transformResponse,response),response.headers=AxiosHeaders_default.from(response.headers),response},function(reason){return isCancel(reason)||(throwIfCancellationRequested(config),reason&&reason.response&&(reason.response.data=transformData.call(config,config.transformResponse,reason.response),reason.response.headers=AxiosHeaders_default.from(reason.response.headers))),Promise.reject(reason)})}const VERSION=`1.13.2`;var validators$1={};[`object`,`boolean`,`number`,`function`,`string`,`symbol`].forEach((type,i$4)=>{validators$1[type]=function(thing){return typeof thing===type||`a`+(i$4<1?`n `:` `)+type}});var deprecatedWarnings={};validators$1.transitional=function(validator,version,message){function formatMessage(opt,desc){return`[Axios v`+VERSION+`] Transitional option '`+opt+`'`+desc+(message?`. `+message:``)}return(value,opt,opts)=>{if(validator===!1)throw new AxiosError_default(formatMessage(opt,` has been removed`+(version?` in `+version:``)),AxiosError_default.ERR_DEPRECATED);return version&&!deprecatedWarnings[opt]&&(deprecatedWarnings[opt]=!0,console.warn(formatMessage(opt,` has been deprecated since v`+version+` and will be removed in the near future`))),validator?validator(value,opt,opts):!0}},validators$1.spelling=function(correctSpelling){return(value,opt)=>(console.warn(`${opt} is likely a misspelling of ${correctSpelling}`),!0)};function assertOptions(options$1,schema,allowUnknown){if(typeof options$1!=`object`)throw new AxiosError_default(`options must be an object`,AxiosError_default.ERR_BAD_OPTION_VALUE);let keys=Object.keys(options$1),i$4=keys.length;for(;i$4-- >0;){let opt=keys[i$4],validator=schema[opt];if(validator){let value=options$1[opt],result=value===void 0||validator(value,opt,options$1);if(result!==!0)throw new AxiosError_default(`option `+opt+` must be `+result,AxiosError_default.ERR_BAD_OPTION_VALUE);continue}if(allowUnknown!==!0)throw new AxiosError_default(`Unknown option `+opt,AxiosError_default.ERR_BAD_OPTION)}}var validator_default={assertOptions,validators:validators$1},validators=validator_default.validators,Axios=class{constructor(instanceConfig){this.defaults=instanceConfig||{},this.interceptors={request:new InterceptorManager_default,response:new InterceptorManager_default}}async request(configOrUrl,config){try{return await this._request(configOrUrl,config)}catch(err){if(err instanceof Error){let dummy={};Error.captureStackTrace?Error.captureStackTrace(dummy):dummy=Error();let stack=dummy.stack?dummy.stack.replace(/^.+\n/,``):``;try{err.stack?stack&&!String(err.stack).endsWith(stack.replace(/^.+\n.+\n/,``))&&(err.stack+=`
`+stack):err.stack=stack}catch{}}throw err}}_request(configOrUrl,config){typeof configOrUrl==`string`?(config||={},config.url=configOrUrl):config=configOrUrl||{},config=mergeConfig(this.defaults,config);let{transitional,paramsSerializer,headers}=config;transitional!==void 0&&validator_default.assertOptions(transitional,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),paramsSerializer!=null&&(utils_default.isFunction(paramsSerializer)?config.paramsSerializer={serialize:paramsSerializer}:validator_default.assertOptions(paramsSerializer,{encode:validators.function,serialize:validators.function},!0)),config.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls===void 0?config.allowAbsoluteUrls=!0:config.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls),validator_default.assertOptions(config,{baseUrl:validators.spelling(`baseURL`),withXsrfToken:validators.spelling(`withXSRFToken`)},!0),config.method=(config.method||this.defaults.method||`get`).toLowerCase();let contextHeaders=headers&&utils_default.merge(headers.common,headers[config.method]);headers&&utils_default.forEach([`delete`,`get`,`head`,`post`,`put`,`patch`,`common`],method=>{delete headers[method]}),config.headers=AxiosHeaders_default.concat(contextHeaders,headers);let requestInterceptorChain=[],synchronousRequestInterceptors=!0;this.interceptors.request.forEach(function(interceptor){typeof interceptor.runWhen==`function`&&interceptor.runWhen(config)===!1||(synchronousRequestInterceptors&&=interceptor.synchronous,requestInterceptorChain.unshift(interceptor.fulfilled,interceptor.rejected))});let responseInterceptorChain=[];this.interceptors.response.forEach(function(interceptor){responseInterceptorChain.push(interceptor.fulfilled,interceptor.rejected)});let promise,i$4=0,len;if(!synchronousRequestInterceptors){let chain=[dispatchRequest.bind(this),void 0];for(chain.unshift(...requestInterceptorChain),chain.push(...responseInterceptorChain),len=chain.length,promise=Promise.resolve(config);i$4<len;)promise=promise.then(chain[i$4++],chain[i$4++]);return promise}len=requestInterceptorChain.length;let newConfig=config;for(;i$4<len;){let onFulfilled=requestInterceptorChain[i$4++],onRejected=requestInterceptorChain[i$4++];try{newConfig=onFulfilled(newConfig)}catch(error$1){onRejected.call(this,error$1);break}}try{promise=dispatchRequest.call(this,newConfig)}catch(error$1){return Promise.reject(error$1)}for(i$4=0,len=responseInterceptorChain.length;i$4<len;)promise=promise.then(responseInterceptorChain[i$4++],responseInterceptorChain[i$4++]);return promise}getUri(config){return config=mergeConfig(this.defaults,config),buildURL(buildFullPath(config.baseURL,config.url,config.allowAbsoluteUrls),config.params,config.paramsSerializer)}};utils_default.forEach([`delete`,`get`,`head`,`options`],function(method){Axios.prototype[method]=function(url,config){return this.request(mergeConfig(config||{},{method,url,data:(config||{}).data}))}}),utils_default.forEach([`post`,`put`,`patch`],function(method){function generateHTTPMethod(isForm){return function(url,data,config){return this.request(mergeConfig(config||{},{method,headers:isForm?{"Content-Type":`multipart/form-data`}:{},url,data}))}}Axios.prototype[method]=generateHTTPMethod(),Axios.prototype[method+`Form`]=generateHTTPMethod(!0)});var Axios_default=Axios,CancelToken=class CancelToken{constructor(executor){if(typeof executor!=`function`)throw TypeError(`executor must be a function.`);let resolvePromise;this.promise=new Promise(function(resolve){resolvePromise=resolve});let token=this;this.promise.then(cancel=>{if(!token._listeners)return;let i$4=token._listeners.length;for(;i$4-- >0;)token._listeners[i$4](cancel);token._listeners=null}),this.promise.then=onfulfilled=>{let _resolve,promise=new Promise(resolve=>{token.subscribe(resolve),_resolve=resolve}).then(onfulfilled);return promise.cancel=function(){token.unsubscribe(_resolve)},promise},executor(function(message,config,request){token.reason||(token.reason=new CanceledError_default(message,config,request),resolvePromise(token.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(listener){if(this.reason){listener(this.reason);return}this._listeners?this._listeners.push(listener):this._listeners=[listener]}unsubscribe(listener){if(!this._listeners)return;let index$2=this._listeners.indexOf(listener);index$2!==-1&&this._listeners.splice(index$2,1)}toAbortSignal(){let controller=new AbortController,abort=err=>{controller.abort(err)};return this.subscribe(abort),controller.signal.unsubscribe=()=>this.unsubscribe(abort),controller.signal}static source(){let cancel;return{token:new CancelToken(function(c$3){cancel=c$3}),cancel}}},CancelToken_default=CancelToken;function spread(callback){return function(arr){return callback.apply(null,arr)}}function isAxiosError(payload){return utils_default.isObject(payload)&&payload.isAxiosError===!0}var HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(HttpStatusCode).forEach(([key$1,value])=>{HttpStatusCode[value]=key$1});var HttpStatusCode_default=HttpStatusCode;function createInstance(defaultConfig){let context=new Axios_default(defaultConfig),instance=bind(Axios_default.prototype.request,context);return utils_default.extend(instance,Axios_default.prototype,context,{allOwnKeys:!0}),utils_default.extend(instance,context,null,{allOwnKeys:!0}),instance.create=function(instanceConfig){return createInstance(mergeConfig(defaultConfig,instanceConfig))},instance}var axios=createInstance(defaults_default);axios.Axios=Axios_default,axios.CanceledError=CanceledError_default,axios.CancelToken=CancelToken_default,axios.isCancel=isCancel,axios.VERSION=VERSION,axios.toFormData=toFormData_default,axios.AxiosError=AxiosError_default,axios.Cancel=axios.CanceledError,axios.all=function(promises){return Promise.all(promises)},axios.spread=spread,axios.isAxiosError=isAxiosError,axios.mergeConfig=mergeConfig,axios.AxiosHeaders=AxiosHeaders_default,axios.formToJSON=thing=>formDataToJSON_default(utils_default.isHTMLForm(thing)?new FormData(thing):thing),axios.getAdapter=adapters_default.getAdapter,axios.HttpStatusCode=HttpStatusCode_default,axios.default=axios;var axios_default=axios,API_BASE_URL$7=`/api/user`,SESSION_STORAGE_KEY=`session_playtime_seconds`;const usePlayTime=()=>{let[playTime,setPlayTime]=(0,import_react.useState)(()=>{let stored=sessionStorage.getItem(SESSION_STORAGE_KEY);return stored?parseInt(stored,10):0}),{isLoggedIn}=useAuth(),timerRef=(0,import_react.useRef)(null);(0,import_react.useEffect)(()=>{playTime>0&&sessionStorage.setItem(SESSION_STORAGE_KEY,playTime.toString())},[playTime]);let sendHeartbeat=(0,import_react.useCallback)(async()=>{if(isLoggedIn)try{let token=localStorage.getItem(`accessToken`);if(!token)return;await axios_default.post(`${API_BASE_URL$7}/heartbeat`,{},{headers:{Authorization:`Bearer ${token}`}})}catch(error$1){console.error(`Heartbeat failed:`,error$1)}},[isLoggedIn]);return(0,import_react.useEffect)(()=>{if(!isLoggedIn)return;let heartbeatInterval=setInterval(sendHeartbeat,6e4);return()=>clearInterval(heartbeatInterval)},[isLoggedIn,sendHeartbeat]),(0,import_react.useEffect)(()=>{if(!isLoggedIn)return;let startTimer=()=>{timerRef.current||=setInterval(()=>{setPlayTime(prev=>prev+1)},1e3)},stopTimer=()=>{timerRef.current&&=(clearInterval(timerRef.current),null)},handleVisibilityChange=()=>{document.visibilityState===`visible`?startTimer():stopTimer()};return document.visibilityState===`visible`&&startTimer(),document.addEventListener(`visibilitychange`,handleVisibilityChange),()=>{stopTimer(),document.removeEventListener(`visibilitychange`,handleVisibilityChange)}},[isLoggedIn]),playTime},STICKERS=[{id:`free_1`,url:`https://cdn-icons-png.flaticon.com/512/833/833472.png`,isPremium:!1,name:` 1`},{id:`free_2`,url:`https://cdn-icons-png.flaticon.com/512/1828/1828884.png`,isPremium:!1,name:` 2`},{id:`free_3`,url:`https://cdn-icons-png.flaticon.com/512/785/785116.png`,isPremium:!1,name:` 3`},{id:`free_4`,url:`https://cdn-icons-png.flaticon.com/512/346/346167.png`,isPremium:!1,name:` 4`},{id:`free_5`,url:`https://cdn-icons-png.flaticon.com/512/742/742751.png`,isPremium:!0,price:150,packId:`pack_basic`,name:``},{id:`free_6`,url:`https://cdn-icons-png.flaticon.com/512/169/169367.png`,isPremium:!0,price:150,packId:`pack_basic`,name:``},{id:`free_7`,url:`https://cdn-icons-png.flaticon.com/512/414/414825.png`,isPremium:!0,price:150,packId:`pack_basic`,name:``},{id:`free_8`,url:`https://cdn-icons-png.flaticon.com/512/651/651717.png`,isPremium:!0,price:150,packId:`pack_basic`,name:``},{id:`free_9`,url:`https://cdn-icons-png.flaticon.com/512/190/190411.png`,isPremium:!0,price:150,packId:`pack_basic`,name:``},{id:`free_10`,url:`https://cdn-icons-png.flaticon.com/512/126/126473.png`,isPremium:!0,price:150,packId:`pack_basic`,name:``},{id:`cat_1`,url:`https://cdn-icons-png.flaticon.com/512/616/616408.png`,isPremium:!0,price:200,packId:`sticker_pack_001`,name:` 1`},{id:`cat_2`,url:`https://cdn-icons-png.flaticon.com/512/616/616430.png`,isPremium:!0,price:200,packId:`sticker_pack_001`,name:` 2`},{id:`cat_3`,url:`https://cdn-icons-png.flaticon.com/512/2663/2663067.png`,isPremium:!0,price:200,packId:`sticker_pack_001`,name:` 3`},{id:`cat_4`,url:`https://img.icons8.com/color/512/panda.png`,isPremium:!0,price:200,packId:`sticker_pack_001`,name:` 4`},{id:`cat_5`,url:`https://img.icons8.com/color/512/fox.png`,isPremium:!0,price:200,packId:`sticker_pack_001`,name:` 5`},{id:`vintage_1`,url:`https://cdn-icons-png.flaticon.com/512/2361/2361730.png`,isPremium:!0,price:300,packId:`sticker_pack_002`,name:`  1`},{id:`vintage_2`,url:`https://cdn-icons-png.flaticon.com/512/3739/3739054.png`,isPremium:!0,price:300,packId:`sticker_pack_002`,name:`  2`},{id:`vintage_3`,url:`https://cdn-icons-png.flaticon.com/512/2361/2361841.png`,isPremium:!0,price:300,packId:`sticker_pack_002`,name:`  3`},{id:`pixel_1`,url:`https://cdn-icons-png.flaticon.com/512/10603/10603762.png`,isPremium:!0,price:250,packId:`sticker_pack_003`,name:`  1`},{id:`pixel_2`,url:`https://cdn-icons-png.flaticon.com/512/10603/10603764.png`,isPremium:!0,price:250,packId:`sticker_pack_003`,name:`  2`},{id:`pixel_3`,url:`https://cdn-icons-png.flaticon.com/512/10603/10603761.png`,isPremium:!0,price:250,packId:`sticker_pack_003`,name:`  3`},{id:`travel_1`,url:`https://cdn-icons-png.flaticon.com/512/727/727289.png`,isPremium:!0,price:350,packId:`sticker_pack_004`,name:` 1`},{id:`travel_2`,url:`https://cdn-icons-png.flaticon.com/512/685/685655.png`,isPremium:!0,price:350,packId:`sticker_pack_004`,name:` 2`},{id:`travel_3`,url:`https://cdn-icons-png.flaticon.com/512/1865/1865269.png`,isPremium:!0,price:350,packId:`sticker_pack_004`,name:` 3`},{id:`travel_4`,url:`https://cdn-icons-png.flaticon.com/512/2903/2903554.png`,isPremium:!0,price:350,packId:`sticker_pack_004`,name:` 4`},{id:`food_1`,url:`https://cdn-icons-png.flaticon.com/512/3595/3595455.png`,isPremium:!0,price:250,packId:`sticker_pack_005`,name:` 1`},{id:`food_2`,url:`https://cdn-icons-png.flaticon.com/512/3075/3075977.png`,isPremium:!0,price:250,packId:`sticker_pack_005`,name:` 2`},{id:`food_3`,url:`https://img.icons8.com/color/512/hot-dog.png`,isPremium:!0,price:250,packId:`sticker_pack_005`,name:` 3`},{id:`food_4`,url:`https://cdn-icons-png.flaticon.com/512/3194/3194593.png`,isPremium:!0,price:250,packId:`sticker_pack_005`,name:` 4`},{id:`daily_1`,url:`https://cdn-icons-png.flaticon.com/512/2935/2935307.png`,isPremium:!0,price:150,packId:`sticker_pack_006`,name:` 1`},{id:`daily_2`,url:`https://cdn-icons-png.flaticon.com/512/3389/3389081.png`,isPremium:!0,price:150,packId:`sticker_pack_006`,name:` 2`},{id:`daily_3`,url:`https://cdn-icons-png.flaticon.com/512/3659/3659899.png`,isPremium:!0,price:150,packId:`sticker_pack_006`,name:` 3`},{id:`daily_4`,url:`https://cdn-icons-png.flaticon.com/512/2097/2097068.png`,isPremium:!0,price:150,packId:`sticker_pack_006`,name:` 4`}],FONT_FAMILIES=[{name:`Noto Sans KR`,value:`'Noto Sans KR', sans-serif`},{name:``,value:`'Nanum Gothic', sans-serif`},{name:``,value:`'Nanum Myeongjo', serif`},{name:``,value:`'Gowun Dodum', sans-serif`},{name:``,value:`'Gowun Batang', serif`},{name:``,value:`'Song Myung', serif`},{name:``,value:`'Black Han Sans', sans-serif`},{name:``,value:`'Do Hyeon', sans-serif`},{name:``,value:`'Jua', sans-serif`},{name:``,value:`'Yeon Sung', cursive`},{name:``,value:`'Sunflower', sans-serif`},{name:` A1`,value:`'Gothic A1', sans-serif`},{name:``,value:`'Hi Melody', cursive`},{name:``,value:`'Gamja Flower', cursive`},{name:``,value:`'Poor Story', cursive`},{name:`IBM Plex Sans KR`,value:`'IBM Plex Sans KR', sans-serif`},{name:``,value:`'Bagel Fat One', cursive`},{name:``,value:`'Dongle', sans-serif`},{name:``,value:`'Single Day', cursive`}],LAYOUT_PRESETS=[{id:`type-a`,name:` `,description:`      `,structure:[{type:`image-full`,text:``},{type:`paragraph`,text:``},{type:`image-double`,text:``},{type:`paragraph`,text:``}]},{id:`type-b`,name:` `,description:`,     `,structure:[{type:`image-left`,text:``},{type:`image-right`,text:``},{type:`image-left`,text:``},{type:`paragraph`,text:``}]},{id:`type-c`,name:` `,description:`     `,structure:[{type:`image-double`,text:``},{type:`image-double`,text:``},{type:`image-full`,text:``},{type:`paragraph`,text:``}]},{id:`type-d`,name:` `,description:`     `,structure:[{type:`paragraph`,text:``},{type:`paragraph`,text:``},{type:`image-full`,text:``},{type:`paragraph`,text:``}]}];var API_BASE_URL$6=`/api/market`,mapBackendItemToFrontend=i$4=>{let content={description:``,tags:[],imageUrl:``};try{i$4.contentJson&&(content=JSON.parse(i$4.contentJson))}catch{console.warn(`Failed to parse contentJson for item`,i$4.id)}let knownPackIds=new Set(STICKERS.map(s$3=>s$3.packId).filter(Boolean)),isPack=[`start_pack`,`package`,`PACKAGE`].includes(i$4.category)||i$4.referenceId&&knownPackIds.has(String(i$4.referenceId));return{id:String(i$4.id),title:i$4.name,price:i$4.price,description:i$4.description||content.description||``,tags:i$4.tags||content.tags||[],imageUrl:i$4.imageUrl||content.imageUrl||content.thumbnailUrl||``,type:isPack?`package`:i$4.category,author:i$4.sellerName,sellerId:i$4.sellerId?String(i$4.sellerId):void 0,status:i$4.status,createdAt:i$4.createdAt,salesCount:i$4.salesCount||0,referenceId:i$4.referenceId,averageRating:i$4.averageRating,reviewCount:i$4.reviewCount,purchasedAt:i$4.transactionDate,isBackend:!0,content:content.content,decorations:content.decorations,widgetType:content.widgetType,defaultSize:content.defaultSize}};const useMarket=()=>{let{credits,refreshCredits,userId,addCredits}=useCredits(),[purchasedItems,setPurchasedItems]=(0,import_react.useState)([]),[sellingItems,setSellingItems]=(0,import_react.useState)([]),[marketItems,setMarketItems]=(0,import_react.useState)([]),[wishlistItems,setWishlistItems]=(0,import_react.useState)([]),[wishlistDetails,setWishlistDetails]=(0,import_react.useState)([]),[page,setPage]=(0,import_react.useState)(0),[hasMore,setHasMore]=(0,import_react.useState)(!0),[keyword,setKeyword]=(0,import_react.useState)(``),[sort,setSort]=(0,import_react.useState)(`popular`),[totalCount,setTotalCount]=(0,import_react.useState)(0),[sellerId,setSellerId]=(0,import_react.useState)(null),[selectedTags,setSelectedTags]=(0,import_react.useState)([]),[category,setCategory]=(0,import_react.useState)(`all`),[isFree,setIsFree]=(0,import_react.useState)(!1),fetchUserData=(0,import_react.useCallback)(async()=>{let token=localStorage.getItem(`accessToken`);if(token)try{let purchasedRes=await fetch(`${API_BASE_URL$6}/purchased`,{headers:{Authorization:`Bearer ${token}`}});purchasedRes.ok&&setPurchasedItems((await purchasedRes.json()).flatMap(i$4=>{let mainItem=mapBackendItemToFrontend(i$4),virtualItems=[];return mainItem.referenceId&&STICKERS.filter(s$3=>s$3.packId===mainItem.referenceId).forEach(sticker=>{virtualItems.push({id:sticker.id,title:sticker.name||` `,imageUrl:sticker.url,price:sticker.price||0,type:`sticker`,author:mainItem.author,purchasedAt:mainItem.purchasedAt,status:`OWNED`,referenceId:sticker.id,isVirtual:!0,description:`${mainItem.title} `,tags:[`Pack Content`],averageRating:mainItem.averageRating,reviewCount:mainItem.reviewCount,createdAt:mainItem.createdAt,salesCount:mainItem.salesCount})}),[mainItem,...virtualItems]}).filter((item,_$1,self$1)=>!(!item.isVirtual&&item.referenceId&&self$1.some(other=>other.isVirtual&&other.referenceId===item.referenceId))));let sellingRes=await fetch(`${API_BASE_URL$6}/my-items`,{headers:{Authorization:`Bearer ${token}`}});sellingRes.ok&&setSellingItems((await sellingRes.json()).map(mapBackendItemToFrontend));let wishRes=await fetch(`${API_BASE_URL$6}/wishlist`,{headers:{Authorization:`Bearer ${token}`}});if(wishRes.ok){let mapped=(await wishRes.json()).map(mapBackendItemToFrontend);setWishlistDetails(mapped),setWishlistItems(mapped.map(i$4=>i$4.id))}}catch(e$4){console.error(`Failed to fetch user market data`,e$4)}},[userId]),fetchMarketFeed=(0,import_react.useCallback)(async(isLoadMore=!1)=>{let token=localStorage.getItem(`accessToken`),targetPage=isLoadMore?page+1:0;isLoadMore||setPage(0);let sortParam=`salesCount,desc`;sort===`latest`&&(sortParam=`createdAt,desc`),sort===`price_low`&&(sortParam=`price,asc`),sort===`price_high`&&(sortParam=`price,desc`);let query=new URLSearchParams({page:String(targetPage),size:`12`,sort:sortParam});keyword&&query.append(`keyword`,keyword),sellerId&&query.append(`sellerId`,sellerId),selectedTags.length>0&&selectedTags.forEach(t$4=>query.append(`tags`,t$4)),category&&category!==`all`&&query.append(`category`,category),isFree&&query.append(`isFree`,`true`);try{let res=await fetch(`${API_BASE_URL$6}/items?${query.toString()}`,{headers:token?{Authorization:`Bearer ${token}`}:{}});if(res.ok){let data=await res.json();setTotalCount(data.page?.totalElements??data.totalElements??0);let fetchedItems=data.content.map(mapBackendItemToFrontend),visibleItems=fetchedItems;userId&&sellerId===String(userId)&&(visibleItems=fetchedItems.filter(i$4=>String(i$4.sellerId)===String(userId))),isLoadMore?(setMarketItems(prev=>{let existingIds=new Set(prev.map(p$3=>p$3.id)),newUnique=visibleItems.filter(i$4=>!existingIds.has(i$4.id));return[...prev,...newUnique]}),setPage(targetPage)):setMarketItems(visibleItems),setHasMore(!data.last)}}catch(e$4){console.error(`Failed to fetch market feed`,e$4)}},[page,sort,keyword,sellerId,selectedTags,category,isFree,userId,sellingItems.length]);(0,import_react.useEffect)(()=>{fetchUserData()},[fetchUserData]),(0,import_react.useEffect)(()=>{fetchMarketFeed(!1)},[sort,keyword,sellerId,selectedTags,category,isFree]);let refreshMarket=(0,import_react.useCallback)(async(options$1={})=>{options$1.isLoadMore?await fetchMarketFeed(!0):await Promise.all([fetchUserData(),fetchMarketFeed(!1)])},[fetchUserData,fetchMarketFeed]),loadMore=(0,import_react.useCallback)(()=>{hasMore&&fetchMarketFeed(!0)},[hasMore,fetchMarketFeed]),filterBySeller=(0,import_react.useCallback)(id$3=>{setSellerId(id$3),setKeyword(``),setPage(0)},[]),filterByTag=(0,import_react.useCallback)(tag=>{setSelectedTags(tag===null?[]:prev=>prev.includes(tag)?prev.filter(t$4=>t$4!==tag):[...prev,tag]),setKeyword(``),setPage(0)},[]),search=(0,import_react.useCallback)(kw=>{setKeyword(kw),setSellerId(null),setSelectedTags([]),setPage(0)},[]),toggleWishlist=(0,import_react.useCallback)(async itemOrId=>{let token=localStorage.getItem(`accessToken`);if(!token){alert(` .`);return}let itemId=typeof itemOrId==`string`?itemOrId:itemOrId.id;try{let res=await fetch(`${API_BASE_URL$6}/wishlist/${itemId}`,{method:`POST`,headers:{Authorization:`Bearer ${token}`}});if(res.ok){let data=await res.json();setWishlistItems(prev=>data.added?[...prev,String(itemId)]:prev.filter(id$3=>id$3!==String(itemId))),setWishlistDetails(prev=>{if(data.added){if(typeof itemOrId!=`string`)return[...prev,itemOrId];let itemToAdd=marketItems.find(i$4=>String(i$4.id)===String(itemId))||purchasedItems.find(i$4=>String(i$4.id)===String(itemId))||sellingItems.find(i$4=>String(i$4.id)===String(itemId));return itemToAdd?[...prev,itemToAdd]:prev}else return prev.filter(item=>String(item.id)!==String(itemId))})}}catch(e$4){console.error(`Failed to toggle wishlist`,e$4)}},[marketItems,purchasedItems,sellingItems]),updateItemInState=(0,import_react.useCallback)((itemId,updates)=>{setMarketItems(prev=>prev.map(item=>String(item.id)===String(itemId)?{...item,...updates}:item)),setSellingItems(prev=>prev.map(item=>String(item.id)===String(itemId)?{...item,...updates}:item)),setWishlistDetails(prev=>prev.map(item=>String(item.id)===String(itemId)?{...item,...updates}:item))},[]),registerItem=(0,import_react.useCallback)(async item=>{let token=localStorage.getItem(`accessToken`);if(token)try{let contentJson=``;contentJson=[`template_post`,`TEMPLATE_POST`].includes(item.type)?JSON.stringify({name:item.name||item.title,styles:item.styles||{},defaultFontColor:item.defaultFontColor||`#000000`,stickers:(item.stickers||[]).map(s$3=>{let{widgetType,...safeSticker}=s$3;return safeSticker}),floatingTexts:item.floatingTexts||[],floatingImages:item.floatingImages||[],thumbnailUrl:item.imageUrl,tags:item.tags||[]}):item.type===`template_widget`||item.type===`custom-block`||typeof item.type==`string`&&item.type.startsWith(`custom-`)?JSON.stringify({description:item.description,imageUrl:item.imageUrl,tags:item.tags,content:item.content,decorations:item.decorations,styles:item.styles,widgetType:item.widgetType||(item.type===`template_widget`?`custom-block`:item.type),defaultSize:item.defaultSize}):JSON.stringify({description:item.description,imageUrl:item.imageUrl,tags:item.tags});let payload={name:item.title,price:item.price,category:item.type||`sticker`,description:item.description,imageUrl:item.imageUrl,contentJson,referenceId:item.originalId?.toString()||item.id?.toString()};(await fetch(`${API_BASE_URL$6}/items`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify(payload)})).ok?await Promise.all([fetchUserData(),fetchMarketFeed(!1),refreshCredits()]):alert(`  `)}catch(e$4){console.error(e$4),alert(`    `)}},[fetchUserData,fetchMarketFeed,refreshCredits]),updateItem=(0,import_react.useCallback)(async(itemId,itemData)=>{let token=localStorage.getItem(`accessToken`);if(!token)return alert(` .`),!1;try{let contentJson=``;contentJson=[`template_post`,`TEMPLATE_POST`].includes(itemData.type)?JSON.stringify({name:itemData.name||itemData.title,styles:itemData.styles||{},defaultFontColor:itemData.defaultFontColor||`#000000`,stickers:(itemData.stickers||[]).map(s$3=>{let{widgetType,...safeSticker}=s$3;return safeSticker}),floatingTexts:itemData.floatingTexts||[],floatingImages:itemData.floatingImages||[],thumbnailUrl:itemData.imageUrl,tags:itemData.tags||[]}):itemData.type===`template_widget`||itemData.type===`custom-block`||typeof itemData.type==`string`&&itemData.type.startsWith(`custom-`)?JSON.stringify({description:itemData.description,imageUrl:itemData.imageUrl,tags:itemData.tags,content:itemData.content,decorations:itemData.decorations,styles:itemData.styles,widgetType:itemData.widgetType||(itemData.type===`template_widget`?`custom-block`:itemData.type),defaultSize:itemData.defaultSize}):JSON.stringify({description:itemData.description,imageUrl:itemData.imageUrl,tags:itemData.tags});let body={name:itemData.title,price:itemData.price,category:itemData.type,description:itemData.description,contentJson},response=await fetch(`${API_BASE_URL$6}/items/${itemId}`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify(body)});if(response.ok)return await fetchUserData(),!0;{let errorText=await response.text();return alert(` : ${errorText}`),!1}}catch(error$1){return console.error(`Failed to update item`,error$1),alert(`   .`),!1}},[fetchUserData]),cancelItem=(0,import_react.useCallback)(async itemId=>{let token=localStorage.getItem(`accessToken`);if(token)try{(await fetch(`${API_BASE_URL$6}/cancel/${itemId}`,{method:`POST`,headers:{Authorization:`Bearer ${token}`}})).ok?await Promise.all([fetchUserData(),fetchMarketFeed(!1)]):alert(`  `)}catch(e$4){console.error(e$4)}},[fetchUserData,fetchMarketFeed]),isOwned=(0,import_react.useCallback)(itemId=>{let checkId=String(itemId);if(purchasedItems.some(i$4=>String(i$4.id)===checkId))return!0;let itemDef=marketItems.find(i$4=>String(i$4.id)===checkId)||sellingItems.find(i$4=>String(i$4.id)===checkId)||wishlistDetails.find(i$4=>String(i$4.id)===checkId),refId=itemDef?.referenceId||checkId,targetIsTemplate=itemDef?[`template_post`,`TEMPLATE_POST`].includes(itemDef.type):!1;if(purchasedItems.some(p$3=>{let pRefId=String(p$3.referenceId),pId=String(p$3.id);return pRefId===refId||pId===refId?[`template_post`,`TEMPLATE_POST`].includes(p$3.type)===targetIsTemplate:!1}))return!0;let stickerDef=STICKERS.find(s$3=>s$3.id===refId);return!!(stickerDef&&stickerDef.packId&&purchasedItems.some(i$4=>String(i$4.referenceId)===stickerDef.packId))},[purchasedItems,marketItems,sellingItems,wishlistDetails]),isWishlisted=(0,import_react.useCallback)(itemId=>wishlistItems.includes(String(itemId)),[wishlistItems]),getPackPrice=(0,import_react.useCallback)((packId,originalPrice)=>{let packStickers=STICKERS.filter(s$3=>s$3.packId===packId);if(packStickers.length===0)return originalPrice;let ownedValue=packStickers.filter(s$3=>isOwned(s$3.id)).reduce((sum,s$3)=>sum+(s$3.price||0),0);return Math.max(0,originalPrice-ownedValue)},[isOwned]),buyItem=(0,import_react.useCallback)(async(itemId,cost,itemObject)=>{let token=localStorage.getItem(`accessToken`);if(!token)return!1;let targetItem=itemObject||marketItems.find(i$4=>String(i$4.id)===String(itemId))||sellingItems.find(i$4=>String(i$4.id)===String(itemId))||wishlistDetails.find(i$4=>String(i$4.id)===String(itemId)),packId=targetItem?.referenceId,packStickers=packId?STICKERS.filter(s$3=>s$3.packId===packId):[];if(isOwned(itemId))return alert(`  .`),!1;if(packId&&packStickers.length>0&&STICKERS.some(s$3=>s$3.packId===packId)){if(packStickers.filter(s$3=>!isOwned(s$3.id)).length===0)return alert(`    .`),!0;let ownedValue=packStickers.filter(s$3=>isOwned(s$3.id)).reduce((sum,s$3)=>sum+(s$3.price||0),0),packOriginalPrice=targetItem?.price||cost+ownedValue,targetDiscountedPrice=Math.max(0,packOriginalPrice-ownedValue),discountGrantAmount=Math.min(ownedValue,packOriginalPrice);if(credits<targetDiscountedPrice)return alert(` . (: ${targetDiscountedPrice})`),!1;if(discountGrantAmount>0)try{await addCredits(discountGrantAmount)}catch(e$4){return console.error(`Failed to inject discount`,e$4),alert(`    .`),!1}let buyUrl=`${API_BASE_URL$6}/buy/ref/${targetItem?.referenceId||itemId}`;!targetItem?.referenceId&&!isNaN(Number(itemId))&&(buyUrl=`${API_BASE_URL$6}/buy/${itemId}`);try{let res=await fetch(buyUrl,{method:`POST`,headers:{Authorization:`Bearer ${token}`,"Content-Type":`application/json`},body:JSON.stringify({price:packOriginalPrice})});if(res.ok)return await fetchUserData(),await refreshCredits(),!0;{let errorText=await res.text();if(discountGrantAmount>0)try{await addCredits(-discountGrantAmount)}catch{}return alert(` : ${errorText}`),!1}}catch(e$4){return console.error(`Error buying pack`,e$4),discountGrantAmount>0&&await addCredits(-discountGrantAmount),!1}}else{let finalCost=cost;if(userId&&targetItem?.sellerId&&String(userId)===String(targetItem.sellerId))return alert(`    .`),!1;if(credits<finalCost)return alert(` .`),!1;let url=``;url=`${API_BASE_URL$6}/buy/${itemId}`;let payload={price:Math.max(0,finalCost),amount:1,finalPrice:Math.max(0,finalCost),paymentAmount:Math.max(0,finalCost)};try{let response=await fetch(url,{method:`POST`,headers:{Authorization:`Bearer ${token}`,"Content-Type":`application/json`},body:JSON.stringify(payload)});if(response.ok)return await fetchUserData(),await refreshCredits(),!0;{let errorText=await response.text();return console.error(`Purchase Failed: Status ${response.status}`),alert(`  (${response.status}): ${errorText||`   `}`),!1}}catch(e$4){return console.error(e$4),!1}}},[credits,refreshCredits,fetchUserData,isOwned,marketItems,sellingItems,wishlistDetails,addCredits]),getMarketItem=(0,import_react.useCallback)(async itemId=>{let token=localStorage.getItem(`accessToken`);if(!token)return null;try{let res=await fetch(`${API_BASE_URL$6}/items/${itemId}`,{headers:{Authorization:`Bearer ${token}`}});return res.ok?mapBackendItemToFrontend(await res.json()):null}catch(e$4){return console.error(`Failed to fetch market item`,e$4),null}},[]);return(0,import_react.useMemo)(()=>({marketItems,purchasedItems,sellingItems,wishlistItems,wishlistDetails,totalCount,hasMore,isSearching:!!keyword,sort,changeSort:setSort,keyword,search,sellerId,filterBySeller,selectedTags,filterByTag,category,filterByCategory:setCategory,isFree,filterByFree:setIsFree,refreshMarket,loadMore,buyItem,registerItem,updateItem,cancelItem,toggleWishlist,updateItemInState,isOwned,isWishlisted,getPackPrice,getMarketItem}),[marketItems,purchasedItems,sellingItems,wishlistItems,wishlistDetails,totalCount,hasMore,keyword,sort,sellerId,selectedTags,category,isFree,refreshMarket,loadMore,buyItem,registerItem,updateItem,cancelItem,toggleWishlist,isOwned,isWishlisted,getPackPrice,getMarketItem,search,filterBySeller,filterByTag])};var ConfirmationModal=({isOpen,title,message,onConfirm,onCancel,onClose,type=`info`,singleButton=!1,confirmText=``,cancelText=``})=>{let[isVisible,setIsVisible]=(0,import_react.useState)(!1);return(0,import_react.useEffect)(()=>{if(isOpen)setIsVisible(!0),document.body.style.overflow=`hidden`;else{let timer$1=setTimeout(()=>setIsVisible(!1),200);return document.body.style.overflow=`unset`,()=>clearTimeout(timer$1)}},[isOpen]),!isVisible&&!isOpen?null:(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-200 ${isOpen?`bg-black/60 backdrop-blur-sm opacity-100`:`bg-transparent opacity-0 pointer-events-none`}`,onClick:onClose||(singleButton?onConfirm:onCancel),children:(0,import_jsx_runtime.jsx)(`div`,{className:`bg-[var(--bg-card)] w-[90vw] max-w-sm rounded-2xl shadow-2xl border border-[var(--border-color)] overflow-hidden transform transition-all duration-300 ${isOpen?`scale-100 translate-y-0`:`scale-95 translate-y-4`}`,onClick:e$4=>e$4.stopPropagation(),children:(0,import_jsx_runtime.jsxs)(`div`,{className:`p-6 text-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${type===`danger`?`bg-red-100 text-red-500`:`bg-blue-100 text-blue-500`}`,children:(0,import_jsx_runtime.jsx)(CircleAlert,{size:24})}),(0,import_jsx_runtime.jsx)(`h3`,{className:`text-lg font-black text-[var(--text-primary)] mb-2 whitespace-pre-wrap`,children:title}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-sm text-[var(--text-secondary)] mb-6 whitespace-pre-wrap leading-relaxed`,children:message}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3`,children:[!singleButton&&(0,import_jsx_runtime.jsx)(`button`,{onClick:onCancel,className:`flex-1 px-4 py-3 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded-xl font-medium hover:bg-[var(--bg-tertiary)] transition-colors`,children:cancelText||``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onConfirm,className:`flex-1 px-4 py-3 rounded-xl font-bold text-white transition-all shadow-md active:scale-95 flex items-center justify-center gap-2
                                ${type===`danger`?`bg-red-500 hover:bg-red-600 shadow-red-500/25`:type===`success`?`bg-green-500 hover:bg-green-600 shadow-green-500/25`:`bg-[var(--btn-bg)] hover:brightness-110 shadow-[var(--btn-bg)]/25`}`,children:confirmText||``})]})]})})})},ConfirmationModal_default=ConfirmationModal,DailyQuestModal=({isOpen,onClose})=>{let{credits,addCredits,dailyQuests,claimQuest,resetTime}=useCredits(),navigate=useNavigate(),[activeTab,setActiveTab]=(0,import_react.useState)(`quests`),[modalConfig,setModalConfig]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}});if(!isOpen)return null;let showAlert=(title,message,type=`info`)=>{setModalConfig({isOpen:!0,title,message,type,singleButton:!0,onConfirm:()=>setModalConfig(prev=>({...prev,isOpen:!1}))})},handleClaim=async quest=>{if(!quest.isCompleted&&quest.isClaimable)try{await claimQuest(quest.id),showAlert(`  `,`${quest.reward}  !`,`success`)}catch(e$4){showAlert(` `,e$4.message||`   .`,`danger`)}},handleGo=quest=>{onClose(),quest.type===`widget`?navigate(`/home`):quest.type===`post`?navigate(`/post`):navigate(`/home`)};return(0,import_jsx_runtime.jsxs)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-modal border theme-border rounded-2xl w-full max-w-md shadow-2xl overflow-hidden flex flex-col max-h-[80vh]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center p-4 border-b theme-border theme-bg-header shrink-0`,children:[(0,import_jsx_runtime.jsxs)(`h2`,{className:`text-xl font-bold theme-text-primary flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Coins,{className:`w-5 h-5 text-yellow-500`}),` `]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-2 hover:bg-black/5 rounded-full transition-colors theme-text-secondary`,children:(0,import_jsx_runtime.jsx)(X,{className:`w-5 h-5`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card-secondary)] p-6 flex flex-col items-center justify-center shrink-0`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`text-4xl font-black theme-text-primary font-mono mb-2 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Coins,{className:`w-8 h-8 text-yellow-500 fill-yellow-500/20`}),credits.toLocaleString()]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-xs theme-text-secondary font-medium flex items-center gap-1 bg-black/5 px-2 py-1 rounded-full`,children:[(0,import_jsx_runtime.jsx)(Clock,{className:`w-3 h-3`}),resetTime,`   (KST)`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex border-b theme-border shrink-0`,children:[(0,import_jsx_runtime.jsx)(`button`,{className:`flex-1 py-3 text-sm font-bold transition-colors ${activeTab===`quests`?`theme-text-primary border-b-2 border-primary theme-bg-modal`:`theme-text-secondary bg-[var(--bg-card-secondary)] hover:theme-bg-card`}`,onClick:()=>setActiveTab(`quests`),children:` `}),(0,import_jsx_runtime.jsx)(`button`,{className:`flex-1 py-3 text-sm font-bold transition-colors ${activeTab===`shop`?`theme-text-primary border-b-2 border-primary theme-bg-modal`:`theme-text-secondary bg-[var(--bg-card-secondary)] hover:theme-bg-card`}`,onClick:()=>setActiveTab(`shop`),children:``})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 overflow-y-auto p-4 custom-scrollbar`,children:activeTab===`quests`?(0,import_jsx_runtime.jsx)(`div`,{className:`space-y-3`,children:dailyQuests.map(quest=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between p-3 rounded-xl border theme-border bg-[var(--bg-card)]/50 hover:bg-[var(--bg-card)] transition-colors`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`p-2 rounded-lg ${quest.isCompleted?`bg-green-100 text-green-600`:`bg-yellow-100 text-yellow-600`}`,children:[quest.type===`login`&&(0,import_jsx_runtime.jsx)(Clock,{className:`w-5 h-5`}),quest.type===`time`&&(0,import_jsx_runtime.jsx)(Clock,{className:`w-5 h-5`}),quest.type===`widget`&&(0,import_jsx_runtime.jsx)(CirclePlay,{className:`w-5 h-5`}),quest.type===`post`&&(0,import_jsx_runtime.jsx)(PenTool,{className:`w-5 h-5`})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`div`,{className:`font-bold theme-text-primary text-sm`,children:quest.description}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-xs theme-text-secondary font-mono`,children:[`+`,quest.reward,` C`]})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center gap-2`,children:quest.isCompleted?(0,import_jsx_runtime.jsxs)(`button`,{disabled:!0,className:`px-3 py-1.5 rounded-lg bg-green-500/10 text-green-600 text-xs font-bold border border-green-500/20 flex items-center gap-1 cursor-default`,children:[(0,import_jsx_runtime.jsx)(Check,{className:`w-3 h-3`}),` `]}):quest.isClaimable?(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleClaim(quest),className:`px-4 py-1.5 rounded-lg bg-yellow-500 text-white text-xs font-bold shadow-sm hover:bg-yellow-600 active:scale-95 transition-all animate-pulse-soft`,children:``}):quest.type===`time`?(0,import_jsx_runtime.jsx)(`button`,{disabled:!0,className:`px-3 py-1.5 rounded-lg theme-bg-card-secondary theme-text-secondary border theme-border text-xs font-bold cursor-not-allowed opacity-70`,children:` `}):(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleGo(quest),className:`px-3 py-1.5 rounded-lg theme-btn border border-primary/30 text-xs font-bold hover:brightness-110 active:scale-95 transition-all`,children:``})})]},quest.id))}):(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 rounded-xl bg-gradient-to-r from-purple-500/10 to-blue-500/10 border theme-border flex items-center justify-between`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold theme-text-primary text-sm`,children:`  `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs theme-text-secondary mt-1`,children:`   !`})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{onClose(),navigate(`/market`)},className:`p-2 theme-bg-card rounded-lg border theme-border shadow-sm hover:scale-105 transition-transform`,children:(0,import_jsx_runtime.jsx)(ShoppingBag,{className:`w-5 h-5 text-purple-500`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`border-t theme-border pt-4`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-sm font-bold theme-text-secondary mb-3 uppercase tracking-wider`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{onClose(),navigate(`/charge`)},className:`w-full flex items-center justify-between p-4 rounded-xl bg-[var(--bg-card)] border theme-border hover:border-primary/50 transition-all hover:shadow-md group mb-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-12 h-12 rounded-full bg-yellow-500/10 flex items-center justify-center group-hover:scale-110 transition-transform`,children:(0,import_jsx_runtime.jsx)(Wallet,{className:`w-6 h-6 text-yellow-500`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-left`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`font-bold theme-text-primary`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs theme-text-secondary`,children:`  `})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`px-3 py-1.5 rounded-lg bg-[var(--btn-bg)] text-white text-xs font-bold shadow-sm group-hover:brightness-110 transition-all`,children:``})]}),(0,import_jsx_runtime.jsxs)(`h3`,{className:`text-xs font-bold theme-text-secondary mb-2 uppercase tracking-wider flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Clock,{className:`w-3 h-3`}),`   (Test)`]}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 gap-2`,children:[{amount:1e3,price:`1,000`,color:`bg-blue-500`},{amount:5e3,price:`5,000`,color:`bg-purple-500`},{amount:1e4,price:`10,000`,color:`bg-pink-500`,popular:!0},{amount:3e4,price:`30,000`,color:`bg-yellow-500`}].map((item,i$4)=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{setModalConfig({isOpen:!0,title:`  `,message:`[ ] \n${item.price} ${item.amount}  ?`,type:`info`,singleButton:!1,onConfirm:async()=>{try{await addCredits(item.amount),setModalConfig(prev=>({...prev,isOpen:!1})),showAlert(` `,`${item.amount}  !`,`success`)}catch{showAlert(` `,`    .`,`danger`)}}})},className:`relative group p-3 rounded-xl border theme-border bg-[var(--bg-card)] hover:border-primary/50 transition-all flex items-center gap-3 text-left`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-full ${item.color}/10 flex items-center justify-center group-hover:scale-110 transition-transform shrink-0`,children:(0,import_jsx_runtime.jsx)(Coins,{className:`w-4 h-4 ${item.color.replace(`bg-`,`text-`)}`})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`font-bold theme-text-primary text-sm font-mono`,children:[item.amount,` C`]}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] theme-text-secondary`,children:item.price})]})]},i$4))})]})]})]})})]}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{...modalConfig,onCancel:()=>setModalConfig(prev=>({...prev,isOpen:!1}))})]})},DailyQuestModal_default=DailyQuestModal,API_BASE_URL$5=``,getHeaders$1=()=>{let token=localStorage.getItem(`accessToken`);return{"Content-Type":`application/json`,Authorization:token?`Bearer ${token}`:``}};const getHeaderSettings=async()=>{let response=await fetch(`${API_BASE_URL$5}/api/setting/all`,{headers:getHeaders$1()});return response.ok?(await response.json()).header||null:(response.status,null)},updateHeaderSettings=async settings=>{if(localStorage.getItem(`accessToken`)&&!(await fetch(`${API_BASE_URL$5}/api/setting/header`,{method:`PUT`,headers:getHeaders$1(),body:JSON.stringify(settings)})).ok)throw Error(`Failed to update header settings`)};var LOCAL_STORAGE_KEY=`header_settings_v3`,DEFAULT_SETTINGS={showTimer:!1,showCredit:!0,showWidgetZoom:!1,showFloatingPanel:!0};const useHeaderSettings=()=>{let[settings,setSettings]=(0,import_react.useState)(()=>{let cached=localStorage.getItem(LOCAL_STORAGE_KEY);return cached?{...DEFAULT_SETTINGS,...JSON.parse(cached)}:DEFAULT_SETTINGS});return(0,import_react.useEffect)(()=>{(async()=>{try{let serverSettings=await getHeaderSettings();serverSettings&&setSettings(prev=>{let merged={...prev,...serverSettings};return localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(merged)),merged})}catch(error$1){console.error(`Failed to sync header settings:`,error$1)}})();let handleLocalChange=e$4=>{setSettings(e$4.detail)};return window.addEventListener(`header-settings-change`,handleLocalChange),()=>window.removeEventListener(`header-settings-change`,handleLocalChange)},[]),{settings,updateSettings:async newSettings=>{let updated={...settings,...newSettings};setSettings(updated),localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(updated));try{await updateHeaderSettings(updated)}catch(error$1){console.error(`Failed to update header settings:`,error$1)}window.dispatchEvent(new CustomEvent(`header-settings-change`,{detail:updated}))}}};var DraggableMenuItem=({id:id$3,index:index$2,moveMenuItem,children:children$1,isEditMode,label})=>{let ref=(0,import_react.useRef)(null),[{handlerId},drop$1]=useDrop({accept:`MENU_ITEM`,collect(monitor){return{handlerId:monitor.getHandlerId()}},hover(item,monitor){if(!ref.current)return;let dragIndex=item.index,hoverIndex=index$2;if(dragIndex===hoverIndex)return;let hoverBoundingRect=ref.current?.getBoundingClientRect(),hoverMiddleX=(hoverBoundingRect.right-hoverBoundingRect.left)/2,hoverClientX=monitor.getClientOffset().x-hoverBoundingRect.left;dragIndex<hoverIndex&&hoverClientX<hoverMiddleX||dragIndex>hoverIndex&&hoverClientX>hoverMiddleX||(moveMenuItem(dragIndex,hoverIndex),item.index=hoverIndex)}}),[{isDragging:isDragging$2},drag$1]=useDrag({type:`MENU_ITEM`,item:()=>{let{offsetWidth,offsetHeight}=ref.current||{offsetWidth:0,offsetHeight:0};return{id:id$3,index:index$2,label,initialWidth:offsetWidth,initialHeight:offsetHeight}},collect:monitor=>({isDragging:monitor.isDragging()}),canDrag:isEditMode});return drag$1(drop$1(ref)),(0,import_jsx_runtime.jsx)(`div`,{ref,style:{opacity:isDragging$2?.3:1},"data-handler-id":handlerId,className:`relative rounded-lg transition-all duration-200 md:w-32 md:flex-none flex-1 flex justify-center items-center py-0 md:py-2 mx-1 ${isEditMode?`border-2 border-dashed border-primary/50 cursor-grab active:cursor-grabbing hover:bg-primary/5`:``}`,children:children$1})},Navigation=()=>{let location$1=useLocation(),navigate=useNavigate(),[isSettingsOpen,setIsSettingsOpen]=(0,import_react.useState)(!1),[isQuestModalOpen,setIsQuestModalOpen]=(0,import_react.useState)(!1),{isLoggedIn}=useAuth(),{credits}=useCredits(),{menuItems,isEditMode,setIsEditMode,moveMenuItem}=useMenu(),[settingsInitialView,setSettingsInitialView]=(0,import_react.useState)(`main`);import_react.useEffect(()=>{let handleOpenSettings=e$4=>{setSettingsInitialView(e$4.detail?.view||`main`),setIsSettingsOpen(!0)};return window.addEventListener(`open-settings-modal`,handleOpenSettings),()=>window.removeEventListener(`open-settings-modal`,handleOpenSettings)},[]);let isActive$1=path=>path===`/`&&location$1.pathname!==`/`?!1:location$1.pathname.startsWith(path),{settings}=useHeaderSettings(),playTime=usePlayTime(),[formattedPlayTime,setFormattedPlayTime]=(0,import_react.useState)(``);return(0,import_react.useEffect)(()=>{if(!settings.showTimer){setFormattedPlayTime(``);return}let hours=Math.floor(playTime/3600),minutes=Math.floor(playTime%3600/60),seconds=playTime%60;setFormattedPlayTime(`${hours.toString().padStart(2,`0`)}:${minutes.toString().padStart(2,`0`)}:${seconds.toString().padStart(2,`0`)}`)},[settings.showTimer,playTime]),(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsxs)(`header`,{className:`sticky top-0 z-50 flex h-16 md:h-20 md:grid md:grid-cols-3 justify-between items-center px-4 md:px-6 py-0 theme-bg-header shadow-sm border-b theme-border transition-colors duration-300`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center justify-self-start ${isEditMode?`cursor-default opacity-50`:`cursor-pointer`}`,onClick:()=>!isEditMode&&navigate(`/`),children:(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/logo.png`,alt:`Logo`,className:`w-18 md:w-20`})}),(0,import_jsx_runtime.jsx)(`nav`,{className:`hidden md:flex items-center justify-center justify-self-center`,children:menuItems.map((item,index$2)=>(0,import_jsx_runtime.jsx)(DraggableMenuItem,{index:index$2,id:item.id,moveMenuItem,isEditMode,label:item.name,children:(0,import_jsx_runtime.jsx)(Link,{to:item.path,onClick:e$4=>{if(isEditMode){e$4.preventDefault();return}item.path===`/post`&&isActive$1(`/post`)&&(e$4.preventDefault(),window.dispatchEvent(new CustomEvent(`post-tab-click`)))},className:`text-lg font-medium transition-colors duration-200 block ${isActive$1(item.path)?`theme-text-primary font-bold`:`theme-text-secondary hover:theme-text-primary`}`,children:item.name})},`nav-item-${item.id||`none`}-${index$2}`))}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center space-x-2 md:space-x-4 theme-text-secondary justify-self-end`,children:[settings.showTimer&&formattedPlayTime&&(0,import_jsx_runtime.jsx)(`div`,{className:`font-mono text-xs md:text-sm font-medium mr-2 theme-text-primary bg-[var(--bg-secondary)] px-2 md:px-3 py-1 md:py-1.5 rounded-full border theme-border whitespace-nowrap ${isEditMode?`opacity-50 cursor-not-allowed select-none`:``}`,children:formattedPlayTime}),settings.showCredit&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center space-x-1 font-mono text-xs md:text-sm font-medium mr-2 theme-text-primary bg-[var(--bg-secondary)] px-2 md:px-3 py-1 md:py-1.5 rounded-full border theme-border whitespace-nowrap transition-transform ${isEditMode?`opacity-50 cursor-not-allowed select-none`:`cursor-pointer hover:scale-105 active:scale-95`}`,title:`Daily Quests & Rewards`,onClick:()=>!isEditMode&&setIsQuestModalOpen(!0),children:[(0,import_jsx_runtime.jsx)(Coins,{className:`w-3 h-3 md:w-4 md:h-4 text-yellow-500 fill-yellow-500/20`}),(0,import_jsx_runtime.jsx)(`span`,{children:credits.toLocaleString()})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{className:`p-2 hover:bg-black/5 dark:hover:bg-white/10 rounded-full transition-colors w-10 h-10 flex items-center justify-center ${isEditMode?`opacity-50 cursor-not-allowed`:``}`,onClick:()=>{isEditMode||(setSettingsInitialView(`main`),setIsSettingsOpen(!0))},disabled:isEditMode,title:``,children:(0,import_jsx_runtime.jsx)(Palette,{className:`w-5 h-5 md:w-6 md:h-6`})}),(0,import_jsx_runtime.jsx)(`button`,{className:`p-2 hover:bg-black/5 dark:hover:bg-white/10 rounded-full transition-colors w-10 h-10 flex items-center justify-center ${isEditMode?`opacity-50 cursor-not-allowed`:``}`,onClick:()=>{isEditMode||navigate(isLoggedIn?`/profile`:`/login`)},disabled:isEditMode,title:isLoggedIn?``:``,children:(0,import_jsx_runtime.jsx)(Settings,{className:`w-5 h-5 md:w-6 md:h-6`})})]})]})]}),(0,import_jsx_runtime.jsx)(`nav`,{className:`md:hidden fixed bottom-0 left-0 right-0 theme-bg-header border-t theme-border z-50 pb-safe transition-colors duration-300`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`flex justify-around items-center h-16 w-full`,children:menuItems.map((item,index$2)=>{let active=isActive$1(item.path),Icon$1=item.icon;return(0,import_jsx_runtime.jsx)(DraggableMenuItem,{index:index$2,id:item.id,moveMenuItem,isEditMode,label:item.name,children:(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-col items-center justify-center w-full h-full space-y-1 p-2 ${active?`theme-text-primary`:`theme-text-secondary`}`,children:(0,import_jsx_runtime.jsxs)(Link,{to:item.path,onClick:e$4=>{if(isEditMode){e$4.preventDefault();return}item.path===`/post`&&isActive$1(`/post`)&&(e$4.preventDefault(),window.dispatchEvent(new CustomEvent(`post-tab-click`)))},className:`flex flex-col items-center`,children:[(0,import_jsx_runtime.jsx)(Icon$1,{className:`w-6 h-6`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] font-medium`,children:item.name})]})})},`nav-mobile-${item.id||`none`}-${index$2}`)})})}),(0,import_jsx_runtime.jsx)(SettingsModal,{isOpen:isSettingsOpen,onClose:()=>setIsSettingsOpen(!1),initialView:settingsInitialView,onMenuEditMode:()=>{setIsEditMode(!0),navigate(`/home`)}}),(0,import_jsx_runtime.jsx)(DailyQuestModal_default,{isOpen:isQuestModalOpen,onClose:()=>setIsQuestModalOpen(!1)})]})},Navigation_default=Navigation;const WIDGET_COMPONENT_MAP={"formula-block":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./FormulaBlock-CuunH_GJ.js`),__vite__mapDeps([0,1,2])).then(m$3=>({default:m$3.FormulaBlock}))),"chat-diary":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./ChatDiary-Dv_1lS4Q.js`),__vite__mapDeps([3,1])).then(m$3=>({default:m$3.ChatDiary}))),"mood-analytics":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./MoodAnalytics-B14AdjUY.js`),__vite__mapDeps([4,1])).then(m$3=>({default:m$3.MoodAnalytics}))),"word-mind-map":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./WordMindMapWidget-B0-dWuQ_.js`),__vite__mapDeps([5,1])).then(m$3=>({default:m$3.WordMindMapWidget}))),"random-diary":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./RandomDiary-BMFvBz3B.js`),__vite__mapDeps([6,1])).then(m$3=>({default:m$3.RandomDiary}))),welcome:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Welcome-DneRuRGA.js`),[]).then(m$3=>({default:m$3.WelcomeWidget}))),"todo-list":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./TodoList-CrBuGT3k.js`),__vite__mapDeps([7,1])).then(m$3=>({default:m$3.TodoListWidget}))),weather:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Weather-CwdpYVNJ.js`),__vite__mapDeps([8,9,1,2])).then(m$3=>({default:m$3.WeatherWidget}))),clock:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Clock-XUDa_QOS.js`),__vite__mapDeps([10,1,2])).then(m$3=>({default:m$3.ClockWidget}))),streak:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Streak-CQUGGYMq.js`),__vite__mapDeps([11,1])).then(m$3=>({default:m$3.StreakWidget}))),battery:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Battery-BOZVU-kF.js`),__vite__mapDeps([12,1,13])).then(m$3=>({default:m$3.BatteryWidget}))),"worry-shredder":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./WorryShredder-BJMVmGzp.js`),__vite__mapDeps([14,1,13,2])).then(m$3=>({default:m$3.WorryShredder}))),"scrap-note":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./ScrapNote-BRh6ECJl.js`),__vite__mapDeps([15,2])).then(m$3=>({default:m$3.ScrapNote}))),"recipe-card":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./RecipeCard-DgfMNkQi.js`),__vite__mapDeps([16,2])).then(m$3=>({default:m$3.RecipeCard}))),"worry-doll":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./WorryDoll-Dw5g3kBf.js`),__vite__mapDeps([17,1,13,2])).then(m$3=>({default:m$3.WorryDoll}))),"unit-converter":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./UnitConverter-CXLNjfsi.js`),__vite__mapDeps([18,2])).then(m$3=>({default:m$3.UnitConverter}))),calculator:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Calculator-BtedpN19.js`),__vite__mapDeps([19,2])).then(m$3=>({default:m$3.Calculator}))),"random-picker":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./RandomPicker-CRSm75ZM.js`),__vite__mapDeps([20,2])).then(m$3=>({default:m$3.RandomPicker}))),"map-pin":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./MapPin-rHXaWcmo.js`),__vite__mapDeps([21,2])).then(m$3=>({default:m$3.MapPin}))),"rss-reader":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./RSSReader-BvgsyAVi.js`),__vite__mapDeps([22,2])).then(m$3=>({default:m$3.RSSReader}))),"tag-cloud":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./TagCloud-BbHCR5-z.js`),__vite__mapDeps([23,1,2])).then(m$3=>({default:m$3.TagCloud}))),"color-palette":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./ColorPalette-B8b8MoNL.js`),__vite__mapDeps([24,1,13,2])).then(m$3=>({default:m$3.ColorPalette}))),typewriter:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Typewriter-DFRFmOCg.js`),__vite__mapDeps([25,1,13,2])).then(m$3=>({default:m$3.Typewriter}))),polaroid:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Polaroid-DeUbPCmg.js`),__vite__mapDeps([26,1,13,2])).then(m$3=>({default:m$3.Polaroid}))),"photo-gallery":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Gallery-D2XgtghY.js`),__vite__mapDeps([27,1])).then(m$3=>({default:m$3.PhotoGallery}))),"instant-booth":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Gallery-D2XgtghY.js`),__vite__mapDeps([27,1])).then(m$3=>({default:m$3.InstantBooth}))),"film-strip":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Gallery-D2XgtghY.js`),__vite__mapDeps([27,1])).then(m$3=>({default:m$3.FilmStrip}))),"moon-phase":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./MoonPhase-DIuxrOUQ.js`),__vite__mapDeps([28,1,13])).then(m$3=>({default:m$3.MoonPhase}))),"switch-board":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./SwitchBoard-CSHzjvRR.js`),__vite__mapDeps([29,1,13])).then(m$3=>({default:m$3.SwitchBoard}))),"fortune-cookie":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./FortuneCookie-8heZXinc.js`),__vite__mapDeps([30,1,13])).then(m$3=>({default:m$3.FortuneCookie}))),ootd:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./OOTDSketch-DITOoNMf.js`),__vite__mapDeps([31,1,13,2])).then(m$3=>({default:m$3.OOTDSketch}))),"book-cover":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./BookCover-BIx-2l4W.js`),__vite__mapDeps([32,1,13,2])).then(m$3=>({default:m$3.BookCover}))),"bubble-wrap":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./BubbleWrap-CrBySjiN.js`),__vite__mapDeps([33,1,13])).then(m$3=>({default:m$3.BubbleWrap}))),transparent:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./TransparentSpacer-D9znEHu0.js`),[]).then(m$3=>({default:m$3.TransparentSpacer}))),"favorite-char":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Character-BLJ2y1Pp.js`),__vite__mapDeps([34,1,13,2])).then(m$3=>({default:m$3.FavoriteCharacter}))),"color-chip":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./ColorChip-D7Rf3-za.js`),__vite__mapDeps([35,2])).then(m$3=>({default:m$3.ColorChip}))),"movie-scene":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./MovieScene-BqYmh6ve.js`),__vite__mapDeps([36,2])).then(m$3=>({default:m$3.MovieScene}))),ticket:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./TicketStub-DAwMGnmg.js`),__vite__mapDeps([37,2])).then(m$3=>({default:m$3.TicketStub}))),neon:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./NeonSign-iCFwVHS7.js`),__vite__mapDeps([38,2])).then(m$3=>({default:m$3.NeonSign}))),candle:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Candle-DvAwOY24.js`),__vite__mapDeps([39,1,13,2])).then(m$3=>({default:m$3.Candle}))),"text-scroller":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./TextScroller-DrPNmdYV.js`),__vite__mapDeps([40,2])).then(m$3=>({default:m$3.TextScroller}))),"ocean-wave":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./OceanWave-ClOJID4R.js`),__vite__mapDeps([41,1,2])).then(m$3=>({default:m$3.OceanWave}))),"movie-ticket":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./MovieTicket-D5FjUxMw.js`),__vite__mapDeps([42,1,13])).then(m$3=>({default:m$3.MovieTicket}))),bookshelf:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Bookshelf-Bjo1qTar.js`),__vite__mapDeps([43,1,13])).then(m$3=>({default:m$3.Bookshelf}))),"stamp-collection":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./StampCollection-BG4tp9NL.js`),__vite__mapDeps([44,1,13])).then(m$3=>({default:m$3.StampCollection}))),"sky-map":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./SkyMap-VVseZMom.js`),__vite__mapDeps([45,1,13])).then(m$3=>({default:m$3.SkyMap}))),"birth-flower":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./BirthFlower-DwtM-6Cj.js`),__vite__mapDeps([46,1,13])).then(m$3=>({default:m$3.BirthFlower}))),"receipt-printer":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./ReceiptPrinter-JkWpaiEo.js`),__vite__mapDeps([47,1,13,2])).then(m$3=>({default:m$3.ReceiptPrinter}))),"weather-stickers":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./WeatherStickers-BQIlgMFd.js`),__vite__mapDeps([48,9,1,13])).then(m$3=>({default:m$3.WeatherStickers}))),"dessert-case":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./DessertCase-C4y1ydiy.js`),__vite__mapDeps([49,1,13,2])).then(m$3=>({default:m$3.DessertCase}))),"cat-chaser":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./CatChaser-CEMmj72J.js`),__vite__mapDeps([50,1,13])).then(m$3=>({default:m$3.CatChaser}))),"snow-globe":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./SnowGlobe-ia-bKHn8.js`),__vite__mapDeps([51,1,13])).then(m$3=>({default:m$3.SnowGlobe}))),"lp-player":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./LPPlayer-BXQHgqmW.js`),__vite__mapDeps([52,1,13])).then(m$3=>({default:m$3.LPPlayer}))),bonfire:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Bonfire-BgXFItvL.js`),__vite__mapDeps([53,1,13])).then(m$3=>({default:m$3.Bonfire}))),community:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Community-CqmobMir.js`),__vite__mapDeps([54,1])).then(m$3=>({default:m$3.CommunityWidget}))),"time-machine":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./TimeMachine--3A2ylxn.js`),__vite__mapDeps([55,1])).then(m$3=>({default:m$3.TimeMachine}))),"scratch-card":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./ScratchCard-jZJ1oVgg.js`),__vite__mapDeps([56,1])).then(m$3=>({default:m$3.ScratchCard}))),switches:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Switches-Bax1qKZB.js`),__vite__mapDeps([57,1])).then(m$3=>({default:m$3.Switches}))),"cursor-trail":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./CursorTrail-wxBXb_cv.js`),__vite__mapDeps([58,59,1])).then(m$3=>({default:m$3.CursorTrail}))),highlighter:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Highlighter-DshHHxDm.js`),__vite__mapDeps([60,59,1])).then(m$3=>({default:m$3.Highlighter}))),"physics-box":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./PhysicsBox-DIM9V3iO.js`),__vite__mapDeps([61,59,1,2])).then(m$3=>({default:m$3.PhysicsBox}))),magnifier:(0,import_react.lazy)(()=>__vitePreload(()=>import(`./Magnifier-B0uKsWn-.js`),__vite__mapDeps([62,59,1])).then(m$3=>({default:m$3.Magnifier}))),"ruby-text":(0,import_react.lazy)(()=>__vitePreload(()=>import(`./RubyText-CJxzLxQU.js`),__vite__mapDeps([63,59,1])).then(m$3=>({default:m$3.RubyText})))};var API_BASE_URL$4=`/api/widgets`,TEMP_USER_ID=`1`,getToken=()=>localStorage.getItem(`accessToken`);const getMyWidgets=async()=>{let token=getToken();try{return(await axios_default.get(`${API_BASE_URL$4}/my`,{headers:{Authorization:`Bearer ${token}`,"X-User-Id":TEMP_USER_ID,"Content-Type":`application/json`},params:{page:0,size:100}})).data.content||[]}catch(error$1){return console.error(`  :`,error$1),[]}},deleteWidget=async id$3=>{let token=getToken();try{return await axios_default.delete(`${API_BASE_URL$4}/${id$3}`,{headers:{Authorization:`Bearer ${token}`,"X-User-Id":TEMP_USER_ID}}),!0}catch(error$1){throw console.error(`  :`,error$1),error$1}},updateWidget=async(id$3,block,name)=>{let token=getToken();try{return(await axios_default.put(`${API_BASE_URL$4}/${id$3}`,{name,type:block.type,content:block.content,styles:block.styles,decorations:block.decorations,thumbnailUrl:block.thumbnailUrl},{headers:{Authorization:`Bearer ${token}`,"X-User-Id":TEMP_USER_ID,"Content-Type":`application/json`}})).data}catch(error$1){throw console.error(`  :`,error$1),error$1}},saveWidget=async(block,name)=>{let token=getToken();try{return(await axios_default.post(API_BASE_URL$4,{name,type:block.type,content:block.content,styles:block.styles,decorations:block.decorations,thumbnailUrl:block.thumbnailUrl},{headers:{Authorization:`Bearer ${token}`,"X-User-Id":TEMP_USER_ID,"Content-Type":`application/json`}})).data}catch(error$1){throw console.error(`  :`,error$1),error$1}};var BASE_URL$3=``,getAuthHeaders$2=()=>{let token=localStorage.getItem(`accessToken`);return{"Content-Type":`application/json`,Authorization:token?`Bearer ${token}`:``}};const useWidgetRegistry=userId=>{let[registry,setRegistry]=(0,import_react.useState)({}),[isLoading,setIsLoading]=(0,import_react.useState)(!0),[error$1,setError]=(0,import_react.useState)(null);return(0,import_react.useEffect)(()=>{(async()=>{try{let params=userId?{userId}:{},headers=getAuthHeaders$2(),[standardRes,customRes]=await Promise.allSettled([axios_default.get(`${BASE_URL$3}/api/widgets`,{params,headers}),getMyWidgets()]),mergedRegistry={};if(standardRes.status===`fulfilled`&&Array.isArray(standardRes.value.data)?standardRes.value.data.forEach(def=>{let Component$2=WIDGET_COMPONENT_MAP[def.widgetType];Component$2&&(mergedRegistry[def.widgetType]={...def,component:Component$2})}):console.error(`       `),customRes.status===`fulfilled`&&Array.isArray(customRes.value)&&customRes.value.forEach(item=>{let baseType=item.type,Component$2=WIDGET_COMPONENT_MAP[baseType];if(Component$2){let customType=`custom-${item.id}`;mergedRegistry[customType]={id:item.id,widgetType:customType,label:item.name||` `,description:`Custom ${baseType} widget`,category:`My Saved`,keywords:[`custom`,baseType],defaultSize:`1x1`,validSizes:[[1,1],[1,2],[2,1],[2,2]],defaultProps:{content:item.content,styles:item.styles},isSystem:!1,thumbnail:void 0,component:Component$2}}}),mergedRegistry[`time-machine`]){let currentSizes=mergedRegistry[`time-machine`].validSizes||[];currentSizes.some(([w$1,h$3])=>w$1===1&&h$3===1)||(mergedRegistry[`time-machine`].validSizes=[[1,1],...currentSizes])}setRegistry(mergedRegistry)}catch(err){console.error(`Failed to fetch widget definitions:`,err),setError(err)}finally{setIsLoading(!1)}})()},[userId]),{registry,isLoading,error:error$1}};var LayoutGroupContext=(0,import_react.createContext)({});function useConstant(init$1){let ref=(0,import_react.useRef)(null);return ref.current===null&&(ref.current=init$1()),ref.current}var isBrowser=typeof window<`u`,useIsomorphicLayoutEffect$4=isBrowser?import_react.useLayoutEffect:import_react.useEffect,PresenceContext=(0,import_react.createContext)(null);function addUniqueItem(arr,item){arr.indexOf(item)===-1&&arr.push(item)}function removeItem(arr,item){let index$2=arr.indexOf(item);index$2>-1&&arr.splice(index$2,1)}var clamp$2=(min,max,v$3)=>v$3>max?max:v$3<min?min:v$3,warning=()=>{},invariant$3=()=>{},MotionGlobalConfig={},isNumericalString=v$3=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(v$3);function isObject$1(value){return typeof value==`object`&&!!value}var isZeroValueString=v$3=>/^0[^.\s]+$/u.test(v$3);function memo$3(callback){let result;return()=>(result===void 0&&(result=callback()),result)}var noop$5=any=>any,combineFunctions=(a$4,b$3)=>v$3=>b$3(a$4(v$3)),pipe=(...transformers)=>transformers.reduce(combineFunctions),progress=(from,to,value)=>{let toFromDifference=to-from;return toFromDifference===0?1:(value-from)/toFromDifference},SubscriptionManager=class{constructor(){this.subscriptions=[]}add(handler){return addUniqueItem(this.subscriptions,handler),()=>removeItem(this.subscriptions,handler)}notify(a$4,b$3,c$3){let numSubscriptions=this.subscriptions.length;if(numSubscriptions)if(numSubscriptions===1)this.subscriptions[0](a$4,b$3,c$3);else for(let i$4=0;i$4<numSubscriptions;i$4++){let handler=this.subscriptions[i$4];handler&&handler(a$4,b$3,c$3)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}},secondsToMilliseconds=seconds=>seconds*1e3,millisecondsToSeconds=milliseconds=>milliseconds/1e3;function velocityPerSecond(velocity,frameDuration){return frameDuration?velocity*(1e3/frameDuration):0}var calcBezier=(t$4,a1,a2)=>(((1-3*a2+3*a1)*t$4+(3*a2-6*a1))*t$4+3*a1)*t$4,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(x$2,lowerBound,upperBound,mX1,mX2){let currentX,currentT,i$4=0;do currentT=lowerBound+(upperBound-lowerBound)/2,currentX=calcBezier(currentT,mX1,mX2)-x$2,currentX>0?upperBound=currentT:lowerBound=currentT;while(Math.abs(currentX)>subdivisionPrecision&&++i$4<subdivisionMaxIterations);return currentT}function cubicBezier(mX1,mY1,mX2,mY2){if(mX1===mY1&&mX2===mY2)return noop$5;let getTForX=aX=>binarySubdivide(aX,0,1,mX1,mX2);return t$4=>t$4===0||t$4===1?t$4:calcBezier(getTForX(t$4),mY1,mY2)}var mirrorEasing=easing=>p$3=>p$3<=.5?easing(2*p$3)/2:(2-easing(2*(1-p$3)))/2,reverseEasing=easing=>p$3=>1-easing(1-p$3),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=p$3=>(p$3*=2)<1?.5*backIn(p$3):.5*(2-2**(-10*(p$3-1))),circIn=p$3=>1-Math.sin(Math.acos(p$3)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=ease$1=>Array.isArray(ease$1)&&typeof ease$1[0]!=`number`,isBezierDefinition=easing=>Array.isArray(easing)&&typeof easing[0]==`number`,easingLookup={linear:noop$5,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=easing=>typeof easing==`string`,easingDefinitionToFunction=definition=>{if(isBezierDefinition(definition)){definition.length;let[x1,y1,x2,y2]=definition;return cubicBezier(x1,y1,x2,y2)}else if(isValidEasing(definition))return easingLookup[definition],`${definition}`,easingLookup[definition];return definition},stepsOrder=[`setup`,`read`,`resolveKeyframes`,`preUpdate`,`update`,`preRender`,`render`,`postRender`],statsBuffer={value:null,addProjectionMetrics:null};function createRenderStep(runNextFrame,stepName){let thisFrame=new Set,nextFrame=new Set,isProcessing=!1,flushNextFrame=!1,toKeepAlive=new WeakSet,latestFrameData={delta:0,timestamp:0,isProcessing:!1},numCalls=0;function triggerCallback(callback){toKeepAlive.has(callback)&&(step.schedule(callback),runNextFrame()),numCalls++,callback(latestFrameData)}let step={schedule:(callback,keepAlive=!1,immediate$1=!1)=>{let queue=immediate$1&&isProcessing?thisFrame:nextFrame;return keepAlive&&toKeepAlive.add(callback),queue.has(callback)||queue.add(callback),callback},cancel:callback=>{nextFrame.delete(callback),toKeepAlive.delete(callback)},process:frameData$1=>{if(latestFrameData=frameData$1,isProcessing){flushNextFrame=!0;return}isProcessing=!0,[thisFrame,nextFrame]=[nextFrame,thisFrame],thisFrame.forEach(triggerCallback),stepName&&statsBuffer.value&&statsBuffer.value.frameloop[stepName].push(numCalls),numCalls=0,thisFrame.clear(),isProcessing=!1,flushNextFrame&&(flushNextFrame=!1,step.process(frameData$1))}};return step}var maxElapsed=40;function createRenderBatcher(scheduleNextBatch,allowKeepAlive){let runNextFrame=!1,useDefaultElapsed=!0,state={delta:0,timestamp:0,isProcessing:!1},flagRunNextFrame=()=>runNextFrame=!0,steps=stepsOrder.reduce((acc,key$1)=>(acc[key$1]=createRenderStep(flagRunNextFrame,allowKeepAlive?key$1:void 0),acc),{}),{setup,read,resolveKeyframes,preUpdate,update:update$1,preRender,render,postRender}=steps,processBatch=()=>{let timestamp=MotionGlobalConfig.useManualTiming?state.timestamp:performance.now();runNextFrame=!1,MotionGlobalConfig.useManualTiming||(state.delta=useDefaultElapsed?1e3/60:Math.max(Math.min(timestamp-state.timestamp,maxElapsed),1)),state.timestamp=timestamp,state.isProcessing=!0,setup.process(state),read.process(state),resolveKeyframes.process(state),preUpdate.process(state),update$1.process(state),preRender.process(state),render.process(state),postRender.process(state),state.isProcessing=!1,runNextFrame&&allowKeepAlive&&(useDefaultElapsed=!1,scheduleNextBatch(processBatch))},wake$1=()=>{runNextFrame=!0,useDefaultElapsed=!0,state.isProcessing||scheduleNextBatch(processBatch)};return{schedule:stepsOrder.reduce((acc,key$1)=>{let step=steps[key$1];return acc[key$1]=(process$1,keepAlive=!1,immediate$1=!1)=>(runNextFrame||wake$1(),step.schedule(process$1,keepAlive,immediate$1)),acc},{}),cancel:process$1=>{for(let i$4=0;i$4<stepsOrder.length;i$4++)steps[stepsOrder[i$4]].cancel(process$1)},state,steps}}var{schedule:frame$1,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<`u`?requestAnimationFrame:noop$5,!0),now$2;function clearTime(){now$2=void 0}var time={now:()=>(now$2===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$2),set:newTime=>{now$2=newTime,queueMicrotask(clearTime)}},activeAnimations={layout:0,mainThread:0,waapi:0},checkStringStartsWith=token=>key$1=>typeof key$1==`string`&&key$1.startsWith(token),isCSSVariableName=checkStringStartsWith(`--`),startsAsVariableToken=checkStringStartsWith(`var(--`),isCSSVariableToken=value=>startsAsVariableToken(value)?singleCssVariableRegex.test(value.split(`/*`)[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function containsCSSVariable(value){return typeof value==`string`?value.split(`/*`)[0].includes(`var(--`):!1}var number={test:v$3=>typeof v$3==`number`,parse:parseFloat,transform:v$3=>v$3},alpha={...number,transform:v$3=>clamp$2(0,1,v$3)},scale={...number,default:1},sanitize=v$3=>Math.round(v$3*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(v$3){return v$3==null}var singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(type,testProp)=>v$3=>!!(typeof v$3==`string`&&singleColorRegex.test(v$3)&&v$3.startsWith(type)||testProp&&!isNullish(v$3)&&Object.prototype.hasOwnProperty.call(v$3,testProp)),splitColor=(aName,bName,cName)=>v$3=>{if(typeof v$3!=`string`)return v$3;let[a$4,b$3,c$3,alpha$1]=v$3.match(floatRegex);return{[aName]:parseFloat(a$4),[bName]:parseFloat(b$3),[cName]:parseFloat(c$3),alpha:alpha$1===void 0?1:parseFloat(alpha$1)}},clampRgbUnit=v$3=>clamp$2(0,255,v$3),rgbUnit={...number,transform:v$3=>Math.round(clampRgbUnit(v$3))},rgba$1={test:isColorString(`rgb`,`red`),parse:splitColor(`red`,`green`,`blue`),transform:({red,green,blue,alpha:alpha$1=1})=>`rgba(`+rgbUnit.transform(red)+`, `+rgbUnit.transform(green)+`, `+rgbUnit.transform(blue)+`, `+sanitize(alpha.transform(alpha$1))+`)`};function parseHex(v$3){let r$4=``,g$3=``,b$3=``,a$4=``;return v$3.length>5?(r$4=v$3.substring(1,3),g$3=v$3.substring(3,5),b$3=v$3.substring(5,7),a$4=v$3.substring(7,9)):(r$4=v$3.substring(1,2),g$3=v$3.substring(2,3),b$3=v$3.substring(3,4),a$4=v$3.substring(4,5),r$4+=r$4,g$3+=g$3,b$3+=b$3,a$4+=a$4),{red:parseInt(r$4,16),green:parseInt(g$3,16),blue:parseInt(b$3,16),alpha:a$4?parseInt(a$4,16)/255:1}}var hex$1={test:isColorString(`#`),parse:parseHex,transform:rgba$1.transform},createUnitType=unit=>({test:v$3=>typeof v$3==`string`&&v$3.endsWith(unit)&&v$3.split(` `).length===1,parse:parseFloat,transform:v$3=>`${v$3}${unit}`}),degrees$1=createUnitType(`deg`),percent=createUnitType(`%`),px=createUnitType(`px`),vh=createUnitType(`vh`),vw=createUnitType(`vw`),progressPercentage=(()=>({...percent,parse:v$3=>percent.parse(v$3)/100,transform:v$3=>percent.transform(v$3*100)}))(),hsla$1={test:isColorString(`hsl`,`hue`),parse:splitColor(`hue`,`saturation`,`lightness`),transform:({hue,saturation,lightness,alpha:alpha$1=1})=>`hsla(`+Math.round(hue)+`, `+percent.transform(sanitize(saturation))+`, `+percent.transform(sanitize(lightness))+`, `+sanitize(alpha.transform(alpha$1))+`)`},color$1={test:v$3=>rgba$1.test(v$3)||hex$1.test(v$3)||hsla$1.test(v$3),parse:v$3=>rgba$1.test(v$3)?rgba$1.parse(v$3):hsla$1.test(v$3)?hsla$1.parse(v$3):hex$1.parse(v$3),transform:v$3=>typeof v$3==`string`?v$3:v$3.hasOwnProperty(`red`)?rgba$1.transform(v$3):hsla$1.transform(v$3),getAnimatableNone:v$3=>{let parsed=color$1.parse(v$3);return parsed.alpha=0,color$1.transform(parsed)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(v$3){return isNaN(v$3)&&typeof v$3==`string`&&(v$3.match(floatRegex)?.length||0)+(v$3.match(colorRegex)?.length||0)>0}var NUMBER_TOKEN=`number`,COLOR_TOKEN=`color`,VAR_TOKEN=`var`,VAR_FUNCTION_TOKEN=`var(`,SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(value){let originalValue=value.toString(),values=[],indexes={color:[],number:[],var:[]},types=[],i$4=0;return{values,split:originalValue.replace(complexRegex,parsedValue=>(color$1.test(parsedValue)?(indexes.color.push(i$4),types.push(COLOR_TOKEN),values.push(color$1.parse(parsedValue))):parsedValue.startsWith(VAR_FUNCTION_TOKEN)?(indexes.var.push(i$4),types.push(VAR_TOKEN),values.push(parsedValue)):(indexes.number.push(i$4),types.push(NUMBER_TOKEN),values.push(parseFloat(parsedValue))),++i$4,SPLIT_TOKEN)).split(SPLIT_TOKEN),indexes,types}}function parseComplexValue(v$3){return analyseComplexValue(v$3).values}function createTransformer(source){let{split,types}=analyseComplexValue(source),numSections=split.length;return v$3=>{let output=``;for(let i$4=0;i$4<numSections;i$4++)if(output+=split[i$4],v$3[i$4]!==void 0){let type=types[i$4];type===NUMBER_TOKEN?output+=sanitize(v$3[i$4]):type===COLOR_TOKEN?output+=color$1.transform(v$3[i$4]):output+=v$3[i$4]}return output}}var convertNumbersToZero=v$3=>typeof v$3==`number`?0:color$1.test(v$3)?color$1.getAnimatableNone(v$3):v$3;function getAnimatableNone$1(v$3){let parsed=parseComplexValue(v$3);return createTransformer(v$3)(parsed.map(convertNumbersToZero))}var complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(p$3,q$1,t$4){return t$4<0&&(t$4+=1),t$4>1&&--t$4,t$4<1/6?p$3+(q$1-p$3)*6*t$4:t$4<1/2?q$1:t$4<2/3?p$3+(q$1-p$3)*(2/3-t$4)*6:p$3}function hslaToRgba({hue,saturation,lightness,alpha:alpha$1}){hue/=360,saturation/=100,lightness/=100;let red=0,green=0,blue=0;if(!saturation)red=green=blue=lightness;else{let q$1=lightness<.5?lightness*(1+saturation):lightness+saturation-lightness*saturation,p$3=2*lightness-q$1;red=hueToRgb(p$3,q$1,hue+1/3),green=hueToRgb(p$3,q$1,hue),blue=hueToRgb(p$3,q$1,hue-1/3)}return{red:Math.round(red*255),green:Math.round(green*255),blue:Math.round(blue*255),alpha:alpha$1}}function mixImmediate(a$4,b$3){return p$3=>p$3>0?b$3:a$4}var mixNumber=(from,to,progress$1)=>from+(to-from)*progress$1,mixLinearColor=(from,to,v$3)=>{let fromExpo=from*from,expo=v$3*(to*to-fromExpo)+fromExpo;return expo<0?0:Math.sqrt(expo)},colorTypes=[hex$1,rgba$1,hsla$1],getColorType=v$3=>colorTypes.find(type=>type.test(v$3));function asRGBA(color$2){let type=getColorType(color$2);if(`${color$2}`,!type)return!1;let model=type.parse(color$2);return type===hsla$1&&(model=hslaToRgba(model)),model}var mixColor=(from,to)=>{let fromRGBA=asRGBA(from),toRGBA=asRGBA(to);if(!fromRGBA||!toRGBA)return mixImmediate(from,to);let blended={...fromRGBA};return v$3=>(blended.red=mixLinearColor(fromRGBA.red,toRGBA.red,v$3),blended.green=mixLinearColor(fromRGBA.green,toRGBA.green,v$3),blended.blue=mixLinearColor(fromRGBA.blue,toRGBA.blue,v$3),blended.alpha=mixNumber(fromRGBA.alpha,toRGBA.alpha,v$3),rgba$1.transform(blended))},invisibleValues=new Set([`none`,`hidden`]);function mixVisibility(origin$2,target){return invisibleValues.has(origin$2)?p$3=>p$3<=0?origin$2:target:p$3=>p$3>=1?target:origin$2}function mixNumber$1(a$4,b$3){return p$3=>mixNumber(a$4,b$3,p$3)}function getMixer(a$4){return typeof a$4==`number`?mixNumber$1:typeof a$4==`string`?isCSSVariableToken(a$4)?mixImmediate:color$1.test(a$4)?mixColor:mixComplex:Array.isArray(a$4)?mixArray:typeof a$4==`object`?color$1.test(a$4)?mixColor:mixObject:mixImmediate}function mixArray(a$4,b$3){let output=[...a$4],numValues=output.length,blendValue=a$4.map((v$3,i$4)=>getMixer(v$3)(v$3,b$3[i$4]));return p$3=>{for(let i$4=0;i$4<numValues;i$4++)output[i$4]=blendValue[i$4](p$3);return output}}function mixObject(a$4,b$3){let output={...a$4,...b$3},blendValue={};for(let key$1 in output)a$4[key$1]!==void 0&&b$3[key$1]!==void 0&&(blendValue[key$1]=getMixer(a$4[key$1])(a$4[key$1],b$3[key$1]));return v$3=>{for(let key$1 in blendValue)output[key$1]=blendValue[key$1](v$3);return output}}function matchOrder(origin$2,target){let orderedOrigin=[],pointers={color:0,var:0,number:0};for(let i$4=0;i$4<target.values.length;i$4++){let type=target.types[i$4],originIndex=origin$2.indexes[type][pointers[type]];orderedOrigin[i$4]=origin$2.values[originIndex]??0,pointers[type]++}return orderedOrigin}var mixComplex=(origin$2,target)=>{let template=complex.createTransformer(target),originStats=analyseComplexValue(origin$2),targetStats=analyseComplexValue(target);return originStats.indexes.var.length===targetStats.indexes.var.length&&originStats.indexes.color.length===targetStats.indexes.color.length&&originStats.indexes.number.length>=targetStats.indexes.number.length?invisibleValues.has(origin$2)&&!targetStats.values.length||invisibleValues.has(target)&&!originStats.values.length?mixVisibility(origin$2,target):pipe(mixArray(matchOrder(originStats,targetStats),targetStats.values),template):(`${origin$2}${target}`,mixImmediate(origin$2,target))};function mix(from,to,p$3){return typeof from==`number`&&typeof to==`number`&&typeof p$3==`number`?mixNumber(from,to,p$3):getMixer(from)(from,to)}var frameloopDriver=update$1=>{let passTimestamp=({timestamp})=>update$1(timestamp);return{start:(keepAlive=!0)=>frame$1.update(passTimestamp,keepAlive),stop:()=>cancelFrame(passTimestamp),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(easing,duration,resolution=10)=>{let points=``,numPoints=Math.max(Math.round(duration/resolution),2);for(let i$4=0;i$4<numPoints;i$4++)points+=Math.round(easing(i$4/(numPoints-1))*1e4)/1e4+`, `;return`linear(${points.substring(0,points.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(generator){let duration=0,timeStep=50,state=generator.next(duration);for(;!state.done&&duration<2e4;)duration+=50,state=generator.next(duration);return duration>=2e4?1/0:duration}function createGeneratorEasing(options$1,scale$1=100,createGenerator){let generator=createGenerator({...options$1,keyframes:[0,scale$1]}),duration=Math.min(calcGeneratorDuration(generator),maxGeneratorDuration);return{type:`keyframes`,ease:progress$1=>generator.next(duration*progress$1).value/scale$1,duration:millisecondsToSeconds(duration)}}var velocitySampleDuration=5;function calcGeneratorVelocity(resolveValue,t$4,current){let prevT=Math.max(t$4-velocitySampleDuration,0);return velocityPerSecond(current-resolveValue(prevT),t$4-prevT)}var springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration=springDefaults.duration,bounce=springDefaults.bounce,velocity=springDefaults.velocity,mass=springDefaults.mass}){let envelope,derivative;springDefaults.maxDuration;let dampingRatio=1-bounce;dampingRatio=clamp$2(springDefaults.minDamping,springDefaults.maxDamping,dampingRatio),duration=clamp$2(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(duration)),dampingRatio<1?(envelope=undampedFreq$1=>{let exponentialDecay=undampedFreq$1*dampingRatio,delta=exponentialDecay*duration,a$4=exponentialDecay-velocity,b$3=calcAngularFreq(undampedFreq$1,dampingRatio),c$3=Math.exp(-delta);return safeMin-a$4/b$3*c$3},derivative=undampedFreq$1=>{let delta=undampedFreq$1*dampingRatio*duration,d$3=delta*velocity+velocity,e$4=dampingRatio**2*undampedFreq$1**2*duration,f$3=Math.exp(-delta),g$3=calcAngularFreq(undampedFreq$1**2,dampingRatio);return(-envelope(undampedFreq$1)+safeMin>0?-1:1)*((d$3-e$4)*f$3)/g$3}):(envelope=undampedFreq$1=>{let a$4=Math.exp(-undampedFreq$1*duration),b$3=(undampedFreq$1-velocity)*duration+1;return-safeMin+a$4*b$3},derivative=undampedFreq$1=>Math.exp(-undampedFreq$1*duration)*((velocity-undampedFreq$1)*(duration*duration)));let initialGuess=5/duration,undampedFreq=approximateRoot(envelope,derivative,initialGuess);if(duration=secondsToMilliseconds(duration),isNaN(undampedFreq))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration};{let stiffness=undampedFreq**2*mass;return{stiffness,damping:dampingRatio*2*Math.sqrt(mass*stiffness),duration}}}var rootIterations=12;function approximateRoot(envelope,derivative,initialGuess){let result=initialGuess;for(let i$4=1;i$4<rootIterations;i$4++)result-=envelope(result)/derivative(result);return result}function calcAngularFreq(undampedFreq,dampingRatio){return undampedFreq*Math.sqrt(1-dampingRatio*dampingRatio)}var durationKeys=[`duration`,`bounce`],physicsKeys=[`stiffness`,`damping`,`mass`];function isSpringType(options$1,keys){return keys.some(key$1=>options$1[key$1]!==void 0)}function getSpringOptions(options$1){let springOptions={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...options$1};if(!isSpringType(options$1,physicsKeys)&&isSpringType(options$1,durationKeys))if(options$1.visualDuration){let visualDuration=options$1.visualDuration,root$3=2*Math.PI/(visualDuration*1.2),stiffness=root$3*root$3,damping=2*clamp$2(.05,1,1-(options$1.bounce||0))*Math.sqrt(stiffness);springOptions={...springOptions,mass:springDefaults.mass,stiffness,damping}}else{let derived=findSpring(options$1);springOptions={...springOptions,...derived,mass:springDefaults.mass},springOptions.isResolvedFromDuration=!0}return springOptions}function spring(optionsOrVisualDuration=springDefaults.visualDuration,bounce=springDefaults.bounce){let options$1=typeof optionsOrVisualDuration==`object`?optionsOrVisualDuration:{visualDuration:optionsOrVisualDuration,keyframes:[0,1],bounce},{restSpeed,restDelta}=options$1,origin$2=options$1.keyframes[0],target=options$1.keyframes[options$1.keyframes.length-1],state={done:!1,value:origin$2},{stiffness,damping,mass,duration,velocity,isResolvedFromDuration}=getSpringOptions({...options$1,velocity:-millisecondsToSeconds(options$1.velocity||0)}),initialVelocity=velocity||0,dampingRatio=damping/(2*Math.sqrt(stiffness*mass)),initialDelta=target-origin$2,undampedAngularFreq=millisecondsToSeconds(Math.sqrt(stiffness/mass)),isGranularScale=Math.abs(initialDelta)<5;restSpeed||=isGranularScale?springDefaults.restSpeed.granular:springDefaults.restSpeed.default,restDelta||=isGranularScale?springDefaults.restDelta.granular:springDefaults.restDelta.default;let resolveSpring;if(dampingRatio<1){let angularFreq=calcAngularFreq(undampedAngularFreq,dampingRatio);resolveSpring=t$4=>target-Math.exp(-dampingRatio*undampedAngularFreq*t$4)*((initialVelocity+dampingRatio*undampedAngularFreq*initialDelta)/angularFreq*Math.sin(angularFreq*t$4)+initialDelta*Math.cos(angularFreq*t$4))}else if(dampingRatio===1)resolveSpring=t$4=>target-Math.exp(-undampedAngularFreq*t$4)*(initialDelta+(initialVelocity+undampedAngularFreq*initialDelta)*t$4);else{let dampedAngularFreq=undampedAngularFreq*Math.sqrt(dampingRatio*dampingRatio-1);resolveSpring=t$4=>{let envelope=Math.exp(-dampingRatio*undampedAngularFreq*t$4),freqForT=Math.min(dampedAngularFreq*t$4,300);return target-envelope*((initialVelocity+dampingRatio*undampedAngularFreq*initialDelta)*Math.sinh(freqForT)+dampedAngularFreq*initialDelta*Math.cosh(freqForT))/dampedAngularFreq}}let generator={calculatedDuration:isResolvedFromDuration&&duration||null,next:t$4=>{let current=resolveSpring(t$4);if(isResolvedFromDuration)state.done=t$4>=duration;else{let currentVelocity=t$4===0?initialVelocity:0;dampingRatio<1&&(currentVelocity=t$4===0?secondsToMilliseconds(initialVelocity):calcGeneratorVelocity(resolveSpring,t$4,current));let isBelowVelocityThreshold=Math.abs(currentVelocity)<=restSpeed,isBelowDisplacementThreshold=Math.abs(target-current)<=restDelta;state.done=isBelowVelocityThreshold&&isBelowDisplacementThreshold}return state.value=state.done?target:current,state},toString:()=>{let calculatedDuration=Math.min(calcGeneratorDuration(generator),maxGeneratorDuration),easing=generateLinearEasing(progress$1=>generator.next(calculatedDuration*progress$1).value,calculatedDuration,30);return calculatedDuration+`ms `+easing},toTransition:()=>{}};return generator}spring.applyToOptions=options$1=>{let generatorOptions=createGeneratorEasing(options$1,100,spring);return options$1.ease=generatorOptions.ease,options$1.duration=secondsToMilliseconds(generatorOptions.duration),options$1.type=`keyframes`,options$1};function inertia({keyframes:keyframes$1,velocity=0,power=.8,timeConstant=325,bounceDamping=10,bounceStiffness=500,modifyTarget,min,max,restDelta=.5,restSpeed}){let origin$2=keyframes$1[0],state={done:!1,value:origin$2},isOutOfBounds=v$3=>min!==void 0&&v$3<min||max!==void 0&&v$3>max,nearestBoundary=v$3=>min===void 0?max:max===void 0||Math.abs(min-v$3)<Math.abs(max-v$3)?min:max,amplitude=power*velocity,ideal=origin$2+amplitude,target=modifyTarget===void 0?ideal:modifyTarget(ideal);target!==ideal&&(amplitude=target-origin$2);let calcDelta=t$4=>-amplitude*Math.exp(-t$4/timeConstant),calcLatest=t$4=>target+calcDelta(t$4),applyFriction=t$4=>{let delta=calcDelta(t$4),latest=calcLatest(t$4);state.done=Math.abs(delta)<=restDelta,state.value=state.done?target:latest},timeReachedBoundary,spring$1,checkCatchBoundary=t$4=>{isOutOfBounds(state.value)&&(timeReachedBoundary=t$4,spring$1=spring({keyframes:[state.value,nearestBoundary(state.value)],velocity:calcGeneratorVelocity(calcLatest,t$4,state.value),damping:bounceDamping,stiffness:bounceStiffness,restDelta,restSpeed}))};return checkCatchBoundary(0),{calculatedDuration:null,next:t$4=>{let hasUpdatedFrame=!1;return!spring$1&&timeReachedBoundary===void 0&&(hasUpdatedFrame=!0,applyFriction(t$4),checkCatchBoundary(t$4)),timeReachedBoundary!==void 0&&t$4>=timeReachedBoundary?spring$1.next(t$4-timeReachedBoundary):(!hasUpdatedFrame&&applyFriction(t$4),state)}}}function createMixers(output,ease$1,customMixer){let mixers=[],mixerFactory=customMixer||MotionGlobalConfig.mix||mix,numMixers=output.length-1;for(let i$4=0;i$4<numMixers;i$4++){let mixer=mixerFactory(output[i$4],output[i$4+1]);ease$1&&(mixer=pipe(Array.isArray(ease$1)?ease$1[i$4]||noop$5:ease$1,mixer)),mixers.push(mixer)}return mixers}function interpolate(input,output,{clamp:isClamp=!0,ease:ease$1,mixer}={}){let inputLength=input.length;if(output.length,inputLength===1)return()=>output[0];if(inputLength===2&&output[0]===output[1])return()=>output[1];let isZeroDeltaRange=input[0]===input[1];input[0]>input[inputLength-1]&&(input=[...input].reverse(),output=[...output].reverse());let mixers=createMixers(output,ease$1,mixer),numMixers=mixers.length,interpolator=v$3=>{if(isZeroDeltaRange&&v$3<input[0])return output[0];let i$4=0;if(numMixers>1)for(;i$4<input.length-2&&!(v$3<input[i$4+1]);i$4++);let progressInRange=progress(input[i$4],input[i$4+1],v$3);return mixers[i$4](progressInRange)};return isClamp?v$3=>interpolator(clamp$2(input[0],input[inputLength-1],v$3)):interpolator}function fillOffset(offset$1,remaining){let min=offset$1[offset$1.length-1];for(let i$4=1;i$4<=remaining;i$4++){let offsetProgress=progress(0,remaining,i$4);offset$1.push(mixNumber(min,1,offsetProgress))}}function defaultOffset(arr){let offset$1=[0];return fillOffset(offset$1,arr.length-1),offset$1}function convertOffsetToTimes(offset$1,duration){return offset$1.map(o$3=>o$3*duration)}function defaultEasing(values,easing){return values.map(()=>easing||easeInOut).splice(0,values.length-1)}function keyframes({duration=300,keyframes:keyframeValues,times,ease:ease$1=`easeInOut`}){let easingFunctions=isEasingArray(ease$1)?ease$1.map(easingDefinitionToFunction):easingDefinitionToFunction(ease$1),state={done:!1,value:keyframeValues[0]},mapTimeToKeyframe=interpolate(convertOffsetToTimes(times&&times.length===keyframeValues.length?times:defaultOffset(keyframeValues),duration),keyframeValues,{ease:Array.isArray(easingFunctions)?easingFunctions:defaultEasing(keyframeValues,easingFunctions)});return{calculatedDuration:duration,next:t$4=>(state.value=mapTimeToKeyframe(t$4),state.done=t$4>=duration,state)}}var isNotNull$1=value=>value!==null;function getFinalKeyframe$1(keyframes$1,{repeat,repeatType=`loop`},finalKeyframe,speed=1){let resolvedKeyframes=keyframes$1.filter(isNotNull$1),index$2=speed<0||repeat&&repeatType!==`loop`&&repeat%2==1?0:resolvedKeyframes.length-1;return!index$2||finalKeyframe===void 0?resolvedKeyframes[index$2]:finalKeyframe}var transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(transition$1){typeof transition$1.type==`string`&&(transition$1.type=transitionTypeMap[transition$1.type])}var WithPromise=class{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(resolve=>{this.resolve=resolve})}notifyFinished(){this.resolve()}then(onResolve,onReject){return this.finished.then(onResolve,onReject)}},percentToProgress=percent$1=>percent$1/100,JSAnimation=class extends WithPromise{constructor(options$1){super(),this.state=`idle`,this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:motionValue$1}=this.options;motionValue$1&&motionValue$1.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!==`idle`&&(this.teardown(),this.options.onStop?.())},activeAnimations.mainThread++,this.options=options$1,this.initAnimation(),this.play(),options$1.autoplay===!1&&this.pause()}initAnimation(){let{options:options$1}=this;replaceTransitionType(options$1);let{type=keyframes,repeat=0,repeatDelay=0,repeatType,velocity=0}=options$1,{keyframes:keyframes$1}=options$1,generatorFactory=type||keyframes;generatorFactory!==keyframes&&typeof keyframes$1[0]!=`number`&&(this.mixKeyframes=pipe(percentToProgress,mix(keyframes$1[0],keyframes$1[1])),keyframes$1=[0,100]);let generator=generatorFactory({...options$1,keyframes:keyframes$1});repeatType===`mirror`&&(this.mirroredGenerator=generatorFactory({...options$1,keyframes:[...keyframes$1].reverse(),velocity:-velocity})),generator.calculatedDuration===null&&(generator.calculatedDuration=calcGeneratorDuration(generator));let{calculatedDuration}=generator;this.calculatedDuration=calculatedDuration,this.resolvedDuration=calculatedDuration+repeatDelay,this.totalDuration=this.resolvedDuration*(repeat+1)-repeatDelay,this.generator=generator}updateTime(timestamp){let animationTime=Math.round(timestamp-this.startTime)*this.playbackSpeed;this.holdTime===null?this.currentTime=animationTime:this.currentTime=this.holdTime}tick(timestamp,sample=!1){let{generator,totalDuration,mixKeyframes,mirroredGenerator,resolvedDuration,calculatedDuration}=this;if(this.startTime===null)return generator.next(0);let{delay:delay$1=0,keyframes:keyframes$1,repeat,repeatType,repeatDelay,type,onUpdate,finalKeyframe}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,timestamp):this.speed<0&&(this.startTime=Math.min(timestamp-totalDuration/this.speed,this.startTime)),sample?this.currentTime=timestamp:this.updateTime(timestamp);let timeWithoutDelay=this.currentTime-delay$1*(this.playbackSpeed>=0?1:-1),isInDelayPhase=this.playbackSpeed>=0?timeWithoutDelay<0:timeWithoutDelay>totalDuration;this.currentTime=Math.max(timeWithoutDelay,0),this.state===`finished`&&this.holdTime===null&&(this.currentTime=totalDuration);let elapsed=this.currentTime,frameGenerator=generator;if(repeat){let progress$1=Math.min(this.currentTime,totalDuration)/resolvedDuration,currentIteration=Math.floor(progress$1),iterationProgress=progress$1%1;!iterationProgress&&progress$1>=1&&(iterationProgress=1),iterationProgress===1&&currentIteration--,currentIteration=Math.min(currentIteration,repeat+1),currentIteration%2&&(repeatType===`reverse`?(iterationProgress=1-iterationProgress,repeatDelay&&(iterationProgress-=repeatDelay/resolvedDuration)):repeatType===`mirror`&&(frameGenerator=mirroredGenerator)),elapsed=clamp$2(0,1,iterationProgress)*resolvedDuration}let state=isInDelayPhase?{done:!1,value:keyframes$1[0]}:frameGenerator.next(elapsed);mixKeyframes&&(state.value=mixKeyframes(state.value));let{done}=state;!isInDelayPhase&&calculatedDuration!==null&&(done=this.playbackSpeed>=0?this.currentTime>=totalDuration:this.currentTime<=0);let isAnimationFinished=this.holdTime===null&&(this.state===`finished`||this.state===`running`&&done);return isAnimationFinished&&type!==inertia&&(state.value=getFinalKeyframe$1(keyframes$1,this.options,finalKeyframe,this.speed)),onUpdate&&onUpdate(state.value),isAnimationFinished&&this.finish(),state}then(resolve,reject){return this.finished.then(resolve,reject)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){let{delay:delay$1=0}=this.options||{};return this.duration+millisecondsToSeconds(delay$1)}get time(){return millisecondsToSeconds(this.currentTime)}set time(newTime){newTime=secondsToMilliseconds(newTime),this.currentTime=newTime,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=newTime:this.driver&&(this.startTime=this.driver.now()-newTime/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(newSpeed){this.updateTime(time.now());let hasChanged=this.playbackSpeed!==newSpeed;this.playbackSpeed=newSpeed,hasChanged&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;let{driver=frameloopDriver,startTime:startTime$1}=this.options;this.driver||=driver(timestamp=>this.tick(timestamp)),this.options.onPlay?.();let now$4=this.driver.now();this.state===`finished`?(this.updateFinished(),this.startTime=now$4):this.holdTime===null?this.startTime||=startTime$1??now$4:this.startTime=now$4-this.holdTime,this.state===`finished`&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state=`running`,this.driver.start()}pause(){this.state=`paused`,this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!==`running`&&this.play(),this.state=`finished`,this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state=`finished`,this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state=`idle`,this.stopDriver(),this.startTime=this.holdTime=null,activeAnimations.mainThread--}stopDriver(){this.driver&&=(this.driver.stop(),void 0)}sample(sampleTime){return this.startTime=0,this.tick(sampleTime,!0)}attachTimeline(timeline){return this.options.allowFlatten&&(this.options.type=`keyframes`,this.options.ease=`linear`,this.initAnimation()),this.driver?.stop(),timeline.observe(this)}};function fillWildcards(keyframes$1){for(let i$4=1;i$4<keyframes$1.length;i$4++)keyframes$1[i$4]??(keyframes$1[i$4]=keyframes$1[i$4-1])}var radToDeg=rad=>rad*180/Math.PI,rotate=v$3=>rebaseAngle(radToDeg(Math.atan2(v$3[1],v$3[0]))),matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:v$3=>(Math.abs(v$3[0])+Math.abs(v$3[3]))/2,rotate,rotateZ:rotate,skewX:v$3=>radToDeg(Math.atan(v$3[1])),skewY:v$3=>radToDeg(Math.atan(v$3[2])),skew:v$3=>(Math.abs(v$3[1])+Math.abs(v$3[2]))/2},rebaseAngle=angle=>(angle%=360,angle<0&&(angle+=360),angle),rotateZ=rotate,scaleX=v$3=>Math.sqrt(v$3[0]*v$3[0]+v$3[1]*v$3[1]),scaleY=v$3=>Math.sqrt(v$3[4]*v$3[4]+v$3[5]*v$3[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:v$3=>(scaleX(v$3)+scaleY(v$3))/2,rotateX:v$3=>rebaseAngle(radToDeg(Math.atan2(v$3[6],v$3[5]))),rotateY:v$3=>rebaseAngle(radToDeg(Math.atan2(-v$3[2],v$3[0]))),rotateZ,rotate:rotateZ,skewX:v$3=>radToDeg(Math.atan(v$3[4])),skewY:v$3=>radToDeg(Math.atan(v$3[1])),skew:v$3=>(Math.abs(v$3[1])+Math.abs(v$3[4]))/2};function defaultTransformValue(name){return name.includes(`scale`)?1:0}function parseValueFromTransform(transform$1,name){if(!transform$1||transform$1===`none`)return defaultTransformValue(name);let matrix3dMatch=transform$1.match(/^matrix3d\(([-\d.e\s,]+)\)$/u),parsers,match;if(matrix3dMatch)parsers=matrix3dParsers,match=matrix3dMatch;else{let matrix2dMatch=transform$1.match(/^matrix\(([-\d.e\s,]+)\)$/u);parsers=matrix2dParsers,match=matrix2dMatch}if(!match)return defaultTransformValue(name);let valueParser=parsers[name],values=match[1].split(`,`).map(convertTransformToNumber);return typeof valueParser==`function`?valueParser(values):values[valueParser]}var readTransformValue=(instance,name)=>{let{transform:transform$1=`none`}=getComputedStyle(instance);return parseValueFromTransform(transform$1,name)};function convertTransformToNumber(value){return parseFloat(value.trim())}var transformPropOrder=[`transformPerspective`,`x`,`y`,`z`,`translateX`,`translateY`,`translateZ`,`scale`,`scaleX`,`scaleY`,`rotate`,`rotateX`,`rotateY`,`rotateZ`,`skew`,`skewX`,`skewY`],transformProps=(()=>new Set(transformPropOrder))(),isNumOrPxType=v$3=>v$3===number||v$3===px,transformKeys=new Set([`x`,`y`,`z`]),nonTranslationalTransformKeys=transformPropOrder.filter(key$1=>!transformKeys.has(key$1));function removeNonTranslationalTransform(visualElement){let removedTransforms=[];return nonTranslationalTransformKeys.forEach(key$1=>{let value=visualElement.getValue(key$1);value!==void 0&&(removedTransforms.push([key$1,value.get()]),value.set(key$1.startsWith(`scale`)?1:0))}),removedTransforms}var positionalValues={width:({x:x$2},{paddingLeft=`0`,paddingRight=`0`})=>x$2.max-x$2.min-parseFloat(paddingLeft)-parseFloat(paddingRight),height:({y:y$2},{paddingTop=`0`,paddingBottom=`0`})=>y$2.max-y$2.min-parseFloat(paddingTop)-parseFloat(paddingBottom),top:(_bbox,{top})=>parseFloat(top),left:(_bbox,{left})=>parseFloat(left),bottom:({y:y$2},{top})=>parseFloat(top)+(y$2.max-y$2.min),right:({x:x$2},{left})=>parseFloat(left)+(x$2.max-x$2.min),x:(_bbox,{transform:transform$1})=>parseValueFromTransform(transform$1,`x`),y:(_bbox,{transform:transform$1})=>parseValueFromTransform(transform$1,`y`)};positionalValues.translateX=positionalValues.x,positionalValues.translateY=positionalValues.y;var toResolve=new Set,isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){let resolversToMeasure=Array.from(toResolve).filter(resolver=>resolver.needsMeasurement),elementsToMeasure=new Set(resolversToMeasure.map(resolver=>resolver.element)),transformsToRestore=new Map;elementsToMeasure.forEach(element=>{let removedTransforms=removeNonTranslationalTransform(element);removedTransforms.length&&(transformsToRestore.set(element,removedTransforms),element.render())}),resolversToMeasure.forEach(resolver=>resolver.measureInitialState()),elementsToMeasure.forEach(element=>{element.render();let restore=transformsToRestore.get(element);restore&&restore.forEach(([key$1,value])=>{element.getValue(key$1)?.set(value)})}),resolversToMeasure.forEach(resolver=>resolver.measureEndState()),resolversToMeasure.forEach(resolver=>{resolver.suspendedScrollY!==void 0&&window.scrollTo(0,resolver.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(resolver=>resolver.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(resolver=>{resolver.readKeyframes(),resolver.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}var KeyframeResolver=class{constructor(unresolvedKeyframes,onComplete,name,motionValue$1,element,isAsync=!1){this.state=`pending`,this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...unresolvedKeyframes],this.onComplete=onComplete,this.name=name,this.motionValue=motionValue$1,this.element=element,this.isAsync=isAsync}scheduleResolve(){this.state=`scheduled`,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame$1.read(readAllKeyframes),frame$1.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes,name,element,motionValue:motionValue$1}=this;if(unresolvedKeyframes[0]===null){let currentValue=motionValue$1?.get(),finalKeyframe=unresolvedKeyframes[unresolvedKeyframes.length-1];if(currentValue!==void 0)unresolvedKeyframes[0]=currentValue;else if(element&&name){let valueAsRead=element.readValue(name,finalKeyframe);valueAsRead!=null&&(unresolvedKeyframes[0]=valueAsRead)}unresolvedKeyframes[0]===void 0&&(unresolvedKeyframes[0]=finalKeyframe),motionValue$1&&currentValue===void 0&&motionValue$1.set(unresolvedKeyframes[0])}fillWildcards(unresolvedKeyframes)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(isForcedComplete=!1){this.state=`complete`,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,isForcedComplete),toResolve.delete(this)}cancel(){this.state===`scheduled`&&(toResolve.delete(this),this.state=`pending`)}resume(){this.state===`pending`&&this.scheduleResolve()}},isCSSVar=name=>name.startsWith(`--`);function setStyle(element,name,value){isCSSVar(name)?element.style.setProperty(name,value):element.style[name]=value}var supportsScrollTimeline=memo$3(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(callback,supportsFlag){let memoized=memo$3(callback);return()=>supportsFlags[supportsFlag]??memoized()}var supportsLinearEasing=memoSupports(()=>{try{document.createElement(`div`).animate({opacity:0},{easing:`linear(0, 1)`})}catch{return!1}return!0},`linearEasing`),cubicBezierAsString=([a$4,b$3,c$3,d$3])=>`cubic-bezier(${a$4}, ${b$3}, ${c$3}, ${d$3})`,supportedWaapiEasing={linear:`linear`,ease:`ease`,easeIn:`ease-in`,easeOut:`ease-out`,easeInOut:`ease-in-out`,circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(easing,duration){if(easing)return typeof easing==`function`?supportsLinearEasing()?generateLinearEasing(easing,duration):`ease-out`:isBezierDefinition(easing)?cubicBezierAsString(easing):Array.isArray(easing)?easing.map(segmentEasing=>mapEasingToNativeEasing(segmentEasing,duration)||supportedWaapiEasing.easeOut):supportedWaapiEasing[easing]}function startWaapiAnimation(element,valueName,keyframes$1,{delay:delay$1=0,duration=300,repeat=0,repeatType=`loop`,ease:ease$1=`easeOut`,times}={},pseudoElement=void 0){let keyframeOptions={[valueName]:keyframes$1};times&&(keyframeOptions.offset=times);let easing=mapEasingToNativeEasing(ease$1,duration);Array.isArray(easing)&&(keyframeOptions.easing=easing),statsBuffer.value&&activeAnimations.waapi++;let options$1={delay:delay$1,duration,easing:Array.isArray(easing)?`linear`:easing,fill:`both`,iterations:repeat+1,direction:repeatType===`reverse`?`alternate`:`normal`};pseudoElement&&(options$1.pseudoElement=pseudoElement);let animation=element.animate(keyframeOptions,options$1);return statsBuffer.value&&animation.finished.finally(()=>{activeAnimations.waapi--}),animation}function isGenerator(type){return typeof type==`function`&&`applyToOptions`in type}function applyGeneratorOptions({type,...options$1}){return isGenerator(type)&&supportsLinearEasing()?type.applyToOptions(options$1):(options$1.duration??=300,options$1.ease??=`easeOut`,options$1)}var NativeAnimation=class extends WithPromise{constructor(options$1){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!options$1)return;let{element,name,keyframes:keyframes$1,pseudoElement,allowFlatten=!1,finalKeyframe,onComplete}=options$1;this.isPseudoElement=!!pseudoElement,this.allowFlatten=allowFlatten,this.options=options$1,options$1.type;let transition$1=applyGeneratorOptions(options$1);this.animation=startWaapiAnimation(element,name,keyframes$1,transition$1,pseudoElement),transition$1.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!pseudoElement){let keyframe=getFinalKeyframe$1(keyframes$1,this.options,finalKeyframe,this.speed);this.updateMotionValue?this.updateMotionValue(keyframe):setStyle(element,name,keyframe),this.animation.cancel()}onComplete?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state===`finished`&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state}=this;state===`idle`||state===`finished`||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){let duration=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(duration))}get iterationDuration(){let{delay:delay$1=0}=this.options||{};return this.duration+millisecondsToSeconds(delay$1)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(newTime){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(newTime)}get speed(){return this.animation.playbackRate}set speed(newSpeed){newSpeed<0&&(this.finishedTime=null),this.animation.playbackRate=newSpeed}get state(){return this.finishedTime===null?this.animation.playState:`finished`}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(newStartTime){this.manualStartTime=this.animation.startTime=newStartTime}attachTimeline({timeline,observe}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:`linear`}),this.animation.onfinish=null,timeline&&supportsScrollTimeline()?(this.animation.timeline=timeline,noop$5):observe(this)}},unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(key$1){return key$1 in unsupportedEasingFunctions}function replaceStringEasing(transition$1){typeof transition$1.ease==`string`&&isUnsupportedEase(transition$1.ease)&&(transition$1.ease=unsupportedEasingFunctions[transition$1.ease])}var sampleDelta=10,NativeAnimationExtended=class extends NativeAnimation{constructor(options$1){replaceStringEasing(options$1),replaceTransitionType(options$1),super(options$1),options$1.startTime!==void 0&&(this.startTime=options$1.startTime),this.options=options$1}updateMotionValue(value){let{motionValue:motionValue$1,onUpdate,onComplete,element,...options$1}=this.options;if(!motionValue$1)return;if(value!==void 0){motionValue$1.set(value);return}let sampleAnimation=new JSAnimation({...options$1,autoplay:!1}),sampleTime=Math.max(sampleDelta,time.now()-this.startTime),delta=clamp$2(0,sampleDelta,sampleTime-sampleDelta);motionValue$1.setWithVelocity(sampleAnimation.sample(Math.max(0,sampleTime-delta)).value,sampleAnimation.sample(sampleTime).value,delta),sampleAnimation.stop()}},isAnimatable=(value,name)=>name===`zIndex`?!1:!!(typeof value==`number`||Array.isArray(value)||typeof value==`string`&&(complex.test(value)||value===`0`)&&!value.startsWith(`url(`));function hasKeyframesChanged(keyframes$1){let current=keyframes$1[0];if(keyframes$1.length===1)return!0;for(let i$4=0;i$4<keyframes$1.length;i$4++)if(keyframes$1[i$4]!==current)return!0}function canAnimate(keyframes$1,name,type,velocity){let originKeyframe=keyframes$1[0];if(originKeyframe===null)return!1;if(name===`display`||name===`visibility`)return!0;let targetKeyframe=keyframes$1[keyframes$1.length-1],isOriginAnimatable=isAnimatable(originKeyframe,name),isTargetAnimatable=isAnimatable(targetKeyframe,name);return`${name}${originKeyframe}${targetKeyframe}${isOriginAnimatable?targetKeyframe:originKeyframe}`,!isOriginAnimatable||!isTargetAnimatable?!1:hasKeyframesChanged(keyframes$1)||(type===`spring`||isGenerator(type))&&velocity}function makeAnimationInstant(options$1){options$1.duration=0,options$1.type=`keyframes`}var acceleratedValues=new Set([`opacity`,`clipPath`,`filter`,`transform`]),supportsWaapi=memo$3(()=>Object.hasOwnProperty.call(Element.prototype,`animate`));function supportsBrowserAnimation(options$1){let{motionValue:motionValue$1,name,repeatDelay,repeatType,damping,type}=options$1;if(!(motionValue$1?.owner?.current instanceof HTMLElement))return!1;let{onUpdate,transformTemplate}=motionValue$1.owner.getProps();return supportsWaapi()&&name&&acceleratedValues.has(name)&&(name!==`transform`||!transformTemplate)&&!onUpdate&&!repeatDelay&&repeatType!==`mirror`&&damping!==0&&type!==`inertia`}var MAX_RESOLVE_DELAY=40,AsyncMotionValueAnimation=class extends WithPromise{constructor({autoplay=!0,delay:delay$1=0,type=`keyframes`,repeat=0,repeatDelay=0,repeatType=`loop`,keyframes:keyframes$1,name,motionValue:motionValue$1,element,...options$1}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();let optionsWithDefaults={autoplay,delay:delay$1,type,repeat,repeatDelay,repeatType,name,motionValue:motionValue$1,element,...options$1};this.keyframeResolver=new(element?.KeyframeResolver||KeyframeResolver)(keyframes$1,(resolvedKeyframes,finalKeyframe,forced)=>this.onKeyframesResolved(resolvedKeyframes,finalKeyframe,optionsWithDefaults,!forced),name,motionValue$1,element),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(keyframes$1,finalKeyframe,options$1,sync){this.keyframeResolver=void 0;let{name,type,velocity,delay:delay$1,isHandoff,onUpdate}=options$1;this.resolvedAt=time.now(),canAnimate(keyframes$1,name,type,velocity)||((MotionGlobalConfig.instantAnimations||!delay$1)&&onUpdate?.(getFinalKeyframe$1(keyframes$1,options$1,finalKeyframe)),keyframes$1[0]=keyframes$1[keyframes$1.length-1],makeAnimationInstant(options$1),options$1.repeat=0);let resolvedOptions={startTime:sync?this.resolvedAt&&this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:void 0,finalKeyframe,...options$1,keyframes:keyframes$1},animation=!isHandoff&&supportsBrowserAnimation(resolvedOptions)?new NativeAnimationExtended({...resolvedOptions,element:resolvedOptions.motionValue.owner.current}):new JSAnimation(resolvedOptions);animation.finished.then(()=>this.notifyFinished()).catch(noop$5),this.pendingTimeline&&=(this.stopTimeline=animation.attachTimeline(this.pendingTimeline),void 0),this._animation=animation}get finished(){return this._animation?this.animation.finished:this._finished}then(onResolve,_onReject){return this.finished.finally(onResolve).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(newTime){this.animation.time=newTime}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(newSpeed){this.animation.speed=newSpeed}get startTime(){return this.animation.startTime}attachTimeline(timeline){return this._animation?this.stopTimeline=this.animation.attachTimeline(timeline):this.pendingTimeline=timeline,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}},splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(current){let match=splitCSSVariableRegex.exec(current);if(!match)return[,];let[,token1,token2,fallback]=match;return[`--${token1??token2}`,fallback]}var maxDepth=4;function getVariableValue(current,element,depth=1){`${current}`;let[token,fallback]=parseCSSVariable(current);if(!token)return;let resolved=window.getComputedStyle(element).getPropertyValue(token);if(resolved){let trimmed=resolved.trim();return isNumericalString(trimmed)?parseFloat(trimmed):trimmed}return isCSSVariableToken(fallback)?getVariableValue(fallback,element,depth+1):fallback}function getValueTransition(transition$1,key$1){return transition$1?.[key$1]??transition$1?.default??transition$1}var underDampedSpring={type:`spring`,stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=target=>({type:`spring`,stiffness:550,damping:target===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:`keyframes`,duration:.8},ease={type:`keyframes`,ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(valueKey,{keyframes:keyframes$1})=>keyframes$1.length>2?keyframesTransition:transformProps.has(valueKey)?valueKey.startsWith(`scale`)?criticallyDampedSpring(keyframes$1[1]):underDampedSpring:ease;function isTransitionDefined({when,delay:_delay,delayChildren,staggerChildren,staggerDirection,repeat,repeatType,repeatDelay,from,elapsed,...transition$1}){return!!Object.keys(transition$1).length}var isNotNull=value=>value!==null;function getFinalKeyframe(keyframes$1,{repeat,repeatType=`loop`},finalKeyframe){let resolvedKeyframes=keyframes$1.filter(isNotNull),index$2=repeat&&repeatType!==`loop`&&repeat%2==1?0:resolvedKeyframes.length-1;return!index$2||finalKeyframe===void 0?resolvedKeyframes[index$2]:finalKeyframe}function calcChildStagger(children$1,child,delayChildren,staggerChildren=0,staggerDirection=1){let index$2=Array.from(children$1).sort((a$4,b$3)=>a$4.sortNodePosition(b$3)).indexOf(child),numChildren=children$1.size,maxStaggerDuration=(numChildren-1)*staggerChildren;return typeof delayChildren==`function`?delayChildren(index$2,numChildren):staggerDirection===1?index$2*staggerChildren:maxStaggerDuration-index$2*staggerChildren}var animateMotionValue=(name,value,target,transition$1={},element,isHandoff)=>onComplete=>{let valueTransition=getValueTransition(transition$1,name)||{},delay$1=valueTransition.delay||transition$1.delay||0,{elapsed=0}=transition$1;elapsed-=secondsToMilliseconds(delay$1);let options$1={keyframes:Array.isArray(target)?target:[null,target],ease:`easeOut`,velocity:value.getVelocity(),...valueTransition,delay:-elapsed,onUpdate:v$3=>{value.set(v$3),valueTransition.onUpdate&&valueTransition.onUpdate(v$3)},onComplete:()=>{onComplete(),valueTransition.onComplete&&valueTransition.onComplete()},name,motionValue:value,element:isHandoff?void 0:element};isTransitionDefined(valueTransition)||Object.assign(options$1,getDefaultTransition(name,options$1)),options$1.duration&&=secondsToMilliseconds(options$1.duration),options$1.repeatDelay&&=secondsToMilliseconds(options$1.repeatDelay),options$1.from!==void 0&&(options$1.keyframes[0]=options$1.from);let shouldSkip=!1;if((options$1.type===!1||options$1.duration===0&&!options$1.repeatDelay)&&(makeAnimationInstant(options$1),options$1.delay===0&&(shouldSkip=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(shouldSkip=!0,makeAnimationInstant(options$1),options$1.delay=0),options$1.allowFlatten=!valueTransition.type&&!valueTransition.ease,shouldSkip&&!isHandoff&&value.get()!==void 0){let finalKeyframe=getFinalKeyframe(options$1.keyframes,valueTransition);if(finalKeyframe!==void 0){frame$1.update(()=>{options$1.onUpdate(finalKeyframe),options$1.onComplete()});return}}return valueTransition.isSync?new JSAnimation(options$1):new AsyncMotionValueAnimation(options$1)},positionalKeys=new Set([`width`,`height`,`top`,`left`,`right`,`bottom`,...transformPropOrder]),MAX_VELOCITY_DELTA=30,isFloat=value=>!isNaN(parseFloat(value)),collectMotionValues={current:void 0},MotionValue=class{constructor(init$1,options$1={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=v$3=>{let currentTime=time.now();if(this.updatedAt!==currentTime&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(v$3),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let dependent of this.dependents)dependent.dirty()},this.hasAnimated=!1,this.setCurrent(init$1),this.owner=options$1.owner}setCurrent(current){this.current=current,this.updatedAt=time.now(),this.canTrackVelocity===null&&current!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(prevFrameValue=this.current){this.prevFrameValue=prevFrameValue,this.prevUpdatedAt=this.updatedAt}onChange(subscription){return this.on(`change`,subscription)}on(eventName,callback){this.events[eventName]||(this.events[eventName]=new SubscriptionManager);let unsubscribe=this.events[eventName].add(callback);return eventName===`change`?()=>{unsubscribe(),frame$1.read(()=>{this.events.change.getSize()||this.stop()})}:unsubscribe}clearListeners(){for(let eventManagers in this.events)this.events[eventManagers].clear()}attach(passiveEffect,stopPassiveEffect){this.passiveEffect=passiveEffect,this.stopPassiveEffect=stopPassiveEffect}set(v$3){this.passiveEffect?this.passiveEffect(v$3,this.updateAndNotify):this.updateAndNotify(v$3)}setWithVelocity(prev,current,delta){this.set(current),this.prev=void 0,this.prevFrameValue=prev,this.prevUpdatedAt=this.updatedAt-delta}jump(v$3,endAnimation=!0){this.updateAndNotify(v$3),this.prev=v$3,this.prevUpdatedAt=this.prevFrameValue=void 0,endAnimation&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(dependent){this.dependents||=new Set,this.dependents.add(dependent)}removeDependent(dependent){this.dependents&&this.dependents.delete(dependent)}get(){return collectMotionValues.current&&collectMotionValues.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){let currentTime=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||currentTime-this.updatedAt>MAX_VELOCITY_DELTA)return 0;let delta=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),delta)}start(startAnimation){return this.stop(),new Promise(resolve=>{this.hasAnimated=!0,this.animation=startAnimation(resolve),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function motionValue(init$1,options$1){return new MotionValue(init$1,options$1)}function getValueState(visualElement){let state=[{},{}];return visualElement?.values.forEach((value,key$1)=>{state[0][key$1]=value.get(),state[1][key$1]=value.getVelocity()}),state}function resolveVariantFromProps(props,definition,custom,visualElement){if(typeof definition==`function`){let[current,velocity]=getValueState(visualElement);definition=definition(custom===void 0?props.custom:custom,current,velocity)}if(typeof definition==`string`&&(definition=props.variants&&props.variants[definition]),typeof definition==`function`){let[current,velocity]=getValueState(visualElement);definition=definition(custom===void 0?props.custom:custom,current,velocity)}return definition}function resolveVariant(visualElement,definition,custom){let props=visualElement.getProps();return resolveVariantFromProps(props,definition,custom===void 0?props.custom:custom,visualElement)}var isKeyframesTarget=v$3=>Array.isArray(v$3);function setMotionValue(visualElement,key$1,value){visualElement.hasValue(key$1)?visualElement.getValue(key$1).set(value):visualElement.addValue(key$1,motionValue(value))}function resolveFinalValueInKeyframes(v$3){return isKeyframesTarget(v$3)?v$3[v$3.length-1]||0:v$3}function setTarget(visualElement,definition){let{transitionEnd={},transition:transition$1={},...target}=resolveVariant(visualElement,definition)||{};for(let key$1 in target={...target,...transitionEnd},target)setMotionValue(visualElement,key$1,resolveFinalValueInKeyframes(target[key$1]))}var isMotionValue=value=>!!(value&&value.getVelocity);function isWillChangeMotionValue(value){return!!(isMotionValue(value)&&value.add)}function addValueToWillChange(visualElement,key$1){let willChange=visualElement.getValue(`willChange`);if(isWillChangeMotionValue(willChange))return willChange.add(key$1);if(!willChange&&MotionGlobalConfig.WillChange){let newWillChange=new MotionGlobalConfig.WillChange(`auto`);visualElement.addValue(`willChange`,newWillChange),newWillChange.add(key$1)}}function camelToDash(str){return str.replace(/([A-Z])/g,match=>`-${match.toLowerCase()}`)}var optimizedAppearDataId=`framerAppearId`,optimizedAppearDataAttribute=`data-`+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(visualElement){return visualElement.props[optimizedAppearDataAttribute]}function shouldBlockAnimation({protectedKeys,needsAnimating},key$1){let shouldBlock=protectedKeys.hasOwnProperty(key$1)&&needsAnimating[key$1]!==!0;return needsAnimating[key$1]=!1,shouldBlock}function animateTarget(visualElement,targetAndTransition,{delay:delay$1=0,transitionOverride,type}={}){let{transition:transition$1=visualElement.getDefaultTransition(),transitionEnd,...target}=targetAndTransition;transitionOverride&&(transition$1=transitionOverride);let animations$1=[],animationTypeState=type&&visualElement.animationState&&visualElement.animationState.getState()[type];for(let key$1 in target){let value=visualElement.getValue(key$1,visualElement.latestValues[key$1]??null),valueTarget=target[key$1];if(valueTarget===void 0||animationTypeState&&shouldBlockAnimation(animationTypeState,key$1))continue;let valueTransition={delay:delay$1,...getValueTransition(transition$1||{},key$1)},currentValue=value.get();if(currentValue!==void 0&&!value.isAnimating&&!Array.isArray(valueTarget)&&valueTarget===currentValue&&!valueTransition.velocity)continue;let isHandoff=!1;if(window.MotionHandoffAnimation){let appearId=getOptimisedAppearId(visualElement);if(appearId){let startTime$1=window.MotionHandoffAnimation(appearId,key$1,frame$1);startTime$1!==null&&(valueTransition.startTime=startTime$1,isHandoff=!0)}}addValueToWillChange(visualElement,key$1),value.start(animateMotionValue(key$1,value,valueTarget,visualElement.shouldReduceMotion&&positionalKeys.has(key$1)?{type:!1}:valueTransition,visualElement,isHandoff));let animation=value.animation;animation&&animations$1.push(animation)}return transitionEnd&&Promise.all(animations$1).then(()=>{frame$1.update(()=>{transitionEnd&&setTarget(visualElement,transitionEnd)})}),animations$1}function animateVariant(visualElement,variant,options$1={}){let resolved=resolveVariant(visualElement,variant,options$1.type===`exit`?visualElement.presenceContext?.custom:void 0),{transition:transition$1=visualElement.getDefaultTransition()||{}}=resolved||{};options$1.transitionOverride&&(transition$1=options$1.transitionOverride);let getAnimation=resolved?()=>Promise.all(animateTarget(visualElement,resolved,options$1)):()=>Promise.resolve(),getChildAnimations=visualElement.variantChildren&&visualElement.variantChildren.size?(forwardDelay=0)=>{let{delayChildren=0,staggerChildren,staggerDirection}=transition$1;return animateChildren(visualElement,variant,forwardDelay,delayChildren,staggerChildren,staggerDirection,options$1)}:()=>Promise.resolve(),{when}=transition$1;if(when){let[first,last]=when===`beforeChildren`?[getAnimation,getChildAnimations]:[getChildAnimations,getAnimation];return first().then(()=>last())}else return Promise.all([getAnimation(),getChildAnimations(options$1.delay)])}function animateChildren(visualElement,variant,delay$1=0,delayChildren=0,staggerChildren=0,staggerDirection=1,options$1){let animations$1=[];for(let child of visualElement.variantChildren)child.notify(`AnimationStart`,variant),animations$1.push(animateVariant(child,variant,{...options$1,delay:delay$1+(typeof delayChildren==`function`?0:delayChildren)+calcChildStagger(visualElement.variantChildren,child,delayChildren,staggerChildren,staggerDirection)}).then(()=>child.notify(`AnimationComplete`,variant)));return Promise.all(animations$1)}function animateVisualElement(visualElement,definition,options$1={}){visualElement.notify(`AnimationStart`,definition);let animation;if(Array.isArray(definition)){let animations$1=definition.map(variant=>animateVariant(visualElement,variant,options$1));animation=Promise.all(animations$1)}else if(typeof definition==`string`)animation=animateVariant(visualElement,definition,options$1);else{let resolvedDefinition=typeof definition==`function`?resolveVariant(visualElement,definition,options$1.custom):definition;animation=Promise.all(animateTarget(visualElement,resolvedDefinition,options$1))}return animation.then(()=>{visualElement.notify(`AnimationComplete`,definition)})}var auto={test:v$3=>v$3===`auto`,parse:v$3=>v$3},testValueType=v$3=>type=>type.test(v$3),dimensionValueTypes=[number,px,percent,degrees$1,vw,vh,auto],findDimensionValueType=v$3=>dimensionValueTypes.find(testValueType(v$3));function isNone(value){return typeof value==`number`?value===0:value===null?!0:value===`none`||value===`0`||isZeroValueString(value)}var maxDefaults=new Set([`brightness`,`contrast`,`saturate`,`opacity`]);function applyDefaultFilter(v$3){let[name,value]=v$3.slice(0,-1).split(`(`);if(name===`drop-shadow`)return v$3;let[number$1]=value.match(floatRegex)||[];if(!number$1)return v$3;let unit=value.replace(number$1,``),defaultValue$3=maxDefaults.has(name)?1:0;return number$1!==value&&(defaultValue$3*=100),name+`(`+defaultValue$3+unit+`)`}var functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter$1={...complex,getAnimatableNone:v$3=>{let functions=v$3.match(functionRegex);return functions?functions.map(applyDefaultFilter).join(` `):v$3}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees$1,rotateX:degrees$1,rotateY:degrees$1,rotateZ:degrees$1,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees$1,skewX:degrees$1,skewY:degrees$1,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,inset:px,insetBlock:px,insetBlockStart:px,insetBlockEnd:px,insetInline:px,insetInlineStart:px,insetInlineEnd:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,paddingBlock:px,paddingBlockStart:px,paddingBlockEnd:px,paddingInline:px,paddingInlineStart:px,paddingInlineEnd:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,marginBlock:px,marginBlockStart:px,marginBlockEnd:px,marginInline:px,marginInlineStart:px,marginInlineEnd:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter:filter$1,WebkitFilter:filter$1},getDefaultValueType=key$1=>defaultValueTypes[key$1];function getAnimatableNone(key$1,value){let defaultValueType=getDefaultValueType(key$1);return defaultValueType!==filter$1&&(defaultValueType=complex),defaultValueType.getAnimatableNone?defaultValueType.getAnimatableNone(value):void 0}var invalidTemplates=new Set([`auto`,`none`,`0`]);function makeNoneKeyframesAnimatable(unresolvedKeyframes,noneKeyframeIndexes,name){let i$4=0,animatableTemplate;for(;i$4<unresolvedKeyframes.length&&!animatableTemplate;){let keyframe=unresolvedKeyframes[i$4];typeof keyframe==`string`&&!invalidTemplates.has(keyframe)&&analyseComplexValue(keyframe).values.length&&(animatableTemplate=unresolvedKeyframes[i$4]),i$4++}if(animatableTemplate&&name)for(let noneIndex of noneKeyframeIndexes)unresolvedKeyframes[noneIndex]=getAnimatableNone(name,animatableTemplate)}var DOMKeyframesResolver=class extends KeyframeResolver{constructor(unresolvedKeyframes,onComplete,name,motionValue$1,element){super(unresolvedKeyframes,onComplete,name,motionValue$1,element,!0)}readKeyframes(){let{unresolvedKeyframes,element,name}=this;if(!element||!element.current)return;super.readKeyframes();for(let i$4=0;i$4<unresolvedKeyframes.length;i$4++){let keyframe=unresolvedKeyframes[i$4];if(typeof keyframe==`string`&&(keyframe=keyframe.trim(),isCSSVariableToken(keyframe))){let resolved=getVariableValue(keyframe,element.current);resolved!==void 0&&(unresolvedKeyframes[i$4]=resolved),i$4===unresolvedKeyframes.length-1&&(this.finalKeyframe=keyframe)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(name)||unresolvedKeyframes.length!==2)return;let[origin$2,target]=unresolvedKeyframes,originType=findDimensionValueType(origin$2),targetType=findDimensionValueType(target);if(containsCSSVariable(origin$2)!==containsCSSVariable(target)&&positionalValues[name]){this.needsMeasurement=!0;return}if(originType!==targetType)if(isNumOrPxType(originType)&&isNumOrPxType(targetType))for(let i$4=0;i$4<unresolvedKeyframes.length;i$4++){let value=unresolvedKeyframes[i$4];typeof value==`string`&&(unresolvedKeyframes[i$4]=parseFloat(value))}else positionalValues[name]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes,name}=this,noneKeyframeIndexes=[];for(let i$4=0;i$4<unresolvedKeyframes.length;i$4++)(unresolvedKeyframes[i$4]===null||isNone(unresolvedKeyframes[i$4]))&&noneKeyframeIndexes.push(i$4);noneKeyframeIndexes.length&&makeNoneKeyframesAnimatable(unresolvedKeyframes,noneKeyframeIndexes,name)}measureInitialState(){let{element,unresolvedKeyframes,name}=this;if(!element||!element.current)return;name===`height`&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[name](element.measureViewportBox(),window.getComputedStyle(element.current)),unresolvedKeyframes[0]=this.measuredOrigin;let measureKeyframe=unresolvedKeyframes[unresolvedKeyframes.length-1];measureKeyframe!==void 0&&element.getValue(name,measureKeyframe).jump(measureKeyframe,!1)}measureEndState(){let{element,name,unresolvedKeyframes}=this;if(!element||!element.current)return;let value=element.getValue(name);value&&value.jump(this.measuredOrigin,!1);let finalKeyframeIndex=unresolvedKeyframes.length-1,finalKeyframe=unresolvedKeyframes[finalKeyframeIndex];unresolvedKeyframes[finalKeyframeIndex]=positionalValues[name](element.measureViewportBox(),window.getComputedStyle(element.current)),finalKeyframe!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=finalKeyframe),this.removedTransforms?.length&&this.removedTransforms.forEach(([unsetTransformName,unsetTransformValue])=>{element.getValue(unsetTransformName).set(unsetTransformValue)}),this.resolveNoneKeyframes()}};function resolveElements(elementOrSelector,scope$1,selectorCache){if(elementOrSelector instanceof EventTarget)return[elementOrSelector];if(typeof elementOrSelector==`string`){let root$3=document;scope$1&&(root$3=scope$1.current);let elements=selectorCache?.[elementOrSelector]??root$3.querySelectorAll(elementOrSelector);return elements?Array.from(elements):[]}return Array.from(elementOrSelector)}var getValueAsType=(value,type)=>type&&typeof value==`number`?type.transform(value):value;function isHTMLElement$1(element){return isObject$1(element)&&`offsetHeight`in element}var{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1),isDragging$1={x:!1,y:!1};function isDragActive(){return isDragging$1.x||isDragging$1.y}function setDragLock(axis){return axis===`x`||axis===`y`?isDragging$1[axis]?null:(isDragging$1[axis]=!0,()=>{isDragging$1[axis]=!1}):isDragging$1.x||isDragging$1.y?null:(isDragging$1.x=isDragging$1.y=!0,()=>{isDragging$1.x=isDragging$1.y=!1})}function setupGesture(elementOrSelector,options$1){let elements=resolveElements(elementOrSelector),gestureAbortController=new AbortController;return[elements,{passive:!0,...options$1,signal:gestureAbortController.signal},()=>gestureAbortController.abort()]}function isValidHover(event){return!(event.pointerType===`touch`||isDragActive())}function hover(elementOrSelector,onHoverStart,options$1={}){let[elements,eventOptions,cancel]=setupGesture(elementOrSelector,options$1),onPointerEnter=enterEvent=>{if(!isValidHover(enterEvent))return;let{target}=enterEvent,onHoverEnd=onHoverStart(target,enterEvent);if(typeof onHoverEnd!=`function`||!target)return;let onPointerLeave=leaveEvent=>{isValidHover(leaveEvent)&&(onHoverEnd(leaveEvent),target.removeEventListener(`pointerleave`,onPointerLeave))};target.addEventListener(`pointerleave`,onPointerLeave,eventOptions)};return elements.forEach(element=>{element.addEventListener(`pointerenter`,onPointerEnter,eventOptions)}),cancel}var isNodeOrChild=(parent,child)=>child?parent===child?!0:isNodeOrChild(parent,child.parentElement):!1,isPrimaryPointer=event=>event.pointerType===`mouse`?typeof event.button!=`number`||event.button<=0:event.isPrimary!==!1,interactiveElements=new Set([`BUTTON`,`INPUT`,`SELECT`,`TEXTAREA`,`A`]);function isElementKeyboardAccessible(element){return interactiveElements.has(element.tagName)||element.isContentEditable===!0}var isPressing=new WeakSet;function filterEvents(callback){return event=>{event.key===`Enter`&&callback(event)}}function firePointerEvent(target,type){target.dispatchEvent(new PointerEvent(`pointer`+type,{isPrimary:!0,bubbles:!0}))}var enableKeyboardPress=(focusEvent,eventOptions)=>{let element=focusEvent.currentTarget;if(!element)return;let handleKeydown=filterEvents(()=>{if(isPressing.has(element))return;firePointerEvent(element,`down`);let handleKeyup=filterEvents(()=>{firePointerEvent(element,`up`)});element.addEventListener(`keyup`,handleKeyup,eventOptions),element.addEventListener(`blur`,()=>firePointerEvent(element,`cancel`),eventOptions)});element.addEventListener(`keydown`,handleKeydown,eventOptions),element.addEventListener(`blur`,()=>element.removeEventListener(`keydown`,handleKeydown),eventOptions)};function isValidPressEvent(event){return isPrimaryPointer(event)&&!isDragActive()}function press(targetOrSelector,onPressStart,options$1={}){let[targets,eventOptions,cancelEvents]=setupGesture(targetOrSelector,options$1),startPress=startEvent=>{let target=startEvent.currentTarget;if(!isValidPressEvent(startEvent))return;isPressing.add(target);let onPressEnd=onPressStart(target,startEvent),onPointerEnd=(endEvent,success)=>{window.removeEventListener(`pointerup`,onPointerUp),window.removeEventListener(`pointercancel`,onPointerCancel),isPressing.has(target)&&isPressing.delete(target),isValidPressEvent(endEvent)&&typeof onPressEnd==`function`&&onPressEnd(endEvent,{success})},onPointerUp=upEvent=>{onPointerEnd(upEvent,target===window||target===document||options$1.useGlobalTarget||isNodeOrChild(target,upEvent.target))},onPointerCancel=cancelEvent=>{onPointerEnd(cancelEvent,!1)};window.addEventListener(`pointerup`,onPointerUp,eventOptions),window.addEventListener(`pointercancel`,onPointerCancel,eventOptions)};return targets.forEach(target=>{(options$1.useGlobalTarget?window:target).addEventListener(`pointerdown`,startPress,eventOptions),isHTMLElement$1(target)&&(target.addEventListener(`focus`,event=>enableKeyboardPress(event,eventOptions)),!isElementKeyboardAccessible(target)&&!target.hasAttribute(`tabindex`)&&(target.tabIndex=0))}),cancelEvents}function isSVGElement$1(element){return isObject$1(element)&&`ownerSVGElement`in element}function isSVGSVGElement(element){return isSVGElement$1(element)&&element.tagName===`svg`}var valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=v$3=>valueTypes.find(testValueType(v$3)),createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox$1=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1},isBrowser$1=typeof window<`u`;function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,isBrowser$1)if(window.matchMedia){let motionMediaQuery=window.matchMedia(`(prefers-reduced-motion)`),setReducedMotionPreferences=()=>prefersReducedMotion.current=motionMediaQuery.matches;motionMediaQuery.addEventListener(`change`,setReducedMotionPreferences),setReducedMotionPreferences()}else prefersReducedMotion.current=!1}var visualElementStore=new WeakMap;function isAnimationControls(v$3){return typeof v$3==`object`&&!!v$3&&typeof v$3.start==`function`}function isVariantLabel(v$3){return typeof v$3==`string`||Array.isArray(v$3)}var variantPriorityOrder=[`animate`,`whileInView`,`whileFocus`,`whileHover`,`whileTap`,`whileDrag`,`exit`],variantProps=[`initial`,...variantPriorityOrder];function isControllingVariants(props){return isAnimationControls(props.animate)||variantProps.some(name=>isVariantLabel(props[name]))}function isVariantNode(props){return!!(isControllingVariants(props)||props.variants)}function updateMotionValuesFromProps(element,next,prev){for(let key$1 in next){let nextValue=next[key$1],prevValue=prev[key$1];if(isMotionValue(nextValue))element.addValue(key$1,nextValue);else if(isMotionValue(prevValue))element.addValue(key$1,motionValue(nextValue,{owner:element}));else if(prevValue!==nextValue)if(element.hasValue(key$1)){let existingValue=element.getValue(key$1);existingValue.liveStyle===!0?existingValue.jump(nextValue):existingValue.hasAnimated||existingValue.set(nextValue)}else{let latestValue=element.getStaticValue(key$1);element.addValue(key$1,motionValue(latestValue===void 0?nextValue:latestValue,{owner:element}))}}for(let key$1 in prev)next[key$1]===void 0&&element.removeValue(key$1);return next}var propEventHandlers=[`AnimationStart`,`AnimationComplete`,`Update`,`BeforeLayoutMeasure`,`LayoutMeasure`,`LayoutAnimationStart`,`LayoutAnimationComplete`],featureDefinitions={};function setFeatureDefinitions(definitions){featureDefinitions=definitions}function getFeatureDefinitions(){return featureDefinitions}var VisualElement=class{scrapeMotionValuesFromProps(_props,_prevProps,_visualElement){return{}}constructor({parent,props,presenceContext,reducedMotionConfig,blockInitialAnimation,visualState},options$1={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify(`Update`,this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let now$4=time.now();this.renderScheduledAt<now$4&&(this.renderScheduledAt=now$4,frame$1.render(this.render,!1,!0))};let{latestValues,renderState}=visualState;this.latestValues=latestValues,this.baseTarget={...latestValues},this.initialValues=props.initial?{...latestValues}:{},this.renderState=renderState,this.parent=parent,this.props=props,this.presenceContext=presenceContext,this.depth=parent?parent.depth+1:0,this.reducedMotionConfig=reducedMotionConfig,this.options=options$1,this.blockInitialAnimation=!!blockInitialAnimation,this.isControllingVariants=isControllingVariants(props),this.isVariantNode=isVariantNode(props),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(parent&&parent.current);let{willChange,...initialMotionValues}=this.scrapeMotionValuesFromProps(props,{},this);for(let key$1 in initialMotionValues){let value=initialMotionValues[key$1];latestValues[key$1]!==void 0&&isMotionValue(value)&&value.set(latestValues[key$1])}}mount(instance){this.current=instance,visualElementStore.set(instance,this),this.projection&&!this.projection.instance&&this.projection.mount(instance),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((value,key$1)=>this.bindToMotionValue(key$1,value)),this.reducedMotionConfig===`never`?this.shouldReduceMotion=!1:this.reducedMotionConfig===`always`?this.shouldReduceMotion=!0:(hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=prefersReducedMotion.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let key$1 in this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(remove$1=>remove$1()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[key$1].clear();for(let key$1 in this.features){let feature=this.features[key$1];feature&&(feature.unmount(),feature.isMounted=!1)}this.current=null}addChild(child){this.children.add(child),this.enteringChildren??=new Set,this.enteringChildren.add(child)}removeChild(child){this.children.delete(child),this.enteringChildren&&this.enteringChildren.delete(child)}bindToMotionValue(key$1,value){this.valueSubscriptions.has(key$1)&&this.valueSubscriptions.get(key$1)();let valueIsTransform=transformProps.has(key$1);valueIsTransform&&this.onBindTransform&&this.onBindTransform();let removeOnChange=value.on(`change`,latestValue=>{this.latestValues[key$1]=latestValue,this.props.onUpdate&&frame$1.preRender(this.notifyUpdate),valueIsTransform&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()}),removeSyncCheck;typeof window<`u`&&window.MotionCheckAppearSync&&(removeSyncCheck=window.MotionCheckAppearSync(this,key$1,value)),this.valueSubscriptions.set(key$1,()=>{removeOnChange(),removeSyncCheck&&removeSyncCheck(),value.owner&&value.stop()})}sortNodePosition(other){return!this.current||!this.sortInstanceNodePosition||this.type!==other.type?0:this.sortInstanceNodePosition(this.current,other.current)}updateFeatures(){let key$1=`animation`;for(key$1 in featureDefinitions){let featureDefinition=featureDefinitions[key$1];if(!featureDefinition)continue;let{isEnabled,Feature:FeatureConstructor}=featureDefinition;if(!this.features[key$1]&&FeatureConstructor&&isEnabled(this.props)&&(this.features[key$1]=new FeatureConstructor(this)),this.features[key$1]){let feature=this.features[key$1];feature.isMounted?feature.update():(feature.mount(),feature.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox$1()}getStaticValue(key$1){return this.latestValues[key$1]}setStaticValue(key$1,value){this.latestValues[key$1]=value}update(props,presenceContext){(props.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=props,this.prevPresenceContext=this.presenceContext,this.presenceContext=presenceContext;for(let i$4=0;i$4<propEventHandlers.length;i$4++){let key$1=propEventHandlers[i$4];this.propEventSubscriptions[key$1]&&(this.propEventSubscriptions[key$1](),delete this.propEventSubscriptions[key$1]);let listener=props[`on`+key$1];listener&&(this.propEventSubscriptions[key$1]=this.on(key$1,listener))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(props,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(name){return this.props.variants?this.props.variants[name]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(child){let closestVariantNode=this.getClosestVariantNode();if(closestVariantNode)return closestVariantNode.variantChildren&&closestVariantNode.variantChildren.add(child),()=>closestVariantNode.variantChildren.delete(child)}addValue(key$1,value){let existingValue=this.values.get(key$1);value!==existingValue&&(existingValue&&this.removeValue(key$1),this.bindToMotionValue(key$1,value),this.values.set(key$1,value),this.latestValues[key$1]=value.get())}removeValue(key$1){this.values.delete(key$1);let unsubscribe=this.valueSubscriptions.get(key$1);unsubscribe&&(unsubscribe(),this.valueSubscriptions.delete(key$1)),delete this.latestValues[key$1],this.removeValueFromRenderState(key$1,this.renderState)}hasValue(key$1){return this.values.has(key$1)}getValue(key$1,defaultValue$3){if(this.props.values&&this.props.values[key$1])return this.props.values[key$1];let value=this.values.get(key$1);return value===void 0&&defaultValue$3!==void 0&&(value=motionValue(defaultValue$3===null?void 0:defaultValue$3,{owner:this}),this.addValue(key$1,value)),value}readValue(key$1,target){let value=this.latestValues[key$1]!==void 0||!this.current?this.latestValues[key$1]:this.getBaseTargetFromProps(this.props,key$1)??this.readValueFromInstance(this.current,key$1,this.options);return value!=null&&(typeof value==`string`&&(isNumericalString(value)||isZeroValueString(value))?value=parseFloat(value):!findValueType(value)&&complex.test(target)&&(value=getAnimatableNone(key$1,target)),this.setBaseTarget(key$1,isMotionValue(value)?value.get():value)),isMotionValue(value)?value.get():value}setBaseTarget(key$1,value){this.baseTarget[key$1]=value}getBaseTarget(key$1){let{initial}=this.props,valueFromInitial;if(typeof initial==`string`||typeof initial==`object`){let variant=resolveVariantFromProps(this.props,initial,this.presenceContext?.custom);variant&&(valueFromInitial=variant[key$1])}if(initial&&valueFromInitial!==void 0)return valueFromInitial;let target=this.getBaseTargetFromProps(this.props,key$1);return target!==void 0&&!isMotionValue(target)?target:this.initialValues[key$1]!==void 0&&valueFromInitial===void 0?void 0:this.baseTarget[key$1]}on(eventName,callback){return this.events[eventName]||(this.events[eventName]=new SubscriptionManager),this.events[eventName].add(callback)}notify(eventName,...args){this.events[eventName]&&this.events[eventName].notify(...args)}scheduleRenderMicrotask(){microtask.render(this.render)}},Feature=class{constructor(node){this.isMounted=!1,this.node=node}update(){}},DOMVisualElement=class extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(a$4,b$3){return a$4.compareDocumentPosition(b$3)&2?1:-1}getBaseTargetFromProps(props,key$1){let style$3=props.style;return style$3?style$3[key$1]:void 0}removeValueFromRenderState(key$1,{vars,style:style$3}){delete vars[key$1],delete style$3[key$1]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:children$1}=this.props;isMotionValue(children$1)&&(this.childSubscription=children$1.on(`change`,latest=>{this.current&&(this.current.textContent=`${latest}`)}))}};function convertBoundingBoxToBox({top,left,right,bottom}){return{x:{min:left,max:right},y:{min:top,max:bottom}}}function convertBoxToBoundingBox({x:x$2,y:y$2}){return{top:y$2.min,right:x$2.max,bottom:y$2.max,left:x$2.min}}function transformBoxPoints(point,transformPoint$1){if(!transformPoint$1)return point;let topLeft=transformPoint$1({x:point.left,y:point.top}),bottomRight=transformPoint$1({x:point.right,y:point.bottom});return{top:topLeft.y,left:topLeft.x,bottom:bottomRight.y,right:bottomRight.x}}function isIdentityScale(scale$1){return scale$1===void 0||scale$1===1}function hasScale({scale:scale$1,scaleX:scaleX$1,scaleY:scaleY$1}){return!isIdentityScale(scale$1)||!isIdentityScale(scaleX$1)||!isIdentityScale(scaleY$1)}function hasTransform(values){return hasScale(values)||has2DTranslate(values)||values.z||values.rotate||values.rotateX||values.rotateY||values.skewX||values.skewY}function has2DTranslate(values){return is2DTranslate(values.x)||is2DTranslate(values.y)}function is2DTranslate(value){return value&&value!==`0%`}function scalePoint(point,scale$1,originPoint){return originPoint+scale$1*(point-originPoint)}function applyPointDelta(point,translate,scale$1,originPoint,boxScale){return boxScale!==void 0&&(point=scalePoint(point,boxScale,originPoint)),scalePoint(point,scale$1,originPoint)+translate}function applyAxisDelta(axis,translate=0,scale$1=1,originPoint,boxScale){axis.min=applyPointDelta(axis.min,translate,scale$1,originPoint,boxScale),axis.max=applyPointDelta(axis.max,translate,scale$1,originPoint,boxScale)}function applyBoxDelta(box,{x:x$2,y:y$2}){applyAxisDelta(box.x,x$2.translate,x$2.scale,x$2.originPoint),applyAxisDelta(box.y,y$2.translate,y$2.scale,y$2.originPoint)}var TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(box,treeScale,treePath,isSharedTransition=!1){let treeLength=treePath.length;if(!treeLength)return;treeScale.x=treeScale.y=1;let node,delta;for(let i$4=0;i$4<treeLength;i$4++){node=treePath[i$4],delta=node.projectionDelta;let{visualElement}=node.options;visualElement&&visualElement.props.style&&visualElement.props.style.display===`contents`||(isSharedTransition&&node.options.layoutScroll&&node.scroll&&node!==node.root&&transformBox(box,{x:-node.scroll.offset.x,y:-node.scroll.offset.y}),delta&&(treeScale.x*=delta.x.scale,treeScale.y*=delta.y.scale,applyBoxDelta(box,delta)),isSharedTransition&&hasTransform(node.latestValues)&&transformBox(box,node.latestValues))}treeScale.x<TREE_SCALE_SNAP_MAX&&treeScale.x>TREE_SCALE_SNAP_MIN&&(treeScale.x=1),treeScale.y<TREE_SCALE_SNAP_MAX&&treeScale.y>TREE_SCALE_SNAP_MIN&&(treeScale.y=1)}function translateAxis(axis,distance$4){axis.min+=distance$4,axis.max+=distance$4}function transformAxis(axis,axisTranslate,axisScale,boxScale,axisOrigin=.5){applyAxisDelta(axis,axisTranslate,axisScale,mixNumber(axis.min,axis.max,axisOrigin),boxScale)}function transformBox(box,transform$1){transformAxis(box.x,transform$1.x,transform$1.scaleX,transform$1.scale,transform$1.originX),transformAxis(box.y,transform$1.y,transform$1.scaleY,transform$1.scale,transform$1.originY)}function measureViewportBox(instance,transformPoint$1){return convertBoundingBoxToBox(transformBoxPoints(instance.getBoundingClientRect(),transformPoint$1))}function measurePageBox(element,rootProjectionNode$1,transformPagePoint){let viewportBox=measureViewportBox(element,transformPagePoint),{scroll:scroll$2}=rootProjectionNode$1;return scroll$2&&(translateAxis(viewportBox.x,scroll$2.offset.x),translateAxis(viewportBox.y,scroll$2.offset.y)),viewportBox}var translateAlias={x:`translateX`,y:`translateY`,z:`translateZ`,transformPerspective:`perspective`},numTransforms=transformPropOrder.length;function buildTransform(latestValues,transform$1,transformTemplate){let transformString=``,transformIsDefault=!0;for(let i$4=0;i$4<numTransforms;i$4++){let key$1=transformPropOrder[i$4],value=latestValues[key$1];if(value===void 0)continue;let valueIsDefault=!0;if(valueIsDefault=typeof value==`number`?value===(key$1.startsWith(`scale`)?1:0):parseFloat(value)===0,!valueIsDefault||transformTemplate){let valueAsType=getValueAsType(value,numberValueTypes[key$1]);if(!valueIsDefault){transformIsDefault=!1;let transformName=translateAlias[key$1]||key$1;transformString+=`${transformName}(${valueAsType}) `}transformTemplate&&(transform$1[key$1]=valueAsType)}}return transformString=transformString.trim(),transformTemplate?transformString=transformTemplate(transform$1,transformIsDefault?``:transformString):transformIsDefault&&(transformString=`none`),transformString}function buildHTMLStyles(state,latestValues,transformTemplate){let{style:style$3,vars,transformOrigin}=state,hasTransform$1=!1,hasTransformOrigin=!1;for(let key$1 in latestValues){let value=latestValues[key$1];if(transformProps.has(key$1)){hasTransform$1=!0;continue}else if(isCSSVariableName(key$1)){vars[key$1]=value;continue}else{let valueAsType=getValueAsType(value,numberValueTypes[key$1]);key$1.startsWith(`origin`)?(hasTransformOrigin=!0,transformOrigin[key$1]=valueAsType):style$3[key$1]=valueAsType}}if(latestValues.transform||(hasTransform$1||transformTemplate?style$3.transform=buildTransform(latestValues,state.transform,transformTemplate):style$3.transform&&=`none`),hasTransformOrigin){let{originX=`50%`,originY=`50%`,originZ=0}=transformOrigin;style$3.transformOrigin=`${originX} ${originY} ${originZ}`}}function renderHTML(element,{style:style$3,vars},styleProp,projection){let elementStyle=element.style,key$1;for(key$1 in style$3)elementStyle[key$1]=style$3[key$1];for(key$1 in projection?.applyProjectionStyles(elementStyle,styleProp),vars)elementStyle.setProperty(key$1,vars[key$1])}function pixelsToPercent(pixels,axis){return axis.max===axis.min?0:pixels/(axis.max-axis.min)*100}var correctBorderRadius={correct:(latest,node)=>{if(!node.target)return latest;if(typeof latest==`string`)if(px.test(latest))latest=parseFloat(latest);else return latest;return`${pixelsToPercent(latest,node.target.x)}% ${pixelsToPercent(latest,node.target.y)}%`}},correctBoxShadow={correct:(latest,{treeScale,projectionDelta})=>{let original=latest,shadow=complex.parse(latest);if(shadow.length>5)return original;let template=complex.createTransformer(latest),offset$1=typeof shadow[0]==`number`?0:1,xScale=projectionDelta.x.scale*treeScale.x,yScale=projectionDelta.y.scale*treeScale.y;shadow[0+offset$1]/=xScale,shadow[1+offset$1]/=yScale;let averageScale=mixNumber(xScale,yScale,.5);return typeof shadow[2+offset$1]==`number`&&(shadow[2+offset$1]/=averageScale),typeof shadow[3+offset$1]==`number`&&(shadow[3+offset$1]/=averageScale),template(shadow)}},scaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:[`borderTopLeftRadius`,`borderTopRightRadius`,`borderBottomLeftRadius`,`borderBottomRightRadius`]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function isForcedMotionValue(key$1,{layout:layout$1,layoutId}){return transformProps.has(key$1)||key$1.startsWith(`origin`)||(layout$1||layoutId!==void 0)&&(!!scaleCorrectors[key$1]||key$1===`opacity`)}function scrapeMotionValuesFromProps$1(props,prevProps,visualElement){let style$3=props.style,prevStyle=prevProps?.style,newValues={};if(!style$3)return newValues;for(let key$1 in style$3)(isMotionValue(style$3[key$1])||prevStyle&&isMotionValue(prevStyle[key$1])||isForcedMotionValue(key$1,props)||visualElement?.getValue(key$1)?.liveStyle!==void 0)&&(newValues[key$1]=style$3[key$1]);return newValues}function getComputedStyle$1(element){return window.getComputedStyle(element)}var HTMLVisualElement=class extends DOMVisualElement{constructor(){super(...arguments),this.type=`html`,this.renderInstance=renderHTML}readValueFromInstance(instance,key$1){if(transformProps.has(key$1))return this.projection?.isProjecting?defaultTransformValue(key$1):readTransformValue(instance,key$1);{let computedStyle=getComputedStyle$1(instance),value=(isCSSVariableName(key$1)?computedStyle.getPropertyValue(key$1):computedStyle[key$1])||0;return typeof value==`string`?value.trim():value}}measureInstanceViewportBox(instance,{transformPagePoint}){return measureViewportBox(instance,transformPagePoint)}build(renderState,latestValues,props){buildHTMLStyles(renderState,latestValues,props.transformTemplate)}scrapeMotionValuesFromProps(props,prevProps,visualElement){return scrapeMotionValuesFromProps$1(props,prevProps,visualElement)}},dashKeys={offset:`stroke-dashoffset`,array:`stroke-dasharray`},camelKeys={offset:`strokeDashoffset`,array:`strokeDasharray`};function buildSVGPath(attrs,length,spacing=1,offset$1=0,useDashCase=!0){attrs.pathLength=1;let keys=useDashCase?dashKeys:camelKeys;attrs[keys.offset]=px.transform(-offset$1);let pathLength=px.transform(length),pathSpacing=px.transform(spacing);attrs[keys.array]=`${pathLength} ${pathSpacing}`}var cssMotionPathProperties=[`offsetDistance`,`offsetPath`,`offsetRotate`,`offsetAnchor`];function buildSVGAttrs(state,{attrX,attrY,attrScale,pathLength,pathSpacing=1,pathOffset=0,...latest},isSVGTag$1,transformTemplate,styleProp){if(buildHTMLStyles(state,latest,transformTemplate),isSVGTag$1){state.style.viewBox&&(state.attrs.viewBox=state.style.viewBox);return}state.attrs=state.style,state.style={};let{attrs,style:style$3}=state;attrs.transform&&(style$3.transform=attrs.transform,delete attrs.transform),(style$3.transform||attrs.transformOrigin)&&(style$3.transformOrigin=attrs.transformOrigin??`50% 50%`,delete attrs.transformOrigin),style$3.transform&&(style$3.transformBox=styleProp?.transformBox??`fill-box`,delete attrs.transformBox);for(let key$1 of cssMotionPathProperties)attrs[key$1]!==void 0&&(style$3[key$1]=attrs[key$1],delete attrs[key$1]);attrX!==void 0&&(attrs.x=attrX),attrY!==void 0&&(attrs.y=attrY),attrScale!==void 0&&(attrs.scale=attrScale),pathLength!==void 0&&buildSVGPath(attrs,pathLength,pathSpacing,pathOffset,!1)}var camelCaseAttributes=new Set([`baseFrequency`,`diffuseConstant`,`kernelMatrix`,`kernelUnitLength`,`keySplines`,`keyTimes`,`limitingConeAngle`,`markerHeight`,`markerWidth`,`numOctaves`,`targetX`,`targetY`,`surfaceScale`,`specularConstant`,`specularExponent`,`stdDeviation`,`tableValues`,`viewBox`,`gradientTransform`,`pathLength`,`startOffset`,`textLength`,`lengthAdjust`]),isSVGTag=tag=>typeof tag==`string`&&tag.toLowerCase()===`svg`;function renderSVG(element,renderState,_styleProp,projection){for(let key$1 in renderHTML(element,renderState,void 0,projection),renderState.attrs)element.setAttribute(camelCaseAttributes.has(key$1)?key$1:camelToDash(key$1),renderState.attrs[key$1])}function scrapeMotionValuesFromProps(props,prevProps,visualElement){let newValues=scrapeMotionValuesFromProps$1(props,prevProps,visualElement);for(let key$1 in props)if(isMotionValue(props[key$1])||isMotionValue(prevProps[key$1])){let targetKey=transformPropOrder.indexOf(key$1)===-1?key$1:`attr`+key$1.charAt(0).toUpperCase()+key$1.substring(1);newValues[targetKey]=props[key$1]}return newValues}var SVGVisualElement=class extends DOMVisualElement{constructor(){super(...arguments),this.type=`svg`,this.isSVGTag=!1,this.measureInstanceViewportBox=createBox$1}getBaseTargetFromProps(props,key$1){return props[key$1]}readValueFromInstance(instance,key$1){if(transformProps.has(key$1)){let defaultType=getDefaultValueType(key$1);return defaultType&&defaultType.default||0}return key$1=camelCaseAttributes.has(key$1)?key$1:camelToDash(key$1),instance.getAttribute(key$1)}scrapeMotionValuesFromProps(props,prevProps,visualElement){return scrapeMotionValuesFromProps(props,prevProps,visualElement)}build(renderState,latestValues,props){buildSVGAttrs(renderState,latestValues,this.isSVGTag,props.transformTemplate,props.style)}renderInstance(instance,renderState,styleProp,projection){renderSVG(instance,renderState,styleProp,projection)}mount(instance){this.isSVGTag=isSVGTag(instance.tagName),super.mount(instance)}},numVariantProps=variantProps.length;function getVariantContext(visualElement){if(!visualElement)return;if(!visualElement.isControllingVariants){let context$1=visualElement.parent&&getVariantContext(visualElement.parent)||{};return visualElement.props.initial!==void 0&&(context$1.initial=visualElement.props.initial),context$1}let context={};for(let i$4=0;i$4<numVariantProps;i$4++){let name=variantProps[i$4],prop=visualElement.props[name];(isVariantLabel(prop)||prop===!1)&&(context[name]=prop)}return context}function shallowCompare(next,prev){if(!Array.isArray(prev))return!1;let prevLength=prev.length;if(prevLength!==next.length)return!1;for(let i$4=0;i$4<prevLength;i$4++)if(prev[i$4]!==next[i$4])return!1;return!0}var reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function createAnimateFunction(visualElement){return animations$1=>Promise.all(animations$1.map(({animation,options:options$1})=>animateVisualElement(visualElement,animation,options$1)))}function createAnimationState(visualElement){let animate=createAnimateFunction(visualElement),state=createState(),isInitialRender=!0,buildResolvedTypeValues=type=>(acc,definition)=>{let resolved=resolveVariant(visualElement,definition,type===`exit`?visualElement.presenceContext?.custom:void 0);if(resolved){let{transition:transition$1,transitionEnd,...target}=resolved;acc={...acc,...target,...transitionEnd}}return acc};function setAnimateFunction(makeAnimator){animate=makeAnimator(visualElement)}function animateChanges(changedActiveType){let{props}=visualElement,context=getVariantContext(visualElement.parent)||{},animations$1=[],removedKeys=new Set,encounteredKeys={},removedVariantIndex=1/0;for(let i$4=0;i$4<numAnimationTypes;i$4++){let type=reversePriorityOrder[i$4],typeState=state[type],prop=props[type]===void 0?context[type]:props[type],propIsVariant=isVariantLabel(prop),activeDelta=type===changedActiveType?typeState.isActive:null;activeDelta===!1&&(removedVariantIndex=i$4);let isInherited=prop===context[type]&&prop!==props[type]&&propIsVariant;if(isInherited&&isInitialRender&&visualElement.manuallyAnimateOnMount&&(isInherited=!1),typeState.protectedKeys={...encounteredKeys},!typeState.isActive&&activeDelta===null||!prop&&!typeState.prevProp||isAnimationControls(prop)||typeof prop==`boolean`)continue;let variantDidChange=checkVariantsDidChange(typeState.prevProp,prop),shouldAnimateType=variantDidChange||type===changedActiveType&&typeState.isActive&&!isInherited&&propIsVariant||i$4>removedVariantIndex&&propIsVariant,handledRemovedValues=!1,definitionList=Array.isArray(prop)?prop:[prop],resolvedValues=definitionList.reduce(buildResolvedTypeValues(type),{});activeDelta===!1&&(resolvedValues={});let{prevResolvedValues={}}=typeState,allKeys={...prevResolvedValues,...resolvedValues},markToAnimate=key$1=>{shouldAnimateType=!0,removedKeys.has(key$1)&&(handledRemovedValues=!0,removedKeys.delete(key$1)),typeState.needsAnimating[key$1]=!0;let motionValue$1=visualElement.getValue(key$1);motionValue$1&&(motionValue$1.liveStyle=!1)};for(let key$1 in allKeys){let next=resolvedValues[key$1],prev=prevResolvedValues[key$1];if(encounteredKeys.hasOwnProperty(key$1))continue;let valueHasChanged=!1;valueHasChanged=isKeyframesTarget(next)&&isKeyframesTarget(prev)?!shallowCompare(next,prev):next!==prev,valueHasChanged?next==null?removedKeys.add(key$1):markToAnimate(key$1):next!==void 0&&removedKeys.has(key$1)?markToAnimate(key$1):typeState.protectedKeys[key$1]=!0}typeState.prevProp=prop,typeState.prevResolvedValues=resolvedValues,typeState.isActive&&(encounteredKeys={...encounteredKeys,...resolvedValues}),isInitialRender&&visualElement.blockInitialAnimation&&(shouldAnimateType=!1);let willAnimateViaParent=isInherited&&variantDidChange;shouldAnimateType&&(!willAnimateViaParent||handledRemovedValues)&&animations$1.push(...definitionList.map(animation=>{let options$1={type};if(typeof animation==`string`&&isInitialRender&&!willAnimateViaParent&&visualElement.manuallyAnimateOnMount&&visualElement.parent){let{parent}=visualElement,parentVariant=resolveVariant(parent,animation);if(parent.enteringChildren&&parentVariant){let{delayChildren}=parentVariant.transition||{};options$1.delay=calcChildStagger(parent.enteringChildren,visualElement,delayChildren)}}return{animation,options:options$1}}))}if(removedKeys.size){let fallbackAnimation={};if(typeof props.initial!=`boolean`){let initialTransition=resolveVariant(visualElement,Array.isArray(props.initial)?props.initial[0]:props.initial);initialTransition&&initialTransition.transition&&(fallbackAnimation.transition=initialTransition.transition)}removedKeys.forEach(key$1=>{let fallbackTarget=visualElement.getBaseTarget(key$1),motionValue$1=visualElement.getValue(key$1);motionValue$1&&(motionValue$1.liveStyle=!0),fallbackAnimation[key$1]=fallbackTarget??null}),animations$1.push({animation:fallbackAnimation})}let shouldAnimate=!!animations$1.length;return isInitialRender&&(props.initial===!1||props.initial===props.animate)&&!visualElement.manuallyAnimateOnMount&&(shouldAnimate=!1),isInitialRender=!1,shouldAnimate?animate(animations$1):Promise.resolve()}function setActive(type,isActive$1){if(state[type].isActive===isActive$1)return Promise.resolve();visualElement.variantChildren?.forEach(child=>child.animationState?.setActive(type,isActive$1)),state[type].isActive=isActive$1;let animations$1=animateChanges(type);for(let key$1 in state)state[key$1].protectedKeys={};return animations$1}return{animateChanges,setActive,setAnimateFunction,getState:()=>state,reset:()=>{state=createState()}}}function checkVariantsDidChange(prev,next){return typeof next==`string`?next!==prev:Array.isArray(next)?!shallowCompare(next,prev):!1}function createTypeState(isActive$1=!1){return{isActive:isActive$1,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}var SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(axis){return axis.max-axis.min}function isNear(value,target,maxDistance){return Math.abs(value-target)<=maxDistance}function calcAxisDelta(delta,source,target,origin$2=.5){delta.origin=origin$2,delta.originPoint=mixNumber(source.min,source.max,delta.origin),delta.scale=calcLength(target)/calcLength(source),delta.translate=mixNumber(target.min,target.max,delta.origin)-delta.originPoint,(delta.scale>=SCALE_MIN&&delta.scale<=SCALE_MAX||isNaN(delta.scale))&&(delta.scale=1),(delta.translate>=TRANSLATE_MIN&&delta.translate<=TRANSLATE_MAX||isNaN(delta.translate))&&(delta.translate=0)}function calcBoxDelta(delta,source,target,origin$2){calcAxisDelta(delta.x,source.x,target.x,origin$2?origin$2.originX:void 0),calcAxisDelta(delta.y,source.y,target.y,origin$2?origin$2.originY:void 0)}function calcRelativeAxis(target,relative,parent){target.min=parent.min+relative.min,target.max=target.min+calcLength(relative)}function calcRelativeBox(target,relative,parent){calcRelativeAxis(target.x,relative.x,parent.x),calcRelativeAxis(target.y,relative.y,parent.y)}function calcRelativeAxisPosition(target,layout$1,parent){target.min=layout$1.min-parent.min,target.max=target.min+calcLength(layout$1)}function calcRelativePosition(target,layout$1,parent){calcRelativeAxisPosition(target.x,layout$1.x,parent.x),calcRelativeAxisPosition(target.y,layout$1.y,parent.y)}function removePointDelta(point,translate,scale$1,originPoint,boxScale){return point-=translate,point=scalePoint(point,1/scale$1,originPoint),boxScale!==void 0&&(point=scalePoint(point,1/boxScale,originPoint)),point}function removeAxisDelta(axis,translate=0,scale$1=1,origin$2=.5,boxScale,originAxis=axis,sourceAxis=axis){if(percent.test(translate)&&(translate=parseFloat(translate),translate=mixNumber(sourceAxis.min,sourceAxis.max,translate/100)-sourceAxis.min),typeof translate!=`number`)return;let originPoint=mixNumber(originAxis.min,originAxis.max,origin$2);axis===originAxis&&(originPoint-=translate),axis.min=removePointDelta(axis.min,translate,scale$1,originPoint,boxScale),axis.max=removePointDelta(axis.max,translate,scale$1,originPoint,boxScale)}function removeAxisTransforms(axis,transforms$1,[key$1,scaleKey,originKey],origin$2,sourceAxis){removeAxisDelta(axis,transforms$1[key$1],transforms$1[scaleKey],transforms$1[originKey],transforms$1.scale,origin$2,sourceAxis)}var xKeys=[`x`,`scaleX`,`originX`],yKeys=[`y`,`scaleY`,`originY`];function removeBoxTransforms(box,transforms$1,originBox,sourceBox){removeAxisTransforms(box.x,transforms$1,xKeys,originBox?originBox.x:void 0,sourceBox?sourceBox.x:void 0),removeAxisTransforms(box.y,transforms$1,yKeys,originBox?originBox.y:void 0,sourceBox?sourceBox.y:void 0)}function copyAxisInto(axis,originAxis){axis.min=originAxis.min,axis.max=originAxis.max}function copyBoxInto(box,originBox){copyAxisInto(box.x,originBox.x),copyAxisInto(box.y,originBox.y)}function copyAxisDeltaInto(delta,originDelta){delta.translate=originDelta.translate,delta.scale=originDelta.scale,delta.originPoint=originDelta.originPoint,delta.origin=originDelta.origin}function isAxisDeltaZero(delta){return delta.translate===0&&delta.scale===1}function isDeltaZero(delta){return isAxisDeltaZero(delta.x)&&isAxisDeltaZero(delta.y)}function axisEquals(a$4,b$3){return a$4.min===b$3.min&&a$4.max===b$3.max}function boxEquals(a$4,b$3){return axisEquals(a$4.x,b$3.x)&&axisEquals(a$4.y,b$3.y)}function axisEqualsRounded(a$4,b$3){return Math.round(a$4.min)===Math.round(b$3.min)&&Math.round(a$4.max)===Math.round(b$3.max)}function boxEqualsRounded(a$4,b$3){return axisEqualsRounded(a$4.x,b$3.x)&&axisEqualsRounded(a$4.y,b$3.y)}function aspectRatio(box){return calcLength(box.x)/calcLength(box.y)}function axisDeltaEquals(a$4,b$3){return a$4.translate===b$3.translate&&a$4.scale===b$3.scale&&a$4.originPoint===b$3.originPoint}function eachAxis(callback){return[callback(`x`),callback(`y`)]}function buildProjectionTransform(delta,treeScale,latestTransform){let transform$1=``,xTranslate=delta.x.translate/treeScale.x,yTranslate=delta.y.translate/treeScale.y,zTranslate=latestTransform?.z||0;if((xTranslate||yTranslate||zTranslate)&&(transform$1=`translate3d(${xTranslate}px, ${yTranslate}px, ${zTranslate}px) `),(treeScale.x!==1||treeScale.y!==1)&&(transform$1+=`scale(${1/treeScale.x}, ${1/treeScale.y}) `),latestTransform){let{transformPerspective,rotate:rotate$1,rotateX,rotateY,skewX,skewY}=latestTransform;transformPerspective&&(transform$1=`perspective(${transformPerspective}px) ${transform$1}`),rotate$1&&(transform$1+=`rotate(${rotate$1}deg) `),rotateX&&(transform$1+=`rotateX(${rotateX}deg) `),rotateY&&(transform$1+=`rotateY(${rotateY}deg) `),skewX&&(transform$1+=`skewX(${skewX}deg) `),skewY&&(transform$1+=`skewY(${skewY}deg) `)}let elementScaleX=delta.x.scale*treeScale.x,elementScaleY=delta.y.scale*treeScale.y;return(elementScaleX!==1||elementScaleY!==1)&&(transform$1+=`scale(${elementScaleX}, ${elementScaleY})`),transform$1||`none`}var borders=[`TopLeft`,`TopRight`,`BottomLeft`,`BottomRight`],numBorders=borders.length,asNumber=value=>typeof value==`string`?parseFloat(value):value,isPx=value=>typeof value==`number`||px.test(value);function mixValues(target,follow,lead,progress$1,shouldCrossfadeOpacity,isOnlyMember){shouldCrossfadeOpacity?(target.opacity=mixNumber(0,lead.opacity??1,easeCrossfadeIn(progress$1)),target.opacityExit=mixNumber(follow.opacity??1,0,easeCrossfadeOut(progress$1))):isOnlyMember&&(target.opacity=mixNumber(follow.opacity??1,lead.opacity??1,progress$1));for(let i$4=0;i$4<numBorders;i$4++){let borderLabel=`border${borders[i$4]}Radius`,followRadius=getRadius(follow,borderLabel),leadRadius=getRadius(lead,borderLabel);followRadius===void 0&&leadRadius===void 0||(followRadius||=0,leadRadius||=0,followRadius===0||leadRadius===0||isPx(followRadius)===isPx(leadRadius)?(target[borderLabel]=Math.max(mixNumber(asNumber(followRadius),asNumber(leadRadius),progress$1),0),(percent.test(leadRadius)||percent.test(followRadius))&&(target[borderLabel]+=`%`)):target[borderLabel]=leadRadius)}(follow.rotate||lead.rotate)&&(target.rotate=mixNumber(follow.rotate||0,lead.rotate||0,progress$1))}function getRadius(values,radiusName){return values[radiusName]===void 0?values.borderRadius:values[radiusName]}var easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$5);function compress(min,max,easing){return p$3=>p$3<min?0:p$3>max?1:easing(progress(min,max,p$3))}function delay(callback,timeout$1){let start$2=time.now(),checkElapsed=({timestamp})=>{let elapsed=timestamp-start$2;elapsed>=timeout$1&&(cancelFrame(checkElapsed),callback(elapsed-timeout$1))};return frame$1.setup(checkElapsed,!0),()=>cancelFrame(checkElapsed)}function addDomEvent(target,eventName,handler,options$1={passive:!0}){return target.addEventListener(eventName,handler,options$1),()=>target.removeEventListener(eventName,handler)}function resolveMotionValue(value){return isMotionValue(value)?value.get():value}function animateSingleValue(value,keyframes$1,options$1){let motionValue$1=isMotionValue(value)?value:motionValue(value);return motionValue$1.start(animateMotionValue(``,motionValue$1,keyframes$1,options$1)),motionValue$1.animation}var compareByDepth=(a$4,b$3)=>a$4.depth-b$3.depth,FlatTree=class{constructor(){this.children=[],this.isDirty=!1}add(child){addUniqueItem(this.children,child),this.isDirty=!0}remove(child){removeItem(this.children,child),this.isDirty=!0}forEach(callback){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(callback)}},NodeStack=class{constructor(){this.members=[]}add(node){addUniqueItem(this.members,node),node.scheduleRender()}remove(node){if(removeItem(this.members,node),node===this.prevLead&&(this.prevLead=void 0),node===this.lead){let prevLead=this.members[this.members.length-1];prevLead&&this.promote(prevLead)}}relegate(node){let indexOfNode=this.members.findIndex(member=>node===member);if(indexOfNode===0)return!1;let prevLead;for(let i$4=indexOfNode;i$4>=0;i$4--){let member=this.members[i$4];if(member.isPresent!==!1){prevLead=member;break}}return prevLead?(this.promote(prevLead),!0):!1}promote(node,preserveFollowOpacity){let prevLead=this.lead;if(node!==prevLead&&(this.prevLead=prevLead,this.lead=node,node.show(),prevLead)){prevLead.instance&&prevLead.scheduleRender(),node.scheduleRender(),node.resumeFrom=prevLead,preserveFollowOpacity&&(node.resumeFrom.preserveOpacity=!0),prevLead.snapshot&&(node.snapshot=prevLead.snapshot,node.snapshot.latestValues=prevLead.animationValues||prevLead.latestValues),node.root&&node.root.isUpdating&&(node.isLayoutDirty=!0);let{crossfade}=node.options;crossfade===!1&&prevLead.hide()}}exitAnimationComplete(){this.members.forEach(node=>{let{options:options$1,resumingFrom}=node;options$1.onExitComplete&&options$1.onExitComplete(),resumingFrom&&resumingFrom.options.onExitComplete&&resumingFrom.options.onExitComplete()})}scheduleRender(){this.members.forEach(node=>{node.instance&&node.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}},globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1},metrics={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},transformAxes=[``,`X`,`Y`,`Z`],animationTarget=1e3,id$2=0;function resetDistortingTransform(key$1,visualElement,values,sharedAnimationValues){let{latestValues}=visualElement;latestValues[key$1]&&(values[key$1]=latestValues[key$1],visualElement.setStaticValue(key$1,0),sharedAnimationValues&&(sharedAnimationValues[key$1]=0))}function cancelTreeOptimisedTransformAnimations(projectionNode){if(projectionNode.hasCheckedOptimisedAppear=!0,projectionNode.root===projectionNode)return;let{visualElement}=projectionNode.options;if(!visualElement)return;let appearId=getOptimisedAppearId(visualElement);if(window.MotionHasOptimisedAnimation(appearId,`transform`)){let{layout:layout$1,layoutId}=projectionNode.options;window.MotionCancelOptimisedAnimation(appearId,`transform`,frame$1,!(layout$1||layoutId))}let{parent}=projectionNode;parent&&!parent.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(parent)}function createProjectionNode$1({attachResizeListener,defaultParent,measureScroll,checkIsScrollRoot,resetTransform}){return class{constructor(latestValues={},parent=defaultParent?.()){this.id=id$2++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,statsBuffer.value&&(metrics.nodes=metrics.calculatedTargetDeltas=metrics.calculatedProjections=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),statsBuffer.addProjectionMetrics&&statsBuffer.addProjectionMetrics(metrics)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=latestValues,this.root=parent?parent.root||parent:this,this.path=parent?[...parent.path,parent]:[],this.parent=parent,this.depth=parent?parent.depth+1:0;for(let i$4=0;i$4<this.path.length;i$4++)this.path[i$4].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(name,handler){return this.eventHandlers.has(name)||this.eventHandlers.set(name,new SubscriptionManager),this.eventHandlers.get(name).add(handler)}notifyListeners(name,...args){let subscriptionManager=this.eventHandlers.get(name);subscriptionManager&&subscriptionManager.notify(...args)}hasListeners(name){return this.eventHandlers.has(name)}mount(instance){if(this.instance)return;this.isSVG=isSVGElement$1(instance)&&!isSVGSVGElement(instance),this.instance=instance;let{layoutId,layout:layout$1,visualElement}=this.options;if(visualElement&&!visualElement.current&&visualElement.mount(instance),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(layout$1||layoutId)&&(this.isLayoutDirty=!0),attachResizeListener){let cancelDelay,innerWidth=0,resizeUnblockUpdate=()=>this.root.updateBlockedByResize=!1;frame$1.read(()=>{innerWidth=window.innerWidth}),attachResizeListener(instance,()=>{let newInnerWidth=window.innerWidth;newInnerWidth!==innerWidth&&(innerWidth=newInnerWidth,this.root.updateBlockedByResize=!0,cancelDelay&&cancelDelay(),cancelDelay=delay(resizeUnblockUpdate,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}layoutId&&this.root.registerSharedNode(layoutId,this),this.options.animate!==!1&&visualElement&&(layoutId||layout$1)&&this.addEventListener(`didUpdate`,({delta,hasLayoutChanged,hasRelativeLayoutChanged,layout:newLayout})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let layoutTransition=this.options.transition||visualElement.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart,onLayoutAnimationComplete}=visualElement.getProps(),hasTargetChanged=!this.targetLayout||!boxEqualsRounded(this.targetLayout,newLayout),hasOnlyRelativeTargetChanged=!hasLayoutChanged&&hasRelativeLayoutChanged;if(this.options.layoutRoot||this.resumeFrom||hasOnlyRelativeTargetChanged||hasLayoutChanged&&(hasTargetChanged||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let animationOptions={...getValueTransition(layoutTransition,`layout`),onPlay:onLayoutAnimationStart,onComplete:onLayoutAnimationComplete};(visualElement.shouldReduceMotion||this.options.layoutRoot)&&(animationOptions.delay=0,animationOptions.type=!1),this.startAnimation(animationOptions),this.setAnimationOrigin(delta,hasOnlyRelativeTargetChanged)}else hasLayoutChanged||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=newLayout})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let stack=this.getStack();stack&&stack.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){let{visualElement}=this.options;return visualElement&&visualElement.getProps().transformTemplate}willUpdate(shouldNotifyListeners=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i$4=0;i$4<this.path.length;i$4++){let node=this.path[i$4];node.shouldResetTransform=!0,node.updateScroll(`snapshot`),node.options.layoutRoot&&node.willUpdate(!1)}let{layoutId,layout:layout$1}=this.options;if(layoutId===void 0&&!layout$1)return;let transformTemplate=this.getTransformTemplate();this.prevTransformTemplateValue=transformTemplate?transformTemplate(this.latestValues,``):void 0,this.updateSnapshot(),shouldNotifyListeners&&this.notifyListeners(`willUpdate`)}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();let now$4=time.now();frameData.delta=clamp$2(0,1e3/60,now$4-frameData.timestamp),frameData.timestamp=now$4,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame$1.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame$1.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let i$4=0;i$4<this.path.length;i$4++)this.path[i$4].updateScroll();let prevLayout=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=createBox$1(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners(`measure`,this.layout.layoutBox);let{visualElement}=this.options;visualElement&&visualElement.notify(`LayoutMeasure`,this.layout.layoutBox,prevLayout?prevLayout.layoutBox:void 0)}updateScroll(phase=`measure`){let needsMeasurement=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===phase&&(needsMeasurement=!1),needsMeasurement&&this.instance){let isRoot=checkIsScrollRoot(this.instance);this.scroll={animationId:this.root.animationId,phase,isRoot,offset:measureScroll(this.instance),wasRoot:this.scroll?this.scroll.isRoot:isRoot}}}resetTransform(){if(!resetTransform)return;let isResetRequested=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,hasProjection=this.projectionDelta&&!isDeltaZero(this.projectionDelta),transformTemplate=this.getTransformTemplate(),transformTemplateValue=transformTemplate?transformTemplate(this.latestValues,``):void 0,transformTemplateHasChanged=transformTemplateValue!==this.prevTransformTemplateValue;isResetRequested&&this.instance&&(hasProjection||hasTransform(this.latestValues)||transformTemplateHasChanged)&&(resetTransform(this.instance,transformTemplateValue),this.shouldResetTransform=!1,this.scheduleRender())}measure(removeTransform=!0){let pageBox=this.measurePageBox(),layoutBox=this.removeElementScroll(pageBox);return removeTransform&&(layoutBox=this.removeTransform(layoutBox)),roundBox(layoutBox),{animationId:this.root.animationId,measuredBox:pageBox,layoutBox,latestValues:{},source:this.id}}measurePageBox(){let{visualElement}=this.options;if(!visualElement)return createBox$1();let box=visualElement.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){let{scroll:scroll$2}=this.root;scroll$2&&(translateAxis(box.x,scroll$2.offset.x),translateAxis(box.y,scroll$2.offset.y))}return box}removeElementScroll(box){let boxWithoutScroll=createBox$1();if(copyBoxInto(boxWithoutScroll,box),this.scroll?.wasRoot)return boxWithoutScroll;for(let i$4=0;i$4<this.path.length;i$4++){let node=this.path[i$4],{scroll:scroll$2,options:options$1}=node;node!==this.root&&scroll$2&&options$1.layoutScroll&&(scroll$2.wasRoot&&copyBoxInto(boxWithoutScroll,box),translateAxis(boxWithoutScroll.x,scroll$2.offset.x),translateAxis(boxWithoutScroll.y,scroll$2.offset.y))}return boxWithoutScroll}applyTransform(box,transformOnly=!1){let withTransforms=createBox$1();copyBoxInto(withTransforms,box);for(let i$4=0;i$4<this.path.length;i$4++){let node=this.path[i$4];!transformOnly&&node.options.layoutScroll&&node.scroll&&node!==node.root&&transformBox(withTransforms,{x:-node.scroll.offset.x,y:-node.scroll.offset.y}),hasTransform(node.latestValues)&&transformBox(withTransforms,node.latestValues)}return hasTransform(this.latestValues)&&transformBox(withTransforms,this.latestValues),withTransforms}removeTransform(box){let boxWithoutTransform=createBox$1();copyBoxInto(boxWithoutTransform,box);for(let i$4=0;i$4<this.path.length;i$4++){let node=this.path[i$4];if(!node.instance||!hasTransform(node.latestValues))continue;hasScale(node.latestValues)&&node.updateSnapshot();let sourceBox=createBox$1();copyBoxInto(sourceBox,node.measurePageBox()),removeBoxTransforms(boxWithoutTransform,node.latestValues,node.snapshot?node.snapshot.layoutBox:void 0,sourceBox)}return hasTransform(this.latestValues)&&removeBoxTransforms(boxWithoutTransform,this.latestValues),boxWithoutTransform}setTargetDelta(delta){this.targetDelta=delta,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(options$1){this.options={...this.options,...options$1,crossfade:options$1.crossfade===void 0?!0:options$1.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(forceRecalculation=!1){let lead=this.getLead();this.isProjectionDirty||=lead.isProjectionDirty,this.isTransformDirty||=lead.isTransformDirty,this.isSharedProjectionDirty||=lead.isSharedProjectionDirty;let isShared=!!this.resumingFrom||this!==lead;if(!(forceRecalculation||isShared&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:layout$1,layoutId}=this.options;if(!this.layout||!(layout$1||layoutId))return;this.resolvedRelativeTargetAt=frameData.timestamp;let relativeParent=this.getClosestProjectingParent();relativeParent&&this.linkedParentVersion!==relativeParent.layoutVersion&&!relativeParent.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(relativeParent&&relativeParent.layout?this.createRelativeTarget(relativeParent,this.layout.layoutBox,relativeParent.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox$1(),this.targetWithTransforms=createBox$1()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,relativeParent&&!!relativeParent.resumingFrom==!!this.resumingFrom&&!relativeParent.options.layoutScroll&&relativeParent.target&&this.animationProgress!==1?this.createRelativeTarget(relativeParent,this.target,relativeParent.target):this.relativeParent=this.relativeTarget=void 0),statsBuffer.value&&metrics.calculatedTargetDeltas++)}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(relativeParent,layout$1,parentLayout){this.relativeParent=relativeParent,this.linkedParentVersion=relativeParent.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox$1(),this.relativeTargetOrigin=createBox$1(),calcRelativePosition(this.relativeTargetOrigin,layout$1,parentLayout),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let lead=this.getLead(),isShared=!!this.resumingFrom||this!==lead,canSkip=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(canSkip=!1),isShared&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(canSkip=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(canSkip=!1),canSkip)return;let{layout:layout$1,layoutId}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(layout$1||layoutId))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);let prevTreeScaleX=this.treeScale.x,prevTreeScaleY=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,isShared),lead.layout&&!lead.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(lead.target=lead.layout.layoutBox,lead.targetWithTransforms=createBox$1());let{target}=lead;if(!target){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,target,this.latestValues),(this.treeScale.x!==prevTreeScaleX||this.treeScale.y!==prevTreeScaleY||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners(`projectionUpdate`,target)),statsBuffer.value&&metrics.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(notifyAll=!0){if(this.options.visualElement?.scheduleRender(),notifyAll){let stack=this.getStack();stack&&stack.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(delta,hasOnlyRelativeTargetChanged=!1){let snapshot=this.snapshot,snapshotLatestValues=snapshot?snapshot.latestValues:{},mixedValues={...this.latestValues},targetDelta=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!hasOnlyRelativeTargetChanged;let relativeLayout=createBox$1(),isSharedLayoutAnimation=(snapshot?snapshot.source:void 0)!==(this.layout?this.layout.source:void 0),stack=this.getStack(),isOnlyMember=!stack||stack.members.length<=1,shouldCrossfadeOpacity=!!(isSharedLayoutAnimation&&!isOnlyMember&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let prevRelativeTarget;this.mixTargetDelta=latest=>{let progress$1=latest/1e3;mixAxisDelta(targetDelta.x,delta.x,progress$1),mixAxisDelta(targetDelta.y,delta.y,progress$1),this.setTargetDelta(targetDelta),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(relativeLayout,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,relativeLayout,progress$1),prevRelativeTarget&&boxEquals(this.relativeTarget,prevRelativeTarget)&&(this.isProjectionDirty=!1),prevRelativeTarget||=createBox$1(),copyBoxInto(prevRelativeTarget,this.relativeTarget)),isSharedLayoutAnimation&&(this.animationValues=mixedValues,mixValues(mixedValues,snapshotLatestValues,this.latestValues,progress$1,shouldCrossfadeOpacity,isOnlyMember)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=progress$1},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(options$1){this.notifyListeners(`animationStart`),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&=(cancelFrame(this.pendingAnimation),void 0),this.pendingAnimation=frame$1.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,activeAnimations.layout++,this.motionValue||=motionValue(0),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...options$1,velocity:0,isSync:!0,onUpdate:latest=>{this.mixTargetDelta(latest),options$1.onUpdate&&options$1.onUpdate(latest)},onStop:()=>{activeAnimations.layout--},onComplete:()=>{activeAnimations.layout--,options$1.onComplete&&options$1.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let stack=this.getStack();stack&&stack.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners(`animationComplete`)}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let lead=this.getLead(),{targetWithTransforms,target,layout:layout$1,latestValues}=lead;if(!(!targetWithTransforms||!target||!layout$1)){if(this!==lead&&this.layout&&layout$1&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,layout$1.layoutBox)){target=this.target||createBox$1();let xLength=calcLength(this.layout.layoutBox.x);target.x.min=lead.target.x.min,target.x.max=target.x.min+xLength;let yLength=calcLength(this.layout.layoutBox.y);target.y.min=lead.target.y.min,target.y.max=target.y.min+yLength}copyBoxInto(targetWithTransforms,target),transformBox(targetWithTransforms,latestValues),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,targetWithTransforms,latestValues)}}registerSharedNode(layoutId,node){this.sharedNodes.has(layoutId)||this.sharedNodes.set(layoutId,new NodeStack),this.sharedNodes.get(layoutId).add(node);let config=node.options.initialPromotionConfig;node.promote({transition:config?config.transition:void 0,preserveFollowOpacity:config&&config.shouldPreserveFollowOpacity?config.shouldPreserveFollowOpacity(node):void 0})}isLead(){let stack=this.getStack();return stack?stack.lead===this:!0}getLead(){let{layoutId}=this.options;return layoutId&&this.getStack()?.lead||this}getPrevLead(){let{layoutId}=this.options;return layoutId?this.getStack()?.prevLead:void 0}getStack(){let{layoutId}=this.options;if(layoutId)return this.root.sharedNodes.get(layoutId)}promote({needsReset,transition:transition$1,preserveFollowOpacity}={}){let stack=this.getStack();stack&&stack.promote(this,preserveFollowOpacity),needsReset&&(this.projectionDelta=void 0,this.needsReset=!0),transition$1&&this.setOptions({transition:transition$1})}relegate(){let stack=this.getStack();return stack?stack.relegate(this):!1}resetSkewAndRotation(){let{visualElement}=this.options;if(!visualElement)return;let hasDistortingTransform=!1,{latestValues}=visualElement;if((latestValues.z||latestValues.rotate||latestValues.rotateX||latestValues.rotateY||latestValues.rotateZ||latestValues.skewX||latestValues.skewY)&&(hasDistortingTransform=!0),!hasDistortingTransform)return;let resetValues={};latestValues.z&&resetDistortingTransform(`z`,visualElement,resetValues,this.animationValues);for(let i$4=0;i$4<transformAxes.length;i$4++)resetDistortingTransform(`rotate${transformAxes[i$4]}`,visualElement,resetValues,this.animationValues),resetDistortingTransform(`skew${transformAxes[i$4]}`,visualElement,resetValues,this.animationValues);for(let key$1 in visualElement.render(),resetValues)visualElement.setStaticValue(key$1,resetValues[key$1]),this.animationValues&&(this.animationValues[key$1]=resetValues[key$1]);visualElement.scheduleRender()}applyProjectionStyles(targetStyle,styleProp){if(!this.instance||this.isSVG)return;if(!this.isVisible){targetStyle.visibility=`hidden`;return}let transformTemplate=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,targetStyle.visibility=``,targetStyle.opacity=``,targetStyle.pointerEvents=resolveMotionValue(styleProp?.pointerEvents)||``,targetStyle.transform=transformTemplate?transformTemplate(this.latestValues,``):`none`;return}let lead=this.getLead();if(!this.projectionDelta||!this.layout||!lead.target){this.options.layoutId&&(targetStyle.opacity=this.latestValues.opacity===void 0?1:this.latestValues.opacity,targetStyle.pointerEvents=resolveMotionValue(styleProp?.pointerEvents)||``),this.hasProjected&&!hasTransform(this.latestValues)&&(targetStyle.transform=transformTemplate?transformTemplate({},``):`none`,this.hasProjected=!1);return}targetStyle.visibility=``;let valuesToRender=lead.animationValues||lead.latestValues;this.applyTransformsToTarget();let transform$1=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,valuesToRender);transformTemplate&&(transform$1=transformTemplate(valuesToRender,transform$1)),targetStyle.transform=transform$1;let{x:x$2,y:y$2}=this.projectionDelta;for(let key$1 in targetStyle.transformOrigin=`${x$2.origin*100}% ${y$2.origin*100}% 0`,lead.animationValues?targetStyle.opacity=lead===this?valuesToRender.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:valuesToRender.opacityExit:targetStyle.opacity=lead===this?valuesToRender.opacity===void 0?``:valuesToRender.opacity:valuesToRender.opacityExit===void 0?0:valuesToRender.opacityExit,scaleCorrectors){if(valuesToRender[key$1]===void 0)continue;let{correct,applyTo,isCSSVariable}=scaleCorrectors[key$1],corrected=transform$1===`none`?valuesToRender[key$1]:correct(valuesToRender[key$1],lead);if(applyTo){let num=applyTo.length;for(let i$4=0;i$4<num;i$4++)targetStyle[applyTo[i$4]]=corrected}else isCSSVariable?this.options.visualElement.renderState.vars[key$1]=corrected:targetStyle[key$1]=corrected}this.options.layoutId&&(targetStyle.pointerEvents=lead===this?resolveMotionValue(styleProp?.pointerEvents)||``:`none`)}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(node=>node.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(node){node.updateLayout()}function notifyLayoutUpdate(node){let snapshot=node.resumeFrom?.snapshot||node.snapshot;if(node.isLead()&&node.layout&&snapshot&&node.hasListeners(`didUpdate`)){let{layoutBox:layout$1,measuredBox:measuredLayout}=node.layout,{animationType}=node.options,isShared=snapshot.source!==node.layout.source;animationType===`size`?eachAxis(axis=>{let axisSnapshot=isShared?snapshot.measuredBox[axis]:snapshot.layoutBox[axis],length=calcLength(axisSnapshot);axisSnapshot.min=layout$1[axis].min,axisSnapshot.max=axisSnapshot.min+length}):shouldAnimatePositionOnly(animationType,snapshot.layoutBox,layout$1)&&eachAxis(axis=>{let axisSnapshot=isShared?snapshot.measuredBox[axis]:snapshot.layoutBox[axis],length=calcLength(layout$1[axis]);axisSnapshot.max=axisSnapshot.min+length,node.relativeTarget&&!node.currentAnimation&&(node.isProjectionDirty=!0,node.relativeTarget[axis].max=node.relativeTarget[axis].min+length)});let layoutDelta=createDelta();calcBoxDelta(layoutDelta,layout$1,snapshot.layoutBox);let visualDelta=createDelta();isShared?calcBoxDelta(visualDelta,node.applyTransform(measuredLayout,!0),snapshot.measuredBox):calcBoxDelta(visualDelta,layout$1,snapshot.layoutBox);let hasLayoutChanged=!isDeltaZero(layoutDelta),hasRelativeLayoutChanged=!1;if(!node.resumeFrom){let relativeParent=node.getClosestProjectingParent();if(relativeParent&&!relativeParent.resumeFrom){let{snapshot:parentSnapshot,layout:parentLayout}=relativeParent;if(parentSnapshot&&parentLayout){let relativeSnapshot=createBox$1();calcRelativePosition(relativeSnapshot,snapshot.layoutBox,parentSnapshot.layoutBox);let relativeLayout=createBox$1();calcRelativePosition(relativeLayout,layout$1,parentLayout.layoutBox),boxEqualsRounded(relativeSnapshot,relativeLayout)||(hasRelativeLayoutChanged=!0),relativeParent.options.layoutRoot&&(node.relativeTarget=relativeLayout,node.relativeTargetOrigin=relativeSnapshot,node.relativeParent=relativeParent)}}}node.notifyListeners(`didUpdate`,{layout:layout$1,snapshot,delta:visualDelta,layoutDelta,hasLayoutChanged,hasRelativeLayoutChanged})}else if(node.isLead()){let{onExitComplete}=node.options;onExitComplete&&onExitComplete()}node.options.transition=void 0}function propagateDirtyNodes(node){statsBuffer.value&&metrics.nodes++,node.parent&&(node.isProjecting()||(node.isProjectionDirty=node.parent.isProjectionDirty),node.isSharedProjectionDirty||=!!(node.isProjectionDirty||node.parent.isProjectionDirty||node.parent.isSharedProjectionDirty),node.isTransformDirty||=node.parent.isTransformDirty)}function cleanDirtyNodes(node){node.isProjectionDirty=node.isSharedProjectionDirty=node.isTransformDirty=!1}function clearSnapshot(node){node.clearSnapshot()}function clearMeasurements(node){node.clearMeasurements()}function clearIsLayoutDirty(node){node.isLayoutDirty=!1}function resetTransformStyle(node){let{visualElement}=node.options;visualElement&&visualElement.getProps().onBeforeLayoutMeasure&&visualElement.notify(`BeforeLayoutMeasure`),node.resetTransform()}function finishAnimation(node){node.finishAnimation(),node.targetDelta=node.relativeTarget=node.target=void 0,node.isProjectionDirty=!0}function resolveTargetDelta(node){node.resolveTargetDelta()}function calcProjection(node){node.calcProjection()}function resetSkewAndRotation(node){node.resetSkewAndRotation()}function removeLeadSnapshots(stack){stack.removeLeadSnapshot()}function mixAxisDelta(output,delta,p$3){output.translate=mixNumber(delta.translate,0,p$3),output.scale=mixNumber(delta.scale,1,p$3),output.origin=delta.origin,output.originPoint=delta.originPoint}function mixAxis(output,from,to,p$3){output.min=mixNumber(from.min,to.min,p$3),output.max=mixNumber(from.max,to.max,p$3)}function mixBox(output,from,to,p$3){mixAxis(output.x,from.x,to.x,p$3),mixAxis(output.y,from.y,to.y,p$3)}function hasOpacityCrossfade(node){return node.animationValues&&node.animationValues.opacityExit!==void 0}var defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=string=>typeof navigator<`u`&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(string),roundPoint=userAgentContains(`applewebkit/`)&&!userAgentContains(`chrome/`)?Math.round:noop$5;function roundAxis(axis){axis.min=roundPoint(axis.min),axis.max=roundPoint(axis.max)}function roundBox(box){roundAxis(box.x),roundAxis(box.y)}function shouldAnimatePositionOnly(animationType,snapshot,layout$1){return animationType===`position`||animationType===`preserve-aspect`&&!isNear(aspectRatio(snapshot),aspectRatio(layout$1),.2)}function checkNodeWasScrollRoot(node){return node!==node.root&&node.scroll?.wasRoot}var DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(ref,notify)=>addDomEvent(ref,`resize`,notify),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:instance=>({x:instance.scrollLeft,y:instance.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){let documentNode=new DocumentProjectionNode({});documentNode.mount(window),documentNode.setOptions({layoutScroll:!0}),rootProjectionNode.current=documentNode}return rootProjectionNode.current},resetTransform:(instance,value)=>{instance.style.transform=value===void 0?`none`:value},checkIsScrollRoot:instance=>window.getComputedStyle(instance).position===`fixed`}),MotionConfigContext=(0,import_react.createContext)({transformPagePoint:p$3=>p$3,isStatic:!1,reducedMotion:`never`});function setRef(ref,value){if(typeof ref==`function`)return ref(value);ref!=null&&(ref.current=value)}function composeRefs(...refs){return node=>{let hasCleanup=!1,cleanups=refs.map(ref=>{let cleanup=setRef(ref,node);return!hasCleanup&&typeof cleanup==`function`&&(hasCleanup=!0),cleanup});if(hasCleanup)return()=>{for(let i$4=0;i$4<cleanups.length;i$4++){let cleanup=cleanups[i$4];typeof cleanup==`function`?cleanup():setRef(refs[i$4],null)}}}}function useComposedRefs(...refs){return import_react.useCallback(composeRefs(...refs),refs)}var PopChildMeasure=class extends import_react.Component{getSnapshotBeforeUpdate(prevProps){let element=this.props.childRef.current;if(element&&prevProps.isPresent&&!this.props.isPresent){let parent=element.offsetParent,parentWidth=isHTMLElement$1(parent)&&parent.offsetWidth||0,size=this.props.sizeRef.current;size.height=element.offsetHeight||0,size.width=element.offsetWidth||0,size.top=element.offsetTop,size.left=element.offsetLeft,size.right=parentWidth-size.width-size.left}return null}componentDidUpdate(){}render(){return this.props.children}};function PopChild({children:children$1,isPresent,anchorX,root:root$3}){let id$3=(0,import_react.useId)(),ref=(0,import_react.useRef)(null),size=(0,import_react.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce}=(0,import_react.useContext)(MotionConfigContext),composedRef=useComposedRefs(ref,children$1.props?.ref??children$1?.ref);return(0,import_react.useInsertionEffect)(()=>{let{width,height,top,left,right}=size.current;if(isPresent||!ref.current||!width||!height)return;let x$2=anchorX===`left`?`left: ${left}`:`right: ${right}`;ref.current.dataset.motionPopId=id$3;let style$3=document.createElement(`style`);nonce&&(style$3.nonce=nonce);let parent=root$3??document.head;return parent.appendChild(style$3),style$3.sheet&&style$3.sheet.insertRule(`
          [data-motion-pop-id="${id$3}"] {
            position: absolute !important;
            width: ${width}px !important;
            height: ${height}px !important;
            ${x$2}px !important;
            top: ${top}px !important;
          }
        `),()=>{parent.contains(style$3)&&parent.removeChild(style$3)}},[isPresent]),(0,import_jsx_runtime.jsx)(PopChildMeasure,{isPresent,childRef:ref,sizeRef:size,children:import_react.cloneElement(children$1,{ref:composedRef})})}var PresenceChild=({children:children$1,initial,isPresent,onExitComplete,custom,presenceAffectsLayout,mode,anchorX,root:root$3})=>{let presenceChildren=useConstant(newChildrenMap),id$3=(0,import_react.useId)(),isReusedContext=!0,context=(0,import_react.useMemo)(()=>(isReusedContext=!1,{id:id$3,initial,isPresent,custom,onExitComplete:childId=>{presenceChildren.set(childId,!0);for(let isComplete of presenceChildren.values())if(!isComplete)return;onExitComplete&&onExitComplete()},register:childId=>(presenceChildren.set(childId,!1),()=>presenceChildren.delete(childId))}),[isPresent,presenceChildren,onExitComplete]);return presenceAffectsLayout&&isReusedContext&&(context={...context}),(0,import_react.useMemo)(()=>{presenceChildren.forEach((_$1,key$1)=>presenceChildren.set(key$1,!1))},[isPresent]),import_react.useEffect(()=>{!isPresent&&!presenceChildren.size&&onExitComplete&&onExitComplete()},[isPresent]),mode===`popLayout`&&(children$1=(0,import_jsx_runtime.jsx)(PopChild,{isPresent,anchorX,root:root$3,children:children$1})),(0,import_jsx_runtime.jsx)(PresenceContext.Provider,{value:context,children:children$1})};function newChildrenMap(){return new Map}function usePresence(subscribe=!0){let context=(0,import_react.useContext)(PresenceContext);if(context===null)return[!0,null];let{isPresent,onExitComplete,register}=context,id$3=(0,import_react.useId)();(0,import_react.useEffect)(()=>{if(subscribe)return register(id$3)},[subscribe]);let safeToRemove=(0,import_react.useCallback)(()=>subscribe&&onExitComplete&&onExitComplete(id$3),[id$3,onExitComplete,subscribe]);return!isPresent&&onExitComplete?[!1,safeToRemove]:[!0]}var getChildKey=child=>child.key||``;function onlyElements(children$1){let filtered=[];return import_react.Children.forEach(children$1,child=>{(0,import_react.isValidElement)(child)&&filtered.push(child)}),filtered}var AnimatePresence=({children:children$1,custom,initial=!0,onExitComplete,presenceAffectsLayout=!0,mode=`sync`,propagate=!1,anchorX=`left`,root:root$3})=>{let[isParentPresent,safeToRemove]=usePresence(propagate),presentChildren=(0,import_react.useMemo)(()=>onlyElements(children$1),[children$1]),presentKeys=propagate&&!isParentPresent?[]:presentChildren.map(getChildKey),isInitialRender=(0,import_react.useRef)(!0),pendingPresentChildren=(0,import_react.useRef)(presentChildren),exitComplete=useConstant(()=>new Map),exitingComponents=(0,import_react.useRef)(new Set),[diffedChildren,setDiffedChildren]=(0,import_react.useState)(presentChildren),[renderedChildren,setRenderedChildren]=(0,import_react.useState)(presentChildren);useIsomorphicLayoutEffect$4(()=>{isInitialRender.current=!1,pendingPresentChildren.current=presentChildren;for(let i$4=0;i$4<renderedChildren.length;i$4++){let key$1=getChildKey(renderedChildren[i$4]);presentKeys.includes(key$1)?(exitComplete.delete(key$1),exitingComponents.current.delete(key$1)):exitComplete.get(key$1)!==!0&&exitComplete.set(key$1,!1)}},[renderedChildren,presentKeys.length,presentKeys.join(`-`)]);let exitingChildren=[];if(presentChildren!==diffedChildren){let nextChildren=[...presentChildren];for(let i$4=0;i$4<renderedChildren.length;i$4++){let child=renderedChildren[i$4],key$1=getChildKey(child);presentKeys.includes(key$1)||(nextChildren.splice(i$4,0,child),exitingChildren.push(child))}return mode===`wait`&&exitingChildren.length&&(nextChildren=exitingChildren),setRenderedChildren(onlyElements(nextChildren)),setDiffedChildren(presentChildren),null}let{forceRender}=(0,import_react.useContext)(LayoutGroupContext);return(0,import_jsx_runtime.jsx)(import_jsx_runtime.Fragment,{children:renderedChildren.map(child=>{let key$1=getChildKey(child),isPresent=propagate&&!isParentPresent?!1:presentChildren===renderedChildren||presentKeys.includes(key$1);return(0,import_jsx_runtime.jsx)(PresenceChild,{isPresent,initial:!isInitialRender.current||initial?void 0:!1,custom,presenceAffectsLayout,mode,root:root$3,onExitComplete:isPresent?void 0:()=>{if(exitingComponents.current.has(key$1))return;if(exitingComponents.current.add(key$1),exitComplete.has(key$1))exitComplete.set(key$1,!0);else return;let isEveryExitComplete=!0;exitComplete.forEach(isExitComplete=>{isExitComplete||(isEveryExitComplete=!1)}),isEveryExitComplete&&(forceRender?.(),setRenderedChildren(pendingPresentChildren.current),propagate&&safeToRemove?.(),onExitComplete&&onExitComplete())},anchorX,children:child},key$1)})})},LazyContext=(0,import_react.createContext)({strict:!1}),featureProps={animation:[`animate`,`variants`,`whileHover`,`whileTap`,`exit`,`whileInView`,`whileFocus`,`whileDrag`],exit:[`exit`],drag:[`drag`,`dragControls`],focus:[`whileFocus`],hover:[`whileHover`,`onHoverStart`,`onHoverEnd`],tap:[`whileTap`,`onTap`,`onTapStart`,`onTapCancel`],pan:[`onPan`,`onPanStart`,`onPanSessionStart`,`onPanEnd`],inView:[`whileInView`,`onViewportEnter`,`onViewportLeave`],layout:[`layout`,`layoutId`]},isInitialized=!1;function initFeatureDefinitions(){if(isInitialized)return;let initialFeatureDefinitions={};for(let key$1 in featureProps)initialFeatureDefinitions[key$1]={isEnabled:props=>featureProps[key$1].some(name=>!!props[name])};setFeatureDefinitions(initialFeatureDefinitions),isInitialized=!0}function getInitializedFeatureDefinitions(){return initFeatureDefinitions(),getFeatureDefinitions()}function loadFeatures(features){let featureDefinitions$1=getInitializedFeatureDefinitions();for(let key$1 in features)featureDefinitions$1[key$1]={...featureDefinitions$1[key$1],...features[key$1]};setFeatureDefinitions(featureDefinitions$1)}var validMotionProps=new Set(`animate.exit.variants.initial.style.values.variants.transition.transformTemplate.custom.inherit.onBeforeLayoutMeasure.onAnimationStart.onAnimationComplete.onUpdate.onDragStart.onDrag.onDragEnd.onMeasureDragConstraints.onDirectionLock.onDragTransitionEnd._dragX._dragY.onHoverStart.onHoverEnd.onViewportEnter.onViewportLeave.globalTapTarget.ignoreStrict.viewport`.split(`.`));function isValidMotionProp(key$1){return key$1.startsWith(`while`)||key$1.startsWith(`drag`)&&key$1!==`draggable`||key$1.startsWith(`layout`)||key$1.startsWith(`onTap`)||key$1.startsWith(`onPan`)||key$1.startsWith(`onLayout`)||validMotionProps.has(key$1)}var is_prop_valid_framer_motion_exports=__export({default:()=>is_prop_valid_framer_motion_default}),is_prop_valid_framer_motion_default,init_is_prop_valid_framer_motion=__esmMin((()=>{throw is_prop_valid_framer_motion_default={},Error(`Could not resolve "@emotion/is-prop-valid" imported by "framer-motion". Is it installed?`)})),shouldForward=key$1=>!isValidMotionProp(key$1);function loadExternalIsValidProp(isValidProp){typeof isValidProp==`function`&&(shouldForward=key$1=>key$1.startsWith(`on`)?!isValidMotionProp(key$1):isValidProp(key$1))}try{loadExternalIsValidProp((init_is_prop_valid_framer_motion(),__toCommonJS(is_prop_valid_framer_motion_exports)).default)}catch{}function filterProps(props,isDom,forwardMotionProps){let filteredProps={};for(let key$1 in props)key$1===`values`&&typeof props.values==`object`||(shouldForward(key$1)||forwardMotionProps===!0&&isValidMotionProp(key$1)||!isDom&&!isValidMotionProp(key$1)||props.draggable&&key$1.startsWith(`onDrag`))&&(filteredProps[key$1]=props[key$1]);return filteredProps}var MotionContext=(0,import_react.createContext)({});function getCurrentTreeVariants(props,context){if(isControllingVariants(props)){let{initial,animate}=props;return{initial:initial===!1||isVariantLabel(initial)?initial:void 0,animate:isVariantLabel(animate)?animate:void 0}}return props.inherit===!1?{}:context}function useCreateMotionContext(props){let{initial,animate}=getCurrentTreeVariants(props,(0,import_react.useContext)(MotionContext));return(0,import_react.useMemo)(()=>({initial,animate}),[variantLabelsAsDependency(initial),variantLabelsAsDependency(animate)])}function variantLabelsAsDependency(prop){return Array.isArray(prop)?prop.join(` `):prop}var createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(target,source,props){for(let key$1 in source)!isMotionValue(source[key$1])&&!isForcedMotionValue(key$1,props)&&(target[key$1]=source[key$1])}function useInitialMotionValues({transformTemplate},visualState){return(0,import_react.useMemo)(()=>{let state=createHtmlRenderState();return buildHTMLStyles(state,visualState,transformTemplate),Object.assign({},state.vars,state.style)},[visualState])}function useStyle(props,visualState){let styleProp=props.style||{},style$3={};return copyRawValuesOnly(style$3,styleProp,props),Object.assign(style$3,useInitialMotionValues(props,visualState)),style$3}function useHTMLProps(props,visualState){let htmlProps={},style$3=useStyle(props,visualState);return props.drag&&props.dragListener!==!1&&(htmlProps.draggable=!1,style$3.userSelect=style$3.WebkitUserSelect=style$3.WebkitTouchCallout=`none`,style$3.touchAction=props.drag===!0?`none`:`pan-${props.drag===`x`?`y`:`x`}`),props.tabIndex===void 0&&(props.onTap||props.onTapStart||props.whileTap)&&(htmlProps.tabIndex=0),htmlProps.style=style$3,htmlProps}var createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}});function useSVGProps(props,visualState,_isStatic,Component$2){let visualProps=(0,import_react.useMemo)(()=>{let state=createSvgRenderState();return buildSVGAttrs(state,visualState,isSVGTag(Component$2),props.transformTemplate,props.style),{...state.attrs,style:{...state.style}}},[visualState]);if(props.style){let rawStyles={};copyRawValuesOnly(rawStyles,props.style,props),visualProps.style={...rawStyles,...visualProps.style}}return visualProps}var lowercaseSVGElements=[`animate`,`circle`,`defs`,`desc`,`ellipse`,`g`,`image`,`line`,`filter`,`marker`,`mask`,`metadata`,`path`,`pattern`,`polygon`,`polyline`,`rect`,`stop`,`switch`,`symbol`,`svg`,`text`,`tspan`,`use`,`view`];function isSVGComponent(Component$2){return typeof Component$2!=`string`||Component$2.includes(`-`)?!1:!!(lowercaseSVGElements.indexOf(Component$2)>-1||/[A-Z]/u.test(Component$2))}function useRender(Component$2,props,ref,{latestValues},isStatic,forwardMotionProps=!1,isSVG){let visualProps=(isSVG??isSVGComponent(Component$2)?useSVGProps:useHTMLProps)(props,latestValues,isStatic,Component$2),filteredProps=filterProps(props,typeof Component$2==`string`,forwardMotionProps),elementProps=Component$2===import_react.Fragment?{}:{...filteredProps,...visualProps,ref},{children:children$1}=props,renderedChildren=(0,import_react.useMemo)(()=>isMotionValue(children$1)?children$1.get():children$1,[children$1]);return(0,import_react.createElement)(Component$2,{...elementProps,children:renderedChildren})}function makeState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$2,createRenderState},props,context,presenceContext){return{latestValues:makeLatestValues(props,context,presenceContext,scrapeMotionValuesFromProps$2),renderState:createRenderState()}}function makeLatestValues(props,context,presenceContext,scrapeMotionValues){let values={},motionValues=scrapeMotionValues(props,{});for(let key$1 in motionValues)values[key$1]=resolveMotionValue(motionValues[key$1]);let{initial,animate}=props,isControllingVariants$1=isControllingVariants(props),isVariantNode$1=isVariantNode(props);context&&isVariantNode$1&&!isControllingVariants$1&&props.inherit!==!1&&(initial===void 0&&(initial=context.initial),animate===void 0&&(animate=context.animate));let isInitialAnimationBlocked=presenceContext?presenceContext.initial===!1:!1;isInitialAnimationBlocked||=initial===!1;let variantToSet=isInitialAnimationBlocked?animate:initial;if(variantToSet&&typeof variantToSet!=`boolean`&&!isAnimationControls(variantToSet)){let list=Array.isArray(variantToSet)?variantToSet:[variantToSet];for(let i$4=0;i$4<list.length;i$4++){let resolved=resolveVariantFromProps(props,list[i$4]);if(resolved){let{transitionEnd,transition:transition$1,...target}=resolved;for(let key$1 in target){let valueTarget=target[key$1];if(Array.isArray(valueTarget)){let index$2=isInitialAnimationBlocked?valueTarget.length-1:0;valueTarget=valueTarget[index$2]}valueTarget!==null&&(values[key$1]=valueTarget)}for(let key$1 in transitionEnd)values[key$1]=transitionEnd[key$1]}}}return values}var makeUseVisualState=config=>(props,isStatic)=>{let context=(0,import_react.useContext)(MotionContext),presenceContext=(0,import_react.useContext)(PresenceContext),make=()=>makeState(config,props,context,presenceContext);return isStatic?make():useConstant(make)},useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState}),useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for(`motionComponentSymbol`);function useMotionRef(visualState,visualElement,externalRef){let externalRefContainer=(0,import_react.useRef)(externalRef);(0,import_react.useInsertionEffect)(()=>{externalRefContainer.current=externalRef});let refCleanup=(0,import_react.useRef)(null);return(0,import_react.useCallback)(instance=>{instance&&visualState.onMount?.(instance),visualElement&&(instance?visualElement.mount(instance):visualElement.unmount());let ref=externalRefContainer.current;if(typeof ref==`function`)if(instance){let cleanup=ref(instance);typeof cleanup==`function`&&(refCleanup.current=cleanup)}else refCleanup.current?(refCleanup.current(),refCleanup.current=null):ref(instance);else ref&&(ref.current=instance)},[visualElement])}var SwitchLayoutGroupContext=(0,import_react.createContext)({});function isRefObject(ref){return ref&&typeof ref==`object`&&Object.prototype.hasOwnProperty.call(ref,`current`)}function useVisualElement(Component$2,visualState,props,createVisualElement,ProjectionNodeConstructor,isSVG){let{visualElement:parent}=(0,import_react.useContext)(MotionContext),lazyContext=(0,import_react.useContext)(LazyContext),presenceContext=(0,import_react.useContext)(PresenceContext),reducedMotionConfig=(0,import_react.useContext)(MotionConfigContext).reducedMotion,visualElementRef=(0,import_react.useRef)(null);createVisualElement||=lazyContext.renderer,!visualElementRef.current&&createVisualElement&&(visualElementRef.current=createVisualElement(Component$2,{visualState,parent,props,presenceContext,blockInitialAnimation:presenceContext?presenceContext.initial===!1:!1,reducedMotionConfig,isSVG}));let visualElement=visualElementRef.current,initialLayoutGroupConfig=(0,import_react.useContext)(SwitchLayoutGroupContext);visualElement&&!visualElement.projection&&ProjectionNodeConstructor&&(visualElement.type===`html`||visualElement.type===`svg`)&&createProjectionNode(visualElementRef.current,props,ProjectionNodeConstructor,initialLayoutGroupConfig);let isMounted=(0,import_react.useRef)(!1);(0,import_react.useInsertionEffect)(()=>{visualElement&&isMounted.current&&visualElement.update(props,presenceContext)});let optimisedAppearId=props[optimizedAppearDataAttribute],wantsHandoff=(0,import_react.useRef)(!!optimisedAppearId&&!window.MotionHandoffIsComplete?.(optimisedAppearId)&&window.MotionHasOptimisedAnimation?.(optimisedAppearId));return useIsomorphicLayoutEffect$4(()=>{visualElement&&(isMounted.current=!0,window.MotionIsMounted=!0,visualElement.updateFeatures(),visualElement.scheduleRenderMicrotask(),wantsHandoff.current&&visualElement.animationState&&visualElement.animationState.animateChanges())}),(0,import_react.useEffect)(()=>{visualElement&&(!wantsHandoff.current&&visualElement.animationState&&visualElement.animationState.animateChanges(),wantsHandoff.current&&=(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(optimisedAppearId)}),!1),visualElement.enteringChildren=void 0)}),visualElement}function createProjectionNode(visualElement,props,ProjectionNodeConstructor,initialPromotionConfig){let{layoutId,layout:layout$1,drag:drag$1,dragConstraints,layoutScroll,layoutRoot,layoutCrossfade}=props;visualElement.projection=new ProjectionNodeConstructor(visualElement.latestValues,props[`data-framer-portal-id`]?void 0:getClosestProjectingNode(visualElement.parent)),visualElement.projection.setOptions({layoutId,layout:layout$1,alwaysMeasureLayout:!!drag$1||dragConstraints&&isRefObject(dragConstraints),visualElement,animationType:typeof layout$1==`string`?layout$1:`both`,initialPromotionConfig,crossfade:layoutCrossfade,layoutScroll,layoutRoot})}function getClosestProjectingNode(visualElement){if(visualElement)return visualElement.options.allowProjection===!1?getClosestProjectingNode(visualElement.parent):visualElement.projection}function createMotionComponent(Component$2,{forwardMotionProps=!1,type}={},preloadedFeatures,createVisualElement){preloadedFeatures&&loadFeatures(preloadedFeatures);let isSVG=type?type===`svg`:isSVGComponent(Component$2),useVisualState=isSVG?useSVGVisualState:useHTMLVisualState;function MotionDOMComponent(props,externalRef){let MeasureLayout$1,configAndProps={...(0,import_react.useContext)(MotionConfigContext),...props,layoutId:useLayoutId(props)},{isStatic}=configAndProps,context=useCreateMotionContext(props),visualState=useVisualState(props,isStatic);if(!isStatic&&isBrowser){useStrictMode(configAndProps,preloadedFeatures);let layoutProjection=getProjectionFunctionality(configAndProps);MeasureLayout$1=layoutProjection.MeasureLayout,context.visualElement=useVisualElement(Component$2,visualState,configAndProps,createVisualElement,layoutProjection.ProjectionNode,isSVG)}return(0,import_jsx_runtime.jsxs)(MotionContext.Provider,{value:context,children:[MeasureLayout$1&&context.visualElement?(0,import_jsx_runtime.jsx)(MeasureLayout$1,{visualElement:context.visualElement,...configAndProps}):null,useRender(Component$2,props,useMotionRef(visualState,context.visualElement,externalRef),visualState,isStatic,forwardMotionProps,isSVG)]})}MotionDOMComponent.displayName=`motion.${typeof Component$2==`string`?Component$2:`create(${Component$2.displayName??Component$2.name??``})`}`;let ForwardRefMotionComponent=(0,import_react.forwardRef)(MotionDOMComponent);return ForwardRefMotionComponent[motionComponentSymbol]=Component$2,ForwardRefMotionComponent}function useLayoutId({layoutId}){let layoutGroupId=(0,import_react.useContext)(LayoutGroupContext).id;return layoutGroupId&&layoutId!==void 0?layoutGroupId+`-`+layoutId:layoutId}function useStrictMode(configAndProps,preloadedFeatures){(0,import_react.useContext)(LazyContext).strict}function getProjectionFunctionality(props){let{drag:drag$1,layout:layout$1}=getInitializedFeatureDefinitions();if(!drag$1&&!layout$1)return{};let combined={...drag$1,...layout$1};return{MeasureLayout:drag$1?.isEnabled(props)||layout$1?.isEnabled(props)?combined.MeasureLayout:void 0,ProjectionNode:combined.ProjectionNode}}function createMotionProxy(preloadedFeatures,createVisualElement){if(typeof Proxy>`u`)return createMotionComponent;let componentCache=new Map,factory$1=(Component$2,options$1)=>createMotionComponent(Component$2,options$1,preloadedFeatures,createVisualElement);return new Proxy((Component$2,options$1)=>factory$1(Component$2,options$1),{get:(_target,key$1)=>key$1===`create`?factory$1:(componentCache.has(key$1)||componentCache.set(key$1,createMotionComponent(key$1,void 0,preloadedFeatures,createVisualElement)),componentCache.get(key$1))})}var createDomVisualElement=(Component$2,options$1)=>options$1.isSVG??isSVGComponent(Component$2)?new SVGVisualElement(options$1):new HTMLVisualElement(options$1,{allowProjection:Component$2!==import_react.Fragment}),AnimationFeature=class extends Feature{constructor(node){super(node),node.animationState||=createAnimationState(node)}updateAnimationControlsSubscription(){let{animate}=this.node.getProps();isAnimationControls(animate)&&(this.unmountControls=animate.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate}=this.node.getProps(),{animate:prevAnimate}=this.node.prevProps||{};animate!==prevAnimate&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}},id$1=0,ExitAnimationFeature=class extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;let{isPresent,onExitComplete}=this.node.presenceContext,{isPresent:prevIsPresent}=this.node.prevPresenceContext||{};if(!this.node.animationState||isPresent===prevIsPresent)return;let exitAnimation=this.node.animationState.setActive(`exit`,!isPresent);onExitComplete&&!isPresent&&exitAnimation.then(()=>{onExitComplete(this.id)})}mount(){let{register,onExitComplete}=this.node.presenceContext||{};onExitComplete&&onExitComplete(this.id),register&&(this.unmount=register(this.id))}unmount(){}},animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function extractEventInfo(event){return{point:{x:event.pageX,y:event.pageY}}}var addPointerInfo=handler=>event=>isPrimaryPointer(event)&&handler(event,extractEventInfo(event));function addPointerEvent(target,eventName,handler,options$1){return addDomEvent(target,eventName,addPointerInfo(handler),options$1)}var getContextWindow=({current})=>current?current.ownerDocument.defaultView:null,distance$3=(a$4,b$3)=>Math.abs(a$4-b$3);function distance2D(a$4,b$3){let xDelta=distance$3(a$4.x,b$3.x),yDelta=distance$3(a$4.y,b$3.y);return Math.sqrt(xDelta**2+yDelta**2)}var overflowStyles=new Set([`auto`,`scroll`]),PanSession=class{constructor(event,handlers,{transformPagePoint,contextWindow=window,dragSnapToOrigin=!1,distanceThreshold=3,element}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=event$1=>{this.handleScroll(event$1.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let info=getPanInfo(this.lastMoveEventInfo,this.history),isPanStarted=this.startEvent!==null,isDistancePastThreshold=distance2D(info.offset,{x:0,y:0})>=this.distanceThreshold;if(!isPanStarted&&!isDistancePastThreshold)return;let{point:point$1}=info,{timestamp:timestamp$1}=frameData;this.history.push({...point$1,timestamp:timestamp$1});let{onStart,onMove}=this.handlers;isPanStarted||(onStart&&onStart(this.lastMoveEvent,info),this.startEvent=this.lastMoveEvent),onMove&&onMove(this.lastMoveEvent,info)},this.handlePointerMove=(event$1,info)=>{this.lastMoveEvent=event$1,this.lastMoveEventInfo=transformPoint(info,this.transformPagePoint),frame$1.update(this.updatePoint,!0)},this.handlePointerUp=(event$1,info)=>{this.end();let{onEnd,onSessionEnd,resumeAnimation}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&resumeAnimation&&resumeAnimation(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let panInfo=getPanInfo(event$1.type===`pointercancel`?this.lastMoveEventInfo:transformPoint(info,this.transformPagePoint),this.history);this.startEvent&&onEnd&&onEnd(event$1,panInfo),onSessionEnd&&onSessionEnd(event$1,panInfo)},!isPrimaryPointer(event))return;this.dragSnapToOrigin=dragSnapToOrigin,this.handlers=handlers,this.transformPagePoint=transformPagePoint,this.distanceThreshold=distanceThreshold,this.contextWindow=contextWindow||window;let initialInfo=transformPoint(extractEventInfo(event),this.transformPagePoint),{point}=initialInfo,{timestamp}=frameData;this.history=[{...point,timestamp}];let{onSessionStart}=handlers;onSessionStart&&onSessionStart(event,getPanInfo(initialInfo,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,`pointermove`,this.handlePointerMove),addPointerEvent(this.contextWindow,`pointerup`,this.handlePointerUp),addPointerEvent(this.contextWindow,`pointercancel`,this.handlePointerUp)),element&&this.startScrollTracking(element)}startScrollTracking(element){let current=element.parentElement;for(;current;){let style$3=getComputedStyle(current);(overflowStyles.has(style$3.overflowX)||overflowStyles.has(style$3.overflowY))&&this.scrollPositions.set(current,{x:current.scrollLeft,y:current.scrollTop}),current=current.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener(`scroll`,this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener(`scroll`,this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener(`scroll`,this.onElementScroll,{capture:!0}),window.removeEventListener(`scroll`,this.onWindowScroll)}}handleScroll(target){let initial=this.scrollPositions.get(target);if(!initial)return;let isWindow$1=target===window,current=isWindow$1?{x:window.scrollX,y:window.scrollY}:{x:target.scrollLeft,y:target.scrollTop},delta={x:current.x-initial.x,y:current.y-initial.y};delta.x===0&&delta.y===0||(isWindow$1?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=delta.x,this.lastMoveEventInfo.point.y+=delta.y):this.history.length>0&&(this.history[0].x-=delta.x,this.history[0].y-=delta.y),this.scrollPositions.set(target,current),frame$1.update(this.updatePoint,!0))}updateHandlers(handlers){this.handlers=handlers}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),cancelFrame(this.updatePoint)}};function transformPoint(info,transformPagePoint){return transformPagePoint?{point:transformPagePoint(info.point)}:info}function subtractPoint(a$4,b$3){return{x:a$4.x-b$3.x,y:a$4.y-b$3.y}}function getPanInfo({point},history){return{point,delta:subtractPoint(point,lastDevicePoint(history)),offset:subtractPoint(point,startDevicePoint(history)),velocity:getVelocity(history,.1)}}function startDevicePoint(history){return history[0]}function lastDevicePoint(history){return history[history.length-1]}function getVelocity(history,timeDelta){if(history.length<2)return{x:0,y:0};let i$4=history.length-1,timestampedPoint=null,lastPoint=lastDevicePoint(history);for(;i$4>=0&&(timestampedPoint=history[i$4],!(lastPoint.timestamp-timestampedPoint.timestamp>secondsToMilliseconds(timeDelta)));)i$4--;if(!timestampedPoint)return{x:0,y:0};let time$1=millisecondsToSeconds(lastPoint.timestamp-timestampedPoint.timestamp);if(time$1===0)return{x:0,y:0};let currentVelocity={x:(lastPoint.x-timestampedPoint.x)/time$1,y:(lastPoint.y-timestampedPoint.y)/time$1};return currentVelocity.x===1/0&&(currentVelocity.x=0),currentVelocity.y===1/0&&(currentVelocity.y=0),currentVelocity}function applyConstraints(point,{min,max},elastic){return min!==void 0&&point<min?point=elastic?mixNumber(min,point,elastic.min):Math.max(point,min):max!==void 0&&point>max&&(point=elastic?mixNumber(max,point,elastic.max):Math.min(point,max)),point}function calcRelativeAxisConstraints(axis,min,max){return{min:min===void 0?void 0:axis.min+min,max:max===void 0?void 0:axis.max+max-(axis.max-axis.min)}}function calcRelativeConstraints(layoutBox,{top,left,bottom,right}){return{x:calcRelativeAxisConstraints(layoutBox.x,left,right),y:calcRelativeAxisConstraints(layoutBox.y,top,bottom)}}function calcViewportAxisConstraints(layoutAxis,constraintsAxis){let min=constraintsAxis.min-layoutAxis.min,max=constraintsAxis.max-layoutAxis.max;return constraintsAxis.max-constraintsAxis.min<layoutAxis.max-layoutAxis.min&&([min,max]=[max,min]),{min,max}}function calcViewportConstraints(layoutBox,constraintsBox){return{x:calcViewportAxisConstraints(layoutBox.x,constraintsBox.x),y:calcViewportAxisConstraints(layoutBox.y,constraintsBox.y)}}function calcOrigin(source,target){let origin$2=.5,sourceLength=calcLength(source),targetLength=calcLength(target);return targetLength>sourceLength?origin$2=progress(target.min,target.max-sourceLength,source.min):sourceLength>targetLength&&(origin$2=progress(source.min,source.max-targetLength,target.min)),clamp$2(0,1,origin$2)}function rebaseAxisConstraints(layout$1,constraints){let relativeConstraints={};return constraints.min!==void 0&&(relativeConstraints.min=constraints.min-layout$1.min),constraints.max!==void 0&&(relativeConstraints.max=constraints.max-layout$1.min),relativeConstraints}var defaultElastic=.35;function resolveDragElastic(dragElastic=defaultElastic){return dragElastic===!1?dragElastic=0:dragElastic===!0&&(dragElastic=defaultElastic),{x:resolveAxisElastic(dragElastic,`left`,`right`),y:resolveAxisElastic(dragElastic,`top`,`bottom`)}}function resolveAxisElastic(dragElastic,minLabel,maxLabel){return{min:resolvePointElastic(dragElastic,minLabel),max:resolvePointElastic(dragElastic,maxLabel)}}function resolvePointElastic(dragElastic,label){return typeof dragElastic==`number`?dragElastic:dragElastic[label]||0}var elementDragControls=new WeakMap,VisualElementDragControls=class{constructor(visualElement){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox$1(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=visualElement}start(originEvent,{snapToCursor=!1,distanceThreshold}={}){let{presenceContext}=this.visualElement;if(presenceContext&&presenceContext.isPresent===!1)return;let onSessionStart=event=>{snapToCursor?(this.stopAnimation(),this.snapToCursor(extractEventInfo(event).point)):this.pauseAnimation()},onStart=(event,info)=>{this.stopAnimation();let{drag:drag$1,dragPropagation,onDragStart:onDragStart$1}=this.getProps();if(drag$1&&!dragPropagation&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(drag$1),!this.openDragLock))return;this.latestPointerEvent=event,this.latestPanInfo=info,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(axis=>{let current=this.getAxisMotionValue(axis).get()||0;if(percent.test(current)){let{projection}=this.visualElement;if(projection&&projection.layout){let measuredAxis=projection.layout.layoutBox[axis];measuredAxis&&(current=calcLength(measuredAxis)*(parseFloat(current)/100))}}this.originPoint[axis]=current}),onDragStart$1&&frame$1.postRender(()=>onDragStart$1(event,info)),addValueToWillChange(this.visualElement,`transform`);let{animationState}=this.visualElement;animationState&&animationState.setActive(`whileDrag`,!0)},onMove=(event,info)=>{this.latestPointerEvent=event,this.latestPanInfo=info;let{dragPropagation,dragDirectionLock,onDirectionLock,onDrag}=this.getProps();if(!dragPropagation&&!this.openDragLock)return;let{offset:offset$1}=info;if(dragDirectionLock&&this.currentDirection===null){this.currentDirection=getCurrentDirection(offset$1),this.currentDirection!==null&&onDirectionLock&&onDirectionLock(this.currentDirection);return}this.updateAxis(`x`,info.point,offset$1),this.updateAxis(`y`,info.point,offset$1),this.visualElement.render(),onDrag&&onDrag(event,info)},onSessionEnd=(event,info)=>{this.latestPointerEvent=event,this.latestPanInfo=info,this.stop(event,info),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation=()=>eachAxis(axis=>this.getAnimationState(axis)===`paused`&&this.getAxisMotionValue(axis).animation?.play()),{dragSnapToOrigin}=this.getProps();this.panSession=new PanSession(originEvent,{onSessionStart,onStart,onMove,onSessionEnd,resumeAnimation},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin,distanceThreshold,contextWindow:getContextWindow(this.visualElement),element:this.visualElement.current})}stop(event,panInfo){let finalEvent=event||this.latestPointerEvent,finalPanInfo=panInfo||this.latestPanInfo,isDragging$2=this.isDragging;if(this.cancel(),!isDragging$2||!finalPanInfo||!finalEvent)return;let{velocity}=finalPanInfo;this.startAnimation(velocity);let{onDragEnd:onDragEnd$1}=this.getProps();onDragEnd$1&&frame$1.postRender(()=>onDragEnd$1(finalEvent,finalPanInfo))}cancel(){this.isDragging=!1;let{projection,animationState}=this.visualElement;projection&&(projection.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation}=this.getProps();!dragPropagation&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),animationState&&animationState.setActive(`whileDrag`,!1)}updateAxis(axis,_point,offset$1){let{drag:drag$1}=this.getProps();if(!offset$1||!shouldDrag(axis,drag$1,this.currentDirection))return;let axisValue=this.getAxisMotionValue(axis),next=this.originPoint[axis]+offset$1[axis];this.constraints&&this.constraints[axis]&&(next=applyConstraints(next,this.constraints[axis],this.elastic[axis])),axisValue.set(next)}resolveConstraints(){let{dragConstraints,dragElastic}=this.getProps(),layout$1=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,prevConstraints=this.constraints;dragConstraints&&isRefObject(dragConstraints)?this.constraints||=this.resolveRefConstraints():dragConstraints&&layout$1?this.constraints=calcRelativeConstraints(layout$1.layoutBox,dragConstraints):this.constraints=!1,this.elastic=resolveDragElastic(dragElastic),prevConstraints!==this.constraints&&layout$1&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(axis=>{this.constraints!==!1&&this.getAxisMotionValue(axis)&&(this.constraints[axis]=rebaseAxisConstraints(layout$1.layoutBox[axis],this.constraints[axis]))})}resolveRefConstraints(){let{dragConstraints:constraints,onMeasureDragConstraints}=this.getProps();if(!constraints||!isRefObject(constraints))return!1;let constraintsElement=constraints.current,{projection}=this.visualElement;if(!projection||!projection.layout)return!1;let constraintsBox=measurePageBox(constraintsElement,projection.root,this.visualElement.getTransformPagePoint()),measuredConstraints=calcViewportConstraints(projection.layout.layoutBox,constraintsBox);if(onMeasureDragConstraints){let userConstraints=onMeasureDragConstraints(convertBoxToBoundingBox(measuredConstraints));this.hasMutatedConstraints=!!userConstraints,userConstraints&&(measuredConstraints=convertBoundingBoxToBox(userConstraints))}return measuredConstraints}startAnimation(velocity){let{drag:drag$1,dragMomentum,dragElastic,dragTransition,dragSnapToOrigin,onDragTransitionEnd}=this.getProps(),constraints=this.constraints||{},momentumAnimations=eachAxis(axis=>{if(!shouldDrag(axis,drag$1,this.currentDirection))return;let transition$1=constraints&&constraints[axis]||{};dragSnapToOrigin&&(transition$1={min:0,max:0});let bounceStiffness=dragElastic?200:1e6,bounceDamping=dragElastic?40:1e7,inertia$1={type:`inertia`,velocity:dragMomentum?velocity[axis]:0,bounceStiffness,bounceDamping,timeConstant:750,restDelta:1,restSpeed:10,...dragTransition,...transition$1};return this.startAxisValueAnimation(axis,inertia$1)});return Promise.all(momentumAnimations).then(onDragTransitionEnd)}startAxisValueAnimation(axis,transition$1){let axisValue=this.getAxisMotionValue(axis);return addValueToWillChange(this.visualElement,axis),axisValue.start(animateMotionValue(axis,axisValue,0,transition$1,this.visualElement,!1))}stopAnimation(){eachAxis(axis=>this.getAxisMotionValue(axis).stop())}pauseAnimation(){eachAxis(axis=>this.getAxisMotionValue(axis).animation?.pause())}getAnimationState(axis){return this.getAxisMotionValue(axis).animation?.state}getAxisMotionValue(axis){let dragKey=`_drag${axis.toUpperCase()}`,props=this.visualElement.getProps();return props[dragKey]||this.visualElement.getValue(axis,(props.initial?props.initial[axis]:void 0)||0)}snapToCursor(point){eachAxis(axis=>{let{drag:drag$1}=this.getProps();if(!shouldDrag(axis,drag$1,this.currentDirection))return;let{projection}=this.visualElement,axisValue=this.getAxisMotionValue(axis);if(projection&&projection.layout){let{min,max}=projection.layout.layoutBox[axis],current=axisValue.get()||0;axisValue.set(point[axis]-mixNumber(min,max,.5)+current)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:drag$1,dragConstraints}=this.getProps(),{projection}=this.visualElement;if(!isRefObject(dragConstraints)||!projection||!this.constraints)return;this.stopAnimation();let boxProgress={x:0,y:0};eachAxis(axis=>{let axisValue=this.getAxisMotionValue(axis);if(axisValue&&this.constraints!==!1){let latest=axisValue.get();boxProgress[axis]=calcOrigin({min:latest,max:latest},this.constraints[axis])}});let{transformTemplate}=this.visualElement.getProps();this.visualElement.current.style.transform=transformTemplate?transformTemplate({},``):`none`,projection.root&&projection.root.updateScroll(),projection.updateLayout(),this.resolveConstraints(),eachAxis(axis=>{if(!shouldDrag(axis,drag$1,null))return;let axisValue=this.getAxisMotionValue(axis),{min,max}=this.constraints[axis];axisValue.set(mixNumber(min,max,boxProgress[axis]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);let element=this.visualElement.current,stopPointerListener=addPointerEvent(element,`pointerdown`,event=>{let{drag:drag$1,dragListener=!0}=this.getProps();drag$1&&dragListener&&!isElementKeyboardAccessible(event.target)&&this.start(event)}),measureDragConstraints=()=>{let{dragConstraints}=this.getProps();isRefObject(dragConstraints)&&dragConstraints.current&&(this.constraints=this.resolveRefConstraints())},{projection}=this.visualElement,stopMeasureLayoutListener=projection.addEventListener(`measure`,measureDragConstraints);projection&&!projection.layout&&(projection.root&&projection.root.updateScroll(),projection.updateLayout()),frame$1.read(measureDragConstraints);let stopResizeListener=addDomEvent(window,`resize`,()=>this.scalePositionWithinConstraints()),stopLayoutUpdateListener=projection.addEventListener(`didUpdate`,(({delta,hasLayoutChanged})=>{this.isDragging&&hasLayoutChanged&&(eachAxis(axis=>{let motionValue$1=this.getAxisMotionValue(axis);motionValue$1&&(this.originPoint[axis]+=delta[axis].translate,motionValue$1.set(motionValue$1.get()+delta[axis].translate))}),this.visualElement.render())}));return()=>{stopResizeListener(),stopPointerListener(),stopMeasureLayoutListener(),stopLayoutUpdateListener&&stopLayoutUpdateListener()}}getProps(){let props=this.visualElement.getProps(),{drag:drag$1=!1,dragDirectionLock=!1,dragPropagation=!1,dragConstraints=!1,dragElastic=defaultElastic,dragMomentum=!0}=props;return{...props,drag:drag$1,dragDirectionLock,dragPropagation,dragConstraints,dragElastic,dragMomentum}}};function shouldDrag(direction,drag$1,currentDirection){return(drag$1===!0||drag$1===direction)&&(currentDirection===null||currentDirection===direction)}function getCurrentDirection(offset$1,lockThreshold=10){let direction=null;return Math.abs(offset$1.y)>lockThreshold?direction=`y`:Math.abs(offset$1.x)>lockThreshold&&(direction=`x`),direction}var DragGesture=class extends Feature{constructor(node){super(node),this.removeGroupControls=noop$5,this.removeListeners=noop$5,this.controls=new VisualElementDragControls(node)}mount(){let{dragControls}=this.node.getProps();dragControls&&(this.removeGroupControls=dragControls.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$5}update(){let{dragControls}=this.node.getProps(),{dragControls:prevDragControls}=this.node.prevProps||{};dragControls!==prevDragControls&&(this.removeGroupControls(),dragControls&&(this.removeGroupControls=dragControls.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}},asyncHandler=handler=>(event,info)=>{handler&&frame$1.postRender(()=>handler(event,info))},PanGesture=class extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$5}onPointerDown(pointerDownEvent){this.session=new PanSession(pointerDownEvent,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){let{onPanSessionStart,onPanStart,onPan,onPanEnd}=this.node.getProps();return{onSessionStart:asyncHandler(onPanSessionStart),onStart:asyncHandler(onPanStart),onMove:onPan,onEnd:(event,info)=>{delete this.session,onPanEnd&&frame$1.postRender(()=>onPanEnd(event,info))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,`pointerdown`,event=>this.onPointerDown(event))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}},hasTakenAnySnapshot=!1,MeasureLayoutWithContext=class extends import_react.Component{componentDidMount(){let{visualElement,layoutGroup,switchLayoutGroup,layoutId}=this.props,{projection}=visualElement;projection&&(layoutGroup.group&&layoutGroup.group.add(projection),switchLayoutGroup&&switchLayoutGroup.register&&layoutId&&switchLayoutGroup.register(projection),hasTakenAnySnapshot&&projection.root.didUpdate(),projection.addEventListener(`animationComplete`,()=>{this.safeToRemove()}),projection.setOptions({...projection.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(prevProps){let{layoutDependency,visualElement,drag:drag$1,isPresent}=this.props,{projection}=visualElement;return projection?(projection.isPresent=isPresent,hasTakenAnySnapshot=!0,drag$1||prevProps.layoutDependency!==layoutDependency||layoutDependency===void 0||prevProps.isPresent!==isPresent?projection.willUpdate():this.safeToRemove(),prevProps.isPresent!==isPresent&&(isPresent?projection.promote():projection.relegate()||frame$1.postRender(()=>{let stack=projection.getStack();(!stack||!stack.members.length)&&this.safeToRemove()})),null):null}componentDidUpdate(){let{projection}=this.props.visualElement;projection&&(projection.root.didUpdate(),microtask.postRender(()=>{!projection.currentAnimation&&projection.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement,layoutGroup,switchLayoutGroup:promoteContext}=this.props,{projection}=visualElement;hasTakenAnySnapshot=!0,projection&&(projection.scheduleCheckAfterUnmount(),layoutGroup&&layoutGroup.group&&layoutGroup.group.remove(projection),promoteContext&&promoteContext.deregister&&promoteContext.deregister(projection))}safeToRemove(){let{safeToRemove}=this.props;safeToRemove&&safeToRemove()}render(){return null}};function MeasureLayout(props){let[isPresent,safeToRemove]=usePresence(),layoutGroup=(0,import_react.useContext)(LayoutGroupContext);return(0,import_jsx_runtime.jsx)(MeasureLayoutWithContext,{...props,layoutGroup,switchLayoutGroup:(0,import_react.useContext)(SwitchLayoutGroupContext),isPresent,safeToRemove})}var drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(node,event,lifecycle){let{props}=node;node.animationState&&props.whileHover&&node.animationState.setActive(`whileHover`,lifecycle===`Start`);let callback=props[`onHover`+lifecycle];callback&&frame$1.postRender(()=>callback(event,extractEventInfo(event)))}var HoverGesture=class extends Feature{mount(){let{current}=this.node;current&&(this.unmount=hover(current,(_element,startEvent)=>(handleHoverEvent(this.node,startEvent,`Start`),endEvent=>handleHoverEvent(this.node,endEvent,`End`))))}unmount(){}},FocusGesture=class extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let isFocusVisible=!1;try{isFocusVisible=this.node.current.matches(`:focus-visible`)}catch{isFocusVisible=!0}!isFocusVisible||!this.node.animationState||(this.node.animationState.setActive(`whileFocus`,!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive(`whileFocus`,!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,`focus`,()=>this.onFocus()),addDomEvent(this.node.current,`blur`,()=>this.onBlur()))}unmount(){}};function handlePressEvent(node,event,lifecycle){let{props}=node;if(node.current instanceof HTMLButtonElement&&node.current.disabled)return;node.animationState&&props.whileTap&&node.animationState.setActive(`whileTap`,lifecycle===`Start`);let callback=props[`onTap`+(lifecycle===`End`?``:lifecycle)];callback&&frame$1.postRender(()=>callback(event,extractEventInfo(event)))}var PressGesture=class extends Feature{mount(){let{current}=this.node;current&&(this.unmount=press(current,(_element,startEvent)=>(handlePressEvent(this.node,startEvent,`Start`),(endEvent,{success})=>handlePressEvent(this.node,endEvent,success?`End`:`Cancel`)),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}},observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=entry=>{let callback=observerCallbacks.get(entry.target);callback&&callback(entry)},fireAllObserverCallbacks=entries=>{entries.forEach(fireObserverCallback)};function initIntersectionObserver({root:root$3,...options$1}){let lookupRoot=root$3||document;observers.has(lookupRoot)||observers.set(lookupRoot,{});let rootObservers=observers.get(lookupRoot),key$1=JSON.stringify(options$1);return rootObservers[key$1]||(rootObservers[key$1]=new IntersectionObserver(fireAllObserverCallbacks,{root:root$3,...options$1})),rootObservers[key$1]}function observeIntersection(element,options$1,callback){let rootInteresectionObserver=initIntersectionObserver(options$1);return observerCallbacks.set(element,callback),rootInteresectionObserver.observe(element),()=>{observerCallbacks.delete(element),rootInteresectionObserver.unobserve(element)}}var thresholdNames={some:0,all:1},InViewFeature=class extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport={}}=this.node.getProps(),{root:root$3,margin:rootMargin,amount=`some`,once}=viewport,options$1={root:root$3?root$3.current:void 0,rootMargin,threshold:typeof amount==`number`?amount:thresholdNames[amount]};return observeIntersection(this.node.current,options$1,entry=>{let{isIntersecting}=entry;if(this.isInView===isIntersecting||(this.isInView=isIntersecting,once&&!isIntersecting&&this.hasEnteredView))return;isIntersecting&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive(`whileInView`,isIntersecting);let{onViewportEnter,onViewportLeave}=this.node.getProps(),callback=isIntersecting?onViewportEnter:onViewportLeave;callback&&callback(entry)})}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>`u`)return;let{props,prevProps}=this.node;[`amount`,`margin`,`root`].some(hasViewportOptionChanged(props,prevProps))&&this.startObserver()}unmount(){}};function hasViewportOptionChanged({viewport={}},{viewport:prevViewport={}}={}){return name=>viewport[name]!==prevViewport[name]}var gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);const getDefaultContent=type=>{switch(type){case`heading1`:return{text:` 1`};case`heading2`:return{text:` 2`};case`heading3`:return{text:` 3`};case`text`:return{text:` .`};case`footnote`:return{text:` .`,note:` `};case`bullet-list`:return{items:[`  `,`  `]};case`number-list`:return{items:[` 1`,` 2`]};case`quote`:return{text:` `};case`divider`:return{};case`button`:return{label:``};case`chart-pie`:case`chart-bar`:return{data:[{label:``,value:40},{label:``,value:25},{label:``,value:15},{label:``,value:20}]};case`todo-list`:return{items:[{text:` `,done:!1},{text:``,done:!0}]};case`counter`:return{title:` `,date:new Date(new Date().setDate(new Date().getDate()+7)).toISOString().split(`T`)[0]};case`toggle-list`:return{title:`  `,items:[`  1`,`  2`]};case`columns`:return{layout:[[],[]]};case`accordion`:return{title:`Q.   `,body:`A.     .`};case`callout`:return{type:`info`,title:``,text:`   .`};case`highlight`:return{text:`  .`,color:`#fef08a`};case`spoiler`:return{text:`   .`,isRevealed:!1};case`vertical-text`:return{text:`.`};case`math`:return{text:`\\sqrt{b^2 - 4ac}`,fontSize:20};case`typing-text`:return{text:`!    .`,speed:100,isBackspaceMode:!1};case`scroll-text`:return{text:`  :     .    .`,speed:10};case`chart-radar`:return{data:[{label:``,value:80},{label:``,value:90},{label:``,value:60},{label:``,value:70},{label:``,value:50},{label:``,value:85}],showLabels:!0};case`heatmap`:return{viewMode:`year`};case`rating`:return{value:3,max:5,icon:`star`};case`pdf-viewer`:return{fileUrl:``,fileName:``};case`mindmap`:return{nodes:[{id:`mm-root-${Date.now()}`,type:`mindmap`,position:{x:0,y:0},data:{label:`Main Topic`}}],edges:[],selectedNodeId:null};case`flashcards`:return{title:`Flashcards`,cards:[{id:`fc-${Date.now()}-1`,front:`Front`,back:`Back`}],currentIndex:0,showBack:!1,shuffle:!1};case`book-info`:return{bookData:null};case`progress-bar`:return{value:50,max:100,label:``,style:`bar`};case`unit-converter`:return{category:`length`,value:1,fromUnitIdx:0,toUnitIdx:1,title:` `};case`database`:return{headers:[``,``,``],rows:[[` `,``,``],[` `,``,``]]};case`movie-ticket`:return{movieData:null,watchedDate:new Date().toISOString().split(`T`)[0],review:``,isReviewOpen:!1};default:return{}}},getLabelByType=type=>{switch(type){case`divider`:return``;case`bullet-list`:return` `;case`number-list`:return` `;case`toggle-list`:return` `;case`columns`:return` `;case`accordion`:return``;case`book-info`:return` `;case`progress-bar`:return` `;case`unit-converter`:return` `;case`database`:return``;case`mindmap`:return``;case`flashcards`:return``;case`movie-ticket`:return` `;default:return``}},getSvgPathFromPoints=(points,tension=.5,close=!0)=>{if(!points||points.length<1)return``;let pts=points.map(p$3=>({...p$3}));close&&(pts.unshift(points[points.length-1]),pts.unshift(points[points.length-2]),pts.push(points[0]),pts.push(points[1]));let res=[];res.push(`M ${points[0].x} ${points[0].y}`);let padded=close?[points[points.length-1],...points,points[0],points[1]]:[points[0],...points,points[points.length-1]];for(let i$4=1;i$4<padded.length-2;i$4++){let p0=padded[i$4-1],p1=padded[i$4],p2=padded[i$4+1],p3=padded[i$4+2],cp1x=p1.x+(p2.x-p0.x)/6*tension,cp1y=p1.y+(p2.y-p0.y)/6*tension,cp2x=p2.x-(p3.x-p1.x)/6*tension,cp2y=p2.y-(p3.y-p1.y)/6*tension;res.push(`C ${cp1x} ${cp1y} ${cp2x} ${cp2y} ${p2.x} ${p2.y}`)}return res.join(` `)};function useCombinedRefs(){var refs=[...arguments];return(0,import_react.useMemo)(()=>node=>{refs.forEach(ref=>ref(node))},refs)}var canUseDOM$1=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0;function isWindow(element){let elementString=Object.prototype.toString.call(element);return elementString===`[object Window]`||elementString===`[object global]`}function isNode$1(node){return`nodeType`in node}function getWindow(target){var _target$ownerDocument,_target$ownerDocument2;return target?isWindow(target)?target:isNode$1(target)?target.ownerDocument?.defaultView??window:window:window}function isDocument(node){let{Document}=getWindow(node);return node instanceof Document}function isHTMLElement(node){return isWindow(node)?!1:node instanceof getWindow(node).HTMLElement}function isSVGElement(node){return node instanceof getWindow(node).SVGElement}function getOwnerDocument(target){return target?isWindow(target)?target.document:isNode$1(target)?isDocument(target)?target:isHTMLElement(target)||isSVGElement(target)?target.ownerDocument:document:document:document}var useIsomorphicLayoutEffect$3=canUseDOM$1?import_react.useLayoutEffect:import_react.useEffect;function useEvent(handler){let handlerRef=(0,import_react.useRef)(handler);return useIsomorphicLayoutEffect$3(()=>{handlerRef.current=handler}),(0,import_react.useCallback)(function(){var args=[...arguments];return handlerRef.current==null?void 0:handlerRef.current(...args)},[])}function useInterval(){let intervalRef=(0,import_react.useRef)(null);return[(0,import_react.useCallback)((listener,duration)=>{intervalRef.current=setInterval(listener,duration)},[]),(0,import_react.useCallback)(()=>{intervalRef.current!==null&&(clearInterval(intervalRef.current),intervalRef.current=null)},[])]}function useLatestValue(value,dependencies){dependencies===void 0&&(dependencies=[value]);let valueRef=(0,import_react.useRef)(value);return useIsomorphicLayoutEffect$3(()=>{valueRef.current!==value&&(valueRef.current=value)},dependencies),valueRef}function useLazyMemo(callback,dependencies){let valueRef=(0,import_react.useRef)();return(0,import_react.useMemo)(()=>{let newValue=callback(valueRef.current);return valueRef.current=newValue,newValue},[...dependencies])}function useNodeRef(onChange){let onChangeHandler=useEvent(onChange),node=(0,import_react.useRef)(null);return[node,(0,import_react.useCallback)(element=>{element!==node.current&&onChangeHandler?.(element,node.current),node.current=element},[])]}function usePrevious$1(value){let ref=(0,import_react.useRef)();return(0,import_react.useEffect)(()=>{ref.current=value},[value]),ref.current}var ids={};function useUniqueId$1(prefix$4,value){return(0,import_react.useMemo)(()=>{if(value)return value;let id$3=ids[prefix$4]==null?0:ids[prefix$4]+1;return ids[prefix$4]=id$3,prefix$4+`-`+id$3},[prefix$4,value])}function createAdjustmentFn(modifier){return function(object){return[...arguments].slice(1).reduce((accumulator,adjustment)=>{let entries=Object.entries(adjustment);for(let[key$1,valueAdjustment]of entries){let value=accumulator[key$1];value!=null&&(accumulator[key$1]=value+modifier*valueAdjustment)}return accumulator},{...object})}}var add$1=createAdjustmentFn(1),subtract$1=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(event){return`clientX`in event&&`clientY`in event}function isKeyboardEvent(event){if(!event)return!1;let{KeyboardEvent}=getWindow(event.target);return KeyboardEvent&&event instanceof KeyboardEvent}function isTouchEvent$2(event){if(!event)return!1;let{TouchEvent}=getWindow(event.target);return TouchEvent&&event instanceof TouchEvent}function getEventCoordinates(event){if(isTouchEvent$2(event)){if(event.touches&&event.touches.length){let{clientX:x$2,clientY:y$2}=event.touches[0];return{x:x$2,y:y$2}}else if(event.changedTouches&&event.changedTouches.length){let{clientX:x$2,clientY:y$2}=event.changedTouches[0];return{x:x$2,y:y$2}}}return hasViewportRelativeCoordinates(event)?{x:event.clientX,y:event.clientY}:null}var CSS$1=Object.freeze({Translate:{toString(transform$1){if(!transform$1)return;let{x:x$2,y:y$2}=transform$1;return`translate3d(`+(x$2?Math.round(x$2):0)+`px, `+(y$2?Math.round(y$2):0)+`px, 0)`}},Scale:{toString(transform$1){if(!transform$1)return;let{scaleX:scaleX$1,scaleY:scaleY$1}=transform$1;return`scaleX(`+scaleX$1+`) scaleY(`+scaleY$1+`)`}},Transform:{toString(transform$1){if(transform$1)return[CSS$1.Translate.toString(transform$1),CSS$1.Scale.toString(transform$1)].join(` `)}},Transition:{toString(_ref){let{property,duration,easing}=_ref;return property+` `+duration+`ms `+easing}}}),SELECTOR=`a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]`;function findFirstFocusableNode(element){return element.matches(SELECTOR)?element:element.querySelector(SELECTOR)}var hiddenStyles={display:`none`};function HiddenText(_ref){let{id:id$3,value}=_ref;return import_react.createElement(`div`,{id:id$3,style:hiddenStyles},value)}function LiveRegion(_ref){let{id:id$3,announcement,ariaLiveType=`assertive`}=_ref;return import_react.createElement(`div`,{id:id$3,style:{position:`fixed`,top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:`hidden`,clip:`rect(0 0 0 0)`,clipPath:`inset(100%)`,whiteSpace:`nowrap`},role:`status`,"aria-live":ariaLiveType,"aria-atomic":!0},announcement)}function useAnnouncement(){let[announcement,setAnnouncement]=(0,import_react.useState)(``);return{announce:(0,import_react.useCallback)(value=>{value!=null&&setAnnouncement(value)},[]),announcement}}var import_react_dom$4=require_react_dom(),DndMonitorContext=(0,import_react.createContext)(null);function useDndMonitor(listener){let registerListener=(0,import_react.useContext)(DndMonitorContext);(0,import_react.useEffect)(()=>{if(!registerListener)throw Error(`useDndMonitor must be used within a children of <DndContext>`);return registerListener(listener)},[listener,registerListener])}function useDndMonitorProvider(){let[listeners]=(0,import_react.useState)(()=>new Set),registerListener=(0,import_react.useCallback)(listener=>(listeners.add(listener),()=>listeners.delete(listener)),[listeners]);return[(0,import_react.useCallback)(_ref=>{let{type,event}=_ref;listeners.forEach(listener=>{var _listener$type;return listener[type]?.call(listener,event)})},[listeners]),registerListener]}var defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(_ref){let{active}=_ref;return`Picked up draggable item `+active.id+`.`},onDragOver(_ref2){let{active,over}=_ref2;return over?`Draggable item `+active.id+` was moved over droppable area `+over.id+`.`:`Draggable item `+active.id+` is no longer over a droppable area.`},onDragEnd(_ref3){let{active,over}=_ref3;return over?`Draggable item `+active.id+` was dropped over droppable area `+over.id:`Draggable item `+active.id+` was dropped.`},onDragCancel(_ref4){let{active}=_ref4;return`Dragging was cancelled. Draggable item `+active.id+` was dropped.`}};function Accessibility(_ref){let{announcements=defaultAnnouncements,container,hiddenTextDescribedById,screenReaderInstructions=defaultScreenReaderInstructions}=_ref,{announce,announcement}=useAnnouncement(),liveRegionId=useUniqueId$1(`DndLiveRegion`),[mounted,setMounted]=(0,import_react.useState)(!1);if((0,import_react.useEffect)(()=>{setMounted(!0)},[]),useDndMonitor((0,import_react.useMemo)(()=>({onDragStart(_ref2){let{active}=_ref2;announce(announcements.onDragStart({active}))},onDragMove(_ref3){let{active,over}=_ref3;announcements.onDragMove&&announce(announcements.onDragMove({active,over}))},onDragOver(_ref4){let{active,over}=_ref4;announce(announcements.onDragOver({active,over}))},onDragEnd(_ref5){let{active,over}=_ref5;announce(announcements.onDragEnd({active,over}))},onDragCancel(_ref6){let{active,over}=_ref6;announce(announcements.onDragCancel({active,over}))}}),[announce,announcements])),!mounted)return null;let markup=import_react.createElement(import_react.Fragment,null,import_react.createElement(HiddenText,{id:hiddenTextDescribedById,value:screenReaderInstructions.draggable}),import_react.createElement(LiveRegion,{id:liveRegionId,announcement}));return container?(0,import_react_dom$4.createPortal)(markup,container):markup}var Action;(function(Action$1){Action$1.DragStart=`dragStart`,Action$1.DragMove=`dragMove`,Action$1.DragEnd=`dragEnd`,Action$1.DragCancel=`dragCancel`,Action$1.DragOver=`dragOver`,Action$1.RegisterDroppable=`registerDroppable`,Action$1.SetDroppableDisabled=`setDroppableDisabled`,Action$1.UnregisterDroppable=`unregisterDroppable`})(Action||={});function noop$4(){}function useSensor(sensor,options$1){return(0,import_react.useMemo)(()=>({sensor,options:options$1??{}}),[sensor,options$1])}function useSensors(){var sensors=[...arguments];return(0,import_react.useMemo)(()=>[...sensors].filter(sensor=>sensor!=null),[...sensors])}var defaultCoordinates=Object.freeze({x:0,y:0});function distanceBetween(p1,p2){return Math.sqrt((p1.x-p2.x)**2+(p1.y-p2.y)**2)}function getRelativeTransformOrigin(event,rect){let eventCoordinates=getEventCoordinates(event);if(!eventCoordinates)return`0 0`;let transformOrigin={x:(eventCoordinates.x-rect.left)/rect.width*100,y:(eventCoordinates.y-rect.top)/rect.height*100};return transformOrigin.x+`% `+transformOrigin.y+`%`}function sortCollisionsAsc(_ref,_ref2){let{data:{value:a$4}}=_ref,{data:{value:b$3}}=_ref2;return a$4-b$3}function sortCollisionsDesc(_ref3,_ref4){let{data:{value:a$4}}=_ref3,{data:{value:b$3}}=_ref4;return b$3-a$4}function cornersOfRectangle(_ref5){let{left,top,height,width}=_ref5;return[{x:left,y:top},{x:left+width,y:top},{x:left,y:top+height},{x:left+width,y:top+height}]}function getFirstCollision(collisions,property){if(!collisions||collisions.length===0)return null;let[firstCollision]=collisions;return property?firstCollision[property]:firstCollision}function getIntersectionRatio(entry,target){let top=Math.max(target.top,entry.top),left=Math.max(target.left,entry.left),right=Math.min(target.left+target.width,entry.left+entry.width),bottom=Math.min(target.top+target.height,entry.top+entry.height),width=right-left,height=bottom-top;if(left<right&&top<bottom){let targetArea=target.width*target.height,entryArea=entry.width*entry.height,intersectionArea=width*height,intersectionRatio=intersectionArea/(targetArea+entryArea-intersectionArea);return Number(intersectionRatio.toFixed(4))}return 0}var rectIntersection=_ref=>{let{collisionRect,droppableRects,droppableContainers}=_ref,collisions=[];for(let droppableContainer of droppableContainers){let{id:id$3}=droppableContainer,rect=droppableRects.get(id$3);if(rect){let intersectionRatio=getIntersectionRatio(rect,collisionRect);intersectionRatio>0&&collisions.push({id:id$3,data:{droppableContainer,value:intersectionRatio}})}}return collisions.sort(sortCollisionsDesc)};function isPointWithinRect(point,rect){let{top,left,bottom,right}=rect;return top<=point.y&&point.y<=bottom&&left<=point.x&&point.x<=right}var pointerWithin=_ref=>{let{droppableContainers,droppableRects,pointerCoordinates}=_ref;if(!pointerCoordinates)return[];let collisions=[];for(let droppableContainer of droppableContainers){let{id:id$3}=droppableContainer,rect=droppableRects.get(id$3);if(rect&&isPointWithinRect(pointerCoordinates,rect)){let distances=cornersOfRectangle(rect).reduce((accumulator,corner)=>accumulator+distanceBetween(pointerCoordinates,corner),0),effectiveDistance=Number((distances/4).toFixed(4));collisions.push({id:id$3,data:{droppableContainer,value:effectiveDistance}})}}return collisions.sort(sortCollisionsAsc)};function adjustScale(transform$1,rect1,rect2){return{...transform$1,scaleX:rect1&&rect2?rect1.width/rect2.width:1,scaleY:rect1&&rect2?rect1.height/rect2.height:1}}function getRectDelta(rect1,rect2){return rect1&&rect2?{x:rect1.left-rect2.left,y:rect1.top-rect2.top}:defaultCoordinates}function createRectAdjustmentFn(modifier){return function(rect){return[...arguments].slice(1).reduce((acc,adjustment)=>({...acc,top:acc.top+modifier*adjustment.y,bottom:acc.bottom+modifier*adjustment.y,left:acc.left+modifier*adjustment.x,right:acc.right+modifier*adjustment.x}),{...rect})}}var getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(transform$1){if(transform$1.startsWith(`matrix3d(`)){let transformArray=transform$1.slice(9,-1).split(/, /);return{x:+transformArray[12],y:+transformArray[13],scaleX:+transformArray[0],scaleY:+transformArray[5]}}else if(transform$1.startsWith(`matrix(`)){let transformArray=transform$1.slice(7,-1).split(/, /);return{x:+transformArray[4],y:+transformArray[5],scaleX:+transformArray[0],scaleY:+transformArray[3]}}return null}function inverseTransform(rect,transform$1,transformOrigin){let parsedTransform=parseTransform(transform$1);if(!parsedTransform)return rect;let{scaleX:scaleX$1,scaleY:scaleY$1,x:translateX,y:translateY}=parsedTransform,x$2=rect.left-translateX-(1-scaleX$1)*parseFloat(transformOrigin),y$2=rect.top-translateY-(1-scaleY$1)*parseFloat(transformOrigin.slice(transformOrigin.indexOf(` `)+1)),w$1=scaleX$1?rect.width/scaleX$1:rect.width,h$3=scaleY$1?rect.height/scaleY$1:rect.height;return{width:w$1,height:h$3,top:y$2,right:x$2+w$1,bottom:y$2+h$3,left:x$2}}var defaultOptions$1={ignoreTransform:!1};function getClientRect(element,options$1){options$1===void 0&&(options$1=defaultOptions$1);let rect=element.getBoundingClientRect();if(options$1.ignoreTransform){let{transform:transform$1,transformOrigin}=getWindow(element).getComputedStyle(element);transform$1&&(rect=inverseTransform(rect,transform$1,transformOrigin))}let{top,left,width,height,bottom,right}=rect;return{top,left,width,height,bottom,right}}function getTransformAgnosticClientRect(element){return getClientRect(element,{ignoreTransform:!0})}function getWindowClientRect(element){let width=element.innerWidth,height=element.innerHeight;return{top:0,left:0,right:width,bottom:height,width,height}}function isFixed(node,computedStyle){return computedStyle===void 0&&(computedStyle=getWindow(node).getComputedStyle(node)),computedStyle.position===`fixed`}function isScrollable(element,computedStyle){computedStyle===void 0&&(computedStyle=getWindow(element).getComputedStyle(element));let overflowRegex=/(auto|scroll|overlay)/;return[`overflow`,`overflowX`,`overflowY`].some(property=>{let value=computedStyle[property];return typeof value==`string`?overflowRegex.test(value):!1})}function getScrollableAncestors(element,limit){let scrollParents=[];function findScrollableAncestors(node){if(limit!=null&&scrollParents.length>=limit||!node)return scrollParents;if(isDocument(node)&&node.scrollingElement!=null&&!scrollParents.includes(node.scrollingElement))return scrollParents.push(node.scrollingElement),scrollParents;if(!isHTMLElement(node)||isSVGElement(node)||scrollParents.includes(node))return scrollParents;let computedStyle=getWindow(element).getComputedStyle(node);return node!==element&&isScrollable(node,computedStyle)&&scrollParents.push(node),isFixed(node,computedStyle)?scrollParents:findScrollableAncestors(node.parentNode)}return element?findScrollableAncestors(element):scrollParents}function getFirstScrollableAncestor(node){let[firstScrollableAncestor]=getScrollableAncestors(node,1);return firstScrollableAncestor??null}function getScrollableElement(element){return!canUseDOM$1||!element?null:isWindow(element)?element:isNode$1(element)?isDocument(element)||element===getOwnerDocument(element).scrollingElement?window:isHTMLElement(element)?element:null:null}function getScrollXCoordinate(element){return isWindow(element)?element.scrollX:element.scrollLeft}function getScrollYCoordinate(element){return isWindow(element)?element.scrollY:element.scrollTop}function getScrollCoordinates(element){return{x:getScrollXCoordinate(element),y:getScrollYCoordinate(element)}}var Direction;(function(Direction$1){Direction$1[Direction$1.Forward=1]=`Forward`,Direction$1[Direction$1.Backward=-1]=`Backward`})(Direction||={});function isDocumentScrollingElement(element){return!canUseDOM$1||!element?!1:element===document.scrollingElement}function getScrollPosition(scrollingContainer){let minScroll$1={x:0,y:0},dimensions=isDocumentScrollingElement(scrollingContainer)?{height:window.innerHeight,width:window.innerWidth}:{height:scrollingContainer.clientHeight,width:scrollingContainer.clientWidth},maxScroll={x:scrollingContainer.scrollWidth-dimensions.width,y:scrollingContainer.scrollHeight-dimensions.height};return{isTop:scrollingContainer.scrollTop<=minScroll$1.y,isLeft:scrollingContainer.scrollLeft<=minScroll$1.x,isBottom:scrollingContainer.scrollTop>=maxScroll.y,isRight:scrollingContainer.scrollLeft>=maxScroll.x,maxScroll,minScroll:minScroll$1}}var defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(scrollContainer$1,scrollContainerRect,_ref,acceleration,thresholdPercentage){let{top,left,right,bottom}=_ref;acceleration===void 0&&(acceleration=10),thresholdPercentage===void 0&&(thresholdPercentage=defaultThreshold);let{isTop,isBottom,isLeft,isRight}=getScrollPosition(scrollContainer$1),direction={x:0,y:0},speed={x:0,y:0},threshold={height:scrollContainerRect.height*thresholdPercentage.y,width:scrollContainerRect.width*thresholdPercentage.x};return!isTop&&top<=scrollContainerRect.top+threshold.height?(direction.y=Direction.Backward,speed.y=acceleration*Math.abs((scrollContainerRect.top+threshold.height-top)/threshold.height)):!isBottom&&bottom>=scrollContainerRect.bottom-threshold.height&&(direction.y=Direction.Forward,speed.y=acceleration*Math.abs((scrollContainerRect.bottom-threshold.height-bottom)/threshold.height)),!isRight&&right>=scrollContainerRect.right-threshold.width?(direction.x=Direction.Forward,speed.x=acceleration*Math.abs((scrollContainerRect.right-threshold.width-right)/threshold.width)):!isLeft&&left<=scrollContainerRect.left+threshold.width&&(direction.x=Direction.Backward,speed.x=acceleration*Math.abs((scrollContainerRect.left+threshold.width-left)/threshold.width)),{direction,speed}}function getScrollElementRect(element){if(element===document.scrollingElement){let{innerWidth,innerHeight}=window;return{top:0,left:0,right:innerWidth,bottom:innerHeight,width:innerWidth,height:innerHeight}}let{top,left,right,bottom}=element.getBoundingClientRect();return{top,left,right,bottom,width:element.clientWidth,height:element.clientHeight}}function getScrollOffsets(scrollableAncestors){return scrollableAncestors.reduce((acc,node)=>add$1(acc,getScrollCoordinates(node)),defaultCoordinates)}function getScrollXOffset(scrollableAncestors){return scrollableAncestors.reduce((acc,node)=>acc+getScrollXCoordinate(node),0)}function getScrollYOffset(scrollableAncestors){return scrollableAncestors.reduce((acc,node)=>acc+getScrollYCoordinate(node),0)}function scrollIntoViewIfNeeded(element,measure){if(measure===void 0&&(measure=getClientRect),!element)return;let{top,left,bottom,right}=measure(element);getFirstScrollableAncestor(element)&&(bottom<=0||right<=0||top>=window.innerHeight||left>=window.innerWidth)&&element.scrollIntoView({block:`center`,inline:`center`})}var properties$1=[[`x`,[`left`,`right`],getScrollXOffset],[`y`,[`top`,`bottom`],getScrollYOffset]],Rect=class{constructor(rect,element){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let scrollableAncestors=getScrollableAncestors(element),scrollOffsets=getScrollOffsets(scrollableAncestors);this.rect={...rect},this.width=rect.width,this.height=rect.height;for(let[axis,keys,getScrollOffset]of properties$1)for(let key$1 of keys)Object.defineProperty(this,key$1,{get:()=>{let currentOffsets=getScrollOffset(scrollableAncestors),scrollOffsetsDeltla=scrollOffsets[axis]-currentOffsets;return this.rect[key$1]+scrollOffsetsDeltla},enumerable:!0});Object.defineProperty(this,`rect`,{enumerable:!1})}},Listeners=class{constructor(target){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(listener=>{var _this$target;return this.target?.removeEventListener(...listener)})},this.target=target}add(eventName,handler,options$1){var _this$target2;(_this$target2=this.target)==null||_this$target2.addEventListener(eventName,handler,options$1),this.listeners.push([eventName,handler,options$1])}};function getEventListenerTarget(target){let{EventTarget:EventTarget$1}=getWindow(target);return target instanceof EventTarget$1?target:getOwnerDocument(target)}function hasExceededDistance(delta,measurement){let dx=Math.abs(delta.x),dy=Math.abs(delta.y);return typeof measurement==`number`?Math.sqrt(dx**2+dy**2)>measurement:`x`in measurement&&`y`in measurement?dx>measurement.x&&dy>measurement.y:`x`in measurement?dx>measurement.x:`y`in measurement?dy>measurement.y:!1}var EventName;(function(EventName$1){EventName$1.Click=`click`,EventName$1.DragStart=`dragstart`,EventName$1.Keydown=`keydown`,EventName$1.ContextMenu=`contextmenu`,EventName$1.Resize=`resize`,EventName$1.SelectionChange=`selectionchange`,EventName$1.VisibilityChange=`visibilitychange`})(EventName||={});function preventDefault$1(event){event.preventDefault()}function stopPropagation(event){event.stopPropagation()}var KeyboardCode;(function(KeyboardCode$1){KeyboardCode$1.Space=`Space`,KeyboardCode$1.Down=`ArrowDown`,KeyboardCode$1.Right=`ArrowRight`,KeyboardCode$1.Left=`ArrowLeft`,KeyboardCode$1.Up=`ArrowUp`,KeyboardCode$1.Esc=`Escape`,KeyboardCode$1.Enter=`Enter`,KeyboardCode$1.Tab=`Tab`})(KeyboardCode||={});var defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter,KeyboardCode.Tab]},defaultKeyboardCoordinateGetter=(event,_ref)=>{let{currentCoordinates}=_ref;switch(event.code){case KeyboardCode.Right:return{...currentCoordinates,x:currentCoordinates.x+25};case KeyboardCode.Left:return{...currentCoordinates,x:currentCoordinates.x-25};case KeyboardCode.Down:return{...currentCoordinates,y:currentCoordinates.y+25};case KeyboardCode.Up:return{...currentCoordinates,y:currentCoordinates.y-25}}},KeyboardSensor=class{constructor(props){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=props;let{event:{target}}=props;this.props=props,this.listeners=new Listeners(getOwnerDocument(target)),this.windowListeners=new Listeners(getWindow(target)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){let{activeNode,onStart}=this.props,node=activeNode.node.current;node&&scrollIntoViewIfNeeded(node),onStart(defaultCoordinates)}handleKeyDown(event){if(isKeyboardEvent(event)){let{active,context,options:options$1}=this.props,{keyboardCodes=defaultKeyboardCodes,coordinateGetter=defaultKeyboardCoordinateGetter,scrollBehavior=`smooth`}=options$1,{code}=event;if(keyboardCodes.end.includes(code)){this.handleEnd(event);return}if(keyboardCodes.cancel.includes(code)){this.handleCancel(event);return}let{collisionRect}=context.current,currentCoordinates=collisionRect?{x:collisionRect.left,y:collisionRect.top}:defaultCoordinates;this.referenceCoordinates||=currentCoordinates;let newCoordinates=coordinateGetter(event,{active,context:context.current,currentCoordinates});if(newCoordinates){let coordinatesDelta=subtract$1(newCoordinates,currentCoordinates),scrollDelta={x:0,y:0},{scrollableAncestors}=context.current;for(let scrollContainer$1 of scrollableAncestors){let direction=event.code,{isTop,isRight,isLeft,isBottom,maxScroll,minScroll:minScroll$1}=getScrollPosition(scrollContainer$1),scrollElementRect=getScrollElementRect(scrollContainer$1),clampedCoordinates={x:Math.min(direction===KeyboardCode.Right?scrollElementRect.right-scrollElementRect.width/2:scrollElementRect.right,Math.max(direction===KeyboardCode.Right?scrollElementRect.left:scrollElementRect.left+scrollElementRect.width/2,newCoordinates.x)),y:Math.min(direction===KeyboardCode.Down?scrollElementRect.bottom-scrollElementRect.height/2:scrollElementRect.bottom,Math.max(direction===KeyboardCode.Down?scrollElementRect.top:scrollElementRect.top+scrollElementRect.height/2,newCoordinates.y))},canScrollX=direction===KeyboardCode.Right&&!isRight||direction===KeyboardCode.Left&&!isLeft,canScrollY=direction===KeyboardCode.Down&&!isBottom||direction===KeyboardCode.Up&&!isTop;if(canScrollX&&clampedCoordinates.x!==newCoordinates.x){let newScrollCoordinates=scrollContainer$1.scrollLeft+coordinatesDelta.x,canScrollToNewCoordinates=direction===KeyboardCode.Right&&newScrollCoordinates<=maxScroll.x||direction===KeyboardCode.Left&&newScrollCoordinates>=minScroll$1.x;if(canScrollToNewCoordinates&&!coordinatesDelta.y){scrollContainer$1.scrollTo({left:newScrollCoordinates,behavior:scrollBehavior});return}canScrollToNewCoordinates?scrollDelta.x=scrollContainer$1.scrollLeft-newScrollCoordinates:scrollDelta.x=direction===KeyboardCode.Right?scrollContainer$1.scrollLeft-maxScroll.x:scrollContainer$1.scrollLeft-minScroll$1.x,scrollDelta.x&&scrollContainer$1.scrollBy({left:-scrollDelta.x,behavior:scrollBehavior});break}else if(canScrollY&&clampedCoordinates.y!==newCoordinates.y){let newScrollCoordinates=scrollContainer$1.scrollTop+coordinatesDelta.y,canScrollToNewCoordinates=direction===KeyboardCode.Down&&newScrollCoordinates<=maxScroll.y||direction===KeyboardCode.Up&&newScrollCoordinates>=minScroll$1.y;if(canScrollToNewCoordinates&&!coordinatesDelta.x){scrollContainer$1.scrollTo({top:newScrollCoordinates,behavior:scrollBehavior});return}canScrollToNewCoordinates?scrollDelta.y=scrollContainer$1.scrollTop-newScrollCoordinates:scrollDelta.y=direction===KeyboardCode.Down?scrollContainer$1.scrollTop-maxScroll.y:scrollContainer$1.scrollTop-minScroll$1.y,scrollDelta.y&&scrollContainer$1.scrollBy({top:-scrollDelta.y,behavior:scrollBehavior});break}}this.handleMove(event,add$1(subtract$1(newCoordinates,this.referenceCoordinates),scrollDelta))}}}handleMove(event,coordinates){let{onMove}=this.props;event.preventDefault(),onMove(coordinates)}handleEnd(event){let{onEnd}=this.props;event.preventDefault(),this.detach(),onEnd()}handleCancel(event){let{onCancel}=this.props;event.preventDefault(),this.detach(),onCancel()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};KeyboardSensor.activators=[{eventName:`onKeyDown`,handler:(event,_ref,_ref2)=>{let{keyboardCodes=defaultKeyboardCodes,onActivation}=_ref,{active}=_ref2,{code}=event.nativeEvent;if(keyboardCodes.start.includes(code)){let activator=active.activatorNode.current;return activator&&event.target!==activator?!1:(event.preventDefault(),onActivation?.({event:event.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(constraint){return!!(constraint&&`distance`in constraint)}function isDelayConstraint(constraint){return!!(constraint&&`delay`in constraint)}var AbstractPointerSensor=class{constructor(props,events$3,listenerTarget){var _getEventCoordinates;listenerTarget===void 0&&(listenerTarget=getEventListenerTarget(props.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=props,this.events=events$3;let{event}=props,{target}=event;this.props=props,this.events=events$3,this.document=getOwnerDocument(target),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(listenerTarget),this.windowListeners=new Listeners(getWindow(target)),this.initialCoordinates=getEventCoordinates(event)??defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:events$3,props:{options:{activationConstraint,bypassActivationConstraint}}}=this;if(this.listeners.add(events$3.move.name,this.handleMove,{passive:!1}),this.listeners.add(events$3.end.name,this.handleEnd),events$3.cancel&&this.listeners.add(events$3.cancel.name,this.handleCancel),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault$1),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault$1),this.documentListeners.add(EventName.Keydown,this.handleKeydown),activationConstraint){if(bypassActivationConstraint!=null&&bypassActivationConstraint({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(activationConstraint)){this.timeoutId=setTimeout(this.handleStart,activationConstraint.delay),this.handlePending(activationConstraint);return}if(isDistanceConstraint(activationConstraint)){this.handlePending(activationConstraint);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(constraint,offset$1){let{active,onPending}=this.props;onPending(active,constraint,this.initialCoordinates,offset$1)}handleStart(){let{initialCoordinates}=this,{onStart}=this.props;initialCoordinates&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),onStart(initialCoordinates))}handleMove(event){var _getEventCoordinates2;let{activated,initialCoordinates,props}=this,{onMove,options:{activationConstraint}}=props;if(!initialCoordinates)return;let coordinates=getEventCoordinates(event)??defaultCoordinates,delta=subtract$1(initialCoordinates,coordinates);if(!activated&&activationConstraint){if(isDistanceConstraint(activationConstraint)){if(activationConstraint.tolerance!=null&&hasExceededDistance(delta,activationConstraint.tolerance))return this.handleCancel();if(hasExceededDistance(delta,activationConstraint.distance))return this.handleStart()}if(isDelayConstraint(activationConstraint)&&hasExceededDistance(delta,activationConstraint.tolerance))return this.handleCancel();this.handlePending(activationConstraint,delta);return}event.cancelable&&event.preventDefault(),onMove(coordinates)}handleEnd(){let{onAbort,onEnd}=this.props;this.detach(),this.activated||onAbort(this.props.active),onEnd()}handleCancel(){let{onAbort,onCancel}=this.props;this.detach(),this.activated||onAbort(this.props.active),onCancel()}handleKeydown(event){event.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var _this$document$getSel;(_this$document$getSel=this.document.getSelection())==null||_this$document$getSel.removeAllRanges()}},events={cancel:{name:`pointercancel`},move:{name:`pointermove`},end:{name:`pointerup`}},PointerSensor=class extends AbstractPointerSensor{constructor(props){let{event}=props,listenerTarget=getOwnerDocument(event.target);super(props,events,listenerTarget)}};PointerSensor.activators=[{eventName:`onPointerDown`,handler:(_ref,_ref2)=>{let{nativeEvent:event}=_ref,{onActivation}=_ref2;return!event.isPrimary||event.button!==0?!1:(onActivation?.({event}),!0)}}];var events$1={move:{name:`mousemove`},end:{name:`mouseup`}},MouseButton$1;(function(MouseButton$2){MouseButton$2[MouseButton$2.RightClick=2]=`RightClick`})(MouseButton$1||={});var MouseSensor=class extends AbstractPointerSensor{constructor(props){super(props,events$1,getOwnerDocument(props.event.target))}};MouseSensor.activators=[{eventName:`onMouseDown`,handler:(_ref,_ref2)=>{let{nativeEvent:event}=_ref,{onActivation}=_ref2;return event.button===MouseButton$1.RightClick?!1:(onActivation?.({event}),!0)}}];var events$2={cancel:{name:`touchcancel`},move:{name:`touchmove`},end:{name:`touchend`}},TouchSensor=class extends AbstractPointerSensor{constructor(props){super(props,events$2)}static setup(){return window.addEventListener(events$2.move.name,noop$10,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,noop$10)};function noop$10(){}}};TouchSensor.activators=[{eventName:`onTouchStart`,handler:(_ref,_ref2)=>{let{nativeEvent:event}=_ref,{onActivation}=_ref2,{touches}=event;return touches.length>1?!1:(onActivation?.({event}),!0)}}];var AutoScrollActivator;(function(AutoScrollActivator$1){AutoScrollActivator$1[AutoScrollActivator$1.Pointer=0]=`Pointer`,AutoScrollActivator$1[AutoScrollActivator$1.DraggableRect=1]=`DraggableRect`})(AutoScrollActivator||={});var TraversalOrder;(function(TraversalOrder$1){TraversalOrder$1[TraversalOrder$1.TreeOrder=0]=`TreeOrder`,TraversalOrder$1[TraversalOrder$1.ReversedTreeOrder=1]=`ReversedTreeOrder`})(TraversalOrder||={});function useAutoScroller(_ref){let{acceleration,activator=AutoScrollActivator.Pointer,canScroll,draggingRect,enabled,interval:interval$1=5,order=TraversalOrder.TreeOrder,pointerCoordinates,scrollableAncestors,scrollableAncestorRects,delta,threshold}=_ref,scrollIntent=useScrollIntent({delta,disabled:!enabled}),[setAutoScrollInterval,clearAutoScrollInterval]=useInterval(),scrollSpeed=(0,import_react.useRef)({x:0,y:0}),scrollDirection=(0,import_react.useRef)({x:0,y:0}),rect=(0,import_react.useMemo)(()=>{switch(activator){case AutoScrollActivator.Pointer:return pointerCoordinates?{top:pointerCoordinates.y,bottom:pointerCoordinates.y,left:pointerCoordinates.x,right:pointerCoordinates.x}:null;case AutoScrollActivator.DraggableRect:return draggingRect}},[activator,draggingRect,pointerCoordinates]),scrollContainerRef=(0,import_react.useRef)(null),autoScroll$1=(0,import_react.useCallback)(()=>{let scrollContainer$1=scrollContainerRef.current;if(!scrollContainer$1)return;let scrollLeft=scrollSpeed.current.x*scrollDirection.current.x,scrollTop=scrollSpeed.current.y*scrollDirection.current.y;scrollContainer$1.scrollBy(scrollLeft,scrollTop)},[]),sortedScrollableAncestors=(0,import_react.useMemo)(()=>order===TraversalOrder.TreeOrder?[...scrollableAncestors].reverse():scrollableAncestors,[order,scrollableAncestors]);(0,import_react.useEffect)(()=>{if(!enabled||!scrollableAncestors.length||!rect){clearAutoScrollInterval();return}for(let scrollContainer$1 of sortedScrollableAncestors){if(canScroll?.(scrollContainer$1)===!1)continue;let scrollContainerRect=scrollableAncestorRects[scrollableAncestors.indexOf(scrollContainer$1)];if(!scrollContainerRect)continue;let{direction,speed}=getScrollDirectionAndSpeed(scrollContainer$1,scrollContainerRect,rect,acceleration,threshold);for(let axis of[`x`,`y`])scrollIntent[axis][direction[axis]]||(speed[axis]=0,direction[axis]=0);if(speed.x>0||speed.y>0){clearAutoScrollInterval(),scrollContainerRef.current=scrollContainer$1,setAutoScrollInterval(autoScroll$1,interval$1),scrollSpeed.current=speed,scrollDirection.current=direction;return}}scrollSpeed.current={x:0,y:0},scrollDirection.current={x:0,y:0},clearAutoScrollInterval()},[acceleration,autoScroll$1,canScroll,clearAutoScrollInterval,enabled,interval$1,JSON.stringify(rect),JSON.stringify(scrollIntent),setAutoScrollInterval,scrollableAncestors,sortedScrollableAncestors,scrollableAncestorRects,JSON.stringify(threshold)])}var defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(_ref2){let{delta,disabled}=_ref2,previousDelta=usePrevious$1(delta);return useLazyMemo(previousIntent=>{if(disabled||!previousDelta||!previousIntent)return defaultScrollIntent;let direction={x:Math.sign(delta.x-previousDelta.x),y:Math.sign(delta.y-previousDelta.y)};return{x:{[Direction.Backward]:previousIntent.x[Direction.Backward]||direction.x===-1,[Direction.Forward]:previousIntent.x[Direction.Forward]||direction.x===1},y:{[Direction.Backward]:previousIntent.y[Direction.Backward]||direction.y===-1,[Direction.Forward]:previousIntent.y[Direction.Forward]||direction.y===1}}},[disabled,delta,previousDelta])}function useCachedNode(draggableNodes,id$3){let draggableNode=id$3==null?void 0:draggableNodes.get(id$3),node=draggableNode?draggableNode.node.current:null;return useLazyMemo(cachedNode=>{var _ref;return id$3==null?null:node??cachedNode??null},[node,id$3])}function useCombineActivators(sensors,getSyntheticHandler){return(0,import_react.useMemo)(()=>sensors.reduce((accumulator,sensor)=>{let{sensor:Sensor}=sensor,sensorActivators=Sensor.activators.map(activator=>({eventName:activator.eventName,handler:getSyntheticHandler(activator.handler,sensor)}));return[...accumulator,...sensorActivators]},[]),[sensors,getSyntheticHandler])}var MeasuringStrategy;(function(MeasuringStrategy$1){MeasuringStrategy$1[MeasuringStrategy$1.Always=0]=`Always`,MeasuringStrategy$1[MeasuringStrategy$1.BeforeDragging=1]=`BeforeDragging`,MeasuringStrategy$1[MeasuringStrategy$1.WhileDragging=2]=`WhileDragging`})(MeasuringStrategy||={});var MeasuringFrequency;(function(MeasuringFrequency$1){MeasuringFrequency$1.Optimized=`optimized`})(MeasuringFrequency||={});var defaultValue=new Map;function useDroppableMeasuring(containers,_ref){let{dragging,dependencies,config}=_ref,[queue,setQueue]=(0,import_react.useState)(null),{frequency,measure,strategy}=config,containersRef=(0,import_react.useRef)(containers),disabled=isDisabled(),disabledRef=useLatestValue(disabled),measureDroppableContainers=(0,import_react.useCallback)(function(ids$1){ids$1===void 0&&(ids$1=[]),!disabledRef.current&&setQueue(value=>value===null?ids$1:value.concat(ids$1.filter(id$3=>!value.includes(id$3))))},[disabledRef]),timeoutId=(0,import_react.useRef)(null),droppableRects=useLazyMemo(previousValue=>{if(disabled&&!dragging)return defaultValue;if(!previousValue||previousValue===defaultValue||containersRef.current!==containers||queue!=null){let map=new Map;for(let container of containers){if(!container)continue;if(queue&&queue.length>0&&!queue.includes(container.id)&&container.rect.current){map.set(container.id,container.rect.current);continue}let node=container.node.current,rect=node?new Rect(measure(node),node):null;container.rect.current=rect,rect&&map.set(container.id,rect)}return map}return previousValue},[containers,queue,dragging,disabled,measure]);return(0,import_react.useEffect)(()=>{containersRef.current=containers},[containers]),(0,import_react.useEffect)(()=>{disabled||measureDroppableContainers()},[dragging,disabled]),(0,import_react.useEffect)(()=>{queue&&queue.length>0&&setQueue(null)},[JSON.stringify(queue)]),(0,import_react.useEffect)(()=>{disabled||typeof frequency!=`number`||timeoutId.current!==null||(timeoutId.current=setTimeout(()=>{measureDroppableContainers(),timeoutId.current=null},frequency))},[frequency,disabled,measureDroppableContainers,...dependencies]),{droppableRects,measureDroppableContainers,measuringScheduled:queue!=null};function isDisabled(){switch(strategy){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return dragging;default:return!dragging}}}function useInitialValue(value,computeFn){return useLazyMemo(previousValue=>value?previousValue||(typeof computeFn==`function`?computeFn(value):value):null,[computeFn,value])}function useInitialRect(node,measure){return useInitialValue(node,measure)}function useMutationObserver(_ref){let{callback,disabled}=_ref,handleMutations=useEvent(callback),mutationObserver=(0,import_react.useMemo)(()=>{if(disabled||typeof window>`u`||window.MutationObserver===void 0)return;let{MutationObserver:MutationObserver$1}=window;return new MutationObserver$1(handleMutations)},[handleMutations,disabled]);return(0,import_react.useEffect)(()=>()=>mutationObserver?.disconnect(),[mutationObserver]),mutationObserver}function useResizeObserver$1(_ref){let{callback,disabled}=_ref,handleResize=useEvent(callback),resizeObserver=(0,import_react.useMemo)(()=>{if(disabled||typeof window>`u`||window.ResizeObserver===void 0)return;let{ResizeObserver:ResizeObserver$1}=window;return new ResizeObserver$1(handleResize)},[disabled]);return(0,import_react.useEffect)(()=>()=>resizeObserver?.disconnect(),[resizeObserver]),resizeObserver}function defaultMeasure(element){return new Rect(getClientRect(element),element)}function useRect(element,measure,fallbackRect){measure===void 0&&(measure=defaultMeasure);let[rect,setRect]=(0,import_react.useState)(null);function measureRect(){setRect(currentRect=>{if(!element)return null;if(element.isConnected===!1){var _ref;return currentRect??fallbackRect??null}let newRect=measure(element);return JSON.stringify(currentRect)===JSON.stringify(newRect)?currentRect:newRect})}let mutationObserver=useMutationObserver({callback(records){if(element)for(let record of records){let{type,target}=record;if(type===`childList`&&target instanceof HTMLElement&&target.contains(element)){measureRect();break}}}}),resizeObserver=useResizeObserver$1({callback:measureRect});return useIsomorphicLayoutEffect$3(()=>{measureRect(),element?(resizeObserver?.observe(element),mutationObserver?.observe(document.body,{childList:!0,subtree:!0})):(resizeObserver?.disconnect(),mutationObserver?.disconnect())},[element]),rect}function useRectDelta(rect){return getRectDelta(rect,useInitialValue(rect))}var defaultValue$1=[];function useScrollableAncestors(node){let previousNode=(0,import_react.useRef)(node),ancestors=useLazyMemo(previousValue=>node?previousValue&&previousValue!==defaultValue$1&&node&&previousNode.current&&node.parentNode===previousNode.current.parentNode?previousValue:getScrollableAncestors(node):defaultValue$1,[node]);return(0,import_react.useEffect)(()=>{previousNode.current=node},[node]),ancestors}function useScrollOffsets(elements){let[scrollCoordinates,setScrollCoordinates]=(0,import_react.useState)(null),prevElements=(0,import_react.useRef)(elements),handleScroll=(0,import_react.useCallback)(event=>{let scrollingElement=getScrollableElement(event.target);scrollingElement&&setScrollCoordinates(scrollCoordinates$1=>scrollCoordinates$1?(scrollCoordinates$1.set(scrollingElement,getScrollCoordinates(scrollingElement)),new Map(scrollCoordinates$1)):null)},[]);return(0,import_react.useEffect)(()=>{let previousElements=prevElements.current;if(elements!==previousElements){cleanup(previousElements);let entries=elements.map(element=>{let scrollableElement=getScrollableElement(element);return scrollableElement?(scrollableElement.addEventListener(`scroll`,handleScroll,{passive:!0}),[scrollableElement,getScrollCoordinates(scrollableElement)]):null}).filter(entry=>entry!=null);setScrollCoordinates(entries.length?new Map(entries):null),prevElements.current=elements}return()=>{cleanup(elements),cleanup(previousElements)};function cleanup(elements$1){elements$1.forEach(element=>{getScrollableElement(element)?.removeEventListener(`scroll`,handleScroll)})}},[handleScroll,elements]),(0,import_react.useMemo)(()=>elements.length?scrollCoordinates?Array.from(scrollCoordinates.values()).reduce((acc,coordinates)=>add$1(acc,coordinates),defaultCoordinates):getScrollOffsets(elements):defaultCoordinates,[elements,scrollCoordinates])}function useScrollOffsetsDelta(scrollOffsets,dependencies){dependencies===void 0&&(dependencies=[]);let initialScrollOffsets=(0,import_react.useRef)(null);return(0,import_react.useEffect)(()=>{initialScrollOffsets.current=null},dependencies),(0,import_react.useEffect)(()=>{let hasScrollOffsets=scrollOffsets!==defaultCoordinates;hasScrollOffsets&&!initialScrollOffsets.current&&(initialScrollOffsets.current=scrollOffsets),!hasScrollOffsets&&initialScrollOffsets.current&&(initialScrollOffsets.current=null)},[scrollOffsets]),initialScrollOffsets.current?subtract$1(scrollOffsets,initialScrollOffsets.current):defaultCoordinates}function useSensorSetup(sensors){(0,import_react.useEffect)(()=>{if(!canUseDOM$1)return;let teardownFns=sensors.map(_ref=>{let{sensor}=_ref;return sensor.setup==null?void 0:sensor.setup()});return()=>{for(let teardown of teardownFns)teardown?.()}},sensors.map(_ref2=>{let{sensor}=_ref2;return sensor}))}function useSyntheticListeners(listeners,id$3){return(0,import_react.useMemo)(()=>listeners.reduce((acc,_ref)=>{let{eventName,handler}=_ref;return acc[eventName]=event=>{handler(event,id$3)},acc},{}),[listeners,id$3])}function useWindowRect(element){return(0,import_react.useMemo)(()=>element?getWindowClientRect(element):null,[element])}var defaultValue$2=[];function useRects(elements,measure){measure===void 0&&(measure=getClientRect);let[firstElement]=elements,windowRect=useWindowRect(firstElement?getWindow(firstElement):null),[rects,setRects]=(0,import_react.useState)(defaultValue$2);function measureRects(){setRects(()=>elements.length?elements.map(element=>isDocumentScrollingElement(element)?windowRect:new Rect(measure(element),element)):defaultValue$2)}let resizeObserver=useResizeObserver$1({callback:measureRects});return useIsomorphicLayoutEffect$3(()=>{resizeObserver?.disconnect(),measureRects(),elements.forEach(element=>resizeObserver?.observe(element))},[elements]),rects}function getMeasurableNode(node){if(!node)return null;if(node.children.length>1)return node;let firstChild=node.children[0];return isHTMLElement(firstChild)?firstChild:node}function useDragOverlayMeasuring(_ref){let{measure}=_ref,[rect,setRect]=(0,import_react.useState)(null),resizeObserver=useResizeObserver$1({callback:(0,import_react.useCallback)(entries=>{for(let{target}of entries)if(isHTMLElement(target)){setRect(rect$1=>{let newRect=measure(target);return rect$1?{...rect$1,width:newRect.width,height:newRect.height}:newRect});break}},[measure])}),[nodeRef,setRef$2]=useNodeRef((0,import_react.useCallback)(element=>{let node=getMeasurableNode(element);resizeObserver?.disconnect(),node&&resizeObserver?.observe(node),setRect(node?measure(node):null)},[measure,resizeObserver]));return(0,import_react.useMemo)(()=>({nodeRef,rect,setRef:setRef$2}),[rect,nodeRef,setRef$2])}var defaultSensors$1=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}},DroppableContainersMap=class extends Map{get(id$3){var _super$get;return id$3==null?void 0:super.get(id$3)??void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(_ref=>{let{disabled}=_ref;return!disabled})}getNodeFor(id$3){var _this$get$node$curren,_this$get;return this.get(id$3)?.node.current??void 0}},defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop$4},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop$4,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:``},dispatch:noop$4,draggableNodes:new Map,over:null,measureDroppableContainers:noop$4},InternalContext=(0,import_react.createContext)(defaultInternalContext),PublicContext=(0,import_react.createContext)(defaultPublicContext);function getInitialState$1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer$1(state,action){switch(action.type){case Action.DragStart:return{...state,draggable:{...state.draggable,initialCoordinates:action.initialCoordinates,active:action.active}};case Action.DragMove:return state.draggable.active==null?state:{...state,draggable:{...state.draggable,translate:{x:action.coordinates.x-state.draggable.initialCoordinates.x,y:action.coordinates.y-state.draggable.initialCoordinates.y}}};case Action.DragEnd:case Action.DragCancel:return{...state,draggable:{...state.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{let{element}=action,{id:id$3}=element,containers=new DroppableContainersMap(state.droppable.containers);return containers.set(id$3,element),{...state,droppable:{...state.droppable,containers}}}case Action.SetDroppableDisabled:{let{id:id$3,key:key$1,disabled}=action,element=state.droppable.containers.get(id$3);if(!element||key$1!==element.key)return state;let containers=new DroppableContainersMap(state.droppable.containers);return containers.set(id$3,{...element,disabled}),{...state,droppable:{...state.droppable,containers}}}case Action.UnregisterDroppable:{let{id:id$3,key:key$1}=action,element=state.droppable.containers.get(id$3);if(!element||key$1!==element.key)return state;let containers=new DroppableContainersMap(state.droppable.containers);return containers.delete(id$3),{...state,droppable:{...state.droppable,containers}}}default:return state}}function RestoreFocus(_ref){let{disabled}=_ref,{active,activatorEvent,draggableNodes}=(0,import_react.useContext)(InternalContext),previousActivatorEvent=usePrevious$1(activatorEvent),previousActiveId=usePrevious$1(active?.id);return(0,import_react.useEffect)(()=>{if(!disabled&&!activatorEvent&&previousActivatorEvent&&previousActiveId!=null){if(!isKeyboardEvent(previousActivatorEvent)||document.activeElement===previousActivatorEvent.target)return;let draggableNode=draggableNodes.get(previousActiveId);if(!draggableNode)return;let{activatorNode,node}=draggableNode;if(!activatorNode.current&&!node.current)return;requestAnimationFrame(()=>{for(let element of[activatorNode.current,node.current]){if(!element)continue;let focusableNode=findFirstFocusableNode(element);if(focusableNode){focusableNode.focus();break}}})}},[activatorEvent,disabled,draggableNodes,previousActiveId,previousActivatorEvent]),null}function applyModifiers(modifiers,_ref){let{transform:transform$1,...args}=_ref;return modifiers!=null&&modifiers.length?modifiers.reduce((accumulator,modifier)=>modifier({transform:accumulator,...args}),transform$1):transform$1}function useMeasuringConfiguration(config){return(0,import_react.useMemo)(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...config?.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...config?.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...config?.dragOverlay}}),[config?.draggable,config?.droppable,config?.dragOverlay])}function useLayoutShiftScrollCompensation(_ref){let{activeNode,measure,initialRect,config=!0}=_ref,initialized=(0,import_react.useRef)(!1),{x:x$2,y:y$2}=typeof config==`boolean`?{x:config,y:config}:config;useIsomorphicLayoutEffect$3(()=>{if(!x$2&&!y$2||!activeNode){initialized.current=!1;return}if(initialized.current||!initialRect)return;let node=activeNode?.node.current;if(!node||node.isConnected===!1)return;let rectDelta=getRectDelta(measure(node),initialRect);if(x$2||(rectDelta.x=0),y$2||(rectDelta.y=0),initialized.current=!0,Math.abs(rectDelta.x)>0||Math.abs(rectDelta.y)>0){let firstScrollableAncestor=getFirstScrollableAncestor(node);firstScrollableAncestor&&firstScrollableAncestor.scrollBy({top:rectDelta.y,left:rectDelta.x})}},[activeNode,x$2,y$2,initialRect,measure])}var ActiveDraggableContext=(0,import_react.createContext)({...defaultCoordinates,scaleX:1,scaleY:1}),Status;(function(Status$1){Status$1[Status$1.Uninitialized=0]=`Uninitialized`,Status$1[Status$1.Initializing=1]=`Initializing`,Status$1[Status$1.Initialized=2]=`Initialized`})(Status||={});var DndContext=(0,import_react.memo)(function(_ref){var _sensorContext$curren,_dragOverlay$nodeRef$,_dragOverlay$rect,_over$rect;let{id:id$3,accessibility,autoScroll:autoScroll$1=!0,children:children$1,sensors=defaultSensors$1,collisionDetection=rectIntersection,measuring,modifiers,...props}=_ref,[state,dispatch$1]=(0,import_react.useReducer)(reducer$1,void 0,getInitialState$1),[dispatchMonitorEvent,registerMonitorListener]=useDndMonitorProvider(),[status,setStatus]=(0,import_react.useState)(Status.Uninitialized),isInitialized$1=status===Status.Initialized,{draggable:{active:activeId,nodes:draggableNodes,translate},droppable:{containers:droppableContainers}}=state,node=activeId==null?null:draggableNodes.get(activeId),activeRects=(0,import_react.useRef)({initial:null,translated:null}),active=(0,import_react.useMemo)(()=>{var _node$data;return activeId==null?null:{id:activeId,data:node?.data??defaultData,rect:activeRects}},[activeId,node]),activeRef=(0,import_react.useRef)(null),[activeSensor,setActiveSensor]=(0,import_react.useState)(null),[activatorEvent,setActivatorEvent]=(0,import_react.useState)(null),latestProps=useLatestValue(props,Object.values(props)),draggableDescribedById=useUniqueId$1(`DndDescribedBy`,id$3),enabledDroppableContainers=(0,import_react.useMemo)(()=>droppableContainers.getEnabled(),[droppableContainers]),measuringConfiguration=useMeasuringConfiguration(measuring),{droppableRects,measureDroppableContainers,measuringScheduled}=useDroppableMeasuring(enabledDroppableContainers,{dragging:isInitialized$1,dependencies:[translate.x,translate.y],config:measuringConfiguration.droppable}),activeNode=useCachedNode(draggableNodes,activeId),activationCoordinates=(0,import_react.useMemo)(()=>activatorEvent?getEventCoordinates(activatorEvent):null,[activatorEvent]),autoScrollOptions=getAutoScrollerOptions(),initialActiveNodeRect=useInitialRect(activeNode,measuringConfiguration.draggable.measure);useLayoutShiftScrollCompensation({activeNode:activeId==null?null:draggableNodes.get(activeId),config:autoScrollOptions.layoutShiftCompensation,initialRect:initialActiveNodeRect,measure:measuringConfiguration.draggable.measure});let activeNodeRect=useRect(activeNode,measuringConfiguration.draggable.measure,initialActiveNodeRect),containerNodeRect=useRect(activeNode?activeNode.parentElement:null),sensorContext=(0,import_react.useRef)({activatorEvent:null,active:null,activeNode,collisionRect:null,collisions:null,droppableRects,draggableNodes,draggingNode:null,draggingNodeRect:null,droppableContainers,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),overNode=droppableContainers.getNodeFor(sensorContext.current.over?.id),dragOverlay=useDragOverlayMeasuring({measure:measuringConfiguration.dragOverlay.measure}),draggingNode=dragOverlay.nodeRef.current??activeNode,draggingNodeRect=isInitialized$1?dragOverlay.rect??activeNodeRect:null,usesDragOverlay=!!(dragOverlay.nodeRef.current&&dragOverlay.rect),nodeRectDelta=useRectDelta(usesDragOverlay?null:activeNodeRect),windowRect=useWindowRect(draggingNode?getWindow(draggingNode):null),scrollableAncestors=useScrollableAncestors(isInitialized$1?overNode??activeNode:null),scrollableAncestorRects=useRects(scrollableAncestors),modifiedTranslate=applyModifiers(modifiers,{transform:{x:translate.x-nodeRectDelta.x,y:translate.y-nodeRectDelta.y,scaleX:1,scaleY:1},activatorEvent,active,activeNodeRect,containerNodeRect,draggingNodeRect,over:sensorContext.current.over,overlayNodeRect:dragOverlay.rect,scrollableAncestors,scrollableAncestorRects,windowRect}),pointerCoordinates=activationCoordinates?add$1(activationCoordinates,translate):null,scrollOffsets=useScrollOffsets(scrollableAncestors),scrollAdjustment=useScrollOffsetsDelta(scrollOffsets),activeNodeScrollDelta=useScrollOffsetsDelta(scrollOffsets,[activeNodeRect]),scrollAdjustedTranslate=add$1(modifiedTranslate,scrollAdjustment),collisionRect=draggingNodeRect?getAdjustedRect(draggingNodeRect,modifiedTranslate):null,collisions=active&&collisionRect?collisionDetection({active,collisionRect,droppableRects,droppableContainers:enabledDroppableContainers,pointerCoordinates}):null,overId=getFirstCollision(collisions,`id`),[over,setOver]=(0,import_react.useState)(null),transform$1=adjustScale(usesDragOverlay?modifiedTranslate:add$1(modifiedTranslate,activeNodeScrollDelta),over?.rect??null,activeNodeRect),activeSensorRef=(0,import_react.useRef)(null),instantiateSensor=(0,import_react.useCallback)((event,_ref2)=>{let{sensor:Sensor,options:options$1}=_ref2;if(activeRef.current==null)return;let activeNode$1=draggableNodes.get(activeRef.current);if(!activeNode$1)return;let activatorEvent$1=event.nativeEvent;activeSensorRef.current=new Sensor({active:activeRef.current,activeNode:activeNode$1,event:activatorEvent$1,options:options$1,context:sensorContext,onAbort(id$4){if(!draggableNodes.get(id$4))return;let{onDragAbort}=latestProps.current,event$1={id:id$4};onDragAbort?.(event$1),dispatchMonitorEvent({type:`onDragAbort`,event:event$1})},onPending(id$4,constraint,initialCoordinates,offset$1){if(!draggableNodes.get(id$4))return;let{onDragPending}=latestProps.current,event$1={id:id$4,constraint,initialCoordinates,offset:offset$1};onDragPending?.(event$1),dispatchMonitorEvent({type:`onDragPending`,event:event$1})},onStart(initialCoordinates){let id$4=activeRef.current;if(id$4==null)return;let draggableNode=draggableNodes.get(id$4);if(!draggableNode)return;let{onDragStart:onDragStart$1}=latestProps.current,event$1={activatorEvent:activatorEvent$1,active:{id:id$4,data:draggableNode.data,rect:activeRects}};(0,import_react_dom$4.unstable_batchedUpdates)(()=>{onDragStart$1?.(event$1),setStatus(Status.Initializing),dispatch$1({type:Action.DragStart,initialCoordinates,active:id$4}),dispatchMonitorEvent({type:`onDragStart`,event:event$1}),setActiveSensor(activeSensorRef.current),setActivatorEvent(activatorEvent$1)})},onMove(coordinates){dispatch$1({type:Action.DragMove,coordinates})},onEnd:createHandler(Action.DragEnd),onCancel:createHandler(Action.DragCancel)});function createHandler(type){return async function(){let{active:active$1,collisions:collisions$1,over:over$1,scrollAdjustedTranslate:scrollAdjustedTranslate$1}=sensorContext.current,event$1=null;if(active$1&&scrollAdjustedTranslate$1){let{cancelDrop}=latestProps.current;event$1={activatorEvent:activatorEvent$1,active:active$1,collisions:collisions$1,delta:scrollAdjustedTranslate$1,over:over$1},type===Action.DragEnd&&typeof cancelDrop==`function`&&await Promise.resolve(cancelDrop(event$1))&&(type=Action.DragCancel)}activeRef.current=null,(0,import_react_dom$4.unstable_batchedUpdates)(()=>{dispatch$1({type}),setStatus(Status.Uninitialized),setOver(null),setActiveSensor(null),setActivatorEvent(null),activeSensorRef.current=null;let eventName=type===Action.DragEnd?`onDragEnd`:`onDragCancel`;if(event$1){let handler$1=latestProps.current[eventName];handler$1?.(event$1),dispatchMonitorEvent({type:eventName,event:event$1})}})}}},[draggableNodes]),activators=useCombineActivators(sensors,(0,import_react.useCallback)((handler,sensor)=>(event,active$1)=>{let nativeEvent=event.nativeEvent,activeDraggableNode=draggableNodes.get(active$1);if(activeRef.current!==null||!activeDraggableNode||nativeEvent.dndKit||nativeEvent.defaultPrevented)return;let activationContext={active:activeDraggableNode};handler(event,sensor.options,activationContext)===!0&&(nativeEvent.dndKit={capturedBy:sensor.sensor},activeRef.current=active$1,instantiateSensor(event,sensor))},[draggableNodes,instantiateSensor]));useSensorSetup(sensors),useIsomorphicLayoutEffect$3(()=>{activeNodeRect&&status===Status.Initializing&&setStatus(Status.Initialized)},[activeNodeRect,status]),(0,import_react.useEffect)(()=>{let{onDragMove}=latestProps.current,{active:active$1,activatorEvent:activatorEvent$1,collisions:collisions$1,over:over$1}=sensorContext.current;if(!active$1||!activatorEvent$1)return;let event={active:active$1,activatorEvent:activatorEvent$1,collisions:collisions$1,delta:{x:scrollAdjustedTranslate.x,y:scrollAdjustedTranslate.y},over:over$1};(0,import_react_dom$4.unstable_batchedUpdates)(()=>{onDragMove?.(event),dispatchMonitorEvent({type:`onDragMove`,event})})},[scrollAdjustedTranslate.x,scrollAdjustedTranslate.y]),(0,import_react.useEffect)(()=>{let{active:active$1,activatorEvent:activatorEvent$1,collisions:collisions$1,droppableContainers:droppableContainers$1,scrollAdjustedTranslate:scrollAdjustedTranslate$1}=sensorContext.current;if(!active$1||activeRef.current==null||!activatorEvent$1||!scrollAdjustedTranslate$1)return;let{onDragOver}=latestProps.current,overContainer=droppableContainers$1.get(overId),over$1=overContainer&&overContainer.rect.current?{id:overContainer.id,rect:overContainer.rect.current,data:overContainer.data,disabled:overContainer.disabled}:null,event={active:active$1,activatorEvent:activatorEvent$1,collisions:collisions$1,delta:{x:scrollAdjustedTranslate$1.x,y:scrollAdjustedTranslate$1.y},over:over$1};(0,import_react_dom$4.unstable_batchedUpdates)(()=>{setOver(over$1),onDragOver?.(event),dispatchMonitorEvent({type:`onDragOver`,event})})},[overId]),useIsomorphicLayoutEffect$3(()=>{sensorContext.current={activatorEvent,active,activeNode,collisionRect,collisions,droppableRects,draggableNodes,draggingNode,draggingNodeRect,droppableContainers,over,scrollableAncestors,scrollAdjustedTranslate},activeRects.current={initial:draggingNodeRect,translated:collisionRect}},[active,activeNode,collisions,collisionRect,draggableNodes,draggingNode,draggingNodeRect,droppableRects,droppableContainers,over,scrollableAncestors,scrollAdjustedTranslate]),useAutoScroller({...autoScrollOptions,delta:translate,draggingRect:collisionRect,pointerCoordinates,scrollableAncestors,scrollableAncestorRects});let publicContext=(0,import_react.useMemo)(()=>({active,activeNode,activeNodeRect,activatorEvent,collisions,containerNodeRect,dragOverlay,draggableNodes,droppableContainers,droppableRects,over,measureDroppableContainers,scrollableAncestors,scrollableAncestorRects,measuringConfiguration,measuringScheduled,windowRect}),[active,activeNode,activeNodeRect,activatorEvent,collisions,containerNodeRect,dragOverlay,draggableNodes,droppableContainers,droppableRects,over,measureDroppableContainers,scrollableAncestors,scrollableAncestorRects,measuringConfiguration,measuringScheduled,windowRect]),internalContext=(0,import_react.useMemo)(()=>({activatorEvent,activators,active,activeNodeRect,ariaDescribedById:{draggable:draggableDescribedById},dispatch:dispatch$1,draggableNodes,over,measureDroppableContainers}),[activatorEvent,activators,active,activeNodeRect,dispatch$1,draggableDescribedById,draggableNodes,over,measureDroppableContainers]);return import_react.createElement(DndMonitorContext.Provider,{value:registerMonitorListener},import_react.createElement(InternalContext.Provider,{value:internalContext},import_react.createElement(PublicContext.Provider,{value:publicContext},import_react.createElement(ActiveDraggableContext.Provider,{value:transform$1},children$1)),import_react.createElement(RestoreFocus,{disabled:accessibility?.restoreFocus===!1})),import_react.createElement(Accessibility,{...accessibility,hiddenTextDescribedById:draggableDescribedById}));function getAutoScrollerOptions(){let activeSensorDisablesAutoscroll=activeSensor?.autoScrollEnabled===!1,autoScrollGloballyDisabled=typeof autoScroll$1==`object`?autoScroll$1.enabled===!1:autoScroll$1===!1,enabled=isInitialized$1&&!activeSensorDisablesAutoscroll&&!autoScrollGloballyDisabled;return typeof autoScroll$1==`object`?{...autoScroll$1,enabled}:{enabled}}}),NullContext=(0,import_react.createContext)(null),defaultRole=`button`,ID_PREFIX$1=`Draggable`;function useDraggable(_ref){let{id:id$3,data,disabled=!1,attributes}=_ref,key$1=useUniqueId$1(ID_PREFIX$1),{activators,activatorEvent,active,activeNodeRect,ariaDescribedById,draggableNodes,over}=(0,import_react.useContext)(InternalContext),{role=defaultRole,roleDescription=`draggable`,tabIndex=0}=attributes??{},isDragging$2=active?.id===id$3,transform$1=(0,import_react.useContext)(isDragging$2?ActiveDraggableContext:NullContext),[node,setNodeRef]=useNodeRef(),[activatorNode,setActivatorNodeRef]=useNodeRef(),listeners=useSyntheticListeners(activators,id$3),dataRef=useLatestValue(data);return useIsomorphicLayoutEffect$3(()=>(draggableNodes.set(id$3,{id:id$3,key:key$1,node,activatorNode,data:dataRef}),()=>{let node$1=draggableNodes.get(id$3);node$1&&node$1.key===key$1&&draggableNodes.delete(id$3)}),[draggableNodes,id$3]),{active,activatorEvent,activeNodeRect,attributes:(0,import_react.useMemo)(()=>({role,tabIndex,"aria-disabled":disabled,"aria-pressed":isDragging$2&&role===defaultRole?!0:void 0,"aria-roledescription":roleDescription,"aria-describedby":ariaDescribedById.draggable}),[disabled,role,tabIndex,isDragging$2,roleDescription,ariaDescribedById.draggable]),isDragging:isDragging$2,listeners:disabled?void 0:listeners,node,over,setNodeRef,setActivatorNodeRef,transform:transform$1}}function useDndContext(){return(0,import_react.useContext)(PublicContext)}var ID_PREFIX$1$1=`Droppable`,defaultResizeObserverConfig={timeout:25};function useDroppable(_ref){let{data,disabled=!1,id:id$3,resizeObserverConfig}=_ref,key$1=useUniqueId$1(ID_PREFIX$1$1),{active,dispatch:dispatch$1,over,measureDroppableContainers}=(0,import_react.useContext)(InternalContext),previous=(0,import_react.useRef)({disabled}),resizeObserverConnected=(0,import_react.useRef)(!1),rect=(0,import_react.useRef)(null),callbackId=(0,import_react.useRef)(null),{disabled:resizeObserverDisabled,updateMeasurementsFor,timeout:resizeObserverTimeout}={...defaultResizeObserverConfig,...resizeObserverConfig},ids$1=useLatestValue(updateMeasurementsFor??id$3),resizeObserver=useResizeObserver$1({callback:(0,import_react.useCallback)(()=>{if(!resizeObserverConnected.current){resizeObserverConnected.current=!0;return}callbackId.current!=null&&clearTimeout(callbackId.current),callbackId.current=setTimeout(()=>{measureDroppableContainers(Array.isArray(ids$1.current)?ids$1.current:[ids$1.current]),callbackId.current=null},resizeObserverTimeout)},[resizeObserverTimeout]),disabled:resizeObserverDisabled||!active}),[nodeRef,setNodeRef]=useNodeRef((0,import_react.useCallback)((newElement,previousElement)=>{resizeObserver&&(previousElement&&(resizeObserver.unobserve(previousElement),resizeObserverConnected.current=!1),newElement&&resizeObserver.observe(newElement))},[resizeObserver])),dataRef=useLatestValue(data);return(0,import_react.useEffect)(()=>{!resizeObserver||!nodeRef.current||(resizeObserver.disconnect(),resizeObserverConnected.current=!1,resizeObserver.observe(nodeRef.current))},[nodeRef,resizeObserver]),(0,import_react.useEffect)(()=>(dispatch$1({type:Action.RegisterDroppable,element:{id:id$3,key:key$1,disabled,node:nodeRef,rect,data:dataRef}}),()=>dispatch$1({type:Action.UnregisterDroppable,key:key$1,id:id$3})),[id$3]),(0,import_react.useEffect)(()=>{disabled!==previous.current.disabled&&(dispatch$1({type:Action.SetDroppableDisabled,id:id$3,key:key$1,disabled}),previous.current.disabled=disabled)},[id$3,key$1,disabled,dispatch$1]),{active,rect,isOver:over?.id===id$3,node:nodeRef,over,setNodeRef}}function AnimationManager(_ref){let{animation,children:children$1}=_ref,[clonedChildren,setClonedChildren]=(0,import_react.useState)(null),[element,setElement]=(0,import_react.useState)(null),previousChildren=usePrevious$1(children$1);return!children$1&&!clonedChildren&&previousChildren&&setClonedChildren(previousChildren),useIsomorphicLayoutEffect$3(()=>{if(!element)return;let key$1=clonedChildren?.key,id$3=clonedChildren?.props.id;if(key$1==null||id$3==null){setClonedChildren(null);return}Promise.resolve(animation(id$3,element)).then(()=>{setClonedChildren(null)})},[animation,clonedChildren,element]),import_react.createElement(import_react.Fragment,null,children$1,clonedChildren?(0,import_react.cloneElement)(clonedChildren,{ref:setElement}):null)}var defaultTransform$1={x:0,y:0,scaleX:1,scaleY:1};function NullifiedContextProvider(_ref){let{children:children$1}=_ref;return import_react.createElement(InternalContext.Provider,{value:defaultInternalContext},import_react.createElement(ActiveDraggableContext.Provider,{value:defaultTransform$1},children$1))}var baseStyles={position:`fixed`,touchAction:`none`},defaultTransition$1=activatorEvent=>isKeyboardEvent(activatorEvent)?`transform 250ms ease`:void 0,PositionedOverlay=(0,import_react.forwardRef)((_ref,ref)=>{let{as,activatorEvent,adjustScale:adjustScale$1,children:children$1,className,rect,style:style$3,transform:transform$1,transition:transition$1=defaultTransition$1}=_ref;if(!rect)return null;let scaleAdjustedTransform=adjustScale$1?transform$1:{...transform$1,scaleX:1,scaleY:1},styles$1={...baseStyles,width:rect.width,height:rect.height,top:rect.top,left:rect.left,transform:CSS$1.Transform.toString(scaleAdjustedTransform),transformOrigin:adjustScale$1&&activatorEvent?getRelativeTransformOrigin(activatorEvent,rect):void 0,transition:typeof transition$1==`function`?transition$1(activatorEvent):transition$1,...style$3};return import_react.createElement(as,{className,style:styles$1,ref},children$1)}),defaultDropAnimationSideEffects=options$1=>_ref=>{let{active,dragOverlay}=_ref,originalStyles={},{styles:styles$1,className}=options$1;if(styles$1!=null&&styles$1.active)for(let[key$1,value]of Object.entries(styles$1.active))value!==void 0&&(originalStyles[key$1]=active.node.style.getPropertyValue(key$1),active.node.style.setProperty(key$1,value));if(styles$1!=null&&styles$1.dragOverlay)for(let[key$1,value]of Object.entries(styles$1.dragOverlay))value!==void 0&&dragOverlay.node.style.setProperty(key$1,value);return className!=null&&className.active&&active.node.classList.add(className.active),className!=null&&className.dragOverlay&&dragOverlay.node.classList.add(className.dragOverlay),function(){for(let[key$1,value]of Object.entries(originalStyles))active.node.style.setProperty(key$1,value);className!=null&&className.active&&active.node.classList.remove(className.active)}},defaultKeyframeResolver=_ref2=>{let{transform:{initial,final}}=_ref2;return[{transform:CSS$1.Transform.toString(initial)},{transform:CSS$1.Transform.toString(final)}]},defaultDropAnimationConfiguration={duration:250,easing:`ease`,keyframes:defaultKeyframeResolver,sideEffects:defaultDropAnimationSideEffects({styles:{active:{opacity:`0`}}})};function useDropAnimation(_ref3){let{config,draggableNodes,droppableContainers,measuringConfiguration}=_ref3;return useEvent((id$3,node)=>{if(config===null)return;let activeDraggable=draggableNodes.get(id$3);if(!activeDraggable)return;let activeNode=activeDraggable.node.current;if(!activeNode)return;let measurableNode=getMeasurableNode(node);if(!measurableNode)return;let{transform:transform$1}=getWindow(node).getComputedStyle(node),parsedTransform=parseTransform(transform$1);if(!parsedTransform)return;let animation=typeof config==`function`?config:createDefaultDropAnimation(config);return scrollIntoViewIfNeeded(activeNode,measuringConfiguration.draggable.measure),animation({active:{id:id$3,data:activeDraggable.data,node:activeNode,rect:measuringConfiguration.draggable.measure(activeNode)},draggableNodes,dragOverlay:{node,rect:measuringConfiguration.dragOverlay.measure(measurableNode)},droppableContainers,measuringConfiguration,transform:parsedTransform})})}function createDefaultDropAnimation(options$1){let{duration,easing,sideEffects,keyframes:keyframes$1}={...defaultDropAnimationConfiguration,...options$1};return _ref4=>{let{active,dragOverlay,transform:transform$1,...rest}=_ref4;if(!duration)return;let delta={x:dragOverlay.rect.left-active.rect.left,y:dragOverlay.rect.top-active.rect.top},scale$1={scaleX:transform$1.scaleX===1?1:active.rect.width*transform$1.scaleX/dragOverlay.rect.width,scaleY:transform$1.scaleY===1?1:active.rect.height*transform$1.scaleY/dragOverlay.rect.height},finalTransform={x:transform$1.x-delta.x,y:transform$1.y-delta.y,...scale$1},animationKeyframes=keyframes$1({...rest,active,dragOverlay,transform:{initial:transform$1,final:finalTransform}}),[firstKeyframe]=animationKeyframes,lastKeyframe=animationKeyframes[animationKeyframes.length-1];if(JSON.stringify(firstKeyframe)===JSON.stringify(lastKeyframe))return;let cleanup=sideEffects?.({active,dragOverlay,...rest}),animation=dragOverlay.node.animate(animationKeyframes,{duration,easing,fill:`forwards`});return new Promise(resolve=>{animation.onfinish=()=>{cleanup?.(),resolve()}})}}var key=0;function useKey(id$3){return(0,import_react.useMemo)(()=>{if(id$3!=null)return key++,key},[id$3])}var DragOverlay=import_react.memo(_ref=>{let{adjustScale:adjustScale$1=!1,children:children$1,dropAnimation:dropAnimationConfig,style:style$3,transition:transition$1,modifiers,wrapperElement=`div`,className,zIndex=999}=_ref,{activatorEvent,active,activeNodeRect,containerNodeRect,draggableNodes,droppableContainers,dragOverlay,over,measuringConfiguration,scrollableAncestors,scrollableAncestorRects,windowRect}=useDndContext(),transform$1=(0,import_react.useContext)(ActiveDraggableContext),key$1=useKey(active?.id),modifiedTransform=applyModifiers(modifiers,{activatorEvent,active,activeNodeRect,containerNodeRect,draggingNodeRect:dragOverlay.rect,over,overlayNodeRect:dragOverlay.rect,scrollableAncestors,scrollableAncestorRects,transform:transform$1,windowRect}),initialRect=useInitialValue(activeNodeRect),dropAnimation=useDropAnimation({config:dropAnimationConfig,draggableNodes,droppableContainers,measuringConfiguration}),ref=initialRect?dragOverlay.setRef:void 0;return import_react.createElement(NullifiedContextProvider,null,import_react.createElement(AnimationManager,{animation:dropAnimation},active&&key$1?import_react.createElement(PositionedOverlay,{key:key$1,id:active.id,ref,as:wrapperElement,activatorEvent,adjustScale:adjustScale$1,className,transition:transition$1,rect:initialRect,style:{zIndex,...style$3},transform:modifiedTransform},children$1):null))});function arrayMove(array$1,from,to){let newArray=array$1.slice();return newArray.splice(to<0?newArray.length+to:to,0,newArray.splice(from,1)[0]),newArray}function getSortedRects(items,rects){return items.reduce((accumulator,id$3,index$2)=>{let rect=rects.get(id$3);return rect&&(accumulator[index$2]=rect),accumulator},Array(items.length))}function isValidIndex(index$2){return index$2!==null&&index$2>=0}function itemsEqual(a$4,b$3){if(a$4===b$3)return!0;if(a$4.length!==b$3.length)return!1;for(let i$4=0;i$4<a$4.length;i$4++)if(a$4[i$4]!==b$3[i$4])return!1;return!0}function normalizeDisabled(disabled){return typeof disabled==`boolean`?{draggable:disabled,droppable:disabled}:disabled}var rectSortingStrategy=_ref=>{let{rects,activeIndex,overIndex,index:index$2}=_ref,newRects=arrayMove(rects,overIndex,activeIndex),oldRect=rects[index$2],newRect=newRects[index$2];return!newRect||!oldRect?null:{x:newRect.left-oldRect.left,y:newRect.top-oldRect.top,scaleX:newRect.width/oldRect.width,scaleY:newRect.height/oldRect.height}},defaultScale$1={scaleX:1,scaleY:1},verticalListSortingStrategy=_ref=>{var _rects$activeIndex;let{activeIndex,activeNodeRect:fallbackActiveRect,index:index$2,rects,overIndex}=_ref,activeNodeRect=rects[activeIndex]??fallbackActiveRect;if(!activeNodeRect)return null;if(index$2===activeIndex){let overIndexRect=rects[overIndex];return overIndexRect?{x:0,y:activeIndex<overIndex?overIndexRect.top+overIndexRect.height-(activeNodeRect.top+activeNodeRect.height):overIndexRect.top-activeNodeRect.top,...defaultScale$1}:null}let itemGap=getItemGap$1(rects,index$2,activeIndex);return index$2>activeIndex&&index$2<=overIndex?{x:0,y:-activeNodeRect.height-itemGap,...defaultScale$1}:index$2<activeIndex&&index$2>=overIndex?{x:0,y:activeNodeRect.height+itemGap,...defaultScale$1}:{x:0,y:0,...defaultScale$1}};function getItemGap$1(clientRects,index$2,activeIndex){let currentRect=clientRects[index$2],previousRect=clientRects[index$2-1],nextRect=clientRects[index$2+1];return currentRect?activeIndex<index$2?previousRect?currentRect.top-(previousRect.top+previousRect.height):nextRect?nextRect.top-(currentRect.top+currentRect.height):0:nextRect?nextRect.top-(currentRect.top+currentRect.height):previousRect?currentRect.top-(previousRect.top+previousRect.height):0:0}var ID_PREFIX=`Sortable`,Context=import_react.createContext({activeIndex:-1,containerId:ID_PREFIX,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rectSortingStrategy,disabled:{draggable:!1,droppable:!1}});function SortableContext(_ref){let{children:children$1,id:id$3,items:userDefinedItems,strategy=rectSortingStrategy,disabled:disabledProp=!1}=_ref,{active,dragOverlay,droppableRects,over,measureDroppableContainers}=useDndContext(),containerId=useUniqueId$1(ID_PREFIX,id$3),useDragOverlay=dragOverlay.rect!==null,items=(0,import_react.useMemo)(()=>userDefinedItems.map(item=>typeof item==`object`&&`id`in item?item.id:item),[userDefinedItems]),isDragging$2=active!=null,activeIndex=active?items.indexOf(active.id):-1,overIndex=over?items.indexOf(over.id):-1,previousItemsRef=(0,import_react.useRef)(items),itemsHaveChanged=!itemsEqual(items,previousItemsRef.current),disableTransforms=overIndex!==-1&&activeIndex===-1||itemsHaveChanged,disabled=normalizeDisabled(disabledProp);useIsomorphicLayoutEffect$3(()=>{itemsHaveChanged&&isDragging$2&&measureDroppableContainers(items)},[itemsHaveChanged,items,isDragging$2,measureDroppableContainers]),(0,import_react.useEffect)(()=>{previousItemsRef.current=items},[items]);let contextValue=(0,import_react.useMemo)(()=>({activeIndex,containerId,disabled,disableTransforms,items,overIndex,useDragOverlay,sortedRects:getSortedRects(items,droppableRects),strategy}),[activeIndex,containerId,disabled.draggable,disabled.droppable,disableTransforms,items,overIndex,droppableRects,useDragOverlay,strategy]);return import_react.createElement(Context.Provider,{value:contextValue},children$1)}var defaultNewIndexGetter=_ref=>{let{id:id$3,items,activeIndex,overIndex}=_ref;return arrayMove(items,activeIndex,overIndex).indexOf(id$3)},defaultAnimateLayoutChanges=_ref2=>{let{containerId,isSorting,wasDragging,index:index$2,items,newIndex,previousItems,previousContainerId,transition:transition$1}=_ref2;return!transition$1||!wasDragging||previousItems!==items&&index$2===newIndex?!1:isSorting?!0:newIndex!==index$2&&containerId===previousContainerId},defaultTransition={duration:200,easing:`ease`},transitionProperty=`transform`,disabledTransition=CSS$1.Transition.toString({property:transitionProperty,duration:0,easing:`linear`}),defaultAttributes={roleDescription:`sortable`};function useDerivedTransform(_ref){let{disabled,index:index$2,node,rect}=_ref,[derivedTransform,setDerivedtransform]=(0,import_react.useState)(null),previousIndex=(0,import_react.useRef)(index$2);return useIsomorphicLayoutEffect$3(()=>{if(!disabled&&index$2!==previousIndex.current&&node.current){let initial=rect.current;if(initial){let current=getClientRect(node.current,{ignoreTransform:!0}),delta={x:initial.left-current.left,y:initial.top-current.top,scaleX:initial.width/current.width,scaleY:initial.height/current.height};(delta.x||delta.y)&&setDerivedtransform(delta)}}index$2!==previousIndex.current&&(previousIndex.current=index$2)},[disabled,index$2,node,rect]),(0,import_react.useEffect)(()=>{derivedTransform&&setDerivedtransform(null)},[derivedTransform]),derivedTransform}function useSortable(_ref){let{animateLayoutChanges=defaultAnimateLayoutChanges,attributes:userDefinedAttributes,disabled:localDisabled,data:customData,getNewIndex=defaultNewIndexGetter,id:id$3,strategy:localStrategy,resizeObserverConfig,transition:transition$1=defaultTransition}=_ref,{items,containerId,activeIndex,disabled:globalDisabled,disableTransforms,sortedRects,overIndex,useDragOverlay,strategy:globalStrategy}=(0,import_react.useContext)(Context),disabled=normalizeLocalDisabled(localDisabled,globalDisabled),index$2=items.indexOf(id$3),data=(0,import_react.useMemo)(()=>({sortable:{containerId,index:index$2,items},...customData}),[containerId,customData,index$2,items]),itemsAfterCurrentSortable=(0,import_react.useMemo)(()=>items.slice(items.indexOf(id$3)),[items,id$3]),{rect,node,isOver,setNodeRef:setDroppableNodeRef}=useDroppable({id:id$3,data,disabled:disabled.droppable,resizeObserverConfig:{updateMeasurementsFor:itemsAfterCurrentSortable,...resizeObserverConfig}}),{active,activatorEvent,activeNodeRect,attributes,setNodeRef:setDraggableNodeRef,listeners,isDragging:isDragging$2,over,setActivatorNodeRef,transform:transform$1}=useDraggable({id:id$3,data,attributes:{...defaultAttributes,...userDefinedAttributes},disabled:disabled.draggable}),setNodeRef=useCombinedRefs(setDroppableNodeRef,setDraggableNodeRef),isSorting=!!active,displaceItem=isSorting&&!disableTransforms&&isValidIndex(activeIndex)&&isValidIndex(overIndex),shouldDisplaceDragSource=!useDragOverlay&&isDragging$2,finalTransform=displaceItem?(shouldDisplaceDragSource&&displaceItem?transform$1:null)??(localStrategy??globalStrategy)({rects:sortedRects,activeNodeRect,activeIndex,overIndex,index:index$2}):null,newIndex=isValidIndex(activeIndex)&&isValidIndex(overIndex)?getNewIndex({id:id$3,items,activeIndex,overIndex}):index$2,activeId=active?.id,previous=(0,import_react.useRef)({activeId,items,newIndex,containerId}),itemsHaveChanged=items!==previous.current.items,shouldAnimateLayoutChanges=animateLayoutChanges({active,containerId,isDragging:isDragging$2,isSorting,id:id$3,index:index$2,items,newIndex:previous.current.newIndex,previousItems:previous.current.items,previousContainerId:previous.current.containerId,transition:transition$1,wasDragging:previous.current.activeId!=null}),derivedTransform=useDerivedTransform({disabled:!shouldAnimateLayoutChanges,index:index$2,node,rect});return(0,import_react.useEffect)(()=>{isSorting&&previous.current.newIndex!==newIndex&&(previous.current.newIndex=newIndex),containerId!==previous.current.containerId&&(previous.current.containerId=containerId),items!==previous.current.items&&(previous.current.items=items)},[isSorting,newIndex,containerId,items]),(0,import_react.useEffect)(()=>{if(activeId===previous.current.activeId)return;if(activeId!=null&&previous.current.activeId==null){previous.current.activeId=activeId;return}let timeoutId=setTimeout(()=>{previous.current.activeId=activeId},50);return()=>clearTimeout(timeoutId)},[activeId]),{active,activeIndex,attributes,data,rect,index:index$2,newIndex,items,isOver,isSorting,isDragging:isDragging$2,listeners,node,overIndex,over,setNodeRef,setActivatorNodeRef,setDroppableNodeRef,setDraggableNodeRef,transform:derivedTransform??finalTransform,transition:getTransition()};function getTransition(){if(derivedTransform||itemsHaveChanged&&previous.current.newIndex===index$2)return disabledTransition;if(!(shouldDisplaceDragSource&&!isKeyboardEvent(activatorEvent)||!transition$1)&&(isSorting||shouldAnimateLayoutChanges))return CSS$1.Transition.toString({...transition$1,property:transitionProperty})}}function normalizeLocalDisabled(localDisabled,globalDisabled){var _localDisabled$dragga,_localDisabled$droppa;return typeof localDisabled==`boolean`?{draggable:localDisabled,droppable:!1}:{draggable:localDisabled?.draggable??globalDisabled.draggable,droppable:localDisabled?.droppable??globalDisabled.droppable}}var directions=[KeyboardCode.Down,KeyboardCode.Right,KeyboardCode.Up,KeyboardCode.Left],ColumnSortableItem=({child,columnContainerId,selectedBlockId,onSelectBlock,onRemoveBlock,activeContainer,onSetActiveContainer,onUpdateBlock})=>{let{attributes,listeners,setNodeRef,transform:transform$1,transition:transition$1,isDragging:isDragging$2}=useSortable({id:child.id,data:{containerId:columnContainerId}});return(0,import_jsx_runtime.jsxs)(`div`,{ref:setNodeRef,style:{transform:CSS$1.Translate.toString(transform$1),transition:transition$1,opacity:isDragging$2?.4:1,zIndex:isDragging$2?9999:`auto`},onClick:e$4=>{e$4.stopPropagation(),onSelectBlock(child.id)},className:`
                relative group rounded border bg-white flex flex-col transition-none w-full overflow-hidden
                ${selectedBlockId===child.id?`border-indigo-500 ring-1 ring-indigo-200`:`border-gray-200`}
                ${isDragging$2?`bg-indigo-50 border-dashed`:``}
            `,...attributes,children:[(0,import_jsx_runtime.jsx)(`div`,{...listeners,className:`
                    absolute top-0 left-0 w-full h-3 z-20 cursor-grab active:cursor-grabbing flex justify-center items-start
                    transition-opacity duration-200
                    ${isDragging$2?`opacity-0`:`opacity-0 group-hover:opacity-100 bg-transparent`}
                `,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-6 h-1 bg-transparent rounded-full mt-1`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 min-w-0 w-full pt-2`,children:[` `,(0,import_jsx_runtime.jsx)(BlockRenderer_default,{block:child,selectedBlockId,onSelectBlock,onRemoveBlock,activeContainer,onSetActiveContainer,onUpdateBlock})]}),selectedBlockId===child.id&&!isDragging$2&&(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onRemoveBlock(child.id)},className:`absolute -right-2 -top-2 bg-red-500 text-white p-1 rounded-full shadow-sm hover:scale-110 z-30 opacity-0 group-hover:opacity-100 transition-opacity`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:12})})]})},ColumnSortableItem_default=ColumnSortableItem,GEMINI_API_KEY=``,BASE_URL$2=``,API_BASE_URL$3=`${BASE_URL$2}/api/posts`,API_ALBUM_URL=`${BASE_URL$2}/api/albums`,API_ROOM_URL=`${BASE_URL$2}/api/rooms`;const API_TEMPLATE_URL=`${BASE_URL$2}/api/templates`,cleanId=id$3=>String(id$3).replace(/^room-/,``);var getSupabaseClient=()=>null;const supabase=getSupabaseClient();var getAuthHeaders$1=()=>{let token=localStorage.getItem(`accessToken`);return{"Content-Type":`application/json`,Authorization:`Bearer ${token}`}};const deleteOldImage=async oldUrl=>{if(oldUrl)try{let filePath=oldUrl.split(`/blog-assets/`).pop();if(filePath&&supabase){let{error:error$1}=await supabase.storage.from(`blog-assets`).remove([filePath]);error$1&&console.warn(`    ( ):`,error$1)}}catch(e$4){console.warn(`    :`,e$4)}},uploadImageToSupabase=async file=>{if(!supabase)return null;let fileExt=file.name.split(`.`).pop(),fileName=`${Date.now()}_${Math.random().toString(36).substring(7)}.${fileExt}`,{error:error$1}=await supabase.storage.from(`blog-assets`).upload(fileName,file);if(error$1)return console.error(error$1),null;let{data}=supabase.storage.from(`blog-assets`).getPublicUrl(fileName);return data.publicUrl},generateBlogContent=async(topic,layoutId,tempImages)=>{let layout$1=LAYOUT_PRESETS.find(l$3=>l$3.id===layoutId)||LAYOUT_PRESETS[0],structureTemplate=JSON.stringify(layout$1.structure),MODEL_NAME=`gemini-2.5-flash`,prompt$1=`
        :         ' '.
        
        [  ]:
        "${topic}"
        
        [ -  ]:
        1. ** **:   ,       .
        2. ** **:        [JSON ] "text"   .
        3. ****:       ( ,   )  .
        4.     ,      .

        [JSON  -  (type)    ]:
        ${structureTemplate}
        
        [ ]:
         JSON Array .
    `;try{let res=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${GEMINI_API_KEY}`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({contents:[{parts:[{text:prompt$1}]}]})});if(!res.ok)throw Error(`API Error: ${res.statusText}`);let text=(await res.json()).candidates?.[0]?.content?.parts?.[0]?.text||`[]`;text=text.replace(/```json|```/g,``).trim();let aiBlocks;try{aiBlocks=JSON.parse(text)}catch{return[]}let imgIndex=0;return aiBlocks.map((b$3,idx)=>{let imageUrl,imageUrl2;return b$3.type.includes(`image`)&&(b$3.type===`image-double`?(imageUrl=imgIndex<tempImages.length?tempImages[imgIndex++]:null,imageUrl2=imgIndex<tempImages.length?tempImages[imgIndex++]:null):imageUrl=imgIndex<tempImages.length?tempImages[imgIndex++]:null),{id:`ai-${Date.now()}-${idx}`,type:b$3.type,text:b$3.text||``,imageUrl,imageUrl2,imageRotation:0,imageFit:`cover`}})}catch(e$4){throw console.error(e$4),Error(`AI  `)}};var sanitizeCoordinate$1=val=>{if(typeof val==`number`)return val;if(typeof val==`string`){if(/^-?\d+(\.\d+)?%$/.test(val))return val;let parsed=parseFloat(val);return isNaN(parsed)?0:parsed}return 0};const fetchPostsFromApi=async()=>{try{let response=await fetch(`${API_BASE_URL$3}`,{headers:getAuthHeaders$1()});if(!response.ok)throw Error(`  `);return(await response.json()).map(p$3=>({...p$3,id:Number(p$3.id),tags:(p$3.hashtags||p$3.tags||[]).map(t$4=>typeof t$4==`string`?t$4:t$4.name||t$4.tag||t$4.tagName||``).filter(Boolean),stickers:(p$3.stickers||[]).map(s$3=>({...s$3,x:sanitizeCoordinate$1(s$3.x),y:sanitizeCoordinate$1(s$3.y),w:sanitizeCoordinate$1(s$3.w),h:sanitizeCoordinate$1(s$3.h),opacity:s$3.opacity||1,widgetType:s$3.url&&s$3.url.startsWith(`widget://`)?decodeURIComponent(s$3.url.split(`widget://`)[1].split(`?`)[0]):void 0,widgetProps:s$3.url&&s$3.url.startsWith(`widget://`)?JSON.parse(decodeURIComponent(new URLSearchParams(s$3.url.split(`?`)[1]).get(`props`)||`{}`)):void 0})),floatingTexts:(p$3.floatingTexts||[]).map(t$4=>({...t$4,x:sanitizeCoordinate$1(t$4.x),y:sanitizeCoordinate$1(t$4.y),w:sanitizeCoordinate$1(t$4.w),h:sanitizeCoordinate$1(t$4.h),opacity:t$4.opacity||1})),floatingImages:(p$3.floatingImages||[]).map(i$4=>({...i$4,x:sanitizeCoordinate$1(i$4.x),y:sanitizeCoordinate$1(i$4.y),w:sanitizeCoordinate$1(i$4.w),h:sanitizeCoordinate$1(i$4.h),opacity:i$4.opacity||1})),titleStyles:p$3.titleStyles||{},albumIds:(p$3.targetAlbumIds||[]).map(t$4=>typeof t$4==`object`&&t$4?String(t$4.id):String(t$4)),isFavorite:p$3.isFavorite||!1,mode:p$3.mode||`AUTO`,isPublic:p$3.isPublic??!0,styles:p$3.styles||{},visibility:p$3.isPublic===!1?`private`:`public`}))}catch(error$1){return console.error(error$1),[]}},savePostToApi=async(postData,isUpdate=!1)=>{try{let url=isUpdate?`${API_BASE_URL$3}/${postData.id}`:API_BASE_URL$3,method=isUpdate?`PUT`:`POST`,payload={title:postData.title,titleStyles:postData.titleStyles||{},blocks:postData.blocks||[],stickers:(postData.stickers||[]).map(s$3=>s$3.widgetType?{...s$3,url:`widget://${encodeURIComponent(s$3.widgetType)}?props=${encodeURIComponent(JSON.stringify(s$3.widgetProps||{}))}`}:s$3),floatingTexts:postData.floatingTexts||[],floatingImages:postData.floatingImages||[],tags:postData.tags||[],mode:postData.mode||`AUTO`,targetAlbumIds:(postData.albumIds||[]).map(id$3=>Number(id$3)).filter(n$4=>!isNaN(n$4)),isFavorite:postData.isFavorite||!1,isPublic:postData.isPublic??!0,styles:postData.styles},response=await fetch(url,{method,headers:getAuthHeaders$1(),body:JSON.stringify(payload)});if(!response.ok){let errorText=await response.text();throw console.error(`Save failed with status:`,response.status,`Body:`,errorText),Error(` : ${response.status} ${errorText}`)}let savedPost=await response.json();return{...savedPost,id:Number(savedPost.id),tags:(savedPost.hashtags||[]).map(t$4=>typeof t$4==`string`?t$4:t$4.name||t$4.tag||t$4.tagName||``).filter(Boolean),stickers:(savedPost.stickers||[]).map(s$3=>({...s$3,x:sanitizeCoordinate$1(s$3.x),y:sanitizeCoordinate$1(s$3.y),w:sanitizeCoordinate$1(s$3.w),h:sanitizeCoordinate$1(s$3.h),opacity:s$3.opacity||1,widgetType:s$3.url&&s$3.url.startsWith(`widget://`)?decodeURIComponent(s$3.url.split(`widget://`)[1].split(`?`)[0]):void 0,widgetProps:s$3.url&&s$3.url.startsWith(`widget://`)?JSON.parse(decodeURIComponent(new URLSearchParams(s$3.url.split(`?`)[1]).get(`props`)||`{}`)):void 0})),floatingTexts:(savedPost.floatingTexts||[]).map(t$4=>({...t$4,x:sanitizeCoordinate$1(t$4.x),y:sanitizeCoordinate$1(t$4.y),w:sanitizeCoordinate$1(t$4.w),h:sanitizeCoordinate$1(t$4.h)})),floatingImages:(savedPost.floatingImages||[]).map(i$4=>({...i$4,x:sanitizeCoordinate$1(i$4.x),y:sanitizeCoordinate$1(i$4.y),w:sanitizeCoordinate$1(i$4.w),h:sanitizeCoordinate$1(i$4.h),opacity:i$4.opacity||1})),titleStyles:savedPost.titleStyles||{},albumIds:(savedPost.targetAlbumIds||[]).map(t$4=>typeof t$4==`object`&&t$4?String(t$4.id):String(t$4)),isFavorite:savedPost.isFavorite||!1,mode:savedPost.mode||`AUTO`,isPublic:savedPost.isPublic??!0,styles:savedPost.styles||{},visibility:savedPost.isPublic===!1?`private`:`public`}}catch(error$1){throw console.error(error$1),error$1}},deletePostApi=async id$3=>{try{let url=`${API_BASE_URL$3}/${id$3}`;if(!(await fetch(url,{method:`DELETE`,headers:getAuthHeaders$1()})).ok)throw Error(` `);return!0}catch(error$1){return console.error(` API :`,error$1),!1}},restorePostTemplateApi=async templateId=>{try{let response=await fetch(`${API_TEMPLATE_URL}/${templateId}/restore`,{method:`PUT`,headers:getAuthHeaders$1()});if(!response.ok){let errorText=await response.text();throw Error(`  : ${response.status} ${errorText}`)}return!0}catch(error$1){throw console.error(`  API :`,error$1),error$1}},fetchAlbumsFromApi=async()=>{try{let response=await fetch(`${API_ALBUM_URL}`,{headers:getAuthHeaders$1()});if(!response.ok)throw Error(`  `);return(await response.json()).map(a$4=>{let mappedTag=a$4.tag;return!mappedTag&&a$4.representativeHashtag&&(mappedTag=a$4.representativeHashtag.name||a$4.representativeHashtag.tag),{...a$4,id:String(a$4.id),parentId:a$4.parentId?String(a$4.parentId):null,tag:mappedTag||null,type:`album`,coverConfig:a$4.coverConfig||a$4.cover_config,postCount:a$4.postCount===void 0?0:a$4.postCount,folderCount:a$4.folderCount===void 0?0:a$4.folderCount}})}catch(error$1){return console.error(error$1),[]}},fetchRoomsFromApi=async()=>{try{let response=await fetch(`${API_ROOM_URL}/my`,{headers:getAuthHeaders$1()});if(!response.ok)throw Error(`  `);return(await response.json()).map(r$4=>({...r$4,id:`room-${r$4.id}`,parentId:null,tag:r$4.tag||(r$4.representativeHashtag?r$4.representativeHashtag.name||r$4.representativeHashtag.tag:null),type:`room`,role:r$4.role,ownerId:r$4.ownerId||(r$4.owner?r$4.owner.id:null),ownerEmail:r$4.ownerEmail||(r$4.owner?r$4.owner.email:null),coverConfig:r$4.coverConfig||r$4.cover_config,postCount:r$4.postCount===void 0?0:r$4.postCount,folderCount:r$4.folderCount===void 0?0:r$4.folderCount}))}catch(error$1){return console.error(error$1),[]}},joinRoomApi=async(roomId,password)=>{try{let numericId=cleanId(roomId),response=await fetch(`${API_ROOM_URL}/${numericId}/join`,{method:`POST`,headers:getAuthHeaders$1(),body:JSON.stringify({password})});if(!response.ok){let errorMessage=`  .`;try{let text$1=await response.text();if(text$1)try{errorMessage=JSON.parse(text$1).message||errorMessage}catch{text$1.length<200&&(errorMessage=text$1)}}catch{}throw Error(errorMessage)}let text=await response.text();return text?JSON.parse(text):{}}catch(error$1){throw console.error(error$1),error$1}},leaveRoomApi=async roomId=>{try{let response=await fetch(`${API_ROOM_URL}/${cleanId(roomId)}/leave`,{method:`DELETE`,headers:getAuthHeaders$1()});if(!response.ok){let err=await response.text();throw Error(err||`  `)}return!0}catch(error$1){return console.error(error$1),!1}},kickMemberApi=async(roomId,userId)=>{try{if(!(await fetch(`${API_ROOM_URL}/${cleanId(roomId)}/members/${userId}`,{method:`DELETE`,headers:getAuthHeaders$1()})).ok)throw Error(`  `);return!0}catch(error$1){return console.error(error$1),!1}},fetchRoomMembersApi=async roomId=>{try{let response=await fetch(`${API_ROOM_URL}/${cleanId(roomId)}/members`,{headers:getAuthHeaders$1()});if(!response.ok)throw Error(`   `);return await response.json()}catch(error$1){return console.error(error$1),[]}},deleteRoomApi=async roomId=>{try{if(!(await fetch(`${API_ROOM_URL}/${cleanId(roomId)}`,{method:`DELETE`,headers:getAuthHeaders$1()})).ok)throw Error(`  `);return!0}catch(error$1){return console.error(error$1),!1}},fetchAlbumApi=async id$3=>{try{let response=await fetch(`${API_ALBUM_URL}/${id$3}`,{headers:getAuthHeaders$1()});if(!response.ok)throw Error(`   `);let album=await response.json();return{...album,id:String(album.id),parentId:album.parentId?String(album.parentId):null,roomConfig:album.roomConfig,coverConfig:album.coverConfig||album.cover_config,postCount:album.postCount===void 0?0:album.postCount,folderCount:album.folderCount===void 0?0:album.folderCount}}catch(error$1){return console.error(error$1),null}},fetchRoomApi=async id$3=>{try{let response=await fetch(`${API_ROOM_URL}/${cleanId(id$3)}`,{headers:getAuthHeaders$1()});if(!response.ok)throw Error(`   `);let room=await response.json();return{...room,id:`room-${room.id}`,parentId:null,roomConfig:{description:room.description,password:room.password},coverConfig:room.coverConfig||room.cover_config,role:room.role,ownerId:room.ownerId||(room.owner?room.owner.id:null),ownerEmail:room.ownerEmail||(room.owner?room.owner.email:null),postCount:room.postCount===void 0?0:room.postCount,folderCount:room.folderCount===void 0?0:room.folderCount,type:`room`}}catch(error$1){return console.error(error$1),null}},createAlbumApi=async albumData=>{try{let response=await fetch(`${API_ALBUM_URL}`,{method:`POST`,headers:getAuthHeaders$1(),body:JSON.stringify(albumData)});if(!response.ok)throw Error(`  `);return await response.json()}catch(error$1){return console.error(error$1),null}},createRoomApi=async roomData=>{try{let response=await fetch(`${API_ROOM_URL}`,{method:`POST`,headers:getAuthHeaders$1(),body:JSON.stringify(roomData)});if(!response.ok){let errorMsg=`  .`;try{let errData=await response.json();errData.message&&(errorMsg=errData.message)}catch{try{let text=await response.text();text&&text.length<100&&(errorMsg=text)}catch{}}throw response.status===403||errorMsg.includes(``)?Error(`   .
(      .)`):Error(errorMsg)}return await response.json()}catch(error$1){throw console.error(error$1),error$1}},updateRoomApi=async(id$3,roomData)=>{try{let response=await fetch(`${API_ROOM_URL}/${cleanId(id$3)}`,{method:`PUT`,headers:getAuthHeaders$1(),body:JSON.stringify(roomData)});if(!response.ok)throw Error(`  `);return await response.json()}catch(error$1){return console.error(error$1),null}},updateAlbumApi=async(id$3,albumData)=>{try{let response=await fetch(`${API_ALBUM_URL}/${id$3}`,{method:`PUT`,headers:getAuthHeaders$1(),body:JSON.stringify(albumData)});if(!response.ok)throw Error(`  `);return await response.json()}catch(error$1){return console.error(error$1),null}},deleteAlbumApi=async id$3=>{try{if(!(await fetch(`${API_ALBUM_URL}/${id$3}`,{method:`DELETE`,headers:getAuthHeaders$1()})).ok)throw Error(`  `);return!0}catch(error$1){return console.error(error$1),!1}},fetchAlbumContents=async(albumId,providedPosts,providedAlbums,type=`album`)=>{let targetId=String(albumId);if(targetId===`__all__`||targetId===`__others__`){let posts=providedPosts,albums=providedAlbums;posts||=await fetchPostsFromApi(),albums||=await fetchAlbumsFromApi();let localPosts=posts||[],localAlbums=albums||[],contents=[],matchedPosts=[];matchedPosts=targetId===`__all__`?localPosts:localPosts.filter(p$3=>!(p$3.tags&&p$3.tags.length>0)),matchedPosts.forEach(p$3=>contents.push({type:`POST`,data:p$3}));let matchedFolders=localAlbums.filter(a$4=>targetId===`__all__`?a$4.parentId:!1).map(a$4=>{let parent=localAlbums.find(p$3=>String(p$3.id)===String(a$4.parentId));return{...a$4,parentName:parent?parent.name:null}});if(targetId===`__all__`){let untaggedCount=localPosts.filter(p$3=>!p$3.tags||p$3.tags.length===0).length;untaggedCount>0&&matchedFolders.unshift({id:`__others__`,name:``,type:`FOLDER`,parentId:null,isSystem:!0,postCount:untaggedCount})}matchedFolders.forEach(a$4=>contents.push({type:`FOLDER`,data:a$4}));let sortedFolders=matchedFolders.sort((a$4,b$3)=>a$4.id===`__others__`?-1:b$3.id===`__others__`?1:a$4.name.localeCompare(b$3.name)),sortedPosts=matchedPosts.sort((a$4,b$3)=>a$4.isFavorite&&!b$3.isFavorite?-1:!a$4.isFavorite&&b$3.isFavorite?1:new Date(b$3.date).getTime()-new Date(a$4.date).getTime());return[...sortedFolders.map(d$3=>({type:`FOLDER`,data:d$3})),...sortedPosts.map(d$3=>({type:`POST`,data:d$3}))]}try{let url=`${API_ALBUM_URL}/${targetId}/contents`;type===`room`&&(url=`${API_ROOM_URL}/${cleanId(targetId)}/posts`);let response=await fetch(url,{headers:getAuthHeaders$1()});if(!response.ok)throw Error(`${type===`room`?``:``}   `);let data=await response.json(),contents=[];return data.albums&&Array.isArray(data.albums)&&data.albums.forEach(a$4=>contents.push({type:`FOLDER`,data:a$4})),data.posts&&Array.isArray(data.posts)&&data.posts.forEach(p$3=>contents.push({type:`POST`,data:{...p$3,tags:p$3.hashtags||p$3.tags||[],visibility:p$3.isPublic===!1?`private`:`public`,stickers:(p$3.stickers||[]).map(s$3=>({...s$3,x:sanitizeCoordinate$1(s$3.x),y:sanitizeCoordinate$1(s$3.y),w:sanitizeCoordinate$1(s$3.w),h:sanitizeCoordinate$1(s$3.h),opacity:s$3.opacity||1,widgetType:s$3.url&&s$3.url.startsWith(`widget://`)?decodeURIComponent(s$3.url.split(`widget://`)[1].split(`?`)[0]):void 0,widgetProps:s$3.url&&s$3.url.startsWith(`widget://`)?JSON.parse(decodeURIComponent(new URLSearchParams(s$3.url.split(`?`)[1]).get(`props`)||`{}`)):void 0}))}})),Array.isArray(data)&&data.forEach(item=>{if(item.type&&item.content){item.type===`POST`?contents.push({type:`POST`,data:{...item.content,tags:item.content.hashtags||item.content.tags||[],visibility:item.content.isPublic===!1?`private`:`public`,stickers:(item.content.stickers||[]).map(s$3=>({...s$3,x:sanitizeCoordinate$1(s$3.x),y:sanitizeCoordinate$1(s$3.y),w:sanitizeCoordinate$1(s$3.w),h:sanitizeCoordinate$1(s$3.h),opacity:s$3.opacity||1,widgetType:s$3.url&&s$3.url.startsWith(`widget://`)?decodeURIComponent(s$3.url.split(`widget://`)[1].split(`?`)[0]):void 0,widgetProps:s$3.url&&s$3.url.startsWith(`widget://`)?JSON.parse(decodeURIComponent(new URLSearchParams(s$3.url.split(`?`)[1]).get(`props`)||`{}`)):void 0}))}}):(item.type===`FOLDER`||item.type===`ALBUM`)&&contents.push({type:`FOLDER`,data:{...item.content,id:String(item.content.id),parentId:item.content.parentId?String(item.content.parentId):null}});return}item.name&&!item.title?contents.push({type:`FOLDER`,data:{...item,id:String(item.id),parentId:item.parentId?String(item.parentId):null}}):item.title&&contents.push({type:`POST`,data:{...item,tags:item.hashtags||item.tags||[],visibility:item.isPublic===!1?`private`:`public`,stickers:(item.stickers||[]).map(s$3=>({...s$3,x:sanitizeCoordinate$1(s$3.x),y:sanitizeCoordinate$1(s$3.y),w:sanitizeCoordinate$1(s$3.w),h:sanitizeCoordinate$1(s$3.h),opacity:s$3.opacity||1,widgetType:s$3.url&&s$3.url.startsWith(`widget://`)?decodeURIComponent(s$3.url.split(`widget://`)[1].split(`?`)[0]):void 0,widgetProps:s$3.url&&s$3.url.startsWith(`widget://`)?JSON.parse(decodeURIComponent(new URLSearchParams(s$3.url.split(`?`)[1]).get(`props`)||`{}`)):void 0}))}})}),contents}catch(e$4){return console.error(e$4),[]}},manageAlbumContentApi=async(albumId,action,postId,sourceAlbumId,containerType=`album`)=>{try{let payload={action,contentId:Number(postId),type:`POST`};action===`MOVE`&&sourceAlbumId&&(payload.sourceAlbumId=Number(sourceAlbumId));let url=`${API_ALBUM_URL}/${albumId}/manage`;return containerType===`room`&&(url=`${API_ROOM_URL}/${cleanId(albumId)}/manage`),(await fetch(url,{method:`POST`,headers:getAuthHeaders$1(),body:JSON.stringify(payload)})).ok}catch(error$1){return console.error(error$1),!1}},manageAlbumItem=async(albumId,action,type,contentId,sourceAlbumId,containerType=`album`)=>{if(type===`POST`)return!!await manageAlbumContentApi(albumId,action,contentId,sourceAlbumId,containerType);if(type===`FOLDER`){let targetAlbum=(await fetchAlbumsFromApi()).find(a$4=>String(a$4.id)===String(contentId));return!targetAlbum||containerType===`room`?!1:!!await updateAlbumApi(contentId,{...targetAlbum,parentId:action===`MOVE`?albumId===`__all__`?null:Number(albumId):targetAlbum.parentId})}return!1},createPostTemplateApi=async templateData=>{try{let response=await fetch(`${API_TEMPLATE_URL}`,{method:`POST`,headers:getAuthHeaders$1(),body:JSON.stringify({...templateData,stickers:(templateData.stickers||[]).map(s$3=>s$3.widgetType?{...s$3,url:`widget://${encodeURIComponent(s$3.widgetType)}?props=${encodeURIComponent(JSON.stringify(s$3.widgetProps||{}))}`}:s$3)})});if(!response.ok)throw Error(`  `);return await response.json()}catch(error$1){return console.error(error$1),null}},fetchPostTemplateById=async templateId=>{try{let response=await fetch(`${API_TEMPLATE_URL}/${templateId}`,{headers:getAuthHeaders$1()});if(!response.ok)throw Error(`   `);let data=await response.json();return{...data,stickers:(data.stickers||[]).map(s$3=>({...s$3,x:sanitizeCoordinate$1(s$3.x),y:sanitizeCoordinate$1(s$3.y),w:sanitizeCoordinate$1(s$3.w),h:sanitizeCoordinate$1(s$3.h),opacity:s$3.opacity||1,widgetType:s$3.url&&s$3.url.startsWith(`widget://`)?decodeURIComponent(s$3.url.split(`widget://`)[1].split(`?`)[0]):void 0,widgetProps:s$3.url&&s$3.url.startsWith(`widget://`)?JSON.parse(decodeURIComponent(new URLSearchParams(s$3.url.split(`?`)[1]).get(`props`)||`{}`)):void 0})),floatingTexts:(data.floatingTexts||[]).map(text=>({...text,x:sanitizeCoordinate$1(text.x),y:sanitizeCoordinate$1(text.y),w:sanitizeCoordinate$1(text.w),h:sanitizeCoordinate$1(text.h)})),floatingImages:(data.floatingImages||[]).map(img=>({...img,x:sanitizeCoordinate$1(img.x),y:sanitizeCoordinate$1(img.y),w:sanitizeCoordinate$1(img.w),h:sanitizeCoordinate$1(img.h)}))}}catch(error$1){return console.error(`fetchPostTemplateById error`,error$1),null}},fetchMyPostTemplatesApi=async showHidden=>{try{let url=`${API_TEMPLATE_URL}/my`;showHidden&&(url+=`?showHidden=${showHidden}`);let response=await fetch(url,{headers:getAuthHeaders$1()});if(!response.ok)throw Error(`   `);return(await response.json()).map(t$4=>({...t$4,thumbnailUrl:t$4.thumbnailUrl,stickers:(t$4.stickers||[]).map(s$3=>({...s$3,x:sanitizeCoordinate$1(s$3.x),y:sanitizeCoordinate$1(s$3.y),w:sanitizeCoordinate$1(s$3.w),h:sanitizeCoordinate$1(s$3.h),opacity:s$3.opacity||1,widgetType:s$3.url&&s$3.url.startsWith(`widget://`)?decodeURIComponent(s$3.url.split(`widget://`)[1].split(`?`)[0]):void 0,widgetProps:s$3.url&&s$3.url.startsWith(`widget://`)?JSON.parse(decodeURIComponent(new URLSearchParams(s$3.url.split(`?`)[1]).get(`props`)||`{}`)):void 0})),floatingTexts:(t$4.floatingTexts||[]).map(text=>({...text,x:sanitizeCoordinate$1(text.x),y:sanitizeCoordinate$1(text.y),w:sanitizeCoordinate$1(text.w),h:sanitizeCoordinate$1(text.h)})),floatingImages:(t$4.floatingImages||[]).map(img=>({...img,x:sanitizeCoordinate$1(img.x),y:sanitizeCoordinate$1(img.y),w:sanitizeCoordinate$1(img.w),h:sanitizeCoordinate$1(img.h)}))}))}catch(error$1){return console.error(error$1),[]}},deletePostTemplateApi=async id$3=>{try{if(!(await fetch(`${API_TEMPLATE_URL}/${id$3}`,{method:`DELETE`,headers:getAuthHeaders$1()})).ok)throw Error(`  `);return!0}catch(error$1){return console.error(error$1),!1}};var HeatmapWidget=({viewMode,themeColor})=>{let[contributions,setContributions]=(0,import_react.useState)({}),[loading,setLoading]=(0,import_react.useState)(!0);(0,import_react.useEffect)(()=>{(async()=>{try{let posts=await fetchPostsFromApi(),counts={};posts.forEach(post=>{let dateStr=post.createdAt||post.created_at||post.date;if(dateStr){let dateKey=new Date(dateStr).toISOString().split(`T`)[0];counts[dateKey]=(counts[dateKey]||0)+1}}),setContributions(counts)}catch(error$1){console.error(`   :`,error$1)}finally{setLoading(!1)}})()},[]);let gridData=(0,import_react.useMemo)(()=>{let daysToProcess=viewMode===`year`?365:viewMode===`month`?30:7,today=new Date,data=[];for(let i$4=daysToProcess-1;i$4>=0;i$4--){let d$3=new Date;d$3.setDate(today.getDate()-i$4);let dateKey=d$3.toISOString().split(`T`)[0],count=contributions[dateKey]||0,level=0;count>=1&&(level=1),count>=3&&(level=2),count>=5&&(level=3),count>=7&&(level=4),data.push({date:dateKey,count,level})}return data},[contributions,viewMode]),getLevelColor=level=>level===0?`#e5e7eb`:level===1?`${themeColor}40`:level===2?`${themeColor}80`:level===3?`${themeColor}BF`:`${themeColor}`;if(loading)return(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs text-gray-400 animate-pulse`,children:`  ...`});let weeks=[],currentWeek=[];return gridData.forEach((day,idx)=>{currentWeek.push(day),(currentWeek.length===7||idx===gridData.length-1)&&(weeks.push(currentWeek),currentWeek=[])}),(0,import_jsx_runtime.jsxs)(`div`,{className:`h-full w-full flex flex-col gap-2 w-full h-full overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-end gap-1 overflow-x-auto pb-1 scrollbar-thin scrollbar-thumb-gray-200`,children:weeks.map((week,wIdx)=>(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-col gap-1`,children:week.map(day=>(0,import_jsx_runtime.jsx)(`div`,{className:`w-2.5 h-2.5 rounded-[2px] transition-all hover:ring-1 hover:ring-gray-400 relative group`,style:{backgroundColor:getLevelColor(day.level)}},day.date))},wIdx))}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center text-[10px] text-gray-400 px-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:`Less`}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex gap-0.5`,children:[0,1,2,3,4].map(l$3=>(0,import_jsx_runtime.jsx)(`div`,{className:`w-2 h-2 rounded-[1px]`,style:{backgroundColor:getLevelColor(l$3)}},l$3))}),(0,import_jsx_runtime.jsx)(`span`,{children:`More`})]})]})},HeatmapWidget_default=HeatmapWidget,BookInfoWidget=({block})=>{let{styles:styles$1}=block,bookData=(block.content||{}).bookData||null,[isExpanded,setIsExpanded]=(0,import_react.useState)(!1);if(!bookData)return(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full min-h-[120px] bg-gray-50 rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center p-4 text-center select-none`,children:[(0,import_jsx_runtime.jsx)(BookOpen,{className:`mx-auto text-gray-400 mb-2`,size:24}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-gray-500 font-bold mb-1`,children:`  `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-[10px] text-gray-400`,children:[` `,(0,import_jsx_runtime.jsx)(`br`,{}),`  .`]})]});let hasLongDesc=bookData.description&&bookData.description.length>60;return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-4 p-4 bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden h-full box-border`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex-shrink-0 w-24 bg-gray-100 rounded overflow-hidden shadow-sm border border-gray-100 relative`,children:bookData.thumbnail?(0,import_jsx_runtime.jsx)(`img`,{src:bookData.thumbnail,alt:bookData.title,className:`w-full h-full object-cover`}):(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full flex flex-col items-center justify-center text-gray-400`,children:[(0,import_jsx_runtime.jsx)(BookOpen,{size:24}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] mt-1`,children:`No Image`})]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col min-w-0 flex-1 h-full`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-shrink-0 mb-2`,children:[(0,import_jsx_runtime.jsx)(`h3`,{style:{color:styles$1.color},className:`text-lg font-bold text-gray-900 truncate mb-1 leading-tight`,children:bookData.title}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-xs text-gray-500 truncate`,children:[Array.isArray(bookData.authors)?bookData.authors.join(`, `):bookData.authors,bookData.publisher&&`  ${bookData.publisher}`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 min-h-0 relative flex flex-col`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-sm text-gray-600 leading-relaxed whitespace-pre-wrap w-full transition-all nodrag
                            ${isExpanded?`overflow-y-auto scrollbar-thin h-full pr-1`:`line-clamp-3 overflow-hidden`}
                        `,onWheelCapture:e$4=>e$4.stopPropagation(),onPointerDown:e$4=>e$4.stopPropagation(),children:bookData.description||`  .`}),hasLongDesc&&(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),setIsExpanded(!isExpanded)},className:`text-[10px] font-bold text-gray-400 hover:text-indigo-600 self-end mt-1 flex-shrink-0`,children:isExpanded?` `:`... `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`mt-2 pt-2 border-t border-gray-50 flex items-center justify-between flex-shrink-0`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-gray-400`,children:bookData.publishedDate}),bookData.previewLink&&(0,import_jsx_runtime.jsxs)(`a`,{href:bookData.previewLink,target:`_blank`,rel:`noreferrer`,className:`text-[10px] font-bold text-indigo-600 flex items-center gap-0.5 opacity-80 hover:opacity-100 hover:underline cursor-pointer`,onPointerDown:e$4=>e$4.stopPropagation(),children:[` `,(0,import_jsx_runtime.jsx)(ChevronRight,{size:10})]})]})]})]})},BookInfoWidget_default=BookInfoWidget,MovieTicketWidget=({block})=>{let{styles:styles$1}=block,content=block.content||{},movieData=content.movieData||null,[showReview,setShowReview]=(0,import_react.useState)(content.isReviewOpen||!1);return(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col relative group`,children:movieData?(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex h-32 relative`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center opacity-10 blur-sm`,style:{backgroundImage:`url(${movieData.poster||`nothing`})`}}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-24 h-full flex-shrink-0 relative z-10 bg-gray-900 border-r border-gray-200 overflow-hidden`,children:movieData.poster?(0,import_jsx_runtime.jsx)(`img`,{src:movieData.poster,alt:`poster`,className:`w-full h-full object-cover`}):(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full flex flex-col items-center justify-center text-gray-600 gap-1`,children:[(0,import_jsx_runtime.jsx)(Film,{size:20}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[9px] text-gray-500`,children:`No Image`})]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 p-3 flex flex-col justify-between relative z-10 min-w-0 bg-transparent`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h3`,{style:{color:styles$1.color},className:`text-lg font-black text-gray-900 truncate leading-tight tracking-tight`,children:movieData.title}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-xs text-gray-500 font-medium mt-0.5 flex flex-wrap gap-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:movieData.year}),movieData.director&&(0,import_jsx_runtime.jsxs)(`span`,{children:[` `,movieData.director]}),movieData.genre&&(0,import_jsx_runtime.jsxs)(`span`,{className:`text-gray-400`,children:[` `,movieData.genre.split(`,`)[0]]})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`space-y-1`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-indigo-600 font-bold bg-indigo-50/80 w-fit px-2 py-1 rounded backdrop-blur-[2px]`,children:[(0,import_jsx_runtime.jsx)(CalendarDays,{size:12}),(0,import_jsx_runtime.jsx)(`span`,{children:content.watchedDate||` `})]})})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-gray-50 border-t border-dashed border-gray-300 flex flex-col flex-1 min-h-0 relative z-20`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:e$4=>{e$4.stopPropagation(),setShowReview(!showReview)},className:`w-full py-1.5 flex items-center justify-center gap-1 text-[10px] font-bold text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors`,children:[showReview?(0,import_jsx_runtime.jsx)(ChevronUp,{size:12}):(0,import_jsx_runtime.jsx)(ChevronDown,{size:12}),showReview?` `:`  `]}),showReview&&(0,import_jsx_runtime.jsx)(`div`,{className:`p-3 pt-0 flex-1 overflow-y-auto scrollbar-thin nodrag cursor-text`,onWheelCapture:e$4=>e$4.stopPropagation(),children:content.review?(0,import_jsx_runtime.jsxs)(`p`,{className:`text-sm text-gray-700 leading-relaxed whitespace-pre-wrap font-medium`,children:[(0,import_jsx_runtime.jsx)(MessageSquare,{size:12,className:`inline mr-1 text-gray-400 -mt-0.5`}),content.review]}):(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-gray-400 italic text-center py-2`,children:`  .`})})]})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full min-h-[120px] bg-gray-50 flex flex-col items-center justify-center p-4 text-center text-gray-400`,children:[(0,import_jsx_runtime.jsx)(Clapperboard,{className:`mx-auto mb-2`,size:28}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm font-bold`,children:`  `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs mt-1`,children:`   `})]})})},MovieTicketWidget_default=MovieTicketWidget,UnitConverterWidget=({block,onUpdateBlock})=>{let{content,styles:styles$1,id:id$3}=block,category=content.category||`length`,value=content.value??1,units={length:[{label:` (m)`,ratio:1},{label:` (cm)`,ratio:.01},{label:` (mm)`,ratio:.001},{label:` (km)`,ratio:1e3},{label:` (in)`,ratio:.0254},{label:` (ft)`,ratio:.3048},{label:` (yd)`,ratio:.9144}],weight:[{label:` (kg)`,ratio:1},{label:` (g)`,ratio:.001},{label:` (mg)`,ratio:1e-6},{label:` (lb)`,ratio:.453592},{label:` (oz)`,ratio:.0283495}],temperature:[{label:` (C)`,ratio:1,offset:0},{label:` (F)`,ratio:1,offset:0},{label:` (K)`,ratio:1,offset:0}],area:[{label:` (py)`,ratio:3.30579},{label:` (m)`,ratio:1},{label:` (ac)`,ratio:4046.86},{label:` (ha)`,ratio:1e4}]},currentUnits=units[category]||units.length,fromUnitIdx=content.fromUnitIdx===void 0?0:content.fromUnitIdx,toUnitIdx=content.toUnitIdx===void 0?1:content.toUnitIdx,result=((val,fromIdx,toIdx,cat)=>{if(cat===`temperature`){let fromLabel=currentUnits[fromIdx].label,toLabel=currentUnits[toIdx].label,celsius=val;return fromLabel.includes(`F`)?celsius=(val-32)*5/9:fromLabel.includes(`K`)&&(celsius=val-273.15),toLabel.includes(`F`)?celsius*9/5+32:toLabel.includes(`K`)?celsius+273.15:celsius}else return val*currentUnits[fromIdx].ratio/currentUnits[toIdx].ratio})(Number(value),fromUnitIdx,toUnitIdx,category),update$1=(key$1,val)=>{onUpdateBlock&&onUpdateBlock(id$3,{content:{...content,[key$1]:val}})};return(0,import_jsx_runtime.jsxs)(`div`,{style:{backgroundColor:styles$1.bgColor||`#ffffff`,color:styles$1.color||`#1f2937`},className:`p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col gap-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center border-b border-gray-100 pb-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold text-gray-500 uppercase tracking-wider`,children:content.title||` `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded-full font-bold uppercase`,children:category})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`number`,value,onChange:e$4=>update$1(`value`,Number(e$4.target.value)),className:`w-full p-2 bg-gray-50 border border-gray-200 rounded text-lg font-bold outline-none focus:ring-2 focus:ring-indigo-500 transition-all text-gray-800`}),(0,import_jsx_runtime.jsx)(`select`,{value:fromUnitIdx,onChange:e$4=>update$1(`fromUnitIdx`,Number(e$4.target.value)),className:`w-full mt-1 text-xs p-1 bg-transparent text-gray-500 outline-none cursor-pointer hover:text-indigo-600`,children:currentUnits.map((u$3,i$4)=>(0,import_jsx_runtime.jsx)(`option`,{value:i$4,children:u$3.label},i$4))})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-gray-400`,children:(0,import_jsx_runtime.jsx)(ArrowLeftRight,{size:20})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full p-2 bg-indigo-50 border border-indigo-100 rounded text-lg font-bold text-indigo-700 truncate`,children:Number.isInteger(result)?result:result.toFixed(4).replace(/\.?0+$/,``)}),(0,import_jsx_runtime.jsx)(`select`,{value:toUnitIdx,onChange:e$4=>update$1(`toUnitIdx`,Number(e$4.target.value)),className:`w-full mt-1 text-xs p-1 bg-transparent text-gray-500 outline-none cursor-pointer hover:text-indigo-600`,children:currentUnits.map((u$3,i$4)=>(0,import_jsx_runtime.jsx)(`option`,{value:i$4,children:u$3.label},i$4))})]})]})]})},UnitConverterWidget_default=UnitConverterWidget;function LinkBookmarkWidget({block,onUpdateBlock}){let{content}=block,[isLoading,setIsLoading]=(0,import_react.useState)(!1),[inputValue,setInputValue]=(0,import_react.useState)(content.url||``),[metaData,setMetaData]=(0,import_react.useState)(content.metaData||null),handleUrlSubmit=async e$4=>{if(e$4.preventDefault(),inputValue){setIsLoading(!0);try{let validUrl=inputValue;validUrl.startsWith(`http`)||(validUrl=`https://${validUrl}`);let newMeta={url:validUrl,title:validUrl,description:`No description available`,siteName:new URL(validUrl).hostname};setMetaData(newMeta),onUpdateBlock(block.id,{content:{...content,url:validUrl,metaData:newMeta}})}catch(err){console.error(`Invalid URL`,err)}finally{setIsLoading(!1)}}};if(!content.url&&!metaData)return(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full min-h-[120px] bg-gray-50 border border-gray-200 rounded-xl flex flex-col items-center justify-center p-4 gap-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col items-center gap-1 text-gray-400`,children:[(0,import_jsx_runtime.jsx)(Link$1,{size:24}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-medium`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`form`,{onSubmit:handleUrlSubmit,className:`flex w-full max-w-sm gap-2`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`text`,placeholder:`https://example.com`,className:`flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white`,value:inputValue,onChange:e$4=>setInputValue(e$4.target.value)}),(0,import_jsx_runtime.jsx)(`button`,{type:`submit`,className:`px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors`,disabled:isLoading,children:isLoading?(0,import_jsx_runtime.jsx)(LoaderCircle,{size:16,className:`animate-spin`}):``})]})]});let data=content.metaData||metaData||{url:content.url};return(0,import_jsx_runtime.jsxs)(`a`,{href:data.url,target:`_blank`,rel:`noopener noreferrer`,className:`group block w-full h-full bg-white border border-gray-200 rounded-xl overflow-hidden hover:shadow-md hover:border-indigo-300 transition-all flex flex-col md:flex-row no-underline`,onClick:e$4=>{},children:[data.image?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full md:w-1/3 h-48 md:h-auto bg-gray-100 flex-shrink-0 relative overflow-hidden`,children:(0,import_jsx_runtime.jsx)(`img`,{src:data.image,alt:data.title,className:`w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500`,onError:e$4=>{e$4.currentTarget.style.display=`none`}})}):(0,import_jsx_runtime.jsx)(`div`,{className:`w-full md:w-32 h-32 md:h-auto bg-gray-50 flex-shrink-0 flex items-center justify-center text-gray-300`,children:(0,import_jsx_runtime.jsx)(Image$1,{size:32})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 p-4 flex flex-col justify-between min-w-0`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-1`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold text-gray-800 line-clamp-2 leading-tight group-hover:text-indigo-600 transition-colors`,children:data.title||data.url}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm text-gray-500 line-clamp-2 md:line-clamp-3`,children:data.description||`No description`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 mt-3 text-xs text-gray-400 font-medium`,children:[data.siteName&&(0,import_jsx_runtime.jsxs)(`span`,{className:`flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:`https://www.google.com/s2/favicons?domain=${new URL(data.url).hostname}&sz=32`,alt:``,className:`w-4 h-4 rounded-sm`}),data.siteName]}),(0,import_jsx_runtime.jsxs)(`span`,{className:`flex items-center gap-1 ml-auto`,children:[new URL(data.url).hostname,(0,import_jsx_runtime.jsx)(ExternalLink,{size:10})]})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity`,children:(0,import_jsx_runtime.jsxs)(`button`,{onClick:e$4=>{e$4.preventDefault(),e$4.stopPropagation(),setMetaData(null),onUpdateBlock(block.id,{content:{...content,url:``,metaData:null}})},className:`p-1 bg-white/90 rounded text-gray-500 hover:text-red-500 shadow-sm border border-gray-200`,title:` `,children:[(0,import_jsx_runtime.jsx)(LoaderCircle,{size:14,className:`rotate-45`}),` `]})})]})}function DatabaseWidget({block,onUpdateBlock}){let{content,styles:styles$1}=block,headers=content.headers||[``,``],rows=content.rows||[],showTotal=content.showTotal===!0,totalMap=(0,import_react.useMemo)(()=>{if(!showTotal)return{};let totals={};return rows.forEach(row=>{row.forEach((cell,index$2)=>{let cleanVal=String(cell).replace(/[^0-9.-]/g,``),num=parseFloat(cleanVal);isNaN(num)||(totals[index$2]=(totals[index$2]||0)+num)})}),totals},[rows,showTotal]),formatCurrency=val=>new Intl.NumberFormat(`ko-KR`).format(val);return(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full bg-white rounded-xl border border-gray-200 shadow-sm flex flex-col overflow-hidden`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-gray-50 px-4 py-2 border-b border-gray-100 flex items-center justify-between shrink-0`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Database,{size:14,className:`text-gray-500`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold text-gray-600 truncate`,style:{color:styles$1.color},children:content.title||``})]}),showTotal&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 text-[10px] text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-full`,children:[(0,import_jsx_runtime.jsx)(Calculator,{size:10}),(0,import_jsx_runtime.jsx)(`span`,{children:`  ON`})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 overflow-auto scrollbar-thin`,children:(0,import_jsx_runtime.jsxs)(`table`,{className:`w-full min-w-max text-sm text-left border-collapse`,children:[(0,import_jsx_runtime.jsx)(`thead`,{className:`text-xs text-gray-500 uppercase bg-gray-50/50 sticky top-0 z-10`,children:(0,import_jsx_runtime.jsx)(`tr`,{children:headers.map((h$3,i$4)=>(0,import_jsx_runtime.jsx)(`th`,{className:`px-4 py-2 font-medium border-b border-gray-100 whitespace-nowrap bg-gray-50/50`,children:h$3},i$4))})}),(0,import_jsx_runtime.jsx)(`tbody`,{children:rows.map((row,i$4)=>(0,import_jsx_runtime.jsx)(`tr`,{className:`border-b border-gray-50 last:border-0 hover:bg-gray-50/50 transition-colors`,children:row.map((cell,j$2)=>(0,import_jsx_runtime.jsx)(`td`,{className:`px-4 py-2 text-gray-700 whitespace-nowrap`,children:[``,`Success`].includes(cell)?(0,import_jsx_runtime.jsx)(`span`,{className:`px-2 py-0.5 rounded-full bg-green-50 text-green-600 text-[10px] font-bold`,children:cell}):[``,`Processing`].includes(cell)?(0,import_jsx_runtime.jsx)(`span`,{className:`px-2 py-0.5 rounded-full bg-blue-50 text-blue-600 text-[10px] font-bold`,children:cell}):[``,`Pending`].includes(cell)?(0,import_jsx_runtime.jsx)(`span`,{className:`px-2 py-0.5 rounded-full bg-gray-100 text-gray-500 text-[10px] font-bold`,children:cell}):([``,``,``].includes(cell),cell)},j$2))},i$4))}),showTotal&&(0,import_jsx_runtime.jsx)(`tfoot`,{className:`bg-indigo-50/30 font-bold text-gray-800 sticky bottom-0 z-10 border-t border-indigo-100`,children:(0,import_jsx_runtime.jsx)(`tr`,{children:headers.map((_$1,i$4)=>(0,import_jsx_runtime.jsx)(`td`,{className:`px-4 py-2 whitespace-nowrap text-indigo-900`,children:i$4===0?``:totalMap[i$4]===void 0?`-`:formatCurrency(totalMap[i$4])},i$4))})})]})}),rows.length===0&&(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 text-center text-xs text-gray-400`,children:` .`})]})}function TravelPlanWidget({block,onUpdateBlock}){let{content}=block,rawData=content.travelData||{},data={title:rawData.title||``,startDate:rawData.startDate||``,endDate:rawData.endDate||``,currency:rawData.currency||`KRW`,columns:rawData.columns||rawData.headers?.map((h$3,i$4)=>({id:`c-${i$4}`,name:h$3,type:h$3.includes(`Cost`)||h$3.includes(``)?`number`:`text`}))||[{id:`c1`,name:``,type:`date`,width:100},{id:`c2`,name:``,type:`text`,width:80},{id:`c3`,name:``,type:`text`,width:150},{id:`c4`,name:``,type:`select`,options:[``,``,``,``,``],width:100},{id:`c5`,name:``,type:`checkbox`,width:50},{id:`c6`,name:``,type:`number`,width:100}],rows:rawData.rows||[]},updateData=newData=>{onUpdateBlock(block.id,{content:{...content,travelData:newData}})},totalCost=data.rows.reduce((sum,row)=>{let rowSum=0;return data.columns.forEach((col,idx)=>{if(col.type===`number`&&(col.name.includes(``)||col.name.includes(`Cost`)||col.name.includes(`Price`))){let val=parseFloat(row[idx]||`0`);isNaN(val)||(rowSum+=val)}}),sum+rowSum},0),renderCell=(col,val,rIdx,cIdx)=>{let updateVal=v$3=>{let newRows=[...data.rows];newRows[rIdx]||(newRows[rIdx]=[]),newRows[rIdx][cIdx]=v$3,updateData({...data,rows:newRows})};return col.type===`checkbox`?(0,import_jsx_runtime.jsx)(`div`,{className:`flex justify-center cursor-pointer`,onClick:()=>updateVal(!val),children:val?(0,import_jsx_runtime.jsx)(`div`,{className:`bg-indigo-500 text-white rounded p-0.5`,children:(0,import_jsx_runtime.jsx)(Check,{size:12})}):(0,import_jsx_runtime.jsx)(`div`,{className:`w-4 h-4 border border-gray-300 rounded hover:border-indigo-400`})}):col.type===`select`?(0,import_jsx_runtime.jsxs)(`div`,{className:`relative group/select w-full h-full`,children:[(0,import_jsx_runtime.jsxs)(`select`,{value:val||``,onChange:e$4=>updateVal(e$4.target.value),className:`w-full h-full bg-transparent appearance-none outline-none cursor-pointer text-xs`,children:[(0,import_jsx_runtime.jsx)(`option`,{value:``,disabled:!0,children:`-`}),col.options?.map(opt=>(0,import_jsx_runtime.jsx)(`option`,{value:opt,children:opt},opt))]}),!val&&(0,import_jsx_runtime.jsx)(`span`,{className:`absolute inset-0 pointer-events-none text-gray-300 flex items-center`,children:``})]}):col.type===`date`?(0,import_jsx_runtime.jsx)(`input`,{type:`date`,value:val||``,onChange:e$4=>updateVal(e$4.target.value),className:`w-full bg-transparent outline-none text-xs text-gray-600 font-mono`}):col.type===`number`?(0,import_jsx_runtime.jsx)(`input`,{type:`number`,value:val||``,onChange:e$4=>updateVal(e$4.target.value),placeholder:`0`,className:`w-full bg-transparent outline-none text-right font-mono text-xs`}):(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:val||``,onChange:e$4=>updateVal(e$4.target.value),className:`w-full bg-transparent outline-none text-xs`,placeholder:`...`})};return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col h-full bg-white rounded-xl shadow-sm overflow-hidden border border-indigo-100`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-indigo-600 p-3 text-white flex flex-col gap-2 shrink-0`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(MapPin,{size:16,className:`text-indigo-200`}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:data.title,onChange:e$4=>updateData({...data,title:e$4.target.value}),placeholder:` (: )`,className:`bg-transparent border-b border-indigo-400 font-bold placeholder:text-indigo-300 outline-none w-full text-white text-sm`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 text-indigo-100 text-[10px]`,children:[(0,import_jsx_runtime.jsx)(Calendar,{size:12}),(0,import_jsx_runtime.jsx)(`input`,{type:`date`,value:data.startDate,onChange:e$4=>updateData({...data,startDate:e$4.target.value}),className:`bg-transparent outline-none cursor-pointer hover:text-white`}),(0,import_jsx_runtime.jsx)(`span`,{children:`-`}),(0,import_jsx_runtime.jsx)(`input`,{type:`date`,value:data.endDate,onChange:e$4=>updateData({...data,endDate:e$4.target.value}),className:`bg-transparent outline-none cursor-pointer hover:text-white`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-indigo-50 px-3 py-2 flex justify-between items-center border-b border-indigo-100 shrink-0`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] font-bold text-indigo-400 uppercase tracking-wider`,children:`  `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-sm font-bold text-indigo-700 flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(DollarSign,{size:12}),totalCost.toLocaleString(),` `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-indigo-400`,children:data.currency})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 overflow-auto bg-white relative scrollbar-thin`,children:(0,import_jsx_runtime.jsxs)(`table`,{className:`w-full text-xs text-left border-collapse table-fixed`,style:{minWidth:`100%`},children:[(0,import_jsx_runtime.jsx)(`thead`,{className:`bg-gray-50 sticky top-0 z-10 text-gray-500 font-medium`,children:(0,import_jsx_runtime.jsxs)(`tr`,{children:[data.columns.map((col,i$4)=>(0,import_jsx_runtime.jsx)(`th`,{className:`p-2 border-b border-r border-gray-200 last:border-r-0 whitespace-nowrap bg-gray-50 text-[10px]`,style:{width:col.width||100},children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1`,children:[col.type===`date`&&(0,import_jsx_runtime.jsx)(Calendar,{size:10}),col.type===`number`&&(0,import_jsx_runtime.jsx)(DollarSign,{size:10}),col.type===`checkbox`&&(0,import_jsx_runtime.jsx)(Check,{size:10}),col.type===`select`&&(0,import_jsx_runtime.jsx)(ChevronDown,{size:10}),(0,import_jsx_runtime.jsx)(`input`,{value:col.name,onChange:e$4=>{let newCols=[...data.columns];newCols[i$4]={...newCols[i$4],name:e$4.target.value},updateData({...data,columns:newCols})},className:`bg-transparent outline-none w-full font-bold text-gray-600 truncate`})]})},col.id||i$4)),(0,import_jsx_runtime.jsx)(`th`,{className:`w-8 border-b border-gray-200 bg-gray-50 sticky right-0`})]})}),(0,import_jsx_runtime.jsx)(`tbody`,{children:data.rows.map((row,rIdx)=>(0,import_jsx_runtime.jsxs)(`tr`,{className:`group hover:bg-indigo-50/20 border-b border-gray-100 last:border-0`,children:[data.columns.map((col,cIdx)=>(0,import_jsx_runtime.jsx)(`td`,{className:`p-1 border-r border-gray-100 last:border-r-0 relative`,children:renderCell(col,row[cIdx],rIdx,cIdx)},`${rIdx}-${cIdx}`)),(0,import_jsx_runtime.jsx)(`td`,{className:`text-center p-1 sticky right-0 bg-white group-hover:bg-indigo-50/20`,children:(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{let newRows=data.rows.filter((_$1,i$4)=>i$4!==rIdx);updateData({...data,rows:newRows})},className:`text-gray-300 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:12})})})]},rIdx))})]})}),(0,import_jsx_runtime.jsx)(`div`,{className:`p-2 border-t border-indigo-100 bg-gray-50 shrink-0`,children:(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{let newRow=Array(data.columns.length).fill(``);updateData({...data,rows:[...data.rows,newRow]})},className:`w-full py-1.5 bg-white border border-indigo-200 text-indigo-600 rounded text-xs font-bold hover:bg-indigo-50 shadow-sm transition-all flex items-center justify-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Plus,{size:12}),`  `]})})]})}var DecorationLayer=({decorations=[]})=>!decorations||decorations.length===0?null:(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute inset-0 z-0 pointer-events-none overflow-hidden rounded-[inherit]`,children:[(0,import_jsx_runtime.jsx)(`style`,{children:`
                    @keyframes spin { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }
                    @keyframes pulse { 0%, 100% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.1); } }
                    @keyframes bounce { 0%, 100% { transform: translate(-50%, -50%); } 50% { transform: translate(-50%, -60%); } }
                    @keyframes float { 0% { transform: translate(-50%, -50%); } 50% { transform: translate(-50%, -55%); } 100% { transform: translate(-50%, -50%); } }
                    @keyframes wiggle { 0%, 100% { transform: translate(-50%, -50%) rotate(-3deg); } 50% { transform: translate(-50%, -50%) rotate(3deg); } }
                `}),decorations.map(deco=>{let safeType=deco.type;return typeof safeType==`object`&&safeType.type&&(safeType=safeType.type),[`blob`,`text`,`circle`,`square`,`star`,`shape`].includes(safeType),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute`,style:{left:`${deco.x}%`,top:`${deco.y}%`,width:`${deco.w}px`,height:`${deco.h}px`,transform:`translate(-50%, -50%) rotate(${deco.rotation||0}deg)`,opacity:deco.opacity,zIndex:deco.zIndex||0,animationName:deco.animation?.type,animationDuration:`${deco.animation?.duration||3}s`,animationIterationCount:`infinite`,animationTimingFunction:`ease-in-out`,animationDelay:`${deco.animation?.delay||0}s`,transition:`all 0.5s ease-in-out`},children:safeType===`blob`&&!deco.mediaType&&!deco.imageUrl?(0,import_jsx_runtime.jsx)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 100 100`,style:{overflow:`visible`},children:(0,import_jsx_runtime.jsx)(`path`,{d:getSvgPathFromPoints(deco.points||[],.5,!0),fill:deco.color})}):(0,import_jsx_runtime.jsx)(`div`,{style:{width:`100%`,height:`100%`,backgroundColor:deco.mediaType===`video`||deco.imageUrl?void 0:deco.color,backgroundImage:deco.mediaType!==`video`&&deco.imageUrl?`url(${deco.imageUrl})`:void 0,backgroundSize:`cover`,backgroundPosition:`center`,borderRadius:safeType===`circle`||safeType===`shape`&&deco.shapeType===`circle`?`50%`:safeType===`square`||safeType===`shape`&&deco.shapeType===`square`?`4px`:`0%`,clipPath:safeType===`star`||safeType===`shape`&&deco.shapeType===`star`?`polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)`:safeType===`blob`&&deco.points?`path('${getSvgPathFromPoints(deco.points,.5,!0).replace(/,/g,` `)}')`:void 0},children:deco.mediaType===`video`&&deco.videoUrl&&(0,import_jsx_runtime.jsx)(`video`,{src:deco.videoUrl,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,style:{width:`100%`,height:`100%`,objectFit:`cover`},onTimeUpdate:e$4=>{let vid=e$4.currentTarget,start$2=deco.videoStartTime||0,end$1=deco.videoEndTime||0;end$1>0&&vid.currentTime>=end$1&&(vid.currentTime=start$2)},onLoadedMetadata:e$4=>{deco.videoStartTime&&(e$4.currentTarget.currentTime=deco.videoStartTime)}})})},deco.id)})]}),DecorationLayer_default=DecorationLayer;function cc(names){if(typeof names==`string`||typeof names==`number`)return``+names;let out=``;if(Array.isArray(names))for(let i$4=0,tmp;i$4<names.length;i$4++)(tmp=cc(names[i$4]))!==``&&(out+=(out&&` `)+tmp);else for(let k$3 in names)names[k$3]&&(out+=(out&&` `)+k$3);return out}var noop$3={value:()=>{}};function dispatch(){for(var i$4=0,n$4=arguments.length,_$1={},t$4;i$4<n$4;++i$4){if(!(t$4=arguments[i$4]+``)||t$4 in _$1||/[\s.]/.test(t$4))throw Error(`illegal type: `+t$4);_$1[t$4]=[]}return new Dispatch(_$1)}function Dispatch(_$1){this._=_$1}function parseTypenames$1(typenames,types){return typenames.trim().split(/^|\s+/).map(function(t$4){var name=``,i$4=t$4.indexOf(`.`);if(i$4>=0&&(name=t$4.slice(i$4+1),t$4=t$4.slice(0,i$4)),t$4&&!types.hasOwnProperty(t$4))throw Error(`unknown type: `+t$4);return{type:t$4,name}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var _$1=this._,T$2=parseTypenames$1(typename+``,_$1),t$4,i$4=-1,n$4=T$2.length;if(arguments.length<2){for(;++i$4<n$4;)if((t$4=(typename=T$2[i$4]).type)&&(t$4=get$1(_$1[t$4],typename.name)))return t$4;return}if(callback!=null&&typeof callback!=`function`)throw Error(`invalid callback: `+callback);for(;++i$4<n$4;)if(t$4=(typename=T$2[i$4]).type)_$1[t$4]=set$1(_$1[t$4],typename.name,callback);else if(callback==null)for(t$4 in _$1)_$1[t$4]=set$1(_$1[t$4],typename.name,null);return this},copy:function(){var copy={},_$1=this._;for(var t$4 in _$1)copy[t$4]=_$1[t$4].slice();return new Dispatch(copy)},call:function(type,that){if((n$4=arguments.length-2)>0)for(var args=Array(n$4),i$4=0,n$4,t$4;i$4<n$4;++i$4)args[i$4]=arguments[i$4+2];if(!this._.hasOwnProperty(type))throw Error(`unknown type: `+type);for(t$4=this._[type],i$4=0,n$4=t$4.length;i$4<n$4;++i$4)t$4[i$4].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw Error(`unknown type: `+type);for(var t$4=this._[type],i$4=0,n$4=t$4.length;i$4<n$4;++i$4)t$4[i$4].value.apply(that,args)}};function get$1(type,name){for(var i$4=0,n$4=type.length,c$3;i$4<n$4;++i$4)if((c$3=type[i$4]).name===name)return c$3.value}function set$1(type,name,callback){for(var i$4=0,n$4=type.length;i$4<n$4;++i$4)if(type[i$4].name===name){type[i$4]=noop$3,type=type.slice(0,i$4).concat(type.slice(i$4+1));break}return callback!=null&&type.push({name,value:callback}),type}var dispatch_default=dispatch,xhtml=`http://www.w3.org/1999/xhtml`,namespaces_default={svg:`http://www.w3.org/2000/svg`,xhtml,xlink:`http://www.w3.org/1999/xlink`,xml:`http://www.w3.org/XML/1998/namespace`,xmlns:`http://www.w3.org/2000/xmlns/`};function namespace_default(name){var prefix$4=name+=``,i$4=prefix$4.indexOf(`:`);return i$4>=0&&(prefix$4=name.slice(0,i$4))!==`xmlns`&&(name=name.slice(i$4+1)),namespaces_default.hasOwnProperty(prefix$4)?{space:namespaces_default[prefix$4],local:name}:name}function creatorInherit(name){return function(){var document$1=this.ownerDocument,uri=this.namespaceURI;return uri===`http://www.w3.org/1999/xhtml`&&document$1.documentElement.namespaceURI===`http://www.w3.org/1999/xhtml`?document$1.createElement(name):document$1.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator_default(name){var fullname=namespace_default(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)}function none(){}function selector_default(selector){return selector==null?none:function(){return this.querySelector(selector)}}function select_default$2(select){typeof select!=`function`&&(select=selector_default(select));for(var groups=this._groups,m$3=groups.length,subgroups=Array(m$3),j$2=0;j$2<m$3;++j$2)for(var group=groups[j$2],n$4=group.length,subgroup=subgroups[j$2]=Array(n$4),node,subnode,i$4=0;i$4<n$4;++i$4)(node=group[i$4])&&(subnode=select.call(node,node.__data__,i$4,group))&&(`__data__`in node&&(subnode.__data__=node.__data__),subgroup[i$4]=subnode);return new Selection$1(subgroups,this._parents)}function array(x$2){return x$2==null?[]:Array.isArray(x$2)?x$2:Array.from(x$2)}function empty$1(){return[]}function selectorAll_default(selector){return selector==null?empty$1:function(){return this.querySelectorAll(selector)}}function arrayAll(select){return function(){return array(select.apply(this,arguments))}}function selectAll_default$1(select){select=typeof select==`function`?arrayAll(select):selectorAll_default(select);for(var groups=this._groups,m$3=groups.length,subgroups=[],parents=[],j$2=0;j$2<m$3;++j$2)for(var group=groups[j$2],n$4=group.length,node,i$4=0;i$4<n$4;++i$4)(node=group[i$4])&&(subgroups.push(select.call(node,node.__data__,i$4,group)),parents.push(node));return new Selection$1(subgroups,parents)}function matcher_default(selector){return function(){return this.matches(selector)}}function childMatcher(selector){return function(node){return node.matches(selector)}}var find=Array.prototype.find;function childFind(match){return function(){return find.call(this.children,match)}}function childFirst(){return this.firstElementChild}function selectChild_default(match){return this.select(match==null?childFirst:childFind(typeof match==`function`?match:childMatcher(match)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(match){return function(){return filter.call(this.children,match)}}function selectChildren_default(match){return this.selectAll(match==null?children:childrenFilter(typeof match==`function`?match:childMatcher(match)))}function filter_default$1(match){typeof match!=`function`&&(match=matcher_default(match));for(var groups=this._groups,m$3=groups.length,subgroups=Array(m$3),j$2=0;j$2<m$3;++j$2)for(var group=groups[j$2],n$4=group.length,subgroup=subgroups[j$2]=[],node,i$4=0;i$4<n$4;++i$4)(node=group[i$4])&&match.call(node,node.__data__,i$4,group)&&subgroup.push(node);return new Selection$1(subgroups,this._parents)}function sparse_default(update$1){return Array(update$1.length)}function enter_default(){return new Selection$1(this._enter||this._groups.map(sparse_default),this._parents)}function EnterNode(parent,datum$1){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum$1}EnterNode.prototype={constructor:EnterNode,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};function constant_default$3(x$2){return function(){return x$2}}function bindIndex(parent,group,enter$1,update$1,exit,data){for(var i$4=0,node,groupLength=group.length,dataLength=data.length;i$4<dataLength;++i$4)(node=group[i$4])?(node.__data__=data[i$4],update$1[i$4]=node):enter$1[i$4]=new EnterNode(parent,data[i$4]);for(;i$4<groupLength;++i$4)(node=group[i$4])&&(exit[i$4]=node)}function bindKey(parent,group,enter$1,update$1,exit,data,key$1){var i$4,node,nodeByKeyValue=new Map,groupLength=group.length,dataLength=data.length,keyValues=Array(groupLength),keyValue;for(i$4=0;i$4<groupLength;++i$4)(node=group[i$4])&&(keyValues[i$4]=keyValue=key$1.call(node,node.__data__,i$4,group)+``,nodeByKeyValue.has(keyValue)?exit[i$4]=node:nodeByKeyValue.set(keyValue,node));for(i$4=0;i$4<dataLength;++i$4)keyValue=key$1.call(parent,data[i$4],i$4,data)+``,(node=nodeByKeyValue.get(keyValue))?(update$1[i$4]=node,node.__data__=data[i$4],nodeByKeyValue.delete(keyValue)):enter$1[i$4]=new EnterNode(parent,data[i$4]);for(i$4=0;i$4<groupLength;++i$4)(node=group[i$4])&&nodeByKeyValue.get(keyValues[i$4])===node&&(exit[i$4]=node)}function datum(node){return node.__data__}function data_default(value,key$1){if(!arguments.length)return Array.from(this,datum);var bind$1=key$1?bindKey:bindIndex,parents=this._parents,groups=this._groups;typeof value!=`function`&&(value=constant_default$3(value));for(var m$3=groups.length,update$1=Array(m$3),enter$1=Array(m$3),exit=Array(m$3),j$2=0;j$2<m$3;++j$2){var parent=parents[j$2],group=groups[j$2],groupLength=group.length,data=arraylike(value.call(parent,parent&&parent.__data__,j$2,parents)),dataLength=data.length,enterGroup=enter$1[j$2]=Array(dataLength),updateGroup=update$1[j$2]=Array(dataLength);bind$1(parent,group,enterGroup,updateGroup,exit[j$2]=Array(groupLength),data,key$1);for(var i0=0,i1=0,previous,next;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return update$1=new Selection$1(update$1,parents),update$1._enter=enter$1,update$1._exit=exit,update$1}function arraylike(data){return typeof data==`object`&&`length`in data?data:Array.from(data)}function exit_default(){return new Selection$1(this._exit||this._groups.map(sparse_default),this._parents)}function join_default(onenter,onupdate,onexit){var enter$1=this.enter(),update$1=this,exit=this.exit();return typeof onenter==`function`?(enter$1=onenter(enter$1),enter$1&&=enter$1.selection()):enter$1=enter$1.append(onenter+``),onupdate!=null&&(update$1=onupdate(update$1),update$1&&=update$1.selection()),onexit==null?exit.remove():onexit(exit),enter$1&&update$1?enter$1.merge(update$1).order():update$1}function merge_default$1(context){for(var selection$1=context.selection?context.selection():context,groups0=this._groups,groups1=selection$1._groups,m0=groups0.length,m1=groups1.length,m$3=Math.min(m0,m1),merges=Array(m0),j$2=0;j$2<m$3;++j$2)for(var group0=groups0[j$2],group1=groups1[j$2],n$4=group0.length,merge$1=merges[j$2]=Array(n$4),node,i$4=0;i$4<n$4;++i$4)(node=group0[i$4]||group1[i$4])&&(merge$1[i$4]=node);for(;j$2<m0;++j$2)merges[j$2]=groups0[j$2];return new Selection$1(merges,this._parents)}function order_default(){for(var groups=this._groups,j$2=-1,m$3=groups.length;++j$2<m$3;)for(var group=groups[j$2],i$4=group.length-1,next=group[i$4],node;--i$4>=0;)(node=group[i$4])&&(next&&node.compareDocumentPosition(next)^4&&next.parentNode.insertBefore(node,next),next=node);return this}function sort_default(compare$1){compare$1||=ascending;function compareNode(a$4,b$3){return a$4&&b$3?compare$1(a$4.__data__,b$3.__data__):!a$4-!b$3}for(var groups=this._groups,m$3=groups.length,sortgroups=Array(m$3),j$2=0;j$2<m$3;++j$2){for(var group=groups[j$2],n$4=group.length,sortgroup=sortgroups[j$2]=Array(n$4),node,i$4=0;i$4<n$4;++i$4)(node=group[i$4])&&(sortgroup[i$4]=node);sortgroup.sort(compareNode)}return new Selection$1(sortgroups,this._parents).order()}function ascending(a$4,b$3){return a$4<b$3?-1:a$4>b$3?1:a$4>=b$3?0:NaN}function call_default(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this}function nodes_default(){return Array.from(this)}function node_default(){for(var groups=this._groups,j$2=0,m$3=groups.length;j$2<m$3;++j$2)for(var group=groups[j$2],i$4=0,n$4=group.length;i$4<n$4;++i$4){var node=group[i$4];if(node)return node}return null}function size_default(){let size=0;for(let node of this)++size;return size}function empty_default(){return!this.node()}function each_default(callback){for(var groups=this._groups,j$2=0,m$3=groups.length;j$2<m$3;++j$2)for(var group=groups[j$2],i$4=0,n$4=group.length,node;i$4<n$4;++i$4)(node=group[i$4])&&callback.call(node,node.__data__,i$4,group);return this}function attrRemove$1(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$1(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$1(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS$1(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction$1(name,value){return function(){var v$3=value.apply(this,arguments);v$3==null?this.removeAttribute(name):this.setAttribute(name,v$3)}}function attrFunctionNS$1(fullname,value){return function(){var v$3=value.apply(this,arguments);v$3==null?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v$3)}}function attr_default$1(name,value){var fullname=namespace_default(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((value==null?fullname.local?attrRemoveNS$1:attrRemove$1:typeof value==`function`?fullname.local?attrFunctionNS$1:attrFunction$1:fullname.local?attrConstantNS$1:attrConstant$1)(fullname,value))}function window_default(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove$1(name){return function(){this.style.removeProperty(name)}}function styleConstant$1(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction$1(name,value,priority){return function(){var v$3=value.apply(this,arguments);v$3==null?this.style.removeProperty(name):this.style.setProperty(name,v$3,priority)}}function style_default$1(name,value,priority){return arguments.length>1?this.each((value==null?styleRemove$1:typeof value==`function`?styleFunction$1:styleConstant$1)(name,value,priority??``)):styleValue(this.node(),name)}function styleValue(node,name){return node.style.getPropertyValue(name)||window_default(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value){return function(){this[name]=value}}function propertyFunction(name,value){return function(){var v$3=value.apply(this,arguments);v$3==null?delete this[name]:this[name]=v$3}}function property_default(name,value){return arguments.length>1?this.each((value==null?propertyRemove:typeof value==`function`?propertyFunction:propertyConstant)(name,value)):this.node()[name]}function classArray(string){return string.trim().split(/^|\s+/)}function classList(node){return node.classList||new ClassList(node)}function ClassList(node){this._node=node,this._names=classArray(node.getAttribute(`class`)||``)}ClassList.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute(`class`,this._names.join(` `)))},remove:function(name){var i$4=this._names.indexOf(name);i$4>=0&&(this._names.splice(i$4,1),this._node.setAttribute(`class`,this._names.join(` `)))},contains:function(name){return this._names.indexOf(name)>=0}};function classedAdd(node,names){for(var list=classList(node),i$4=-1,n$4=names.length;++i$4<n$4;)list.add(names[i$4])}function classedRemove(node,names){for(var list=classList(node),i$4=-1,n$4=names.length;++i$4<n$4;)list.remove(names[i$4])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}function classed_default(name,value){var names=classArray(name+``);if(arguments.length<2){for(var list=classList(this.node()),i$4=-1,n$4=names.length;++i$4<n$4;)if(!list.contains(names[i$4]))return!1;return!0}return this.each((typeof value==`function`?classedFunction:value?classedTrue:classedFalse)(names,value))}function textRemove(){this.textContent=``}function textConstant$1(value){return function(){this.textContent=value}}function textFunction$1(value){return function(){this.textContent=value.apply(this,arguments)??``}}function text_default$1(value){return arguments.length?this.each(value==null?textRemove:(typeof value==`function`?textFunction$1:textConstant$1)(value)):this.node().textContent}function htmlRemove(){this.innerHTML=``}function htmlConstant(value){return function(){this.innerHTML=value}}function htmlFunction(value){return function(){this.innerHTML=value.apply(this,arguments)??``}}function html_default(value){return arguments.length?this.each(value==null?htmlRemove:(typeof value==`function`?htmlFunction:htmlConstant)(value)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function raise_default(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lower_default(){return this.each(lower)}function append_default(name){var create$2=typeof name==`function`?name:creator_default(name);return this.select(function(){return this.appendChild(create$2.apply(this,arguments))})}function constantNull(){return null}function insert_default(name,before){var create$2=typeof name==`function`?name:creator_default(name),select=before==null?constantNull:typeof before==`function`?before:selector_default(before);return this.select(function(){return this.insertBefore(create$2.apply(this,arguments),select.apply(this,arguments)||null)})}function remove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function remove_default$1(){return this.each(remove)}function selection_cloneShallow(){var clone=this.cloneNode(!1),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep(){var clone=this.cloneNode(!0),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function clone_default(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)}function datum_default(value){return arguments.length?this.property(`__data__`,value):this.node().__data__}function contextListener(listener){return function(event){listener.call(this,event,this.__data__)}}function parseTypenames(typenames){return typenames.trim().split(/^|\s+/).map(function(t$4){var name=``,i$4=t$4.indexOf(`.`);return i$4>=0&&(name=t$4.slice(i$4+1),t$4=t$4.slice(0,i$4)),{type:t$4,name}})}function onRemove(typename){return function(){var on=this.__on;if(on){for(var j$2=0,i$4=-1,m$3=on.length,o$3;j$2<m$3;++j$2)o$3=on[j$2],(!typename.type||o$3.type===typename.type)&&o$3.name===typename.name?this.removeEventListener(o$3.type,o$3.listener,o$3.options):on[++i$4]=o$3;++i$4?on.length=i$4:delete this.__on}}}function onAdd(typename,value,options$1){return function(){var on=this.__on,o$3,listener=contextListener(value);if(on){for(var j$2=0,m$3=on.length;j$2<m$3;++j$2)if((o$3=on[j$2]).type===typename.type&&o$3.name===typename.name){this.removeEventListener(o$3.type,o$3.listener,o$3.options),this.addEventListener(o$3.type,o$3.listener=listener,o$3.options=options$1),o$3.value=value;return}}this.addEventListener(typename.type,listener,options$1),o$3={type:typename.type,name:typename.name,value,listener,options:options$1},on?on.push(o$3):this.__on=[o$3]}}function on_default$1(typename,value,options$1){var typenames=parseTypenames(typename+``),i$4,n$4=typenames.length,t$4;if(arguments.length<2){var on=this.node().__on;if(on){for(var j$2=0,m$3=on.length,o$3;j$2<m$3;++j$2)for(i$4=0,o$3=on[j$2];i$4<n$4;++i$4)if((t$4=typenames[i$4]).type===o$3.type&&t$4.name===o$3.name)return o$3.value}return}for(on=value?onAdd:onRemove,i$4=0;i$4<n$4;++i$4)this.each(on(typenames[i$4],value,options$1));return this}function dispatchEvent(node,type,params){var window$1=window_default(node),event=window$1.CustomEvent;typeof event==`function`?event=new event(type,params):(event=window$1.document.createEvent(`Event`),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params)}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments))}}function dispatch_default$1(type,params){return this.each((typeof params==`function`?dispatchFunction:dispatchConstant)(type,params))}function*iterator_default(){for(var groups=this._groups,j$2=0,m$3=groups.length;j$2<m$3;++j$2)for(var group=groups[j$2],i$4=0,n$4=group.length,node;i$4<n$4;++i$4)(node=group[i$4])&&(yield node)}var root$1=[null];function Selection$1(groups,parents){this._groups=groups,this._parents=parents}function selection(){return new Selection$1([[document.documentElement]],root$1)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:select_default$2,selectAll:selectAll_default$1,selectChild:selectChild_default,selectChildren:selectChildren_default,filter:filter_default$1,data:data_default,enter:enter_default,exit:exit_default,join:join_default,merge:merge_default$1,selection:selection_selection,order:order_default,sort:sort_default,call:call_default,nodes:nodes_default,node:node_default,size:size_default,empty:empty_default,each:each_default,attr:attr_default$1,style:style_default$1,property:property_default,classed:classed_default,text:text_default$1,html:html_default,raise:raise_default,lower:lower_default,append:append_default,insert:insert_default,remove:remove_default$1,clone:clone_default,datum:datum_default,on:on_default$1,dispatch:dispatch_default$1,[Symbol.iterator]:iterator_default};var selection_default=selection;function select_default(selector){return typeof selector==`string`?new Selection$1([[document.querySelector(selector)]],[document.documentElement]):new Selection$1([[selector]],root$1)}function sourceEvent_default(event){let sourceEvent;for(;sourceEvent=event.sourceEvent;)event=sourceEvent;return event}function pointer_default(event,node){if(event=sourceEvent_default(event),node===void 0&&(node=event.currentTarget),node){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,point.y=event.clientY,point=point.matrixTransform(node.getScreenCTM().inverse()),[point.x,point.y]}if(node.getBoundingClientRect){var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}}return[event.pageX,event.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(event){event.stopImmediatePropagation()}function noevent_default$1(event){event.preventDefault(),event.stopImmediatePropagation()}function nodrag_default(view){var root$3=view.document.documentElement,selection$1=select_default(view).on(`dragstart.drag`,noevent_default$1,nonpassivecapture);`onselectstart`in root$3?selection$1.on(`selectstart.drag`,noevent_default$1,nonpassivecapture):(root$3.__noselect=root$3.style.MozUserSelect,root$3.style.MozUserSelect=`none`)}function yesdrag(view,noclick){var root$3=view.document.documentElement,selection$1=select_default(view).on(`dragstart.drag`,null);noclick&&(selection$1.on(`click.drag`,noevent_default$1,nonpassivecapture),setTimeout(function(){selection$1.on(`click.drag`,null)},0)),`onselectstart`in root$3?selection$1.on(`selectstart.drag`,null):(root$3.style.MozUserSelect=root$3.__noselect,delete root$3.__noselect)}var constant_default$2=x$2=>()=>x$2;function DragEvent(type,{sourceEvent,subject,target,identifier,active,x:x$2,y:y$2,dx,dy,dispatch:dispatch$1}){Object.defineProperties(this,{type:{value:type,enumerable:!0,configurable:!0},sourceEvent:{value:sourceEvent,enumerable:!0,configurable:!0},subject:{value:subject,enumerable:!0,configurable:!0},target:{value:target,enumerable:!0,configurable:!0},identifier:{value:identifier,enumerable:!0,configurable:!0},active:{value:active,enumerable:!0,configurable:!0},x:{value:x$2,enumerable:!0,configurable:!0},y:{value:y$2,enumerable:!0,configurable:!0},dx:{value:dx,enumerable:!0,configurable:!0},dy:{value:dy,enumerable:!0,configurable:!0},_:{value:dispatch$1}})}DragEvent.prototype.on=function(){var value=this._.on.apply(this._,arguments);return value===this._?this:value};function defaultFilter$1(event){return!event.ctrlKey&&!event.button}function defaultContainer(){return this.parentNode}function defaultSubject(event,d$3){return d$3??{x:event.x,y:event.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||`ontouchstart`in this}function drag_default(){var filter$2=defaultFilter$1,container=defaultContainer,subject=defaultSubject,touchable=defaultTouchable$1,gestures={},listeners=dispatch_default(`start`,`drag`,`end`),active=0,mousedownx,mousedowny,mousemoving,touchending,clickDistance2=0;function drag$1(selection$1){selection$1.on(`mousedown.drag`,mousedowned).filter(touchable).on(`touchstart.drag`,touchstarted).on(`touchmove.drag`,touchmoved,nonpassive).on(`touchend.drag touchcancel.drag`,touchended).style(`touch-action`,`none`).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}function mousedowned(event,d$3){if(!(touchending||!filter$2.call(this,event,d$3))){var gesture=beforestart(this,container.call(this,event,d$3),event,d$3,`mouse`);gesture&&(select_default(event.view).on(`mousemove.drag`,mousemoved,nonpassivecapture).on(`mouseup.drag`,mouseupped,nonpassivecapture),nodrag_default(event.view),nopropagation$1(event),mousemoving=!1,mousedownx=event.clientX,mousedowny=event.clientY,gesture(`start`,event))}}function mousemoved(event){if(noevent_default$1(event),!mousemoving){var dx=event.clientX-mousedownx,dy=event.clientY-mousedowny;mousemoving=dx*dx+dy*dy>clickDistance2}gestures.mouse(`drag`,event)}function mouseupped(event){select_default(event.view).on(`mousemove.drag mouseup.drag`,null),yesdrag(event.view,mousemoving),noevent_default$1(event),gestures.mouse(`end`,event)}function touchstarted(event,d$3){if(filter$2.call(this,event,d$3)){var touches=event.changedTouches,c$3=container.call(this,event,d$3),n$4=touches.length,i$4,gesture;for(i$4=0;i$4<n$4;++i$4)(gesture=beforestart(this,c$3,event,d$3,touches[i$4].identifier,touches[i$4]))&&(nopropagation$1(event),gesture(`start`,event,touches[i$4]))}}function touchmoved(event){var touches=event.changedTouches,n$4=touches.length,i$4,gesture;for(i$4=0;i$4<n$4;++i$4)(gesture=gestures[touches[i$4].identifier])&&(noevent_default$1(event),gesture(`drag`,event,touches[i$4]))}function touchended(event){var touches=event.changedTouches,n$4=touches.length,i$4,gesture;for(touchending&&clearTimeout(touchending),touchending=setTimeout(function(){touchending=null},500),i$4=0;i$4<n$4;++i$4)(gesture=gestures[touches[i$4].identifier])&&(nopropagation$1(event),gesture(`end`,event,touches[i$4]))}function beforestart(that,container$1,event,d$3,identifier,touch){var dispatch$1=listeners.copy(),p$3=pointer_default(touch||event,container$1),dx,dy,s$3;if((s$3=subject.call(that,new DragEvent(`beforestart`,{sourceEvent:event,target:drag$1,identifier,active,x:p$3[0],y:p$3[1],dx:0,dy:0,dispatch:dispatch$1}),d$3))!=null)return dx=s$3.x-p$3[0]||0,dy=s$3.y-p$3[1]||0,function gesture(type,event$1,touch$1){var p0=p$3,n$4;switch(type){case`start`:gestures[identifier]=gesture,n$4=active++;break;case`end`:delete gestures[identifier],--active;case`drag`:p$3=pointer_default(touch$1||event$1,container$1),n$4=active;break}dispatch$1.call(type,that,new DragEvent(type,{sourceEvent:event$1,subject:s$3,target:drag$1,identifier,active:n$4,x:p$3[0]+dx,y:p$3[1]+dy,dx:p$3[0]-p0[0],dy:p$3[1]-p0[1],dispatch:dispatch$1}),d$3)}}return drag$1.filter=function(_$1){return arguments.length?(filter$2=typeof _$1==`function`?_$1:constant_default$2(!!_$1),drag$1):filter$2},drag$1.container=function(_$1){return arguments.length?(container=typeof _$1==`function`?_$1:constant_default$2(_$1),drag$1):container},drag$1.subject=function(_$1){return arguments.length?(subject=typeof _$1==`function`?_$1:constant_default$2(_$1),drag$1):subject},drag$1.touchable=function(_$1){return arguments.length?(touchable=typeof _$1==`function`?_$1:constant_default$2(!!_$1),drag$1):touchable},drag$1.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?drag$1:value},drag$1.clickDistance=function(_$1){return arguments.length?(clickDistance2=(_$1=+_$1)*_$1,drag$1):Math.sqrt(clickDistance2)},drag$1}function define_default(constructor,factory$1,prototype$2){constructor.prototype=factory$1.prototype=prototype$2,prototype$2.constructor=constructor}function extend(parent,definition){var prototype$2=Object.create(parent.prototype);for(var key$1 in definition)prototype$2[key$1]=definition[key$1];return prototype$2}function Color(){}var darker=.7,brighter=1/darker,reI=`\\s*([+-]?\\d+)\\s*`,reN=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*`,reP=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*`,reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define_default(Color,color,{copy(channels){return Object.assign(new this.constructor,this,channels)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m$3,l$3;return format=(format+``).trim().toLowerCase(),(m$3=reHex.exec(format))?(l$3=m$3[1].length,m$3=parseInt(m$3[1],16),l$3===6?rgbn(m$3):l$3===3?new Rgb(m$3>>8&15|m$3>>4&240,m$3>>4&15|m$3&240,(m$3&15)<<4|m$3&15,1):l$3===8?rgba(m$3>>24&255,m$3>>16&255,m$3>>8&255,(m$3&255)/255):l$3===4?rgba(m$3>>12&15|m$3>>8&240,m$3>>8&15|m$3>>4&240,m$3>>4&15|m$3&240,((m$3&15)<<4|m$3&15)/255):null):(m$3=reRgbInteger.exec(format))?new Rgb(m$3[1],m$3[2],m$3[3],1):(m$3=reRgbPercent.exec(format))?new Rgb(m$3[1]*255/100,m$3[2]*255/100,m$3[3]*255/100,1):(m$3=reRgbaInteger.exec(format))?rgba(m$3[1],m$3[2],m$3[3],m$3[4]):(m$3=reRgbaPercent.exec(format))?rgba(m$3[1]*255/100,m$3[2]*255/100,m$3[3]*255/100,m$3[4]):(m$3=reHslPercent.exec(format))?hsla(m$3[1],m$3[2]/100,m$3[3]/100,1):(m$3=reHslaPercent.exec(format))?hsla(m$3[1],m$3[2]/100,m$3[3]/100,m$3[4]):named.hasOwnProperty(format)?rgbn(named[format]):format===`transparent`?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n$4){return new Rgb(n$4>>16&255,n$4>>8&255,n$4&255,1)}function rgba(r$4,g$3,b$3,a$4){return a$4<=0&&(r$4=g$3=b$3=NaN),new Rgb(r$4,g$3,b$3,a$4)}function rgbConvert(o$3){return o$3 instanceof Color||(o$3=color(o$3)),o$3?(o$3=o$3.rgb(),new Rgb(o$3.r,o$3.g,o$3.b,o$3.opacity)):new Rgb}function rgb(r$4,g$3,b$3,opacity){return arguments.length===1?rgbConvert(r$4):new Rgb(r$4,g$3,b$3,opacity??1)}function Rgb(r$4,g$3,b$3,opacity){this.r=+r$4,this.g=+g$3,this.b=+b$3,this.opacity=+opacity}define_default(Rgb,rgb,extend(Color,{brighter(k$3){return k$3=k$3==null?brighter:brighter**+k$3,new Rgb(this.r*k$3,this.g*k$3,this.b*k$3,this.opacity)},darker(k$3){return k$3=k$3==null?darker:darker**+k$3,new Rgb(this.r*k$3,this.g*k$3,this.b*k$3,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){let a$4=clampa(this.opacity);return`${a$4===1?`rgb(`:`rgba(`}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a$4===1?`)`:`, ${a$4})`}`}function clampa(opacity){return isNaN(opacity)?1:Math.max(0,Math.min(1,opacity))}function clampi(value){return Math.max(0,Math.min(255,Math.round(value)||0))}function hex(value){return value=clampi(value),(value<16?`0`:``)+value.toString(16)}function hsla(h$3,s$3,l$3,a$4){return a$4<=0?h$3=s$3=l$3=NaN:l$3<=0||l$3>=1?h$3=s$3=NaN:s$3<=0&&(h$3=NaN),new Hsl(h$3,s$3,l$3,a$4)}function hslConvert(o$3){if(o$3 instanceof Hsl)return new Hsl(o$3.h,o$3.s,o$3.l,o$3.opacity);if(o$3 instanceof Color||(o$3=color(o$3)),!o$3)return new Hsl;if(o$3 instanceof Hsl)return o$3;o$3=o$3.rgb();var r$4=o$3.r/255,g$3=o$3.g/255,b$3=o$3.b/255,min=Math.min(r$4,g$3,b$3),max=Math.max(r$4,g$3,b$3),h$3=NaN,s$3=max-min,l$3=(max+min)/2;return s$3?(h$3=r$4===max?(g$3-b$3)/s$3+(g$3<b$3)*6:g$3===max?(b$3-r$4)/s$3+2:(r$4-g$3)/s$3+4,s$3/=l$3<.5?max+min:2-max-min,h$3*=60):s$3=l$3>0&&l$3<1?0:h$3,new Hsl(h$3,s$3,l$3,o$3.opacity)}function hsl(h$3,s$3,l$3,opacity){return arguments.length===1?hslConvert(h$3):new Hsl(h$3,s$3,l$3,opacity??1)}function Hsl(h$3,s$3,l$3,opacity){this.h=+h$3,this.s=+s$3,this.l=+l$3,this.opacity=+opacity}define_default(Hsl,hsl,extend(Color,{brighter(k$3){return k$3=k$3==null?brighter:brighter**+k$3,new Hsl(this.h,this.s,this.l*k$3,this.opacity)},darker(k$3){return k$3=k$3==null?darker:darker**+k$3,new Hsl(this.h,this.s,this.l*k$3,this.opacity)},rgb(){var h$3=this.h%360+(this.h<0)*360,s$3=isNaN(h$3)||isNaN(this.s)?0:this.s,l$3=this.l,m2=l$3+(l$3<.5?l$3:1-l$3)*s$3,m1=2*l$3-m2;return new Rgb(hsl2rgb(h$3>=240?h$3-240:h$3+120,m1,m2),hsl2rgb(h$3,m1,m2),hsl2rgb(h$3<120?h$3+240:h$3-120,m1,m2),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let a$4=clampa(this.opacity);return`${a$4===1?`hsl(`:`hsla(`}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${a$4===1?`)`:`, ${a$4})`}`}}));function clamph(value){return value=(value||0)%360,value<0?value+360:value}function clampt(value){return Math.max(0,Math.min(1,value||0))}function hsl2rgb(h$3,m1,m2){return(h$3<60?m1+(m2-m1)*h$3/60:h$3<180?m2:h$3<240?m1+(m2-m1)*(240-h$3)/60:m1)*255}function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}function basis_default(values){var n$4=values.length-1;return function(t$4){var i$4=t$4<=0?t$4=0:t$4>=1?(t$4=1,n$4-1):Math.floor(t$4*n$4),v1=values[i$4],v2=values[i$4+1],v0=i$4>0?values[i$4-1]:2*v1-v2,v3=i$4<n$4-1?values[i$4+2]:2*v2-v1;return basis((t$4-i$4/n$4)*n$4,v0,v1,v2,v3)}}function basisClosed_default(values){var n$4=values.length;return function(t$4){var i$4=Math.floor(((t$4%=1)<0?++t$4:t$4)*n$4),v0=values[(i$4+n$4-1)%n$4],v1=values[i$4%n$4],v2=values[(i$4+1)%n$4],v3=values[(i$4+2)%n$4];return basis((t$4-i$4/n$4)*n$4,v0,v1,v2,v3)}}var constant_default$1=x$2=>()=>x$2;function linear(a$4,d$3){return function(t$4){return a$4+t$4*d$3}}function exponential(a$4,b$3,y$2){return a$4**=+y$2,b$3=b$3**+y$2-a$4,y$2=1/y$2,function(t$4){return(a$4+t$4*b$3)**+y$2}}function gamma(y$2){return(y$2=+y$2)==1?nogamma:function(a$4,b$3){return b$3-a$4?exponential(a$4,b$3,y$2):constant_default$1(isNaN(a$4)?b$3:a$4)}}function nogamma(a$4,b$3){var d$3=b$3-a$4;return d$3?linear(a$4,d$3):constant_default$1(isNaN(a$4)?b$3:a$4)}var rgb_default=(function rgbGamma(y$2){var color$2=gamma(y$2);function rgb$1(start$2,end$1){var r$4=color$2((start$2=rgb(start$2)).r,(end$1=rgb(end$1)).r),g$3=color$2(start$2.g,end$1.g),b$3=color$2(start$2.b,end$1.b),opacity=nogamma(start$2.opacity,end$1.opacity);return function(t$4){return start$2.r=r$4(t$4),start$2.g=g$3(t$4),start$2.b=b$3(t$4),start$2.opacity=opacity(t$4),start$2+``}}return rgb$1.gamma=rgbGamma,rgb$1})(1);function rgbSpline(spline){return function(colors){var n$4=colors.length,r$4=Array(n$4),g$3=Array(n$4),b$3=Array(n$4),i$4,color$2;for(i$4=0;i$4<n$4;++i$4)color$2=rgb(colors[i$4]),r$4[i$4]=color$2.r||0,g$3[i$4]=color$2.g||0,b$3[i$4]=color$2.b||0;return r$4=spline(r$4),g$3=spline(g$3),b$3=spline(b$3),color$2.opacity=1,function(t$4){return color$2.r=r$4(t$4),color$2.g=g$3(t$4),color$2.b=b$3(t$4),color$2+``}}}var rgbBasis=rgbSpline(basis_default),rgbBasisClosed=rgbSpline(basisClosed_default);function numberArray_default(a$4,b$3){b$3||=[];var n$4=a$4?Math.min(b$3.length,a$4.length):0,c$3=b$3.slice(),i$4;return function(t$4){for(i$4=0;i$4<n$4;++i$4)c$3[i$4]=a$4[i$4]*(1-t$4)+b$3[i$4]*t$4;return c$3}}function isNumberArray(x$2){return ArrayBuffer.isView(x$2)&&!(x$2 instanceof DataView)}function genericArray(a$4,b$3){var nb=b$3?b$3.length:0,na=a$4?Math.min(nb,a$4.length):0,x$2=Array(na),c$3=Array(nb),i$4;for(i$4=0;i$4<na;++i$4)x$2[i$4]=value_default(a$4[i$4],b$3[i$4]);for(;i$4<nb;++i$4)c$3[i$4]=b$3[i$4];return function(t$4){for(i$4=0;i$4<na;++i$4)c$3[i$4]=x$2[i$4](t$4);return c$3}}function date_default(a$4,b$3){var d$3=new Date;return a$4=+a$4,b$3=+b$3,function(t$4){return d$3.setTime(a$4*(1-t$4)+b$3*t$4),d$3}}function number_default(a$4,b$3){return a$4=+a$4,b$3=+b$3,function(t$4){return a$4*(1-t$4)+b$3*t$4}}function object_default(a$4,b$3){var i$4={},c$3={},k$3;for(k$3 in(typeof a$4!=`object`||!a$4)&&(a$4={}),(typeof b$3!=`object`||!b$3)&&(b$3={}),b$3)k$3 in a$4?i$4[k$3]=value_default(a$4[k$3],b$3[k$3]):c$3[k$3]=b$3[k$3];return function(t$4){for(k$3 in i$4)c$3[k$3]=i$4[k$3](t$4);return c$3}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,`g`);function zero(b$3){return function(){return b$3}}function one(b$3){return function(t$4){return b$3(t$4)+``}}function string_default(a$4,b$3){var bi=reA.lastIndex=reB.lastIndex=0,am,bm,bs,i$4=-1,s$3=[],q$1=[];for(a$4+=``,b$3+=``;(am=reA.exec(a$4))&&(bm=reB.exec(b$3));)(bs=bm.index)>bi&&(bs=b$3.slice(bi,bs),s$3[i$4]?s$3[i$4]+=bs:s$3[++i$4]=bs),(am=am[0])===(bm=bm[0])?s$3[i$4]?s$3[i$4]+=bm:s$3[++i$4]=bm:(s$3[++i$4]=null,q$1.push({i:i$4,x:number_default(am,bm)})),bi=reB.lastIndex;return bi<b$3.length&&(bs=b$3.slice(bi),s$3[i$4]?s$3[i$4]+=bs:s$3[++i$4]=bs),s$3.length<2?q$1[0]?one(q$1[0].x):zero(b$3):(b$3=q$1.length,function(t$4){for(var i$5=0,o$3;i$5<b$3;++i$5)s$3[(o$3=q$1[i$5]).i]=o$3.x(t$4);return s$3.join(``)})}function value_default(a$4,b$3){var t$4=typeof b$3,c$3;return b$3==null||t$4===`boolean`?constant_default$1(b$3):(t$4===`number`?number_default:t$4===`string`?(c$3=color(b$3))?(b$3=c$3,rgb_default):string_default:b$3 instanceof color?rgb_default:b$3 instanceof Date?date_default:isNumberArray(b$3)?numberArray_default:Array.isArray(b$3)?genericArray:typeof b$3.valueOf!=`function`&&typeof b$3.toString!=`function`||isNaN(b$3)?object_default:number_default)(a$4,b$3)}var degrees=180/Math.PI,identity$2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose_default(a$4,b$3,c$3,d$3,e$4,f$3){var scaleX$1,scaleY$1,skewX;return(scaleX$1=Math.sqrt(a$4*a$4+b$3*b$3))&&(a$4/=scaleX$1,b$3/=scaleX$1),(skewX=a$4*c$3+b$3*d$3)&&(c$3-=a$4*skewX,d$3-=b$3*skewX),(scaleY$1=Math.sqrt(c$3*c$3+d$3*d$3))&&(c$3/=scaleY$1,d$3/=scaleY$1,skewX/=scaleY$1),a$4*d$3<b$3*c$3&&(a$4=-a$4,b$3=-b$3,skewX=-skewX,scaleX$1=-scaleX$1),{translateX:e$4,translateY:f$3,rotate:Math.atan2(b$3,a$4)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX$1,scaleY:scaleY$1}}var svgNode;function parseCss$1(value){let m$3=new(typeof DOMMatrix==`function`?DOMMatrix:WebKitCSSMatrix)(value+``);return m$3.isIdentity?identity$2:decompose_default(m$3.a,m$3.b,m$3.c,m$3.d,m$3.e,m$3.f)}function parseSvg(value){return value==null||(svgNode||=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),svgNode.setAttribute(`transform`,value),!(value=svgNode.transform.baseVal.consolidate()))?identity$2:(value=value.matrix,decompose_default(value.a,value.b,value.c,value.d,value.e,value.f))}function interpolateTransform(parse$1,pxComma,pxParen,degParen){function pop$2(s$3){return s$3.length?s$3.pop()+` `:``}function translate(xa,ya,xb,yb,s$3,q$1){if(xa!==xb||ya!==yb){var i$4=s$3.push(`translate(`,null,pxComma,null,pxParen);q$1.push({i:i$4-4,x:number_default(xa,xb)},{i:i$4-2,x:number_default(ya,yb)})}else (xb||yb)&&s$3.push(`translate(`+xb+pxComma+yb+pxParen)}function rotate$1(a$4,b$3,s$3,q$1){a$4===b$3?b$3&&s$3.push(pop$2(s$3)+`rotate(`+b$3+degParen):(a$4-b$3>180?b$3+=360:b$3-a$4>180&&(a$4+=360),q$1.push({i:s$3.push(pop$2(s$3)+`rotate(`,null,degParen)-2,x:number_default(a$4,b$3)}))}function skewX(a$4,b$3,s$3,q$1){a$4===b$3?b$3&&s$3.push(pop$2(s$3)+`skewX(`+b$3+degParen):q$1.push({i:s$3.push(pop$2(s$3)+`skewX(`,null,degParen)-2,x:number_default(a$4,b$3)})}function scale$1(xa,ya,xb,yb,s$3,q$1){if(xa!==xb||ya!==yb){var i$4=s$3.push(pop$2(s$3)+`scale(`,null,`,`,null,`)`);q$1.push({i:i$4-4,x:number_default(xa,xb)},{i:i$4-2,x:number_default(ya,yb)})}else (xb!==1||yb!==1)&&s$3.push(pop$2(s$3)+`scale(`+xb+`,`+yb+`)`)}return function(a$4,b$3){var s$3=[],q$1=[];return a$4=parse$1(a$4),b$3=parse$1(b$3),translate(a$4.translateX,a$4.translateY,b$3.translateX,b$3.translateY,s$3,q$1),rotate$1(a$4.rotate,b$3.rotate,s$3,q$1),skewX(a$4.skewX,b$3.skewX,s$3,q$1),scale$1(a$4.scaleX,a$4.scaleY,b$3.scaleX,b$3.scaleY,s$3,q$1),a$4=b$3=null,function(t$4){for(var i$4=-1,n$4=q$1.length,o$3;++i$4<n$4;)s$3[(o$3=q$1[i$4]).i]=o$3.x(t$4);return s$3.join(``)}}}var interpolateTransformCss=interpolateTransform(parseCss$1,`px, `,`px)`,`deg)`),interpolateTransformSvg=interpolateTransform(parseSvg,`, `,`)`,`)`),epsilon2=1e-12;function cosh(x$2){return((x$2=Math.exp(x$2))+1/x$2)/2}function sinh(x$2){return((x$2=Math.exp(x$2))-1/x$2)/2}function tanh(x$2){return((x$2=Math.exp(2*x$2))-1)/(x$2+1)}var zoom_default$1=(function zoomRho(rho,rho2,rho4){function zoom(p0,p1){var ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy,i$4,S$2;if(d2<epsilon2)S$2=Math.log(w1/w0)/rho,i$4=function(t$4){return[ux0+t$4*dx,uy0+t$4*dy,w0*Math.exp(rho*t$4*S$2)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0);S$2=(Math.log(Math.sqrt(b1*b1+1)-b1)-r0)/rho,i$4=function(t$4){var s$3=t$4*S$2,coshr0=cosh(r0),u$3=w0/(rho2*d1)*(coshr0*tanh(rho*s$3+r0)-sinh(r0));return[ux0+u$3*dx,uy0+u$3*dy,w0*coshr0/cosh(rho*s$3+r0)]}}return i$4.duration=S$2*1e3*rho/Math.SQRT2,i$4}return zoom.rho=function(_$1){var _1=Math.max(.001,+_$1),_2=_1*_1;return zoomRho(_1,_2,_2*_2)},zoom})(Math.SQRT2,2,4),frame=0,timeout=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance==`object`&&performance.now?performance:Date,setFrame=typeof window==`object`&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f$3){setTimeout(f$3,17)};function now$1(){return clockNow||=(setFrame(clearNow),clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay$1,time$1){if(typeof callback!=`function`)throw TypeError(`callback is not a function`);time$1=(time$1==null?now$1():+time$1)+(delay$1==null?0:+delay$1),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time$1,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(callback,delay$1,time$1){var t$4=new Timer;return t$4.restart(callback,delay$1,time$1),t$4}function timerFlush(){now$1(),++frame;for(var t$4=taskHead,e$4;t$4;)(e$4=clockNow-t$4._time)>=0&&t$4._call.call(void 0,e$4),t$4=t$4._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var now$4=clock.now(),delay$1=now$4-clockLast;delay$1>pokeDelay&&(clockSkew-=delay$1,clockLast=now$4)}function nap(){for(var t0,t1=taskHead,t2,time$1=1/0;t1;)t1._call?(time$1>t1._time&&(time$1=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time$1)}function sleep(time$1){frame||(timeout&&=clearTimeout(timeout),time$1-clockNow>24?(time$1<1/0&&(timeout=setTimeout(wake,time$1-clock.now()-clockSkew)),interval&&=clearInterval(interval)):(interval||=(clockLast=clock.now(),setInterval(poke,pokeDelay)),frame=1,setFrame(wake)))}function timeout_default(callback,delay$1,time$1){var t$4=new Timer;return delay$1=delay$1==null?0:+delay$1,t$4.restart(elapsed=>{t$4.stop(),callback(elapsed+delay$1)},delay$1,time$1),t$4}var emptyOn=dispatch_default(`start`,`end`,`cancel`,`interrupt`),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule_default(node,name,id$3,index$2,group,timing){var schedules=node.__transition;if(!schedules)node.__transition={};else if(id$3 in schedules)return;create$1(node,id$3,{name,index:index$2,group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:0})}function init(node,id$3){var schedule=get(node,id$3);if(schedule.state>0)throw Error(`too late; already scheduled`);return schedule}function set(node,id$3){var schedule=get(node,id$3);if(schedule.state>3)throw Error(`too late; already running`);return schedule}function get(node,id$3){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id$3]))throw Error(`transition not found`);return schedule}function create$1(node,id$3,self$1){var schedules=node.__transition,tween;schedules[id$3]=self$1,self$1.timer=timer(schedule,0,self$1.time);function schedule(elapsed){self$1.state=1,self$1.timer.restart(start$2,self$1.delay,self$1.time),self$1.delay<=elapsed&&start$2(elapsed-self$1.delay)}function start$2(elapsed){var i$4,j$2,n$4,o$3;if(self$1.state!==1)return stop();for(i$4 in schedules)if(o$3=schedules[i$4],o$3.name===self$1.name){if(o$3.state===3)return timeout_default(start$2);o$3.state===4?(o$3.state=6,o$3.timer.stop(),o$3.on.call(`interrupt`,node,node.__data__,o$3.index,o$3.group),delete schedules[i$4]):+i$4<id$3&&(o$3.state=6,o$3.timer.stop(),o$3.on.call(`cancel`,node,node.__data__,o$3.index,o$3.group),delete schedules[i$4])}if(timeout_default(function(){self$1.state===3&&(self$1.state=4,self$1.timer.restart(tick,self$1.delay,self$1.time),tick(elapsed))}),self$1.state=2,self$1.on.call(`start`,node,node.__data__,self$1.index,self$1.group),self$1.state===2){for(self$1.state=3,tween=Array(n$4=self$1.tween.length),i$4=0,j$2=-1;i$4<n$4;++i$4)(o$3=self$1.tween[i$4].value.call(node,node.__data__,self$1.index,self$1.group))&&(tween[++j$2]=o$3);tween.length=j$2+1}}function tick(elapsed){for(var t$4=elapsed<self$1.duration?self$1.ease.call(null,elapsed/self$1.duration):(self$1.timer.restart(stop),self$1.state=5,1),i$4=-1,n$4=tween.length;++i$4<n$4;)tween[i$4].call(node,t$4);self$1.state===5&&(self$1.on.call(`end`,node,node.__data__,self$1.index,self$1.group),stop())}function stop(){for(var i$4 in self$1.state=6,self$1.timer.stop(),delete schedules[id$3],schedules)return;delete node.__transition}}function interrupt_default(node,name){var schedules=node.__transition,schedule,active,empty$2=!0,i$4;if(schedules){for(i$4 in name=name==null?null:name+``,schedules){if((schedule=schedules[i$4]).name!==name){empty$2=!1;continue}active=schedule.state>2&&schedule.state<5,schedule.state=6,schedule.timer.stop(),schedule.on.call(active?`interrupt`:`cancel`,node,node.__data__,schedule.index,schedule.group),delete schedules[i$4]}empty$2&&delete node.__transition}}function interrupt_default$1(name){return this.each(function(){interrupt_default(this,name)})}function tweenRemove(id$3,name){var tween0,tween1;return function(){var schedule=set(this,id$3),tween=schedule.tween;if(tween!==tween0){tween1=tween0=tween;for(var i$4=0,n$4=tween1.length;i$4<n$4;++i$4)if(tween1[i$4].name===name){tween1=tween1.slice(),tween1.splice(i$4,1);break}}schedule.tween=tween1}}function tweenFunction(id$3,name,value){var tween0,tween1;if(typeof value!=`function`)throw Error();return function(){var schedule=set(this,id$3),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t$4={name,value},i$4=0,n$4=tween1.length;i$4<n$4;++i$4)if(tween1[i$4].name===name){tween1[i$4]=t$4;break}i$4===n$4&&tween1.push(t$4)}schedule.tween=tween1}}function tween_default(name,value){var id$3=this._id;if(name+=``,arguments.length<2){for(var tween=get(this.node(),id$3).tween,i$4=0,n$4=tween.length,t$4;i$4<n$4;++i$4)if((t$4=tween[i$4]).name===name)return t$4.value;return null}return this.each((value==null?tweenRemove:tweenFunction)(id$3,name,value))}function tweenValue(transition$1,name,value){var id$3=transition$1._id;return transition$1.each(function(){var schedule=set(this,id$3);(schedule.value||={})[name]=value.apply(this,arguments)}),function(node){return get(node,id$3).value[name]}}function interpolate_default(a$4,b$3){var c$3;return(typeof b$3==`number`?number_default:b$3 instanceof color?rgb_default:(c$3=color(b$3))?(b$3=c$3,rgb_default):string_default)(a$4,b$3)}function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,interpolate$1,value1){var string00,string1=value1+``,interpolate0;return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate$1(string00=string0,value1)}}function attrConstantNS(fullname,interpolate$1,value1){var string00,string1=value1+``,interpolate0;return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate$1(string00=string0,value1)}}function attrFunction(name,interpolate$1,value){var string00,string10,interpolate0;return function(){var string0,value1=value(this),string1;return value1==null?void this.removeAttribute(name):(string0=this.getAttribute(name),string1=value1+``,string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate$1(string00=string0,value1)))}}function attrFunctionNS(fullname,interpolate$1,value){var string00,string10,interpolate0;return function(){var string0,value1=value(this),string1;return value1==null?void this.removeAttributeNS(fullname.space,fullname.local):(string0=this.getAttributeNS(fullname.space,fullname.local),string1=value1+``,string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate$1(string00=string0,value1)))}}function attr_default(name,value){var fullname=namespace_default(name),i$4=fullname===`transform`?interpolateTransformSvg:interpolate_default;return this.attrTween(name,typeof value==`function`?(fullname.local?attrFunctionNS:attrFunction)(fullname,i$4,tweenValue(this,`attr.`+name,value)):value==null?(fullname.local?attrRemoveNS:attrRemove)(fullname):(fullname.local?attrConstantNS:attrConstant)(fullname,i$4,value))}function attrInterpolate(name,i$4){return function(t$4){this.setAttribute(name,i$4.call(this,t$4))}}function attrInterpolateNS(fullname,i$4){return function(t$4){this.setAttributeNS(fullname.space,fullname.local,i$4.call(this,t$4))}}function attrTweenNS(fullname,value){var t0,i0;function tween(){var i$4=value.apply(this,arguments);return i$4!==i0&&(t0=(i0=i$4)&&attrInterpolateNS(fullname,i$4)),t0}return tween._value=value,tween}function attrTween(name,value){var t0,i0;function tween(){var i$4=value.apply(this,arguments);return i$4!==i0&&(t0=(i0=i$4)&&attrInterpolate(name,i$4)),t0}return tween._value=value,tween}function attrTween_default(name,value){var key$1=`attr.`+name;if(arguments.length<2)return(key$1=this.tween(key$1))&&key$1._value;if(value==null)return this.tween(key$1,null);if(typeof value!=`function`)throw Error();var fullname=namespace_default(name);return this.tween(key$1,(fullname.local?attrTweenNS:attrTween)(fullname,value))}function delayFunction(id$3,value){return function(){init(this,id$3).delay=+value.apply(this,arguments)}}function delayConstant(id$3,value){return value=+value,function(){init(this,id$3).delay=value}}function delay_default(value){var id$3=this._id;return arguments.length?this.each((typeof value==`function`?delayFunction:delayConstant)(id$3,value)):get(this.node(),id$3).delay}function durationFunction(id$3,value){return function(){set(this,id$3).duration=+value.apply(this,arguments)}}function durationConstant(id$3,value){return value=+value,function(){set(this,id$3).duration=value}}function duration_default(value){var id$3=this._id;return arguments.length?this.each((typeof value==`function`?durationFunction:durationConstant)(id$3,value)):get(this.node(),id$3).duration}function easeConstant(id$3,value){if(typeof value!=`function`)throw Error();return function(){set(this,id$3).ease=value}}function ease_default(value){var id$3=this._id;return arguments.length?this.each(easeConstant(id$3,value)):get(this.node(),id$3).ease}function easeVarying(id$3,value){return function(){var v$3=value.apply(this,arguments);if(typeof v$3!=`function`)throw Error();set(this,id$3).ease=v$3}}function easeVarying_default(value){if(typeof value!=`function`)throw Error();return this.each(easeVarying(this._id,value))}function filter_default(match){typeof match!=`function`&&(match=matcher_default(match));for(var groups=this._groups,m$3=groups.length,subgroups=Array(m$3),j$2=0;j$2<m$3;++j$2)for(var group=groups[j$2],n$4=group.length,subgroup=subgroups[j$2]=[],node,i$4=0;i$4<n$4;++i$4)(node=group[i$4])&&match.call(node,node.__data__,i$4,group)&&subgroup.push(node);return new Transition(subgroups,this._parents,this._name,this._id)}function merge_default(transition$1){if(transition$1._id!==this._id)throw Error();for(var groups0=this._groups,groups1=transition$1._groups,m0=groups0.length,m1=groups1.length,m$3=Math.min(m0,m1),merges=Array(m0),j$2=0;j$2<m$3;++j$2)for(var group0=groups0[j$2],group1=groups1[j$2],n$4=group0.length,merge$1=merges[j$2]=Array(n$4),node,i$4=0;i$4<n$4;++i$4)(node=group0[i$4]||group1[i$4])&&(merge$1[i$4]=node);for(;j$2<m0;++j$2)merges[j$2]=groups0[j$2];return new Transition(merges,this._parents,this._name,this._id)}function start$1(name){return(name+``).trim().split(/^|\s+/).every(function(t$4){var i$4=t$4.indexOf(`.`);return i$4>=0&&(t$4=t$4.slice(0,i$4)),!t$4||t$4===`start`})}function onFunction(id$3,name,listener){var on0,on1,sit=start$1(name)?init:set;return function(){var schedule=sit(this,id$3),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}function on_default(name,listener){var id$3=this._id;return arguments.length<2?get(this.node(),id$3).on.on(name):this.each(onFunction(id$3,name,listener))}function removeFunction(id$3){return function(){var parent=this.parentNode;for(var i$4 in this.__transition)if(+i$4!==id$3)return;parent&&parent.removeChild(this)}}function remove_default(){return this.on(`end.remove`,removeFunction(this._id))}function select_default$1(select){var name=this._name,id$3=this._id;typeof select!=`function`&&(select=selector_default(select));for(var groups=this._groups,m$3=groups.length,subgroups=Array(m$3),j$2=0;j$2<m$3;++j$2)for(var group=groups[j$2],n$4=group.length,subgroup=subgroups[j$2]=Array(n$4),node,subnode,i$4=0;i$4<n$4;++i$4)(node=group[i$4])&&(subnode=select.call(node,node.__data__,i$4,group))&&(`__data__`in node&&(subnode.__data__=node.__data__),subgroup[i$4]=subnode,schedule_default(subgroup[i$4],name,id$3,i$4,subgroup,get(node,id$3)));return new Transition(subgroups,this._parents,name,id$3)}function selectAll_default(select){var name=this._name,id$3=this._id;typeof select!=`function`&&(select=selectorAll_default(select));for(var groups=this._groups,m$3=groups.length,subgroups=[],parents=[],j$2=0;j$2<m$3;++j$2)for(var group=groups[j$2],n$4=group.length,node,i$4=0;i$4<n$4;++i$4)if(node=group[i$4]){for(var children$1=select.call(node,node.__data__,i$4,group),child,inherit$1=get(node,id$3),k$3=0,l$3=children$1.length;k$3<l$3;++k$3)(child=children$1[k$3])&&schedule_default(child,name,id$3,k$3,children$1,inherit$1);subgroups.push(children$1),parents.push(node)}return new Transition(subgroups,parents,name,id$3)}var Selection=selection_default.prototype.constructor;function selection_default$1(){return new Selection(this._groups,this._parents)}function styleNull(name,interpolate$1){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),string1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate$1(string00=string0,string10=string1)}}function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,interpolate$1,value1){var string00,string1=value1+``,interpolate0;return function(){var string0=styleValue(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate$1(string00=string0,value1)}}function styleFunction(name,interpolate$1,value){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),value1=value(this),string1=value1+``;return value1??(string1=value1=(this.style.removeProperty(name),styleValue(this,name))),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate$1(string00=string0,value1))}}function styleMaybeRemove(id$3,name){var on0,on1,listener0,key$1=`style.`+name,event=`end.`+key$1,remove$1;return function(){var schedule=set(this,id$3),on=schedule.on,listener=schedule.value[key$1]==null?remove$1||=styleRemove(name):void 0;(on!==on0||listener0!==listener)&&(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}function style_default(name,value,priority){var i$4=(name+=``)==`transform`?interpolateTransformCss:interpolate_default;return value==null?this.styleTween(name,styleNull(name,i$4)).on(`end.style.`+name,styleRemove(name)):typeof value==`function`?this.styleTween(name,styleFunction(name,i$4,tweenValue(this,`style.`+name,value))).each(styleMaybeRemove(this._id,name)):this.styleTween(name,styleConstant(name,i$4,value),priority).on(`end.style.`+name,null)}function styleInterpolate(name,i$4,priority){return function(t$4){this.style.setProperty(name,i$4.call(this,t$4),priority)}}function styleTween(name,value,priority){var t$4,i0;function tween(){var i$4=value.apply(this,arguments);return i$4!==i0&&(t$4=(i0=i$4)&&styleInterpolate(name,i$4,priority)),t$4}return tween._value=value,tween}function styleTween_default(name,value,priority){var key$1=`style.`+(name+=``);if(arguments.length<2)return(key$1=this.tween(key$1))&&key$1._value;if(value==null)return this.tween(key$1,null);if(typeof value!=`function`)throw Error();return this.tween(key$1,styleTween(name,value,priority??``))}function textConstant(value){return function(){this.textContent=value}}function textFunction(value){return function(){this.textContent=value(this)??``}}function text_default(value){return this.tween(`text`,typeof value==`function`?textFunction(tweenValue(this,`text`,value)):textConstant(value==null?``:value+``))}function textInterpolate(i$4){return function(t$4){this.textContent=i$4.call(this,t$4)}}function textTween(value){var t0,i0;function tween(){var i$4=value.apply(this,arguments);return i$4!==i0&&(t0=(i0=i$4)&&textInterpolate(i$4)),t0}return tween._value=value,tween}function textTween_default(value){var key$1=`text`;if(arguments.length<1)return(key$1=this.tween(key$1))&&key$1._value;if(value==null)return this.tween(key$1,null);if(typeof value!=`function`)throw Error();return this.tween(key$1,textTween(value))}function transition_default$1(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m$3=groups.length,j$2=0;j$2<m$3;++j$2)for(var group=groups[j$2],n$4=group.length,node,i$4=0;i$4<n$4;++i$4)if(node=group[i$4]){var inherit$1=get(node,id0);schedule_default(node,name,id1,i$4,group,{time:inherit$1.time+inherit$1.delay+inherit$1.duration,delay:0,duration:inherit$1.duration,ease:inherit$1.ease})}return new Transition(groups,this._parents,name,id1)}function end_default(){var on0,on1,that=this,id$3=that._id,size=that.size();return new Promise(function(resolve,reject){var cancel={value:reject},end$1={value:function(){--size===0&&resolve()}};that.each(function(){var schedule=set(this,id$3),on=schedule.on;on!==on0&&(on1=(on0=on).copy(),on1._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end$1)),schedule.on=on1}),size===0&&resolve()})}var id=0;function Transition(groups,parents,name,id$3){this._groups=groups,this._parents=parents,this._name=name,this._id=id$3}function transition(name){return selection_default().transition(name)}function newId(){return++id}var selection_prototype=selection_default.prototype;Transition.prototype=transition.prototype={constructor:Transition,select:select_default$1,selectAll:selectAll_default,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:filter_default,merge:merge_default,selection:selection_default$1,transition:transition_default$1,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:on_default,attr:attr_default,attrTween:attrTween_default,style:style_default,styleTween:styleTween_default,text:text_default,textTween:textTween_default,remove:remove_default,tween:tween_default,delay:delay_default,duration:duration_default,ease:ease_default,easeVarying:easeVarying_default,end:end_default,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(t$4){return((t$4*=2)<=1?t$4*t$4*t$4:(t$4-=2)*t$4*t$4+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(node,id$3){for(var timing;!(timing=node.__transition)||!(timing=timing[id$3]);)if(!(node=node.parentNode))throw Error(`transition ${id$3} not found`);return timing}function transition_default(name){var id$3,timing;name instanceof Transition?(id$3=name._id,name=name._name):(id$3=newId(),(timing=defaultTiming).time=now$1(),name=name==null?null:name+``);for(var groups=this._groups,m$3=groups.length,j$2=0;j$2<m$3;++j$2)for(var group=groups[j$2],n$4=group.length,node,i$4=0;i$4<n$4;++i$4)(node=group[i$4])&&schedule_default(node,name,id$3,i$4,group,timing||inherit(node,id$3));return new Transition(groups,this._parents,name,id$3)}selection_default.prototype.interrupt=interrupt_default$1,selection_default.prototype.transition=transition_default;var constant_default=x$2=>()=>x$2;function ZoomEvent(type,{sourceEvent,target,transform:transform$1,dispatch:dispatch$1}){Object.defineProperties(this,{type:{value:type,enumerable:!0,configurable:!0},sourceEvent:{value:sourceEvent,enumerable:!0,configurable:!0},target:{value:target,enumerable:!0,configurable:!0},transform:{value:transform$1,enumerable:!0,configurable:!0},_:{value:dispatch$1}})}function Transform(k$3,x$2,y$2){this.k=k$3,this.x=x$2,this.y=y$2}Transform.prototype={constructor:Transform,scale:function(k$3){return k$3===1?this:new Transform(this.k*k$3,this.x,this.y)},translate:function(x$2,y$2){return x$2===0&y$2===0?this:new Transform(this.k,this.x+this.k*x$2,this.y+this.k*y$2)},apply:function(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y]},applyX:function(x$2){return x$2*this.k+this.x},applyY:function(y$2){return y$2*this.k+this.y},invert:function(location$1){return[(location$1[0]-this.x)/this.k,(location$1[1]-this.y)/this.k]},invertX:function(x$2){return(x$2-this.x)/this.k},invertY:function(y$2){return(y$2-this.y)/this.k},rescaleX:function(x$2){return x$2.copy().domain(x$2.range().map(this.invertX,this).map(x$2.invert,x$2))},rescaleY:function(y$2){return y$2.copy().domain(y$2.range().map(this.invertY,this).map(y$2.invert,y$2))},toString:function(){return`translate(`+this.x+`,`+this.y+`) scale(`+this.k+`)`}};var identity$1=new Transform(1,0,0);transform.prototype=Transform.prototype;function transform(node){for(;!node.__zoom;)if(!(node=node.parentNode))return identity$1;return node.__zoom}function nopropagation(event){event.stopImmediatePropagation()}function noevent_default(event){event.preventDefault(),event.stopImmediatePropagation()}function defaultFilter(event){return(!event.ctrlKey||event.type===`wheel`)&&!event.button}function defaultExtent(){var e$4=this;return e$4 instanceof SVGElement?(e$4=e$4.ownerSVGElement||e$4,e$4.hasAttribute(`viewBox`)?(e$4=e$4.viewBox.baseVal,[[e$4.x,e$4.y],[e$4.x+e$4.width,e$4.y+e$4.height]]):[[0,0],[e$4.width.baseVal.value,e$4.height.baseVal.value]]):[[0,0],[e$4.clientWidth,e$4.clientHeight]]}function defaultTransform(){return this.__zoom||identity$1}function defaultWheelDelta(event){return-event.deltaY*(event.deltaMode===1?.05:event.deltaMode?1:.002)*(event.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||`ontouchstart`in this}function defaultConstrain(transform$1,extent,translateExtent){var dx0=transform$1.invertX(extent[0][0])-translateExtent[0][0],dx1=transform$1.invertX(extent[1][0])-translateExtent[1][0],dy0=transform$1.invertY(extent[0][1])-translateExtent[0][1],dy1=transform$1.invertY(extent[1][1])-translateExtent[1][1];return transform$1.translate(dx1>dx0?(dx0+dx1)/2:Math.min(0,dx0)||Math.max(0,dx1),dy1>dy0?(dy0+dy1)/2:Math.min(0,dy0)||Math.max(0,dy1))}function zoom_default(){var filter$2=defaultFilter,extent=defaultExtent,constrain=defaultConstrain,wheelDelta$1=defaultWheelDelta,touchable=defaultTouchable,scaleExtent=[0,1/0],translateExtent=[[-1/0,-1/0],[1/0,1/0]],duration=250,interpolate$1=zoom_default$1,listeners=dispatch_default(`start`,`zoom`,`end`),touchstarting,touchfirst,touchending,touchDelay=500,wheelDelay=150,clickDistance2=0,tapDistance=10;function zoom(selection$1){selection$1.property(`__zoom`,defaultTransform).on(`wheel.zoom`,wheeled,{passive:!1}).on(`mousedown.zoom`,mousedowned).on(`dblclick.zoom`,dblclicked).filter(touchable).on(`touchstart.zoom`,touchstarted).on(`touchmove.zoom`,touchmoved).on(`touchend.zoom touchcancel.zoom`,touchended).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}zoom.transform=function(collection,transform$1,point,event){var selection$1=collection.selection?collection.selection():collection;selection$1.property(`__zoom`,defaultTransform),collection===selection$1?selection$1.interrupt().each(function(){gesture(this,arguments).event(event).start().zoom(null,typeof transform$1==`function`?transform$1.apply(this,arguments):transform$1).end()}):schedule(collection,transform$1,point,event)},zoom.scaleBy=function(selection$1,k$3,p$3,event){zoom.scaleTo(selection$1,function(){return this.__zoom.k*(typeof k$3==`function`?k$3.apply(this,arguments):k$3)},p$3,event)},zoom.scaleTo=function(selection$1,k$3,p$3,event){zoom.transform(selection$1,function(){var e$4=extent.apply(this,arguments),t0=this.__zoom,p0=p$3==null?centroid(e$4):typeof p$3==`function`?p$3.apply(this,arguments):p$3,p1=t0.invert(p0),k1=typeof k$3==`function`?k$3.apply(this,arguments):k$3;return constrain(translate(scale$1(t0,k1),p0,p1),e$4,translateExtent)},p$3,event)},zoom.translateBy=function(selection$1,x$2,y$2,event){zoom.transform(selection$1,function(){return constrain(this.__zoom.translate(typeof x$2==`function`?x$2.apply(this,arguments):x$2,typeof y$2==`function`?y$2.apply(this,arguments):y$2),extent.apply(this,arguments),translateExtent)},null,event)},zoom.translateTo=function(selection$1,x$2,y$2,p$3,event){zoom.transform(selection$1,function(){var e$4=extent.apply(this,arguments),t$4=this.__zoom,p0=p$3==null?centroid(e$4):typeof p$3==`function`?p$3.apply(this,arguments):p$3;return constrain(identity$1.translate(p0[0],p0[1]).scale(t$4.k).translate(typeof x$2==`function`?-x$2.apply(this,arguments):-x$2,typeof y$2==`function`?-y$2.apply(this,arguments):-y$2),e$4,translateExtent)},p$3,event)};function scale$1(transform$1,k$3){return k$3=Math.max(scaleExtent[0],Math.min(scaleExtent[1],k$3)),k$3===transform$1.k?transform$1:new Transform(k$3,transform$1.x,transform$1.y)}function translate(transform$1,p0,p1){var x$2=p0[0]-p1[0]*transform$1.k,y$2=p0[1]-p1[1]*transform$1.k;return x$2===transform$1.x&&y$2===transform$1.y?transform$1:new Transform(transform$1.k,x$2,y$2)}function centroid(extent$1){return[(+extent$1[0][0]+ +extent$1[1][0])/2,(+extent$1[0][1]+ +extent$1[1][1])/2]}function schedule(transition$1,transform$1,point,event){transition$1.on(`start.zoom`,function(){gesture(this,arguments).event(event).start()}).on(`interrupt.zoom end.zoom`,function(){gesture(this,arguments).event(event).end()}).tween(`zoom`,function(){var that=this,args=arguments,g$3=gesture(that,args).event(event),e$4=extent.apply(that,args),p$3=point==null?centroid(e$4):typeof point==`function`?point.apply(that,args):point,w$1=Math.max(e$4[1][0]-e$4[0][0],e$4[1][1]-e$4[0][1]),a$4=that.__zoom,b$3=typeof transform$1==`function`?transform$1.apply(that,args):transform$1,i$4=interpolate$1(a$4.invert(p$3).concat(w$1/a$4.k),b$3.invert(p$3).concat(w$1/b$3.k));return function(t$4){if(t$4===1)t$4=b$3;else{var l$3=i$4(t$4),k$3=w$1/l$3[2];t$4=new Transform(k$3,p$3[0]-l$3[0]*k$3,p$3[1]-l$3[1]*k$3)}g$3.zoom(null,t$4)}})}function gesture(that,args,clean$2){return!clean$2&&that.__zooming||new Gesture(that,args)}function Gesture(that,args){this.that=that,this.args=args,this.active=0,this.sourceEvent=null,this.extent=extent.apply(that,args),this.taps=0}Gesture.prototype={event:function(event){return event&&(this.sourceEvent=event),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit(`start`)),this},zoom:function(key$1,transform$1){return this.mouse&&key$1!==`mouse`&&(this.mouse[1]=transform$1.invert(this.mouse[0])),this.touch0&&key$1!==`touch`&&(this.touch0[1]=transform$1.invert(this.touch0[0])),this.touch1&&key$1!==`touch`&&(this.touch1[1]=transform$1.invert(this.touch1[0])),this.that.__zoom=transform$1,this.emit(`zoom`),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit(`end`)),this},emit:function(type){var d$3=select_default(this.that).datum();listeners.call(type,this.that,new ZoomEvent(type,{sourceEvent:this.sourceEvent,target:zoom,type,transform:this.that.__zoom,dispatch:listeners}),d$3)}};function wheeled(event,...args){if(!filter$2.apply(this,arguments))return;var g$3=gesture(this,args).event(event),t$4=this.__zoom,k$3=Math.max(scaleExtent[0],Math.min(scaleExtent[1],t$4.k*2**wheelDelta$1.apply(this,arguments))),p$3=pointer_default(event);if(g$3.wheel)(g$3.mouse[0][0]!==p$3[0]||g$3.mouse[0][1]!==p$3[1])&&(g$3.mouse[1]=t$4.invert(g$3.mouse[0]=p$3)),clearTimeout(g$3.wheel);else if(t$4.k===k$3)return;else g$3.mouse=[p$3,t$4.invert(p$3)],interrupt_default(this),g$3.start();noevent_default(event),g$3.wheel=setTimeout(wheelidled,wheelDelay),g$3.zoom(`mouse`,constrain(translate(scale$1(t$4,k$3),g$3.mouse[0],g$3.mouse[1]),g$3.extent,translateExtent));function wheelidled(){g$3.wheel=null,g$3.end()}}function mousedowned(event,...args){if(touchending||!filter$2.apply(this,arguments))return;var currentTarget=event.currentTarget,g$3=gesture(this,args,!0).event(event),v$3=select_default(event.view).on(`mousemove.zoom`,mousemoved,!0).on(`mouseup.zoom`,mouseupped,!0),p$3=pointer_default(event,currentTarget),x0=event.clientX,y0=event.clientY;nodrag_default(event.view),nopropagation(event),g$3.mouse=[p$3,this.__zoom.invert(p$3)],interrupt_default(this),g$3.start();function mousemoved(event$1){if(noevent_default(event$1),!g$3.moved){var dx=event$1.clientX-x0,dy=event$1.clientY-y0;g$3.moved=dx*dx+dy*dy>clickDistance2}g$3.event(event$1).zoom(`mouse`,constrain(translate(g$3.that.__zoom,g$3.mouse[0]=pointer_default(event$1,currentTarget),g$3.mouse[1]),g$3.extent,translateExtent))}function mouseupped(event$1){v$3.on(`mousemove.zoom mouseup.zoom`,null),yesdrag(event$1.view,g$3.moved),noevent_default(event$1),g$3.event(event$1).end()}}function dblclicked(event,...args){if(filter$2.apply(this,arguments)){var t0=this.__zoom,p0=pointer_default(event.changedTouches?event.changedTouches[0]:event,this),p1=t0.invert(p0),k1=t0.k*(event.shiftKey?.5:2),t1=constrain(translate(scale$1(t0,k1),p0,p1),extent.apply(this,args),translateExtent);noevent_default(event),duration>0?select_default(this).transition().duration(duration).call(schedule,t1,p0,event):select_default(this).call(zoom.transform,t1,p0,event)}}function touchstarted(event,...args){if(filter$2.apply(this,arguments)){var touches=event.touches,n$4=touches.length,g$3=gesture(this,args,event.changedTouches.length===n$4).event(event),started,i$4,t$4,p$3;for(nopropagation(event),i$4=0;i$4<n$4;++i$4)t$4=touches[i$4],p$3=pointer_default(t$4,this),p$3=[p$3,this.__zoom.invert(p$3),t$4.identifier],g$3.touch0?!g$3.touch1&&g$3.touch0[2]!==p$3[2]&&(g$3.touch1=p$3,g$3.taps=0):(g$3.touch0=p$3,started=!0,g$3.taps=1+!!touchstarting);touchstarting&&=clearTimeout(touchstarting),started&&(g$3.taps<2&&(touchfirst=p$3[0],touchstarting=setTimeout(function(){touchstarting=null},touchDelay)),interrupt_default(this),g$3.start())}}function touchmoved(event,...args){if(this.__zooming){var g$3=gesture(this,args).event(event),touches=event.changedTouches,n$4=touches.length,i$4,t$4,p$3,l$3;for(noevent_default(event),i$4=0;i$4<n$4;++i$4)t$4=touches[i$4],p$3=pointer_default(t$4,this),g$3.touch0&&g$3.touch0[2]===t$4.identifier?g$3.touch0[0]=p$3:g$3.touch1&&g$3.touch1[2]===t$4.identifier&&(g$3.touch1[0]=p$3);if(t$4=g$3.that.__zoom,g$3.touch1){var p0=g$3.touch0[0],l0=g$3.touch0[1],p1=g$3.touch1[0],l1=g$3.touch1[1],dp=(dp=p1[0]-p0[0])*dp+(dp=p1[1]-p0[1])*dp,dl=(dl=l1[0]-l0[0])*dl+(dl=l1[1]-l0[1])*dl;t$4=scale$1(t$4,Math.sqrt(dp/dl)),p$3=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l$3=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2]}else if(g$3.touch0)p$3=g$3.touch0[0],l$3=g$3.touch0[1];else return;g$3.zoom(`touch`,constrain(translate(t$4,p$3,l$3),g$3.extent,translateExtent))}}function touchended(event,...args){if(this.__zooming){var g$3=gesture(this,args).event(event),touches=event.changedTouches,n$4=touches.length,i$4,t$4;for(nopropagation(event),touchending&&clearTimeout(touchending),touchending=setTimeout(function(){touchending=null},touchDelay),i$4=0;i$4<n$4;++i$4)t$4=touches[i$4],g$3.touch0&&g$3.touch0[2]===t$4.identifier?delete g$3.touch0:g$3.touch1&&g$3.touch1[2]===t$4.identifier&&delete g$3.touch1;if(g$3.touch1&&!g$3.touch0&&(g$3.touch0=g$3.touch1,delete g$3.touch1),g$3.touch0)g$3.touch0[1]=this.__zoom.invert(g$3.touch0[0]);else if(g$3.end(),g$3.taps===2&&(t$4=pointer_default(t$4,this),Math.hypot(touchfirst[0]-t$4[0],touchfirst[1]-t$4[1])<tapDistance)){var p$3=select_default(this).on(`dblclick.zoom`);p$3&&p$3.apply(this,arguments)}}}return zoom.wheelDelta=function(_$1){return arguments.length?(wheelDelta$1=typeof _$1==`function`?_$1:constant_default(+_$1),zoom):wheelDelta$1},zoom.filter=function(_$1){return arguments.length?(filter$2=typeof _$1==`function`?_$1:constant_default(!!_$1),zoom):filter$2},zoom.touchable=function(_$1){return arguments.length?(touchable=typeof _$1==`function`?_$1:constant_default(!!_$1),zoom):touchable},zoom.extent=function(_$1){return arguments.length?(extent=typeof _$1==`function`?_$1:constant_default([[+_$1[0][0],+_$1[0][1]],[+_$1[1][0],+_$1[1][1]]]),zoom):extent},zoom.scaleExtent=function(_$1){return arguments.length?(scaleExtent[0]=+_$1[0],scaleExtent[1]=+_$1[1],zoom):[scaleExtent[0],scaleExtent[1]]},zoom.translateExtent=function(_$1){return arguments.length?(translateExtent[0][0]=+_$1[0][0],translateExtent[1][0]=+_$1[1][0],translateExtent[0][1]=+_$1[0][1],translateExtent[1][1]=+_$1[1][1],zoom):[[translateExtent[0][0],translateExtent[0][1]],[translateExtent[1][0],translateExtent[1][1]]]},zoom.constrain=function(_$1){return arguments.length?(constrain=_$1,zoom):constrain},zoom.duration=function(_$1){return arguments.length?(duration=+_$1,zoom):duration},zoom.interpolate=function(_$1){return arguments.length?(interpolate$1=_$1,zoom):interpolate$1},zoom.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?zoom:value},zoom.clickDistance=function(_$1){return arguments.length?(clickDistance2=(_$1=+_$1)*_$1,zoom):Math.sqrt(clickDistance2)},zoom.tapDistance=function(_$1){return arguments.length?(tapDistance=+_$1,zoom):tapDistance},zoom}var errorMessages={error001:()=>`[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001`,error002:()=>`It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.`,error003:nodeType=>`Node type "${nodeType}" not found. Using fallback type "default".`,error004:()=>`The React Flow parent container needs a width and a height to render the graph.`,error005:()=>`Only child nodes can use a parent extent.`,error006:()=>`Can't create edge. An edge needs a source and a target.`,error007:id$3=>`The old edge with id=${id$3} does not exist.`,error009:type=>`Marker type "${type}" doesn't exist.`,error008:(handleType,{id:id$3,sourceHandle,targetHandle})=>`Couldn't create edge for ${handleType} handle id: "${handleType===`source`?sourceHandle:targetHandle}", edge id: ${id$3}.`,error010:()=>`Handle: No node id found. Make sure to only use a Handle inside a custom Node.`,error011:edgeType=>`Edge type "${edgeType}" not found. Using fallback type "default".`,error012:id$3=>`Node with id "${id$3}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(lib=`react`)=>`It seems that you haven't loaded the styles. Please import '@xyflow/${lib}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>`useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.`,error015:()=>`It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.`},infiniteExtent=[[-1/0,-1/0],[1/0,1/0]],elementSelectionKeys=[`Enter`,` `,`Escape`],defaultAriaLabelConfig={"node.a11yDescription.default":`Press enter or space to select a node. Press delete to remove it and escape to cancel.`,"node.a11yDescription.keyboardDisabled":`Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.`,"node.a11yDescription.ariaLiveMessage":({direction,x:x$2,y:y$2})=>`Moved selected node ${direction}. New position, x: ${x$2}, y: ${y$2}`,"edge.a11yDescription.default":`Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.`,"controls.ariaLabel":`Control Panel`,"controls.zoomIn.ariaLabel":`Zoom In`,"controls.zoomOut.ariaLabel":`Zoom Out`,"controls.fitView.ariaLabel":`Fit View`,"controls.interactive.ariaLabel":`Toggle Interactivity`,"minimap.ariaLabel":`Mini Map`,"handle.ariaLabel":`Handle`},ConnectionMode;(function(ConnectionMode$1){ConnectionMode$1.Strict=`strict`,ConnectionMode$1.Loose=`loose`})(ConnectionMode||={});var PanOnScrollMode;(function(PanOnScrollMode$1){PanOnScrollMode$1.Free=`free`,PanOnScrollMode$1.Vertical=`vertical`,PanOnScrollMode$1.Horizontal=`horizontal`})(PanOnScrollMode||={});var SelectionMode;(function(SelectionMode$1){SelectionMode$1.Partial=`partial`,SelectionMode$1.Full=`full`})(SelectionMode||={});var initialConnection={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null},ConnectionLineType;(function(ConnectionLineType$1){ConnectionLineType$1.Bezier=`default`,ConnectionLineType$1.Straight=`straight`,ConnectionLineType$1.Step=`step`,ConnectionLineType$1.SmoothStep=`smoothstep`,ConnectionLineType$1.SimpleBezier=`simplebezier`})(ConnectionLineType||={});var MarkerType;(function(MarkerType$1){MarkerType$1.Arrow=`arrow`,MarkerType$1.ArrowClosed=`arrowclosed`})(MarkerType||={});var Position;(function(Position$1){Position$1.Left=`left`,Position$1.Top=`top`,Position$1.Right=`right`,Position$1.Bottom=`bottom`})(Position||={});var oppositePosition={[Position.Left]:Position.Right,[Position.Right]:Position.Left,[Position.Top]:Position.Bottom,[Position.Bottom]:Position.Top};function getConnectionStatus(isValid){return isValid===null?null:isValid?`valid`:`invalid`}var isEdgeBase=element=>`id`in element&&`source`in element&&`target`in element,isNodeBase=element=>`id`in element&&`position`in element&&!(`source`in element)&&!(`target`in element),isInternalNodeBase=element=>`id`in element&&`internals`in element&&!(`source`in element)&&!(`target`in element),getNodePositionWithOrigin=(node,nodeOrigin=[0,0])=>{let{width,height}=getNodeDimensions(node),origin$2=node.origin??nodeOrigin,offsetX=width*origin$2[0],offsetY=height*origin$2[1];return{x:node.position.x-offsetX,y:node.position.y-offsetY}},getNodesBounds=(nodes,params={nodeOrigin:[0,0]})=>nodes.length===0?{x:0,y:0,width:0,height:0}:boxToRect(nodes.reduce((currBox,nodeOrId)=>{let isId=typeof nodeOrId==`string`,currentNode=!params.nodeLookup&&!isId?nodeOrId:void 0;return params.nodeLookup&&(currentNode=isId?params.nodeLookup.get(nodeOrId):isInternalNodeBase(nodeOrId)?nodeOrId:params.nodeLookup.get(nodeOrId.id)),getBoundsOfBoxes(currBox,currentNode?nodeToBox(currentNode,params.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),getInternalNodesBounds=(nodeLookup,params={})=>{let box={x:1/0,y:1/0,x2:-1/0,y2:-1/0},hasVisibleNodes=!1;return nodeLookup.forEach(node=>{(params.filter===void 0||params.filter(node))&&(box=getBoundsOfBoxes(box,nodeToBox(node)),hasVisibleNodes=!0)}),hasVisibleNodes?boxToRect(box):{x:0,y:0,width:0,height:0}},getNodesInside=(nodes,rect,[tx,ty,tScale]=[0,0,1],partially=!1,excludeNonSelectableNodes=!1)=>{let paneRect={...pointToRendererPoint(rect,[tx,ty,tScale]),width:rect.width/tScale,height:rect.height/tScale},visibleNodes=[];for(let node of nodes.values()){let{measured,selectable=!0,hidden=!1}=node;if(excludeNonSelectableNodes&&!selectable||hidden)continue;let width=measured.width??node.width??node.initialWidth??null,height=measured.height??node.height??node.initialHeight??null,overlappingArea=getOverlappingArea(paneRect,nodeToRect(node)),area=(width??0)*(height??0),partiallyVisible=partially&&overlappingArea>0;(!node.internals.handleBounds||partiallyVisible||overlappingArea>=area||node.dragging)&&visibleNodes.push(node)}return visibleNodes},getConnectedEdges=(nodes,edges)=>{let nodeIds=new Set;return nodes.forEach(node=>{nodeIds.add(node.id)}),edges.filter(edge=>nodeIds.has(edge.source)||nodeIds.has(edge.target))};function getFitViewNodes(nodeLookup,options$1){let fitViewNodes=new Map,optionNodeIds=options$1?.nodes?new Set(options$1.nodes.map(node=>node.id)):null;return nodeLookup.forEach(n$4=>{n$4.measured.width&&n$4.measured.height&&(options$1?.includeHiddenNodes||!n$4.hidden)&&(!optionNodeIds||optionNodeIds.has(n$4.id))&&fitViewNodes.set(n$4.id,n$4)}),fitViewNodes}async function fitViewport({nodes,width,height,panZoom,minZoom,maxZoom},options$1){if(nodes.size===0)return Promise.resolve(!0);let viewport=getViewportForBounds(getInternalNodesBounds(getFitViewNodes(nodes,options$1)),width,height,options$1?.minZoom??minZoom,options$1?.maxZoom??maxZoom,options$1?.padding??.1);return await panZoom.setViewport(viewport,{duration:options$1?.duration,ease:options$1?.ease,interpolate:options$1?.interpolate}),Promise.resolve(!0)}function calculateNodePosition({nodeId,nextPosition,nodeLookup,nodeOrigin=[0,0],nodeExtent,onError}){let node=nodeLookup.get(nodeId),parentNode=node.parentId?nodeLookup.get(node.parentId):void 0,{x:parentX,y:parentY}=parentNode?parentNode.internals.positionAbsolute:{x:0,y:0},origin$2=node.origin??nodeOrigin,extent=node.extent||nodeExtent;if(node.extent===`parent`&&!node.expandParent)if(!parentNode)onError?.(`005`,errorMessages.error005());else{let parentWidth=parentNode.measured.width,parentHeight=parentNode.measured.height;parentWidth&&parentHeight&&(extent=[[parentX,parentY],[parentX+parentWidth,parentY+parentHeight]])}else parentNode&&isCoordinateExtent(node.extent)&&(extent=[[node.extent[0][0]+parentX,node.extent[0][1]+parentY],[node.extent[1][0]+parentX,node.extent[1][1]+parentY]]);let positionAbsolute=isCoordinateExtent(extent)?clampPosition(nextPosition,extent,node.measured):nextPosition;return(node.measured.width===void 0||node.measured.height===void 0)&&onError?.(`015`,errorMessages.error015()),{position:{x:positionAbsolute.x-parentX+(node.measured.width??0)*origin$2[0],y:positionAbsolute.y-parentY+(node.measured.height??0)*origin$2[1]},positionAbsolute}}async function getElementsToRemove({nodesToRemove=[],edgesToRemove=[],nodes,edges,onBeforeDelete}){let nodeIds=new Set(nodesToRemove.map(node=>node.id)),matchingNodes=[];for(let node of nodes){if(node.deletable===!1)continue;let isIncluded=nodeIds.has(node.id),parentHit=!isIncluded&&node.parentId&&matchingNodes.find(n$4=>n$4.id===node.parentId);(isIncluded||parentHit)&&matchingNodes.push(node)}let edgeIds=new Set(edgesToRemove.map(edge=>edge.id)),deletableEdges=edges.filter(edge=>edge.deletable!==!1),matchingEdges=getConnectedEdges(matchingNodes,deletableEdges);for(let edge of deletableEdges)edgeIds.has(edge.id)&&!matchingEdges.find(e$4=>e$4.id===edge.id)&&matchingEdges.push(edge);if(!onBeforeDelete)return{edges:matchingEdges,nodes:matchingNodes};let onBeforeDeleteResult=await onBeforeDelete({nodes:matchingNodes,edges:matchingEdges});return typeof onBeforeDeleteResult==`boolean`?onBeforeDeleteResult?{edges:matchingEdges,nodes:matchingNodes}:{edges:[],nodes:[]}:onBeforeDeleteResult}var clamp$1=(val,min=0,max=1)=>Math.min(Math.max(val,min),max),clampPosition=(position$1={x:0,y:0},extent,dimensions)=>({x:clamp$1(position$1.x,extent[0][0],extent[1][0]-(dimensions?.width??0)),y:clamp$1(position$1.y,extent[0][1],extent[1][1]-(dimensions?.height??0))});function clampPositionToParent(childPosition,childDimensions,parent){let{width:parentWidth,height:parentHeight}=getNodeDimensions(parent),{x:parentX,y:parentY}=parent.internals.positionAbsolute;return clampPosition(childPosition,[[parentX,parentY],[parentX+parentWidth,parentY+parentHeight]],childDimensions)}var calcAutoPanVelocity=(value,min,max)=>value<min?clamp$1(Math.abs(value-min),1,min)/min:value>max?-clamp$1(Math.abs(value-max),1,min)/min:0,calcAutoPan=(pos,bounds,speed=15,distance$4=40)=>[calcAutoPanVelocity(pos.x,distance$4,bounds.width-distance$4)*speed,calcAutoPanVelocity(pos.y,distance$4,bounds.height-distance$4)*speed],getBoundsOfBoxes=(box1,box2)=>({x:Math.min(box1.x,box2.x),y:Math.min(box1.y,box2.y),x2:Math.max(box1.x2,box2.x2),y2:Math.max(box1.y2,box2.y2)}),rectToBox=({x:x$2,y:y$2,width,height})=>({x:x$2,y:y$2,x2:x$2+width,y2:y$2+height}),boxToRect=({x:x$2,y:y$2,x2,y2})=>({x:x$2,y:y$2,width:x2-x$2,height:y2-y$2}),nodeToRect=(node,nodeOrigin=[0,0])=>{let{x:x$2,y:y$2}=isInternalNodeBase(node)?node.internals.positionAbsolute:getNodePositionWithOrigin(node,nodeOrigin);return{x:x$2,y:y$2,width:node.measured?.width??node.width??node.initialWidth??0,height:node.measured?.height??node.height??node.initialHeight??0}},nodeToBox=(node,nodeOrigin=[0,0])=>{let{x:x$2,y:y$2}=isInternalNodeBase(node)?node.internals.positionAbsolute:getNodePositionWithOrigin(node,nodeOrigin);return{x:x$2,y:y$2,x2:x$2+(node.measured?.width??node.width??node.initialWidth??0),y2:y$2+(node.measured?.height??node.height??node.initialHeight??0)}},getBoundsOfRects=(rect1,rect2)=>boxToRect(getBoundsOfBoxes(rectToBox(rect1),rectToBox(rect2))),getOverlappingArea=(rectA,rectB)=>{let xOverlap=Math.max(0,Math.min(rectA.x+rectA.width,rectB.x+rectB.width)-Math.max(rectA.x,rectB.x)),yOverlap=Math.max(0,Math.min(rectA.y+rectA.height,rectB.y+rectB.height)-Math.max(rectA.y,rectB.y));return Math.ceil(xOverlap*yOverlap)},isRectObject=obj=>isNumeric(obj.width)&&isNumeric(obj.height)&&isNumeric(obj.x)&&isNumeric(obj.y),isNumeric=n$4=>!isNaN(n$4)&&isFinite(n$4),devWarn=(id$3,message)=>{},snapPosition=(position$1,snapGrid=[1,1])=>({x:snapGrid[0]*Math.round(position$1.x/snapGrid[0]),y:snapGrid[1]*Math.round(position$1.y/snapGrid[1])}),pointToRendererPoint=({x:x$2,y:y$2},[tx,ty,tScale],snapToGrid=!1,snapGrid=[1,1])=>{let position$1={x:(x$2-tx)/tScale,y:(y$2-ty)/tScale};return snapToGrid?snapPosition(position$1,snapGrid):position$1},rendererPointToPoint=({x:x$2,y:y$2},[tx,ty,tScale])=>({x:x$2*tScale+tx,y:y$2*tScale+ty});function parsePadding(padding,viewport){if(typeof padding==`number`)return Math.floor((viewport-viewport/(1+padding))*.5);if(typeof padding==`string`&&padding.endsWith(`px`)){let paddingValue=parseFloat(padding);if(!Number.isNaN(paddingValue))return Math.floor(paddingValue)}if(typeof padding==`string`&&padding.endsWith(`%`)){let paddingValue=parseFloat(padding);if(!Number.isNaN(paddingValue))return Math.floor(viewport*paddingValue*.01)}return console.error(`[React Flow] The padding value "${padding}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function parsePaddings(padding,width,height){if(typeof padding==`string`||typeof padding==`number`){let paddingY=parsePadding(padding,height),paddingX=parsePadding(padding,width);return{top:paddingY,right:paddingX,bottom:paddingY,left:paddingX,x:paddingX*2,y:paddingY*2}}if(typeof padding==`object`){let top=parsePadding(padding.top??padding.y??0,height),bottom=parsePadding(padding.bottom??padding.y??0,height),left=parsePadding(padding.left??padding.x??0,width),right=parsePadding(padding.right??padding.x??0,width);return{top,right,bottom,left,x:left+right,y:top+bottom}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function calculateAppliedPaddings(bounds,x$2,y$2,zoom,width,height){let{x:left,y:top}=rendererPointToPoint(bounds,[x$2,y$2,zoom]),{x:boundRight,y:boundBottom}=rendererPointToPoint({x:bounds.x+bounds.width,y:bounds.y+bounds.height},[x$2,y$2,zoom]),right=width-boundRight,bottom=height-boundBottom;return{left:Math.floor(left),top:Math.floor(top),right:Math.floor(right),bottom:Math.floor(bottom)}}var getViewportForBounds=(bounds,width,height,minZoom,maxZoom,padding)=>{let p$3=parsePaddings(padding,width,height),xZoom=(width-p$3.x)/bounds.width,yZoom=(height-p$3.y)/bounds.height,clampedZoom=clamp$1(Math.min(xZoom,yZoom),minZoom,maxZoom),boundsCenterX=bounds.x+bounds.width/2,boundsCenterY=bounds.y+bounds.height/2,x$2=width/2-boundsCenterX*clampedZoom,y$2=height/2-boundsCenterY*clampedZoom,newPadding=calculateAppliedPaddings(bounds,x$2,y$2,clampedZoom,width,height),offset$1={left:Math.min(newPadding.left-p$3.left,0),top:Math.min(newPadding.top-p$3.top,0),right:Math.min(newPadding.right-p$3.right,0),bottom:Math.min(newPadding.bottom-p$3.bottom,0)};return{x:x$2-offset$1.left+offset$1.right,y:y$2-offset$1.top+offset$1.bottom,zoom:clampedZoom}},isMacOs=()=>typeof navigator<`u`&&navigator?.userAgent?.indexOf(`Mac`)>=0;function isCoordinateExtent(extent){return extent!=null&&extent!==`parent`}function getNodeDimensions(node){return{width:node.measured?.width??node.width??node.initialWidth??0,height:node.measured?.height??node.height??node.initialHeight??0}}function nodeHasDimensions(node){return(node.measured?.width??node.width??node.initialWidth)!==void 0&&(node.measured?.height??node.height??node.initialHeight)!==void 0}function evaluateAbsolutePosition(position$1,dimensions={width:0,height:0},parentId,nodeLookup,nodeOrigin){let positionAbsolute={...position$1},parent=nodeLookup.get(parentId);if(parent){let origin$2=parent.origin||nodeOrigin;positionAbsolute.x+=parent.internals.positionAbsolute.x-(dimensions.width??0)*origin$2[0],positionAbsolute.y+=parent.internals.positionAbsolute.y-(dimensions.height??0)*origin$2[1]}return positionAbsolute}function areSetsEqual(a$4,b$3){if(a$4.size!==b$3.size)return!1;for(let item of a$4)if(!b$3.has(item))return!1;return!0}function withResolvers(){let resolve,reject;return{promise:new Promise((res,rej)=>{resolve=res,reject=rej}),resolve,reject}}function mergeAriaLabelConfig(partial){return{...defaultAriaLabelConfig,...partial||{}}}function getPointerPosition(event,{snapGrid=[0,0],snapToGrid=!1,transform:transform$1,containerBounds}){let{x:x$2,y:y$2}=getEventPosition(event),pointerPos=pointToRendererPoint({x:x$2-(containerBounds?.left??0),y:y$2-(containerBounds?.top??0)},transform$1),{x:xSnapped,y:ySnapped}=snapToGrid?snapPosition(pointerPos,snapGrid):pointerPos;return{xSnapped,ySnapped,...pointerPos}}var getDimensions=node=>({width:node.offsetWidth,height:node.offsetHeight}),getHostForElement=element=>element?.getRootNode?.()||window?.document,inputTags=[`INPUT`,`SELECT`,`TEXTAREA`];function isInputDOMNode(event){let target=event.composedPath?.()?.[0]||event.target;return target?.nodeType===1?inputTags.includes(target.nodeName)||target.hasAttribute(`contenteditable`)||!!target.closest(`.nokey`):!1}var isMouseEvent$1=event=>`clientX`in event,getEventPosition=(event,bounds)=>{let isMouse=isMouseEvent$1(event),evtX=isMouse?event.clientX:event.touches?.[0].clientX,evtY=isMouse?event.clientY:event.touches?.[0].clientY;return{x:evtX-(bounds?.left??0),y:evtY-(bounds?.top??0)}},getHandleBounds=(type,nodeElement,nodeBounds,zoom,nodeId)=>{let handles=nodeElement.querySelectorAll(`.${type}`);return!handles||!handles.length?null:Array.from(handles).map(handle=>{let handleBounds=handle.getBoundingClientRect();return{id:handle.getAttribute(`data-handleid`),type,nodeId,position:handle.getAttribute(`data-handlepos`),x:(handleBounds.left-nodeBounds.left)/zoom,y:(handleBounds.top-nodeBounds.top)/zoom,...getDimensions(handle)}})};function getBezierEdgeCenter({sourceX,sourceY,targetX,targetY,sourceControlX,sourceControlY,targetControlX,targetControlY}){let centerX=sourceX*.125+sourceControlX*.375+targetControlX*.375+targetX*.125,centerY=sourceY*.125+sourceControlY*.375+targetControlY*.375+targetY*.125;return[centerX,centerY,Math.abs(centerX-sourceX),Math.abs(centerY-sourceY)]}function calculateControlOffset(distance$4,curvature){return distance$4>=0?.5*distance$4:curvature*25*Math.sqrt(-distance$4)}function getControlWithCurvature({pos,x1,y1,x2,y2,c:c$3}){switch(pos){case Position.Left:return[x1-calculateControlOffset(x1-x2,c$3),y1];case Position.Right:return[x1+calculateControlOffset(x2-x1,c$3),y1];case Position.Top:return[x1,y1-calculateControlOffset(y1-y2,c$3)];case Position.Bottom:return[x1,y1+calculateControlOffset(y2-y1,c$3)]}}function getBezierPath({sourceX,sourceY,sourcePosition=Position.Bottom,targetX,targetY,targetPosition=Position.Top,curvature=.25}){let[sourceControlX,sourceControlY]=getControlWithCurvature({pos:sourcePosition,x1:sourceX,y1:sourceY,x2:targetX,y2:targetY,c:curvature}),[targetControlX,targetControlY]=getControlWithCurvature({pos:targetPosition,x1:targetX,y1:targetY,x2:sourceX,y2:sourceY,c:curvature}),[labelX,labelY,offsetX,offsetY]=getBezierEdgeCenter({sourceX,sourceY,targetX,targetY,sourceControlX,sourceControlY,targetControlX,targetControlY});return[`M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,labelX,labelY,offsetX,offsetY]}function getEdgeCenter({sourceX,sourceY,targetX,targetY}){let xOffset=Math.abs(targetX-sourceX)/2,centerX=targetX<sourceX?targetX+xOffset:targetX-xOffset,yOffset=Math.abs(targetY-sourceY)/2;return[centerX,targetY<sourceY?targetY+yOffset:targetY-yOffset,xOffset,yOffset]}function getElevatedEdgeZIndex({sourceNode,targetNode,selected:selected$1=!1,zIndex=0,elevateOnSelect=!1,zIndexMode=`basic`}){return zIndexMode===`manual`?zIndex:(elevateOnSelect&&selected$1?zIndex+1e3:zIndex)+Math.max(sourceNode.parentId||elevateOnSelect&&sourceNode.selected?sourceNode.internals.z:0,targetNode.parentId||elevateOnSelect&&targetNode.selected?targetNode.internals.z:0)}function isEdgeVisible({sourceNode,targetNode,width,height,transform:transform$1}){let edgeBox=getBoundsOfBoxes(nodeToBox(sourceNode),nodeToBox(targetNode));return edgeBox.x===edgeBox.x2&&(edgeBox.x2+=1),edgeBox.y===edgeBox.y2&&(edgeBox.y2+=1),getOverlappingArea({x:-transform$1[0]/transform$1[2],y:-transform$1[1]/transform$1[2],width:width/transform$1[2],height:height/transform$1[2]},boxToRect(edgeBox))>0}var getEdgeId=({source,sourceHandle,target,targetHandle})=>`xy-edge__${source}${sourceHandle||``}-${target}${targetHandle||``}`,connectionExists=(edge,edges)=>edges.some(el=>el.source===edge.source&&el.target===edge.target&&(el.sourceHandle===edge.sourceHandle||!el.sourceHandle&&!edge.sourceHandle)&&(el.targetHandle===edge.targetHandle||!el.targetHandle&&!edge.targetHandle)),addEdge=(edgeParams,edges,options$1={})=>{if(!edgeParams.source||!edgeParams.target)return errorMessages.error006(),edges;let edgeIdGenerator=options$1.getEdgeId||getEdgeId,edge;return edge=isEdgeBase(edgeParams)?{...edgeParams}:{...edgeParams,id:edgeIdGenerator(edgeParams)},connectionExists(edge,edges)?edges:(edge.sourceHandle===null&&delete edge.sourceHandle,edge.targetHandle===null&&delete edge.targetHandle,edges.concat(edge))};function getStraightPath({sourceX,sourceY,targetX,targetY}){let[labelX,labelY,offsetX,offsetY]=getEdgeCenter({sourceX,sourceY,targetX,targetY});return[`M ${sourceX},${sourceY}L ${targetX},${targetY}`,labelX,labelY,offsetX,offsetY]}var handleDirections={[Position.Left]:{x:-1,y:0},[Position.Right]:{x:1,y:0},[Position.Top]:{x:0,y:-1},[Position.Bottom]:{x:0,y:1}},getDirection=({source,sourcePosition=Position.Bottom,target})=>sourcePosition===Position.Left||sourcePosition===Position.Right?source.x<target.x?{x:1,y:0}:{x:-1,y:0}:source.y<target.y?{x:0,y:1}:{x:0,y:-1},distance$2=(a$4,b$3)=>Math.sqrt((b$3.x-a$4.x)**2+(b$3.y-a$4.y)**2);function getPoints({source,sourcePosition=Position.Bottom,target,targetPosition=Position.Top,center,offset:offset$1,stepPosition}){let sourceDir=handleDirections[sourcePosition],targetDir=handleDirections[targetPosition],sourceGapped={x:source.x+sourceDir.x*offset$1,y:source.y+sourceDir.y*offset$1},targetGapped={x:target.x+targetDir.x*offset$1,y:target.y+targetDir.y*offset$1},dir=getDirection({source:sourceGapped,sourcePosition,target:targetGapped}),dirAccessor=dir.x===0?`y`:`x`,currDir=dir[dirAccessor],points=[],centerX,centerY,sourceGapOffset={x:0,y:0},targetGapOffset={x:0,y:0},[,,defaultOffsetX,defaultOffsetY]=getEdgeCenter({sourceX:source.x,sourceY:source.y,targetX:target.x,targetY:target.y});if(sourceDir[dirAccessor]*targetDir[dirAccessor]===-1){dirAccessor===`x`?(centerX=center.x??sourceGapped.x+(targetGapped.x-sourceGapped.x)*stepPosition,centerY=center.y??(sourceGapped.y+targetGapped.y)/2):(centerX=center.x??(sourceGapped.x+targetGapped.x)/2,centerY=center.y??sourceGapped.y+(targetGapped.y-sourceGapped.y)*stepPosition);let verticalSplit=[{x:centerX,y:sourceGapped.y},{x:centerX,y:targetGapped.y}],horizontalSplit=[{x:sourceGapped.x,y:centerY},{x:targetGapped.x,y:centerY}];points=sourceDir[dirAccessor]===currDir?dirAccessor===`x`?verticalSplit:horizontalSplit:dirAccessor===`x`?horizontalSplit:verticalSplit}else{let sourceTarget=[{x:sourceGapped.x,y:targetGapped.y}],targetSource=[{x:targetGapped.x,y:sourceGapped.y}];if(points=dirAccessor===`x`?sourceDir.x===currDir?targetSource:sourceTarget:sourceDir.y===currDir?sourceTarget:targetSource,sourcePosition===targetPosition){let diff=Math.abs(source[dirAccessor]-target[dirAccessor]);if(diff<=offset$1){let gapOffset=Math.min(offset$1-1,offset$1-diff);sourceDir[dirAccessor]===currDir?sourceGapOffset[dirAccessor]=(sourceGapped[dirAccessor]>source[dirAccessor]?-1:1)*gapOffset:targetGapOffset[dirAccessor]=(targetGapped[dirAccessor]>target[dirAccessor]?-1:1)*gapOffset}}if(sourcePosition!==targetPosition){let dirAccessorOpposite=dirAccessor===`x`?`y`:`x`,isSameDir=sourceDir[dirAccessor]===targetDir[dirAccessorOpposite],sourceGtTargetOppo=sourceGapped[dirAccessorOpposite]>targetGapped[dirAccessorOpposite],sourceLtTargetOppo=sourceGapped[dirAccessorOpposite]<targetGapped[dirAccessorOpposite];(sourceDir[dirAccessor]===1&&(!isSameDir&&sourceGtTargetOppo||isSameDir&&sourceLtTargetOppo)||sourceDir[dirAccessor]!==1&&(!isSameDir&&sourceLtTargetOppo||isSameDir&&sourceGtTargetOppo))&&(points=dirAccessor===`x`?sourceTarget:targetSource)}let sourceGapPoint={x:sourceGapped.x+sourceGapOffset.x,y:sourceGapped.y+sourceGapOffset.y},targetGapPoint={x:targetGapped.x+targetGapOffset.x,y:targetGapped.y+targetGapOffset.y};Math.max(Math.abs(sourceGapPoint.x-points[0].x),Math.abs(targetGapPoint.x-points[0].x))>=Math.max(Math.abs(sourceGapPoint.y-points[0].y),Math.abs(targetGapPoint.y-points[0].y))?(centerX=(sourceGapPoint.x+targetGapPoint.x)/2,centerY=points[0].y):(centerX=points[0].x,centerY=(sourceGapPoint.y+targetGapPoint.y)/2)}return[[source,{x:sourceGapped.x+sourceGapOffset.x,y:sourceGapped.y+sourceGapOffset.y},...points,{x:targetGapped.x+targetGapOffset.x,y:targetGapped.y+targetGapOffset.y},target],centerX,centerY,defaultOffsetX,defaultOffsetY]}function getBend(a$4,b$3,c$3,size){let bendSize=Math.min(distance$2(a$4,b$3)/2,distance$2(b$3,c$3)/2,size),{x:x$2,y:y$2}=b$3;if(a$4.x===x$2&&x$2===c$3.x||a$4.y===y$2&&y$2===c$3.y)return`L${x$2} ${y$2}`;if(a$4.y===y$2){let xDir$1=a$4.x<c$3.x?-1:1,yDir=a$4.y<c$3.y?1:-1;return`L ${x$2+bendSize*xDir$1},${y$2}Q ${x$2},${y$2} ${x$2},${y$2+bendSize*yDir}`}let xDir=a$4.x<c$3.x?1:-1;return`L ${x$2},${y$2+bendSize*(a$4.y<c$3.y?-1:1)}Q ${x$2},${y$2} ${x$2+bendSize*xDir},${y$2}`}function getSmoothStepPath({sourceX,sourceY,sourcePosition=Position.Bottom,targetX,targetY,targetPosition=Position.Top,borderRadius=5,centerX,centerY,offset:offset$1=20,stepPosition=.5}){let[points,labelX,labelY,offsetX,offsetY]=getPoints({source:{x:sourceX,y:sourceY},sourcePosition,target:{x:targetX,y:targetY},targetPosition,center:{x:centerX,y:centerY},offset:offset$1,stepPosition});return[points.reduce((res,p$3,i$4)=>{let segment=``;return segment=i$4>0&&i$4<points.length-1?getBend(points[i$4-1],p$3,points[i$4+1],borderRadius):`${i$4===0?`M`:`L`}${p$3.x} ${p$3.y}`,res+=segment,res},``),labelX,labelY,offsetX,offsetY]}function isNodeInitialized(node){return node&&!!(node.internals.handleBounds||node.handles?.length)&&!!(node.measured.width||node.width||node.initialWidth)}function getEdgePosition(params){let{sourceNode,targetNode}=params;if(!isNodeInitialized(sourceNode)||!isNodeInitialized(targetNode))return null;let sourceHandleBounds=sourceNode.internals.handleBounds||toHandleBounds(sourceNode.handles),targetHandleBounds=targetNode.internals.handleBounds||toHandleBounds(targetNode.handles),sourceHandle=getHandle$1(sourceHandleBounds?.source??[],params.sourceHandle),targetHandle=getHandle$1(params.connectionMode===ConnectionMode.Strict?targetHandleBounds?.target??[]:(targetHandleBounds?.target??[]).concat(targetHandleBounds?.source??[]),params.targetHandle);if(!sourceHandle||!targetHandle)return params.onError?.(`008`,errorMessages.error008(sourceHandle?`target`:`source`,{id:params.id,sourceHandle:params.sourceHandle,targetHandle:params.targetHandle})),null;let sourcePosition=sourceHandle?.position||Position.Bottom,targetPosition=targetHandle?.position||Position.Top,source=getHandlePosition(sourceNode,sourceHandle,sourcePosition),target=getHandlePosition(targetNode,targetHandle,targetPosition);return{sourceX:source.x,sourceY:source.y,targetX:target.x,targetY:target.y,sourcePosition,targetPosition}}function toHandleBounds(handles){if(!handles)return null;let source=[],target=[];for(let handle of handles)handle.width=handle.width??1,handle.height=handle.height??1,handle.type===`source`?source.push(handle):handle.type===`target`&&target.push(handle);return{source,target}}function getHandlePosition(node,handle,fallbackPosition=Position.Left,center=!1){let x$2=(handle?.x??0)+node.internals.positionAbsolute.x,y$2=(handle?.y??0)+node.internals.positionAbsolute.y,{width,height}=handle??getNodeDimensions(node);if(center)return{x:x$2+width/2,y:y$2+height/2};switch(handle?.position??fallbackPosition){case Position.Top:return{x:x$2+width/2,y:y$2};case Position.Right:return{x:x$2+width,y:y$2+height/2};case Position.Bottom:return{x:x$2+width/2,y:y$2+height};case Position.Left:return{x:x$2,y:y$2+height/2}}}function getHandle$1(bounds,handleId){return bounds&&(handleId?bounds.find(d$3=>d$3.id===handleId):bounds[0])||null}function getMarkerId(marker,id$3){return marker?typeof marker==`string`?marker:`${id$3?`${id$3}__`:``}${Object.keys(marker).sort().map(key$1=>`${key$1}=${marker[key$1]}`).join(`&`)}`:``}function createMarkerIds(edges,{id:id$3,defaultColor,defaultMarkerStart,defaultMarkerEnd}){let ids$1=new Set;return edges.reduce((markers,edge)=>([edge.markerStart||defaultMarkerStart,edge.markerEnd||defaultMarkerEnd].forEach(marker=>{if(marker&&typeof marker==`object`){let markerId=getMarkerId(marker,id$3);ids$1.has(markerId)||(markers.push({id:markerId,color:marker.color||defaultColor,...marker}),ids$1.add(markerId))}}),markers),[]).sort((a$4,b$3)=>a$4.id.localeCompare(b$3.id))}var SELECTED_NODE_Z=1e3,ROOT_PARENT_Z_INCREMENT=10,defaultOptions={nodeOrigin:[0,0],nodeExtent:infiniteExtent,elevateNodesOnSelect:!0,zIndexMode:`basic`,defaults:{}},adoptUserNodesDefaultOptions={...defaultOptions,checkEquality:!0};function mergeObjects(base,incoming){let result={...base};for(let key$1 in incoming)incoming[key$1]!==void 0&&(result[key$1]=incoming[key$1]);return result}function updateAbsolutePositions(nodeLookup,parentLookup,options$1){let _options=mergeObjects(defaultOptions,options$1);for(let node of nodeLookup.values())if(node.parentId)updateChildNode(node,nodeLookup,parentLookup,_options);else{let clampedPosition=clampPosition(getNodePositionWithOrigin(node,_options.nodeOrigin),isCoordinateExtent(node.extent)?node.extent:_options.nodeExtent,getNodeDimensions(node));node.internals.positionAbsolute=clampedPosition}}function parseHandles(userNode,internalNode){if(!userNode.handles)return userNode.measured?internalNode?.internals.handleBounds:void 0;let source=[],target=[];for(let handle of userNode.handles){let handleBounds={id:handle.id,width:handle.width??1,height:handle.height??1,nodeId:userNode.id,x:handle.x,y:handle.y,position:handle.position,type:handle.type};handle.type===`source`?source.push(handleBounds):handle.type===`target`&&target.push(handleBounds)}return{source,target}}function isManualZIndexMode(zIndexMode){return zIndexMode===`manual`}function adoptUserNodes(nodes,nodeLookup,parentLookup,options$1={}){let _options=mergeObjects(adoptUserNodesDefaultOptions,options$1),rootParentIndex={i:0},tmpLookup=new Map(nodeLookup),selectedNodeZ=_options?.elevateNodesOnSelect&&!isManualZIndexMode(_options.zIndexMode)?SELECTED_NODE_Z:0,nodesInitialized=nodes.length>0;nodeLookup.clear(),parentLookup.clear();for(let userNode of nodes){let internalNode=tmpLookup.get(userNode.id);if(_options.checkEquality&&userNode===internalNode?.internals.userNode)nodeLookup.set(userNode.id,internalNode);else{let clampedPosition=clampPosition(getNodePositionWithOrigin(userNode,_options.nodeOrigin),isCoordinateExtent(userNode.extent)?userNode.extent:_options.nodeExtent,getNodeDimensions(userNode));internalNode={..._options.defaults,...userNode,measured:{width:userNode.measured?.width,height:userNode.measured?.height},internals:{positionAbsolute:clampedPosition,handleBounds:parseHandles(userNode,internalNode),z:calculateZ(userNode,selectedNodeZ,_options.zIndexMode),userNode}},nodeLookup.set(userNode.id,internalNode)}(internalNode.measured===void 0||internalNode.measured.width===void 0||internalNode.measured.height===void 0)&&!internalNode.hidden&&(nodesInitialized=!1),userNode.parentId&&updateChildNode(internalNode,nodeLookup,parentLookup,options$1,rootParentIndex)}return nodesInitialized}function updateParentLookup(node,parentLookup){if(!node.parentId)return;let childNodes=parentLookup.get(node.parentId);childNodes?childNodes.set(node.id,node):parentLookup.set(node.parentId,new Map([[node.id,node]]))}function updateChildNode(node,nodeLookup,parentLookup,options$1,rootParentIndex){let{elevateNodesOnSelect,nodeOrigin,nodeExtent,zIndexMode}=mergeObjects(defaultOptions,options$1),parentId=node.parentId,parentNode=nodeLookup.get(parentId);if(!parentNode){console.warn(`Parent node ${parentId} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}updateParentLookup(node,parentLookup),rootParentIndex&&!parentNode.parentId&&parentNode.internals.rootParentIndex===void 0&&zIndexMode===`auto`&&(parentNode.internals.rootParentIndex=++rootParentIndex.i,parentNode.internals.z=parentNode.internals.z+rootParentIndex.i*ROOT_PARENT_Z_INCREMENT),rootParentIndex&&parentNode.internals.rootParentIndex!==void 0&&(rootParentIndex.i=parentNode.internals.rootParentIndex);let{x:x$2,y:y$2,z:z$2}=calculateChildXYZ(node,parentNode,nodeOrigin,nodeExtent,elevateNodesOnSelect&&!isManualZIndexMode(zIndexMode)?SELECTED_NODE_Z:0,zIndexMode),{positionAbsolute}=node.internals,positionChanged=x$2!==positionAbsolute.x||y$2!==positionAbsolute.y;(positionChanged||z$2!==node.internals.z)&&nodeLookup.set(node.id,{...node,internals:{...node.internals,positionAbsolute:positionChanged?{x:x$2,y:y$2}:positionAbsolute,z:z$2}})}function calculateZ(node,selectedNodeZ,zIndexMode){let zIndex=isNumeric(node.zIndex)?node.zIndex:0;return isManualZIndexMode(zIndexMode)?zIndex:zIndex+(node.selected?selectedNodeZ:0)}function calculateChildXYZ(childNode,parentNode,nodeOrigin,nodeExtent,selectedNodeZ,zIndexMode){let{x:parentX,y:parentY}=parentNode.internals.positionAbsolute,childDimensions=getNodeDimensions(childNode),positionWithOrigin=getNodePositionWithOrigin(childNode,nodeOrigin),clampedPosition=isCoordinateExtent(childNode.extent)?clampPosition(positionWithOrigin,childNode.extent,childDimensions):positionWithOrigin,absolutePosition=clampPosition({x:parentX+clampedPosition.x,y:parentY+clampedPosition.y},nodeExtent,childDimensions);childNode.extent===`parent`&&(absolutePosition=clampPositionToParent(absolutePosition,childDimensions,parentNode));let childZ=calculateZ(childNode,selectedNodeZ,zIndexMode),parentZ=parentNode.internals.z??0;return{x:absolutePosition.x,y:absolutePosition.y,z:parentZ>=childZ?parentZ+1:childZ}}function handleExpandParent(children$1,nodeLookup,parentLookup,nodeOrigin=[0,0]){let changes=[],parentExpansions=new Map;for(let child of children$1){let parent=nodeLookup.get(child.parentId);if(!parent)continue;let expandedRect=getBoundsOfRects(parentExpansions.get(child.parentId)?.expandedRect??nodeToRect(parent),child.rect);parentExpansions.set(child.parentId,{expandedRect,parent})}return parentExpansions.size>0&&parentExpansions.forEach(({expandedRect,parent},parentId)=>{let positionAbsolute=parent.internals.positionAbsolute,dimensions=getNodeDimensions(parent),origin$2=parent.origin??nodeOrigin,xChange=expandedRect.x<positionAbsolute.x?Math.round(Math.abs(positionAbsolute.x-expandedRect.x)):0,yChange=expandedRect.y<positionAbsolute.y?Math.round(Math.abs(positionAbsolute.y-expandedRect.y)):0,newWidth=Math.max(dimensions.width,Math.round(expandedRect.width)),newHeight=Math.max(dimensions.height,Math.round(expandedRect.height)),widthChange=(newWidth-dimensions.width)*origin$2[0],heightChange=(newHeight-dimensions.height)*origin$2[1];(xChange>0||yChange>0||widthChange||heightChange)&&(changes.push({id:parentId,type:`position`,position:{x:parent.position.x-xChange+widthChange,y:parent.position.y-yChange+heightChange}}),parentLookup.get(parentId)?.forEach(childNode=>{children$1.some(child=>child.id===childNode.id)||changes.push({id:childNode.id,type:`position`,position:{x:childNode.position.x+xChange,y:childNode.position.y+yChange}})})),(dimensions.width<expandedRect.width||dimensions.height<expandedRect.height||xChange||yChange)&&changes.push({id:parentId,type:`dimensions`,setAttributes:!0,dimensions:{width:newWidth+(xChange?origin$2[0]*xChange-widthChange:0),height:newHeight+(yChange?origin$2[1]*yChange-heightChange:0)}})}),changes}function updateNodeInternals(updates,nodeLookup,parentLookup,domNode,nodeOrigin,nodeExtent,zIndexMode){let viewportNode=domNode?.querySelector(`.xyflow__viewport`),updatedInternals=!1;if(!viewportNode)return{changes:[],updatedInternals};let changes=[],style$3=window.getComputedStyle(viewportNode),{m22:zoom}=new window.DOMMatrixReadOnly(style$3.transform),parentExpandChildren=[];for(let update$1 of updates.values()){let node=nodeLookup.get(update$1.id);if(!node)continue;if(node.hidden){nodeLookup.set(node.id,{...node,internals:{...node.internals,handleBounds:void 0}}),updatedInternals=!0;continue}let dimensions=getDimensions(update$1.nodeElement),dimensionChanged=node.measured.width!==dimensions.width||node.measured.height!==dimensions.height;if(dimensions.width&&dimensions.height&&(dimensionChanged||!node.internals.handleBounds||update$1.force)){let nodeBounds=update$1.nodeElement.getBoundingClientRect(),extent=isCoordinateExtent(node.extent)?node.extent:nodeExtent,{positionAbsolute}=node.internals;node.parentId&&node.extent===`parent`?positionAbsolute=clampPositionToParent(positionAbsolute,dimensions,nodeLookup.get(node.parentId)):extent&&(positionAbsolute=clampPosition(positionAbsolute,extent,dimensions));let newNode={...node,measured:dimensions,internals:{...node.internals,positionAbsolute,handleBounds:{source:getHandleBounds(`source`,update$1.nodeElement,nodeBounds,zoom,node.id),target:getHandleBounds(`target`,update$1.nodeElement,nodeBounds,zoom,node.id)}}};nodeLookup.set(node.id,newNode),node.parentId&&updateChildNode(newNode,nodeLookup,parentLookup,{nodeOrigin,zIndexMode}),updatedInternals=!0,dimensionChanged&&(changes.push({id:node.id,type:`dimensions`,dimensions}),node.expandParent&&node.parentId&&parentExpandChildren.push({id:node.id,parentId:node.parentId,rect:nodeToRect(newNode,nodeOrigin)}))}}if(parentExpandChildren.length>0){let parentExpandChanges=handleExpandParent(parentExpandChildren,nodeLookup,parentLookup,nodeOrigin);changes.push(...parentExpandChanges)}return{changes,updatedInternals}}async function panBy({delta,panZoom,transform:transform$1,translateExtent,width,height}){if(!panZoom||!delta.x&&!delta.y)return Promise.resolve(!1);let nextViewport=await panZoom.setViewportConstrained({x:transform$1[0]+delta.x,y:transform$1[1]+delta.y,zoom:transform$1[2]},[[0,0],[width,height]],translateExtent),transformChanged=!!nextViewport&&(nextViewport.x!==transform$1[0]||nextViewport.y!==transform$1[1]||nextViewport.k!==transform$1[2]);return Promise.resolve(transformChanged)}function addConnectionToLookup(type,connection,connectionKey,connectionLookup,nodeId,handleId){let key$1=nodeId,nodeMap=connectionLookup.get(key$1)||new Map;connectionLookup.set(key$1,nodeMap.set(connectionKey,connection)),key$1=`${nodeId}-${type}`;let typeMap=connectionLookup.get(key$1)||new Map;if(connectionLookup.set(key$1,typeMap.set(connectionKey,connection)),handleId){key$1=`${nodeId}-${type}-${handleId}`;let handleMap=connectionLookup.get(key$1)||new Map;connectionLookup.set(key$1,handleMap.set(connectionKey,connection))}}function updateConnectionLookup(connectionLookup,edgeLookup,edges){connectionLookup.clear(),edgeLookup.clear();for(let edge of edges){let{source:sourceNode,target:targetNode,sourceHandle=null,targetHandle=null}=edge,connection={edgeId:edge.id,source:sourceNode,target:targetNode,sourceHandle,targetHandle},sourceKey=`${sourceNode}-${sourceHandle}--${targetNode}-${targetHandle}`;addConnectionToLookup(`source`,connection,`${targetNode}-${targetHandle}--${sourceNode}-${sourceHandle}`,connectionLookup,sourceNode,sourceHandle),addConnectionToLookup(`target`,connection,sourceKey,connectionLookup,targetNode,targetHandle),edgeLookup.set(edge.id,edge)}}function isParentSelected(node,nodeLookup){if(!node.parentId)return!1;let parentNode=nodeLookup.get(node.parentId);return parentNode?parentNode.selected?!0:isParentSelected(parentNode,nodeLookup):!1}function hasSelector(target,selector,domNode){let current=target;do{if(current?.matches?.(selector))return!0;if(current===domNode)return!1;current=current?.parentElement}while(current);return!1}function getDragItems(nodeLookup,nodesDraggable,mousePos,nodeId){let dragItems=new Map;for(let[id$3,node]of nodeLookup)if((node.selected||node.id===nodeId)&&(!node.parentId||!isParentSelected(node,nodeLookup))&&(node.draggable||nodesDraggable&&node.draggable===void 0)){let internalNode=nodeLookup.get(id$3);internalNode&&dragItems.set(id$3,{id:id$3,position:internalNode.position||{x:0,y:0},distance:{x:mousePos.x-internalNode.internals.positionAbsolute.x,y:mousePos.y-internalNode.internals.positionAbsolute.y},extent:internalNode.extent,parentId:internalNode.parentId,origin:internalNode.origin,expandParent:internalNode.expandParent,internals:{positionAbsolute:internalNode.internals.positionAbsolute||{x:0,y:0}},measured:{width:internalNode.measured.width??0,height:internalNode.measured.height??0}})}return dragItems}function getEventHandlerParams({nodeId,dragItems,nodeLookup,dragging=!0}){let nodesFromDragItems=[];for(let[id$3,dragItem]of dragItems){let node$1=nodeLookup.get(id$3)?.internals.userNode;node$1&&nodesFromDragItems.push({...node$1,position:dragItem.position,dragging})}if(!nodeId)return[nodesFromDragItems[0],nodesFromDragItems];let node=nodeLookup.get(nodeId)?.internals.userNode;return[node?{...node,position:dragItems.get(nodeId)?.position||node.position,dragging}:nodesFromDragItems[0],nodesFromDragItems]}function calculateSnapOffset({dragItems,snapGrid,x:x$2,y:y$2}){let refDragItem=dragItems.values().next().value;if(!refDragItem)return null;let refPos={x:x$2-refDragItem.distance.x,y:y$2-refDragItem.distance.y},refPosSnapped=snapPosition(refPos,snapGrid);return{x:refPosSnapped.x-refPos.x,y:refPosSnapped.y-refPos.y}}function XYDrag({onNodeMouseDown,getStoreItems,onDragStart:onDragStart$1,onDrag,onDragStop}){let lastPos={x:null,y:null},autoPanId=0,dragItems=new Map,autoPanStarted=!1,mousePosition={x:0,y:0},containerBounds=null,dragStarted=!1,d3Selection=null,abortDrag=!1,nodePositionsChanged=!1,dragEvent=null;function update$1({noDragClassName,handleSelector,domNode,isSelectable,nodeId,nodeClickDistance=0}){d3Selection=select_default(domNode);function updateNodes({x:x$2,y:y$2}){let{nodeLookup,nodeExtent,snapGrid,snapToGrid,nodeOrigin,onNodeDrag,onSelectionDrag,onError,updateNodePositions}=getStoreItems();lastPos={x:x$2,y:y$2};let hasChange=!1,isMultiDrag=dragItems.size>1,nodesBox=isMultiDrag&&nodeExtent?rectToBox(getInternalNodesBounds(dragItems)):null,multiDragSnapOffset=isMultiDrag&&snapToGrid?calculateSnapOffset({dragItems,snapGrid,x:x$2,y:y$2}):null;for(let[id$3,dragItem]of dragItems){if(!nodeLookup.has(id$3))continue;let nextPosition={x:x$2-dragItem.distance.x,y:y$2-dragItem.distance.y};snapToGrid&&(nextPosition=multiDragSnapOffset?{x:Math.round(nextPosition.x+multiDragSnapOffset.x),y:Math.round(nextPosition.y+multiDragSnapOffset.y)}:snapPosition(nextPosition,snapGrid));let adjustedNodeExtent=null;if(isMultiDrag&&nodeExtent&&!dragItem.extent&&nodesBox){let{positionAbsolute:positionAbsolute$1}=dragItem.internals,x1=positionAbsolute$1.x-nodesBox.x+nodeExtent[0][0],x2=positionAbsolute$1.x+dragItem.measured.width-nodesBox.x2+nodeExtent[1][0],y1=positionAbsolute$1.y-nodesBox.y+nodeExtent[0][1],y2=positionAbsolute$1.y+dragItem.measured.height-nodesBox.y2+nodeExtent[1][1];adjustedNodeExtent=[[x1,y1],[x2,y2]]}let{position:position$1,positionAbsolute}=calculateNodePosition({nodeId:id$3,nextPosition,nodeLookup,nodeExtent:adjustedNodeExtent||nodeExtent,nodeOrigin,onError});hasChange=hasChange||dragItem.position.x!==position$1.x||dragItem.position.y!==position$1.y,dragItem.position=position$1,dragItem.internals.positionAbsolute=positionAbsolute}if(nodePositionsChanged||=hasChange,hasChange&&(updateNodePositions(dragItems,!0),dragEvent&&(onDrag||onNodeDrag||!nodeId&&onSelectionDrag))){let[currentNode,currentNodes]=getEventHandlerParams({nodeId,dragItems,nodeLookup});onDrag?.(dragEvent,dragItems,currentNode,currentNodes),onNodeDrag?.(dragEvent,currentNode,currentNodes),nodeId||onSelectionDrag?.(dragEvent,currentNodes)}}async function autoPan(){if(!containerBounds)return;let{transform:transform$1,panBy:panBy$1,autoPanSpeed,autoPanOnNodeDrag}=getStoreItems();if(!autoPanOnNodeDrag){autoPanStarted=!1,cancelAnimationFrame(autoPanId);return}let[xMovement,yMovement]=calcAutoPan(mousePosition,containerBounds,autoPanSpeed);(xMovement!==0||yMovement!==0)&&(lastPos.x=(lastPos.x??0)-xMovement/transform$1[2],lastPos.y=(lastPos.y??0)-yMovement/transform$1[2],await panBy$1({x:xMovement,y:yMovement})&&updateNodes(lastPos)),autoPanId=requestAnimationFrame(autoPan)}function startDrag(event){let{nodeLookup,multiSelectionActive,nodesDraggable,transform:transform$1,snapGrid,snapToGrid,selectNodesOnDrag,onNodeDragStart,onSelectionDragStart,unselectNodesAndEdges}=getStoreItems();dragStarted=!0,(!selectNodesOnDrag||!isSelectable)&&!multiSelectionActive&&nodeId&&(nodeLookup.get(nodeId)?.selected||unselectNodesAndEdges()),isSelectable&&selectNodesOnDrag&&nodeId&&onNodeMouseDown?.(nodeId);let pointerPos=getPointerPosition(event.sourceEvent,{transform:transform$1,snapGrid,snapToGrid,containerBounds});if(lastPos=pointerPos,dragItems=getDragItems(nodeLookup,nodesDraggable,pointerPos,nodeId),dragItems.size>0&&(onDragStart$1||onNodeDragStart||!nodeId&&onSelectionDragStart)){let[currentNode,currentNodes]=getEventHandlerParams({nodeId,dragItems,nodeLookup});onDragStart$1?.(event.sourceEvent,dragItems,currentNode,currentNodes),onNodeDragStart?.(event.sourceEvent,currentNode,currentNodes),nodeId||onSelectionDragStart?.(event.sourceEvent,currentNodes)}}let d3DragInstance=drag_default().clickDistance(nodeClickDistance).on(`start`,event=>{let{domNode:domNode$1,nodeDragThreshold,transform:transform$1,snapGrid,snapToGrid}=getStoreItems();containerBounds=domNode$1?.getBoundingClientRect()||null,abortDrag=!1,nodePositionsChanged=!1,dragEvent=event.sourceEvent,nodeDragThreshold===0&&startDrag(event),lastPos=getPointerPosition(event.sourceEvent,{transform:transform$1,snapGrid,snapToGrid,containerBounds}),mousePosition=getEventPosition(event.sourceEvent,containerBounds)}).on(`drag`,event=>{let{autoPanOnNodeDrag,transform:transform$1,snapGrid,snapToGrid,nodeDragThreshold,nodeLookup}=getStoreItems(),pointerPos=getPointerPosition(event.sourceEvent,{transform:transform$1,snapGrid,snapToGrid,containerBounds});if(dragEvent=event.sourceEvent,(event.sourceEvent.type===`touchmove`&&event.sourceEvent.touches.length>1||nodeId&&!nodeLookup.has(nodeId))&&(abortDrag=!0),!abortDrag){if(!autoPanStarted&&autoPanOnNodeDrag&&dragStarted&&(autoPanStarted=!0,autoPan()),!dragStarted){let currentMousePosition=getEventPosition(event.sourceEvent,containerBounds),x$2=currentMousePosition.x-mousePosition.x,y$2=currentMousePosition.y-mousePosition.y;Math.sqrt(x$2*x$2+y$2*y$2)>nodeDragThreshold&&startDrag(event)}(lastPos.x!==pointerPos.xSnapped||lastPos.y!==pointerPos.ySnapped)&&dragItems&&dragStarted&&(mousePosition=getEventPosition(event.sourceEvent,containerBounds),updateNodes(pointerPos))}}).on(`end`,event=>{if(!(!dragStarted||abortDrag)&&(autoPanStarted=!1,dragStarted=!1,cancelAnimationFrame(autoPanId),dragItems.size>0)){let{nodeLookup,updateNodePositions,onNodeDragStop,onSelectionDragStop}=getStoreItems();if(nodePositionsChanged&&=(updateNodePositions(dragItems,!1),!1),onDragStop||onNodeDragStop||!nodeId&&onSelectionDragStop){let[currentNode,currentNodes]=getEventHandlerParams({nodeId,dragItems,nodeLookup,dragging:!1});onDragStop?.(event.sourceEvent,dragItems,currentNode,currentNodes),onNodeDragStop?.(event.sourceEvent,currentNode,currentNodes),nodeId||onSelectionDragStop?.(event.sourceEvent,currentNodes)}}}).filter(event=>{let target=event.target;return!event.button&&(!noDragClassName||!hasSelector(target,`.${noDragClassName}`,domNode))&&(!handleSelector||hasSelector(target,handleSelector,domNode))});d3Selection.call(d3DragInstance)}function destroy(){d3Selection?.on(`.drag`,null)}return{update:update$1,destroy}}function getNodesWithinDistance(position$1,nodeLookup,distance$4){let nodes=[],rect={x:position$1.x-distance$4,y:position$1.y-distance$4,width:distance$4*2,height:distance$4*2};for(let node of nodeLookup.values())getOverlappingArea(rect,nodeToRect(node))>0&&nodes.push(node);return nodes}var ADDITIONAL_DISTANCE=250;function getClosestHandle(position$1,connectionRadius,nodeLookup,fromHandle){let closestHandles=[],minDistance=1/0,closeNodes=getNodesWithinDistance(position$1,nodeLookup,connectionRadius+ADDITIONAL_DISTANCE);for(let node of closeNodes){let allHandles=[...node.internals.handleBounds?.source??[],...node.internals.handleBounds?.target??[]];for(let handle of allHandles){if(fromHandle.nodeId===handle.nodeId&&fromHandle.type===handle.type&&fromHandle.id===handle.id)continue;let{x:x$2,y:y$2}=getHandlePosition(node,handle,handle.position,!0),distance$4=Math.sqrt((x$2-position$1.x)**2+(y$2-position$1.y)**2);distance$4>connectionRadius||(distance$4<minDistance?(closestHandles=[{...handle,x:x$2,y:y$2}],minDistance=distance$4):distance$4===minDistance&&closestHandles.push({...handle,x:x$2,y:y$2}))}}if(!closestHandles.length)return null;if(closestHandles.length>1){let oppositeHandleType=fromHandle.type===`source`?`target`:`source`;return closestHandles.find(handle=>handle.type===oppositeHandleType)??closestHandles[0]}return closestHandles[0]}function getHandle(nodeId,handleType,handleId,nodeLookup,connectionMode,withAbsolutePosition=!1){let node=nodeLookup.get(nodeId);if(!node)return null;let handles=connectionMode===`strict`?node.internals.handleBounds?.[handleType]:[...node.internals.handleBounds?.source??[],...node.internals.handleBounds?.target??[]],handle=(handleId?handles?.find(h$3=>h$3.id===handleId):handles?.[0])??null;return handle&&withAbsolutePosition?{...handle,...getHandlePosition(node,handle,handle.position,!0)}:handle}function getHandleType(edgeUpdaterType,handleDomNode){return edgeUpdaterType||(handleDomNode?.classList.contains(`target`)?`target`:handleDomNode?.classList.contains(`source`)?`source`:null)}function isConnectionValid(isInsideConnectionRadius,isHandleValid){let isValid=null;return isHandleValid?isValid=!0:isInsideConnectionRadius&&!isHandleValid&&(isValid=!1),isValid}var alwaysValid=()=>!0;function onPointerDown(event,{connectionMode,connectionRadius,handleId,nodeId,edgeUpdaterType,isTarget,domNode,nodeLookup,lib,autoPanOnConnect,flowId,panBy:panBy$1,cancelConnection,onConnectStart,onConnect,onConnectEnd,isValidConnection=alwaysValid,onReconnectEnd,updateConnection,getTransform,getFromHandle,autoPanSpeed,dragThreshold=1,handleDomNode}){let doc=getHostForElement(event.target),autoPanId=0,closestHandle,{x:x$2,y:y$2}=getEventPosition(event),handleType=getHandleType(edgeUpdaterType,handleDomNode),containerBounds=domNode?.getBoundingClientRect(),connectionStarted=!1;if(!containerBounds||!handleType)return;let fromHandleInternal=getHandle(nodeId,handleType,handleId,nodeLookup,connectionMode);if(!fromHandleInternal)return;let position$1=getEventPosition(event,containerBounds),autoPanStarted=!1,connection=null,isValid=!1,resultHandleDomNode=null;function autoPan(){if(!autoPanOnConnect||!containerBounds)return;let[x$3,y$3]=calcAutoPan(position$1,containerBounds,autoPanSpeed);panBy$1({x:x$3,y:y$3}),autoPanId=requestAnimationFrame(autoPan)}let fromHandle={...fromHandleInternal,nodeId,type:handleType,position:fromHandleInternal.position},fromInternalNode=nodeLookup.get(nodeId),previousConnection={inProgress:!0,isValid:null,from:getHandlePosition(fromInternalNode,fromHandle,Position.Left,!0),fromHandle,fromPosition:fromHandle.position,fromNode:fromInternalNode,to:position$1,toHandle:null,toPosition:oppositePosition[fromHandle.position],toNode:null,pointer:position$1};function startConnection(){connectionStarted=!0,updateConnection(previousConnection),onConnectStart?.(event,{nodeId,handleId,handleType})}dragThreshold===0&&startConnection();function onPointerMove(event$1){if(!connectionStarted){let{x:evtX,y:evtY}=getEventPosition(event$1),dx=evtX-x$2,dy=evtY-y$2;if(!(dx*dx+dy*dy>dragThreshold*dragThreshold))return;startConnection()}if(!getFromHandle()||!fromHandle){onPointerUp(event$1);return}let transform$1=getTransform();position$1=getEventPosition(event$1,containerBounds),closestHandle=getClosestHandle(pointToRendererPoint(position$1,transform$1,!1,[1,1]),connectionRadius,nodeLookup,fromHandle),autoPanStarted||=(autoPan(),!0);let result=isValidHandle(event$1,{handle:closestHandle,connectionMode,fromNodeId:nodeId,fromHandleId:handleId,fromType:isTarget?`target`:`source`,isValidConnection,doc,lib,flowId,nodeLookup});resultHandleDomNode=result.handleDomNode,connection=result.connection,isValid=isConnectionValid(!!closestHandle,result.isValid);let fromInternalNode$1=nodeLookup.get(nodeId),from=fromInternalNode$1?getHandlePosition(fromInternalNode$1,fromHandle,Position.Left,!0):previousConnection.from,newConnection={...previousConnection,from,isValid,to:result.toHandle&&isValid?rendererPointToPoint({x:result.toHandle.x,y:result.toHandle.y},transform$1):position$1,toHandle:result.toHandle,toPosition:isValid&&result.toHandle?result.toHandle.position:oppositePosition[fromHandle.position],toNode:result.toHandle?nodeLookup.get(result.toHandle.nodeId):null,pointer:position$1};updateConnection(newConnection),previousConnection=newConnection}function onPointerUp(event$1){if(!(`touches`in event$1&&event$1.touches.length>0)){if(connectionStarted){(closestHandle||resultHandleDomNode)&&connection&&isValid&&onConnect?.(connection);let{inProgress,...connectionState}=previousConnection,finalConnectionState={...connectionState,toPosition:previousConnection.toHandle?previousConnection.toPosition:null};onConnectEnd?.(event$1,finalConnectionState),edgeUpdaterType&&onReconnectEnd?.(event$1,finalConnectionState)}cancelConnection(),cancelAnimationFrame(autoPanId),autoPanStarted=!1,isValid=!1,connection=null,resultHandleDomNode=null,doc.removeEventListener(`mousemove`,onPointerMove),doc.removeEventListener(`mouseup`,onPointerUp),doc.removeEventListener(`touchmove`,onPointerMove),doc.removeEventListener(`touchend`,onPointerUp)}}doc.addEventListener(`mousemove`,onPointerMove),doc.addEventListener(`mouseup`,onPointerUp),doc.addEventListener(`touchmove`,onPointerMove),doc.addEventListener(`touchend`,onPointerUp)}function isValidHandle(event,{handle,connectionMode,fromNodeId,fromHandleId,fromType,doc,lib,flowId,isValidConnection=alwaysValid,nodeLookup}){let isTarget=fromType===`target`,handleDomNode=handle?doc.querySelector(`.${lib}-flow__handle[data-id="${flowId}-${handle?.nodeId}-${handle?.id}-${handle?.type}"]`):null,{x:x$2,y:y$2}=getEventPosition(event),handleBelow=doc.elementFromPoint(x$2,y$2),handleToCheck=handleBelow?.classList.contains(`${lib}-flow__handle`)?handleBelow:handleDomNode,result={handleDomNode:handleToCheck,isValid:!1,connection:null,toHandle:null};if(handleToCheck){let handleType=getHandleType(void 0,handleToCheck),handleNodeId=handleToCheck.getAttribute(`data-nodeid`),handleId=handleToCheck.getAttribute(`data-handleid`),connectable=handleToCheck.classList.contains(`connectable`),connectableEnd=handleToCheck.classList.contains(`connectableend`);if(!handleNodeId||!handleType)return result;let connection={source:isTarget?handleNodeId:fromNodeId,sourceHandle:isTarget?handleId:fromHandleId,target:isTarget?fromNodeId:handleNodeId,targetHandle:isTarget?fromHandleId:handleId};result.connection=connection,result.isValid=connectable&&connectableEnd&&(connectionMode===ConnectionMode.Strict?isTarget&&handleType===`source`||!isTarget&&handleType===`target`:handleNodeId!==fromNodeId||handleId!==fromHandleId)&&isValidConnection(connection),result.toHandle=getHandle(handleNodeId,handleType,handleId,nodeLookup,connectionMode,!0)}return result}var XYHandle={onPointerDown,isValid:isValidHandle};function XYMinimap({domNode,panZoom,getTransform,getViewScale}){let selection$1=select_default(domNode);function update$1({translateExtent,width,height,zoomStep=1,pannable=!0,zoomable=!0,inversePan=!1}){let zoomHandler=event=>{if(event.sourceEvent.type!==`wheel`||!panZoom)return;let transform$1=getTransform(),factor=event.sourceEvent.ctrlKey&&isMacOs()?10:1,pinchDelta=-event.sourceEvent.deltaY*(event.sourceEvent.deltaMode===1?.05:event.sourceEvent.deltaMode?1:.002)*zoomStep,nextZoom=transform$1[2]*2**(pinchDelta*factor);panZoom.scaleTo(nextZoom)},panStart=[0,0],zoomAndPanHandler=zoom_default().on(`start`,event=>{(event.sourceEvent.type===`mousedown`||event.sourceEvent.type===`touchstart`)&&(panStart=[event.sourceEvent.clientX??event.sourceEvent.touches[0].clientX,event.sourceEvent.clientY??event.sourceEvent.touches[0].clientY])}).on(`zoom`,pannable?event=>{let transform$1=getTransform();if(event.sourceEvent.type!==`mousemove`&&event.sourceEvent.type!==`touchmove`||!panZoom)return;let panCurrent=[event.sourceEvent.clientX??event.sourceEvent.touches[0].clientX,event.sourceEvent.clientY??event.sourceEvent.touches[0].clientY],panDelta=[panCurrent[0]-panStart[0],panCurrent[1]-panStart[1]];panStart=panCurrent;let moveScale=getViewScale()*Math.max(transform$1[2],Math.log(transform$1[2]))*(inversePan?-1:1),position$1={x:transform$1[0]-panDelta[0]*moveScale,y:transform$1[1]-panDelta[1]*moveScale},extent=[[0,0],[width,height]];panZoom.setViewportConstrained({x:position$1.x,y:position$1.y,zoom:transform$1[2]},extent,translateExtent)}:null).on(`zoom.wheel`,zoomable?zoomHandler:null);selection$1.call(zoomAndPanHandler,{})}function destroy(){selection$1.on(`zoom`,null)}return{update:update$1,destroy,pointer:pointer_default}}var transformToViewport=transform$1=>({x:transform$1.x,y:transform$1.y,zoom:transform$1.k}),viewportToTransform=({x:x$2,y:y$2,zoom})=>identity$1.translate(x$2,y$2).scale(zoom),isWrappedWithClass=(event,className)=>event.target.closest(`.${className}`),isRightClickPan=(panOnDrag,usedButton)=>usedButton===2&&Array.isArray(panOnDrag)&&panOnDrag.includes(2),defaultEase=t$4=>((t$4*=2)<=1?t$4*t$4*t$4:(t$4-=2)*t$4*t$4+2)/2,getD3Transition=(selection$1,duration=0,ease$1=defaultEase,onEnd=()=>{})=>{let hasDuration=typeof duration==`number`&&duration>0;return hasDuration||onEnd(),hasDuration?selection$1.transition().duration(duration).ease(ease$1).on(`end`,onEnd):selection$1},wheelDelta=event=>{let factor=event.ctrlKey&&isMacOs()?10:1;return-event.deltaY*(event.deltaMode===1?.05:event.deltaMode?1:.002)*factor};function createPanOnScrollHandler({zoomPanValues,noWheelClassName,d3Selection,d3Zoom,panOnScrollMode,panOnScrollSpeed,zoomOnPinch,onPanZoomStart,onPanZoom,onPanZoomEnd}){return event=>{if(isWrappedWithClass(event,noWheelClassName))return event.ctrlKey&&event.preventDefault(),!1;event.preventDefault(),event.stopImmediatePropagation();let currentZoom=d3Selection.property(`__zoom`).k||1;if(event.ctrlKey&&zoomOnPinch){let point=pointer_default(event),zoom=currentZoom*2**wheelDelta(event);d3Zoom.scaleTo(d3Selection,zoom,point,event);return}let deltaNormalize=event.deltaMode===1?20:1,deltaX=panOnScrollMode===PanOnScrollMode.Vertical?0:event.deltaX*deltaNormalize,deltaY=panOnScrollMode===PanOnScrollMode.Horizontal?0:event.deltaY*deltaNormalize;!isMacOs()&&event.shiftKey&&panOnScrollMode!==PanOnScrollMode.Vertical&&(deltaX=event.deltaY*deltaNormalize,deltaY=0),d3Zoom.translateBy(d3Selection,-(deltaX/currentZoom)*panOnScrollSpeed,-(deltaY/currentZoom)*panOnScrollSpeed,{internal:!0});let nextViewport=transformToViewport(d3Selection.property(`__zoom`));clearTimeout(zoomPanValues.panScrollTimeout),zoomPanValues.isPanScrolling?(onPanZoom?.(event,nextViewport),zoomPanValues.panScrollTimeout=setTimeout(()=>{onPanZoomEnd?.(event,nextViewport),zoomPanValues.isPanScrolling=!1},150)):(zoomPanValues.isPanScrolling=!0,onPanZoomStart?.(event,nextViewport))}}function createZoomOnScrollHandler({noWheelClassName,preventScrolling,d3ZoomHandler}){return function(event,d$3){let isWheel=event.type===`wheel`,preventZoom=!preventScrolling&&isWheel&&!event.ctrlKey,hasNoWheelClass=isWrappedWithClass(event,noWheelClassName);if(event.ctrlKey&&isWheel&&hasNoWheelClass&&event.preventDefault(),preventZoom||hasNoWheelClass)return null;event.preventDefault(),d3ZoomHandler.call(this,event,d$3)}}function createPanZoomStartHandler({zoomPanValues,onDraggingChange,onPanZoomStart}){return event=>{if(event.sourceEvent?.internal)return;let viewport=transformToViewport(event.transform);zoomPanValues.mouseButton=event.sourceEvent?.button||0,zoomPanValues.isZoomingOrPanning=!0,zoomPanValues.prevViewport=viewport,event.sourceEvent?.type===`mousedown`&&onDraggingChange(!0),onPanZoomStart&&onPanZoomStart?.(event.sourceEvent,viewport)}}function createPanZoomHandler({zoomPanValues,panOnDrag,onPaneContextMenu,onTransformChange,onPanZoom}){return event=>{zoomPanValues.usedRightMouseButton=!!(onPaneContextMenu&&isRightClickPan(panOnDrag,zoomPanValues.mouseButton??0)),event.sourceEvent?.sync||onTransformChange([event.transform.x,event.transform.y,event.transform.k]),onPanZoom&&!event.sourceEvent?.internal&&onPanZoom?.(event.sourceEvent,transformToViewport(event.transform))}}function createPanZoomEndHandler({zoomPanValues,panOnDrag,panOnScroll,onDraggingChange,onPanZoomEnd,onPaneContextMenu}){return event=>{if(!event.sourceEvent?.internal&&(zoomPanValues.isZoomingOrPanning=!1,onPaneContextMenu&&isRightClickPan(panOnDrag,zoomPanValues.mouseButton??0)&&!zoomPanValues.usedRightMouseButton&&event.sourceEvent&&onPaneContextMenu(event.sourceEvent),zoomPanValues.usedRightMouseButton=!1,onDraggingChange(!1),onPanZoomEnd)){let viewport=transformToViewport(event.transform);zoomPanValues.prevViewport=viewport,clearTimeout(zoomPanValues.timerId),zoomPanValues.timerId=setTimeout(()=>{onPanZoomEnd?.(event.sourceEvent,viewport)},panOnScroll?150:0)}}}function createFilter({zoomActivationKeyPressed,zoomOnScroll,zoomOnPinch,panOnDrag,panOnScroll,zoomOnDoubleClick,userSelectionActive,noWheelClassName,noPanClassName,lib,connectionInProgress}){return event=>{let zoomScroll=zoomActivationKeyPressed||zoomOnScroll,pinchZoom=zoomOnPinch&&event.ctrlKey,isWheelEvent=event.type===`wheel`;if(event.button===1&&event.type===`mousedown`&&(isWrappedWithClass(event,`${lib}-flow__node`)||isWrappedWithClass(event,`${lib}-flow__edge`)))return!0;if(!panOnDrag&&!zoomScroll&&!panOnScroll&&!zoomOnDoubleClick&&!zoomOnPinch||userSelectionActive||connectionInProgress&&!isWheelEvent||isWrappedWithClass(event,noWheelClassName)&&isWheelEvent||isWrappedWithClass(event,noPanClassName)&&(!isWheelEvent||panOnScroll&&isWheelEvent&&!zoomActivationKeyPressed)||!zoomOnPinch&&event.ctrlKey&&isWheelEvent)return!1;if(!zoomOnPinch&&event.type===`touchstart`&&event.touches?.length>1)return event.preventDefault(),!1;if(!zoomScroll&&!panOnScroll&&!pinchZoom&&isWheelEvent||!panOnDrag&&(event.type===`mousedown`||event.type===`touchstart`)||Array.isArray(panOnDrag)&&!panOnDrag.includes(event.button)&&event.type===`mousedown`)return!1;let buttonAllowed=Array.isArray(panOnDrag)&&panOnDrag.includes(event.button)||!event.button||event.button<=1;return(!event.ctrlKey||isWheelEvent)&&buttonAllowed}}function XYPanZoom({domNode,minZoom,maxZoom,translateExtent,viewport,onPanZoom,onPanZoomStart,onPanZoomEnd,onDraggingChange}){let zoomPanValues={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},bbox=domNode.getBoundingClientRect(),d3ZoomInstance=zoom_default().scaleExtent([minZoom,maxZoom]).translateExtent(translateExtent),d3Selection=select_default(domNode).call(d3ZoomInstance);setViewportConstrained({x:viewport.x,y:viewport.y,zoom:clamp$1(viewport.zoom,minZoom,maxZoom)},[[0,0],[bbox.width,bbox.height]],translateExtent);let d3ZoomHandler=d3Selection.on(`wheel.zoom`),d3DblClickZoomHandler=d3Selection.on(`dblclick.zoom`);d3ZoomInstance.wheelDelta(wheelDelta);function setTransform(transform$1,options$1){return d3Selection?new Promise(resolve=>{d3ZoomInstance?.interpolate(options$1?.interpolate===`linear`?value_default:zoom_default$1).transform(getD3Transition(d3Selection,options$1?.duration,options$1?.ease,()=>resolve(!0)),transform$1)}):Promise.resolve(!1)}function update$1({noWheelClassName,noPanClassName,onPaneContextMenu,userSelectionActive,panOnScroll,panOnDrag,panOnScrollMode,panOnScrollSpeed,preventScrolling,zoomOnPinch,zoomOnScroll,zoomOnDoubleClick,zoomActivationKeyPressed,lib,onTransformChange,connectionInProgress,paneClickDistance,selectionOnDrag}){userSelectionActive&&!zoomPanValues.isZoomingOrPanning&&destroy();let isPanOnScroll=panOnScroll&&!zoomActivationKeyPressed&&!userSelectionActive;d3ZoomInstance.clickDistance(selectionOnDrag?1/0:!isNumeric(paneClickDistance)||paneClickDistance<0?0:paneClickDistance);let wheelHandler=isPanOnScroll?createPanOnScrollHandler({zoomPanValues,noWheelClassName,d3Selection,d3Zoom:d3ZoomInstance,panOnScrollMode,panOnScrollSpeed,zoomOnPinch,onPanZoomStart,onPanZoom,onPanZoomEnd}):createZoomOnScrollHandler({noWheelClassName,preventScrolling,d3ZoomHandler});if(d3Selection.on(`wheel.zoom`,wheelHandler,{passive:!1}),!userSelectionActive){let startHandler=createPanZoomStartHandler({zoomPanValues,onDraggingChange,onPanZoomStart});d3ZoomInstance.on(`start`,startHandler);let panZoomHandler=createPanZoomHandler({zoomPanValues,panOnDrag,onPaneContextMenu:!!onPaneContextMenu,onPanZoom,onTransformChange});d3ZoomInstance.on(`zoom`,panZoomHandler);let panZoomEndHandler=createPanZoomEndHandler({zoomPanValues,panOnDrag,panOnScroll,onPaneContextMenu,onPanZoomEnd,onDraggingChange});d3ZoomInstance.on(`end`,panZoomEndHandler)}let filter$2=createFilter({zoomActivationKeyPressed,panOnDrag,zoomOnScroll,panOnScroll,zoomOnDoubleClick,zoomOnPinch,userSelectionActive,noPanClassName,noWheelClassName,lib,connectionInProgress});d3ZoomInstance.filter(filter$2),zoomOnDoubleClick?d3Selection.on(`dblclick.zoom`,d3DblClickZoomHandler):d3Selection.on(`dblclick.zoom`,null)}function destroy(){d3ZoomInstance.on(`zoom`,null)}async function setViewportConstrained(viewport$1,extent,translateExtent$1){let nextTransform=viewportToTransform(viewport$1),contrainedTransform=d3ZoomInstance?.constrain()(nextTransform,extent,translateExtent$1);return contrainedTransform&&await setTransform(contrainedTransform),new Promise(resolve=>resolve(contrainedTransform))}async function setViewport(viewport$1,options$1){let nextTransform=viewportToTransform(viewport$1);return await setTransform(nextTransform,options$1),new Promise(resolve=>resolve(nextTransform))}function syncViewport(viewport$1){if(d3Selection){let nextTransform=viewportToTransform(viewport$1),currentTransform=d3Selection.property(`__zoom`);(currentTransform.k!==viewport$1.zoom||currentTransform.x!==viewport$1.x||currentTransform.y!==viewport$1.y)&&d3ZoomInstance?.transform(d3Selection,nextTransform,null,{sync:!0})}}function getViewport$1(){let transform$1=d3Selection?transform(d3Selection.node()):{x:0,y:0,k:1};return{x:transform$1.x,y:transform$1.y,zoom:transform$1.k}}function scaleTo(zoom,options$1){return d3Selection?new Promise(resolve=>{d3ZoomInstance?.interpolate(options$1?.interpolate===`linear`?value_default:zoom_default$1).scaleTo(getD3Transition(d3Selection,options$1?.duration,options$1?.ease,()=>resolve(!0)),zoom)}):Promise.resolve(!1)}function scaleBy(factor,options$1){return d3Selection?new Promise(resolve=>{d3ZoomInstance?.interpolate(options$1?.interpolate===`linear`?value_default:zoom_default$1).scaleBy(getD3Transition(d3Selection,options$1?.duration,options$1?.ease,()=>resolve(!0)),factor)}):Promise.resolve(!1)}function setScaleExtent(scaleExtent){d3ZoomInstance?.scaleExtent(scaleExtent)}function setTranslateExtent(translateExtent$1){d3ZoomInstance?.translateExtent(translateExtent$1)}function setClickDistance(distance$4){let validDistance=!isNumeric(distance$4)||distance$4<0?0:distance$4;d3ZoomInstance?.clickDistance(validDistance)}return{update:update$1,destroy,setViewport,setViewportConstrained,getViewport:getViewport$1,scaleTo,scaleBy,setScaleExtent,setTranslateExtent,syncViewport,setClickDistance}}var ResizeControlVariant;(function(ResizeControlVariant$1){ResizeControlVariant$1.Line=`line`,ResizeControlVariant$1.Handle=`handle`})(ResizeControlVariant||={});function getResizeDirection({width,prevWidth,height,prevHeight,affectsX,affectsY}){let deltaWidth=width-prevWidth,deltaHeight=height-prevHeight,direction=[deltaWidth>0?1:deltaWidth<0?-1:0,deltaHeight>0?1:deltaHeight<0?-1:0];return deltaWidth&&affectsX&&(direction[0]*=-1),deltaHeight&&affectsY&&(direction[1]*=-1),direction}function getControlDirection(controlPosition){return{isHorizontal:controlPosition.includes(`right`)||controlPosition.includes(`left`),isVertical:controlPosition.includes(`bottom`)||controlPosition.includes(`top`),affectsX:controlPosition.includes(`left`),affectsY:controlPosition.includes(`top`)}}function getLowerExtentClamp(lowerExtent,lowerBound){return Math.max(0,lowerBound-lowerExtent)}function getUpperExtentClamp(upperExtent,upperBound){return Math.max(0,upperExtent-upperBound)}function getSizeClamp(size,minSize,maxSize){return Math.max(0,minSize-size,size-maxSize)}function xor(a$4,b$3){return a$4?!b$3:b$3}function getDimensionsAfterResize(startValues,controlDirection,pointerPosition,boundaries,keepAspectRatio,nodeOrigin,extent,childExtent){let{affectsX,affectsY}=controlDirection,{isHorizontal,isVertical}=controlDirection,isDiagonal=isHorizontal&&isVertical,{xSnapped,ySnapped}=pointerPosition,{minWidth,maxWidth,minHeight,maxHeight}=boundaries,{x:startX,y:startY,width:startWidth,height:startHeight,aspectRatio:aspectRatio$1}=startValues,distX=Math.floor(isHorizontal?xSnapped-startValues.pointerX:0),distY=Math.floor(isVertical?ySnapped-startValues.pointerY:0),newWidth=startWidth+(affectsX?-distX:distX),newHeight=startHeight+(affectsY?-distY:distY),originOffsetX=-nodeOrigin[0]*startWidth,originOffsetY=-nodeOrigin[1]*startHeight,clampX=getSizeClamp(newWidth,minWidth,maxWidth),clampY=getSizeClamp(newHeight,minHeight,maxHeight);if(extent){let xExtentClamp=0,yExtentClamp=0;affectsX&&distX<0?xExtentClamp=getLowerExtentClamp(startX+distX+originOffsetX,extent[0][0]):!affectsX&&distX>0&&(xExtentClamp=getUpperExtentClamp(startX+newWidth+originOffsetX,extent[1][0])),affectsY&&distY<0?yExtentClamp=getLowerExtentClamp(startY+distY+originOffsetY,extent[0][1]):!affectsY&&distY>0&&(yExtentClamp=getUpperExtentClamp(startY+newHeight+originOffsetY,extent[1][1])),clampX=Math.max(clampX,xExtentClamp),clampY=Math.max(clampY,yExtentClamp)}if(childExtent){let xExtentClamp=0,yExtentClamp=0;affectsX&&distX>0?xExtentClamp=getUpperExtentClamp(startX+distX,childExtent[0][0]):!affectsX&&distX<0&&(xExtentClamp=getLowerExtentClamp(startX+newWidth,childExtent[1][0])),affectsY&&distY>0?yExtentClamp=getUpperExtentClamp(startY+distY,childExtent[0][1]):!affectsY&&distY<0&&(yExtentClamp=getLowerExtentClamp(startY+newHeight,childExtent[1][1])),clampX=Math.max(clampX,xExtentClamp),clampY=Math.max(clampY,yExtentClamp)}if(keepAspectRatio){if(isHorizontal){let aspectHeightClamp=getSizeClamp(newWidth/aspectRatio$1,minHeight,maxHeight)*aspectRatio$1;if(clampX=Math.max(clampX,aspectHeightClamp),extent){let aspectExtentClamp=0;aspectExtentClamp=!affectsX&&!affectsY||affectsX&&!affectsY&&isDiagonal?getUpperExtentClamp(startY+originOffsetY+newWidth/aspectRatio$1,extent[1][1])*aspectRatio$1:getLowerExtentClamp(startY+originOffsetY+(affectsX?distX:-distX)/aspectRatio$1,extent[0][1])*aspectRatio$1,clampX=Math.max(clampX,aspectExtentClamp)}if(childExtent){let aspectExtentClamp=0;aspectExtentClamp=!affectsX&&!affectsY||affectsX&&!affectsY&&isDiagonal?getLowerExtentClamp(startY+newWidth/aspectRatio$1,childExtent[1][1])*aspectRatio$1:getUpperExtentClamp(startY+(affectsX?distX:-distX)/aspectRatio$1,childExtent[0][1])*aspectRatio$1,clampX=Math.max(clampX,aspectExtentClamp)}}if(isVertical){let aspectWidthClamp=getSizeClamp(newHeight*aspectRatio$1,minWidth,maxWidth)/aspectRatio$1;if(clampY=Math.max(clampY,aspectWidthClamp),extent){let aspectExtentClamp=0;aspectExtentClamp=!affectsX&&!affectsY||affectsY&&!affectsX&&isDiagonal?getUpperExtentClamp(startX+newHeight*aspectRatio$1+originOffsetX,extent[1][0])/aspectRatio$1:getLowerExtentClamp(startX+(affectsY?distY:-distY)*aspectRatio$1+originOffsetX,extent[0][0])/aspectRatio$1,clampY=Math.max(clampY,aspectExtentClamp)}if(childExtent){let aspectExtentClamp=0;aspectExtentClamp=!affectsX&&!affectsY||affectsY&&!affectsX&&isDiagonal?getLowerExtentClamp(startX+newHeight*aspectRatio$1,childExtent[1][0])/aspectRatio$1:getUpperExtentClamp(startX+(affectsY?distY:-distY)*aspectRatio$1,childExtent[0][0])/aspectRatio$1,clampY=Math.max(clampY,aspectExtentClamp)}}}distY+=distY<0?clampY:-clampY,distX+=distX<0?clampX:-clampX,keepAspectRatio&&(isDiagonal?newWidth>newHeight*aspectRatio$1?distY=(xor(affectsX,affectsY)?-distX:distX)/aspectRatio$1:distX=(xor(affectsX,affectsY)?-distY:distY)*aspectRatio$1:isHorizontal?(distY=distX/aspectRatio$1,affectsY=affectsX):(distX=distY*aspectRatio$1,affectsX=affectsY));let x$2=affectsX?startX+distX:startX,y$2=affectsY?startY+distY:startY;return{width:startWidth+(affectsX?-distX:distX),height:startHeight+(affectsY?-distY:distY),x:nodeOrigin[0]*distX*(affectsX?-1:1)+x$2,y:nodeOrigin[1]*distY*(affectsY?-1:1)+y$2}}var initPrevValues$1={width:0,height:0,x:0,y:0},initStartValues={...initPrevValues$1,pointerX:0,pointerY:0,aspectRatio:1};function nodeToParentExtent(node){return[[0,0],[node.measured.width,node.measured.height]]}function nodeToChildExtent(child,parent,nodeOrigin){let x$2=parent.position.x+child.position.x,y$2=parent.position.y+child.position.y,width=child.measured.width??0,height=child.measured.height??0,originOffsetX=nodeOrigin[0]*width,originOffsetY=nodeOrigin[1]*height;return[[x$2-originOffsetX,y$2-originOffsetY],[x$2+width-originOffsetX,y$2+height-originOffsetY]]}function XYResizer({domNode,nodeId,getStoreItems,onChange,onEnd}){let selection$1=select_default(domNode),params={controlDirection:getControlDirection(`bottom-right`),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function update$1({controlPosition,boundaries,keepAspectRatio,resizeDirection,onResizeStart,onResize,onResizeEnd,shouldResize}){let prevValues={...initPrevValues$1},startValues={...initStartValues};params={boundaries,resizeDirection,keepAspectRatio,controlDirection:getControlDirection(controlPosition)};let node,containerBounds=null,childNodes=[],parentNode,parentExtent,childExtent,resizeDetected=!1,dragHandler=drag_default().on(`start`,event=>{let{nodeLookup,transform:transform$1,snapGrid,snapToGrid,nodeOrigin,paneDomNode}=getStoreItems();if(node=nodeLookup.get(nodeId),!node)return;containerBounds=paneDomNode?.getBoundingClientRect()??null;let{xSnapped,ySnapped}=getPointerPosition(event.sourceEvent,{transform:transform$1,snapGrid,snapToGrid,containerBounds});prevValues={width:node.measured.width??0,height:node.measured.height??0,x:node.position.x??0,y:node.position.y??0},startValues={...prevValues,pointerX:xSnapped,pointerY:ySnapped,aspectRatio:prevValues.width/prevValues.height},parentNode=void 0,node.parentId&&(node.extent===`parent`||node.expandParent)&&(parentNode=nodeLookup.get(node.parentId),parentExtent=parentNode&&node.extent===`parent`?nodeToParentExtent(parentNode):void 0),childNodes=[],childExtent=void 0;for(let[childId,child]of nodeLookup)if(child.parentId===nodeId&&(childNodes.push({id:childId,position:{...child.position},extent:child.extent}),child.extent===`parent`||child.expandParent)){let extent=nodeToChildExtent(child,node,child.origin??nodeOrigin);childExtent=childExtent?[[Math.min(extent[0][0],childExtent[0][0]),Math.min(extent[0][1],childExtent[0][1])],[Math.max(extent[1][0],childExtent[1][0]),Math.max(extent[1][1],childExtent[1][1])]]:extent}onResizeStart?.(event,{...prevValues})}).on(`drag`,event=>{let{transform:transform$1,snapGrid,snapToGrid,nodeOrigin:storeNodeOrigin}=getStoreItems(),pointerPosition=getPointerPosition(event.sourceEvent,{transform:transform$1,snapGrid,snapToGrid,containerBounds}),childChanges=[];if(!node)return;let{x:prevX,y:prevY,width:prevWidth,height:prevHeight}=prevValues,change={},nodeOrigin=node.origin??storeNodeOrigin,{width,height,x:x$2,y:y$2}=getDimensionsAfterResize(startValues,params.controlDirection,pointerPosition,params.boundaries,params.keepAspectRatio,nodeOrigin,parentExtent,childExtent),isWidthChange=width!==prevWidth,isHeightChange=height!==prevHeight,isXPosChange=x$2!==prevX&&isWidthChange,isYPosChange=y$2!==prevY&&isHeightChange;if(!isXPosChange&&!isYPosChange&&!isWidthChange&&!isHeightChange)return;if((isXPosChange||isYPosChange||nodeOrigin[0]===1||nodeOrigin[1]===1)&&(change.x=isXPosChange?x$2:prevValues.x,change.y=isYPosChange?y$2:prevValues.y,prevValues.x=change.x,prevValues.y=change.y,childNodes.length>0)){let xChange=x$2-prevX,yChange=y$2-prevY;for(let childNode of childNodes)childNode.position={x:childNode.position.x-xChange+nodeOrigin[0]*(width-prevWidth),y:childNode.position.y-yChange+nodeOrigin[1]*(height-prevHeight)},childChanges.push(childNode)}if((isWidthChange||isHeightChange)&&(change.width=isWidthChange&&(!params.resizeDirection||params.resizeDirection===`horizontal`)?width:prevValues.width,change.height=isHeightChange&&(!params.resizeDirection||params.resizeDirection===`vertical`)?height:prevValues.height,prevValues.width=change.width,prevValues.height=change.height),parentNode&&node.expandParent){let xLimit=nodeOrigin[0]*(change.width??0);change.x&&change.x<xLimit&&(prevValues.x=xLimit,startValues.x-=change.x-xLimit);let yLimit=nodeOrigin[1]*(change.height??0);change.y&&change.y<yLimit&&(prevValues.y=yLimit,startValues.y-=change.y-yLimit)}let direction=getResizeDirection({width:prevValues.width,prevWidth,height:prevValues.height,prevHeight,affectsX:params.controlDirection.affectsX,affectsY:params.controlDirection.affectsY}),nextValues={...prevValues,direction};shouldResize?.(event,nextValues)!==!1&&(resizeDetected=!0,onResize?.(event,nextValues),onChange(change,childChanges))}).on(`end`,event=>{resizeDetected&&=(onResizeEnd?.(event,{...prevValues}),onEnd?.({...prevValues}),!1)});selection$1.call(dragHandler)}function destroy(){selection$1.on(`.drag`,null)}return{update:update$1,destroy}}var require_use_sync_external_store_shim_production=__commonJSMin((exports=>{var React$96=require_react();function is$3(x$2,y$2){return x$2===y$2&&(x$2!==0||1/x$2==1/y$2)||x$2!==x$2&&y$2!==y$2}var objectIs$2=typeof Object.is==`function`?Object.is:is$3,useState$71=React$96.useState,useEffect$56=React$96.useEffect,useLayoutEffect$3=React$96.useLayoutEffect,useDebugValue$3=React$96.useDebugValue;function useSyncExternalStore$2(subscribe,getSnapshot){var value=getSnapshot(),_useState=useState$71({inst:{value,getSnapshot}}),inst=_useState[0].inst,forceUpdate=_useState[1];return useLayoutEffect$3(function(){inst.value=value,inst.getSnapshot=getSnapshot,checkIfSnapshotChanged(inst)&&forceUpdate({inst})},[subscribe,value,getSnapshot]),useEffect$56(function(){return checkIfSnapshotChanged(inst)&&forceUpdate({inst}),subscribe(function(){checkIfSnapshotChanged(inst)&&forceUpdate({inst})})},[subscribe]),useDebugValue$3(value),value}function checkIfSnapshotChanged(inst){var latestGetSnapshot=inst.getSnapshot;inst=inst.value;try{var nextValue=latestGetSnapshot();return!objectIs$2(inst,nextValue)}catch{return!0}}function useSyncExternalStore$1$1(subscribe,getSnapshot){return getSnapshot()}var shim$1=typeof window>`u`||window.document===void 0||window.document.createElement===void 0?useSyncExternalStore$1$1:useSyncExternalStore$2;exports.useSyncExternalStore=React$96.useSyncExternalStore===void 0?shim$1:React$96.useSyncExternalStore})),require_shim=__commonJSMin(((exports,module)=>{module.exports=require_use_sync_external_store_shim_production()})),require_with_selector_production=__commonJSMin((exports=>{var React$95=require_react(),shim=require_shim();function is$2(x$2,y$2){return x$2===y$2&&(x$2!==0||1/x$2==1/y$2)||x$2!==x$2&&y$2!==y$2}var objectIs$1=typeof Object.is==`function`?Object.is:is$2,useSyncExternalStore$1=shim.useSyncExternalStore,useRef$20=React$95.useRef,useEffect$55=React$95.useEffect,useMemo$8=React$95.useMemo,useDebugValue$2=React$95.useDebugValue;exports.useSyncExternalStoreWithSelector=function(subscribe,getSnapshot,getServerSnapshot,selector,isEqual$3){var instRef=useRef$20(null);if(instRef.current===null){var inst={hasValue:!1,value:null};instRef.current=inst}else inst=instRef.current;instRef=useMemo$8(function(){function memoizedSelector(nextSnapshot){if(!hasMemo){if(hasMemo=!0,memoizedSnapshot=nextSnapshot,nextSnapshot=selector(nextSnapshot),isEqual$3!==void 0&&inst.hasValue){var currentSelection=inst.value;if(isEqual$3(currentSelection,nextSnapshot))return memoizedSelection=currentSelection}return memoizedSelection=nextSnapshot}if(currentSelection=memoizedSelection,objectIs$1(memoizedSnapshot,nextSnapshot))return currentSelection;var nextSelection=selector(nextSnapshot);return isEqual$3!==void 0&&isEqual$3(currentSelection,nextSelection)?(memoizedSnapshot=nextSnapshot,currentSelection):(memoizedSnapshot=nextSnapshot,memoizedSelection=nextSelection)}var hasMemo=!1,memoizedSnapshot,memoizedSelection,maybeGetServerSnapshot=getServerSnapshot===void 0?null:getServerSnapshot;return[function(){return memoizedSelector(getSnapshot())},maybeGetServerSnapshot===null?void 0:function(){return memoizedSelector(maybeGetServerSnapshot())}]},[getSnapshot,getServerSnapshot,selector,isEqual$3]);var value=useSyncExternalStore$1(subscribe,instRef[0],instRef[1]);return useEffect$55(function(){inst.hasValue=!0,inst.value=value},[value]),useDebugValue$2(value),value}})),require_with_selector$1=__commonJSMin(((exports,module)=>{module.exports=require_with_selector_production()})),import_with_selector$1=__toESM(require_with_selector$1(),1),createStoreImpl=createState$1=>{let state,listeners=new Set,setState=(partial,replace)=>{let nextState=typeof partial==`function`?partial(state):partial;if(!Object.is(nextState,state)){let previousState=state;state=replace??(typeof nextState!=`object`||!nextState)?nextState:Object.assign({},state,nextState),listeners.forEach(listener=>listener(state,previousState))}},getState=()=>state,api={setState,getState,getInitialState:()=>initialState$2,subscribe:listener=>(listeners.add(listener),()=>listeners.delete(listener)),destroy:()=>{listeners.clear()}},initialState$2=state=createState$1(setState,getState,api);return api},createStore$3=createState$1=>createState$1?createStoreImpl(createState$1):createStoreImpl,{useDebugValue:useDebugValue$1}=import_react.default,{useSyncExternalStoreWithSelector:useSyncExternalStoreWithSelector$1}=import_with_selector$1.default,identity=arg=>arg;function useStoreWithEqualityFn(api,selector=identity,equalityFn){let slice=useSyncExternalStoreWithSelector$1(api.subscribe,api.getState,api.getServerState||api.getInitialState,selector,equalityFn);return useDebugValue$1(slice),slice}var createWithEqualityFnImpl=(createState$1,defaultEqualityFn)=>{let api=createStore$3(createState$1),useBoundStoreWithEqualityFn=(selector,equalityFn=defaultEqualityFn)=>useStoreWithEqualityFn(api,selector,equalityFn);return Object.assign(useBoundStoreWithEqualityFn,api),useBoundStoreWithEqualityFn},createWithEqualityFn=(createState$1,defaultEqualityFn)=>createState$1?createWithEqualityFnImpl(createState$1,defaultEqualityFn):createWithEqualityFnImpl;function shallow$1(objA,objB){if(Object.is(objA,objB))return!0;if(typeof objA!=`object`||!objA||typeof objB!=`object`||!objB)return!1;if(objA instanceof Map&&objB instanceof Map){if(objA.size!==objB.size)return!1;for(let[key$1,value]of objA)if(!Object.is(value,objB.get(key$1)))return!1;return!0}if(objA instanceof Set&&objB instanceof Set){if(objA.size!==objB.size)return!1;for(let value of objA)if(!objB.has(value))return!1;return!0}let keysA=Object.keys(objA);if(keysA.length!==Object.keys(objB).length)return!1;for(let keyA of keysA)if(!Object.prototype.hasOwnProperty.call(objB,keyA)||!Object.is(objA[keyA],objB[keyA]))return!1;return!0}var import_react_dom$3=require_react_dom(),StoreContext$1=(0,import_react.createContext)(null),Provider$1=StoreContext$1.Provider,zustandErrorMessage=errorMessages.error001();function useStore(selector,equalityFn){let store=(0,import_react.useContext)(StoreContext$1);if(store===null)throw Error(zustandErrorMessage);return useStoreWithEqualityFn(store,selector,equalityFn)}function useStoreApi(){let store=(0,import_react.useContext)(StoreContext$1);if(store===null)throw Error(zustandErrorMessage);return(0,import_react.useMemo)(()=>({getState:store.getState,setState:store.setState,subscribe:store.subscribe}),[store])}var style$1={display:`none`},ariaLiveStyle={position:`absolute`,width:1,height:1,margin:-1,border:0,padding:0,overflow:`hidden`,clip:`rect(0px, 0px, 0px, 0px)`,clipPath:`inset(100%)`},ARIA_NODE_DESC_KEY=`react-flow__node-desc`,ARIA_EDGE_DESC_KEY=`react-flow__edge-desc`,ARIA_LIVE_MESSAGE=`react-flow__aria-live`,ariaLiveSelector=s$3=>s$3.ariaLiveMessage,ariaLabelConfigSelector=s$3=>s$3.ariaLabelConfig;function AriaLiveMessage({rfId}){let ariaLiveMessage=useStore(ariaLiveSelector);return(0,import_jsx_runtime.jsx)(`div`,{id:`${ARIA_LIVE_MESSAGE}-${rfId}`,"aria-live":`assertive`,"aria-atomic":`true`,style:ariaLiveStyle,children:ariaLiveMessage})}function A11yDescriptions({rfId,disableKeyboardA11y}){let ariaLabelConfig=useStore(ariaLabelConfigSelector);return(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`div`,{id:`${ARIA_NODE_DESC_KEY}-${rfId}`,style:style$1,children:disableKeyboardA11y?ariaLabelConfig[`node.a11yDescription.default`]:ariaLabelConfig[`node.a11yDescription.keyboardDisabled`]}),(0,import_jsx_runtime.jsx)(`div`,{id:`${ARIA_EDGE_DESC_KEY}-${rfId}`,style:style$1,children:ariaLabelConfig[`edge.a11yDescription.default`]}),!disableKeyboardA11y&&(0,import_jsx_runtime.jsx)(AriaLiveMessage,{rfId})]})}var Panel=(0,import_react.forwardRef)(({position:position$1=`top-left`,children:children$1,className,style:style$3,...rest},ref)=>(0,import_jsx_runtime.jsx)(`div`,{className:cc([`react-flow__panel`,className,...`${position$1}`.split(`-`)]),style:style$3,ref,...rest,children:children$1}));Panel.displayName=`Panel`;function Attribution({proOptions,position:position$1=`bottom-right`}){return proOptions?.hideAttribution?null:(0,import_jsx_runtime.jsx)(Panel,{position:position$1,className:`react-flow__attribution`,"data-message":`Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev`,children:(0,import_jsx_runtime.jsx)(`a`,{href:`https://reactflow.dev`,target:`_blank`,rel:`noopener noreferrer`,"aria-label":`React Flow attribution`,children:`React Flow`})})}var selector$m=s$3=>{let selectedNodes=[],selectedEdges=[];for(let[,node]of s$3.nodeLookup)node.selected&&selectedNodes.push(node.internals.userNode);for(let[,edge]of s$3.edgeLookup)edge.selected&&selectedEdges.push(edge);return{selectedNodes,selectedEdges}},selectId=obj=>obj.id;function areEqual(a$4,b$3){return shallow$1(a$4.selectedNodes.map(selectId),b$3.selectedNodes.map(selectId))&&shallow$1(a$4.selectedEdges.map(selectId),b$3.selectedEdges.map(selectId))}function SelectionListenerInner({onSelectionChange}){let store=useStoreApi(),{selectedNodes,selectedEdges}=useStore(selector$m,areEqual);return(0,import_react.useEffect)(()=>{let params={nodes:selectedNodes,edges:selectedEdges};onSelectionChange?.(params),store.getState().onSelectionChangeHandlers.forEach(fn=>fn(params))},[selectedNodes,selectedEdges,onSelectionChange]),null}var changeSelector=s$3=>!!s$3.onSelectionChangeHandlers;function SelectionListener({onSelectionChange}){let storeHasSelectionChangeHandlers=useStore(changeSelector);return onSelectionChange||storeHasSelectionChangeHandlers?(0,import_jsx_runtime.jsx)(SelectionListenerInner,{onSelectionChange}):null}var defaultNodeOrigin=[0,0],defaultViewport={x:0,y:0,zoom:1},fieldsToTrack=[...`nodes.edges.defaultNodes.defaultEdges.onConnect.onConnectStart.onConnectEnd.onClickConnectStart.onClickConnectEnd.nodesDraggable.autoPanOnNodeFocus.nodesConnectable.nodesFocusable.edgesFocusable.edgesReconnectable.elevateNodesOnSelect.elevateEdgesOnSelect.minZoom.maxZoom.nodeExtent.onNodesChange.onEdgesChange.elementsSelectable.connectionMode.snapGrid.snapToGrid.translateExtent.connectOnClick.defaultEdgeOptions.fitView.fitViewOptions.onNodesDelete.onEdgesDelete.onDelete.onNodeDrag.onNodeDragStart.onNodeDragStop.onSelectionDrag.onSelectionDragStart.onSelectionDragStop.onMoveStart.onMove.onMoveEnd.noPanClassName.nodeOrigin.autoPanOnConnect.autoPanOnNodeDrag.onError.connectionRadius.isValidConnection.selectNodesOnDrag.nodeDragThreshold.connectionDragThreshold.onBeforeDelete.debug.autoPanSpeed.ariaLabelConfig.zIndexMode`.split(`.`),`rfId`],selector$l=s$3=>({setNodes:s$3.setNodes,setEdges:s$3.setEdges,setMinZoom:s$3.setMinZoom,setMaxZoom:s$3.setMaxZoom,setTranslateExtent:s$3.setTranslateExtent,setNodeExtent:s$3.setNodeExtent,reset:s$3.reset,setDefaultNodesAndEdges:s$3.setDefaultNodesAndEdges}),initPrevValues={translateExtent:infiniteExtent,nodeOrigin:defaultNodeOrigin,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:`nopan`,rfId:`1`};function StoreUpdater(props){let{setNodes,setEdges,setMinZoom,setMaxZoom,setTranslateExtent,setNodeExtent,reset,setDefaultNodesAndEdges}=useStore(selector$l,shallow$1),store=useStoreApi();(0,import_react.useEffect)(()=>(setDefaultNodesAndEdges(props.defaultNodes,props.defaultEdges),()=>{previousFields.current=initPrevValues,reset()}),[]);let previousFields=(0,import_react.useRef)(initPrevValues);return(0,import_react.useEffect)(()=>{for(let fieldName of fieldsToTrack){let fieldValue=props[fieldName];fieldValue!==previousFields.current[fieldName]&&props[fieldName]!==void 0&&(fieldName===`nodes`?setNodes(fieldValue):fieldName===`edges`?setEdges(fieldValue):fieldName===`minZoom`?setMinZoom(fieldValue):fieldName===`maxZoom`?setMaxZoom(fieldValue):fieldName===`translateExtent`?setTranslateExtent(fieldValue):fieldName===`nodeExtent`?setNodeExtent(fieldValue):fieldName===`ariaLabelConfig`?store.setState({ariaLabelConfig:mergeAriaLabelConfig(fieldValue)}):fieldName===`fitView`?store.setState({fitViewQueued:fieldValue}):fieldName===`fitViewOptions`?store.setState({fitViewOptions:fieldValue}):store.setState({[fieldName]:fieldValue}))}previousFields.current=props},fieldsToTrack.map(fieldName=>props[fieldName])),null}function getMediaQuery(){return typeof window>`u`||!window.matchMedia?null:window.matchMedia(`(prefers-color-scheme: dark)`)}function useColorModeClass(colorMode){let[colorModeClass,setColorModeClass]=(0,import_react.useState)(colorMode===`system`?null:colorMode);return(0,import_react.useEffect)(()=>{if(colorMode!==`system`){setColorModeClass(colorMode);return}let mediaQuery=getMediaQuery(),updateColorModeClass=()=>setColorModeClass(mediaQuery?.matches?`dark`:`light`);return updateColorModeClass(),mediaQuery?.addEventListener(`change`,updateColorModeClass),()=>{mediaQuery?.removeEventListener(`change`,updateColorModeClass)}},[colorMode]),colorModeClass===null?getMediaQuery()?.matches?`dark`:`light`:colorModeClass}var defaultDoc=typeof document<`u`?document:null;function useKeyPress(keyCode=null,options$1={target:defaultDoc,actInsideInputWithModifier:!0}){let[keyPressed,setKeyPressed]=(0,import_react.useState)(!1),modifierPressed=(0,import_react.useRef)(!1),pressedKeys=(0,import_react.useRef)(new Set([])),[keyCodes,keysToWatch]=(0,import_react.useMemo)(()=>{if(keyCode!==null){let keys=(Array.isArray(keyCode)?keyCode:[keyCode]).filter(kc=>typeof kc==`string`).map(kc=>kc.replace(`+`,`
`).replace(`

`,`
+`).split(`
`));return[keys,keys.reduce((res,item)=>res.concat(...item),[])]}return[[],[]]},[keyCode]);return(0,import_react.useEffect)(()=>{let target=options$1?.target??defaultDoc,actInsideInputWithModifier=options$1?.actInsideInputWithModifier??!0;if(keyCode!==null){let downHandler=event=>{if(modifierPressed.current=event.ctrlKey||event.metaKey||event.shiftKey||event.altKey,(!modifierPressed.current||modifierPressed.current&&!actInsideInputWithModifier)&&isInputDOMNode(event))return!1;let keyOrCode=useKeyOrCode(event.code,keysToWatch);if(pressedKeys.current.add(event[keyOrCode]),isMatchingKey(keyCodes,pressedKeys.current,!1)){let target$1=event.composedPath?.()?.[0]||event.target,isInteractiveElement=target$1?.nodeName===`BUTTON`||target$1?.nodeName===`A`;options$1.preventDefault!==!1&&(modifierPressed.current||!isInteractiveElement)&&event.preventDefault(),setKeyPressed(!0)}},upHandler=event=>{let keyOrCode=useKeyOrCode(event.code,keysToWatch);isMatchingKey(keyCodes,pressedKeys.current,!0)?(setKeyPressed(!1),pressedKeys.current.clear()):pressedKeys.current.delete(event[keyOrCode]),event.key===`Meta`&&pressedKeys.current.clear(),modifierPressed.current=!1},resetHandler=()=>{pressedKeys.current.clear(),setKeyPressed(!1)};return target?.addEventListener(`keydown`,downHandler),target?.addEventListener(`keyup`,upHandler),window.addEventListener(`blur`,resetHandler),window.addEventListener(`contextmenu`,resetHandler),()=>{target?.removeEventListener(`keydown`,downHandler),target?.removeEventListener(`keyup`,upHandler),window.removeEventListener(`blur`,resetHandler),window.removeEventListener(`contextmenu`,resetHandler)}}},[keyCode,setKeyPressed]),keyPressed}function isMatchingKey(keyCodes,pressedKeys,isUp){return keyCodes.filter(keys=>isUp||keys.length===pressedKeys.size).some(keys=>keys.every(k$3=>pressedKeys.has(k$3)))}function useKeyOrCode(eventCode,keysToWatch){return keysToWatch.includes(eventCode)?`code`:`key`}var useViewportHelper=()=>{let store=useStoreApi();return(0,import_react.useMemo)(()=>({zoomIn:options$1=>{let{panZoom}=store.getState();return panZoom?panZoom.scaleBy(1.2,{duration:options$1?.duration}):Promise.resolve(!1)},zoomOut:options$1=>{let{panZoom}=store.getState();return panZoom?panZoom.scaleBy(1/1.2,{duration:options$1?.duration}):Promise.resolve(!1)},zoomTo:(zoomLevel,options$1)=>{let{panZoom}=store.getState();return panZoom?panZoom.scaleTo(zoomLevel,{duration:options$1?.duration}):Promise.resolve(!1)},getZoom:()=>store.getState().transform[2],setViewport:async(viewport,options$1)=>{let{transform:[tX,tY,tZoom],panZoom}=store.getState();return panZoom?(await panZoom.setViewport({x:viewport.x??tX,y:viewport.y??tY,zoom:viewport.zoom??tZoom},options$1),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[x$2,y$2,zoom]=store.getState().transform;return{x:x$2,y:y$2,zoom}},setCenter:async(x$2,y$2,options$1)=>store.getState().setCenter(x$2,y$2,options$1),fitBounds:async(bounds,options$1)=>{let{width,height,minZoom,maxZoom,panZoom}=store.getState(),viewport=getViewportForBounds(bounds,width,height,minZoom,maxZoom,options$1?.padding??.1);return panZoom?(await panZoom.setViewport(viewport,{duration:options$1?.duration,ease:options$1?.ease,interpolate:options$1?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(clientPosition,options$1={})=>{let{transform:transform$1,snapGrid,snapToGrid,domNode}=store.getState();if(!domNode)return clientPosition;let{x:domX,y:domY}=domNode.getBoundingClientRect(),correctedPosition={x:clientPosition.x-domX,y:clientPosition.y-domY},_snapGrid=options$1.snapGrid??snapGrid;return pointToRendererPoint(correctedPosition,transform$1,options$1.snapToGrid??snapToGrid,_snapGrid)},flowToScreenPosition:flowPosition=>{let{transform:transform$1,domNode}=store.getState();if(!domNode)return flowPosition;let{x:domX,y:domY}=domNode.getBoundingClientRect(),rendererPosition=rendererPointToPoint(flowPosition,transform$1);return{x:rendererPosition.x+domX,y:rendererPosition.y+domY}}}),[])};function applyChanges(changes,elements){let updatedElements=[],changesMap=new Map,addItemChanges=[];for(let change of changes)if(change.type===`add`){addItemChanges.push(change);continue}else if(change.type===`remove`||change.type===`replace`)changesMap.set(change.id,[change]);else{let elementChanges=changesMap.get(change.id);elementChanges?elementChanges.push(change):changesMap.set(change.id,[change])}for(let element of elements){let changes$1=changesMap.get(element.id);if(!changes$1){updatedElements.push(element);continue}if(changes$1[0].type===`remove`)continue;if(changes$1[0].type===`replace`){updatedElements.push({...changes$1[0].item});continue}let updatedElement={...element};for(let change of changes$1)applyChange(change,updatedElement);updatedElements.push(updatedElement)}return addItemChanges.length&&addItemChanges.forEach(change=>{change.index===void 0?updatedElements.push({...change.item}):updatedElements.splice(change.index,0,{...change.item})}),updatedElements}function applyChange(change,element){switch(change.type){case`select`:element.selected=change.selected;break;case`position`:change.position!==void 0&&(element.position=change.position),change.dragging!==void 0&&(element.dragging=change.dragging);break;case`dimensions`:change.dimensions!==void 0&&(element.measured={...change.dimensions},change.setAttributes&&((change.setAttributes===!0||change.setAttributes===`width`)&&(element.width=change.dimensions.width),(change.setAttributes===!0||change.setAttributes===`height`)&&(element.height=change.dimensions.height))),typeof change.resizing==`boolean`&&(element.resizing=change.resizing);break}}function applyNodeChanges(changes,nodes){return applyChanges(changes,nodes)}function applyEdgeChanges(changes,edges){return applyChanges(changes,edges)}function createSelectionChange(id$3,selected$1){return{id:id$3,type:`select`,selected:selected$1}}function getSelectionChanges(items,selectedIds=new Set,mutateItem=!1){let changes=[];for(let[id$3,item]of items){let willBeSelected=selectedIds.has(id$3);!(item.selected===void 0&&!willBeSelected)&&item.selected!==willBeSelected&&(mutateItem&&(item.selected=willBeSelected),changes.push(createSelectionChange(item.id,willBeSelected)))}return changes}function getElementsDiffChanges({items=[],lookup}){let changes=[],itemsLookup=new Map(items.map(item=>[item.id,item]));for(let[index$2,item]of items.entries()){let lookupItem=lookup.get(item.id),storeItem=lookupItem?.internals?.userNode??lookupItem;storeItem!==void 0&&storeItem!==item&&changes.push({id:item.id,item,type:`replace`}),storeItem===void 0&&changes.push({item,type:`add`,index:index$2})}for(let[id$3]of lookup)itemsLookup.get(id$3)===void 0&&changes.push({id:id$3,type:`remove`});return changes}function elementToRemoveChange(item){return{id:item.id,type:`remove`}}var isNode=element=>isNodeBase(element),isEdge=element=>isEdgeBase(element);function fixedForwardRef(render){return(0,import_react.forwardRef)(render)}var useIsomorphicLayoutEffect$2=typeof window<`u`?import_react.useLayoutEffect:import_react.useEffect;function useQueue(runQueue){let[serial,setSerial]=(0,import_react.useState)(BigInt(0)),[queue]=(0,import_react.useState)(()=>createQueue(()=>setSerial(n$4=>n$4+BigInt(1))));return useIsomorphicLayoutEffect$2(()=>{let queueItems=queue.get();queueItems.length&&(runQueue(queueItems),queue.reset())},[serial]),queue}function createQueue(cb){let queue=[];return{get:()=>queue,reset:()=>{queue=[]},push:item=>{queue.push(item),cb()}}}var BatchContext=(0,import_react.createContext)(null);function BatchProvider({children:children$1}){let store=useStoreApi(),nodeQueue=useQueue((0,import_react.useCallback)(queueItems=>{let{nodes=[],setNodes,hasDefaultNodes,onNodesChange,nodeLookup,fitViewQueued,onNodesChangeMiddlewareMap}=store.getState(),next=nodes;for(let payload of queueItems)next=typeof payload==`function`?payload(next):payload;let changes=getElementsDiffChanges({items:next,lookup:nodeLookup});for(let middleware of onNodesChangeMiddlewareMap.values())changes=middleware(changes);hasDefaultNodes&&setNodes(next),changes.length>0?onNodesChange?.(changes):fitViewQueued&&window.requestAnimationFrame(()=>{let{fitViewQueued:fitViewQueued$1,nodes:nodes$1,setNodes:setNodes$1}=store.getState();fitViewQueued$1&&setNodes$1(nodes$1)})},[])),edgeQueue=useQueue((0,import_react.useCallback)(queueItems=>{let{edges=[],setEdges,hasDefaultEdges,onEdgesChange,edgeLookup}=store.getState(),next=edges;for(let payload of queueItems)next=typeof payload==`function`?payload(next):payload;hasDefaultEdges?setEdges(next):onEdgesChange&&onEdgesChange(getElementsDiffChanges({items:next,lookup:edgeLookup}))},[])),value=(0,import_react.useMemo)(()=>({nodeQueue,edgeQueue}),[]);return(0,import_jsx_runtime.jsx)(BatchContext.Provider,{value,children:children$1})}function useBatchContext(){let batchContext=(0,import_react.useContext)(BatchContext);if(!batchContext)throw Error(`useBatchContext must be used within a BatchProvider`);return batchContext}var selector$k=s$3=>!!s$3.panZoom;function useReactFlow(){let viewportHelper=useViewportHelper(),store=useStoreApi(),batchContext=useBatchContext(),viewportInitialized=useStore(selector$k),generalHelper=(0,import_react.useMemo)(()=>{let getInternalNode=id$3=>store.getState().nodeLookup.get(id$3),setNodes=payload=>{batchContext.nodeQueue.push(payload)},setEdges=payload=>{batchContext.edgeQueue.push(payload)},getNodeRect=node=>{let{nodeLookup,nodeOrigin}=store.getState(),nodeToUse=isNode(node)?node:nodeLookup.get(node.id),position$1=nodeToUse.parentId?evaluateAbsolutePosition(nodeToUse.position,nodeToUse.measured,nodeToUse.parentId,nodeLookup,nodeOrigin):nodeToUse.position;return nodeToRect({...nodeToUse,position:position$1,width:nodeToUse.measured?.width??nodeToUse.width,height:nodeToUse.measured?.height??nodeToUse.height})},updateNode=(id$3,nodeUpdate,options$1={replace:!1})=>{setNodes(prevNodes=>prevNodes.map(node=>{if(node.id===id$3){let nextNode=typeof nodeUpdate==`function`?nodeUpdate(node):nodeUpdate;return options$1.replace&&isNode(nextNode)?nextNode:{...node,...nextNode}}return node}))},updateEdge=(id$3,edgeUpdate,options$1={replace:!1})=>{setEdges(prevEdges=>prevEdges.map(edge=>{if(edge.id===id$3){let nextEdge=typeof edgeUpdate==`function`?edgeUpdate(edge):edgeUpdate;return options$1.replace&&isEdge(nextEdge)?nextEdge:{...edge,...nextEdge}}return edge}))};return{getNodes:()=>store.getState().nodes.map(n$4=>({...n$4})),getNode:id$3=>getInternalNode(id$3)?.internals.userNode,getInternalNode,getEdges:()=>{let{edges=[]}=store.getState();return edges.map(e$4=>({...e$4}))},getEdge:id$3=>store.getState().edgeLookup.get(id$3),setNodes,setEdges,addNodes:payload=>{let newNodes=Array.isArray(payload)?payload:[payload];batchContext.nodeQueue.push(nodes=>[...nodes,...newNodes])},addEdges:payload=>{let newEdges=Array.isArray(payload)?payload:[payload];batchContext.edgeQueue.push(edges=>[...edges,...newEdges])},toObject:()=>{let{nodes=[],edges=[],transform:transform$1}=store.getState(),[x$2,y$2,zoom]=transform$1;return{nodes:nodes.map(n$4=>({...n$4})),edges:edges.map(e$4=>({...e$4})),viewport:{x:x$2,y:y$2,zoom}}},deleteElements:async({nodes:nodesToRemove=[],edges:edgesToRemove=[]})=>{let{nodes,edges,onNodesDelete,onEdgesDelete,triggerNodeChanges,triggerEdgeChanges,onDelete,onBeforeDelete}=store.getState(),{nodes:matchingNodes,edges:matchingEdges}=await getElementsToRemove({nodesToRemove,edgesToRemove,nodes,edges,onBeforeDelete}),hasMatchingEdges=matchingEdges.length>0,hasMatchingNodes=matchingNodes.length>0;if(hasMatchingEdges){let edgeChanges=matchingEdges.map(elementToRemoveChange);onEdgesDelete?.(matchingEdges),triggerEdgeChanges(edgeChanges)}if(hasMatchingNodes){let nodeChanges=matchingNodes.map(elementToRemoveChange);onNodesDelete?.(matchingNodes),triggerNodeChanges(nodeChanges)}return(hasMatchingNodes||hasMatchingEdges)&&onDelete?.({nodes:matchingNodes,edges:matchingEdges}),{deletedNodes:matchingNodes,deletedEdges:matchingEdges}},getIntersectingNodes:(nodeOrRect,partially=!0,nodes)=>{let isRect=isRectObject(nodeOrRect),nodeRect=isRect?nodeOrRect:getNodeRect(nodeOrRect),hasNodesOption=nodes!==void 0;return nodeRect?(nodes||store.getState().nodes).filter(n$4=>{let internalNode=store.getState().nodeLookup.get(n$4.id);if(internalNode&&!isRect&&(n$4.id===nodeOrRect.id||!internalNode.internals.positionAbsolute))return!1;let currNodeRect=nodeToRect(hasNodesOption?n$4:internalNode),overlappingArea=getOverlappingArea(currNodeRect,nodeRect);return partially&&overlappingArea>0||overlappingArea>=currNodeRect.width*currNodeRect.height||overlappingArea>=nodeRect.width*nodeRect.height}):[]},isNodeIntersecting:(nodeOrRect,area,partially=!0)=>{let nodeRect=isRectObject(nodeOrRect)?nodeOrRect:getNodeRect(nodeOrRect);if(!nodeRect)return!1;let overlappingArea=getOverlappingArea(nodeRect,area);return partially&&overlappingArea>0||overlappingArea>=area.width*area.height||overlappingArea>=nodeRect.width*nodeRect.height},updateNode,updateNodeData:(id$3,dataUpdate,options$1={replace:!1})=>{updateNode(id$3,node=>{let nextData=typeof dataUpdate==`function`?dataUpdate(node):dataUpdate;return options$1.replace?{...node,data:nextData}:{...node,data:{...node.data,...nextData}}},options$1)},updateEdge,updateEdgeData:(id$3,dataUpdate,options$1={replace:!1})=>{updateEdge(id$3,edge=>{let nextData=typeof dataUpdate==`function`?dataUpdate(edge):dataUpdate;return options$1.replace?{...edge,data:nextData}:{...edge,data:{...edge.data,...nextData}}},options$1)},getNodesBounds:nodes=>{let{nodeLookup,nodeOrigin}=store.getState();return getNodesBounds(nodes,{nodeLookup,nodeOrigin})},getHandleConnections:({type,id:id$3,nodeId})=>Array.from(store.getState().connectionLookup.get(`${nodeId}-${type}${id$3?`-${id$3}`:``}`)?.values()??[]),getNodeConnections:({type,handleId,nodeId})=>Array.from(store.getState().connectionLookup.get(`${nodeId}${type?handleId?`-${type}-${handleId}`:`-${type}`:``}`)?.values()??[]),fitView:async options$1=>{let fitViewResolver=store.getState().fitViewResolver??withResolvers();return store.setState({fitViewQueued:!0,fitViewOptions:options$1,fitViewResolver}),batchContext.nodeQueue.push(nodes=>[...nodes]),fitViewResolver.promise}}},[]);return(0,import_react.useMemo)(()=>({...generalHelper,...viewportHelper,viewportInitialized}),[viewportInitialized])}var selected=item=>item.selected,win$1=typeof window<`u`?window:void 0;function useGlobalKeyHandler({deleteKeyCode,multiSelectionKeyCode}){let store=useStoreApi(),{deleteElements}=useReactFlow(),deleteKeyPressed=useKeyPress(deleteKeyCode,{actInsideInputWithModifier:!1}),multiSelectionKeyPressed=useKeyPress(multiSelectionKeyCode,{target:win$1});(0,import_react.useEffect)(()=>{if(deleteKeyPressed){let{edges,nodes}=store.getState();deleteElements({nodes:nodes.filter(selected),edges:edges.filter(selected)}),store.setState({nodesSelectionActive:!1})}},[deleteKeyPressed]),(0,import_react.useEffect)(()=>{store.setState({multiSelectionActive:multiSelectionKeyPressed})},[multiSelectionKeyPressed])}function useResizeHandler(domNode){let store=useStoreApi();(0,import_react.useEffect)(()=>{let updateDimensions=()=>{if(!domNode.current||!(domNode.current.checkVisibility?.()??!0))return!1;let size=getDimensions(domNode.current);(size.height===0||size.width===0)&&store.getState().onError?.(`004`,errorMessages.error004()),store.setState({width:size.width||500,height:size.height||500})};if(domNode.current){updateDimensions(),window.addEventListener(`resize`,updateDimensions);let resizeObserver=new ResizeObserver(()=>updateDimensions());return resizeObserver.observe(domNode.current),()=>{window.removeEventListener(`resize`,updateDimensions),resizeObserver&&domNode.current&&resizeObserver.unobserve(domNode.current)}}},[])}var containerStyle={position:`absolute`,width:`100%`,height:`100%`,top:0,left:0},selector$j=s$3=>({userSelectionActive:s$3.userSelectionActive,lib:s$3.lib,connectionInProgress:s$3.connection.inProgress});function ZoomPane({onPaneContextMenu,zoomOnScroll=!0,zoomOnPinch=!0,panOnScroll=!1,panOnScrollSpeed=.5,panOnScrollMode=PanOnScrollMode.Free,zoomOnDoubleClick=!0,panOnDrag=!0,defaultViewport:defaultViewport$1,translateExtent,minZoom,maxZoom,zoomActivationKeyCode,preventScrolling=!0,children:children$1,noWheelClassName,noPanClassName,onViewportChange,isControlledViewport,paneClickDistance,selectionOnDrag}){let store=useStoreApi(),zoomPane=(0,import_react.useRef)(null),{userSelectionActive,lib,connectionInProgress}=useStore(selector$j,shallow$1),zoomActivationKeyPressed=useKeyPress(zoomActivationKeyCode),panZoom=(0,import_react.useRef)();useResizeHandler(zoomPane);let onTransformChange=(0,import_react.useCallback)(transform$1=>{onViewportChange?.({x:transform$1[0],y:transform$1[1],zoom:transform$1[2]}),isControlledViewport||store.setState({transform:transform$1})},[onViewportChange,isControlledViewport]);return(0,import_react.useEffect)(()=>{if(zoomPane.current){panZoom.current=XYPanZoom({domNode:zoomPane.current,minZoom,maxZoom,translateExtent,viewport:defaultViewport$1,onDraggingChange:paneDragging=>store.setState({paneDragging}),onPanZoomStart:(event,vp)=>{let{onViewportChangeStart,onMoveStart}=store.getState();onMoveStart?.(event,vp),onViewportChangeStart?.(vp)},onPanZoom:(event,vp)=>{let{onViewportChange:onViewportChange$1,onMove}=store.getState();onMove?.(event,vp),onViewportChange$1?.(vp)},onPanZoomEnd:(event,vp)=>{let{onViewportChangeEnd,onMoveEnd}=store.getState();onMoveEnd?.(event,vp),onViewportChangeEnd?.(vp)}});let{x:x$2,y:y$2,zoom}=panZoom.current.getViewport();return store.setState({panZoom:panZoom.current,transform:[x$2,y$2,zoom],domNode:zoomPane.current.closest(`.react-flow`)}),()=>{panZoom.current?.destroy()}}},[]),(0,import_react.useEffect)(()=>{panZoom.current?.update({onPaneContextMenu,zoomOnScroll,zoomOnPinch,panOnScroll,panOnScrollSpeed,panOnScrollMode,zoomOnDoubleClick,panOnDrag,zoomActivationKeyPressed,preventScrolling,noPanClassName,userSelectionActive,noWheelClassName,lib,onTransformChange,connectionInProgress,selectionOnDrag,paneClickDistance})},[onPaneContextMenu,zoomOnScroll,zoomOnPinch,panOnScroll,panOnScrollSpeed,panOnScrollMode,zoomOnDoubleClick,panOnDrag,zoomActivationKeyPressed,preventScrolling,noPanClassName,userSelectionActive,noWheelClassName,lib,onTransformChange,connectionInProgress,selectionOnDrag,paneClickDistance]),(0,import_jsx_runtime.jsx)(`div`,{className:`react-flow__renderer`,ref:zoomPane,style:containerStyle,children:children$1})}var selector$i=s$3=>({userSelectionActive:s$3.userSelectionActive,userSelectionRect:s$3.userSelectionRect});function UserSelection(){let{userSelectionActive,userSelectionRect}=useStore(selector$i,shallow$1);return userSelectionActive&&userSelectionRect?(0,import_jsx_runtime.jsx)(`div`,{className:`react-flow__selection react-flow__container`,style:{width:userSelectionRect.width,height:userSelectionRect.height,transform:`translate(${userSelectionRect.x}px, ${userSelectionRect.y}px)`}}):null}var wrapHandler=(handler,containerRef)=>event=>{event.target===containerRef.current&&handler?.(event)},selector$h=s$3=>({userSelectionActive:s$3.userSelectionActive,elementsSelectable:s$3.elementsSelectable,connectionInProgress:s$3.connection.inProgress,dragging:s$3.paneDragging});function Pane({isSelecting,selectionKeyPressed,selectionMode=SelectionMode.Full,panOnDrag,paneClickDistance,selectionOnDrag,onSelectionStart,onSelectionEnd,onPaneClick,onPaneContextMenu,onPaneScroll,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,children:children$1}){let store=useStoreApi(),{userSelectionActive,elementsSelectable,dragging,connectionInProgress}=useStore(selector$h,shallow$1),isSelectionEnabled=elementsSelectable&&(isSelecting||userSelectionActive),container=(0,import_react.useRef)(null),containerBounds=(0,import_react.useRef)(),selectedNodeIds=(0,import_react.useRef)(new Set),selectedEdgeIds=(0,import_react.useRef)(new Set),selectionInProgress=(0,import_react.useRef)(!1),onClick=event=>{if(selectionInProgress.current||connectionInProgress){selectionInProgress.current=!1;return}onPaneClick?.(event),store.getState().resetSelectedElements(),store.setState({nodesSelectionActive:!1})},onContextMenu=event=>{if(Array.isArray(panOnDrag)&&panOnDrag?.includes(2)){event.preventDefault();return}onPaneContextMenu?.(event)},onWheel=onPaneScroll?event=>onPaneScroll(event):void 0;return(0,import_jsx_runtime.jsxs)(`div`,{className:cc([`react-flow__pane`,{draggable:panOnDrag===!0||Array.isArray(panOnDrag)&&panOnDrag.includes(0),dragging,selection:isSelecting}]),onClick:isSelectionEnabled?void 0:wrapHandler(onClick,container),onContextMenu:wrapHandler(onContextMenu,container),onWheel:wrapHandler(onWheel,container),onPointerEnter:isSelectionEnabled?void 0:onPaneMouseEnter,onPointerMove:isSelectionEnabled?event=>{let{userSelectionRect,transform:transform$1,nodeLookup,edgeLookup,connectionLookup,triggerNodeChanges,triggerEdgeChanges,defaultEdgeOptions,resetSelectedElements}=store.getState();if(!containerBounds.current||!userSelectionRect)return;let{x:mouseX,y:mouseY}=getEventPosition(event.nativeEvent,containerBounds.current),{startX,startY}=userSelectionRect;if(!selectionInProgress.current){let requiredDistance=selectionKeyPressed?0:paneClickDistance;if(Math.hypot(mouseX-startX,mouseY-startY)<=requiredDistance)return;resetSelectedElements(),onSelectionStart?.(event)}selectionInProgress.current=!0;let nextUserSelectRect={startX,startY,x:mouseX<startX?mouseX:startX,y:mouseY<startY?mouseY:startY,width:Math.abs(mouseX-startX),height:Math.abs(mouseY-startY)},prevSelectedNodeIds=selectedNodeIds.current,prevSelectedEdgeIds=selectedEdgeIds.current;selectedNodeIds.current=new Set(getNodesInside(nodeLookup,nextUserSelectRect,transform$1,selectionMode===SelectionMode.Partial,!0).map(node=>node.id)),selectedEdgeIds.current=new Set;let edgesSelectable=defaultEdgeOptions?.selectable??!0;for(let nodeId of selectedNodeIds.current){let connections=connectionLookup.get(nodeId);if(connections)for(let{edgeId}of connections.values()){let edge=edgeLookup.get(edgeId);edge&&(edge.selectable??edgesSelectable)&&selectedEdgeIds.current.add(edgeId)}}areSetsEqual(prevSelectedNodeIds,selectedNodeIds.current)||triggerNodeChanges(getSelectionChanges(nodeLookup,selectedNodeIds.current,!0)),areSetsEqual(prevSelectedEdgeIds,selectedEdgeIds.current)||triggerEdgeChanges(getSelectionChanges(edgeLookup,selectedEdgeIds.current)),store.setState({userSelectionRect:nextUserSelectRect,userSelectionActive:!0,nodesSelectionActive:!1})}:onPaneMouseMove,onPointerUp:isSelectionEnabled?event=>{event.button===0&&(event.target?.releasePointerCapture?.(event.pointerId),!userSelectionActive&&event.target===container.current&&store.getState().userSelectionRect&&onClick?.(event),store.setState({userSelectionActive:!1,userSelectionRect:null}),selectionInProgress.current&&(onSelectionEnd?.(event),store.setState({nodesSelectionActive:selectedNodeIds.current.size>0})))}:void 0,onPointerDownCapture:isSelectionEnabled?event=>{let{domNode}=store.getState();if(containerBounds.current=domNode?.getBoundingClientRect(),!containerBounds.current)return;let eventTargetIsContainer=event.target===container.current;if(!eventTargetIsContainer&&event.target.closest(`.nokey`)||!isSelecting||!(selectionOnDrag&&eventTargetIsContainer||selectionKeyPressed)||event.button!==0||!event.isPrimary)return;event.target?.setPointerCapture?.(event.pointerId),selectionInProgress.current=!1;let{x:x$2,y:y$2}=getEventPosition(event.nativeEvent,containerBounds.current);store.setState({userSelectionRect:{width:0,height:0,startX:x$2,startY:y$2,x:x$2,y:y$2}}),eventTargetIsContainer||(event.stopPropagation(),event.preventDefault())}:void 0,onClickCapture:isSelectionEnabled?event=>{selectionInProgress.current&&=(event.stopPropagation(),!1)}:void 0,onPointerLeave:onPaneMouseLeave,ref:container,style:containerStyle,children:[children$1,(0,import_jsx_runtime.jsx)(UserSelection,{})]})}function handleNodeClick({id:id$3,store,unselect=!1,nodeRef}){let{addSelectedNodes,unselectNodesAndEdges,multiSelectionActive,nodeLookup,onError}=store.getState(),node=nodeLookup.get(id$3);if(!node){onError?.(`012`,errorMessages.error012(id$3));return}store.setState({nodesSelectionActive:!1}),node.selected?(unselect||node.selected&&multiSelectionActive)&&(unselectNodesAndEdges({nodes:[node],edges:[]}),requestAnimationFrame(()=>nodeRef?.current?.blur())):addSelectedNodes([id$3])}function useDrag$1({nodeRef,disabled=!1,noDragClassName,handleSelector,nodeId,isSelectable,nodeClickDistance}){let store=useStoreApi(),[dragging,setDragging]=(0,import_react.useState)(!1),xyDrag=(0,import_react.useRef)();return(0,import_react.useEffect)(()=>{xyDrag.current=XYDrag({getStoreItems:()=>store.getState(),onNodeMouseDown:id$3=>{handleNodeClick({id:id$3,store,nodeRef})},onDragStart:()=>{setDragging(!0)},onDragStop:()=>{setDragging(!1)}})},[]),(0,import_react.useEffect)(()=>{if(disabled)xyDrag.current?.destroy();else if(nodeRef.current)return xyDrag.current?.update({noDragClassName,handleSelector,domNode:nodeRef.current,isSelectable,nodeId,nodeClickDistance}),()=>{xyDrag.current?.destroy()}},[noDragClassName,handleSelector,disabled,isSelectable,nodeRef,nodeId]),dragging}var selectedAndDraggable=nodesDraggable=>n$4=>n$4.selected&&(n$4.draggable||nodesDraggable&&n$4.draggable===void 0);function useMoveSelectedNodes(){let store=useStoreApi();return(0,import_react.useCallback)(params=>{let{nodeExtent,snapToGrid,snapGrid,nodesDraggable,onError,updateNodePositions,nodeLookup,nodeOrigin}=store.getState(),nodeUpdates=new Map,isSelected=selectedAndDraggable(nodesDraggable),xVelo=snapToGrid?snapGrid[0]:5,yVelo=snapToGrid?snapGrid[1]:5,xDiff=params.direction.x*xVelo*params.factor,yDiff=params.direction.y*yVelo*params.factor;for(let[,node]of nodeLookup){if(!isSelected(node))continue;let nextPosition={x:node.internals.positionAbsolute.x+xDiff,y:node.internals.positionAbsolute.y+yDiff};snapToGrid&&(nextPosition=snapPosition(nextPosition,snapGrid));let{position:position$1,positionAbsolute}=calculateNodePosition({nodeId:node.id,nextPosition,nodeLookup,nodeExtent,nodeOrigin,onError});node.position=position$1,node.internals.positionAbsolute=positionAbsolute,nodeUpdates.set(node.id,node)}updateNodePositions(nodeUpdates)},[])}var NodeIdContext=(0,import_react.createContext)(null),Provider$2=NodeIdContext.Provider;NodeIdContext.Consumer;var useNodeId=()=>(0,import_react.useContext)(NodeIdContext),selector$g=s$3=>({connectOnClick:s$3.connectOnClick,noPanClassName:s$3.noPanClassName,rfId:s$3.rfId}),connectingSelector=(nodeId,handleId,type)=>state=>{let{connectionClickStartHandle:clickHandle,connectionMode,connection}=state,{fromHandle,toHandle,isValid}=connection,connectingTo=toHandle?.nodeId===nodeId&&toHandle?.id===handleId&&toHandle?.type===type;return{connectingFrom:fromHandle?.nodeId===nodeId&&fromHandle?.id===handleId&&fromHandle?.type===type,connectingTo,clickConnecting:clickHandle?.nodeId===nodeId&&clickHandle?.id===handleId&&clickHandle?.type===type,isPossibleEndHandle:connectionMode===ConnectionMode.Strict?fromHandle?.type!==type:nodeId!==fromHandle?.nodeId||handleId!==fromHandle?.id,connectionInProcess:!!fromHandle,clickConnectionInProcess:!!clickHandle,valid:connectingTo&&isValid}};function HandleComponent({type=`source`,position:position$1=Position.Top,isValidConnection,isConnectable=!0,isConnectableStart=!0,isConnectableEnd=!0,id:id$3,onConnect,children:children$1,className,onMouseDown,onTouchStart,...rest},ref){let handleId=id$3||null,isTarget=type===`target`,store=useStoreApi(),nodeId=useNodeId(),{connectOnClick,noPanClassName,rfId}=useStore(selector$g,shallow$1),{connectingFrom,connectingTo,clickConnecting,isPossibleEndHandle,connectionInProcess,clickConnectionInProcess,valid}=useStore(connectingSelector(nodeId,handleId,type),shallow$1);nodeId||store.getState().onError?.(`010`,errorMessages.error010());let onConnectExtended=params=>{let{defaultEdgeOptions,onConnect:onConnectAction,hasDefaultEdges}=store.getState(),edgeParams={...defaultEdgeOptions,...params};if(hasDefaultEdges){let{edges,setEdges}=store.getState();setEdges(addEdge(edgeParams,edges))}onConnectAction?.(edgeParams),onConnect?.(edgeParams)},onPointerDown$1=event=>{if(!nodeId)return;let isMouseTriggered=isMouseEvent$1(event.nativeEvent);if(isConnectableStart&&(isMouseTriggered&&event.button===0||!isMouseTriggered)){let currentStore=store.getState();XYHandle.onPointerDown(event.nativeEvent,{handleDomNode:event.currentTarget,autoPanOnConnect:currentStore.autoPanOnConnect,connectionMode:currentStore.connectionMode,connectionRadius:currentStore.connectionRadius,domNode:currentStore.domNode,nodeLookup:currentStore.nodeLookup,lib:currentStore.lib,isTarget,handleId,nodeId,flowId:currentStore.rfId,panBy:currentStore.panBy,cancelConnection:currentStore.cancelConnection,onConnectStart:currentStore.onConnectStart,onConnectEnd:currentStore.onConnectEnd,updateConnection:currentStore.updateConnection,onConnect:onConnectExtended,isValidConnection:isValidConnection||currentStore.isValidConnection,getTransform:()=>store.getState().transform,getFromHandle:()=>store.getState().connection.fromHandle,autoPanSpeed:currentStore.autoPanSpeed,dragThreshold:currentStore.connectionDragThreshold})}isMouseTriggered?onMouseDown?.(event):onTouchStart?.(event)},onClick=event=>{let{onClickConnectStart,onClickConnectEnd,connectionClickStartHandle,connectionMode,isValidConnection:isValidConnectionStore,lib,rfId:flowId,nodeLookup,connection:connectionState}=store.getState();if(!nodeId||!connectionClickStartHandle&&!isConnectableStart)return;if(!connectionClickStartHandle){onClickConnectStart?.(event.nativeEvent,{nodeId,handleId,handleType:type}),store.setState({connectionClickStartHandle:{nodeId,type,id:handleId}});return}let doc=getHostForElement(event.target),isValidConnectionHandler=isValidConnection||isValidConnectionStore,{connection,isValid}=XYHandle.isValid(event.nativeEvent,{handle:{nodeId,id:handleId,type},connectionMode,fromNodeId:connectionClickStartHandle.nodeId,fromHandleId:connectionClickStartHandle.id||null,fromType:connectionClickStartHandle.type,isValidConnection:isValidConnectionHandler,flowId,doc,lib,nodeLookup});isValid&&connection&&onConnectExtended(connection);let connectionClone=structuredClone(connectionState);delete connectionClone.inProgress,connectionClone.toPosition=connectionClone.toHandle?connectionClone.toHandle.position:null,onClickConnectEnd?.(event,connectionClone),store.setState({connectionClickStartHandle:null})};return(0,import_jsx_runtime.jsx)(`div`,{"data-handleid":handleId,"data-nodeid":nodeId,"data-handlepos":position$1,"data-id":`${rfId}-${nodeId}-${handleId}-${type}`,className:cc([`react-flow__handle`,`react-flow__handle-${position$1}`,`nodrag`,noPanClassName,className,{source:!isTarget,target:isTarget,connectable:isConnectable,connectablestart:isConnectableStart,connectableend:isConnectableEnd,clickconnecting:clickConnecting,connectingfrom:connectingFrom,connectingto:connectingTo,valid,connectionindicator:isConnectable&&(!connectionInProcess||isPossibleEndHandle)&&(connectionInProcess||clickConnectionInProcess?isConnectableEnd:isConnectableStart)}]),onMouseDown:onPointerDown$1,onTouchStart:onPointerDown$1,onClick:connectOnClick?onClick:void 0,ref,...rest,children:children$1})}var Handle=(0,import_react.memo)(fixedForwardRef(HandleComponent));function InputNode({data,isConnectable,sourcePosition=Position.Bottom}){return(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[data?.label,(0,import_jsx_runtime.jsx)(Handle,{type:`source`,position:sourcePosition,isConnectable})]})}function DefaultNode({data,isConnectable,targetPosition=Position.Top,sourcePosition=Position.Bottom}){return(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(Handle,{type:`target`,position:targetPosition,isConnectable}),data?.label,(0,import_jsx_runtime.jsx)(Handle,{type:`source`,position:sourcePosition,isConnectable})]})}function GroupNode(){return null}function OutputNode({data,isConnectable,targetPosition=Position.Top}){return(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(Handle,{type:`target`,position:targetPosition,isConnectable}),data?.label]})}var arrowKeyDiffs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},builtinNodeTypes={input:InputNode,default:DefaultNode,output:OutputNode,group:GroupNode};function getNodeInlineStyleDimensions(node){return node.internals.handleBounds===void 0?{width:node.width??node.initialWidth??node.style?.width,height:node.height??node.initialHeight??node.style?.height}:{width:node.width??node.style?.width,height:node.height??node.style?.height}}var selector$f=s$3=>{let{width,height,x:x$2,y:y$2}=getInternalNodesBounds(s$3.nodeLookup,{filter:node=>!!node.selected});return{width:isNumeric(width)?width:null,height:isNumeric(height)?height:null,userSelectionActive:s$3.userSelectionActive,transformString:`translate(${s$3.transform[0]}px,${s$3.transform[1]}px) scale(${s$3.transform[2]}) translate(${x$2}px,${y$2}px)`}};function NodesSelection({onSelectionContextMenu,noPanClassName,disableKeyboardA11y}){let store=useStoreApi(),{width,height,transformString,userSelectionActive}=useStore(selector$f,shallow$1),moveSelectedNodes=useMoveSelectedNodes(),nodeRef=(0,import_react.useRef)(null);if((0,import_react.useEffect)(()=>{disableKeyboardA11y||nodeRef.current?.focus({preventScroll:!0})},[disableKeyboardA11y]),useDrag$1({nodeRef}),userSelectionActive||!width||!height)return null;let onContextMenu=onSelectionContextMenu?event=>{onSelectionContextMenu(event,store.getState().nodes.filter(n$4=>n$4.selected))}:void 0;return(0,import_jsx_runtime.jsx)(`div`,{className:cc([`react-flow__nodesselection`,`react-flow__container`,noPanClassName]),style:{transform:transformString},children:(0,import_jsx_runtime.jsx)(`div`,{ref:nodeRef,className:`react-flow__nodesselection-rect`,onContextMenu,tabIndex:disableKeyboardA11y?void 0:-1,onKeyDown:disableKeyboardA11y?void 0:event=>{Object.prototype.hasOwnProperty.call(arrowKeyDiffs,event.key)&&(event.preventDefault(),moveSelectedNodes({direction:arrowKeyDiffs[event.key],factor:event.shiftKey?4:1}))},style:{width,height}})})}var win=typeof window<`u`?window:void 0,selector$e=s$3=>({nodesSelectionActive:s$3.nodesSelectionActive,userSelectionActive:s$3.userSelectionActive});function FlowRendererComponent({children:children$1,onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneContextMenu,onPaneScroll,paneClickDistance,deleteKeyCode,selectionKeyCode,selectionOnDrag,selectionMode,onSelectionStart,onSelectionEnd,multiSelectionKeyCode,panActivationKeyCode,zoomActivationKeyCode,elementsSelectable,zoomOnScroll,zoomOnPinch,panOnScroll:_panOnScroll,panOnScrollSpeed,panOnScrollMode,zoomOnDoubleClick,panOnDrag:_panOnDrag,defaultViewport:defaultViewport$1,translateExtent,minZoom,maxZoom,preventScrolling,onSelectionContextMenu,noWheelClassName,noPanClassName,disableKeyboardA11y,onViewportChange,isControlledViewport}){let{nodesSelectionActive,userSelectionActive}=useStore(selector$e,shallow$1),selectionKeyPressed=useKeyPress(selectionKeyCode,{target:win}),panActivationKeyPressed=useKeyPress(panActivationKeyCode,{target:win}),panOnDrag=panActivationKeyPressed||_panOnDrag,panOnScroll=panActivationKeyPressed||_panOnScroll,_selectionOnDrag=selectionOnDrag&&panOnDrag!==!0,isSelecting=selectionKeyPressed||userSelectionActive||_selectionOnDrag;return useGlobalKeyHandler({deleteKeyCode,multiSelectionKeyCode}),(0,import_jsx_runtime.jsx)(ZoomPane,{onPaneContextMenu,elementsSelectable,zoomOnScroll,zoomOnPinch,panOnScroll,panOnScrollSpeed,panOnScrollMode,zoomOnDoubleClick,panOnDrag:!selectionKeyPressed&&panOnDrag,defaultViewport:defaultViewport$1,translateExtent,minZoom,maxZoom,zoomActivationKeyCode,preventScrolling,noWheelClassName,noPanClassName,onViewportChange,isControlledViewport,paneClickDistance,selectionOnDrag:_selectionOnDrag,children:(0,import_jsx_runtime.jsxs)(Pane,{onSelectionStart,onSelectionEnd,onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneContextMenu,onPaneScroll,panOnDrag,isSelecting:!!isSelecting,selectionMode,selectionKeyPressed,paneClickDistance,selectionOnDrag:_selectionOnDrag,children:[children$1,nodesSelectionActive&&(0,import_jsx_runtime.jsx)(NodesSelection,{onSelectionContextMenu,noPanClassName,disableKeyboardA11y})]})})}FlowRendererComponent.displayName=`FlowRenderer`;var FlowRenderer=(0,import_react.memo)(FlowRendererComponent),selector$d=onlyRenderVisible=>s$3=>onlyRenderVisible?getNodesInside(s$3.nodeLookup,{x:0,y:0,width:s$3.width,height:s$3.height},s$3.transform,!0).map(node=>node.id):Array.from(s$3.nodeLookup.keys());function useVisibleNodeIds(onlyRenderVisible){return useStore((0,import_react.useCallback)(selector$d(onlyRenderVisible),[onlyRenderVisible]),shallow$1)}var selector$c=s$3=>s$3.updateNodeInternals;function useResizeObserver(){let updateNodeInternals$1=useStore(selector$c),[resizeObserver]=(0,import_react.useState)(()=>typeof ResizeObserver>`u`?null:new ResizeObserver(entries=>{let updates=new Map;entries.forEach(entry=>{let id$3=entry.target.getAttribute(`data-id`);updates.set(id$3,{id:id$3,nodeElement:entry.target,force:!0})}),updateNodeInternals$1(updates)}));return(0,import_react.useEffect)(()=>()=>{resizeObserver?.disconnect()},[resizeObserver]),resizeObserver}function useNodeObserver({node,nodeType,hasDimensions,resizeObserver}){let store=useStoreApi(),nodeRef=(0,import_react.useRef)(null),observedNode=(0,import_react.useRef)(null),prevSourcePosition=(0,import_react.useRef)(node.sourcePosition),prevTargetPosition=(0,import_react.useRef)(node.targetPosition),prevType=(0,import_react.useRef)(nodeType),isInitialized$1=hasDimensions&&!!node.internals.handleBounds;return(0,import_react.useEffect)(()=>{nodeRef.current&&!node.hidden&&(!isInitialized$1||observedNode.current!==nodeRef.current)&&(observedNode.current&&resizeObserver?.unobserve(observedNode.current),resizeObserver?.observe(nodeRef.current),observedNode.current=nodeRef.current)},[isInitialized$1,node.hidden]),(0,import_react.useEffect)(()=>()=>{observedNode.current&&=(resizeObserver?.unobserve(observedNode.current),null)},[]),(0,import_react.useEffect)(()=>{if(nodeRef.current){let typeChanged=prevType.current!==nodeType,sourcePosChanged=prevSourcePosition.current!==node.sourcePosition,targetPosChanged=prevTargetPosition.current!==node.targetPosition;(typeChanged||sourcePosChanged||targetPosChanged)&&(prevType.current=nodeType,prevSourcePosition.current=node.sourcePosition,prevTargetPosition.current=node.targetPosition,store.getState().updateNodeInternals(new Map([[node.id,{id:node.id,nodeElement:nodeRef.current,force:!0}]])))}},[node.id,nodeType,node.sourcePosition,node.targetPosition]),nodeRef}function NodeWrapper({id:id$3,onClick,onMouseEnter,onMouseMove,onMouseLeave,onContextMenu,onDoubleClick,nodesDraggable,elementsSelectable,nodesConnectable,nodesFocusable,resizeObserver,noDragClassName,noPanClassName,disableKeyboardA11y,rfId,nodeTypes,nodeClickDistance,onError}){let{node,internals,isParent}=useStore(s$3=>{let node$1=s$3.nodeLookup.get(id$3),isParent$1=s$3.parentLookup.has(id$3);return{node:node$1,internals:node$1.internals,isParent:isParent$1}},shallow$1),nodeType=node.type||`default`,NodeComponent=nodeTypes?.[nodeType]||builtinNodeTypes[nodeType];NodeComponent===void 0&&(onError?.(`003`,errorMessages.error003(nodeType)),nodeType=`default`,NodeComponent=nodeTypes?.default||builtinNodeTypes.default);let isDraggable=!!(node.draggable||nodesDraggable&&node.draggable===void 0),isSelectable=!!(node.selectable||elementsSelectable&&node.selectable===void 0),isConnectable=!!(node.connectable||nodesConnectable&&node.connectable===void 0),isFocusable=!!(node.focusable||nodesFocusable&&node.focusable===void 0),store=useStoreApi(),hasDimensions=nodeHasDimensions(node),nodeRef=useNodeObserver({node,nodeType,hasDimensions,resizeObserver}),dragging=useDrag$1({nodeRef,disabled:node.hidden||!isDraggable,noDragClassName,handleSelector:node.dragHandle,nodeId:id$3,isSelectable,nodeClickDistance}),moveSelectedNodes=useMoveSelectedNodes();if(node.hidden)return null;let nodeDimensions=getNodeDimensions(node),inlineDimensions=getNodeInlineStyleDimensions(node),hasPointerEvents=isSelectable||isDraggable||onClick||onMouseEnter||onMouseMove||onMouseLeave,onMouseEnterHandler=onMouseEnter?event=>onMouseEnter(event,{...internals.userNode}):void 0,onMouseMoveHandler=onMouseMove?event=>onMouseMove(event,{...internals.userNode}):void 0,onMouseLeaveHandler=onMouseLeave?event=>onMouseLeave(event,{...internals.userNode}):void 0,onContextMenuHandler=onContextMenu?event=>onContextMenu(event,{...internals.userNode}):void 0,onDoubleClickHandler=onDoubleClick?event=>onDoubleClick(event,{...internals.userNode}):void 0,onSelectNodeHandler=event=>{let{selectNodesOnDrag,nodeDragThreshold}=store.getState();isSelectable&&(!selectNodesOnDrag||!isDraggable||nodeDragThreshold>0)&&handleNodeClick({id:id$3,store,nodeRef}),onClick&&onClick(event,{...internals.userNode})},onKeyDown=event=>{if(!(isInputDOMNode(event.nativeEvent)||disableKeyboardA11y)){if(elementSelectionKeys.includes(event.key)&&isSelectable)handleNodeClick({id:id$3,store,unselect:event.key===`Escape`,nodeRef});else if(isDraggable&&node.selected&&Object.prototype.hasOwnProperty.call(arrowKeyDiffs,event.key)){event.preventDefault();let{ariaLabelConfig}=store.getState();store.setState({ariaLiveMessage:ariaLabelConfig[`node.a11yDescription.ariaLiveMessage`]({direction:event.key.replace(`Arrow`,``).toLowerCase(),x:~~internals.positionAbsolute.x,y:~~internals.positionAbsolute.y})}),moveSelectedNodes({direction:arrowKeyDiffs[event.key],factor:event.shiftKey?4:1})}}},onFocus=()=>{if(disableKeyboardA11y||!nodeRef.current?.matches(`:focus-visible`))return;let{transform:transform$1,width,height,autoPanOnNodeFocus,setCenter}=store.getState();autoPanOnNodeFocus&&(getNodesInside(new Map([[id$3,node]]),{x:0,y:0,width,height},transform$1,!0).length>0||setCenter(node.position.x+nodeDimensions.width/2,node.position.y+nodeDimensions.height/2,{zoom:transform$1[2]}))};return(0,import_jsx_runtime.jsx)(`div`,{className:cc([`react-flow__node`,`react-flow__node-${nodeType}`,{[noPanClassName]:isDraggable},node.className,{selected:node.selected,selectable:isSelectable,parent:isParent,draggable:isDraggable,dragging}]),ref:nodeRef,style:{zIndex:internals.z,transform:`translate(${internals.positionAbsolute.x}px,${internals.positionAbsolute.y}px)`,pointerEvents:hasPointerEvents?`all`:`none`,visibility:hasDimensions?`visible`:`hidden`,...node.style,...inlineDimensions},"data-id":id$3,"data-testid":`rf__node-${id$3}`,onMouseEnter:onMouseEnterHandler,onMouseMove:onMouseMoveHandler,onMouseLeave:onMouseLeaveHandler,onContextMenu:onContextMenuHandler,onClick:onSelectNodeHandler,onDoubleClick:onDoubleClickHandler,onKeyDown:isFocusable?onKeyDown:void 0,tabIndex:isFocusable?0:void 0,onFocus:isFocusable?onFocus:void 0,role:node.ariaRole??(isFocusable?`group`:void 0),"aria-roledescription":`node`,"aria-describedby":disableKeyboardA11y?void 0:`${ARIA_NODE_DESC_KEY}-${rfId}`,"aria-label":node.ariaLabel,...node.domAttributes,children:(0,import_jsx_runtime.jsx)(Provider$2,{value:id$3,children:(0,import_jsx_runtime.jsx)(NodeComponent,{id:id$3,data:node.data,type:nodeType,positionAbsoluteX:internals.positionAbsolute.x,positionAbsoluteY:internals.positionAbsolute.y,selected:node.selected??!1,selectable:isSelectable,draggable:isDraggable,deletable:node.deletable??!0,isConnectable,sourcePosition:node.sourcePosition,targetPosition:node.targetPosition,dragging,dragHandle:node.dragHandle,zIndex:internals.z,parentId:node.parentId,...nodeDimensions})})})}var NodeWrapper$1=(0,import_react.memo)(NodeWrapper),selector$b=s$3=>({nodesDraggable:s$3.nodesDraggable,nodesConnectable:s$3.nodesConnectable,nodesFocusable:s$3.nodesFocusable,elementsSelectable:s$3.elementsSelectable,onError:s$3.onError});function NodeRendererComponent(props){let{nodesDraggable,nodesConnectable,nodesFocusable,elementsSelectable,onError}=useStore(selector$b,shallow$1),nodeIds=useVisibleNodeIds(props.onlyRenderVisibleElements),resizeObserver=useResizeObserver();return(0,import_jsx_runtime.jsx)(`div`,{className:`react-flow__nodes`,style:containerStyle,children:nodeIds.map(nodeId=>(0,import_jsx_runtime.jsx)(NodeWrapper$1,{id:nodeId,nodeTypes:props.nodeTypes,nodeExtent:props.nodeExtent,onClick:props.onNodeClick,onMouseEnter:props.onNodeMouseEnter,onMouseMove:props.onNodeMouseMove,onMouseLeave:props.onNodeMouseLeave,onContextMenu:props.onNodeContextMenu,onDoubleClick:props.onNodeDoubleClick,noDragClassName:props.noDragClassName,noPanClassName:props.noPanClassName,rfId:props.rfId,disableKeyboardA11y:props.disableKeyboardA11y,resizeObserver,nodesDraggable,nodesConnectable,nodesFocusable,elementsSelectable,nodeClickDistance:props.nodeClickDistance,onError},nodeId))})}NodeRendererComponent.displayName=`NodeRenderer`;var NodeRenderer=(0,import_react.memo)(NodeRendererComponent);function useVisibleEdgeIds(onlyRenderVisible){return useStore((0,import_react.useCallback)(s$3=>{if(!onlyRenderVisible)return s$3.edges.map(edge=>edge.id);let visibleEdgeIds=[];if(s$3.width&&s$3.height)for(let edge of s$3.edges){let sourceNode=s$3.nodeLookup.get(edge.source),targetNode=s$3.nodeLookup.get(edge.target);sourceNode&&targetNode&&isEdgeVisible({sourceNode,targetNode,width:s$3.width,height:s$3.height,transform:s$3.transform})&&visibleEdgeIds.push(edge.id)}return visibleEdgeIds},[onlyRenderVisible]),shallow$1)}var ArrowSymbol=({color:color$2=`none`,strokeWidth=1})=>(0,import_jsx_runtime.jsx)(`polyline`,{className:`arrow`,style:{strokeWidth,...color$2&&{stroke:color$2}},strokeLinecap:`round`,fill:`none`,strokeLinejoin:`round`,points:`-5,-4 0,0 -5,4`}),ArrowClosedSymbol=({color:color$2=`none`,strokeWidth=1})=>(0,import_jsx_runtime.jsx)(`polyline`,{className:`arrowclosed`,style:{strokeWidth,...color$2&&{stroke:color$2,fill:color$2}},strokeLinecap:`round`,strokeLinejoin:`round`,points:`-5,-4 0,0 -5,4 -5,-4`}),MarkerSymbols={[MarkerType.Arrow]:ArrowSymbol,[MarkerType.ArrowClosed]:ArrowClosedSymbol};function useMarkerSymbol(type){let store=useStoreApi();return(0,import_react.useMemo)(()=>Object.prototype.hasOwnProperty.call(MarkerSymbols,type)?MarkerSymbols[type]:(store.getState().onError?.(`009`,errorMessages.error009(type)),null),[type])}var Marker=({id:id$3,type,color:color$2,width=12.5,height=12.5,markerUnits=`strokeWidth`,strokeWidth,orient=`auto-start-reverse`})=>{let Symbol$1=useMarkerSymbol(type);return Symbol$1?(0,import_jsx_runtime.jsx)(`marker`,{className:`react-flow__arrowhead`,id:id$3,markerWidth:`${width}`,markerHeight:`${height}`,viewBox:`-10 -10 20 20`,markerUnits,orient,refX:`0`,refY:`0`,children:(0,import_jsx_runtime.jsx)(Symbol$1,{color:color$2,strokeWidth})}):null},MarkerDefinitions=({defaultColor,rfId})=>{let edges=useStore(s$3=>s$3.edges),defaultEdgeOptions=useStore(s$3=>s$3.defaultEdgeOptions),markers=(0,import_react.useMemo)(()=>createMarkerIds(edges,{id:rfId,defaultColor,defaultMarkerStart:defaultEdgeOptions?.markerStart,defaultMarkerEnd:defaultEdgeOptions?.markerEnd}),[edges,defaultEdgeOptions,rfId,defaultColor]);return markers.length?(0,import_jsx_runtime.jsx)(`svg`,{className:`react-flow__marker`,"aria-hidden":`true`,children:(0,import_jsx_runtime.jsx)(`defs`,{children:markers.map(marker=>(0,import_jsx_runtime.jsx)(Marker,{id:marker.id,type:marker.type,color:marker.color,width:marker.width,height:marker.height,markerUnits:marker.markerUnits,strokeWidth:marker.strokeWidth,orient:marker.orient},marker.id))})}):null};MarkerDefinitions.displayName=`MarkerDefinitions`;var MarkerDefinitions$1=(0,import_react.memo)(MarkerDefinitions);function EdgeTextComponent({x:x$2,y:y$2,label,labelStyle,labelShowBg=!0,labelBgStyle,labelBgPadding=[2,4],labelBgBorderRadius=2,children:children$1,className,...rest}){let[edgeTextBbox,setEdgeTextBbox]=(0,import_react.useState)({x:1,y:0,width:0,height:0}),edgeTextClasses=cc([`react-flow__edge-textwrapper`,className]),edgeTextRef=(0,import_react.useRef)(null);return(0,import_react.useEffect)(()=>{if(edgeTextRef.current){let textBbox=edgeTextRef.current.getBBox();setEdgeTextBbox({x:textBbox.x,y:textBbox.y,width:textBbox.width,height:textBbox.height})}},[label]),label?(0,import_jsx_runtime.jsxs)(`g`,{transform:`translate(${x$2-edgeTextBbox.width/2} ${y$2-edgeTextBbox.height/2})`,className:edgeTextClasses,visibility:edgeTextBbox.width?`visible`:`hidden`,...rest,children:[labelShowBg&&(0,import_jsx_runtime.jsx)(`rect`,{width:edgeTextBbox.width+2*labelBgPadding[0],x:-labelBgPadding[0],y:-labelBgPadding[1],height:edgeTextBbox.height+2*labelBgPadding[1],className:`react-flow__edge-textbg`,style:labelBgStyle,rx:labelBgBorderRadius,ry:labelBgBorderRadius}),(0,import_jsx_runtime.jsx)(`text`,{className:`react-flow__edge-text`,y:edgeTextBbox.height/2,dy:`0.3em`,ref:edgeTextRef,style:labelStyle,children:label}),children$1]}):null}EdgeTextComponent.displayName=`EdgeText`;var EdgeText=(0,import_react.memo)(EdgeTextComponent);function BaseEdge({path,labelX,labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,interactionWidth=20,...props}){return(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`path`,{...props,d:path,fill:`none`,className:cc([`react-flow__edge-path`,props.className])}),interactionWidth?(0,import_jsx_runtime.jsx)(`path`,{d:path,fill:`none`,strokeOpacity:0,strokeWidth:interactionWidth,className:`react-flow__edge-interaction`}):null,label&&isNumeric(labelX)&&isNumeric(labelY)?(0,import_jsx_runtime.jsx)(EdgeText,{x:labelX,y:labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius}):null]})}function getControl({pos,x1,y1,x2,y2}){return pos===Position.Left||pos===Position.Right?[.5*(x1+x2),y1]:[x1,.5*(y1+y2)]}function getSimpleBezierPath({sourceX,sourceY,sourcePosition=Position.Bottom,targetX,targetY,targetPosition=Position.Top}){let[sourceControlX,sourceControlY]=getControl({pos:sourcePosition,x1:sourceX,y1:sourceY,x2:targetX,y2:targetY}),[targetControlX,targetControlY]=getControl({pos:targetPosition,x1:targetX,y1:targetY,x2:sourceX,y2:sourceY}),[labelX,labelY,offsetX,offsetY]=getBezierEdgeCenter({sourceX,sourceY,targetX,targetY,sourceControlX,sourceControlY,targetControlX,targetControlY});return[`M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,labelX,labelY,offsetX,offsetY]}function createSimpleBezierEdge(params){return(0,import_react.memo)(({id:id$3,sourceX,sourceY,targetX,targetY,sourcePosition,targetPosition,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style:style$3,markerEnd,markerStart,interactionWidth})=>{let[path,labelX,labelY]=getSimpleBezierPath({sourceX,sourceY,sourcePosition,targetX,targetY,targetPosition});return(0,import_jsx_runtime.jsx)(BaseEdge,{id:params.isInternal?void 0:id$3,path,labelX,labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style:style$3,markerEnd,markerStart,interactionWidth})})}var SimpleBezierEdge=createSimpleBezierEdge({isInternal:!1}),SimpleBezierEdgeInternal=createSimpleBezierEdge({isInternal:!0});SimpleBezierEdge.displayName=`SimpleBezierEdge`,SimpleBezierEdgeInternal.displayName=`SimpleBezierEdgeInternal`;function createSmoothStepEdge(params){return(0,import_react.memo)(({id:id$3,sourceX,sourceY,targetX,targetY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style:style$3,sourcePosition=Position.Bottom,targetPosition=Position.Top,markerEnd,markerStart,pathOptions,interactionWidth})=>{let[path,labelX,labelY]=getSmoothStepPath({sourceX,sourceY,sourcePosition,targetX,targetY,targetPosition,borderRadius:pathOptions?.borderRadius,offset:pathOptions?.offset,stepPosition:pathOptions?.stepPosition});return(0,import_jsx_runtime.jsx)(BaseEdge,{id:params.isInternal?void 0:id$3,path,labelX,labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style:style$3,markerEnd,markerStart,interactionWidth})})}var SmoothStepEdge=createSmoothStepEdge({isInternal:!1}),SmoothStepEdgeInternal=createSmoothStepEdge({isInternal:!0});SmoothStepEdge.displayName=`SmoothStepEdge`,SmoothStepEdgeInternal.displayName=`SmoothStepEdgeInternal`;function createStepEdge(params){return(0,import_react.memo)(({id:id$3,...props})=>{let _id=params.isInternal?void 0:id$3;return(0,import_jsx_runtime.jsx)(SmoothStepEdge,{...props,id:_id,pathOptions:(0,import_react.useMemo)(()=>({borderRadius:0,offset:props.pathOptions?.offset}),[props.pathOptions?.offset])})})}var StepEdge=createStepEdge({isInternal:!1}),StepEdgeInternal=createStepEdge({isInternal:!0});StepEdge.displayName=`StepEdge`,StepEdgeInternal.displayName=`StepEdgeInternal`;function createStraightEdge(params){return(0,import_react.memo)(({id:id$3,sourceX,sourceY,targetX,targetY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style:style$3,markerEnd,markerStart,interactionWidth})=>{let[path,labelX,labelY]=getStraightPath({sourceX,sourceY,targetX,targetY});return(0,import_jsx_runtime.jsx)(BaseEdge,{id:params.isInternal?void 0:id$3,path,labelX,labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style:style$3,markerEnd,markerStart,interactionWidth})})}var StraightEdge=createStraightEdge({isInternal:!1}),StraightEdgeInternal=createStraightEdge({isInternal:!0});StraightEdge.displayName=`StraightEdge`,StraightEdgeInternal.displayName=`StraightEdgeInternal`;function createBezierEdge(params){return(0,import_react.memo)(({id:id$3,sourceX,sourceY,targetX,targetY,sourcePosition=Position.Bottom,targetPosition=Position.Top,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style:style$3,markerEnd,markerStart,pathOptions,interactionWidth})=>{let[path,labelX,labelY]=getBezierPath({sourceX,sourceY,sourcePosition,targetX,targetY,targetPosition,curvature:pathOptions?.curvature});return(0,import_jsx_runtime.jsx)(BaseEdge,{id:params.isInternal?void 0:id$3,path,labelX,labelY,label,labelStyle,labelShowBg,labelBgStyle,labelBgPadding,labelBgBorderRadius,style:style$3,markerEnd,markerStart,interactionWidth})})}var BezierEdge=createBezierEdge({isInternal:!1}),BezierEdgeInternal=createBezierEdge({isInternal:!0});BezierEdge.displayName=`BezierEdge`,BezierEdgeInternal.displayName=`BezierEdgeInternal`;var builtinEdgeTypes={default:BezierEdgeInternal,straight:StraightEdgeInternal,step:StepEdgeInternal,smoothstep:SmoothStepEdgeInternal,simplebezier:SimpleBezierEdgeInternal},nullPosition={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},shiftX=(x$2,shift$1,position$1)=>position$1===Position.Left?x$2-shift$1:position$1===Position.Right?x$2+shift$1:x$2,shiftY=(y$2,shift$1,position$1)=>position$1===Position.Top?y$2-shift$1:position$1===Position.Bottom?y$2+shift$1:y$2,EdgeUpdaterClassName=`react-flow__edgeupdater`;function EdgeAnchor({position:position$1,centerX,centerY,radius=10,onMouseDown,onMouseEnter,onMouseOut,type}){return(0,import_jsx_runtime.jsx)(`circle`,{onMouseDown,onMouseEnter,onMouseOut,className:cc([EdgeUpdaterClassName,`${EdgeUpdaterClassName}-${type}`]),cx:shiftX(centerX,radius,position$1),cy:shiftY(centerY,radius,position$1),r:radius,stroke:`transparent`,fill:`transparent`})}function EdgeUpdateAnchors({isReconnectable,reconnectRadius,edge,sourceX,sourceY,targetX,targetY,sourcePosition,targetPosition,onReconnect,onReconnectStart,onReconnectEnd,setReconnecting,setUpdateHover}){let store=useStoreApi(),handleEdgeUpdater=(event,oppositeHandle)=>{if(event.button!==0)return;let{autoPanOnConnect,domNode,isValidConnection,connectionMode,connectionRadius,lib,onConnectStart,onConnectEnd,cancelConnection,nodeLookup,rfId:flowId,panBy:panBy$1,updateConnection}=store.getState(),isTarget=oppositeHandle.type===`target`;XYHandle.onPointerDown(event.nativeEvent,{autoPanOnConnect,connectionMode,connectionRadius,domNode,handleId:oppositeHandle.id,nodeId:oppositeHandle.nodeId,nodeLookup,isTarget,edgeUpdaterType:oppositeHandle.type,lib,flowId,cancelConnection,panBy:panBy$1,isValidConnection,onConnect:connection=>onReconnect?.(edge,connection),onConnectStart:(_event,params)=>{setReconnecting(!0),onReconnectStart?.(event,edge,oppositeHandle.type),onConnectStart?.(_event,params)},onConnectEnd,onReconnectEnd:(evt,connectionState)=>{setReconnecting(!1),onReconnectEnd?.(evt,edge,oppositeHandle.type,connectionState)},updateConnection,getTransform:()=>store.getState().transform,getFromHandle:()=>store.getState().connection.fromHandle,dragThreshold:store.getState().connectionDragThreshold,handleDomNode:event.currentTarget})},onReconnectSourceMouseDown=event=>handleEdgeUpdater(event,{nodeId:edge.target,id:edge.targetHandle??null,type:`target`}),onReconnectTargetMouseDown=event=>handleEdgeUpdater(event,{nodeId:edge.source,id:edge.sourceHandle??null,type:`source`}),onReconnectMouseEnter=()=>setUpdateHover(!0),onReconnectMouseOut=()=>setUpdateHover(!1);return(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(isReconnectable===!0||isReconnectable===`source`)&&(0,import_jsx_runtime.jsx)(EdgeAnchor,{position:sourcePosition,centerX:sourceX,centerY:sourceY,radius:reconnectRadius,onMouseDown:onReconnectSourceMouseDown,onMouseEnter:onReconnectMouseEnter,onMouseOut:onReconnectMouseOut,type:`source`}),(isReconnectable===!0||isReconnectable===`target`)&&(0,import_jsx_runtime.jsx)(EdgeAnchor,{position:targetPosition,centerX:targetX,centerY:targetY,radius:reconnectRadius,onMouseDown:onReconnectTargetMouseDown,onMouseEnter:onReconnectMouseEnter,onMouseOut:onReconnectMouseOut,type:`target`})]})}function EdgeWrapper({id:id$3,edgesFocusable,edgesReconnectable,elementsSelectable,onClick,onDoubleClick,onContextMenu,onMouseEnter,onMouseMove,onMouseLeave,reconnectRadius,onReconnect,onReconnectStart,onReconnectEnd,rfId,edgeTypes,noPanClassName,onError,disableKeyboardA11y}){let edge=useStore(s$3=>s$3.edgeLookup.get(id$3)),defaultEdgeOptions=useStore(s$3=>s$3.defaultEdgeOptions);edge=defaultEdgeOptions?{...defaultEdgeOptions,...edge}:edge;let edgeType=edge.type||`default`,EdgeComponent=edgeTypes?.[edgeType]||builtinEdgeTypes[edgeType];EdgeComponent===void 0&&(onError?.(`011`,errorMessages.error011(edgeType)),edgeType=`default`,EdgeComponent=edgeTypes?.default||builtinEdgeTypes.default);let isFocusable=!!(edge.focusable||edgesFocusable&&edge.focusable===void 0),isReconnectable=onReconnect!==void 0&&(edge.reconnectable||edgesReconnectable&&edge.reconnectable===void 0),isSelectable=!!(edge.selectable||elementsSelectable&&edge.selectable===void 0),edgeRef=(0,import_react.useRef)(null),[updateHover,setUpdateHover]=(0,import_react.useState)(!1),[reconnecting,setReconnecting]=(0,import_react.useState)(!1),store=useStoreApi(),{zIndex,sourceX,sourceY,targetX,targetY,sourcePosition,targetPosition}=useStore((0,import_react.useCallback)(store$1=>{let sourceNode=store$1.nodeLookup.get(edge.source),targetNode=store$1.nodeLookup.get(edge.target);if(!sourceNode||!targetNode)return{zIndex:edge.zIndex,...nullPosition};let edgePosition=getEdgePosition({id:id$3,sourceNode,targetNode,sourceHandle:edge.sourceHandle||null,targetHandle:edge.targetHandle||null,connectionMode:store$1.connectionMode,onError});return{zIndex:getElevatedEdgeZIndex({selected:edge.selected,zIndex:edge.zIndex,sourceNode,targetNode,elevateOnSelect:store$1.elevateEdgesOnSelect,zIndexMode:store$1.zIndexMode}),...edgePosition||nullPosition}},[edge.source,edge.target,edge.sourceHandle,edge.targetHandle,edge.selected,edge.zIndex]),shallow$1),markerStartUrl=(0,import_react.useMemo)(()=>edge.markerStart?`url('#${getMarkerId(edge.markerStart,rfId)}')`:void 0,[edge.markerStart,rfId]),markerEndUrl=(0,import_react.useMemo)(()=>edge.markerEnd?`url('#${getMarkerId(edge.markerEnd,rfId)}')`:void 0,[edge.markerEnd,rfId]);if(edge.hidden||sourceX===null||sourceY===null||targetX===null||targetY===null)return null;let onEdgeClick=event=>{let{addSelectedEdges,unselectNodesAndEdges,multiSelectionActive}=store.getState();isSelectable&&(store.setState({nodesSelectionActive:!1}),edge.selected&&multiSelectionActive?(unselectNodesAndEdges({nodes:[],edges:[edge]}),edgeRef.current?.blur()):addSelectedEdges([id$3])),onClick&&onClick(event,edge)},onEdgeDoubleClick=onDoubleClick?event=>{onDoubleClick(event,{...edge})}:void 0,onEdgeContextMenu=onContextMenu?event=>{onContextMenu(event,{...edge})}:void 0,onEdgeMouseEnter=onMouseEnter?event=>{onMouseEnter(event,{...edge})}:void 0,onEdgeMouseMove=onMouseMove?event=>{onMouseMove(event,{...edge})}:void 0,onEdgeMouseLeave=onMouseLeave?event=>{onMouseLeave(event,{...edge})}:void 0;return(0,import_jsx_runtime.jsx)(`svg`,{style:{zIndex},children:(0,import_jsx_runtime.jsxs)(`g`,{className:cc([`react-flow__edge`,`react-flow__edge-${edgeType}`,edge.className,noPanClassName,{selected:edge.selected,animated:edge.animated,inactive:!isSelectable&&!onClick,updating:updateHover,selectable:isSelectable}]),onClick:onEdgeClick,onDoubleClick:onEdgeDoubleClick,onContextMenu:onEdgeContextMenu,onMouseEnter:onEdgeMouseEnter,onMouseMove:onEdgeMouseMove,onMouseLeave:onEdgeMouseLeave,onKeyDown:isFocusable?event=>{if(!disableKeyboardA11y&&elementSelectionKeys.includes(event.key)&&isSelectable){let{unselectNodesAndEdges,addSelectedEdges}=store.getState();event.key===`Escape`?(edgeRef.current?.blur(),unselectNodesAndEdges({edges:[edge]})):addSelectedEdges([id$3])}}:void 0,tabIndex:isFocusable?0:void 0,role:edge.ariaRole??(isFocusable?`group`:`img`),"aria-roledescription":`edge`,"data-id":id$3,"data-testid":`rf__edge-${id$3}`,"aria-label":edge.ariaLabel===null?void 0:edge.ariaLabel||`Edge from ${edge.source} to ${edge.target}`,"aria-describedby":isFocusable?`${ARIA_EDGE_DESC_KEY}-${rfId}`:void 0,ref:edgeRef,...edge.domAttributes,children:[!reconnecting&&(0,import_jsx_runtime.jsx)(EdgeComponent,{id:id$3,source:edge.source,target:edge.target,type:edge.type,selected:edge.selected,animated:edge.animated,selectable:isSelectable,deletable:edge.deletable??!0,label:edge.label,labelStyle:edge.labelStyle,labelShowBg:edge.labelShowBg,labelBgStyle:edge.labelBgStyle,labelBgPadding:edge.labelBgPadding,labelBgBorderRadius:edge.labelBgBorderRadius,sourceX,sourceY,targetX,targetY,sourcePosition,targetPosition,data:edge.data,style:edge.style,sourceHandleId:edge.sourceHandle,targetHandleId:edge.targetHandle,markerStart:markerStartUrl,markerEnd:markerEndUrl,pathOptions:`pathOptions`in edge?edge.pathOptions:void 0,interactionWidth:edge.interactionWidth}),isReconnectable&&(0,import_jsx_runtime.jsx)(EdgeUpdateAnchors,{edge,isReconnectable,reconnectRadius,onReconnect,onReconnectStart,onReconnectEnd,sourceX,sourceY,targetX,targetY,sourcePosition,targetPosition,setUpdateHover,setReconnecting})]})})}var EdgeWrapper$1=(0,import_react.memo)(EdgeWrapper),selector$a=s$3=>({edgesFocusable:s$3.edgesFocusable,edgesReconnectable:s$3.edgesReconnectable,elementsSelectable:s$3.elementsSelectable,connectionMode:s$3.connectionMode,onError:s$3.onError});function EdgeRendererComponent({defaultMarkerColor,onlyRenderVisibleElements,rfId,edgeTypes,noPanClassName,onReconnect,onEdgeContextMenu,onEdgeMouseEnter,onEdgeMouseMove,onEdgeMouseLeave,onEdgeClick,reconnectRadius,onEdgeDoubleClick,onReconnectStart,onReconnectEnd,disableKeyboardA11y}){let{edgesFocusable,edgesReconnectable,elementsSelectable,onError}=useStore(selector$a,shallow$1),edgeIds=useVisibleEdgeIds(onlyRenderVisibleElements);return(0,import_jsx_runtime.jsxs)(`div`,{className:`react-flow__edges`,children:[(0,import_jsx_runtime.jsx)(MarkerDefinitions$1,{defaultColor:defaultMarkerColor,rfId}),edgeIds.map(id$3=>(0,import_jsx_runtime.jsx)(EdgeWrapper$1,{id:id$3,edgesFocusable,edgesReconnectable,elementsSelectable,noPanClassName,onReconnect,onContextMenu:onEdgeContextMenu,onMouseEnter:onEdgeMouseEnter,onMouseMove:onEdgeMouseMove,onMouseLeave:onEdgeMouseLeave,onClick:onEdgeClick,reconnectRadius,onDoubleClick:onEdgeDoubleClick,onReconnectStart,onReconnectEnd,rfId,onError,edgeTypes,disableKeyboardA11y},id$3))]})}EdgeRendererComponent.displayName=`EdgeRenderer`;var EdgeRenderer=(0,import_react.memo)(EdgeRendererComponent),selector$9=s$3=>`translate(${s$3.transform[0]}px,${s$3.transform[1]}px) scale(${s$3.transform[2]})`;function Viewport({children:children$1}){return(0,import_jsx_runtime.jsx)(`div`,{className:`react-flow__viewport xyflow__viewport react-flow__container`,style:{transform:useStore(selector$9)},children:children$1})}function useOnInitHandler(onInit){let rfInstance=useReactFlow(),isInitialized$1=(0,import_react.useRef)(!1);(0,import_react.useEffect)(()=>{!isInitialized$1.current&&rfInstance.viewportInitialized&&onInit&&(setTimeout(()=>onInit(rfInstance),1),isInitialized$1.current=!0)},[onInit,rfInstance.viewportInitialized])}var selector$8=state=>state.panZoom?.syncViewport;function useViewportSync(viewport){let syncViewport=useStore(selector$8),store=useStoreApi();return(0,import_react.useEffect)(()=>{viewport&&(syncViewport?.(viewport),store.setState({transform:[viewport.x,viewport.y,viewport.zoom]}))},[viewport,syncViewport]),null}function storeSelector$1(s$3){return s$3.connection.inProgress?{...s$3.connection,to:pointToRendererPoint(s$3.connection.to,s$3.transform)}:{...s$3.connection}}function getSelector$1(connectionSelector){return connectionSelector?s$3=>connectionSelector(storeSelector$1(s$3)):storeSelector$1}function useConnection(connectionSelector){return useStore(getSelector$1(connectionSelector),shallow$1)}var selector$7=s$3=>({nodesConnectable:s$3.nodesConnectable,isValid:s$3.connection.isValid,inProgress:s$3.connection.inProgress,width:s$3.width,height:s$3.height});function ConnectionLineWrapper({containerStyle:containerStyle$1,style:style$3,type,component}){let{nodesConnectable,width,height,isValid,inProgress}=useStore(selector$7,shallow$1);return width&&nodesConnectable&&inProgress?(0,import_jsx_runtime.jsx)(`svg`,{style:containerStyle$1,width,height,className:`react-flow__connectionline react-flow__container`,children:(0,import_jsx_runtime.jsx)(`g`,{className:cc([`react-flow__connection`,getConnectionStatus(isValid)]),children:(0,import_jsx_runtime.jsx)(ConnectionLine,{style:style$3,type,CustomComponent:component,isValid})})}):null}var ConnectionLine=({style:style$3,type=ConnectionLineType.Bezier,CustomComponent,isValid})=>{let{inProgress,from,fromNode,fromHandle,fromPosition,to,toNode,toHandle,toPosition,pointer}=useConnection();if(!inProgress)return;if(CustomComponent)return(0,import_jsx_runtime.jsx)(CustomComponent,{connectionLineType:type,connectionLineStyle:style$3,fromNode,fromHandle,fromX:from.x,fromY:from.y,toX:to.x,toY:to.y,fromPosition,toPosition,connectionStatus:getConnectionStatus(isValid),toNode,toHandle,pointer});let path=``,pathParams={sourceX:from.x,sourceY:from.y,sourcePosition:fromPosition,targetX:to.x,targetY:to.y,targetPosition:toPosition};switch(type){case ConnectionLineType.Bezier:[path]=getBezierPath(pathParams);break;case ConnectionLineType.SimpleBezier:[path]=getSimpleBezierPath(pathParams);break;case ConnectionLineType.Step:[path]=getSmoothStepPath({...pathParams,borderRadius:0});break;case ConnectionLineType.SmoothStep:[path]=getSmoothStepPath(pathParams);break;default:[path]=getStraightPath(pathParams)}return(0,import_jsx_runtime.jsx)(`path`,{d:path,fill:`none`,className:`react-flow__connection-path`,style:style$3})};ConnectionLine.displayName=`ConnectionLine`;var emptyTypes={};function useNodeOrEdgeTypesWarning(nodeOrEdgeTypes=emptyTypes){(0,import_react.useRef)(nodeOrEdgeTypes),useStoreApi(),(0,import_react.useEffect)(()=>{},[nodeOrEdgeTypes])}function useStylesLoadedWarning(){useStoreApi(),(0,import_react.useRef)(!1),(0,import_react.useEffect)(()=>{},[])}function GraphViewComponent({nodeTypes,edgeTypes,onInit,onNodeClick,onEdgeClick,onNodeDoubleClick,onEdgeDoubleClick,onNodeMouseEnter,onNodeMouseMove,onNodeMouseLeave,onNodeContextMenu,onSelectionContextMenu,onSelectionStart,onSelectionEnd,connectionLineType,connectionLineStyle,connectionLineComponent,connectionLineContainerStyle,selectionKeyCode,selectionOnDrag,selectionMode,multiSelectionKeyCode,panActivationKeyCode,zoomActivationKeyCode,deleteKeyCode,onlyRenderVisibleElements,elementsSelectable,defaultViewport:defaultViewport$1,translateExtent,minZoom,maxZoom,preventScrolling,defaultMarkerColor,zoomOnScroll,zoomOnPinch,panOnScroll,panOnScrollSpeed,panOnScrollMode,zoomOnDoubleClick,panOnDrag,onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneScroll,onPaneContextMenu,paneClickDistance,nodeClickDistance,onEdgeContextMenu,onEdgeMouseEnter,onEdgeMouseMove,onEdgeMouseLeave,reconnectRadius,onReconnect,onReconnectStart,onReconnectEnd,noDragClassName,noWheelClassName,noPanClassName,disableKeyboardA11y,nodeExtent,rfId,viewport,onViewportChange}){return useNodeOrEdgeTypesWarning(nodeTypes),useNodeOrEdgeTypesWarning(edgeTypes),useStylesLoadedWarning(),useOnInitHandler(onInit),useViewportSync(viewport),(0,import_jsx_runtime.jsx)(FlowRenderer,{onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneContextMenu,onPaneScroll,paneClickDistance,deleteKeyCode,selectionKeyCode,selectionOnDrag,selectionMode,onSelectionStart,onSelectionEnd,multiSelectionKeyCode,panActivationKeyCode,zoomActivationKeyCode,elementsSelectable,zoomOnScroll,zoomOnPinch,zoomOnDoubleClick,panOnScroll,panOnScrollSpeed,panOnScrollMode,panOnDrag,defaultViewport:defaultViewport$1,translateExtent,minZoom,maxZoom,onSelectionContextMenu,preventScrolling,noDragClassName,noWheelClassName,noPanClassName,disableKeyboardA11y,onViewportChange,isControlledViewport:!!viewport,children:(0,import_jsx_runtime.jsxs)(Viewport,{children:[(0,import_jsx_runtime.jsx)(EdgeRenderer,{edgeTypes,onEdgeClick,onEdgeDoubleClick,onReconnect,onReconnectStart,onReconnectEnd,onlyRenderVisibleElements,onEdgeContextMenu,onEdgeMouseEnter,onEdgeMouseMove,onEdgeMouseLeave,reconnectRadius,defaultMarkerColor,noPanClassName,disableKeyboardA11y,rfId}),(0,import_jsx_runtime.jsx)(ConnectionLineWrapper,{style:connectionLineStyle,type:connectionLineType,component:connectionLineComponent,containerStyle:connectionLineContainerStyle}),(0,import_jsx_runtime.jsx)(`div`,{className:`react-flow__edgelabel-renderer`}),(0,import_jsx_runtime.jsx)(NodeRenderer,{nodeTypes,onNodeClick,onNodeDoubleClick,onNodeMouseEnter,onNodeMouseMove,onNodeMouseLeave,onNodeContextMenu,nodeClickDistance,onlyRenderVisibleElements,noPanClassName,noDragClassName,disableKeyboardA11y,nodeExtent,rfId}),(0,import_jsx_runtime.jsx)(`div`,{className:`react-flow__viewport-portal`})]})})}GraphViewComponent.displayName=`GraphView`;var GraphView=(0,import_react.memo)(GraphViewComponent),getInitialState=({nodes,edges,defaultNodes,defaultEdges,width,height,fitView,fitViewOptions,minZoom=.5,maxZoom=2,nodeOrigin,nodeExtent,zIndexMode=`basic`}={})=>{let nodeLookup=new Map,parentLookup=new Map,connectionLookup=new Map,edgeLookup=new Map,storeEdges=defaultEdges??edges??[],storeNodes=defaultNodes??nodes??[],storeNodeOrigin=nodeOrigin??[0,0],storeNodeExtent=nodeExtent??infiniteExtent;updateConnectionLookup(connectionLookup,edgeLookup,storeEdges);let nodesInitialized=adoptUserNodes(storeNodes,nodeLookup,parentLookup,{nodeOrigin:storeNodeOrigin,nodeExtent:storeNodeExtent,zIndexMode}),transform$1=[0,0,1];if(fitView&&width&&height){let{x:x$2,y:y$2,zoom}=getViewportForBounds(getInternalNodesBounds(nodeLookup,{filter:node=>!!((node.width||node.initialWidth)&&(node.height||node.initialHeight))}),width,height,minZoom,maxZoom,fitViewOptions?.padding??.1);transform$1=[x$2,y$2,zoom]}return{rfId:`1`,width:width??0,height:height??0,transform:transform$1,nodes:storeNodes,nodesInitialized,nodeLookup,parentLookup,edges:storeEdges,edgeLookup,connectionLookup,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:defaultNodes!==void 0,hasDefaultEdges:defaultEdges!==void 0,panZoom:null,minZoom,maxZoom,translateExtent:infiniteExtent,nodeExtent:storeNodeExtent,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ConnectionMode.Strict,domNode:null,paneDragging:!1,noPanClassName:`nopan`,nodeOrigin:storeNodeOrigin,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:fitView??!1,fitViewOptions,fitViewResolver:null,connection:{...initialConnection},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:``,autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:devWarn,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:`react`,debug:!1,ariaLabelConfig:defaultAriaLabelConfig,zIndexMode,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},createStore$2=({nodes,edges,defaultNodes,defaultEdges,width,height,fitView,fitViewOptions,minZoom,maxZoom,nodeOrigin,nodeExtent,zIndexMode})=>createWithEqualityFn((set$2,get$3)=>{async function resolveFitView(){let{nodeLookup,panZoom,fitViewOptions:fitViewOptions$1,fitViewResolver,width:width$1,height:height$1,minZoom:minZoom$1,maxZoom:maxZoom$1}=get$3();panZoom&&(await fitViewport({nodes:nodeLookup,width:width$1,height:height$1,panZoom,minZoom:minZoom$1,maxZoom:maxZoom$1},fitViewOptions$1),fitViewResolver?.resolve(!0),set$2({fitViewResolver:null}))}return{...getInitialState({nodes,edges,width,height,fitView,fitViewOptions,minZoom,maxZoom,nodeOrigin,nodeExtent,defaultNodes,defaultEdges,zIndexMode}),setNodes:nodes$1=>{let{nodeLookup,parentLookup,nodeOrigin:nodeOrigin$1,elevateNodesOnSelect,fitViewQueued,zIndexMode:zIndexMode$1}=get$3(),nodesInitialized=adoptUserNodes(nodes$1,nodeLookup,parentLookup,{nodeOrigin:nodeOrigin$1,nodeExtent,elevateNodesOnSelect,checkEquality:!0,zIndexMode:zIndexMode$1});fitViewQueued&&nodesInitialized?(resolveFitView(),set$2({nodes:nodes$1,nodesInitialized,fitViewQueued:!1,fitViewOptions:void 0})):set$2({nodes:nodes$1,nodesInitialized})},setEdges:edges$1=>{let{connectionLookup,edgeLookup}=get$3();updateConnectionLookup(connectionLookup,edgeLookup,edges$1),set$2({edges:edges$1})},setDefaultNodesAndEdges:(nodes$1,edges$1)=>{if(nodes$1){let{setNodes}=get$3();setNodes(nodes$1),set$2({hasDefaultNodes:!0})}if(edges$1){let{setEdges}=get$3();setEdges(edges$1),set$2({hasDefaultEdges:!0})}},updateNodeInternals:updates=>{let{triggerNodeChanges,nodeLookup,parentLookup,domNode,nodeOrigin:nodeOrigin$1,nodeExtent:nodeExtent$1,debug,fitViewQueued,zIndexMode:zIndexMode$1}=get$3(),{changes,updatedInternals}=updateNodeInternals(updates,nodeLookup,parentLookup,domNode,nodeOrigin$1,nodeExtent$1,zIndexMode$1);updatedInternals&&(updateAbsolutePositions(nodeLookup,parentLookup,{nodeOrigin:nodeOrigin$1,nodeExtent:nodeExtent$1,zIndexMode:zIndexMode$1}),fitViewQueued?(resolveFitView(),set$2({fitViewQueued:!1,fitViewOptions:void 0})):set$2({}),changes?.length>0&&(debug&&console.log(`React Flow: trigger node changes`,changes),triggerNodeChanges?.(changes)))},updateNodePositions:(nodeDragItems,dragging=!1)=>{let parentExpandChildren=[],changes=[],{nodeLookup,triggerNodeChanges,connection,updateConnection,onNodesChangeMiddlewareMap}=get$3();for(let[id$3,dragItem]of nodeDragItems){let node=nodeLookup.get(id$3),expandParent=!!(node?.expandParent&&node?.parentId&&dragItem?.position),change={id:id$3,type:`position`,position:expandParent?{x:Math.max(0,dragItem.position.x),y:Math.max(0,dragItem.position.y)}:dragItem.position,dragging};if(node&&connection.inProgress&&connection.fromNode.id===node.id){let updatedFrom=getHandlePosition(node,connection.fromHandle,Position.Left,!0);updateConnection({...connection,from:updatedFrom})}expandParent&&node.parentId&&parentExpandChildren.push({id:id$3,parentId:node.parentId,rect:{...dragItem.internals.positionAbsolute,width:dragItem.measured.width??0,height:dragItem.measured.height??0}}),changes.push(change)}if(parentExpandChildren.length>0){let{parentLookup,nodeOrigin:nodeOrigin$1}=get$3(),parentExpandChanges=handleExpandParent(parentExpandChildren,nodeLookup,parentLookup,nodeOrigin$1);changes.push(...parentExpandChanges)}for(let middleware of onNodesChangeMiddlewareMap.values())changes=middleware(changes);triggerNodeChanges(changes)},triggerNodeChanges:changes=>{let{onNodesChange,setNodes,nodes:nodes$1,hasDefaultNodes,debug}=get$3();changes?.length&&(hasDefaultNodes&&setNodes(applyNodeChanges(changes,nodes$1)),debug&&console.log(`React Flow: trigger node changes`,changes),onNodesChange?.(changes))},triggerEdgeChanges:changes=>{let{onEdgesChange,setEdges,edges:edges$1,hasDefaultEdges,debug}=get$3();changes?.length&&(hasDefaultEdges&&setEdges(applyEdgeChanges(changes,edges$1)),debug&&console.log(`React Flow: trigger edge changes`,changes),onEdgesChange?.(changes))},addSelectedNodes:selectedNodeIds=>{let{multiSelectionActive,edgeLookup,nodeLookup,triggerNodeChanges,triggerEdgeChanges}=get$3();if(multiSelectionActive){triggerNodeChanges(selectedNodeIds.map(nodeId=>createSelectionChange(nodeId,!0)));return}triggerNodeChanges(getSelectionChanges(nodeLookup,new Set([...selectedNodeIds]),!0)),triggerEdgeChanges(getSelectionChanges(edgeLookup))},addSelectedEdges:selectedEdgeIds=>{let{multiSelectionActive,edgeLookup,nodeLookup,triggerNodeChanges,triggerEdgeChanges}=get$3();if(multiSelectionActive){triggerEdgeChanges(selectedEdgeIds.map(edgeId=>createSelectionChange(edgeId,!0)));return}triggerEdgeChanges(getSelectionChanges(edgeLookup,new Set([...selectedEdgeIds]))),triggerNodeChanges(getSelectionChanges(nodeLookup,new Set,!0))},unselectNodesAndEdges:({nodes:nodes$1,edges:edges$1}={})=>{let{edges:storeEdges,nodes:storeNodes,nodeLookup,triggerNodeChanges,triggerEdgeChanges}=get$3(),nodesToUnselect=nodes$1||storeNodes,edgesToUnselect=edges$1||storeEdges,nodeChanges=nodesToUnselect.map(n$4=>{let internalNode=nodeLookup.get(n$4.id);return internalNode&&(internalNode.selected=!1),createSelectionChange(n$4.id,!1)}),edgeChanges=edgesToUnselect.map(edge=>createSelectionChange(edge.id,!1));triggerNodeChanges(nodeChanges),triggerEdgeChanges(edgeChanges)},setMinZoom:minZoom$1=>{let{panZoom,maxZoom:maxZoom$1}=get$3();panZoom?.setScaleExtent([minZoom$1,maxZoom$1]),set$2({minZoom:minZoom$1})},setMaxZoom:maxZoom$1=>{let{panZoom,minZoom:minZoom$1}=get$3();panZoom?.setScaleExtent([minZoom$1,maxZoom$1]),set$2({maxZoom:maxZoom$1})},setTranslateExtent:translateExtent=>{get$3().panZoom?.setTranslateExtent(translateExtent),set$2({translateExtent})},resetSelectedElements:()=>{let{edges:edges$1,nodes:nodes$1,triggerNodeChanges,triggerEdgeChanges,elementsSelectable}=get$3();if(!elementsSelectable)return;let nodeChanges=nodes$1.reduce((res,node)=>node.selected?[...res,createSelectionChange(node.id,!1)]:res,[]),edgeChanges=edges$1.reduce((res,edge)=>edge.selected?[...res,createSelectionChange(edge.id,!1)]:res,[]);triggerNodeChanges(nodeChanges),triggerEdgeChanges(edgeChanges)},setNodeExtent:nextNodeExtent=>{let{nodes:nodes$1,nodeLookup,parentLookup,nodeOrigin:nodeOrigin$1,elevateNodesOnSelect,nodeExtent:nodeExtent$1,zIndexMode:zIndexMode$1}=get$3();nextNodeExtent[0][0]===nodeExtent$1[0][0]&&nextNodeExtent[0][1]===nodeExtent$1[0][1]&&nextNodeExtent[1][0]===nodeExtent$1[1][0]&&nextNodeExtent[1][1]===nodeExtent$1[1][1]||(adoptUserNodes(nodes$1,nodeLookup,parentLookup,{nodeOrigin:nodeOrigin$1,nodeExtent:nextNodeExtent,elevateNodesOnSelect,checkEquality:!1,zIndexMode:zIndexMode$1}),set$2({nodeExtent:nextNodeExtent}))},panBy:delta=>{let{transform:transform$1,width:width$1,height:height$1,panZoom,translateExtent}=get$3();return panBy({delta,panZoom,transform:transform$1,translateExtent,width:width$1,height:height$1})},setCenter:async(x$2,y$2,options$1)=>{let{width:width$1,height:height$1,maxZoom:maxZoom$1,panZoom}=get$3();if(!panZoom)return Promise.resolve(!1);let nextZoom=options$1?.zoom===void 0?maxZoom$1:options$1.zoom;return await panZoom.setViewport({x:width$1/2-x$2*nextZoom,y:height$1/2-y$2*nextZoom,zoom:nextZoom},{duration:options$1?.duration,ease:options$1?.ease,interpolate:options$1?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{set$2({connection:{...initialConnection}})},updateConnection:connection=>{set$2({connection})},reset:()=>set$2({...getInitialState()})}},Object.is);function ReactFlowProvider({initialNodes:nodes,initialEdges:edges,defaultNodes,defaultEdges,initialWidth:width,initialHeight:height,initialMinZoom:minZoom,initialMaxZoom:maxZoom,initialFitViewOptions:fitViewOptions,fitView,nodeOrigin,nodeExtent,zIndexMode,children:children$1}){let[store]=(0,import_react.useState)(()=>createStore$2({nodes,edges,defaultNodes,defaultEdges,width,height,fitView,minZoom,maxZoom,fitViewOptions,nodeOrigin,nodeExtent,zIndexMode}));return(0,import_jsx_runtime.jsx)(Provider$1,{value:store,children:(0,import_jsx_runtime.jsx)(BatchProvider,{children:children$1})})}function Wrapper({children:children$1,nodes,edges,defaultNodes,defaultEdges,width,height,fitView,fitViewOptions,minZoom,maxZoom,nodeOrigin,nodeExtent,zIndexMode}){return(0,import_react.useContext)(StoreContext$1)?(0,import_jsx_runtime.jsx)(import_jsx_runtime.Fragment,{children:children$1}):(0,import_jsx_runtime.jsx)(ReactFlowProvider,{initialNodes:nodes,initialEdges:edges,defaultNodes,defaultEdges,initialWidth:width,initialHeight:height,fitView,initialFitViewOptions:fitViewOptions,initialMinZoom:minZoom,initialMaxZoom:maxZoom,nodeOrigin,nodeExtent,zIndexMode,children:children$1})}var wrapperStyle={width:`100%`,height:`100%`,overflow:`hidden`,position:`relative`,zIndex:0};function ReactFlow({nodes,edges,defaultNodes,defaultEdges,className,nodeTypes,edgeTypes,onNodeClick,onEdgeClick,onInit,onMove,onMoveStart,onMoveEnd,onConnect,onConnectStart,onConnectEnd,onClickConnectStart,onClickConnectEnd,onNodeMouseEnter,onNodeMouseMove,onNodeMouseLeave,onNodeContextMenu,onNodeDoubleClick,onNodeDragStart,onNodeDrag,onNodeDragStop,onNodesDelete,onEdgesDelete,onDelete,onSelectionChange,onSelectionDragStart,onSelectionDrag,onSelectionDragStop,onSelectionContextMenu,onSelectionStart,onSelectionEnd,onBeforeDelete,connectionMode,connectionLineType=ConnectionLineType.Bezier,connectionLineStyle,connectionLineComponent,connectionLineContainerStyle,deleteKeyCode=`Backspace`,selectionKeyCode=`Shift`,selectionOnDrag=!1,selectionMode=SelectionMode.Full,panActivationKeyCode=`Space`,multiSelectionKeyCode=isMacOs()?`Meta`:`Control`,zoomActivationKeyCode=isMacOs()?`Meta`:`Control`,snapToGrid,snapGrid,onlyRenderVisibleElements=!1,selectNodesOnDrag,nodesDraggable,autoPanOnNodeFocus,nodesConnectable,nodesFocusable,nodeOrigin=defaultNodeOrigin,edgesFocusable,edgesReconnectable,elementsSelectable=!0,defaultViewport:defaultViewport$1=defaultViewport,minZoom=.5,maxZoom=2,translateExtent=infiniteExtent,preventScrolling=!0,nodeExtent,defaultMarkerColor=`#b1b1b7`,zoomOnScroll=!0,zoomOnPinch=!0,panOnScroll=!1,panOnScrollSpeed=.5,panOnScrollMode=PanOnScrollMode.Free,zoomOnDoubleClick=!0,panOnDrag=!0,onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneScroll,onPaneContextMenu,paneClickDistance=1,nodeClickDistance=0,children:children$1,onReconnect,onReconnectStart,onReconnectEnd,onEdgeContextMenu,onEdgeDoubleClick,onEdgeMouseEnter,onEdgeMouseMove,onEdgeMouseLeave,reconnectRadius=10,onNodesChange,onEdgesChange,noDragClassName=`nodrag`,noWheelClassName=`nowheel`,noPanClassName=`nopan`,fitView,fitViewOptions,connectOnClick,attributionPosition,proOptions,defaultEdgeOptions,elevateNodesOnSelect=!0,elevateEdgesOnSelect=!1,disableKeyboardA11y=!1,autoPanOnConnect,autoPanOnNodeDrag,autoPanSpeed,connectionRadius,isValidConnection,onError,style:style$3,id:id$3,nodeDragThreshold,connectionDragThreshold,viewport,onViewportChange,width,height,colorMode=`light`,debug,onScroll,ariaLabelConfig,zIndexMode=`basic`,...rest},ref){let rfId=id$3||`1`,colorModeClassName=useColorModeClass(colorMode),wrapperOnScroll=(0,import_react.useCallback)(e$4=>{e$4.currentTarget.scrollTo({top:0,left:0,behavior:`instant`}),onScroll?.(e$4)},[onScroll]);return(0,import_jsx_runtime.jsx)(`div`,{"data-testid":`rf__wrapper`,...rest,onScroll:wrapperOnScroll,style:{...style$3,...wrapperStyle},ref,className:cc([`react-flow`,className,colorModeClassName]),id:id$3,role:`application`,children:(0,import_jsx_runtime.jsxs)(Wrapper,{nodes,edges,width,height,fitView,fitViewOptions,minZoom,maxZoom,nodeOrigin,nodeExtent,zIndexMode,children:[(0,import_jsx_runtime.jsx)(GraphView,{onInit,onNodeClick,onEdgeClick,onNodeMouseEnter,onNodeMouseMove,onNodeMouseLeave,onNodeContextMenu,onNodeDoubleClick,nodeTypes,edgeTypes,connectionLineType,connectionLineStyle,connectionLineComponent,connectionLineContainerStyle,selectionKeyCode,selectionOnDrag,selectionMode,deleteKeyCode,multiSelectionKeyCode,panActivationKeyCode,zoomActivationKeyCode,onlyRenderVisibleElements,defaultViewport:defaultViewport$1,translateExtent,minZoom,maxZoom,preventScrolling,zoomOnScroll,zoomOnPinch,zoomOnDoubleClick,panOnScroll,panOnScrollSpeed,panOnScrollMode,panOnDrag,onPaneClick,onPaneMouseEnter,onPaneMouseMove,onPaneMouseLeave,onPaneScroll,onPaneContextMenu,paneClickDistance,nodeClickDistance,onSelectionContextMenu,onSelectionStart,onSelectionEnd,onReconnect,onReconnectStart,onReconnectEnd,onEdgeContextMenu,onEdgeDoubleClick,onEdgeMouseEnter,onEdgeMouseMove,onEdgeMouseLeave,reconnectRadius,defaultMarkerColor,noDragClassName,noWheelClassName,noPanClassName,rfId,disableKeyboardA11y,nodeExtent,viewport,onViewportChange}),(0,import_jsx_runtime.jsx)(StoreUpdater,{nodes,edges,defaultNodes,defaultEdges,onConnect,onConnectStart,onConnectEnd,onClickConnectStart,onClickConnectEnd,nodesDraggable,autoPanOnNodeFocus,nodesConnectable,nodesFocusable,edgesFocusable,edgesReconnectable,elementsSelectable,elevateNodesOnSelect,elevateEdgesOnSelect,minZoom,maxZoom,nodeExtent,onNodesChange,onEdgesChange,snapToGrid,snapGrid,connectionMode,translateExtent,connectOnClick,defaultEdgeOptions,fitView,fitViewOptions,onNodesDelete,onEdgesDelete,onDelete,onNodeDragStart,onNodeDrag,onNodeDragStop,onSelectionDrag,onSelectionDragStart,onSelectionDragStop,onMove,onMoveStart,onMoveEnd,noPanClassName,nodeOrigin,rfId,autoPanOnConnect,autoPanOnNodeDrag,autoPanSpeed,onError,connectionRadius,isValidConnection,selectNodesOnDrag,nodeDragThreshold,connectionDragThreshold,onBeforeDelete,debug,ariaLabelConfig,zIndexMode}),(0,import_jsx_runtime.jsx)(SelectionListener,{onSelectionChange}),children$1,(0,import_jsx_runtime.jsx)(Attribution,{proOptions,position:attributionPosition}),(0,import_jsx_runtime.jsx)(A11yDescriptions,{rfId,disableKeyboardA11y})]})})}var index=fixedForwardRef(ReactFlow),error014=errorMessages.error014();function LinePattern({dimensions,lineWidth,variant,className}){return(0,import_jsx_runtime.jsx)(`path`,{strokeWidth:lineWidth,d:`M${dimensions[0]/2} 0 V${dimensions[1]} M0 ${dimensions[1]/2} H${dimensions[0]}`,className:cc([`react-flow__background-pattern`,variant,className])})}function DotPattern({radius,className}){return(0,import_jsx_runtime.jsx)(`circle`,{cx:radius,cy:radius,r:radius,className:cc([`react-flow__background-pattern`,`dots`,className])})}var BackgroundVariant;(function(BackgroundVariant$1){BackgroundVariant$1.Lines=`lines`,BackgroundVariant$1.Dots=`dots`,BackgroundVariant$1.Cross=`cross`})(BackgroundVariant||={});var defaultSize={[BackgroundVariant.Dots]:1,[BackgroundVariant.Lines]:1,[BackgroundVariant.Cross]:6},selector$3=s$3=>({transform:s$3.transform,patternId:`pattern-${s$3.rfId}`});function BackgroundComponent({id:id$3,variant=BackgroundVariant.Dots,gap=20,size,lineWidth=1,offset:offset$1=0,color:color$2,bgColor,style:style$3,className,patternClassName}){let ref=(0,import_react.useRef)(null),{transform:transform$1,patternId}=useStore(selector$3,shallow$1),patternSize=size||defaultSize[variant],isDots=variant===BackgroundVariant.Dots,isCross=variant===BackgroundVariant.Cross,gapXY=Array.isArray(gap)?gap:[gap,gap],scaledGap=[gapXY[0]*transform$1[2]||1,gapXY[1]*transform$1[2]||1],scaledSize=patternSize*transform$1[2],offsetXY=Array.isArray(offset$1)?offset$1:[offset$1,offset$1],patternDimensions=isCross?[scaledSize,scaledSize]:scaledGap,scaledOffset=[offsetXY[0]*transform$1[2]||1+patternDimensions[0]/2,offsetXY[1]*transform$1[2]||1+patternDimensions[1]/2],_patternId=`${patternId}${id$3||``}`;return(0,import_jsx_runtime.jsxs)(`svg`,{className:cc([`react-flow__background`,className]),style:{...style$3,...containerStyle,"--xy-background-color-props":bgColor,"--xy-background-pattern-color-props":color$2},ref,"data-testid":`rf__background`,children:[(0,import_jsx_runtime.jsx)(`pattern`,{id:_patternId,x:transform$1[0]%scaledGap[0],y:transform$1[1]%scaledGap[1],width:scaledGap[0],height:scaledGap[1],patternUnits:`userSpaceOnUse`,patternTransform:`translate(-${scaledOffset[0]},-${scaledOffset[1]})`,children:isDots?(0,import_jsx_runtime.jsx)(DotPattern,{radius:scaledSize/2,className:patternClassName}):(0,import_jsx_runtime.jsx)(LinePattern,{dimensions:patternDimensions,lineWidth,variant,className:patternClassName})}),(0,import_jsx_runtime.jsx)(`rect`,{x:`0`,y:`0`,width:`100%`,height:`100%`,fill:`url(#${_patternId})`})]})}BackgroundComponent.displayName=`Background`;var Background=(0,import_react.memo)(BackgroundComponent);function PlusIcon(){return(0,import_jsx_runtime.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 32`,children:(0,import_jsx_runtime.jsx)(`path`,{d:`M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z`})})}function MinusIcon(){return(0,import_jsx_runtime.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 5`,children:(0,import_jsx_runtime.jsx)(`path`,{d:`M0 0h32v4.2H0z`})})}function FitViewIcon(){return(0,import_jsx_runtime.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 30`,children:(0,import_jsx_runtime.jsx)(`path`,{d:`M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z`})})}function LockIcon(){return(0,import_jsx_runtime.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 25 32`,children:(0,import_jsx_runtime.jsx)(`path`,{d:`M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z`})})}function UnlockIcon(){return(0,import_jsx_runtime.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 25 32`,children:(0,import_jsx_runtime.jsx)(`path`,{d:`M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z`})})}function ControlButton({children:children$1,className,...rest}){return(0,import_jsx_runtime.jsx)(`button`,{type:`button`,className:cc([`react-flow__controls-button`,className]),...rest,children:children$1})}var selector$2=s$3=>({isInteractive:s$3.nodesDraggable||s$3.nodesConnectable||s$3.elementsSelectable,minZoomReached:s$3.transform[2]<=s$3.minZoom,maxZoomReached:s$3.transform[2]>=s$3.maxZoom,ariaLabelConfig:s$3.ariaLabelConfig});function ControlsComponent({style:style$3,showZoom=!0,showFitView=!0,showInteractive=!0,fitViewOptions,onZoomIn,onZoomOut,onFitView,onInteractiveChange,className,children:children$1,position:position$1=`bottom-left`,orientation=`vertical`,"aria-label":ariaLabel}){let store=useStoreApi(),{isInteractive,minZoomReached,maxZoomReached,ariaLabelConfig}=useStore(selector$2,shallow$1),{zoomIn,zoomOut,fitView}=useReactFlow(),onZoomInHandler=()=>{zoomIn(),onZoomIn?.()},onZoomOutHandler=()=>{zoomOut(),onZoomOut?.()},onFitViewHandler=()=>{fitView(fitViewOptions),onFitView?.()},onToggleInteractivity=()=>{store.setState({nodesDraggable:!isInteractive,nodesConnectable:!isInteractive,elementsSelectable:!isInteractive}),onInteractiveChange?.(!isInteractive)};return(0,import_jsx_runtime.jsxs)(Panel,{className:cc([`react-flow__controls`,orientation===`horizontal`?`horizontal`:`vertical`,className]),position:position$1,style:style$3,"data-testid":`rf__controls`,"aria-label":ariaLabel??ariaLabelConfig[`controls.ariaLabel`],children:[showZoom&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(ControlButton,{onClick:onZoomInHandler,className:`react-flow__controls-zoomin`,title:ariaLabelConfig[`controls.zoomIn.ariaLabel`],"aria-label":ariaLabelConfig[`controls.zoomIn.ariaLabel`],disabled:maxZoomReached,children:(0,import_jsx_runtime.jsx)(PlusIcon,{})}),(0,import_jsx_runtime.jsx)(ControlButton,{onClick:onZoomOutHandler,className:`react-flow__controls-zoomout`,title:ariaLabelConfig[`controls.zoomOut.ariaLabel`],"aria-label":ariaLabelConfig[`controls.zoomOut.ariaLabel`],disabled:minZoomReached,children:(0,import_jsx_runtime.jsx)(MinusIcon,{})})]}),showFitView&&(0,import_jsx_runtime.jsx)(ControlButton,{className:`react-flow__controls-fitview`,onClick:onFitViewHandler,title:ariaLabelConfig[`controls.fitView.ariaLabel`],"aria-label":ariaLabelConfig[`controls.fitView.ariaLabel`],children:(0,import_jsx_runtime.jsx)(FitViewIcon,{})}),showInteractive&&(0,import_jsx_runtime.jsx)(ControlButton,{className:`react-flow__controls-interactive`,onClick:onToggleInteractivity,title:ariaLabelConfig[`controls.interactive.ariaLabel`],"aria-label":ariaLabelConfig[`controls.interactive.ariaLabel`],children:isInteractive?(0,import_jsx_runtime.jsx)(UnlockIcon,{}):(0,import_jsx_runtime.jsx)(LockIcon,{})}),children$1]})}ControlsComponent.displayName=`Controls`;var Controls=(0,import_react.memo)(ControlsComponent);function MiniMapNodeComponent({id:id$3,x:x$2,y:y$2,width,height,style:style$3,color:color$2,strokeColor,strokeWidth,className,borderRadius,shapeRendering,selected:selected$1,onClick}){let{background,backgroundColor}=style$3||{},fill=color$2||background||backgroundColor;return(0,import_jsx_runtime.jsx)(`rect`,{className:cc([`react-flow__minimap-node`,{selected:selected$1},className]),x:x$2,y:y$2,rx:borderRadius,ry:borderRadius,width,height,style:{fill,stroke:strokeColor,strokeWidth},shapeRendering,onClick:onClick?event=>onClick(event,id$3):void 0})}var MiniMapNode=(0,import_react.memo)(MiniMapNodeComponent),selectorNodeIds=s$3=>s$3.nodes.map(node=>node.id),getAttrFunction=func=>func instanceof Function?func:()=>func;function MiniMapNodes({nodeStrokeColor,nodeColor,nodeClassName=``,nodeBorderRadius=5,nodeStrokeWidth,nodeComponent:NodeComponent=MiniMapNode,onClick}){let nodeIds=useStore(selectorNodeIds,shallow$1),nodeColorFunc=getAttrFunction(nodeColor),nodeStrokeColorFunc=getAttrFunction(nodeStrokeColor),nodeClassNameFunc=getAttrFunction(nodeClassName),shapeRendering=typeof window>`u`||window.chrome?`crispEdges`:`geometricPrecision`;return(0,import_jsx_runtime.jsx)(import_jsx_runtime.Fragment,{children:nodeIds.map(nodeId=>(0,import_jsx_runtime.jsx)(NodeComponentWrapper,{id:nodeId,nodeColorFunc,nodeStrokeColorFunc,nodeClassNameFunc,nodeBorderRadius,nodeStrokeWidth,NodeComponent,onClick,shapeRendering},nodeId))})}function NodeComponentWrapperInner({id:id$3,nodeColorFunc,nodeStrokeColorFunc,nodeClassNameFunc,nodeBorderRadius,nodeStrokeWidth,shapeRendering,NodeComponent,onClick}){let{node,x:x$2,y:y$2,width,height}=useStore(s$3=>{let{internals}=s$3.nodeLookup.get(id$3),node$1=internals.userNode,{x:x$3,y:y$3}=internals.positionAbsolute,{width:width$1,height:height$1}=getNodeDimensions(node$1);return{node:node$1,x:x$3,y:y$3,width:width$1,height:height$1}},shallow$1);return!node||node.hidden||!nodeHasDimensions(node)?null:(0,import_jsx_runtime.jsx)(NodeComponent,{x:x$2,y:y$2,width,height,style:node.style,selected:!!node.selected,className:nodeClassNameFunc(node),color:nodeColorFunc(node),borderRadius:nodeBorderRadius,strokeColor:nodeStrokeColorFunc(node),strokeWidth:nodeStrokeWidth,shapeRendering,onClick,id:node.id})}var NodeComponentWrapper=(0,import_react.memo)(NodeComponentWrapperInner),MiniMapNodes$1=(0,import_react.memo)(MiniMapNodes),defaultWidth=200,defaultHeight=150,filterHidden=node=>!node.hidden,selector$1=s$3=>{let viewBB={x:-s$3.transform[0]/s$3.transform[2],y:-s$3.transform[1]/s$3.transform[2],width:s$3.width/s$3.transform[2],height:s$3.height/s$3.transform[2]};return{viewBB,boundingRect:s$3.nodeLookup.size>0?getBoundsOfRects(getInternalNodesBounds(s$3.nodeLookup,{filter:filterHidden}),viewBB):viewBB,rfId:s$3.rfId,panZoom:s$3.panZoom,translateExtent:s$3.translateExtent,flowWidth:s$3.width,flowHeight:s$3.height,ariaLabelConfig:s$3.ariaLabelConfig}},ARIA_LABEL_KEY=`react-flow__minimap-desc`;function MiniMapComponent({style:style$3,className,nodeStrokeColor,nodeColor,nodeClassName=``,nodeBorderRadius=5,nodeStrokeWidth,nodeComponent,bgColor,maskColor,maskStrokeColor,maskStrokeWidth,position:position$1=`bottom-right`,onClick,onNodeClick,pannable=!1,zoomable=!1,ariaLabel,inversePan,zoomStep=1,offsetScale=5}){let store=useStoreApi(),svg=(0,import_react.useRef)(null),{boundingRect,viewBB,rfId,panZoom,translateExtent,flowWidth,flowHeight,ariaLabelConfig}=useStore(selector$1,shallow$1),elementWidth=style$3?.width??defaultWidth,elementHeight=style$3?.height??defaultHeight,scaledWidth=boundingRect.width/elementWidth,scaledHeight=boundingRect.height/elementHeight,viewScale=Math.max(scaledWidth,scaledHeight),viewWidth=viewScale*elementWidth,viewHeight=viewScale*elementHeight,offset$1=offsetScale*viewScale,x$2=boundingRect.x-(viewWidth-boundingRect.width)/2-offset$1,y$2=boundingRect.y-(viewHeight-boundingRect.height)/2-offset$1,width=viewWidth+offset$1*2,height=viewHeight+offset$1*2,labelledBy=`${ARIA_LABEL_KEY}-${rfId}`,viewScaleRef=(0,import_react.useRef)(0),minimapInstance=(0,import_react.useRef)();viewScaleRef.current=viewScale,(0,import_react.useEffect)(()=>{if(svg.current&&panZoom)return minimapInstance.current=XYMinimap({domNode:svg.current,panZoom,getTransform:()=>store.getState().transform,getViewScale:()=>viewScaleRef.current}),()=>{minimapInstance.current?.destroy()}},[panZoom]),(0,import_react.useEffect)(()=>{minimapInstance.current?.update({translateExtent,width:flowWidth,height:flowHeight,inversePan,pannable,zoomStep,zoomable})},[pannable,zoomable,inversePan,zoomStep,translateExtent,flowWidth,flowHeight]);let onSvgClick=onClick?event=>{let[x$3,y$3]=minimapInstance.current?.pointer(event)||[0,0];onClick(event,{x:x$3,y:y$3})}:void 0,onSvgNodeClick=onNodeClick?(0,import_react.useCallback)((event,nodeId)=>{let node=store.getState().nodeLookup.get(nodeId).internals.userNode;onNodeClick(event,node)},[]):void 0,_ariaLabel=ariaLabel??ariaLabelConfig[`minimap.ariaLabel`];return(0,import_jsx_runtime.jsx)(Panel,{position:position$1,style:{...style$3,"--xy-minimap-background-color-props":typeof bgColor==`string`?bgColor:void 0,"--xy-minimap-mask-background-color-props":typeof maskColor==`string`?maskColor:void 0,"--xy-minimap-mask-stroke-color-props":typeof maskStrokeColor==`string`?maskStrokeColor:void 0,"--xy-minimap-mask-stroke-width-props":typeof maskStrokeWidth==`number`?maskStrokeWidth*viewScale:void 0,"--xy-minimap-node-background-color-props":typeof nodeColor==`string`?nodeColor:void 0,"--xy-minimap-node-stroke-color-props":typeof nodeStrokeColor==`string`?nodeStrokeColor:void 0,"--xy-minimap-node-stroke-width-props":typeof nodeStrokeWidth==`number`?nodeStrokeWidth:void 0},className:cc([`react-flow__minimap`,className]),"data-testid":`rf__minimap`,children:(0,import_jsx_runtime.jsxs)(`svg`,{width:elementWidth,height:elementHeight,viewBox:`${x$2} ${y$2} ${width} ${height}`,className:`react-flow__minimap-svg`,role:`img`,"aria-labelledby":labelledBy,ref:svg,onClick:onSvgClick,children:[_ariaLabel&&(0,import_jsx_runtime.jsx)(`title`,{id:labelledBy,children:_ariaLabel}),(0,import_jsx_runtime.jsx)(MiniMapNodes$1,{onClick:onSvgNodeClick,nodeColor,nodeStrokeColor,nodeBorderRadius,nodeClassName,nodeStrokeWidth,nodeComponent}),(0,import_jsx_runtime.jsx)(`path`,{className:`react-flow__minimap-mask`,d:`M${x$2-offset$1},${y$2-offset$1}h${width+offset$1*2}v${height+offset$1*2}h${-width-offset$1*2}z
        M${viewBB.x},${viewBB.y}h${viewBB.width}v${viewBB.height}h${-viewBB.width}z`,fillRule:`evenodd`,pointerEvents:`none`})]})})}MiniMapComponent.displayName=`MiniMap`;var MiniMap=(0,import_react.memo)(MiniMapComponent),scaleSelector=calculateScale=>store=>calculateScale?`${Math.max(1/store.transform[2],1)}`:void 0,defaultPositions={[ResizeControlVariant.Line]:`right`,[ResizeControlVariant.Handle]:`bottom-right`};function ResizeControl({nodeId,position:position$1,variant=ResizeControlVariant.Handle,className,style:style$3=void 0,children:children$1,color:color$2,minWidth=10,minHeight=10,maxWidth=Number.MAX_VALUE,maxHeight=Number.MAX_VALUE,keepAspectRatio=!1,resizeDirection,autoScale=!0,shouldResize,onResizeStart,onResize,onResizeEnd}){let contextNodeId=useNodeId(),id$3=typeof nodeId==`string`?nodeId:contextNodeId,store=useStoreApi(),resizeControlRef=(0,import_react.useRef)(null),isHandleControl=variant===ResizeControlVariant.Handle,scale$1=useStore((0,import_react.useCallback)(scaleSelector(isHandleControl&&autoScale),[isHandleControl,autoScale]),shallow$1),resizer=(0,import_react.useRef)(null),controlPosition=position$1??defaultPositions[variant];return(0,import_react.useEffect)(()=>{if(!(!resizeControlRef.current||!id$3))return resizer.current||=XYResizer({domNode:resizeControlRef.current,nodeId:id$3,getStoreItems:()=>{let{nodeLookup,transform:transform$1,snapGrid,snapToGrid,nodeOrigin,domNode}=store.getState();return{nodeLookup,transform:transform$1,snapGrid,snapToGrid,nodeOrigin,paneDomNode:domNode}},onChange:(change,childChanges)=>{let{triggerNodeChanges,nodeLookup,parentLookup,nodeOrigin}=store.getState(),changes=[],nextPosition={x:change.x,y:change.y},node=nodeLookup.get(id$3);if(node&&node.expandParent&&node.parentId){let origin$2=node.origin??nodeOrigin,width=change.width??node.measured.width??0,height=change.height??node.measured.height??0,parentExpandChanges=handleExpandParent([{id:node.id,parentId:node.parentId,rect:{width,height,...evaluateAbsolutePosition({x:change.x??node.position.x,y:change.y??node.position.y},{width,height},node.parentId,nodeLookup,origin$2)}}],nodeLookup,parentLookup,nodeOrigin);changes.push(...parentExpandChanges),nextPosition.x=change.x?Math.max(origin$2[0]*width,change.x):void 0,nextPosition.y=change.y?Math.max(origin$2[1]*height,change.y):void 0}if(nextPosition.x!==void 0&&nextPosition.y!==void 0){let positionChange={id:id$3,type:`position`,position:{...nextPosition}};changes.push(positionChange)}if(change.width!==void 0&&change.height!==void 0){let dimensionChange={id:id$3,type:`dimensions`,resizing:!0,setAttributes:resizeDirection?resizeDirection===`horizontal`?`width`:`height`:!0,dimensions:{width:change.width,height:change.height}};changes.push(dimensionChange)}for(let childChange of childChanges){let positionChange={...childChange,type:`position`};changes.push(positionChange)}triggerNodeChanges(changes)},onEnd:({width,height})=>{let dimensionChange={id:id$3,type:`dimensions`,resizing:!1,dimensions:{width,height}};store.getState().triggerNodeChanges([dimensionChange])}}),resizer.current.update({controlPosition,boundaries:{minWidth,minHeight,maxWidth,maxHeight},keepAspectRatio,resizeDirection,onResizeStart,onResize,onResizeEnd,shouldResize}),()=>{resizer.current?.destroy()}},[controlPosition,minWidth,minHeight,maxWidth,maxHeight,keepAspectRatio,onResizeStart,onResize,onResizeEnd,shouldResize]),(0,import_jsx_runtime.jsx)(`div`,{className:cc([`react-flow__resize-control`,`nodrag`,...controlPosition.split(`-`),variant,className]),ref:resizeControlRef,style:{...style$3,scale:scale$1,...color$2&&{[isHandleControl?`backgroundColor`:`borderColor`]:color$2}},children:children$1})}var NodeResizeControl=(0,import_react.memo)(ResizeControl),require___vite_browser_external=__commonJSMin(((exports,module)=>{module.exports={}})),require_pdf=__commonJSMin(((exports,module)=>{(function(root$3,factory$1){typeof exports==`object`&&typeof module==`object`?module.exports=root$3.pdfjsLib=factory$1():typeof define==`function`&&define.amd?define(`pdfjs-dist/build/pdf`,[],()=>root$3.pdfjsLib=factory$1()):typeof exports==`object`?exports[`pdfjs-dist/build/pdf`]=root$3.pdfjsLib=factory$1():root$3[`pdfjs-dist/build/pdf`]=root$3.pdfjsLib=factory$1()})(globalThis,()=>(()=>{var __webpack_modules__=[,((__unused_webpack_module,exports$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.VerbosityLevel=exports$1.Util=exports$1.UnknownErrorException=exports$1.UnexpectedResponseException=exports$1.TextRenderingMode=exports$1.RenderingIntentFlag=exports$1.PromiseCapability=exports$1.PermissionFlag=exports$1.PasswordResponses=exports$1.PasswordException=exports$1.PageActionEventType=exports$1.OPS=exports$1.MissingPDFException=exports$1.MAX_IMAGE_SIZE_TO_CACHE=exports$1.LINE_FACTOR=exports$1.LINE_DESCENT_FACTOR=exports$1.InvalidPDFException=exports$1.ImageKind=exports$1.IDENTITY_MATRIX=exports$1.FormatError=exports$1.FeatureTest=exports$1.FONT_IDENTITY_MATRIX=exports$1.DocumentActionEventType=exports$1.CMapCompressionType=exports$1.BaseException=exports$1.BASELINE_FACTOR=exports$1.AnnotationType=exports$1.AnnotationReplyType=exports$1.AnnotationPrefix=exports$1.AnnotationMode=exports$1.AnnotationFlag=exports$1.AnnotationFieldFlag=exports$1.AnnotationEditorType=exports$1.AnnotationEditorPrefix=exports$1.AnnotationEditorParamsType=exports$1.AnnotationBorderStyleType=exports$1.AnnotationActionEventType=exports$1.AbortException=void 0,exports$1.assert=assert,exports$1.bytesToString=bytesToString,exports$1.createValidAbsoluteUrl=createValidAbsoluteUrl,exports$1.getModificationDate=getModificationDate,exports$1.getUuid=getUuid,exports$1.getVerbosityLevel=getVerbosityLevel,exports$1.info=info,exports$1.isArrayBuffer=isArrayBuffer$1,exports$1.isArrayEqual=isArrayEqual,exports$1.isNodeJS=void 0,exports$1.normalizeUnicode=normalizeUnicode,exports$1.objectFromMap=objectFromMap,exports$1.objectSize=objectSize,exports$1.setVerbosityLevel=setVerbosityLevel,exports$1.shadow=shadow,exports$1.string32=string32,exports$1.stringToBytes=stringToBytes,exports$1.stringToPDFString=stringToPDFString,exports$1.stringToUTF8String=stringToUTF8String,exports$1.unreachable=unreachable,exports$1.utf8StringToString=utf8StringToString,exports$1.warn=warn,exports$1.isNodeJS=typeof process==`object`&&process+``==`[object process]`&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!==`browser`),exports$1.IDENTITY_MATRIX=[1,0,0,1,0,0],exports$1.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],exports$1.MAX_IMAGE_SIZE_TO_CACHE=1e7;let LINE_FACTOR=1.35;exports$1.LINE_FACTOR=LINE_FACTOR;let LINE_DESCENT_FACTOR=.35;exports$1.LINE_DESCENT_FACTOR=LINE_DESCENT_FACTOR,exports$1.BASELINE_FACTOR=LINE_DESCENT_FACTOR/LINE_FACTOR,exports$1.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},exports$1.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},exports$1.AnnotationEditorPrefix=`pdfjs_internal_editor_`,exports$1.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15},exports$1.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23},exports$1.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},exports$1.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},exports$1.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},exports$1.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},exports$1.AnnotationReplyType={GROUP:`Group`,REPLY:`R`},exports$1.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},exports$1.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},exports$1.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},exports$1.AnnotationActionEventType={E:`Mouse Enter`,X:`Mouse Exit`,D:`Mouse Down`,U:`Mouse Up`,Fo:`Focus`,Bl:`Blur`,PO:`PageOpen`,PC:`PageClose`,PV:`PageVisible`,PI:`PageInvisible`,K:`Keystroke`,F:`Format`,V:`Validate`,C:`Calculate`},exports$1.DocumentActionEventType={WC:`WillClose`,WS:`WillSave`,DS:`DidSave`,WP:`WillPrint`,DP:`DidPrint`},exports$1.PageActionEventType={O:`PageOpen`,C:`PageClose`};let VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};exports$1.VerbosityLevel=VerbosityLevel,exports$1.CMapCompressionType={NONE:0,BINARY:1},exports$1.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},exports$1.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){Number.isInteger(level)&&(verbosity=level)}function getVerbosityLevel(){return verbosity}function info(msg){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${msg}`)}function warn(msg){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${msg}`)}function unreachable(msg){throw Error(msg)}function assert(cond,msg){cond||unreachable(msg)}function _isValidProtocol(url){switch(url?.protocol){case`http:`:case`https:`:case`ftp:`:case`mailto:`:case`tel:`:return!0;default:return!1}}function createValidAbsoluteUrl(url,baseUrl=null,options$1=null){if(!url)return null;try{if(options$1&&typeof url==`string`&&(options$1.addDefaultProtocol&&url.startsWith(`www.`)&&url.match(/\./g)?.length>=2&&(url=`http://${url}`),options$1.tryConvertEncoding))try{url=stringToUTF8String(url)}catch{}let absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(_isValidProtocol(absoluteUrl))return absoluteUrl}catch{}return null}function shadow(obj,prop,value,nonSerializable=!1){return Object.defineProperty(obj,prop,{value,enumerable:!nonSerializable,configurable:!0,writable:!1}),value}let BaseException=function(){function BaseException$1(message,name){this.constructor===BaseException$1&&unreachable(`Cannot initialize BaseException.`),this.message=message,this.name=name}return BaseException$1.prototype=Error(),BaseException$1.constructor=BaseException$1,BaseException$1}();exports$1.BaseException=BaseException;class PasswordException extends BaseException{constructor(msg,code){super(msg,`PasswordException`),this.code=code}}exports$1.PasswordException=PasswordException;class UnknownErrorException extends BaseException{constructor(msg,details){super(msg,`UnknownErrorException`),this.details=details}}exports$1.UnknownErrorException=UnknownErrorException;class InvalidPDFException extends BaseException{constructor(msg){super(msg,`InvalidPDFException`)}}exports$1.InvalidPDFException=InvalidPDFException;class MissingPDFException extends BaseException{constructor(msg){super(msg,`MissingPDFException`)}}exports$1.MissingPDFException=MissingPDFException;class UnexpectedResponseException extends BaseException{constructor(msg,status){super(msg,`UnexpectedResponseException`),this.status=status}}exports$1.UnexpectedResponseException=UnexpectedResponseException;class FormatError extends BaseException{constructor(msg){super(msg,`FormatError`)}}exports$1.FormatError=FormatError;class AbortException extends BaseException{constructor(msg){super(msg,`AbortException`)}}exports$1.AbortException=AbortException;function bytesToString(bytes){(typeof bytes!=`object`||bytes?.length===void 0)&&unreachable(`Invalid argument for bytesToString`);let length=bytes.length,MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT)return String.fromCharCode.apply(null,bytes);let strBuf=[];for(let i$4=0;i$4<length;i$4+=MAX_ARGUMENT_COUNT){let chunkEnd=Math.min(i$4+MAX_ARGUMENT_COUNT,length),chunk=bytes.subarray(i$4,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk))}return strBuf.join(``)}function stringToBytes(str){typeof str!=`string`&&unreachable(`Invalid argument for stringToBytes`);let length=str.length,bytes=new Uint8Array(length);for(let i$4=0;i$4<length;++i$4)bytes[i$4]=str.charCodeAt(i$4)&255;return bytes}function string32(value){return String.fromCharCode(value>>24&255,value>>16&255,value>>8&255,value&255)}function objectSize(obj){return Object.keys(obj).length}function objectFromMap(map){let obj=Object.create(null);for(let[key$1,value]of map)obj[key$1]=value;return obj}function isLittleEndian(){let buffer8=new Uint8Array(4);return buffer8[0]=1,new Uint32Array(buffer8.buffer,0,1)[0]===1}function isEvalSupported(){try{return Function(``),!0}catch{return!1}}class FeatureTest{static get isLittleEndian(){return shadow(this,`isLittleEndian`,isLittleEndian())}static get isEvalSupported(){return shadow(this,`isEvalSupported`,isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,`isOffscreenCanvasSupported`,typeof OffscreenCanvas<`u`)}static get platform(){return typeof navigator>`u`?shadow(this,`platform`,{isWin:!1,isMac:!1}):shadow(this,`platform`,{isWin:navigator.platform.includes(`Win`),isMac:navigator.platform.includes(`Mac`)})}static get isCSSRoundSupported(){return shadow(this,`isCSSRoundSupported`,globalThis.CSS?.supports?.(`width: round(1.5px, 1px)`))}}exports$1.FeatureTest=FeatureTest;let hexNumbers=[...Array(256).keys()].map(n$4=>n$4.toString(16).padStart(2,`0`));class Util{static makeHexColor(r$4,g$3,b$3){return`#${hexNumbers[r$4]}${hexNumbers[g$3]}${hexNumbers[b$3]}`}static scaleMinMax(transform$1,minMax){let temp;transform$1[0]?(transform$1[0]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform$1[0],minMax[1]*=transform$1[0],transform$1[3]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform$1[3],minMax[3]*=transform$1[3]):(temp=minMax[0],minMax[0]=minMax[2],minMax[2]=temp,temp=minMax[1],minMax[1]=minMax[3],minMax[3]=temp,transform$1[1]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform$1[1],minMax[3]*=transform$1[1],transform$1[2]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform$1[2],minMax[1]*=transform$1[2]),minMax[0]+=transform$1[4],minMax[1]+=transform$1[4],minMax[2]+=transform$1[5],minMax[3]+=transform$1[5]}static transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]]}static applyTransform(p$3,m$3){return[p$3[0]*m$3[0]+p$3[1]*m$3[2]+m$3[4],p$3[0]*m$3[1]+p$3[1]*m$3[3]+m$3[5]]}static applyInverseTransform(p$3,m$3){let d$3=m$3[0]*m$3[3]-m$3[1]*m$3[2];return[(p$3[0]*m$3[3]-p$3[1]*m$3[2]+m$3[2]*m$3[5]-m$3[4]*m$3[3])/d$3,(-p$3[0]*m$3[1]+p$3[1]*m$3[0]+m$3[4]*m$3[1]-m$3[5]*m$3[0])/d$3]}static getAxialAlignedBoundingBox(r$4,m$3){let p1=this.applyTransform(r$4,m$3),p2=this.applyTransform(r$4.slice(2,4),m$3),p3=this.applyTransform([r$4[0],r$4[3]],m$3),p4=this.applyTransform([r$4[2],r$4[1]],m$3);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])]}static inverseTransform(m$3){let d$3=m$3[0]*m$3[3]-m$3[1]*m$3[2];return[m$3[3]/d$3,-m$3[1]/d$3,-m$3[2]/d$3,m$3[0]/d$3,(m$3[2]*m$3[5]-m$3[4]*m$3[3])/d$3,(m$3[4]*m$3[1]-m$3[5]*m$3[0])/d$3]}static singularValueDecompose2dScale(m$3){let transpose=[m$3[0],m$3[2],m$3[1],m$3[3]],a$4=m$3[0]*transpose[0]+m$3[1]*transpose[2],b$3=m$3[0]*transpose[1]+m$3[1]*transpose[3],c$3=m$3[2]*transpose[0]+m$3[3]*transpose[2],d$3=m$3[2]*transpose[1]+m$3[3]*transpose[3],first=(a$4+d$3)/2,second=Math.sqrt((a$4+d$3)**2-4*(a$4*d$3-c$3*b$3))/2,sx=first+second||1,sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)]}static normalizeRect(rect){let r$4=rect.slice(0);return rect[0]>rect[2]&&(r$4[0]=rect[2],r$4[2]=rect[0]),rect[1]>rect[3]&&(r$4[1]=rect[3],r$4[3]=rect[1]),r$4}static intersect(rect1,rect2){let xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2])),xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh)return null;let yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3])),yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));return yLow>yHigh?null:[xLow,yLow,xHigh,yHigh]}static bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3){let tvalues=[],bounds=[[],[]],a$4,b$3,c$3,t$4,t1,t2,b2ac,sqrtb2ac;for(let i$4=0;i$4<2;++i$4){if(i$4===0?(b$3=6*x0-12*x1+6*x2,a$4=-3*x0+9*x1-9*x2+3*x3,c$3=3*x1-3*x0):(b$3=6*y0-12*y1+6*y2,a$4=-3*y0+9*y1-9*y2+3*y3,c$3=3*y1-3*y0),Math.abs(a$4)<1e-12){if(Math.abs(b$3)<1e-12)continue;t$4=-c$3/b$3,0<t$4&&t$4<1&&tvalues.push(t$4);continue}b2ac=b$3*b$3-4*c$3*a$4,sqrtb2ac=Math.sqrt(b2ac),!(b2ac<0)&&(t1=(-b$3+sqrtb2ac)/(2*a$4),0<t1&&t1<1&&tvalues.push(t1),t2=(-b$3-sqrtb2ac)/(2*a$4),0<t2&&t2<1&&tvalues.push(t2))}let j$2=tvalues.length,mt$1,jlen=j$2;for(;j$2--;)t$4=tvalues[j$2],mt$1=1-t$4,bounds[0][j$2]=mt$1*mt$1*mt$1*x0+3*mt$1*mt$1*t$4*x1+3*mt$1*t$4*t$4*x2+t$4*t$4*t$4*x3,bounds[1][j$2]=mt$1*mt$1*mt$1*y0+3*mt$1*mt$1*t$4*y1+3*mt$1*t$4*t$4*y2+t$4*t$4*t$4*y3;return bounds[0][jlen]=x0,bounds[1][jlen]=y0,bounds[0][jlen+1]=x3,bounds[1][jlen+1]=y3,bounds[0].length=bounds[1].length=jlen+2,[Math.min(...bounds[0]),Math.min(...bounds[1]),Math.max(...bounds[0]),Math.max(...bounds[1])]}}exports$1.Util=Util;let PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToPDFString(str){if(str[0]>=``){let encoding;if(str[0]===``&&str[1]===``?encoding=`utf-16be`:str[0]===``&&str[1]===``?encoding=`utf-16le`:str[0]===``&&str[1]===``&&str[2]===``&&(encoding=`utf-8`),encoding)try{let decoder=new TextDecoder(encoding,{fatal:!0}),buffer=stringToBytes(str);return decoder.decode(buffer)}catch(ex){warn(`stringToPDFString: "${ex}".`)}}let strBuf=[];for(let i$4=0,ii=str.length;i$4<ii;i$4++){let code=PDFStringTranslateTable[str.charCodeAt(i$4)];strBuf.push(code?String.fromCharCode(code):str.charAt(i$4))}return strBuf.join(``)}function stringToUTF8String(str){return decodeURIComponent(escape(str))}function utf8StringToString(str){return unescape(encodeURIComponent(str))}function isArrayBuffer$1(v$3){return typeof v$3==`object`&&v$3?.byteLength!==void 0}function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length)return!1;for(let i$4=0,ii=arr1.length;i$4<ii;i$4++)if(arr1[i$4]!==arr2[i$4])return!1;return!0}function getModificationDate(date=new Date){return[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,`0`),date.getUTCDate().toString().padStart(2,`0`),date.getUTCHours().toString().padStart(2,`0`),date.getUTCMinutes().toString().padStart(2,`0`),date.getUTCSeconds().toString().padStart(2,`0`)].join(``)}class PromiseCapability{#e=!1;constructor(){this.promise=new Promise((resolve,reject)=>{this.resolve=data=>{this.#e=!0,resolve(data)},this.reject=reason=>{this.#e=!0,reject(reason)}})}get settled(){return this.#e}}exports$1.PromiseCapability=PromiseCapability;let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(str){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([[``,`t`]])),str.replaceAll(NormalizeRegex,(_$1,p1,p2)=>p1?p1.normalize(`NFKC`):NormalizationMap.get(p2))}function getUuid(){if(typeof crypto<`u`&&typeof crypto?.randomUUID==`function`)return crypto.randomUUID();let buf=new Uint8Array(32);if(typeof crypto<`u`&&typeof crypto?.getRandomValues==`function`)crypto.getRandomValues(buf);else for(let i$4=0;i$4<32;i$4++)buf[i$4]=Math.floor(Math.random()*255);return bytesToString(buf)}exports$1.AnnotationPrefix=`pdfjs_internal_id_`}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,`SVGGraphics`,{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument$1,exports$1.version=void 0;var _util=__w_pdfjs_require__$1(1),_annotation_storage=__w_pdfjs_require__$1(3),_display_utils=__w_pdfjs_require__$1(6),_font_loader=__w_pdfjs_require__$1(9),_displayNode_utils=__w_pdfjs_require__$1(10),_canvas=__w_pdfjs_require__$1(11),_worker_options=__w_pdfjs_require__$1(14),_message_handler=__w_pdfjs_require__$1(15),_metadata=__w_pdfjs_require__$1(16),_optional_content_config=__w_pdfjs_require__$1(17),_transport_stream=__w_pdfjs_require__$1(18),_displayFetch_stream=__w_pdfjs_require__$1(19),_displayNetwork=__w_pdfjs_require__$1(22),_displayNode_stream=__w_pdfjs_require__$1(23),_displaySvg=__w_pdfjs_require__$1(24),_xfa_text=__w_pdfjs_require__$1(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument$1(src){if(typeof src==`string`||src instanceof URL?src={url:src}:(0,_util.isArrayBuffer)(src)&&(src={data:src}),typeof src!=`object`)throw Error(`Invalid parameter in getDocument, need parameter object.`);if(!src.url&&!src.data&&!src.range)throw Error(`Invalid parameter object: need either .data, .range or .url`);let task=new PDFDocumentLoadingTask,{docId}=task,url=src.url?getUrlProp(src.url):null,data=src.data?getDataProp(src.data):null,httpHeaders=src.httpHeaders||null,withCredentials=src.withCredentials===!0,password=src.password??null,rangeTransport=src.range instanceof PDFDataRangeTransport?src.range:null,rangeChunkSize=Number.isInteger(src.rangeChunkSize)&&src.rangeChunkSize>0?src.rangeChunkSize:65536,worker=src.worker instanceof PDFWorker?src.worker:null,verbosity=src.verbosity,docBaseUrl=typeof src.docBaseUrl==`string`&&!(0,_display_utils.isDataScheme)(src.docBaseUrl)?src.docBaseUrl:null,cMapUrl=typeof src.cMapUrl==`string`?src.cMapUrl:null,cMapPacked=src.cMapPacked!==!1,CMapReaderFactory=src.CMapReaderFactory||DefaultCMapReaderFactory,standardFontDataUrl=typeof src.standardFontDataUrl==`string`?src.standardFontDataUrl:null,StandardFontDataFactory=src.StandardFontDataFactory||DefaultStandardFontDataFactory,ignoreErrors=src.stopAtErrors!==!0,maxImageSize=Number.isInteger(src.maxImageSize)&&src.maxImageSize>-1?src.maxImageSize:-1,isEvalSupported=src.isEvalSupported!==!1,isOffscreenCanvasSupported=typeof src.isOffscreenCanvasSupported==`boolean`?src.isOffscreenCanvasSupported:!_util.isNodeJS,canvasMaxAreaInBytes=Number.isInteger(src.canvasMaxAreaInBytes)?src.canvasMaxAreaInBytes:-1,disableFontFace=typeof src.disableFontFace==`boolean`?src.disableFontFace:_util.isNodeJS,fontExtraProperties=src.fontExtraProperties===!0,enableXfa=src.enableXfa===!0,ownerDocument=src.ownerDocument||globalThis.document,disableRange=src.disableRange===!0,disableStream=src.disableStream===!0,disableAutoFetch=src.disableAutoFetch===!0,pdfBug=src.pdfBug===!0,length=rangeTransport?rangeTransport.length:src.length??NaN,useSystemFonts=typeof src.useSystemFonts==`boolean`?src.useSystemFonts:!_util.isNodeJS&&!disableFontFace,useWorkerFetch=typeof src.useWorkerFetch==`boolean`?src.useWorkerFetch:CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory&&cMapUrl&&standardFontDataUrl&&(0,_display_utils.isValidFetchUrl)(cMapUrl,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(standardFontDataUrl,document.baseURI),canvasFactory=src.canvasFactory||new DefaultCanvasFactory({ownerDocument}),filterFactory=src.filterFactory||new DefaultFilterFactory({docId,ownerDocument}),styleElement=null;(0,_util.setVerbosityLevel)(verbosity);let transportFactory={canvasFactory,filterFactory};if(useWorkerFetch||(transportFactory.cMapReaderFactory=new CMapReaderFactory({baseUrl:cMapUrl,isCompressed:cMapPacked}),transportFactory.standardFontDataFactory=new StandardFontDataFactory({baseUrl:standardFontDataUrl})),!worker){let workerParams={verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};worker=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams),task._worker=worker}let fetchDocParams={docId,apiVersion:`3.11.174`,data,password,disableAutoFetch,rangeChunkSize,length,docBaseUrl,enableXfa,evaluatorOptions:{maxImageSize,disableFontFace,ignoreErrors,isEvalSupported,isOffscreenCanvasSupported,canvasMaxAreaInBytes,fontExtraProperties,useSystemFonts,cMapUrl:useWorkerFetch?cMapUrl:null,standardFontDataUrl:useWorkerFetch?standardFontDataUrl:null}},transportParams={ignoreErrors,isEvalSupported,disableFontFace,fontExtraProperties,enableXfa,ownerDocument,disableAutoFetch,pdfBug,styleElement:null};return worker.promise.then(function(){if(task.destroyed)throw Error(`Loading aborted`);let workerIdPromise=_fetchDocument(worker,fetchDocParams),networkStreamPromise=new Promise(function(resolve){let networkStream;rangeTransport?networkStream=new _transport_stream.PDFDataTransportStream({length,initialData:rangeTransport.initialData,progressiveDone:rangeTransport.progressiveDone,contentDispositionFilename:rangeTransport.contentDispositionFilename,disableRange,disableStream},rangeTransport):data||(networkStream=(params=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(params):(0,_display_utils.isValidFetchUrl)(params.url)?new _displayFetch_stream.PDFFetchStream(params):new _displayNetwork.PDFNetworkStream(params))({url,length,httpHeaders,withCredentials,rangeChunkSize,disableRange,disableStream})),resolve(networkStream)});return Promise.all([workerIdPromise,networkStreamPromise]).then(function([workerId,networkStream]){if(task.destroyed)throw Error(`Loading aborted`);let messageHandler=new _message_handler.MessageHandler(docId,workerId,worker.port);task._transport=new WorkerTransport(messageHandler,task,networkStream,transportParams,transportFactory),messageHandler.send(`Ready`,null)})}).catch(task._capability.reject),task}async function _fetchDocument(worker,source){if(worker.destroyed)throw Error(`Worker was destroyed`);let workerId=await worker.messageHandler.sendWithPromise(`GetDocRequest`,source,source.data?[source.data.buffer]:null);if(worker.destroyed)throw Error(`Worker was destroyed`);return workerId}function getUrlProp(val){if(val instanceof URL)return val.href;try{return new URL(val,window.location).href}catch{if(_util.isNodeJS&&typeof val==`string`)return val}throw Error(`Invalid PDF url data: either string or URL-object is expected in the url property.`)}function getDataProp(val){if(_util.isNodeJS&&typeof Buffer<`u`&&val instanceof Buffer)throw Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(val instanceof Uint8Array&&val.byteLength===val.buffer.byteLength)return val;if(typeof val==`string`)return(0,_util.stringToBytes)(val);if(typeof val==`object`&&!isNaN(val?.length)||(0,_util.isArrayBuffer)(val))return new Uint8Array(val);throw Error(`Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.`)}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(ex){throw this._worker?.port&&delete this._worker._pendingDestroy,ex}this._transport=null,this._worker&&=(this._worker.destroy(),null)}}exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(length,initialData,progressiveDone=!1,contentDispositionFilename=null){this.length=length,this.initialData=initialData,this.progressiveDone=progressiveDone,this.contentDispositionFilename=contentDispositionFilename,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(listener){this._rangeListeners.push(listener)}addProgressListener(listener){this._progressListeners.push(listener)}addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener)}addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener)}onDataRange(begin,chunk){for(let listener of this._rangeListeners)listener(begin,chunk)}onDataProgress(loaded,total){this._readyCapability.promise.then(()=>{for(let listener of this._progressListeners)listener(loaded,total)})}onDataProgressiveRead(chunk){this._readyCapability.promise.then(()=>{for(let listener of this._progressiveReadListeners)listener(chunk)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let listener of this._progressiveDoneListeners)listener()})}transportReady(){this._readyCapability.resolve()}requestDataRange(begin,end$1){(0,_util.unreachable)(`Abstract method PDFDataRangeTransport.requestDataRange`)}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(pdfInfo,transport){this._pdfInfo=pdfInfo,this._transport=transport,Object.defineProperty(this,`getJavaScript`,{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(js=>{if(!js)return js;let jsArr=[];for(let name in js)jsArr.push(...js[name]);return jsArr}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,`isPureXfa`,!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(pageNumber){return this._transport.getPage(pageNumber)}getPageIndex(ref){return this._transport.getPageIndex(ref)}getDestinations(){return this._transport.getDestinations()}getDestination(id$3){return this._transport.getDestination(id$3)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(keepLoadedFonts=!1){return this._transport.startCleanup(keepLoadedFonts||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(pageIndex,pageInfo,transport,pdfBug=!1){this._pageIndex=pageIndex,this._pageInfo=pageInfo,this._transport=transport,this._stats=pdfBug?new _display_utils.StatTimer:null,this._pdfBug=pdfBug,this.commonObjs=transport.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:scale$1,rotation=this.rotate,offsetX=0,offsetY=0,dontFlip=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:scale$1,rotation,offsetX,offsetY,dontFlip})}getAnnotations({intent=`display`}={}){let intentArgs=this._transport.getRenderingIntent(intent);return this._transport.getAnnotations(this._pageIndex,intentArgs.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,`isPureXfa`,!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext,viewport,intent=`display`,annotationMode=_util.AnnotationMode.ENABLE,transform:transform$1=null,background=null,optionalContentConfigPromise=null,annotationCanvasMap=null,pageColors=null,printAnnotationStorage=null}){this._stats?.time(`Overall`);let intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage);this.#t=!1,this.#r(),optionalContentConfigPromise||=this._transport.getOptionalContentConfig();let intentState=this._intentStates.get(intentArgs.cacheKey);intentState||(intentState=Object.create(null),this._intentStates.set(intentArgs.cacheKey,intentState)),intentState.streamReaderCancelTimeout&&=(clearTimeout(intentState.streamReaderCancelTimeout),null);let intentPrint=!!(intentArgs.renderingIntent&_util.RenderingIntentFlag.PRINT);intentState.displayReadyCapability||(intentState.displayReadyCapability=new _util.PromiseCapability,intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time(`Page Request`),this._pumpOperatorList(intentArgs));let complete=error$1=>{intentState.renderTasks.delete(internalRenderTask),(this._maybeCleanupAfterRender||intentPrint)&&(this.#t=!0),this.#n(!intentPrint),error$1?(internalRenderTask.capability.reject(error$1),this._abortOperatorList({intentState,reason:error$1 instanceof Error?error$1:Error(error$1)})):internalRenderTask.capability.resolve(),this._stats?.timeEnd(`Rendering`),this._stats?.timeEnd(`Overall`)},internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext,viewport,transform:transform$1,background},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!intentPrint,pdfBug:this._pdfBug,pageColors});(intentState.renderTasks||=new Set).add(internalRenderTask);let renderTask=internalRenderTask.task;return Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then(([transparency,optionalContentConfig])=>{if(this.destroyed){complete();return}this._stats?.time(`Rendering`),internalRenderTask.initializeGraphics({transparency,optionalContentConfig}),internalRenderTask.operatorListChanged()}).catch(complete),renderTask}getOperatorList({intent=`display`,annotationMode=_util.AnnotationMode.ENABLE,printAnnotationStorage=null}={}){function operatorListChanged(){intentState.operatorList.lastChunk&&(intentState.opListReadCapability.resolve(intentState.operatorList),intentState.renderTasks.delete(opListTask))}let intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,!0),intentState=this._intentStates.get(intentArgs.cacheKey);intentState||(intentState=Object.create(null),this._intentStates.set(intentArgs.cacheKey,intentState));let opListTask;return intentState.opListReadCapability||(opListTask=Object.create(null),opListTask.operatorListChanged=operatorListChanged,intentState.opListReadCapability=new _util.PromiseCapability,(intentState.renderTasks||=new Set).add(opListTask),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time(`Page Request`),this._pumpOperatorList(intentArgs)),intentState.opListReadCapability.promise}streamTextContent({includeMarkedContent=!1,disableNormalization=!1}={}){return this._transport.messageHandler.sendWithStream(`GetTextContent`,{pageIndex:this._pageIndex,includeMarkedContent:includeMarkedContent===!0,disableNormalization:disableNormalization===!0},{highWaterMark:100,size(textContent){return textContent.items.length}})}getTextContent(params={}){if(this._transport._htmlForXfa)return this.getXfa().then(xfa=>_xfa_text.XfaText.textContent(xfa));let readableStream=this.streamTextContent(params);return new Promise(function(resolve,reject){function pump(){reader.read().then(function({value,done}){if(done){resolve(textContent);return}Object.assign(textContent.styles,value.styles),textContent.items.push(...value.items),pump()},reject)}let reader=readableStream.getReader(),textContent={items:[],styles:Object.create(null)};pump()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let waitOn=[];for(let intentState of this._intentStates.values())if(this._abortOperatorList({intentState,reason:Error(`Page was destroyed.`),force:!0}),!intentState.opListReadCapability)for(let internalRenderTask of intentState.renderTasks)waitOn.push(internalRenderTask.completed),internalRenderTask.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(waitOn)}cleanup(resetStats=!1){this.#t=!0;let success=this.#n(!1);return resetStats&&success&&(this._stats&&=new _display_utils.StatTimer),success}#n(delayed$1=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(delayed$1)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},5e3),!1;for(let{renderTasks,operatorList}of this._intentStates.values())if(renderTasks.size>0||!operatorList.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&=(clearTimeout(this.#e),null)}_startRenderPage(transparency,cacheKey){let intentState=this._intentStates.get(cacheKey);intentState&&(this._stats?.timeEnd(`Page Request`),intentState.displayReadyCapability?.resolve(transparency))}_renderPageChunk(operatorListChunk,intentState){for(let i$4=0,ii=operatorListChunk.length;i$4<ii;i$4++)intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i$4]),intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i$4]);intentState.operatorList.lastChunk=operatorListChunk.lastChunk,intentState.operatorList.separateAnnots=operatorListChunk.separateAnnots;for(let internalRenderTask of intentState.renderTasks)internalRenderTask.operatorListChanged();operatorListChunk.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent,cacheKey,annotationStorageSerializable}){let{map,transfers}=annotationStorageSerializable,reader=this._transport.messageHandler.sendWithStream(`GetOperatorList`,{pageIndex:this._pageIndex,intent:renderingIntent,cacheKey,annotationStorage:map},transfers).getReader(),intentState=this._intentStates.get(cacheKey);intentState.streamReader=reader;let pump=()=>{reader.read().then(({value,done})=>{if(done){intentState.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(value,intentState),pump())},reason=>{if(intentState.streamReader=null,!this._transport.destroyed){if(intentState.operatorList){intentState.operatorList.lastChunk=!0;for(let internalRenderTask of intentState.renderTasks)internalRenderTask.operatorListChanged();this.#n(!0)}if(intentState.displayReadyCapability)intentState.displayReadyCapability.reject(reason);else if(intentState.opListReadCapability)intentState.opListReadCapability.reject(reason);else throw reason}})};pump()}_abortOperatorList({intentState,reason,force=!1}){if(intentState.streamReader){if(intentState.streamReaderCancelTimeout&&=(clearTimeout(intentState.streamReaderCancelTimeout),null),!force){if(intentState.renderTasks.size>0)return;if(reason instanceof _display_utils.RenderingCancelledException){let delay$1=100;reason.extraDelay>0&&reason.extraDelay<1e3&&(delay$1+=reason.extraDelay),intentState.streamReaderCancelTimeout=setTimeout(()=>{intentState.streamReaderCancelTimeout=null,this._abortOperatorList({intentState,reason,force:!0})},delay$1);return}}if(intentState.streamReader.cancel(new _util.AbortException(reason.message)).catch(()=>{}),intentState.streamReader=null,!this._transport.destroyed){for(let[curCacheKey,curIntentState]of this._intentStates)if(curIntentState===intentState){this._intentStates.delete(curCacheKey);break}this.cleanup()}}}get stats(){return this._stats}}exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(obj,transfer){let event={data:structuredClone(obj,transfer?{transfer}:null)};this.#t.then(()=>{for(let listener of this.#e)listener.call(this,event)})}addEventListener(name,listener){this.#e.add(listener)}removeEventListener(name,listener){this.#e.delete(listener)}terminate(){this.#e.clear()}}exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports$1.PDFWorkerUtil=PDFWorkerUtil,_util.isNodeJS&&typeof __require==`function`)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc=`./pdf.worker.js`;else if(typeof document==`object`){let pdfjsFilePath=document?.currentScript?.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,`.worker$1$2`))}PDFWorkerUtil.isSameOrigin=function(baseUrl,otherUrl){let base;try{if(base=new URL(baseUrl),!base.origin||base.origin===`null`)return!1}catch{return!1}let other=new URL(otherUrl,base);return base.origin===other.origin},PDFWorkerUtil.createCDNWrapper=function(url){let wrapper=`importScripts("${url}");`;return URL.createObjectURL(new Blob([wrapper]))};class PDFWorker{static#e;constructor({name=null,port:port$1=null,verbosity=(0,_util.getVerbosityLevel)()}={}){if(this.name=name,this.destroyed=!1,this.verbosity=verbosity,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,port$1){if(PDFWorker.#e?.has(port$1))throw Error(`Cannot use more than one PDFWorker per port.`);(PDFWorker.#e||=new WeakMap).set(port$1,this),this._initializeFromPort(port$1);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(port$1){this._port=port$1,this._messageHandler=new _message_handler.MessageHandler(`main`,`worker`,port$1),this._messageHandler.on(`ready`,function(){}),this._readyCapability.resolve(),this._messageHandler.send(`configure`,{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,workerSrc)||(workerSrc=PDFWorkerUtil.createCDNWrapper(new URL(workerSrc,window.location).href));let worker=new Worker(workerSrc),messageHandler=new _message_handler.MessageHandler(`main`,`worker`,worker),terminateEarly=()=>{worker.removeEventListener(`error`,onWorkerError),messageHandler.destroy(),worker.terminate(),this.destroyed?this._readyCapability.reject(Error(`Worker was destroyed`)):this._setupFakeWorker()},onWorkerError=()=>{this._webWorker||terminateEarly()};worker.addEventListener(`error`,onWorkerError),messageHandler.on(`test`,data=>{if(worker.removeEventListener(`error`,onWorkerError),this.destroyed){terminateEarly();return}data?(this._messageHandler=messageHandler,this._port=worker,this._webWorker=worker,this._readyCapability.resolve(),messageHandler.send(`configure`,{verbosity:this.verbosity})):(this._setupFakeWorker(),messageHandler.destroy(),worker.terminate())}),messageHandler.on(`ready`,data=>{if(worker.removeEventListener(`error`,onWorkerError),this.destroyed){terminateEarly();return}try{sendTest()}catch{this._setupFakeWorker()}});let sendTest=()=>{let testObj=new Uint8Array;messageHandler.send(`test`,testObj,[testObj.buffer])};sendTest();return}catch{(0,_util.info)(`The worker has been disabled.`)}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||=((0,_util.warn)(`Setting up fake worker.`),!0),PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler=>{if(this.destroyed){this._readyCapability.reject(Error(`Worker was destroyed`));return}let port$1=new LoopbackPort;this._port=port$1;let id$3=`fake${PDFWorkerUtil.fakeWorkerId++}`,workerHandler=new _message_handler.MessageHandler(id$3+`_worker`,id$3,port$1);WorkerMessageHandler.setup(workerHandler,port$1);let messageHandler=new _message_handler.MessageHandler(id$3,id$3+`_worker`,port$1);this._messageHandler=messageHandler,this._readyCapability.resolve(),messageHandler.send(`configure`,{verbosity:this.verbosity})}).catch(reason=>{this._readyCapability.reject(Error(`Setting up fake worker failed: "${reason.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&=(this._webWorker.terminate(),null),PDFWorker.#e?.delete(this._port),this._port=null,this._messageHandler&&=(this._messageHandler.destroy(),null)}static fromPort(params){if(!params?.port)throw Error(`PDFWorker.fromPort - invalid method signature.`);let cachedPort=this.#e?.get(params.port);if(cachedPort){if(cachedPort._pendingDestroy)throw Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return cachedPort}return new PDFWorker(params)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)(`No "GlobalWorkerOptions.workerSrc" specified.`),PDFWorkerUtil.fallbackWorkerSrc;throw Error(`No "GlobalWorkerOptions.workerSrc" specified.`)}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof __require==`function`){const worker=eval(`require`)(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,`_setupFakeWorkerGlobal`,loader())}}exports$1.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#r=null;constructor(messageHandler,loadingTask,networkStream,params,factory$1){this.messageHandler=messageHandler,this.loadingTask=loadingTask,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:params.ownerDocument,styleElement:params.styleElement}),this._params=params,this.canvasFactory=factory$1.canvasFactory,this.filterFactory=factory$1.filterFactory,this.cMapReaderFactory=factory$1.cMapReaderFactory,this.standardFontDataFactory=factory$1.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=networkStream,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#i(name,data=null){let cachedPromise=this.#e.get(name);if(cachedPromise)return cachedPromise;let promise=this.messageHandler.sendWithPromise(name,data);return this.#e.set(name,promise),promise}get annotationStorage(){return(0,_util.shadow)(this,`annotationStorage`,new _annotation_storage.AnnotationStorage)}getRenderingIntent(intent,annotationMode=_util.AnnotationMode.ENABLE,printAnnotationStorage=null,isOpList=!1){let renderingIntent=_util.RenderingIntentFlag.DISPLAY,annotationStorageSerializable=_annotation_storage.SerializableEmpty;switch(intent){case`any`:renderingIntent=_util.RenderingIntentFlag.ANY;break;case`display`:break;case`print`:renderingIntent=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${intent}`)}switch(annotationMode){case _util.AnnotationMode.DISABLE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,annotationStorageSerializable=(renderingIntent&_util.RenderingIntentFlag.PRINT&&printAnnotationStorage instanceof _annotation_storage.PrintAnnotationStorage?printAnnotationStorage:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${annotationMode}`)}return isOpList&&(renderingIntent+=_util.RenderingIntentFlag.OPLIST),{renderingIntent,cacheKey:`${renderingIntent}_${annotationStorageSerializable.hash}`,annotationStorageSerializable}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#r?.reject(Error(`Worker was destroyed during onPassword callback`));let waitOn=[];for(let page of this.#t.values())waitOn.push(page._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty(`annotationStorage`)&&this.annotationStorage.resetModified();let terminated=this.messageHandler.sendWithPromise(`Terminate`,null);return waitOn.push(terminated),Promise.all(waitOn).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException(`Worker was terminated.`)),this.messageHandler&&=(this.messageHandler.destroy(),null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler,loadingTask}=this;messageHandler.on(`GetReader`,(data,sink)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=evt=>{this._lastProgress={loaded:evt.loaded,total:evt.total}},sink.onPull=()=>{this._fullReader.read().then(function({value,done}){if(done){sink.close();return}(0,_util.assert)(value instanceof ArrayBuffer,`GetReader - expected an ArrayBuffer.`),sink.enqueue(new Uint8Array(value),1,[value])}).catch(reason=>{sink.error(reason)})},sink.onCancel=reason=>{this._fullReader.cancel(reason),sink.ready.catch(readyReason=>{if(!this.destroyed)throw readyReason})}}),messageHandler.on(`ReaderHeadersReady`,data=>{let headersCapability=new _util.PromiseCapability,fullReader=this._fullReader;return fullReader.headersReady.then(()=>{(!fullReader.isStreamingSupported||!fullReader.isRangeSupported)&&(this._lastProgress&&loadingTask.onProgress?.(this._lastProgress),fullReader.onProgress=evt=>{loadingTask.onProgress?.({loaded:evt.loaded,total:evt.total})}),headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength})},headersCapability.reject),headersCapability.promise}),messageHandler.on(`GetRangeReader`,(data,sink)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let rangeReader=this._networkStream.getRangeReader(data.begin,data.end);if(!rangeReader){sink.close();return}sink.onPull=()=>{rangeReader.read().then(function({value,done}){if(done){sink.close();return}(0,_util.assert)(value instanceof ArrayBuffer,`GetRangeReader - expected an ArrayBuffer.`),sink.enqueue(new Uint8Array(value),1,[value])}).catch(reason=>{sink.error(reason)})},sink.onCancel=reason=>{rangeReader.cancel(reason),sink.ready.catch(readyReason=>{if(!this.destroyed)throw readyReason})}}),messageHandler.on(`GetDoc`,({pdfInfo})=>{this._numPages=pdfInfo.numPages,this._htmlForXfa=pdfInfo.htmlForXfa,delete pdfInfo.htmlForXfa,loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,this))}),messageHandler.on(`DocException`,function(ex){let reason;switch(ex.name){case`PasswordException`:reason=new _util.PasswordException(ex.message,ex.code);break;case`InvalidPDFException`:reason=new _util.InvalidPDFException(ex.message);break;case`MissingPDFException`:reason=new _util.MissingPDFException(ex.message);break;case`UnexpectedResponseException`:reason=new _util.UnexpectedResponseException(ex.message,ex.status);break;case`UnknownErrorException`:reason=new _util.UnknownErrorException(ex.message,ex.details);break;default:(0,_util.unreachable)(`DocException - expected a valid Error.`)}loadingTask._capability.reject(reason)}),messageHandler.on(`PasswordRequest`,exception=>{if(this.#r=new _util.PromiseCapability,loadingTask.onPassword){let updatePassword=password=>{password instanceof Error?this.#r.reject(password):this.#r.resolve({password})};try{loadingTask.onPassword(updatePassword,exception.code)}catch(ex){this.#r.reject(ex)}}else this.#r.reject(new _util.PasswordException(exception.message,exception.code));return this.#r.promise}),messageHandler.on(`DataLoaded`,data=>{loadingTask.onProgress?.({loaded:data.length,total:data.length}),this.downloadInfoCapability.resolve(data)}),messageHandler.on(`StartRenderPage`,data=>{this.destroyed||this.#t.get(data.pageIndex)._startRenderPage(data.transparency,data.cacheKey)}),messageHandler.on(`commonobj`,([id$3,type,exportedData])=>{if(!this.destroyed&&!this.commonObjs.has(id$3))switch(type){case`Font`:let params=this._params;if(`error`in exportedData){let exportedError=exportedData.error;(0,_util.warn)(`Error during font loading: ${exportedError}`),this.commonObjs.resolve(id$3,exportedError);break}let inspectFont=params.pdfBug&&globalThis.FontInspector?.enabled?(font$1,url)=>globalThis.FontInspector.fontAdded(font$1,url):null,font=new _font_loader.FontFaceObject(exportedData,{isEvalSupported:params.isEvalSupported,disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,inspectFont});this.fontLoader.bind(font).catch(reason=>messageHandler.sendWithPromise(`FontFallback`,{id:id$3})).finally(()=>{!params.fontExtraProperties&&font.data&&(font.data=null),this.commonObjs.resolve(id$3,font)});break;case`FontPath`:case`Image`:case`Pattern`:this.commonObjs.resolve(id$3,exportedData);break;default:throw Error(`Got unknown common object type ${type}`)}}),messageHandler.on(`obj`,([id$3,pageIndex,type,imageData])=>{if(this.destroyed)return;let pageProxy=this.#t.get(pageIndex);if(!pageProxy.objs.has(id$3))switch(type){case`Image`:if(pageProxy.objs.resolve(id$3,imageData),imageData){let length;if(imageData.bitmap){let{width,height}=imageData;length=width*height*4}else length=imageData.data?.length||0;length>_util.MAX_IMAGE_SIZE_TO_CACHE&&(pageProxy._maybeCleanupAfterRender=!0)}break;case`Pattern`:pageProxy.objs.resolve(id$3,imageData);break;default:throw Error(`Got unknown object type ${type}`)}}),messageHandler.on(`DocProgress`,data=>{this.destroyed||loadingTask.onProgress?.({loaded:data.loaded,total:data.total})}),messageHandler.on(`FetchBuiltInCMap`,data=>this.destroyed?Promise.reject(Error(`Worker was destroyed.`)):this.cMapReaderFactory?this.cMapReaderFactory.fetch(data):Promise.reject(Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),messageHandler.on(`FetchStandardFontData`,data=>this.destroyed?Promise.reject(Error(`Worker was destroyed.`)):this.standardFontDataFactory?this.standardFontDataFactory.fetch(data):Promise.reject(Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise(`GetData`,null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map,transfers}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise(`SaveDocument`,{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:map,filename:this._fullReader?.filename??null},transfers).finally(()=>{this.annotationStorage.resetModified()})}getPage(pageNumber){if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages)return Promise.reject(Error(`Invalid page request.`));let pageIndex=pageNumber-1,cachedPromise=this.#n.get(pageIndex);if(cachedPromise)return cachedPromise;let promise=this.messageHandler.sendWithPromise(`GetPage`,{pageIndex}).then(pageInfo=>{if(this.destroyed)throw Error(`Transport destroyed`);let page=new PDFPageProxy(pageIndex,pageInfo,this,this._params.pdfBug);return this.#t.set(pageIndex,page),page});return this.#n.set(pageIndex,promise),promise}getPageIndex(ref){return typeof ref!=`object`||!ref||!Number.isInteger(ref.num)||ref.num<0||!Number.isInteger(ref.gen)||ref.gen<0?Promise.reject(Error(`Invalid pageIndex request.`)):this.messageHandler.sendWithPromise(`GetPageIndex`,{num:ref.num,gen:ref.gen})}getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise(`GetAnnotations`,{pageIndex,intent})}getFieldObjects(){return this.#i(`GetFieldObjects`)}hasJSActions(){return this.#i(`HasJSActions`)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise(`GetCalculationOrderIds`,null)}getDestinations(){return this.messageHandler.sendWithPromise(`GetDestinations`,null)}getDestination(id$3){return typeof id$3==`string`?this.messageHandler.sendWithPromise(`GetDestination`,{id:id$3}):Promise.reject(Error(`Invalid destination request.`))}getPageLabels(){return this.messageHandler.sendWithPromise(`GetPageLabels`,null)}getPageLayout(){return this.messageHandler.sendWithPromise(`GetPageLayout`,null)}getPageMode(){return this.messageHandler.sendWithPromise(`GetPageMode`,null)}getViewerPreferences(){return this.messageHandler.sendWithPromise(`GetViewerPreferences`,null)}getOpenAction(){return this.messageHandler.sendWithPromise(`GetOpenAction`,null)}getAttachments(){return this.messageHandler.sendWithPromise(`GetAttachments`,null)}getDocJSActions(){return this.#i(`GetDocJSActions`)}getPageJSActions(pageIndex){return this.messageHandler.sendWithPromise(`GetPageJSActions`,{pageIndex})}getStructTree(pageIndex){return this.messageHandler.sendWithPromise(`GetStructTree`,{pageIndex})}getOutline(){return this.messageHandler.sendWithPromise(`GetOutline`,null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise(`GetOptionalContentConfig`,null).then(results=>new _optional_content_config.OptionalContentConfig(results))}getPermissions(){return this.messageHandler.sendWithPromise(`GetPermissions`,null)}getMetadata(){let name=`GetMetadata`,cachedPromise=this.#e.get(name);if(cachedPromise)return cachedPromise;let promise=this.messageHandler.sendWithPromise(name,null).then(results=>({info:results[0],metadata:results[1]?new _metadata.Metadata(results[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(name,promise),promise}getMarkInfo(){return this.messageHandler.sendWithPromise(`GetMarkInfo`,null)}async startCleanup(keepLoadedFonts=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise(`Cleanup`,null);for(let page of this.#t.values())if(!page.cleanup())throw Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);this.commonObjs.clear(),keepLoadedFonts||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){let{disableAutoFetch,enableXfa}=this._params;return(0,_util.shadow)(this,`loadingParams`,{disableAutoFetch,enableXfa})}}class PDFObjects{#e=Object.create(null);#t(objId){return this.#e[objId]||={capability:new _util.PromiseCapability,data:null}}get(objId,callback=null){if(callback){let obj$1=this.#t(objId);return obj$1.capability.promise.then(()=>callback(obj$1.data)),null}let obj=this.#e[objId];if(!obj?.capability.settled)throw Error(`Requesting object that isn't resolved yet ${objId}.`);return obj.data}has(objId){return this.#e[objId]?.capability.settled||!1}resolve(objId,data=null){let obj=this.#t(objId);obj.data=data,obj.capability.resolve()}clear(){for(let objId in this.#e){let{data}=this.#e[objId];data?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(internalRenderTask){this.#e=internalRenderTask,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(extraDelay=0){this.#e.cancel(null,extraDelay)}get separateAnnots(){let{separateAnnots}=this.#e.operatorList;if(!separateAnnots)return!1;let{annotationCanvasMap}=this.#e;return separateAnnots.form||separateAnnots.canvas&&annotationCanvasMap?.size>0}}exports$1.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback,params,objs,commonObjs,annotationCanvasMap,operatorList,pageIndex,canvasFactory,filterFactory,useRequestAnimationFrame=!1,pdfBug=!1,pageColors=null}){this.callback=callback,this.params=params,this.objs=objs,this.commonObjs=commonObjs,this.annotationCanvasMap=annotationCanvasMap,this.operatorListIdx=null,this.operatorList=operatorList,this._pageIndex=pageIndex,this.canvasFactory=canvasFactory,this.filterFactory=filterFactory,this._pdfBug=pdfBug,this.pageColors=pageColors,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=useRequestAnimationFrame===!0&&typeof window<`u`,this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=params.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency=!1,optionalContentConfig}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw Error(`Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.`);InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext,viewport,transform:transform$1,background}=this.params;this.gfx=new _canvas.CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:transform$1,viewport,transparency,background}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(error$1=null,extraDelay=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(error$1||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,extraDelay))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version=`3.11.174`;exports$1.version=`3.11.174`;const build=`ce8716743`;exports$1.build=`ce8716743`}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.SerializableEmpty=exports$1.PrintAnnotationStorage=exports$1.AnnotationStorage=void 0;var _util=__w_pdfjs_require__$1(1),_editor=__w_pdfjs_require__$1(4),_murmurhash=__w_pdfjs_require__$1(8);let SerializableEmpty=Object.freeze({map:null,hash:``,transfers:void 0});exports$1.SerializableEmpty=SerializableEmpty;class AnnotationStorage{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(key$1,defaultValue$3){let value=this.#t.get(key$1);return value===void 0?defaultValue$3:Object.assign(defaultValue$3,value)}getRawValue(key$1){return this.#t.get(key$1)}remove(key$1){if(this.#t.delete(key$1),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor==`function`){for(let value of this.#t.values())if(value instanceof _editor.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(key$1,value){let obj=this.#t.get(key$1),modified=!1;if(obj!==void 0)for(let[entry,val]of Object.entries(value))obj[entry]!==val&&(modified=!0,obj[entry]=val);else modified=!0,this.#t.set(key$1,value);modified&&this.#n(),value instanceof _editor.AnnotationEditor&&typeof this.onAnnotationEditor==`function`&&this.onAnnotationEditor(value.constructor._type)}has(key$1){return this.#t.has(key$1)}getAll(){return this.#t.size>0?(0,_util.objectFromMap)(this.#t):null}setAll(obj){for(let[key$1,val]of Object.entries(obj))this.setValue(key$1,val)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified==`function`&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified==`function`&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(this.#t.size===0)return SerializableEmpty;let map=new Map,hash=new _murmurhash.MurmurHash3_64,transfers=[],context=Object.create(null),hasBitmap=!1;for(let[key$1,val]of this.#t){let serialized=val instanceof _editor.AnnotationEditor?val.serialize(!1,context):val;serialized&&(map.set(key$1,serialized),hash.update(`${key$1}:${JSON.stringify(serialized)}`),hasBitmap||=!!serialized.bitmap)}if(hasBitmap)for(let value of map.values())value.bitmap&&transfers.push(value.bitmap);return map.size>0?{map,hash:hash.hexdigest(),transfers}:SerializableEmpty}}exports$1.AnnotationStorage=AnnotationStorage;class PrintAnnotationStorage extends AnnotationStorage{#e;constructor(parent){super();let{map,hash,transfers}=parent.serializable;this.#e={map:structuredClone(map,transfers?{transfer:transfers}:null),hash,transfers}}get print(){(0,_util.unreachable)(`Should not call PrintAnnotationStorage.print`)}get serializable(){return this.#e}}exports$1.PrintAnnotationStorage=PrintAnnotationStorage}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.AnnotationEditor=void 0;var _tools=__w_pdfjs_require__$1(5),_util=__w_pdfjs_require__$1(1),_display_utils=__w_pdfjs_require__$1(6);class AnnotationEditor{#e=``;#t=!1;#n=null;#r=null;#i=null;#a=!1;#o=null;#s=this.focusin.bind(this);#c=this.focusout.bind(this);#l=!1;#u=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#f=!1;#p=AnnotationEditor._zIndex++;static _borderLineWidth=-1;static _colorManager=new _tools.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(parameters){this.constructor===AnnotationEditor&&(0,_util.unreachable)(`Cannot initialize AnnotationEditor.`),this.parent=parameters.parent,this.id=parameters.id,this.width=this.height=null,this.pageIndex=parameters.parent.pageIndex,this.name=parameters.name,this.div=null,this._uiManager=parameters.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=parameters.isCentered,this._structTreeParentId=null;let{rotation,rawDims:{pageWidth,pageHeight,pageX,pageY}}=this.parent.viewport;this.rotation=rotation,this.pageRotation=(360+rotation-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[pageWidth,pageHeight],this.pageTranslation=[pageX,pageY];let[width,height]=this.parentDimensions;this.x=parameters.x/width,this.y=parameters.y/height,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,_util.shadow)(this,`_defaultLineColor`,this._colorManager.getHexCode(`CanvasText`))}static deleteAnnotationElement(editor){let fakeEditor=new FakeEditor({id:editor.parent.getNextId(),parent:editor.parent,uiManager:editor._uiManager});fakeEditor.annotationElementId=editor.annotationElementId,fakeEditor.deleted=!0,fakeEditor._uiManager.addToAnnotationStorage(fakeEditor)}static initialize(l10n,options$1=null){if(AnnotationEditor._l10nPromise||=new Map([`editor_alt_text_button_label`,`editor_alt_text_edit_button_label`,`editor_alt_text_decorative_tooltip`].map(str=>[str,l10n.get(str)])),options$1?.strings)for(let str of options$1.strings)AnnotationEditor._l10nPromise.set(str,l10n.get(str));if(AnnotationEditor._borderLineWidth!==-1)return;let style$3=getComputedStyle(document.documentElement);AnnotationEditor._borderLineWidth=parseFloat(style$3.getPropertyValue(`--outline-width`))||0}static updateDefaultParams(_type,_value){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(mime){return!1}static paste(item,parent){(0,_util.unreachable)(`Not implemented`)}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#f}set _isDraggable(value){this.#f=value,this.div?.classList.toggle(`draggable`,value)}center(){let[pageWidth,pageHeight]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*pageHeight/(pageWidth*2),this.y+=this.width*pageWidth/(pageHeight*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*pageHeight/(pageWidth*2),this.y-=this.width*pageWidth/(pageHeight*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(params){this._uiManager.addCommands(params)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(parent){parent!==null&&(this.pageIndex=parent.pageIndex,this.pageDimensions=parent.pageDimensions),this.parent=parent}focusin(event){this._focusEventsAllowed&&(this.#l?this.#l=!1:this.parent.setSelected(this))}focusout(event){this._focusEventsAllowed&&this.isAttachedToDOM&&(event.relatedTarget?.closest(`#${this.id}`)||(event.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove()))}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(x$2,y$2,tx,ty){let[width,height]=this.parentDimensions;[tx,ty]=this.screenToPageTranslation(tx,ty),this.x=(x$2+tx)/width,this.y=(y$2+ty)/height,this.fixAndSetPosition()}#m([width,height],x$2,y$2){[x$2,y$2]=this.screenToPageTranslation(x$2,y$2),this.x+=x$2/width,this.y+=y$2/height,this.fixAndSetPosition()}translate(x$2,y$2){this.#m(this.parentDimensions,x$2,y$2)}translateInPage(x$2,y$2){this.#m(this.pageDimensions,x$2,y$2),this.div.scrollIntoView({block:`nearest`})}drag(tx,ty){let[parentWidth,parentHeight]=this.parentDimensions;if(this.x+=tx/parentWidth,this.y+=ty/parentHeight,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:x$3,y:y$3}=this.div.getBoundingClientRect();this.parent.findNewParent(this,x$3,y$3)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:x$2,y:y$2}=this,[bx,by]=this.#h();x$2+=bx,y$2+=by,this.div.style.left=`${(100*x$2).toFixed(2)}%`,this.div.style.top=`${(100*y$2).toFixed(2)}%`,this.div.scrollIntoView({block:`nearest`})}#h(){let[parentWidth,parentHeight]=this.parentDimensions,{_borderLineWidth}=AnnotationEditor,x$2=_borderLineWidth/parentWidth,y$2=_borderLineWidth/parentHeight;switch(this.rotation){case 90:return[-x$2,y$2];case 180:return[x$2,y$2];case 270:return[x$2,-y$2];default:return[-x$2,-y$2]}}fixAndSetPosition(){let[pageWidth,pageHeight]=this.pageDimensions,{x:x$2,y:y$2,width,height}=this;switch(width*=pageWidth,height*=pageHeight,x$2*=pageWidth,y$2*=pageHeight,this.rotation){case 0:x$2=Math.max(0,Math.min(pageWidth-width,x$2)),y$2=Math.max(0,Math.min(pageHeight-height,y$2));break;case 90:x$2=Math.max(0,Math.min(pageWidth-height,x$2)),y$2=Math.min(pageHeight,Math.max(width,y$2));break;case 180:x$2=Math.min(pageWidth,Math.max(width,x$2)),y$2=Math.min(pageHeight,Math.max(height,y$2));break;case 270:x$2=Math.min(pageWidth,Math.max(height,x$2)),y$2=Math.max(0,Math.min(pageHeight-width,y$2));break}this.x=x$2/=pageWidth,this.y=y$2/=pageHeight;let[bx,by]=this.#h();x$2+=bx,y$2+=by;let{style:style$3}=this.div;style$3.left=`${(100*x$2).toFixed(2)}%`,style$3.top=`${(100*y$2).toFixed(2)}%`,this.moveInDOM()}static#g(x$2,y$2,angle){switch(angle){case 90:return[y$2,-x$2];case 180:return[-x$2,-y$2];case 270:return[-y$2,x$2];default:return[x$2,y$2]}}screenToPageTranslation(x$2,y$2){return AnnotationEditor.#g(x$2,y$2,this.parentRotation)}pageTranslationToScreen(x$2,y$2){return AnnotationEditor.#g(x$2,y$2,360-this.parentRotation)}#_(rotation){switch(rotation){case 90:{let[pageWidth,pageHeight]=this.pageDimensions;return[0,-pageWidth/pageHeight,pageHeight/pageWidth,0]}case 180:return[-1,0,0,-1];case 270:{let[pageWidth,pageHeight]=this.pageDimensions;return[0,pageWidth/pageHeight,-pageHeight/pageWidth,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale,pageDimensions:[pageWidth,pageHeight]}=this,scaledWidth=pageWidth*parentScale,scaledHeight=pageHeight*parentScale;return _util.FeatureTest.isCSSRoundSupported?[Math.round(scaledWidth),Math.round(scaledHeight)]:[scaledWidth,scaledHeight]}setDims(width,height){let[parentWidth,parentHeight]=this.parentDimensions;this.div.style.width=`${(100*width/parentWidth).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*height/parentHeight).toFixed(2)}%`),this.#n?.classList.toggle(`small`,width<AnnotationEditor.SMALL_EDITOR_SIZE||height<AnnotationEditor.SMALL_EDITOR_SIZE)}fixDims(){let{style:style$3}=this.div,{height,width}=style$3,widthPercent=width.endsWith(`%`),heightPercent=!this.#a&&height.endsWith(`%`);if(widthPercent&&heightPercent)return;let[parentWidth,parentHeight]=this.parentDimensions;widthPercent||(style$3.width=`${(100*parseFloat(width)/parentWidth).toFixed(2)}%`),!this.#a&&!heightPercent&&(style$3.height=`${(100*parseFloat(height)/parentHeight).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#v(){if(this.#o)return;this.#o=document.createElement(`div`),this.#o.classList.add(`resizers`);let classes=[`topLeft`,`topRight`,`bottomRight`,`bottomLeft`];this._willKeepAspectRatio||classes.push(`topMiddle`,`middleRight`,`bottomMiddle`,`middleLeft`);for(let name of classes){let div=document.createElement(`div`);this.#o.append(div),div.classList.add(`resizer`,name),div.addEventListener(`pointerdown`,this.#y.bind(this,name)),div.addEventListener(`contextmenu`,_display_utils.noContextMenu)}this.div.prepend(this.#o)}#y(name,event){event.preventDefault();let{isMac}=_util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac)return;let boundResizerPointermove=this.#b.bind(this,name),savedDraggable=this._isDraggable;this._isDraggable=!1;let pointerMoveOptions={passive:!0,capture:!0};window.addEventListener(`pointermove`,boundResizerPointermove,pointerMoveOptions);let savedX=this.x,savedY=this.y,savedWidth=this.width,savedHeight=this.height,savedParentCursor=this.parent.div.style.cursor,savedCursor=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(event.target).cursor;let pointerUpCallback=()=>{this._isDraggable=savedDraggable,window.removeEventListener(`pointerup`,pointerUpCallback),window.removeEventListener(`blur`,pointerUpCallback),window.removeEventListener(`pointermove`,boundResizerPointermove,pointerMoveOptions),this.parent.div.style.cursor=savedParentCursor,this.div.style.cursor=savedCursor;let newX=this.x,newY=this.y,newWidth=this.width,newHeight=this.height;newX===savedX&&newY===savedY&&newWidth===savedWidth&&newHeight===savedHeight||this.addCommands({cmd:()=>{this.width=newWidth,this.height=newHeight,this.x=newX,this.y=newY;let[parentWidth,parentHeight]=this.parentDimensions;this.setDims(parentWidth*newWidth,parentHeight*newHeight),this.fixAndSetPosition()},undo:()=>{this.width=savedWidth,this.height=savedHeight,this.x=savedX,this.y=savedY;let[parentWidth,parentHeight]=this.parentDimensions;this.setDims(parentWidth*savedWidth,parentHeight*savedHeight),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener(`pointerup`,pointerUpCallback),window.addEventListener(`blur`,pointerUpCallback)}#b(name,event){let[parentWidth,parentHeight]=this.parentDimensions,savedX=this.x,savedY=this.y,savedWidth=this.width,savedHeight=this.height,minWidth=AnnotationEditor.MIN_SIZE/parentWidth,minHeight=AnnotationEditor.MIN_SIZE/parentHeight,round=x$2=>Math.round(x$2*1e4)/1e4,rotationMatrix=this.#_(this.rotation),transf=(x$2,y$2)=>[rotationMatrix[0]*x$2+rotationMatrix[2]*y$2,rotationMatrix[1]*x$2+rotationMatrix[3]*y$2],invRotationMatrix=this.#_(360-this.rotation),invTransf=(x$2,y$2)=>[invRotationMatrix[0]*x$2+invRotationMatrix[2]*y$2,invRotationMatrix[1]*x$2+invRotationMatrix[3]*y$2],getPoint,getOpposite,isDiagonal=!1,isHorizontal=!1;switch(name){case`topLeft`:isDiagonal=!0,getPoint=(w$1,h$3)=>[0,0],getOpposite=(w$1,h$3)=>[w$1,h$3];break;case`topMiddle`:getPoint=(w$1,h$3)=>[w$1/2,0],getOpposite=(w$1,h$3)=>[w$1/2,h$3];break;case`topRight`:isDiagonal=!0,getPoint=(w$1,h$3)=>[w$1,0],getOpposite=(w$1,h$3)=>[0,h$3];break;case`middleRight`:isHorizontal=!0,getPoint=(w$1,h$3)=>[w$1,h$3/2],getOpposite=(w$1,h$3)=>[0,h$3/2];break;case`bottomRight`:isDiagonal=!0,getPoint=(w$1,h$3)=>[w$1,h$3],getOpposite=(w$1,h$3)=>[0,0];break;case`bottomMiddle`:getPoint=(w$1,h$3)=>[w$1/2,h$3],getOpposite=(w$1,h$3)=>[w$1/2,0];break;case`bottomLeft`:isDiagonal=!0,getPoint=(w$1,h$3)=>[0,h$3],getOpposite=(w$1,h$3)=>[w$1,0];break;case`middleLeft`:isHorizontal=!0,getPoint=(w$1,h$3)=>[0,h$3/2],getOpposite=(w$1,h$3)=>[w$1,h$3/2];break}let point=getPoint(savedWidth,savedHeight),oppositePoint=getOpposite(savedWidth,savedHeight),transfOppositePoint=transf(...oppositePoint),oppositeX=round(savedX+transfOppositePoint[0]),oppositeY=round(savedY+transfOppositePoint[1]),ratioX=1,ratioY=1,[deltaX,deltaY]=this.screenToPageTranslation(event.movementX,event.movementY);if([deltaX,deltaY]=invTransf(deltaX/parentWidth,deltaY/parentHeight),isDiagonal){let oldDiag=Math.hypot(savedWidth,savedHeight);ratioX=ratioY=Math.max(Math.min(Math.hypot(oppositePoint[0]-point[0]-deltaX,oppositePoint[1]-point[1]-deltaY)/oldDiag,1/savedWidth,1/savedHeight),minWidth/savedWidth,minHeight/savedHeight)}else isHorizontal?ratioX=Math.max(minWidth,Math.min(1,Math.abs(oppositePoint[0]-point[0]-deltaX)))/savedWidth:ratioY=Math.max(minHeight,Math.min(1,Math.abs(oppositePoint[1]-point[1]-deltaY)))/savedHeight;let newWidth=round(savedWidth*ratioX),newHeight=round(savedHeight*ratioY);transfOppositePoint=transf(...getOpposite(newWidth,newHeight));let newX=oppositeX-transfOppositePoint[0],newY=oppositeY-transfOppositePoint[1];this.width=newWidth,this.height=newHeight,this.x=newX,this.y=newY,this.setDims(parentWidth*newWidth,parentHeight*newHeight),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;let altText=this.#n=document.createElement(`button`);altText.className=`altText`;let msg=await AnnotationEditor._l10nPromise.get(`editor_alt_text_button_label`);altText.textContent=msg,altText.setAttribute(`aria-label`,msg),altText.tabIndex=`0`,altText.addEventListener(`contextmenu`,_display_utils.noContextMenu),altText.addEventListener(`pointerdown`,event=>event.stopPropagation()),altText.addEventListener(`click`,event=>{event.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),altText.addEventListener(`keydown`,event=>{event.target===altText&&event.key===`Enter`&&(event.preventDefault(),this._uiManager.editAltText(this))}),this.#x(),this.div.append(altText),AnnotationEditor.SMALL_EDITOR_SIZE||=Math.min(128,Math.round(altText.getBoundingClientRect().width*1.4))}async#x(){let button=this.#n;if(!button)return;if(!this.#e&&!this.#t){button.classList.remove(`done`),this.#r?.remove();return}AnnotationEditor._l10nPromise.get(`editor_alt_text_edit_button_label`).then(msg=>{button.setAttribute(`aria-label`,msg)});let tooltip=this.#r;if(!tooltip){this.#r=tooltip=document.createElement(`span`),tooltip.className=`tooltip`,tooltip.setAttribute(`role`,`tooltip`);let id$3=tooltip.id=`alt-text-tooltip-${this.id}`;button.setAttribute(`aria-describedby`,id$3);let DELAY_TO_SHOW_TOOLTIP=100;button.addEventListener(`mouseenter`,()=>{this.#i=setTimeout(()=>{this.#i=null,this.#r.classList.add(`show`),this._uiManager._eventBus.dispatch(`reporttelemetry`,{source:this,details:{type:`editing`,subtype:this.editorType,data:{action:`alt_text_tooltip`}}})},100)}),button.addEventListener(`mouseleave`,()=>{clearTimeout(this.#i),this.#i=null,this.#r?.classList.remove(`show`)})}button.classList.add(`done`),tooltip.innerText=this.#t?await AnnotationEditor._l10nPromise.get(`editor_alt_text_decorative_tooltip`):this.#e,tooltip.parentNode||button.append(tooltip)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText,decorative}){this.#e===altText&&this.#t===decorative||(this.#e=altText,this.#t=decorative,this.#x())}render(){this.div=document.createElement(`div`),this.div.setAttribute(`data-editor-rotation`,(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute(`id`,this.id),this.div.setAttribute(`tabIndex`,0),this.setInForeground(),this.div.addEventListener(`focusin`,this.#s),this.div.addEventListener(`focusout`,this.#c);let[parentWidth,parentHeight]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*parentHeight/parentWidth).toFixed(2)}%`,this.div.style.maxHeight=`${(100*parentWidth/parentHeight).toFixed(2)}%`);let[tx,ty]=this.getInitialTranslation();return this.translate(tx,ty),(0,_tools.bindEvents)(this,this.div,[`pointerdown`]),this.div}pointerdown(event){let{isMac}=_util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){event.preventDefault();return}this.#l=!0,this.#S(event)}#S(event){if(!this._isDraggable)return;let isSelected=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let pointerMoveOptions,pointerMoveCallback;isSelected&&(pointerMoveOptions={passive:!0,capture:!0},pointerMoveCallback=e$4=>{let[tx,ty]=this.screenToPageTranslation(e$4.movementX,e$4.movementY);this._uiManager.dragSelectedEditors(tx,ty)},window.addEventListener(`pointermove`,pointerMoveCallback,pointerMoveOptions));let pointerUpCallback=()=>{if(window.removeEventListener(`pointerup`,pointerUpCallback),window.removeEventListener(`blur`,pointerUpCallback),isSelected&&window.removeEventListener(`pointermove`,pointerMoveCallback,pointerMoveOptions),this.#l=!1,!this._uiManager.endDragSession()){let{isMac}=_util.FeatureTest.platform;event.ctrlKey&&!isMac||event.shiftKey||event.metaKey&&isMac?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener(`pointerup`,pointerUpCallback),window.addEventListener(`blur`,pointerUpCallback)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(parent,x$2,y$2){parent.changeParent(this),this.x=x$2,this.y=y$2,this.fixAndSetPosition()}getRect(tx,ty){let scale$1=this.parentScale,[pageWidth,pageHeight]=this.pageDimensions,[pageX,pageY]=this.pageTranslation,shiftX$1=tx/scale$1,shiftY$1=ty/scale$1,x$2=this.x*pageWidth,y$2=this.y*pageHeight,width=this.width*pageWidth,height=this.height*pageHeight;switch(this.rotation){case 0:return[x$2+shiftX$1+pageX,pageHeight-y$2-shiftY$1-height+pageY,x$2+shiftX$1+width+pageX,pageHeight-y$2-shiftY$1+pageY];case 90:return[x$2+shiftY$1+pageX,pageHeight-y$2+shiftX$1+pageY,x$2+shiftY$1+height+pageX,pageHeight-y$2+shiftX$1+width+pageY];case 180:return[x$2-shiftX$1-width+pageX,pageHeight-y$2+shiftY$1+pageY,x$2-shiftX$1+pageX,pageHeight-y$2+shiftY$1+height+pageY];case 270:return[x$2-shiftY$1-height+pageX,pageHeight-y$2-shiftX$1-width+pageY,x$2-shiftY$1+pageX,pageHeight-y$2-shiftX$1+pageY];default:throw Error(`Invalid rotation`)}}getRectInCurrentCoords(rect,pageHeight){let[x1,y1,x2,y2]=rect,width=x2-x1,height=y2-y1;switch(this.rotation){case 0:return[x1,pageHeight-y2,width,height];case 90:return[x1,pageHeight-y1,height,width];case 180:return[x2,pageHeight-y1,width,height];case 270:return[x2,pageHeight-y2,height,width];default:throw Error(`Invalid rotation`)}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener(`focusin`,this.#s),this.div?.addEventListener(`focusout`,this.#c)}serialize(isForCopying=!1,context=null){(0,_util.unreachable)(`An editor must be serializable`)}static deserialize(data,parent,uiManager){let editor=new this.prototype.constructor({parent,id:parent.getNextId(),uiManager});editor.rotation=data.rotation;let[pageWidth,pageHeight]=editor.pageDimensions,[x$2,y$2,width,height]=editor.getRectInCurrentCoords(data.rect,pageHeight);return editor.x=x$2/pageWidth,editor.y=y$2/pageHeight,editor.width=width/pageWidth,editor.height=height/pageHeight,editor}remove(){this.div.removeEventListener(`focusin`,this.#s),this.div.removeEventListener(`focusout`,this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#r=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#v(),this.#o.classList.remove(`hidden`))}select(){this.makeResizable(),this.div?.classList.add(`selectedEditor`)}unselect(){this.#o?.classList.add(`hidden`),this.div?.classList.remove(`selectedEditor`),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(type,value){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#u}set isEditing(value){this.#u=value,this.parent&&(value?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(width,height){this.#a=!0;let aspectRatio$1=width/height,{style:style$3}=this.div;style$3.aspectRatio=aspectRatio$1,style$3.height=`auto`}static get MIN_SIZE(){return 16}}exports$1.AnnotationEditor=AnnotationEditor;class FakeEditor extends AnnotationEditor{constructor(params){super(params),this.annotationElementId=params.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.KeyboardManager=exports$1.CommandManager=exports$1.ColorManager=exports$1.AnnotationEditorUIManager=void 0,exports$1.bindEvents=bindEvents$1,exports$1.opacityToHex=opacityToHex;var _util=__w_pdfjs_require__$1(1),_display_utils=__w_pdfjs_require__$1(6);function bindEvents$1(obj,element,names){for(let name of names)element.addEventListener(name,obj[name].bind(obj))}function opacityToHex(opacity){return Math.round(Math.min(255,Math.max(1,255*opacity))).toString(16).padStart(2,`0`)}class IdManager{#e=0;getId(){return`${_util.AnnotationEditorPrefix}${this.#e++}`}}class ImageManager{#e=(0,_util.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){let svg=`data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>`,ctx=new OffscreenCanvas(1,3).getContext(`2d`),image=new Image;image.src=`data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>`;let promise=image.decode().then(()=>(ctx.drawImage(image,0,0,1,1,0,0,1,3),new Uint32Array(ctx.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,_util.shadow)(this,`_isSVGFittingCanvas`,promise)}async#r(key$1,rawData){this.#n||=new Map;let data=this.#n.get(key$1);if(data===null)return null;if(data?.bitmap)return data.refCounter+=1,data;try{data||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let image;if(typeof rawData==`string`){data.url=rawData;let response=await fetch(rawData);if(!response.ok)throw Error(response.statusText);image=await response.blob()}else image=data.file=rawData;if(image.type===`image/svg+xml`){let mustRemoveAspectRatioPromise=ImageManager._isSVGFittingCanvas,fileReader=new FileReader,imageElement=new Image,imagePromise=new Promise((resolve,reject)=>{imageElement.onload=()=>{data.bitmap=imageElement,data.isSvg=!0,resolve()},fileReader.onload=async()=>{let url=data.svgUrl=fileReader.result;imageElement.src=await mustRemoveAspectRatioPromise?`${url}#svgView(preserveAspectRatio(none))`:url},imageElement.onerror=fileReader.onerror=reject});fileReader.readAsDataURL(image),await imagePromise}else data.bitmap=await createImageBitmap(image);data.refCounter=1}catch(e$4){console.error(e$4),data=null}return this.#n.set(key$1,data),data&&this.#n.set(data.id,data),data}async getFromFile(file){let{lastModified,name,size,type}=file;return this.#r(`${lastModified}_${name}_${size}_${type}`,file)}async getFromUrl(url){return this.#r(url,url)}async getFromId(id$3){this.#n||=new Map;let data=this.#n.get(id$3);return data?data.bitmap?(data.refCounter+=1,data):data.file?this.getFromFile(data.file):this.getFromUrl(data.url):null}getSvgUrl(id$3){let data=this.#n.get(id$3);return data?.isSvg?data.svgUrl:null}deleteId(id$3){this.#n||=new Map;let data=this.#n.get(id$3);data&&(--data.refCounter,data.refCounter===0&&(data.bitmap=null))}isValidId(id$3){return id$3.startsWith(`image_${this.#e}_`)}}class CommandManager{#e=[];#t=!1;#n;#r=-1;constructor(maxSize=128){this.#n=maxSize}add({cmd,undo,mustExec,type=NaN,overwriteIfSameType=!1,keepUndo=!1}){if(mustExec&&cmd(),this.#t)return;let save={cmd,undo,type};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(save);return}if(overwriteIfSameType&&this.#e[this.#r].type===type){keepUndo&&(save.undo=this.#e[this.#r].undo),this.#e[this.#r]=save;return}let next=this.#r+1;next===this.#n?this.#e.splice(0,1):(this.#r=next,next<this.#e.length&&this.#e.splice(next)),this.#e.push(save)}undo(){this.#r!==-1&&(this.#t=!0,this.#e[this.#r].undo(),this.#t=!1,--this.#r)}redo(){this.#r<this.#e.length-1&&(this.#r+=1,this.#t=!0,this.#e[this.#r].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}destroy(){this.#e=null}}exports$1.CommandManager=CommandManager;class KeyboardManager{constructor(callbacks){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac}=_util.FeatureTest.platform;for(let[keys,callback,options$1={}]of callbacks)for(let key$1 of keys){let isMacKey=key$1.startsWith(`mac+`);isMac&&isMacKey?(this.callbacks.set(key$1.slice(4),{callback,options:options$1}),this.allKeys.add(key$1.split(`+`).at(-1))):!isMac&&!isMacKey&&(this.callbacks.set(key$1,{callback,options:options$1}),this.allKeys.add(key$1.split(`+`).at(-1)))}}#e(event){event.altKey&&this.buffer.push(`alt`),event.ctrlKey&&this.buffer.push(`ctrl`),event.metaKey&&this.buffer.push(`meta`),event.shiftKey&&this.buffer.push(`shift`),this.buffer.push(event.key);let str=this.buffer.join(`+`);return this.buffer.length=0,str}exec(self$1,event){if(!this.allKeys.has(event.key))return;let info=this.callbacks.get(this.#e(event));if(!info)return;let{callback,options:{bubbles=!1,args=[],checker=null}}=info;checker&&!checker(self$1,event)||(callback.bind(self$1,...args)(),bubbles||(event.stopPropagation(),event.preventDefault()))}}exports$1.KeyboardManager=KeyboardManager;class ColorManager{static _colorsMapping=new Map([[`CanvasText`,[0,0,0]],[`Canvas`,[255,255,255]]]);get _colors(){let colors=new Map([[`CanvasText`,null],[`Canvas`,null]]);return(0,_display_utils.getColorValues)(colors),(0,_util.shadow)(this,`_colors`,colors)}convert(color$2){let rgb$1=(0,_display_utils.getRGB)(color$2);if(!window.matchMedia(`(forced-colors: active)`).matches)return rgb$1;for(let[name,RGB]of this._colors)if(RGB.every((x$2,i$4)=>x$2===rgb$1[i$4]))return ColorManager._colorsMapping.get(name);return rgb$1}getHexCode(name){let rgb$1=this._colors.get(name);return rgb$1?_util.Util.makeHexColor(...rgb$1):name}}exports$1.ColorManager=ColorManager;class AnnotationEditorUIManager{#e=null;#t=new Map;#n=new Map;#r=null;#i=null;#a=new CommandManager;#o=0;#s=new Set;#c=null;#l=null;#u=new Set;#d=null;#f=new IdManager;#p=!1;#m=!1;#h=null;#g=_util.AnnotationEditorType.NONE;#_=new Set;#v=null;#y=this.blur.bind(this);#b=this.focus.bind(this);#x=this.copy.bind(this);#S=this.cut.bind(this);#C=this.paste.bind(this);#w=this.keydown.bind(this);#T=this.onEditingAction.bind(this);#E=this.onPageChanging.bind(this);#D=this.onScaleChanging.bind(this);#O=this.onRotationChanging.bind(this);#k={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#A=[0,0];#j=null;#M=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let proto=AnnotationEditorUIManager.prototype,arrowChecker=self$1=>{let{activeElement:activeElement$2}=document;return activeElement$2&&self$1.#M.contains(activeElement$2)&&self$1.hasSomethingToControl()},small=this.TRANSLATE_SMALL,big=this.TRANSLATE_BIG;return(0,_util.shadow)(this,`_keyboardManager`,new KeyboardManager([[[`ctrl+a`,`mac+meta+a`],proto.selectAll],[[`ctrl+z`,`mac+meta+z`],proto.undo],[[`ctrl+y`,`ctrl+shift+z`,`mac+meta+shift+z`,`ctrl+shift+Z`,`mac+meta+shift+Z`],proto.redo],[[`Backspace`,`alt+Backspace`,`ctrl+Backspace`,`shift+Backspace`,`mac+Backspace`,`mac+alt+Backspace`,`mac+ctrl+Backspace`,`Delete`,`ctrl+Delete`,`shift+Delete`,`mac+Delete`],proto.delete],[[`Escape`,`mac+Escape`],proto.unselectAll],[[`ArrowLeft`,`mac+ArrowLeft`],proto.translateSelectedEditors,{args:[-small,0],checker:arrowChecker}],[[`ctrl+ArrowLeft`,`mac+shift+ArrowLeft`],proto.translateSelectedEditors,{args:[-big,0],checker:arrowChecker}],[[`ArrowRight`,`mac+ArrowRight`],proto.translateSelectedEditors,{args:[small,0],checker:arrowChecker}],[[`ctrl+ArrowRight`,`mac+shift+ArrowRight`],proto.translateSelectedEditors,{args:[big,0],checker:arrowChecker}],[[`ArrowUp`,`mac+ArrowUp`],proto.translateSelectedEditors,{args:[0,-small],checker:arrowChecker}],[[`ctrl+ArrowUp`,`mac+shift+ArrowUp`],proto.translateSelectedEditors,{args:[0,-big],checker:arrowChecker}],[[`ArrowDown`,`mac+ArrowDown`],proto.translateSelectedEditors,{args:[0,small],checker:arrowChecker}],[[`ctrl+ArrowDown`,`mac+shift+ArrowDown`],proto.translateSelectedEditors,{args:[0,big],checker:arrowChecker}]]))}constructor(container,viewer,altTextManager,eventBus,pdfDocument,pageColors){this.#M=container,this.#N=viewer,this.#r=altTextManager,this._eventBus=eventBus,this._eventBus._on(`editingaction`,this.#T),this._eventBus._on(`pagechanging`,this.#E),this._eventBus._on(`scalechanging`,this.#D),this._eventBus._on(`rotationchanging`,this.#O),this.#i=pdfDocument.annotationStorage,this.#d=pdfDocument.filterFactory,this.#v=pageColors,this.viewParameters={realScale:_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#L(),this.#F(),this._eventBus._off(`editingaction`,this.#T),this._eventBus._off(`pagechanging`,this.#E),this._eventBus._off(`scalechanging`,this.#D),this._eventBus._off(`rotationchanging`,this.#O);for(let layer of this.#n.values())layer.destroy();this.#n.clear(),this.#t.clear(),this.#u.clear(),this.#e=null,this.#_.clear(),this.#a.destroy(),this.#r.destroy()}get hcmFilter(){return(0,_util.shadow)(this,`hcmFilter`,this.#v?this.#d.addHCMFilter(this.#v.foreground,this.#v.background):`none`)}get direction(){return(0,_util.shadow)(this,`direction`,getComputedStyle(this.#M).direction)}editAltText(editor){this.#r?.editAltText(this,editor)}onPageChanging({pageNumber}){this.#o=pageNumber-1}focusMainContainer(){this.#M.focus()}findParent(x$2,y$2){for(let layer of this.#n.values()){let{x:layerX,y:layerY,width,height}=layer.div.getBoundingClientRect();if(x$2>=layerX&&x$2<=layerX+width&&y$2>=layerY&&y$2<=layerY+height)return layer}return null}disableUserSelect(value=!1){this.#N.classList.toggle(`noUserSelect`,value)}addShouldRescale(editor){this.#u.add(editor)}removeShouldRescale(editor){this.#u.delete(editor)}onScaleChanging({scale:scale$1}){this.commitOrRemove(),this.viewParameters.realScale=scale$1*_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS;for(let editor of this.#u)editor.onScaleChanging()}onRotationChanging({pagesRotation}){this.commitOrRemove(),this.viewParameters.rotation=pagesRotation}addToAnnotationStorage(editor){!editor.isEmpty()&&this.#i&&!this.#i.has(editor.id)&&this.#i.setValue(editor.id,editor)}#P(){window.addEventListener(`focus`,this.#b),window.addEventListener(`blur`,this.#y)}#F(){window.removeEventListener(`focus`,this.#b),window.removeEventListener(`blur`,this.#y)}blur(){if(!this.hasSelection)return;let{activeElement:activeElement$2}=document;for(let editor of this.#_)if(editor.div.contains(activeElement$2)){this.#h=[editor,activeElement$2],editor._focusEventsAllowed=!1;break}}focus(){if(!this.#h)return;let[lastEditor,lastActiveElement]=this.#h;this.#h=null,lastActiveElement.addEventListener(`focusin`,()=>{lastEditor._focusEventsAllowed=!0},{once:!0}),lastActiveElement.focus()}#I(){window.addEventListener(`keydown`,this.#w,{capture:!0})}#L(){window.removeEventListener(`keydown`,this.#w,{capture:!0})}#R(){document.addEventListener(`copy`,this.#x),document.addEventListener(`cut`,this.#S),document.addEventListener(`paste`,this.#C)}#z(){document.removeEventListener(`copy`,this.#x),document.removeEventListener(`cut`,this.#S),document.removeEventListener(`paste`,this.#C)}addEditListeners(){this.#I(),this.#R()}removeEditListeners(){this.#L(),this.#z()}copy(event){if(event.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;let editors=[];for(let editor of this.#_){let serialized=editor.serialize(!0);serialized&&editors.push(serialized)}editors.length!==0&&event.clipboardData.setData(`application/pdfjs`,JSON.stringify(editors))}cut(event){this.copy(event),this.delete()}paste(event){event.preventDefault();let{clipboardData}=event;for(let item of clipboardData.items)for(let editorType of this.#l)if(editorType.isHandlingMimeForPasting(item.type)){editorType.paste(item,this.currentLayer);return}let data=clipboardData.getData(`application/pdfjs`);if(!data)return;try{data=JSON.parse(data)}catch(ex){(0,_util.warn)(`paste: "${ex.message}".`);return}if(!Array.isArray(data))return;this.unselectAll();let layer=this.currentLayer;try{let newEditors=[];for(let editor of data){let deserializedEditor=layer.deserialize(editor);if(!deserializedEditor)return;newEditors.push(deserializedEditor)}this.addCommands({cmd:()=>{for(let editor of newEditors)this.#W(editor);this.#K(newEditors)},undo:()=>{for(let editor of newEditors)editor.remove()},mustExec:!0})}catch(ex){(0,_util.warn)(`paste: "${ex.message}".`)}}keydown(event){this.getActive()?.shouldGetKeyboardEvents()||AnnotationEditorUIManager._keyboardManager.exec(this,event)}onEditingAction(details){[`undo`,`redo`,`delete`,`selectAll`].includes(details.name)&&this[details.name]()}#B(details){Object.entries(details).some(([key$1,value])=>this.#k[key$1]!==value)&&this._eventBus.dispatch(`annotationeditorstateschanged`,{source:this,details:Object.assign(this.#k,details)})}#V(details){this._eventBus.dispatch(`annotationeditorparamschanged`,{source:this,details})}setEditingState(isEditing){isEditing?(this.#P(),this.#I(),this.#R(),this.#B({isEditing:this.#g!==_util.AnnotationEditorType.NONE,isEmpty:this.#G(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#F(),this.#L(),this.#z(),this.#B({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(types){if(!this.#l){this.#l=types;for(let editorType of this.#l)this.#V(editorType.defaultPropertiesToUpdate)}}getId(){return this.#f.getId()}get currentLayer(){return this.#n.get(this.#o)}getLayer(pageIndex){return this.#n.get(pageIndex)}get currentPageIndex(){return this.#o}addLayer(layer){this.#n.set(layer.pageIndex,layer),this.#p?layer.enable():layer.disable()}removeLayer(layer){this.#n.delete(layer.pageIndex)}updateMode(mode,editId=null){if(this.#g!==mode){if(this.#g=mode,mode===_util.AnnotationEditorType.NONE){this.setEditingState(!1),this.#U();return}this.setEditingState(!0),this.#H(),this.unselectAll();for(let layer of this.#n.values())layer.updateMode(mode);if(editId){for(let editor of this.#t.values())if(editor.annotationElementId===editId){this.setSelected(editor),editor.enterInEditMode();break}}}}updateToolbar(mode){mode!==this.#g&&this._eventBus.dispatch(`switchannotationeditormode`,{source:this,mode})}updateParams(type,value){if(this.#l){if(type===_util.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(type);return}for(let editor of this.#_)editor.updateParams(type,value);for(let editorType of this.#l)editorType.updateDefaultParams(type,value)}}enableWaiting(mustWait=!1){if(this.#m!==mustWait){this.#m=mustWait;for(let layer of this.#n.values())mustWait?layer.disableClick():layer.enableClick(),layer.div.classList.toggle(`waiting`,mustWait)}}#H(){if(!this.#p){this.#p=!0;for(let layer of this.#n.values())layer.enable()}}#U(){if(this.unselectAll(),this.#p){this.#p=!1;for(let layer of this.#n.values())layer.disable()}}getEditors(pageIndex){let editors=[];for(let editor of this.#t.values())editor.pageIndex===pageIndex&&editors.push(editor);return editors}getEditor(id$3){return this.#t.get(id$3)}addEditor(editor){this.#t.set(editor.id,editor)}removeEditor(editor){this.#t.delete(editor.id),this.unselect(editor),(!editor.annotationElementId||!this.#s.has(editor.annotationElementId))&&this.#i?.remove(editor.id)}addDeletedAnnotationElement(editor){this.#s.add(editor.annotationElementId),editor.deleted=!0}isDeletedAnnotationElement(annotationElementId){return this.#s.has(annotationElementId)}removeDeletedAnnotationElement(editor){this.#s.delete(editor.annotationElementId),editor.deleted=!1}#W(editor){let layer=this.#n.get(editor.pageIndex);layer?layer.addOrRebuild(editor):this.addEditor(editor)}setActiveEditor(editor){this.#e!==editor&&(this.#e=editor,editor&&this.#V(editor.propertiesToUpdate))}toggleSelected(editor){if(this.#_.has(editor)){this.#_.delete(editor),editor.unselect(),this.#B({hasSelectedEditor:this.hasSelection});return}this.#_.add(editor),editor.select(),this.#V(editor.propertiesToUpdate),this.#B({hasSelectedEditor:!0})}setSelected(editor){for(let ed of this.#_)ed!==editor&&ed.unselect();this.#_.clear(),this.#_.add(editor),editor.select(),this.#V(editor.propertiesToUpdate),this.#B({hasSelectedEditor:!0})}isSelected(editor){return this.#_.has(editor)}unselect(editor){editor.unselect(),this.#_.delete(editor),this.#B({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}undo(){this.#a.undo(),this.#B({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#G()})}redo(){this.#a.redo(),this.#B({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#G()})}addCommands(params){this.#a.add(params),this.#B({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#G()})}#G(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(let editor of this.#t.values())return editor.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let editors=[...this.#_];this.addCommands({cmd:()=>{for(let editor of editors)editor.remove()},undo:()=>{for(let editor of editors)this.#W(editor)},mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#K(editors){this.#_.clear();for(let editor of editors)editor.isEmpty()||(this.#_.add(editor),editor.select());this.#B({hasSelectedEditor:!0})}selectAll(){for(let editor of this.#_)editor.commit();this.#K(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(let editor of this.#_)editor.unselect();this.#_.clear(),this.#B({hasSelectedEditor:!1})}}translateSelectedEditors(x$2,y$2,noCommit=!1){if(noCommit||this.commitOrRemove(),!this.hasSelection)return;this.#A[0]+=x$2,this.#A[1]+=y$2;let[totalX,totalY]=this.#A,editors=[...this.#_],TIME_TO_WAIT=1e3;this.#j&&clearTimeout(this.#j),this.#j=setTimeout(()=>{this.#j=null,this.#A[0]=this.#A[1]=0,this.addCommands({cmd:()=>{for(let editor of editors)this.#t.has(editor.id)&&editor.translateInPage(totalX,totalY)},undo:()=>{for(let editor of editors)this.#t.has(editor.id)&&editor.translateInPage(-totalX,-totalY)},mustExec:!1})},1e3);for(let editor of editors)editor.translateInPage(x$2,y$2)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(let editor of this.#_)this.#c.set(editor,{savedX:editor.x,savedY:editor.y,savedPageIndex:editor.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);let map=this.#c;this.#c=null;let mustBeAddedInUndoStack=!1;for(let[{x:x$2,y:y$2,pageIndex},value]of map)value.newX=x$2,value.newY=y$2,value.newPageIndex=pageIndex,mustBeAddedInUndoStack||=x$2!==value.savedX||y$2!==value.savedY||pageIndex!==value.savedPageIndex;if(!mustBeAddedInUndoStack)return!1;let move$1=(editor,x$2,y$2,pageIndex)=>{if(this.#t.has(editor.id)){let parent=this.#n.get(pageIndex);parent?editor._setParentAndPosition(parent,x$2,y$2):(editor.pageIndex=pageIndex,editor.x=x$2,editor.y=y$2)}};return this.addCommands({cmd:()=>{for(let[editor,{newX,newY,newPageIndex}]of map)move$1(editor,newX,newY,newPageIndex)},undo:()=>{for(let[editor,{savedX,savedY,savedPageIndex}]of map)move$1(editor,savedX,savedY,savedPageIndex)},mustExec:!0}),!0}dragSelectedEditors(tx,ty){if(this.#c)for(let editor of this.#c.keys())editor.drag(tx,ty)}rebuild(editor){if(editor.parent===null){let parent=this.getLayer(editor.pageIndex);parent?(parent.changeParent(editor),parent.addOrRebuild(editor)):(this.addEditor(editor),this.addToAnnotationStorage(editor),editor.rebuild())}else editor.parent.addOrRebuild(editor)}isActive(editor){return this.#e===editor}getActive(){return this.#e}getMode(){return this.#g}get imageManager(){return(0,_util.shadow)(this,`imageManager`,new ImageManager)}}exports$1.AnnotationEditorUIManager=AnnotationEditorUIManager}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.StatTimer=exports$1.RenderingCancelledException=exports$1.PixelsPerInch=exports$1.PageViewport=exports$1.PDFDateString=exports$1.DOMStandardFontDataFactory=exports$1.DOMSVGFactory=exports$1.DOMFilterFactory=exports$1.DOMCanvasFactory=exports$1.DOMCMapReaderFactory=void 0,exports$1.deprecated=deprecated,exports$1.getColorValues=getColorValues,exports$1.getCurrentTransform=getCurrentTransform,exports$1.getCurrentTransformInverse=getCurrentTransformInverse,exports$1.getFilenameFromUrl=getFilenameFromUrl,exports$1.getPdfFilenameFromUrl=getPdfFilenameFromUrl,exports$1.getRGB=getRGB,exports$1.getXfaPageViewport=getXfaPageViewport,exports$1.isDataScheme=isDataScheme,exports$1.isPdfFile=isPdfFile,exports$1.isValidFetchUrl=isValidFetchUrl,exports$1.loadScript=loadScript,exports$1.noContextMenu=noContextMenu,exports$1.setLayerDimensions=setLayerDimensions;var _base_factory=__w_pdfjs_require__$1(7),_util=__w_pdfjs_require__$1(1);let SVG_NS=`http://www.w3.org/2000/svg`;class PixelsPerInch{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}exports$1.PixelsPerInch=PixelsPerInch;class DOMFilterFactory extends _base_factory.BaseFilterFactory{#e;#t;#n;#r;#i;#a;#o;#s;#c;#l;#u=0;constructor({docId,ownerDocument=globalThis.document}={}){super(),this.#n=docId,this.#r=ownerDocument}get#d(){return this.#e||=new Map}get#f(){if(!this.#t){let div=this.#r.createElement(`div`),{style:style$3}=div;style$3.visibility=`hidden`,style$3.contain=`strict`,style$3.width=style$3.height=0,style$3.position=`absolute`,style$3.top=style$3.left=0,style$3.zIndex=-1;let svg=this.#r.createElementNS(SVG_NS,`svg`);svg.setAttribute(`width`,0),svg.setAttribute(`height`,0),this.#t=this.#r.createElementNS(SVG_NS,`defs`),div.append(svg),svg.append(this.#t),this.#r.body.append(div)}return this.#t}addFilter(maps){if(!maps)return`none`;let value=this.#d.get(maps);if(value)return value;let tableR,tableG,tableB,key$1;if(maps.length===1){let mapR=maps[0],buffer=Array(256);for(let i$4=0;i$4<256;i$4++)buffer[i$4]=mapR[i$4]/255;key$1=tableR=tableG=tableB=buffer.join(`,`)}else{let[mapR,mapG,mapB]=maps,bufferR=Array(256),bufferG=Array(256),bufferB=Array(256);for(let i$4=0;i$4<256;i$4++)bufferR[i$4]=mapR[i$4]/255,bufferG[i$4]=mapG[i$4]/255,bufferB[i$4]=mapB[i$4]/255;tableR=bufferR.join(`,`),tableG=bufferG.join(`,`),tableB=bufferB.join(`,`),key$1=`${tableR}${tableG}${tableB}`}if(value=this.#d.get(key$1),value)return this.#d.set(maps,value),value;let id$3=`g_${this.#n}_transfer_map_${this.#u++}`,url=`url(#${id$3})`;this.#d.set(maps,url),this.#d.set(key$1,url);let filter$2=this.#m(id$3);return this.#g(tableR,tableG,tableB,filter$2),url}addHCMFilter(fgColor,bgColor){let key$1=`${fgColor}-${bgColor}`;if(this.#a===key$1||(this.#a=key$1,this.#o=`none`,this.#i?.remove(),!fgColor||!bgColor))return this.#o;let fgRGB=this.#_(fgColor);fgColor=_util.Util.makeHexColor(...fgRGB);let bgRGB=this.#_(bgColor);if(bgColor=_util.Util.makeHexColor(...bgRGB),this.#f.style.color=``,fgColor===`#000000`&&bgColor===`#ffffff`||fgColor===bgColor)return this.#o;let map=Array(256);for(let i$4=0;i$4<=255;i$4++){let x$2=i$4/255;map[i$4]=x$2<=.03928?x$2/12.92:((x$2+.055)/1.055)**2.4}let table=map.join(`,`),id$3=`g_${this.#n}_hcm_filter`,filter$2=this.#s=this.#m(id$3);this.#g(table,table,table,filter$2),this.#p(filter$2);let getSteps=(c$3,n$4)=>{let start$2=fgRGB[c$3]/255,end$1=bgRGB[c$3]/255,arr=Array(n$4+1);for(let i$4=0;i$4<=n$4;i$4++)arr[i$4]=start$2+i$4/n$4*(end$1-start$2);return arr.join(`,`)};return this.#g(getSteps(0,5),getSteps(1,5),getSteps(2,5),filter$2),this.#o=`url(#${id$3})`,this.#o}addHighlightHCMFilter(fgColor,bgColor,newFgColor,newBgColor){let key$1=`${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;if(this.#c===key$1||(this.#c=key$1,this.#l=`none`,this.#s?.remove(),!fgColor||!bgColor))return this.#l;let[fgRGB,bgRGB]=[fgColor,bgColor].map(this.#_.bind(this)),fgGray=Math.round(.2126*fgRGB[0]+.7152*fgRGB[1]+.0722*fgRGB[2]),bgGray=Math.round(.2126*bgRGB[0]+.7152*bgRGB[1]+.0722*bgRGB[2]),[newFgRGB,newBgRGB]=[newFgColor,newBgColor].map(this.#_.bind(this));bgGray<fgGray&&([fgGray,bgGray,newFgRGB,newBgRGB]=[bgGray,fgGray,newBgRGB,newFgRGB]),this.#f.style.color=``;let getSteps=(fg,bg,n$4)=>{let arr=Array(256),step=(bgGray-fgGray)/n$4,newStart=fg/255,newStep=(bg-fg)/(255*n$4),prev=0;for(let i$4=0;i$4<=n$4;i$4++){let k$3=Math.round(fgGray+i$4*step),value=newStart+i$4*newStep;for(let j$2=prev;j$2<=k$3;j$2++)arr[j$2]=value;prev=k$3+1}for(let i$4=prev;i$4<256;i$4++)arr[i$4]=arr[prev-1];return arr.join(`,`)},id$3=`g_${this.#n}_hcm_highlight_filter`,filter$2=this.#s=this.#m(id$3);return this.#p(filter$2),this.#g(getSteps(newFgRGB[0],newBgRGB[0],5),getSteps(newFgRGB[1],newBgRGB[1],5),getSteps(newFgRGB[2],newBgRGB[2],5),filter$2),this.#l=`url(#${id$3})`,this.#l}destroy(keepHCM=!1){keepHCM&&(this.#o||this.#l)||(this.#t&&=(this.#t.parentNode.parentNode.remove(),null),this.#e&&=(this.#e.clear(),null),this.#u=0)}#p(filter$2){let feColorMatrix=this.#r.createElementNS(SVG_NS,`feColorMatrix`);feColorMatrix.setAttribute(`type`,`matrix`),feColorMatrix.setAttribute(`values`,`0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0`),filter$2.append(feColorMatrix)}#m(id$3){let filter$2=this.#r.createElementNS(SVG_NS,`filter`);return filter$2.setAttribute(`color-interpolation-filters`,`sRGB`),filter$2.setAttribute(`id`,id$3),this.#f.append(filter$2),filter$2}#h(feComponentTransfer,func,table){let feFunc=this.#r.createElementNS(SVG_NS,func);feFunc.setAttribute(`type`,`discrete`),feFunc.setAttribute(`tableValues`,table),feComponentTransfer.append(feFunc)}#g(rTable,gTable,bTable,filter$2){let feComponentTransfer=this.#r.createElementNS(SVG_NS,`feComponentTransfer`);filter$2.append(feComponentTransfer),this.#h(feComponentTransfer,`feFuncR`,rTable),this.#h(feComponentTransfer,`feFuncG`,gTable),this.#h(feComponentTransfer,`feFuncB`,bTable)}#_(color$2){return this.#f.style.color=color$2,getRGB(getComputedStyle(this.#f).getPropertyValue(`color`))}}exports$1.DOMFilterFactory=DOMFilterFactory;class DOMCanvasFactory extends _base_factory.BaseCanvasFactory{constructor({ownerDocument=globalThis.document}={}){super(),this._document=ownerDocument}_createCanvas(width,height){let canvas=this._document.createElement(`canvas`);return canvas.width=width,canvas.height=height,canvas}}exports$1.DOMCanvasFactory=DOMCanvasFactory;async function fetchData(url,asTypedArray=!1){if(isValidFetchUrl(url,document.baseURI)){let response=await fetch(url);if(!response.ok)throw Error(response.statusText);return asTypedArray?new Uint8Array(await response.arrayBuffer()):(0,_util.stringToBytes)(await response.text())}return new Promise((resolve,reject)=>{let request=new XMLHttpRequest;request.open(`GET`,url,!0),asTypedArray&&(request.responseType=`arraybuffer`),request.onreadystatechange=()=>{if(request.readyState===XMLHttpRequest.DONE){if(request.status===200||request.status===0){let data;if(asTypedArray&&request.response?data=new Uint8Array(request.response):!asTypedArray&&request.responseText&&(data=(0,_util.stringToBytes)(request.responseText)),data){resolve(data);return}}reject(Error(request.statusText))}},request.send(null)})}class DOMCMapReaderFactory extends _base_factory.BaseCMapReaderFactory{_fetchData(url,compressionType){return fetchData(url,this.isCompressed).then(data=>({cMapData:data,compressionType}))}}exports$1.DOMCMapReaderFactory=DOMCMapReaderFactory;class DOMStandardFontDataFactory extends _base_factory.BaseStandardFontDataFactory{_fetchData(url){return fetchData(url,!0)}}exports$1.DOMStandardFontDataFactory=DOMStandardFontDataFactory;class DOMSVGFactory extends _base_factory.BaseSVGFactory{_createSVG(type){return document.createElementNS(SVG_NS,type)}}exports$1.DOMSVGFactory=DOMSVGFactory;class PageViewport{constructor({viewBox,scale:scale$1,rotation,offsetX=0,offsetY=0,dontFlip=!1}){this.viewBox=viewBox,this.scale=scale$1,this.rotation=rotation,this.offsetX=offsetX,this.offsetY=offsetY;let centerX=(viewBox[2]+viewBox[0])/2,centerY=(viewBox[3]+viewBox[1])/2,rotateA,rotateB,rotateC,rotateD;switch(rotation%=360,rotation<0&&(rotation+=360),rotation){case 180:rotateA=-1,rotateB=0,rotateC=0,rotateD=1;break;case 90:rotateA=0,rotateB=1,rotateC=1,rotateD=0;break;case 270:rotateA=0,rotateB=-1,rotateC=-1,rotateD=0;break;case 0:rotateA=1,rotateB=0,rotateC=0,rotateD=-1;break;default:throw Error(`PageViewport: Invalid rotation, must be a multiple of 90 degrees.`)}dontFlip&&(rotateC=-rotateC,rotateD=-rotateD);let offsetCanvasX,offsetCanvasY,width,height;rotateA===0?(offsetCanvasX=Math.abs(centerY-viewBox[1])*scale$1+offsetX,offsetCanvasY=Math.abs(centerX-viewBox[0])*scale$1+offsetY,width=(viewBox[3]-viewBox[1])*scale$1,height=(viewBox[2]-viewBox[0])*scale$1):(offsetCanvasX=Math.abs(centerX-viewBox[0])*scale$1+offsetX,offsetCanvasY=Math.abs(centerY-viewBox[1])*scale$1+offsetY,width=(viewBox[2]-viewBox[0])*scale$1,height=(viewBox[3]-viewBox[1])*scale$1),this.transform=[rotateA*scale$1,rotateB*scale$1,rotateC*scale$1,rotateD*scale$1,offsetCanvasX-rotateA*scale$1*centerX-rotateC*scale$1*centerY,offsetCanvasY-rotateB*scale$1*centerX-rotateD*scale$1*centerY],this.width=width,this.height=height}get rawDims(){let{viewBox}=this;return(0,_util.shadow)(this,`rawDims`,{pageWidth:viewBox[2]-viewBox[0],pageHeight:viewBox[3]-viewBox[1],pageX:viewBox[0],pageY:viewBox[1]})}clone({scale:scale$1=this.scale,rotation=this.rotation,offsetX=this.offsetX,offsetY=this.offsetY,dontFlip=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale:scale$1,rotation,offsetX,offsetY,dontFlip})}convertToViewportPoint(x$2,y$2){return _util.Util.applyTransform([x$2,y$2],this.transform)}convertToViewportRectangle(rect){let topLeft=_util.Util.applyTransform([rect[0],rect[1]],this.transform),bottomRight=_util.Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]]}convertToPdfPoint(x$2,y$2){return _util.Util.applyInverseTransform([x$2,y$2],this.transform)}}exports$1.PageViewport=PageViewport;class RenderingCancelledException extends _util.BaseException{constructor(msg,extraDelay=0){super(msg,`RenderingCancelledException`),this.extraDelay=extraDelay}}exports$1.RenderingCancelledException=RenderingCancelledException;function isDataScheme(url){let ii=url.length,i$4=0;for(;i$4<ii&&url[i$4].trim()===``;)i$4++;return url.substring(i$4,i$4+5).toLowerCase()===`data:`}function isPdfFile(filename){return typeof filename==`string`&&/\.pdf$/i.test(filename)}function getFilenameFromUrl(url,onlyStripPath=!1){return onlyStripPath||([url]=url.split(/[#?]/,1)),url.substring(url.lastIndexOf(`/`)+1)}function getPdfFilenameFromUrl(url,defaultFilename=`document.pdf`){if(typeof url!=`string`)return defaultFilename;if(isDataScheme(url))return(0,_util.warn)(`getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.`),defaultFilename;let reURI=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,reFilename=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,splitURI=reURI.exec(url),suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename&&(suggestedFilename=suggestedFilename[0],suggestedFilename.includes(`%`)))try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0]}catch{}return suggestedFilename||defaultFilename}class StatTimer{started=Object.create(null);times=[];time(name){name in this.started&&(0,_util.warn)(`Timer is already running for ${name}`),this.started[name]=Date.now()}timeEnd(name){name in this.started||(0,_util.warn)(`Timer has not been started for ${name}`),this.times.push({name,start:this.started[name],end:Date.now()}),delete this.started[name]}toString(){let outBuf=[],longest=0;for(let{name}of this.times)longest=Math.max(name.length,longest);for(let{name,start:start$2,end:end$1}of this.times)outBuf.push(`${name.padEnd(longest)} ${end$1-start$2}ms\n`);return outBuf.join(``)}}exports$1.StatTimer=StatTimer;function isValidFetchUrl(url,baseUrl){try{let{protocol}=baseUrl?new URL(url,baseUrl):new URL(url);return protocol===`http:`||protocol===`https:`}catch{return!1}}function noContextMenu(e$4){e$4.preventDefault()}function loadScript(src,removeScriptElement=!1){return new Promise((resolve,reject)=>{let script=document.createElement(`script`);script.src=src,script.onload=function(evt){removeScriptElement&&script.remove(),resolve(evt)},script.onerror=function(){reject(Error(`Cannot load script at: ${script.src}`))},(document.head||document.documentElement).append(script)})}function deprecated(details){console.log(`Deprecated API usage: `+details)}let pdfDateStringRegex;class PDFDateString{static toDateObject(input){if(!input||typeof input!=`string`)return null;pdfDateStringRegex||=RegExp(`^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?`);let matches=pdfDateStringRegex.exec(input);if(!matches)return null;let year=parseInt(matches[1],10),month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;let day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;let hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;let minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;let second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;let universalTimeRelation=matches[7]||`Z`,offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;let offsetMinute=parseInt(matches[9],10)||0;return offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0,universalTimeRelation===`-`?(hour+=offsetHour,minute+=offsetMinute):universalTimeRelation===`+`&&(hour-=offsetHour,minute-=offsetMinute),new Date(Date.UTC(year,month,day,hour,minute,second))}}exports$1.PDFDateString=PDFDateString;function getXfaPageViewport(xfaPage,{scale:scale$1=1,rotation=0}){let{width,height}=xfaPage.attributes.style;return new PageViewport({viewBox:[0,0,parseInt(width),parseInt(height)],scale:scale$1,rotation})}function getRGB(color$2){if(color$2.startsWith(`#`)){let colorRGB=parseInt(color$2.slice(1),16);return[(colorRGB&16711680)>>16,(colorRGB&65280)>>8,colorRGB&255]}return color$2.startsWith(`rgb(`)?color$2.slice(4,-1).split(`,`).map(x$2=>parseInt(x$2)):color$2.startsWith(`rgba(`)?color$2.slice(5,-1).split(`,`).map(x$2=>parseInt(x$2)).slice(0,3):((0,_util.warn)(`Not a valid color format: "${color$2}"`),[0,0,0])}function getColorValues(colors){let span=document.createElement(`span`);span.style.visibility=`hidden`,document.body.append(span);for(let name of colors.keys()){span.style.color=name;let computedColor=window.getComputedStyle(span).color;colors.set(name,getRGB(computedColor))}span.remove()}function getCurrentTransform(ctx){let{a:a$4,b:b$3,c:c$3,d:d$3,e:e$4,f:f$3}=ctx.getTransform();return[a$4,b$3,c$3,d$3,e$4,f$3]}function getCurrentTransformInverse(ctx){let{a:a$4,b:b$3,c:c$3,d:d$3,e:e$4,f:f$3}=ctx.getTransform().invertSelf();return[a$4,b$3,c$3,d$3,e$4,f$3]}function setLayerDimensions(div,viewport,mustFlip=!1,mustRotate=!0){if(viewport instanceof PageViewport){let{pageWidth,pageHeight}=viewport.rawDims,{style:style$3}=div,useRound=_util.FeatureTest.isCSSRoundSupported,w$1=`var(--scale-factor) * ${pageWidth}px`,h$3=`var(--scale-factor) * ${pageHeight}px`,widthStr=useRound?`round(${w$1}, 1px)`:`calc(${w$1})`,heightStr=useRound?`round(${h$3}, 1px)`:`calc(${h$3})`;!mustFlip||viewport.rotation%180==0?(style$3.width=widthStr,style$3.height=heightStr):(style$3.width=heightStr,style$3.height=widthStr)}mustRotate&&div.setAttribute(`data-main-rotation`,viewport.rotation)}}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.BaseStandardFontDataFactory=exports$1.BaseSVGFactory=exports$1.BaseFilterFactory=exports$1.BaseCanvasFactory=exports$1.BaseCMapReaderFactory=void 0;var _util=__w_pdfjs_require__$1(1);class BaseFilterFactory{constructor(){this.constructor===BaseFilterFactory&&(0,_util.unreachable)(`Cannot initialize BaseFilterFactory.`)}addFilter(maps){return`none`}addHCMFilter(fgColor,bgColor){return`none`}addHighlightHCMFilter(fgColor,bgColor,newFgColor,newBgColor){return`none`}destroy(keepHCM=!1){}}exports$1.BaseFilterFactory=BaseFilterFactory;class BaseCanvasFactory{constructor(){this.constructor===BaseCanvasFactory&&(0,_util.unreachable)(`Cannot initialize BaseCanvasFactory.`)}create(width,height){if(width<=0||height<=0)throw Error(`Invalid canvas size`);let canvas=this._createCanvas(width,height);return{canvas,context:canvas.getContext(`2d`)}}reset(canvasAndContext,width,height){if(!canvasAndContext.canvas)throw Error(`Canvas is not specified`);if(width<=0||height<=0)throw Error(`Invalid canvas size`);canvasAndContext.canvas.width=width,canvasAndContext.canvas.height=height}destroy(canvasAndContext){if(!canvasAndContext.canvas)throw Error(`Canvas is not specified`);canvasAndContext.canvas.width=0,canvasAndContext.canvas.height=0,canvasAndContext.canvas=null,canvasAndContext.context=null}_createCanvas(width,height){(0,_util.unreachable)("Abstract method `_createCanvas` called.")}}exports$1.BaseCanvasFactory=BaseCanvasFactory;class BaseCMapReaderFactory{constructor({baseUrl=null,isCompressed=!0}){this.constructor===BaseCMapReaderFactory&&(0,_util.unreachable)(`Cannot initialize BaseCMapReaderFactory.`),this.baseUrl=baseUrl,this.isCompressed=isCompressed}async fetch({name}){if(!this.baseUrl)throw Error(`The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.`);if(!name)throw Error(`CMap name must be specified.`);let url=this.baseUrl+name+(this.isCompressed?`.bcmap`:``),compressionType=this.isCompressed?_util.CMapCompressionType.BINARY:_util.CMapCompressionType.NONE;return this._fetchData(url,compressionType).catch(reason=>{throw Error(`Unable to load ${this.isCompressed?`binary `:``}CMap at: ${url}`)})}_fetchData(url,compressionType){(0,_util.unreachable)("Abstract method `_fetchData` called.")}}exports$1.BaseCMapReaderFactory=BaseCMapReaderFactory;class BaseStandardFontDataFactory{constructor({baseUrl=null}){this.constructor===BaseStandardFontDataFactory&&(0,_util.unreachable)(`Cannot initialize BaseStandardFontDataFactory.`),this.baseUrl=baseUrl}async fetch({filename}){if(!this.baseUrl)throw Error(`The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.`);if(!filename)throw Error(`Font filename must be specified.`);let url=`${this.baseUrl}${filename}`;return this._fetchData(url).catch(reason=>{throw Error(`Unable to load font data at: ${url}`)})}_fetchData(url){(0,_util.unreachable)("Abstract method `_fetchData` called.")}}exports$1.BaseStandardFontDataFactory=BaseStandardFontDataFactory;class BaseSVGFactory{constructor(){this.constructor===BaseSVGFactory&&(0,_util.unreachable)(`Cannot initialize BaseSVGFactory.`)}create(width,height,skipDimensions=!1){if(width<=0||height<=0)throw Error(`Invalid SVG dimensions`);let svg=this._createSVG(`svg:svg`);return svg.setAttribute(`version`,`1.1`),skipDimensions||(svg.setAttribute(`width`,`${width}px`),svg.setAttribute(`height`,`${height}px`)),svg.setAttribute(`preserveAspectRatio`,`none`),svg.setAttribute(`viewBox`,`0 0 ${width} ${height}`),svg}createElement(type){if(typeof type!=`string`)throw Error(`Invalid SVG element type`);return this._createSVG(type)}_createSVG(type){(0,_util.unreachable)("Abstract method `_createSVG` called.")}}exports$1.BaseSVGFactory=BaseSVGFactory}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.MurmurHash3_64=void 0;var _util=__w_pdfjs_require__$1(1);let SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(seed){this.h1=seed?seed&4294967295:SEED,this.h2=seed?seed&4294967295:SEED}update(input){let data,length;if(typeof input==`string`){data=new Uint8Array(input.length*2),length=0;for(let i$4=0,ii=input.length;i$4<ii;i$4++){let code=input.charCodeAt(i$4);code<=255?data[length++]=code:(data[length++]=code>>>8,data[length++]=code&255)}}else if((0,_util.isArrayBuffer)(input))data=input.slice(),length=data.byteLength;else throw Error(`Wrong data format in MurmurHash3_64_update. Input must be a string or array.`);let blockCounts=length>>2,tailLength=length-blockCounts*4,dataUint32=new Uint32Array(data.buffer,0,blockCounts),k1=0,k2=0,h1=this.h1,h2=this.h2,C1=3432918353,C2=461845907,C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(let i$4=0;i$4<blockCounts;i$4++)i$4&1?(k1=dataUint32[i$4],k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW,k1=k1<<15|k1>>>17,k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW,h1^=k1,h1=h1<<13|h1>>>19,h1=h1*5+3864292196):(k2=dataUint32[i$4],k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW,k2=k2<<15|k2>>>17,k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW,h2^=k2,h2=h2<<13|h2>>>19,h2=h2*5+3864292196);switch(k1=0,tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4],k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW,k1=k1<<15|k1>>>17,k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW,blockCounts&1?h1^=k1:h2^=k1}this.h1=h1,this.h2=h2}hexdigest(){let h1=this.h1,h2=this.h2;return h1^=h2>>>1,h1=h1*3981806797&MASK_HIGH|h1*36045&MASK_LOW,h2=h2*4283543511&MASK_HIGH|((h2<<16|h1>>>16)*2950163797&MASK_HIGH)>>>16,h1^=h2>>>1,h1=h1*444984403&MASK_HIGH|h1*60499&MASK_LOW,h2=h2*3301882366&MASK_HIGH|((h2<<16|h1>>>16)*3120437893&MASK_HIGH)>>>16,h1^=h2>>>1,(h1>>>0).toString(16).padStart(8,`0`)+(h2>>>0).toString(16).padStart(8,`0`)}}exports$1.MurmurHash3_64=MurmurHash3_64}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.FontLoader=exports$1.FontFaceObject=void 0;var _util=__w_pdfjs_require__$1(1);class FontLoader{#e=new Set;constructor({ownerDocument=globalThis.document,styleElement=null}){this._document=ownerDocument,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(nativeFontFace){this.nativeFontFaces.add(nativeFontFace),this._document.fonts.add(nativeFontFace)}removeNativeFontFace(nativeFontFace){this.nativeFontFaces.delete(nativeFontFace),this._document.fonts.delete(nativeFontFace)}insertRule(rule){this.styleElement||(this.styleElement=this._document.createElement(`style`),this._document.documentElement.getElementsByTagName(`head`)[0].append(this.styleElement));let styleSheet=this.styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length)}clear(){for(let nativeFontFace of this.nativeFontFaces)this._document.fonts.delete(nativeFontFace);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&=(this.styleElement.remove(),null)}async loadSystemFont(info){if(!(!info||this.#e.has(info.loadedName))){if((0,_util.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName,src,style:style$3}=info,fontFace=new FontFace(loadedName,src,style$3);this.addNativeFontFace(fontFace);try{await fontFace.load(),this.#e.add(loadedName)}catch{(0,_util.warn)(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(fontFace)}return}(0,_util.unreachable)(`Not implemented: loadSystemFont without the Font Loading API.`)}}async bind(font){if(font.attached||font.missingFile&&!font.systemFontInfo)return;if(font.attached=!0,font.systemFontInfo){await this.loadSystemFont(font.systemFontInfo);return}if(this.isFontLoadingAPISupported){let nativeFontFace=font.createNativeFontFace();if(nativeFontFace){this.addNativeFontFace(nativeFontFace);try{await nativeFontFace.loaded}catch(ex){throw(0,_util.warn)(`Failed to load font '${nativeFontFace.family}': '${ex}'.`),font.disableFontFace=!0,ex}}return}let rule=font.createFontFaceRule();if(rule){if(this.insertRule(rule),this.isSyncFontLoadingSupported)return;await new Promise(resolve=>{let request=this._queueLoadingCallback(resolve);this._prepareFontLoadEvent(font,request)})}}get isFontLoadingAPISupported(){let hasFonts=!!this._document?.fonts;return(0,_util.shadow)(this,`isFontLoadingAPISupported`,hasFonts)}get isSyncFontLoadingSupported(){let supported=!1;return(_util.isNodeJS||typeof navigator<`u`&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(supported=!0),(0,_util.shadow)(this,`isSyncFontLoadingSupported`,supported)}_queueLoadingCallback(callback){function completeRequest(){for((0,_util.assert)(!request.done,`completeRequest() cannot be called twice.`),request.done=!0;loadingRequests.length>0&&loadingRequests[0].done;){let otherRequest=loadingRequests.shift();setTimeout(otherRequest.callback,0)}}let{loadingRequests}=this,request={done:!1,complete:completeRequest,callback};return loadingRequests.push(request),request}get _loadTestFont(){let testFont=atob(`T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==`);return(0,_util.shadow)(this,`_loadTestFont`,testFont)}_prepareFontLoadEvent(font,request){function int32(data$1,offset$1){return data$1.charCodeAt(offset$1)<<24|data$1.charCodeAt(offset$1+1)<<16|data$1.charCodeAt(offset$1+2)<<8|data$1.charCodeAt(offset$1+3)&255}function spliceString(s$3,offset$1,remove$1,insert){let chunk1=s$3.substring(0,offset$1),chunk2=s$3.substring(offset$1+remove$1);return chunk1+insert+chunk2}let i$4,ii,canvas=this._document.createElement(`canvas`);canvas.width=1,canvas.height=1;let ctx=canvas.getContext(`2d`),called=0;function isFontReady(name,callback){if(++called>30){(0,_util.warn)(`Load test font never loaded.`),callback();return}if(ctx.font=`30px `+name,ctx.fillText(`.`,0,20),ctx.getImageData(0,0,1,1).data[3]>0){callback();return}setTimeout(isFontReady.bind(null,name,callback))}let loadTestFontId=`lt${Date.now()}${this.loadTestFontId++}`,data=this._loadTestFont;data=spliceString(data,976,loadTestFontId.length,loadTestFontId);let CFF_CHECKSUM_OFFSET=16,XXXX_VALUE=1482184792,checksum=int32(data,16);for(i$4=0,ii=loadTestFontId.length-3;i$4<ii;i$4+=4)checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i$4)|0;i$4<loadTestFontId.length&&(checksum=checksum-XXXX_VALUE+int32(loadTestFontId+`XXX`,i$4)|0),data=spliceString(data,16,4,(0,_util.string32)(checksum));let rule=`@font-face {font-family:"${loadTestFontId}";src:${`url(data:font/opentype;base64,${btoa(data)});`}}`;this.insertRule(rule);let div=this._document.createElement(`div`);div.style.visibility=`hidden`,div.style.width=div.style.height=`10px`,div.style.position=`absolute`,div.style.top=div.style.left=`0px`;for(let name of[font.loadedName,loadTestFontId]){let span=this._document.createElement(`span`);span.textContent=`Hi`,span.style.fontFamily=name,div.append(span)}this._document.body.append(div),isFontReady(loadTestFontId,()=>{div.remove(),request.complete()})}}exports$1.FontLoader=FontLoader;class FontFaceObject{constructor(translatedData,{isEvalSupported=!0,disableFontFace=!1,ignoreErrors=!1,inspectFont=null}){for(let i$4 in this.compiledGlyphs=Object.create(null),translatedData)this[i$4]=translatedData[i$4];this.isEvalSupported=isEvalSupported!==!1,this.disableFontFace=disableFontFace===!0,this.ignoreErrors=ignoreErrors===!0,this._inspectFont=inspectFont}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let nativeFontFace;if(!this.cssFontInfo)nativeFontFace=new FontFace(this.loadedName,this.data,{});else{let css={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(css.style=`oblique ${this.cssFontInfo.italicAngle}deg`),nativeFontFace=new FontFace(this.cssFontInfo.fontFamily,this.data,css)}return this._inspectFont?.(this),nativeFontFace}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let data=(0,_util.bytesToString)(this.data),url=`url(data:${this.mimetype};base64,${btoa(data)});`,rule;if(!this.cssFontInfo)rule=`@font-face {font-family:"${this.loadedName}";src:${url}}`;else{let css=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(css+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),rule=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${css}src:${url}}`}return this._inspectFont?.(this,url),rule}getPathGenerator(objs,character){if(this.compiledGlyphs[character]!==void 0)return this.compiledGlyphs[character];let cmds;try{cmds=objs.get(this.loadedName+`_path_`+character)}catch(ex){if(!this.ignoreErrors)throw ex;return(0,_util.warn)(`getPathGenerator - ignoring character: "${ex}".`),this.compiledGlyphs[character]=function(c$3,size){}}if(this.isEvalSupported&&_util.FeatureTest.isEvalSupported){let jsBuf=[];for(let current of cmds){let args=current.args===void 0?``:current.args.join(`,`);jsBuf.push(`c.`,current.cmd,`(`,args,`);
`)}return this.compiledGlyphs[character]=Function(`c`,`size`,jsBuf.join(``))}return this.compiledGlyphs[character]=function(c$3,size){for(let current of cmds)current.cmd===`scale`&&(current.args=[size,-size]),c$3[current.cmd].apply(c$3,current.args)}}}exports$1.FontFaceObject=FontFaceObject}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.NodeStandardFontDataFactory=exports$1.NodeFilterFactory=exports$1.NodeCanvasFactory=exports$1.NodeCMapReaderFactory=void 0;var _base_factory=__w_pdfjs_require__$1(7),_util=__w_pdfjs_require__$1(1);let fetchData=function(url){return new Promise((resolve,reject)=>{require___vite_browser_external().readFile(url,(error$1,data)=>{if(error$1||!data){reject(Error(error$1));return}resolve(new Uint8Array(data))})})};class NodeFilterFactory extends _base_factory.BaseFilterFactory{}exports$1.NodeFilterFactory=NodeFilterFactory;class NodeCanvasFactory extends _base_factory.BaseCanvasFactory{_createCanvas(width,height){return require___vite_browser_external().createCanvas(width,height)}}exports$1.NodeCanvasFactory=NodeCanvasFactory;class NodeCMapReaderFactory extends _base_factory.BaseCMapReaderFactory{_fetchData(url,compressionType){return fetchData(url).then(data=>({cMapData:data,compressionType}))}}exports$1.NodeCMapReaderFactory=NodeCMapReaderFactory;class NodeStandardFontDataFactory extends _base_factory.BaseStandardFontDataFactory{_fetchData(url){return fetchData(url)}}exports$1.NodeStandardFontDataFactory=NodeStandardFontDataFactory}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.CanvasGraphics=void 0;var _util=__w_pdfjs_require__$1(1),_display_utils=__w_pdfjs_require__$1(6),_pattern_helper=__w_pdfjs_require__$1(12),_image_utils=__w_pdfjs_require__$1(13);let MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,MAX_GROUP_SIZE=4096,EXECUTION_TIME=15,EXECUTION_STEPS=10,MAX_SIZE_TO_COMPILE=1e3,FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(ctx,destCtx){if(ctx._removeMirroring)throw Error(`Context is already forwarding operations.`);ctx.__originalSave=ctx.save,ctx.__originalRestore=ctx.restore,ctx.__originalRotate=ctx.rotate,ctx.__originalScale=ctx.scale,ctx.__originalTranslate=ctx.translate,ctx.__originalTransform=ctx.transform,ctx.__originalSetTransform=ctx.setTransform,ctx.__originalResetTransform=ctx.resetTransform,ctx.__originalClip=ctx.clip,ctx.__originalMoveTo=ctx.moveTo,ctx.__originalLineTo=ctx.lineTo,ctx.__originalBezierCurveTo=ctx.bezierCurveTo,ctx.__originalRect=ctx.rect,ctx.__originalClosePath=ctx.closePath,ctx.__originalBeginPath=ctx.beginPath,ctx._removeMirroring=()=>{ctx.save=ctx.__originalSave,ctx.restore=ctx.__originalRestore,ctx.rotate=ctx.__originalRotate,ctx.scale=ctx.__originalScale,ctx.translate=ctx.__originalTranslate,ctx.transform=ctx.__originalTransform,ctx.setTransform=ctx.__originalSetTransform,ctx.resetTransform=ctx.__originalResetTransform,ctx.clip=ctx.__originalClip,ctx.moveTo=ctx.__originalMoveTo,ctx.lineTo=ctx.__originalLineTo,ctx.bezierCurveTo=ctx.__originalBezierCurveTo,ctx.rect=ctx.__originalRect,ctx.closePath=ctx.__originalClosePath,ctx.beginPath=ctx.__originalBeginPath,delete ctx._removeMirroring},ctx.save=function(){destCtx.save(),this.__originalSave()},ctx.restore=function(){destCtx.restore(),this.__originalRestore()},ctx.translate=function(x$2,y$2){destCtx.translate(x$2,y$2),this.__originalTranslate(x$2,y$2)},ctx.scale=function(x$2,y$2){destCtx.scale(x$2,y$2),this.__originalScale(x$2,y$2)},ctx.transform=function(a$4,b$3,c$3,d$3,e$4,f$3){destCtx.transform(a$4,b$3,c$3,d$3,e$4,f$3),this.__originalTransform(a$4,b$3,c$3,d$3,e$4,f$3)},ctx.setTransform=function(a$4,b$3,c$3,d$3,e$4,f$3){destCtx.setTransform(a$4,b$3,c$3,d$3,e$4,f$3),this.__originalSetTransform(a$4,b$3,c$3,d$3,e$4,f$3)},ctx.resetTransform=function(){destCtx.resetTransform(),this.__originalResetTransform()},ctx.rotate=function(angle){destCtx.rotate(angle),this.__originalRotate(angle)},ctx.clip=function(rule){destCtx.clip(rule),this.__originalClip(rule)},ctx.moveTo=function(x$2,y$2){destCtx.moveTo(x$2,y$2),this.__originalMoveTo(x$2,y$2)},ctx.lineTo=function(x$2,y$2){destCtx.lineTo(x$2,y$2),this.__originalLineTo(x$2,y$2)},ctx.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x$2,y$2){destCtx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x$2,y$2),this.__originalBezierCurveTo(cp1x,cp1y,cp2x,cp2y,x$2,y$2)},ctx.rect=function(x$2,y$2,width,height){destCtx.rect(x$2,y$2,width,height),this.__originalRect(x$2,y$2,width,height)},ctx.closePath=function(){destCtx.closePath(),this.__originalClosePath()},ctx.beginPath=function(){destCtx.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(canvasFactory){this.canvasFactory=canvasFactory,this.cache=Object.create(null)}getCanvas(id$3,width,height){let canvasEntry;return this.cache[id$3]===void 0?(canvasEntry=this.canvasFactory.create(width,height),this.cache[id$3]=canvasEntry):(canvasEntry=this.cache[id$3],this.canvasFactory.reset(canvasEntry,width,height)),canvasEntry}delete(id$3){delete this.cache[id$3]}clear(){for(let id$3 in this.cache){let canvasEntry=this.cache[id$3];this.canvasFactory.destroy(canvasEntry),delete this.cache[id$3]}}}function drawImageAtIntegerCoords(ctx,srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH){let[a$4,b$3,c$3,d$3,tx,ty]=(0,_display_utils.getCurrentTransform)(ctx);if(b$3===0&&c$3===0){let tlX=destX*a$4+tx,rTlX=Math.round(tlX),tlY=destY*d$3+ty,rTlY=Math.round(tlY),brX=(destX+destW)*a$4+tx,rWidth=Math.abs(Math.round(brX)-rTlX)||1,brY=(destY+destH)*d$3+ty,rHeight=Math.abs(Math.round(brY)-rTlY)||1;return ctx.setTransform(Math.sign(a$4),0,0,Math.sign(d$3),rTlX,rTlY),ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rWidth,rHeight),ctx.setTransform(a$4,b$3,c$3,d$3,tx,ty),[rWidth,rHeight]}if(a$4===0&&d$3===0){let tlX=destY*c$3+tx,rTlX=Math.round(tlX),tlY=destX*b$3+ty,rTlY=Math.round(tlY),brX=(destY+destH)*c$3+tx,rWidth=Math.abs(Math.round(brX)-rTlX)||1,brY=(destX+destW)*b$3+ty,rHeight=Math.abs(Math.round(brY)-rTlY)||1;return ctx.setTransform(0,Math.sign(b$3),Math.sign(c$3),0,rTlX,rTlY),ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rHeight,rWidth),ctx.setTransform(a$4,b$3,c$3,d$3,tx,ty),[rHeight,rWidth]}ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);let scaleX$1=Math.hypot(a$4,b$3),scaleY$1=Math.hypot(c$3,d$3);return[scaleX$1*destW,scaleY$1*destH]}function compileType3Glyph(imgData){let{width,height}=imgData;if(width>MAX_SIZE_TO_COMPILE||height>MAX_SIZE_TO_COMPILE)return null;let POINT_TO_PROCESS_LIMIT=1e3,POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),width1=width+1,points=new Uint8Array(width1*(height+1)),i$4,j$2,j0,lineSize=width+7&-8,data=new Uint8Array(lineSize*height),pos=0;for(let elem of imgData.data){let mask=128;for(;mask>0;)data[pos++]=elem&mask?0:255,mask>>=1}let count=0;for(pos=0,data[pos]!==0&&(points[0]=1,++count),j$2=1;j$2<width;j$2++)data[pos]!==data[pos+1]&&(points[j$2]=data[pos]?2:1,++count),pos++;for(data[pos]!==0&&(points[j$2]=2,++count),i$4=1;i$4<height;i$4++){pos=i$4*lineSize,j0=i$4*width1,data[pos-lineSize]!==data[pos]&&(points[j0]=data[pos]?1:8,++count);let sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j$2=1;j$2<width;j$2++)sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0),POINT_TYPES[sum]&&(points[j0+j$2]=POINT_TYPES[sum],++count),pos++;if(data[pos-lineSize]!==data[pos]&&(points[j0+j$2]=data[pos]?2:4,++count),count>POINT_TO_PROCESS_LIMIT)return null}for(pos=lineSize*(height-1),j0=i$4*width1,data[pos]!==0&&(points[j0]=8,++count),j$2=1;j$2<width;j$2++)data[pos]!==data[pos+1]&&(points[j0+j$2]=data[pos]?4:8,++count),pos++;if(data[pos]!==0&&(points[j0+j$2]=4,++count),count>POINT_TO_PROCESS_LIMIT)return null;let steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]),path=new Path2D;for(i$4=0;count&&i$4<=height;i$4++){let p$3=i$4*width1,end$1=p$3+width;for(;p$3<end$1&&!points[p$3];)p$3++;if(p$3===end$1)continue;path.moveTo(p$3%width1,i$4);let p0=p$3,type=points[p$3];do{let step=steps[type];do p$3+=step;while(!points[p$3]);let pp=points[p$3];pp!==5&&pp!==10?(type=pp,points[p$3]=0):(type=pp&51*type>>4,points[p$3]&=type>>2|type<<2),path.lineTo(p$3%width1,p$3/width1|0),points[p$3]||--count}while(p0!==p$3);--i$4}return data=null,points=null,function(c$3){c$3.save(),c$3.scale(1/width,-1/height),c$3.translate(0,-height),c$3.fill(path),c$3.beginPath(),c$3.restore()}}class CanvasExtraState{constructor(width,height){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_util.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=_util.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_util.TextRenderingMode.FILL,this.textRise=0,this.fillColor=`#000000`,this.strokeColor=`#000000`,this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=`none`,this.startNewPathAndClipBox([0,0,width,height])}clone(){let clone=Object.create(this);return clone.clipBox=this.clipBox.slice(),clone}setCurrentPoint(x$2,y$2){this.x=x$2,this.y=y$2}updatePathMinMax(transform$1,x$2,y$2){[x$2,y$2]=_util.Util.applyTransform([x$2,y$2],transform$1),this.minX=Math.min(this.minX,x$2),this.minY=Math.min(this.minY,y$2),this.maxX=Math.max(this.maxX,x$2),this.maxY=Math.max(this.maxY,y$2)}updateRectMinMax(transform$1,rect){let p1=_util.Util.applyTransform(rect,transform$1),p2=_util.Util.applyTransform(rect.slice(2),transform$1);this.minX=Math.min(this.minX,p1[0],p2[0]),this.minY=Math.min(this.minY,p1[1],p2[1]),this.maxX=Math.max(this.maxX,p1[0],p2[0]),this.maxY=Math.max(this.maxY,p1[1],p2[1])}updateScalingPathMinMax(transform$1,minMax){_util.Util.scaleMinMax(transform$1,minMax),this.minX=Math.min(this.minX,minMax[0]),this.maxX=Math.max(this.maxX,minMax[1]),this.minY=Math.min(this.minY,minMax[2]),this.maxY=Math.max(this.maxY,minMax[3])}updateCurvePathMinMax(transform$1,x0,y0,x1,y1,x2,y2,x3,y3,minMax){let box=_util.Util.bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3);if(minMax){minMax[0]=Math.min(minMax[0],box[0],box[2]),minMax[1]=Math.max(minMax[1],box[0],box[2]),minMax[2]=Math.min(minMax[2],box[1],box[3]),minMax[3]=Math.max(minMax[3],box[1],box[3]);return}this.updateRectMinMax(transform$1,box)}getPathBoundingBox(pathType=_pattern_helper.PathType.FILL,transform$1=null){let box=[this.minX,this.minY,this.maxX,this.maxY];if(pathType===_pattern_helper.PathType.STROKE){transform$1||(0,_util.unreachable)(`Stroke bounding box must include transform.`);let scale$1=_util.Util.singularValueDecompose2dScale(transform$1),xStrokePad=scale$1[0]*this.lineWidth/2,yStrokePad=scale$1[1]*this.lineWidth/2;box[0]-=xStrokePad,box[1]-=yStrokePad,box[2]+=xStrokePad,box[3]+=yStrokePad}return box}updateClipFromPath(){let intersect=_util.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(intersect||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(box){this.clipBox=box,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(pathType=_pattern_helper.PathType.FILL,transform$1=null){return _util.Util.intersect(this.clipBox,this.getPathBoundingBox(pathType,transform$1))}}function putBinaryImageData(ctx,imgData){if(typeof ImageData<`u`&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return}let height=imgData.height,width=imgData.width,partialChunkHeight=height%16,fullChunks=(height-partialChunkHeight)/16,totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,16),srcPos=0,destPos,src=imgData.data,dest=chunkImgData.data,i$4,j$2,thisChunkHeight,elemsInThisChunk;if(imgData.kind===_util.ImageKind.GRAYSCALE_1BPP){let srcLength=src.byteLength,dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2),dest32DataLength=dest32.length,fullSrcDiff=width+7>>3,white=4294967295,black=_util.FeatureTest.isLittleEndian?4278190080:255;for(i$4=0;i$4<totalChunks;i$4++){for(thisChunkHeight=i$4<fullChunks?16:partialChunkHeight,destPos=0,j$2=0;j$2<thisChunkHeight;j$2++){let srcDiff=srcLength-srcPos,k$3=0,kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7,kEndUnrolled=kEnd&-8,mask=0,srcByte=0;for(;k$3<kEndUnrolled;k$3+=8)srcByte=src[srcPos++],dest32[destPos++]=srcByte&128?white:black,dest32[destPos++]=srcByte&64?white:black,dest32[destPos++]=srcByte&32?white:black,dest32[destPos++]=srcByte&16?white:black,dest32[destPos++]=srcByte&8?white:black,dest32[destPos++]=srcByte&4?white:black,dest32[destPos++]=srcByte&2?white:black,dest32[destPos++]=srcByte&1?white:black;for(;k$3<kEnd;k$3++)mask===0&&(srcByte=src[srcPos++],mask=128),dest32[destPos++]=srcByte&mask?white:black,mask>>=1}for(;destPos<dest32DataLength;)dest32[destPos++]=0;ctx.putImageData(chunkImgData,0,i$4*16)}}else if(imgData.kind===_util.ImageKind.RGBA_32BPP){for(j$2=0,elemsInThisChunk=width*16*4,i$4=0;i$4<fullChunks;i$4++)dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),srcPos+=elemsInThisChunk,ctx.putImageData(chunkImgData,0,j$2),j$2+=16;i$4<totalChunks&&(elemsInThisChunk=width*partialChunkHeight*4,dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),ctx.putImageData(chunkImgData,0,j$2))}else if(imgData.kind===_util.ImageKind.RGB_24BPP)for(thisChunkHeight=16,elemsInThisChunk=width*thisChunkHeight,i$4=0;i$4<totalChunks;i$4++){for(i$4>=fullChunks&&(thisChunkHeight=partialChunkHeight,elemsInThisChunk=width*thisChunkHeight),destPos=0,j$2=elemsInThisChunk;j$2--;)dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=255;ctx.putImageData(chunkImgData,0,i$4*16)}else throw Error(`bad image kind: ${imgData.kind}`)}function putBinaryImageMask(ctx,imgData){if(imgData.bitmap){ctx.drawImage(imgData.bitmap,0,0);return}let height=imgData.height,width=imgData.width,partialChunkHeight=height%16,fullChunks=(height-partialChunkHeight)/16,totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,16),srcPos=0,src=imgData.data,dest=chunkImgData.data;for(let i$4=0;i$4<totalChunks;i$4++){let thisChunkHeight=i$4<fullChunks?16:partialChunkHeight;({srcPos}=(0,_image_utils.convertBlackAndWhiteToRGBA)({src,srcPos,dest,width,height:thisChunkHeight,nonBlackColor:0})),ctx.putImageData(chunkImgData,0,i$4*16)}}function copyCtxState(sourceCtx,destCtx){for(let property of[`strokeStyle`,`fillStyle`,`fillRule`,`globalAlpha`,`lineWidth`,`lineCap`,`lineJoin`,`miterLimit`,`globalCompositeOperation`,`font`,`filter`])sourceCtx[property]!==void 0&&(destCtx[property]=sourceCtx[property]);sourceCtx.setLineDash!==void 0&&(destCtx.setLineDash(sourceCtx.getLineDash()),destCtx.lineDashOffset=sourceCtx.lineDashOffset)}function resetCtxToDefault(ctx){if(ctx.strokeStyle=ctx.fillStyle=`#000000`,ctx.fillRule=`nonzero`,ctx.globalAlpha=1,ctx.lineWidth=1,ctx.lineCap=`butt`,ctx.lineJoin=`miter`,ctx.miterLimit=10,ctx.globalCompositeOperation=`source-over`,ctx.font=`10px sans-serif`,ctx.setLineDash!==void 0&&(ctx.setLineDash([]),ctx.lineDashOffset=0),!_util.isNodeJS){let{filter:filter$2}=ctx;filter$2!==`none`&&filter$2!==``&&(ctx.filter=`none`)}}function composeSMaskBackdrop(bytes,r0,g0,b0){let length=bytes.length;for(let i$4=3;i$4<length;i$4+=4){let alpha$1=bytes[i$4];if(alpha$1===0)bytes[i$4-3]=r0,bytes[i$4-2]=g0,bytes[i$4-1]=b0;else if(alpha$1<255){let alpha_=255-alpha$1;bytes[i$4-3]=bytes[i$4-3]*alpha$1+r0*alpha_>>8,bytes[i$4-2]=bytes[i$4-2]*alpha$1+g0*alpha_>>8,bytes[i$4-1]=bytes[i$4-1]*alpha$1+b0*alpha_>>8}}}function composeSMaskAlpha(maskData,layerData,transferMap){let length=maskData.length,scale$1=1/255;for(let i$4=3;i$4<length;i$4+=4){let alpha$1=transferMap?transferMap[maskData[i$4]]:maskData[i$4];layerData[i$4]=layerData[i$4]*alpha$1*.00392156862745098|0}}function composeSMaskLuminosity(maskData,layerData,transferMap){let length=maskData.length;for(let i$4=3;i$4<length;i$4+=4){let y$2=maskData[i$4-3]*77+maskData[i$4-2]*152+maskData[i$4-1]*28;layerData[i$4]=transferMap?layerData[i$4]*transferMap[y$2>>8]>>8:layerData[i$4]*y$2>>16}}function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap,layerOffsetX,layerOffsetY,maskOffsetX,maskOffsetY){let hasBackdrop=!!backdrop,r0=hasBackdrop?backdrop[0]:0,g0=hasBackdrop?backdrop[1]:0,b0=hasBackdrop?backdrop[2]:0,composeFn=subtype===`Luminosity`?composeSMaskLuminosity:composeSMaskAlpha,chunkSize=Math.min(height,Math.ceil(1048576/width));for(let row=0;row<height;row+=chunkSize){let chunkHeight=Math.min(chunkSize,height-row),maskData=maskCtx.getImageData(layerOffsetX-maskOffsetX,row+(layerOffsetY-maskOffsetY),width,chunkHeight),layerData=layerCtx.getImageData(layerOffsetX,row+layerOffsetY,width,chunkHeight);hasBackdrop&&composeSMaskBackdrop(maskData.data,r0,g0,b0),composeFn(maskData.data,layerData.data,transferMap),layerCtx.putImageData(layerData,layerOffsetX,row+layerOffsetY)}}function composeSMask(ctx,smask,layerCtx,layerBox){let layerOffsetX=layerBox[0],layerOffsetY=layerBox[1],layerWidth=layerBox[2]-layerOffsetX,layerHeight=layerBox[3]-layerOffsetY;layerWidth===0||layerHeight===0||(genericComposeSMask(smask.context,layerCtx,layerWidth,layerHeight,smask.subtype,smask.backdrop,smask.transferMap,layerOffsetX,layerOffsetY,smask.offsetX,smask.offsetY),ctx.save(),ctx.globalAlpha=1,ctx.globalCompositeOperation=`source-over`,ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(layerCtx.canvas,0,0),ctx.restore())}function getImageSmoothingEnabled(transform$1,interpolate$1){let scale$1=_util.Util.singularValueDecompose2dScale(transform$1);scale$1[0]=Math.fround(scale$1[0]),scale$1[1]=Math.fround(scale$1[1]);let actualScale=Math.fround((globalThis.devicePixelRatio||1)*_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);return interpolate$1===void 0?scale$1[0]<=actualScale||scale$1[1]<=actualScale:interpolate$1}let LINE_CAP_STYLES=[`butt`,`round`,`square`],LINE_JOIN_STYLES=[`miter`,`round`,`bevel`],NORMAL_CLIP={},EO_CLIP={};class CanvasGraphics{constructor(canvasCtx,commonObjs,objs,canvasFactory,filterFactory,{optionalContentConfig,markedContentStack=null},annotationCanvasMap,pageColors){this.ctx=canvasCtx,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=commonObjs,this.objs=objs,this.canvasFactory=canvasFactory,this.filterFactory=filterFactory,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=markedContentStack||[],this.optionalContentConfig=optionalContentConfig,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=annotationCanvasMap,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=pageColors,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(data,fallback=null){return typeof data==`string`?data.startsWith(`g_`)?this.commonObjs.get(data):this.objs.get(data):fallback}beginDrawing({transform:transform$1,viewport,transparency=!1,background=null}){let width=this.ctx.canvas.width,height=this.ctx.canvas.height,savedFillStyle=this.ctx.fillStyle;if(this.ctx.fillStyle=background||`#ffffff`,this.ctx.fillRect(0,0,width,height),this.ctx.fillStyle=savedFillStyle,transparency){let transparentCanvas=this.cachedCanvases.getCanvas(`transparent`,width,height);this.compositeCtx=this.ctx,this.transparentCanvas=transparentCanvas.canvas,this.ctx=transparentCanvas.context,this.ctx.save(),this.ctx.transform(...(0,_display_utils.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),transform$1&&(this.ctx.transform(...transform$1),this.outputScaleX=transform$1[0],this.outputScaleY=transform$1[0]),this.ctx.transform(...viewport.transform),this.viewportScale=viewport.scale,this.baseTransform=(0,_display_utils.getCurrentTransform)(this.ctx)}executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){let argsArray=operatorList.argsArray,fnArray=operatorList.fnArray,i$4=executionStartIdx||0,argsArrayLen=argsArray.length;if(argsArrayLen===i$4)return i$4;let chunkOperations=argsArrayLen-i$4>10&&typeof continueCallback==`function`,endTime=chunkOperations?Date.now()+15:0,steps=0,commonObjs=this.commonObjs,objs=this.objs,fnId;for(;;){if(stepper!==void 0&&i$4===stepper.nextBreakPoint)return stepper.breakIt(i$4,continueCallback),i$4;if(fnId=fnArray[i$4],fnId!==_util.OPS.dependency)this[fnId].apply(this,argsArray[i$4]);else for(let depObjId of argsArray[i$4]){let objsPool=depObjId.startsWith(`g_`)?commonObjs:objs;if(!objsPool.has(depObjId))return objsPool.get(depObjId,continueCallback),i$4}if(i$4++,i$4===argsArrayLen)return i$4;if(chunkOperations&&++steps>10){if(Date.now()>endTime)return continueCallback(),i$4;steps=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&=(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let cache of this._cachedBitmapsMap.values()){for(let canvas of cache.values())typeof HTMLCanvasElement<`u`&&canvas instanceof HTMLCanvasElement&&(canvas.width=canvas.height=0);cache.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let hcmFilterId=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(hcmFilterId!==`none`){let savedFilter=this.ctx.filter;this.ctx.filter=hcmFilterId,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=savedFilter}}}_scaleImage(img,inverseTransform$1){let width=img.width,height=img.height,widthScale=Math.max(Math.hypot(inverseTransform$1[0],inverseTransform$1[1]),1),heightScale=Math.max(Math.hypot(inverseTransform$1[2],inverseTransform$1[3]),1),paintWidth=width,paintHeight=height,tmpCanvasId=`prescale1`,tmpCanvas,tmpCtx;for(;widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1;){let newWidth=paintWidth,newHeight=paintHeight;widthScale>2&&paintWidth>1&&(newWidth=paintWidth>=16384?Math.floor(paintWidth/2)-1||1:Math.ceil(paintWidth/2),widthScale/=paintWidth/newWidth),heightScale>2&&paintHeight>1&&(newHeight=paintHeight>=16384?Math.floor(paintHeight/2)-1||1:Math.ceil(paintHeight)/2,heightScale/=paintHeight/newHeight),tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight),tmpCtx=tmpCanvas.context,tmpCtx.clearRect(0,0,newWidth,newHeight),tmpCtx.drawImage(img,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight),img=tmpCanvas.canvas,paintWidth=newWidth,paintHeight=newHeight,tmpCanvasId=tmpCanvasId===`prescale1`?`prescale2`:`prescale1`}return{img,paintWidth,paintHeight}}_createMaskCanvas(img){let ctx=this.ctx,{width,height}=img,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,currentTransform=(0,_display_utils.getCurrentTransform)(ctx),cache,cacheKey,scaled,maskCanvas;if((img.bitmap||img.data)&&img.count>1){let mainKey=img.bitmap||img.data.buffer;cacheKey=JSON.stringify(isPatternFill?currentTransform:[currentTransform.slice(0,4),fillColor]),cache=this._cachedBitmapsMap.get(mainKey),cache||(cache=new Map,this._cachedBitmapsMap.set(mainKey,cache));let cachedImage=cache.get(cacheKey);if(cachedImage&&!isPatternFill)return{canvas:cachedImage,offsetX:Math.round(Math.min(currentTransform[0],currentTransform[2])+currentTransform[4]),offsetY:Math.round(Math.min(currentTransform[1],currentTransform[3])+currentTransform[5])};scaled=cachedImage}scaled||(maskCanvas=this.cachedCanvases.getCanvas(`maskCanvas`,width,height),putBinaryImageMask(maskCanvas.context,img));let maskToCanvas=_util.Util.transform(currentTransform,[1/width,0,0,-1/height,0,0]);maskToCanvas=_util.Util.transform(maskToCanvas,[1,0,0,1,0,-height]);let cord1=_util.Util.applyTransform([0,0],maskToCanvas),cord2=_util.Util.applyTransform([width,height],maskToCanvas),rect=_util.Util.normalizeRect([cord1[0],cord1[1],cord2[0],cord2[1]]),drawnWidth=Math.round(rect[2]-rect[0])||1,drawnHeight=Math.round(rect[3]-rect[1])||1,fillCanvas=this.cachedCanvases.getCanvas(`fillCanvas`,drawnWidth,drawnHeight),fillCtx=fillCanvas.context,offsetX=Math.min(cord1[0],cord2[0]),offsetY=Math.min(cord1[1],cord2[1]);fillCtx.translate(-offsetX,-offsetY),fillCtx.transform(...maskToCanvas),scaled||(scaled=this._scaleImage(maskCanvas.canvas,(0,_display_utils.getCurrentTransformInverse)(fillCtx)),scaled=scaled.img,cache&&isPatternFill&&cache.set(cacheKey,scaled)),fillCtx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils.getCurrentTransform)(fillCtx),img.interpolate),drawImageAtIntegerCoords(fillCtx,scaled,0,0,scaled.width,scaled.height,0,0,width,height),fillCtx.globalCompositeOperation=`source-in`;let inverse=_util.Util.transform((0,_display_utils.getCurrentTransformInverse)(fillCtx),[1,0,0,1,-offsetX,-offsetY]);return fillCtx.fillStyle=isPatternFill?fillColor.getPattern(ctx,this,inverse,_pattern_helper.PathType.FILL):fillColor,fillCtx.fillRect(0,0,width,height),cache&&!isPatternFill&&(this.cachedCanvases.delete(`fillCanvas`),cache.set(cacheKey,fillCanvas.canvas)),{canvas:fillCanvas.canvas,offsetX:Math.round(offsetX),offsetY:Math.round(offsetY)}}setLineWidth(width){width!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=width,this.ctx.lineWidth=width}setLineCap(style$3){this.ctx.lineCap=LINE_CAP_STYLES[style$3]}setLineJoin(style$3){this.ctx.lineJoin=LINE_JOIN_STYLES[style$3]}setMiterLimit(limit){this.ctx.miterLimit=limit}setDash(dashArray,dashPhase){let ctx=this.ctx;ctx.setLineDash!==void 0&&(ctx.setLineDash(dashArray),ctx.lineDashOffset=dashPhase)}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(let[key$1,value]of states)switch(key$1){case`LW`:this.setLineWidth(value);break;case`LC`:this.setLineCap(value);break;case`LJ`:this.setLineJoin(value);break;case`ML`:this.setMiterLimit(value);break;case`D`:this.setDash(value[0],value[1]);break;case`RI`:this.setRenderingIntent(value);break;case`FL`:this.setFlatness(value);break;case`Font`:this.setFont(value[0],value[1]);break;case`CA`:this.current.strokeAlpha=value;break;case`ca`:this.current.fillAlpha=value,this.ctx.globalAlpha=value;break;case`BM`:this.ctx.globalCompositeOperation=value;break;case`SMask`:this.current.activeSMask=value?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case`TR`:this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(value);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let inSMaskMode=this.inSMaskMode;this.current.activeSMask&&!inSMaskMode?this.beginSMaskMode():!this.current.activeSMask&&inSMaskMode&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw Error(`beginSMaskMode called while already in smask mode`);let drawnWidth=this.ctx.canvas.width,drawnHeight=this.ctx.canvas.height,cacheId=`smaskGroupAt`+this.groupLevel,scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);this.suspendedCtx=this.ctx,this.ctx=scratchCanvas.context;let ctx=this.ctx;ctx.setTransform(...(0,_display_utils.getCurrentTransform)(this.suspendedCtx)),copyCtxState(this.suspendedCtx,ctx),mirrorContextOperations(ctx,this.suspendedCtx),this.setGState([[`BM`,`source-over`],[`ca`,1],[`CA`,1]])}endSMaskMode(){if(!this.inSMaskMode)throw Error(`endSMaskMode called while not in smask mode`);this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(dirtyBox){if(!this.current.activeSMask)return;dirtyBox?(dirtyBox[0]=Math.floor(dirtyBox[0]),dirtyBox[1]=Math.floor(dirtyBox[1]),dirtyBox[2]=Math.ceil(dirtyBox[2]),dirtyBox[3]=Math.ceil(dirtyBox[3])):dirtyBox=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let smask=this.current.activeSMask,suspendedCtx=this.suspendedCtx;composeSMask(suspendedCtx,smask,this.ctx,dirtyBox),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(copyCtxState(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let old=this.current;this.stateStack.push(old),this.current=old.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),copyCtxState(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(a$4,b$3,c$3,d$3,e$4,f$3){this.ctx.transform(a$4,b$3,c$3,d$3,e$4,f$3),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(ops,args,minMax){let ctx=this.ctx,current=this.current,x$2=current.x,y$2=current.y,startX,startY,currentTransform=(0,_display_utils.getCurrentTransform)(ctx),isScalingMatrix=currentTransform[0]===0&&currentTransform[3]===0||currentTransform[1]===0&&currentTransform[2]===0,minMaxForBezier=isScalingMatrix?minMax.slice(0):null;for(let i$4=0,j$2=0,ii=ops.length;i$4<ii;i$4++)switch(ops[i$4]|0){case _util.OPS.rectangle:x$2=args[j$2++],y$2=args[j$2++];let width=args[j$2++],height=args[j$2++],xw=x$2+width,yh=y$2+height;ctx.moveTo(x$2,y$2),width===0||height===0?ctx.lineTo(xw,yh):(ctx.lineTo(xw,y$2),ctx.lineTo(xw,yh),ctx.lineTo(x$2,yh)),isScalingMatrix||current.updateRectMinMax(currentTransform,[x$2,y$2,xw,yh]),ctx.closePath();break;case _util.OPS.moveTo:x$2=args[j$2++],y$2=args[j$2++],ctx.moveTo(x$2,y$2),isScalingMatrix||current.updatePathMinMax(currentTransform,x$2,y$2);break;case _util.OPS.lineTo:x$2=args[j$2++],y$2=args[j$2++],ctx.lineTo(x$2,y$2),isScalingMatrix||current.updatePathMinMax(currentTransform,x$2,y$2);break;case _util.OPS.curveTo:startX=x$2,startY=y$2,x$2=args[j$2+4],y$2=args[j$2+5],ctx.bezierCurveTo(args[j$2],args[j$2+1],args[j$2+2],args[j$2+3],x$2,y$2),current.updateCurvePathMinMax(currentTransform,startX,startY,args[j$2],args[j$2+1],args[j$2+2],args[j$2+3],x$2,y$2,minMaxForBezier),j$2+=6;break;case _util.OPS.curveTo2:startX=x$2,startY=y$2,ctx.bezierCurveTo(x$2,y$2,args[j$2],args[j$2+1],args[j$2+2],args[j$2+3]),current.updateCurvePathMinMax(currentTransform,startX,startY,x$2,y$2,args[j$2],args[j$2+1],args[j$2+2],args[j$2+3],minMaxForBezier),x$2=args[j$2+2],y$2=args[j$2+3],j$2+=4;break;case _util.OPS.curveTo3:startX=x$2,startY=y$2,x$2=args[j$2+2],y$2=args[j$2+3],ctx.bezierCurveTo(args[j$2],args[j$2+1],x$2,y$2,x$2,y$2),current.updateCurvePathMinMax(currentTransform,startX,startY,args[j$2],args[j$2+1],x$2,y$2,x$2,y$2,minMaxForBezier),j$2+=4;break;case _util.OPS.closePath:ctx.closePath();break}isScalingMatrix&&current.updateScalingPathMinMax(currentTransform,minMaxForBezier),current.setCurrentPoint(x$2,y$2)}closePath(){this.ctx.closePath()}stroke(consumePath=!0){let ctx=this.ctx,strokeColor=this.current.strokeColor;ctx.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof strokeColor==`object`&&strokeColor?.getPattern?(ctx.save(),ctx.strokeStyle=strokeColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.STROKE),this.rescaleAndStroke(!1),ctx.restore()):this.rescaleAndStroke(!0)),consumePath&&this.consumePath(this.current.getClippedPathBoundingBox()),ctx.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(consumePath=!0){let ctx=this.ctx,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,needRestore=!1;isPatternFill&&(ctx.save(),ctx.fillStyle=fillColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL),needRestore=!0);let intersect=this.current.getClippedPathBoundingBox();this.contentVisible&&intersect!==null&&(this.pendingEOFill?(ctx.fill(`evenodd`),this.pendingEOFill=!1):ctx.fill()),needRestore&&ctx.restore(),consumePath&&this.consumePath(intersect)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=_util.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let paths=this.pendingTextPaths,ctx=this.ctx;if(paths===void 0){ctx.beginPath();return}ctx.save(),ctx.beginPath();for(let path of paths)ctx.setTransform(...path.transform),ctx.translate(path.x,path.y),path.addToPath(ctx,path.fontSize);ctx.restore(),ctx.clip(),ctx.beginPath(),delete this.pendingTextPaths}setCharSpacing(spacing){this.current.charSpacing=spacing}setWordSpacing(spacing){this.current.wordSpacing=spacing}setHScale(scale$1){this.current.textHScale=scale$1/100}setLeading(leading){this.current.leading=-leading}setFont(fontRefName,size){let fontObj=this.commonObjs.get(fontRefName),current=this.current;if(!fontObj)throw Error(`Can't find font for ${fontRefName}`);if(current.fontMatrix=fontObj.fontMatrix||_util.FONT_IDENTITY_MATRIX,(current.fontMatrix[0]===0||current.fontMatrix[3]===0)&&(0,_util.warn)(`Invalid font matrix for font `+fontRefName),size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,this.current.font=fontObj,this.current.fontSize=size,fontObj.isType3Font)return;let name=fontObj.loadedName||`sans-serif`,typeface=fontObj.systemFontInfo?.css||`"${name}", ${fontObj.fallbackName}`,bold=`normal`;fontObj.black?bold=`900`:fontObj.bold&&(bold=`bold`);let italic=fontObj.italic?`italic`:`normal`,browserFontSize=size;size<16?browserFontSize=16:size>100&&(browserFontSize=100),this.current.fontSizeScale=size/browserFontSize,this.ctx.font=`${italic} ${bold} ${browserFontSize}px ${typeface}`}setTextRenderingMode(mode){this.current.textRenderingMode=mode}setTextRise(rise){this.current.textRise=rise}moveText(x$2,y$2){this.current.x=this.current.lineX+=x$2,this.current.y=this.current.lineY+=y$2}setLeadingMoveText(x$2,y$2){this.setLeading(-y$2),this.moveText(x$2,y$2)}setTextMatrix(a$4,b$3,c$3,d$3,e$4,f$3){this.current.textMatrix=[a$4,b$3,c$3,d$3,e$4,f$3],this.current.textMatrixScale=Math.hypot(a$4,b$3),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(character,x$2,y$2,patternTransform){let ctx=this.ctx,current=this.current,font=current.font,textRenderingMode=current.textRenderingMode,fontSize=current.fontSize/current.fontSizeScale,fillStrokeMode=textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK,isAddToPathSet=!!(textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG),patternFill=current.patternFill&&!font.missingFile,addToPath;(font.disableFontFace||isAddToPathSet||patternFill)&&(addToPath=font.getPathGenerator(this.commonObjs,character)),font.disableFontFace||patternFill?(ctx.save(),ctx.translate(x$2,y$2),ctx.beginPath(),addToPath(ctx,fontSize),patternTransform&&ctx.setTransform(...patternTransform),(fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE)&&ctx.fill(),(fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE)&&ctx.stroke(),ctx.restore()):((fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE)&&ctx.fillText(character,x$2,y$2),(fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE)&&ctx.strokeText(character,x$2,y$2)),isAddToPathSet&&(this.pendingTextPaths||=[]).push({transform:(0,_display_utils.getCurrentTransform)(ctx),x:x$2,y:y$2,fontSize,addToPath})}get isFontSubpixelAAEnabled(){let{context:ctx}=this.cachedCanvases.getCanvas(`isFontSubpixelAAEnabled`,10,10);ctx.scale(1.5,1),ctx.fillText(`I`,0,10);let data=ctx.getImageData(0,0,10,10).data,enabled=!1;for(let i$4=3;i$4<data.length;i$4+=4)if(data[i$4]>0&&data[i$4]<255){enabled=!0;break}return(0,_util.shadow)(this,`isFontSubpixelAAEnabled`,enabled)}showText(glyphs){let current=this.current,font=current.font;if(font.isType3Font)return this.showType3Text(glyphs);let fontSize=current.fontSize;if(fontSize===0)return;let ctx=this.ctx,fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,glyphsLength=glyphs.length,vertical$1=font.vertical,spacingDir=vertical$1?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0],simpleFillText=current.textRenderingMode===_util.TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;ctx.save(),ctx.transform(...current.textMatrix),ctx.translate(current.x,current.y+current.textRise),fontDirection>0?ctx.scale(textHScale,-1):ctx.scale(textHScale,1);let patternTransform;if(current.patternFill){ctx.save();let pattern=current.fillColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL);patternTransform=(0,_display_utils.getCurrentTransform)(ctx),ctx.restore(),ctx.fillStyle=pattern}let lineWidth=current.lineWidth,scale$1=current.textMatrixScale;if(scale$1===0||lineWidth===0){let fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;(fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE)&&(lineWidth=this.getSinglePixelWidth())}else lineWidth/=scale$1;if(fontSizeScale!==1&&(ctx.scale(fontSizeScale,fontSizeScale),lineWidth/=fontSizeScale),ctx.lineWidth=lineWidth,font.isInvalidPDFjsFont){let chars=[],width=0;for(let glyph of glyphs)chars.push(glyph.unicode),width+=glyph.width;ctx.fillText(chars.join(``),0,0),current.x+=width*widthAdvanceScale*textHScale,ctx.restore(),this.compose();return}let x$2=0,i$4;for(i$4=0;i$4<glyphsLength;++i$4){let glyph=glyphs[i$4];if(typeof glyph==`number`){x$2+=spacingDir*glyph*fontSize/1e3;continue}let restoreNeeded=!1,spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar,accent=glyph.accent,scaledX,scaledY,width=glyph.width;if(vertical$1){let vmetric=glyph.vmetric||defaultVMetrics,vx=-(glyph.vmetric?vmetric[1]:width*.5)*widthAdvanceScale,vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x$2+vy)/fontSizeScale}else scaledX=x$2/fontSizeScale,scaledY=0;if(font.remeasure&&width>0){let measuredWidth=ctx.measureText(character).width*1e3/fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){let characterScaleX=width/measuredWidth;restoreNeeded=!0,ctx.save(),ctx.scale(characterScaleX,1),scaledX/=characterScaleX}else width!==measuredWidth&&(scaledX+=(width-measuredWidth)/2e3*fontSize/fontSizeScale)}if(this.contentVisible&&(glyph.isInFont||font.missingFile)){if(simpleFillText&&!accent)ctx.fillText(character,scaledX,scaledY);else if(this.paintChar(character,scaledX,scaledY,patternTransform),accent){let scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale,scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform)}}let charWidth=vertical$1?width*widthAdvanceScale-spacing*fontDirection:width*widthAdvanceScale+spacing*fontDirection;x$2+=charWidth,restoreNeeded&&ctx.restore()}vertical$1?current.y-=x$2:current.x+=x$2*textHScale,ctx.restore(),this.compose()}showType3Text(glyphs){let ctx=this.ctx,current=this.current,font=current.font,fontSize=current.fontSize,fontDirection=current.fontDirection,spacingDir=font.vertical?1:-1,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,textHScale=current.textHScale*fontDirection,fontMatrix=current.fontMatrix||_util.FONT_IDENTITY_MATRIX,glyphsLength=glyphs.length,isTextInvisible=current.textRenderingMode===_util.TextRenderingMode.INVISIBLE,i$4,glyph,width,spacingLength;if(!(isTextInvisible||fontSize===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ctx.save(),ctx.transform(...current.textMatrix),ctx.translate(current.x,current.y),ctx.scale(textHScale,fontDirection),i$4=0;i$4<glyphsLength;++i$4){if(glyph=glyphs[i$4],typeof glyph==`number`){spacingLength=spacingDir*glyph*fontSize/1e3,this.ctx.translate(spacingLength,0),current.x+=spacingLength*textHScale;continue}let spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){(0,_util.warn)(`Type3 character "${glyph.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=glyph,this.save(),ctx.scale(fontSize,fontSize),ctx.transform(...fontMatrix),this.executeOperatorList(operatorList),this.restore()),width=_util.Util.applyTransform([glyph.width,0],fontMatrix)[0]*fontSize+spacing,ctx.translate(width,0),current.x+=width*textHScale}ctx.restore(),this.processingType3=null}}setCharWidth(xWidth,yWidth){}setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly),this.ctx.clip(),this.endPath()}getColorN_Pattern(IR){let pattern;if(IR[0]===`TilingPattern`){let color$2=IR[1],baseTransform=this.baseTransform||(0,_display_utils.getCurrentTransform)(this.ctx);pattern=new _pattern_helper.TilingPattern(IR,color$2,this.ctx,{createCanvasGraphics:ctx=>new CanvasGraphics(ctx,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},baseTransform)}else pattern=this._getPattern(IR[1],IR[2]);return pattern}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(r$4,g$3,b$3){let color$2=_util.Util.makeHexColor(r$4,g$3,b$3);this.ctx.strokeStyle=color$2,this.current.strokeColor=color$2}setFillRGBColor(r$4,g$3,b$3){let color$2=_util.Util.makeHexColor(r$4,g$3,b$3);this.ctx.fillStyle=color$2,this.current.fillColor=color$2,this.current.patternFill=!1}_getPattern(objId,matrix=null){let pattern;return this.cachedPatterns.has(objId)?pattern=this.cachedPatterns.get(objId):(pattern=(0,_pattern_helper.getShadingPattern)(this.getObject(objId)),this.cachedPatterns.set(objId,pattern)),matrix&&(pattern.matrix=matrix),pattern}shadingFill(objId){if(!this.contentVisible)return;let ctx=this.ctx;this.save(),ctx.fillStyle=this._getPattern(objId).getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.SHADING);let inv=(0,_display_utils.getCurrentTransformInverse)(ctx);if(inv){let{width,height}=ctx.canvas,[x0,y0,x1,y1]=_util.Util.getAxialAlignedBoundingBox([0,0,width,height],inv);this.ctx.fillRect(x0,y0,x1-x0,y1-y0)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,_util.unreachable)(`Should not call beginInlineImage`)}beginImageData(){(0,_util.unreachable)(`Should not call beginImageData`)}paintFormXObjectBegin(matrix,bbox){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(matrix)&&matrix.length===6&&this.transform(...matrix),this.baseTransform=(0,_display_utils.getCurrentTransform)(this.ctx),bbox)){let width=bbox[2]-bbox[0],height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height),this.current.updateRectMinMax((0,_display_utils.getCurrentTransform)(this.ctx),bbox),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(group){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let currentCtx=this.ctx;group.isolated||(0,_util.info)(`TODO: Support non-isolated groups.`),group.knockout&&(0,_util.warn)(`Knockout groups not supported.`);let currentTransform=(0,_display_utils.getCurrentTransform)(currentCtx);if(group.matrix&&currentCtx.transform(...group.matrix),!group.bbox)throw Error(`Bounding box is required.`);let bounds=_util.Util.getAxialAlignedBoundingBox(group.bbox,(0,_display_utils.getCurrentTransform)(currentCtx)),canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=_util.Util.intersect(bounds,canvasBounds)||[0,0,0,0];let offsetX=Math.floor(bounds[0]),offsetY=Math.floor(bounds[1]),drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1),drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1),scaleX$1=1,scaleY$1=1;drawnWidth>MAX_GROUP_SIZE&&(scaleX$1=drawnWidth/MAX_GROUP_SIZE,drawnWidth=MAX_GROUP_SIZE),drawnHeight>MAX_GROUP_SIZE&&(scaleY$1=drawnHeight/MAX_GROUP_SIZE,drawnHeight=MAX_GROUP_SIZE),this.current.startNewPathAndClipBox([0,0,drawnWidth,drawnHeight]);let cacheId=`groupAt`+this.groupLevel;group.smask&&(cacheId+=`_smask_`+ this.smaskCounter++%2);let scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight),groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX$1,1/scaleY$1),groupCtx.translate(-offsetX,-offsetY),groupCtx.transform(...currentTransform),group.smask?this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX,offsetY,scaleX:scaleX$1,scaleY:scaleY$1,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null}):(currentCtx.setTransform(1,0,0,1,0,0),currentCtx.translate(offsetX,offsetY),currentCtx.scale(scaleX$1,scaleY$1),currentCtx.save()),copyCtxState(currentCtx,groupCtx),this.ctx=groupCtx,this.setGState([[`BM`,`source-over`],[`ca`,1],[`CA`,1]]),this.groupStack.push(currentCtx),this.groupLevel++}endGroup(group){if(!this.contentVisible)return;this.groupLevel--;let groupCtx=this.ctx;if(this.ctx=this.groupStack.pop(),this.ctx.imageSmoothingEnabled=!1,group.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let currentMtx=(0,_display_utils.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...currentMtx);let dirtyBox=_util.Util.getAxialAlignedBoundingBox([0,0,groupCtx.canvas.width,groupCtx.canvas.height],currentMtx);this.ctx.drawImage(groupCtx.canvas,0,0),this.ctx.restore(),this.compose(dirtyBox)}}beginAnnotation(id$3,rect,transform$1,matrix,hasOwnCanvas){if(this.#e(),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(rect)&&rect.length===4){let width=rect[2]-rect[0],height=rect[3]-rect[1];if(hasOwnCanvas&&this.annotationCanvasMap){transform$1=transform$1.slice(),transform$1[4]-=rect[0],transform$1[5]-=rect[1],rect=rect.slice(),rect[0]=rect[1]=0,rect[2]=width,rect[3]=height;let[scaleX$1,scaleY$1]=_util.Util.singularValueDecompose2dScale((0,_display_utils.getCurrentTransform)(this.ctx)),{viewportScale}=this,canvasWidth=Math.ceil(width*this.outputScaleX*viewportScale),canvasHeight=Math.ceil(height*this.outputScaleY*viewportScale);this.annotationCanvas=this.canvasFactory.create(canvasWidth,canvasHeight);let{canvas,context}=this.annotationCanvas;this.annotationCanvasMap.set(id$3,canvas),this.annotationCanvas.savedCtx=this.ctx,this.ctx=context,this.ctx.save(),this.ctx.setTransform(scaleX$1,0,0,-scaleY$1,0,height*scaleY$1),resetCtxToDefault(this.ctx)}else resetCtxToDefault(this.ctx),this.ctx.rect(rect[0],rect[1],width,height),this.ctx.clip(),this.endPath()}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...transform$1),this.transform(...matrix)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(img){if(!this.contentVisible)return;let count=img.count;img=this.getObject(img.data,img),img.count=count;let ctx=this.ctx,glyph=this.processingType3;if(glyph&&(glyph.compiled===void 0&&(glyph.compiled=compileType3Glyph(img)),glyph.compiled)){glyph.compiled(ctx);return}let mask=this._createMaskCanvas(img),maskCanvas=mask.canvas;ctx.save(),ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(maskCanvas,mask.offsetX,mask.offsetY),ctx.restore(),this.compose()}paintImageMaskXObjectRepeat(img,scaleX$1,skewX=0,skewY=0,scaleY$1,positions){if(!this.contentVisible)return;img=this.getObject(img.data,img);let ctx=this.ctx;ctx.save();let currentTransform=(0,_display_utils.getCurrentTransform)(ctx);ctx.transform(scaleX$1,skewX,skewY,scaleY$1,0,0);let mask=this._createMaskCanvas(img);ctx.setTransform(1,0,0,1,mask.offsetX-currentTransform[4],mask.offsetY-currentTransform[5]);for(let i$4=0,ii=positions.length;i$4<ii;i$4+=2){let trans=_util.Util.transform(currentTransform,[scaleX$1,skewX,skewY,scaleY$1,positions[i$4],positions[i$4+1]]),[x$2,y$2]=_util.Util.applyTransform([0,0],trans);ctx.drawImage(mask.canvas,x$2,y$2)}ctx.restore(),this.compose()}paintImageMaskXObjectGroup(images){if(!this.contentVisible)return;let ctx=this.ctx,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill;for(let image of images){let{data,width,height,transform:transform$1}=image,maskCanvas=this.cachedCanvases.getCanvas(`maskCanvas`,width,height),maskCtx=maskCanvas.context;maskCtx.save(),putBinaryImageMask(maskCtx,this.getObject(data,image)),maskCtx.globalCompositeOperation=`source-in`,maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL):fillColor,maskCtx.fillRect(0,0,width,height),maskCtx.restore(),ctx.save(),ctx.transform(...transform$1),ctx.scale(1,-1),drawImageAtIntegerCoords(ctx,maskCanvas.canvas,0,0,width,height,0,-1,1,1),ctx.restore()}this.compose()}paintImageXObject(objId){if(!this.contentVisible)return;let imgData=this.getObject(objId);if(!imgData){(0,_util.warn)(`Dependent image isn't ready yet`);return}this.paintInlineImageXObject(imgData)}paintImageXObjectRepeat(objId,scaleX$1,scaleY$1,positions){if(!this.contentVisible)return;let imgData=this.getObject(objId);if(!imgData){(0,_util.warn)(`Dependent image isn't ready yet`);return}let width=imgData.width,height=imgData.height,map=[];for(let i$4=0,ii=positions.length;i$4<ii;i$4+=2)map.push({transform:[scaleX$1,0,0,scaleY$1,positions[i$4],positions[i$4+1]],x:0,y:0,w:width,h:height});this.paintInlineImageXObjectGroup(imgData,map)}applyTransferMapsToCanvas(ctx){return this.current.transferMaps!==`none`&&(ctx.filter=this.current.transferMaps,ctx.drawImage(ctx.canvas,0,0),ctx.filter=`none`),ctx.canvas}applyTransferMapsToBitmap(imgData){if(this.current.transferMaps===`none`)return imgData.bitmap;let{bitmap,width,height}=imgData,tmpCanvas=this.cachedCanvases.getCanvas(`inlineImage`,width,height),tmpCtx=tmpCanvas.context;return tmpCtx.filter=this.current.transferMaps,tmpCtx.drawImage(bitmap,0,0),tmpCtx.filter=`none`,tmpCanvas.canvas}paintInlineImageXObject(imgData){if(!this.contentVisible)return;let width=imgData.width,height=imgData.height,ctx=this.ctx;if(this.save(),!_util.isNodeJS){let{filter:filter$2}=ctx;filter$2!==`none`&&filter$2!==``&&(ctx.filter=`none`)}ctx.scale(1/width,-1/height);let imgToPaint;if(imgData.bitmap)imgToPaint=this.applyTransferMapsToBitmap(imgData);else if(typeof HTMLElement==`function`&&imgData instanceof HTMLElement||!imgData.data)imgToPaint=imgData;else{let tmpCtx=this.cachedCanvases.getCanvas(`inlineImage`,width,height).context;putBinaryImageData(tmpCtx,imgData),imgToPaint=this.applyTransferMapsToCanvas(tmpCtx)}let scaled=this._scaleImage(imgToPaint,(0,_display_utils.getCurrentTransformInverse)(ctx));ctx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils.getCurrentTransform)(ctx),imgData.interpolate),drawImageAtIntegerCoords(ctx,scaled.img,0,0,scaled.paintWidth,scaled.paintHeight,0,-height,width,height),this.compose(),this.restore()}paintInlineImageXObjectGroup(imgData,map){if(!this.contentVisible)return;let ctx=this.ctx,imgToPaint;if(imgData.bitmap)imgToPaint=imgData.bitmap;else{let w$1=imgData.width,h$3=imgData.height,tmpCtx=this.cachedCanvases.getCanvas(`inlineImage`,w$1,h$3).context;putBinaryImageData(tmpCtx,imgData),imgToPaint=this.applyTransferMapsToCanvas(tmpCtx)}for(let entry of map)ctx.save(),ctx.transform(...entry.transform),ctx.scale(1,-1),drawImageAtIntegerCoords(ctx,imgToPaint,entry.x,entry.y,entry.w,entry.h,0,-1,1,1),ctx.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(tag){}markPointProps(tag,properties$2){}beginMarkedContent(tag){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(tag,properties$2){tag===`OC`?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties$2)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(clipBox){let isEmpty=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(clipBox);let ctx=this.ctx;this.pendingClip&&=(isEmpty||(this.pendingClip===EO_CLIP?ctx.clip(`evenodd`):ctx.clip()),null),this.current.startNewPathAndClipBox(this.current.clipBox),ctx.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let m$3=(0,_display_utils.getCurrentTransform)(this.ctx);if(m$3[1]===0&&m$3[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m$3[0]),Math.abs(m$3[3]));else{let absDet=Math.abs(m$3[0]*m$3[3]-m$3[2]*m$3[1]),normX=Math.hypot(m$3[0],m$3[2]),normY=Math.hypot(m$3[1],m$3[3]);this._cachedGetSinglePixelWidth=Math.max(normX,normY)/absDet}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth}=this.current,{a:a$4,b:b$3,c:c$3,d:d$3}=this.ctx.getTransform(),scaleX$1,scaleY$1;if(b$3===0&&c$3===0){let normX=Math.abs(a$4),normY=Math.abs(d$3);if(normX===normY)if(lineWidth===0)scaleX$1=scaleY$1=1/normX;else{let scaledLineWidth=normX*lineWidth;scaleX$1=scaleY$1=scaledLineWidth<1?1/scaledLineWidth:1}else if(lineWidth===0)scaleX$1=1/normX,scaleY$1=1/normY;else{let scaledXLineWidth=normX*lineWidth,scaledYLineWidth=normY*lineWidth;scaleX$1=scaledXLineWidth<1?1/scaledXLineWidth:1,scaleY$1=scaledYLineWidth<1?1/scaledYLineWidth:1}}else{let absDet=Math.abs(a$4*d$3-b$3*c$3),normX=Math.hypot(a$4,b$3),normY=Math.hypot(c$3,d$3);if(lineWidth===0)scaleX$1=normY/absDet,scaleY$1=normX/absDet;else{let baseArea=lineWidth*absDet;scaleX$1=normY>baseArea?normY/baseArea:1,scaleY$1=normX>baseArea?normX/baseArea:1}}this._cachedScaleForStroking[0]=scaleX$1,this._cachedScaleForStroking[1]=scaleY$1}return this._cachedScaleForStroking}rescaleAndStroke(saveRestore){let{ctx}=this,{lineWidth}=this.current,[scaleX$1,scaleY$1]=this.getScaleForStroking();if(ctx.lineWidth=lineWidth||1,scaleX$1===1&&scaleY$1===1){ctx.stroke();return}let dashes=ctx.getLineDash();if(saveRestore&&ctx.save(),ctx.scale(scaleX$1,scaleY$1),dashes.length>0){let scale$1=Math.max(scaleX$1,scaleY$1);ctx.setLineDash(dashes.map(x$2=>x$2/scale$1)),ctx.lineDashOffset/=scale$1}ctx.stroke(),saveRestore&&ctx.restore()}isContentVisible(){for(let i$4=this.markedContentStack.length-1;i$4>=0;i$4--)if(!this.markedContentStack[i$4].visible)return!1;return!0}}for(let op in exports$1.CanvasGraphics=CanvasGraphics,_util.OPS)CanvasGraphics.prototype[op]!==void 0&&(CanvasGraphics.prototype[_util.OPS[op]]=CanvasGraphics.prototype[op])}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.TilingPattern=exports$1.PathType=void 0,exports$1.getShadingPattern=getShadingPattern;var _util=__w_pdfjs_require__$1(1),_display_utils=__w_pdfjs_require__$1(6);let PathType={FILL:`Fill`,STROKE:`Stroke`,SHADING:`Shading`};exports$1.PathType=PathType;function applyBoundingBox(ctx,bbox){if(!bbox)return;let width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],region=new Path2D;region.rect(bbox[0],bbox[1],width,height),ctx.clip(region)}class BaseShadingPattern{constructor(){this.constructor===BaseShadingPattern&&(0,_util.unreachable)(`Cannot initialize BaseShadingPattern.`)}getPattern(){(0,_util.unreachable)("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(IR){super(),this._type=IR[1],this._bbox=IR[2],this._colorStops=IR[3],this._p0=IR[4],this._p1=IR[5],this._r0=IR[6],this._r1=IR[7],this.matrix=null}_createGradient(ctx){let grad;this._type===`axial`?grad=ctx.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type===`radial`&&(grad=ctx.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let colorStop of this._colorStops)grad.addColorStop(colorStop[0],colorStop[1]);return grad}getPattern(ctx,owner,inverse,pathType){let pattern;if(pathType===PathType.STROKE||pathType===PathType.FILL){let ownerBBox=owner.current.getClippedPathBoundingBox(pathType,(0,_display_utils.getCurrentTransform)(ctx))||[0,0,0,0],width=Math.ceil(ownerBBox[2]-ownerBBox[0])||1,height=Math.ceil(ownerBBox[3]-ownerBBox[1])||1,tmpCanvas=owner.cachedCanvases.getCanvas(`pattern`,width,height,!0),tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height),tmpCtx.beginPath(),tmpCtx.rect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height),tmpCtx.translate(-ownerBBox[0],-ownerBBox[1]),inverse=_util.Util.transform(inverse,[1,0,0,1,ownerBBox[0],ownerBBox[1]]),tmpCtx.transform(...owner.baseTransform),this.matrix&&tmpCtx.transform(...this.matrix),applyBoundingBox(tmpCtx,this._bbox),tmpCtx.fillStyle=this._createGradient(tmpCtx),tmpCtx.fill(),pattern=ctx.createPattern(tmpCanvas.canvas,`no-repeat`);let domMatrix=new DOMMatrix(inverse);pattern.setTransform(domMatrix)}else applyBoundingBox(ctx,this._bbox),pattern=this._createGradient(ctx);return pattern}}function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){let coords=context.coords,colors=context.colors,bytes=data.data,rowSize=data.width*4,tmp;coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp),coords[p2+1]>coords[p3+1]&&(tmp=p2,p2=p3,p3=tmp,tmp=c2,c2=c3,c3=tmp),coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp);let x1=(coords[p1]+context.offsetX)*context.scaleX,y1=(coords[p1+1]+context.offsetY)*context.scaleY,x2=(coords[p2]+context.offsetX)*context.scaleX,y2=(coords[p2+1]+context.offsetY)*context.scaleY,x3=(coords[p3]+context.offsetX)*context.scaleX,y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3)return;let c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2],c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2],c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2],minY=Math.round(y1),maxY=Math.round(y3),xa,car,cag,cab,xb,cbr,cbg,cbb;for(let y$2=minY;y$2<=maxY;y$2++){if(y$2<y2){let k$4=y$2<y1?0:(y1-y$2)/(y1-y2);xa=x1-(x1-x2)*k$4,car=c1r-(c1r-c2r)*k$4,cag=c1g-(c1g-c2g)*k$4,cab=c1b-(c1b-c2b)*k$4}else{let k$4;k$4=y$2>y3?1:y2===y3?0:(y2-y$2)/(y2-y3),xa=x2-(x2-x3)*k$4,car=c2r-(c2r-c3r)*k$4,cag=c2g-(c2g-c3g)*k$4,cab=c2b-(c2b-c3b)*k$4}let k$3;k$3=y$2<y1?0:y$2>y3?1:(y1-y$2)/(y1-y3),xb=x1-(x1-x3)*k$3,cbr=c1r-(c1r-c3r)*k$3,cbg=c1g-(c1g-c3g)*k$3,cbb=c1b-(c1b-c3b)*k$3;let x1_=Math.round(Math.min(xa,xb)),x2_=Math.round(Math.max(xa,xb)),j$2=rowSize*y$2+x1_*4;for(let x$2=x1_;x$2<=x2_;x$2++)k$3=(xa-x$2)/(xa-xb),k$3<0?k$3=0:k$3>1&&(k$3=1),bytes[j$2++]=car-(car-cbr)*k$3|0,bytes[j$2++]=cag-(cag-cbg)*k$3|0,bytes[j$2++]=cab-(cab-cbb)*k$3|0,bytes[j$2++]=255}}function drawFigure(data,figure,context){let ps=figure.coords,cs=figure.colors,i$4,ii;switch(figure.type){case`lattice`:let verticesPerRow=figure.verticesPerRow,rows=Math.floor(ps.length/verticesPerRow)-1,cols=verticesPerRow-1;for(i$4=0;i$4<rows;i$4++){let q$1=i$4*verticesPerRow;for(let j$2=0;j$2<cols;j$2++,q$1++)drawTriangle(data,context,ps[q$1],ps[q$1+1],ps[q$1+verticesPerRow],cs[q$1],cs[q$1+1],cs[q$1+verticesPerRow]),drawTriangle(data,context,ps[q$1+verticesPerRow+1],ps[q$1+1],ps[q$1+verticesPerRow],cs[q$1+verticesPerRow+1],cs[q$1+1],cs[q$1+verticesPerRow])}break;case`triangles`:for(i$4=0,ii=ps.length;i$4<ii;i$4+=3)drawTriangle(data,context,ps[i$4],ps[i$4+1],ps[i$4+2],cs[i$4],cs[i$4+1],cs[i$4+2]);break;default:throw Error(`illegal figure`)}}class MeshShadingPattern extends BaseShadingPattern{constructor(IR){super(),this._coords=IR[2],this._colors=IR[3],this._figures=IR[4],this._bounds=IR[5],this._bbox=IR[7],this._background=IR[8],this.matrix=null}_createMeshCanvas(combinedScale,backgroundColor,cachedCanvases){let EXPECTED_SCALE=1.1,MAX_PATTERN_SIZE=3e3,BORDER_SIZE=2,offsetX=Math.floor(this._bounds[0]),offsetY=Math.floor(this._bounds[1]),boundsWidth=Math.ceil(this._bounds[2])-offsetX,boundsHeight=Math.ceil(this._bounds[3])-offsetY,width=Math.min(Math.ceil(Math.abs(boundsWidth*combinedScale[0]*EXPECTED_SCALE)),MAX_PATTERN_SIZE),height=Math.min(Math.ceil(Math.abs(boundsHeight*combinedScale[1]*EXPECTED_SCALE)),MAX_PATTERN_SIZE),scaleX$1=boundsWidth/width,scaleY$1=boundsHeight/height,context={coords:this._coords,colors:this._colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX$1,scaleY:1/scaleY$1},paddedWidth=width+4,paddedHeight=height+4,tmpCanvas=cachedCanvases.getCanvas(`mesh`,paddedWidth,paddedHeight,!1),tmpCtx=tmpCanvas.context,data=tmpCtx.createImageData(width,height);if(backgroundColor){let bytes=data.data;for(let i$4=0,ii=bytes.length;i$4<ii;i$4+=4)bytes[i$4]=backgroundColor[0],bytes[i$4+1]=backgroundColor[1],bytes[i$4+2]=backgroundColor[2],bytes[i$4+3]=255}for(let figure of this._figures)drawFigure(data,figure,context);return tmpCtx.putImageData(data,2,2),{canvas:tmpCanvas.canvas,offsetX:offsetX-2*scaleX$1,offsetY:offsetY-2*scaleY$1,scaleX:scaleX$1,scaleY:scaleY$1}}getPattern(ctx,owner,inverse,pathType){applyBoundingBox(ctx,this._bbox);let scale$1;if(pathType===PathType.SHADING)scale$1=_util.Util.singularValueDecompose2dScale((0,_display_utils.getCurrentTransform)(ctx));else if(scale$1=_util.Util.singularValueDecompose2dScale(owner.baseTransform),this.matrix){let matrixScale=_util.Util.singularValueDecompose2dScale(this.matrix);scale$1=[scale$1[0]*matrixScale[0],scale$1[1]*matrixScale[1]]}let temporaryPatternCanvas=this._createMeshCanvas(scale$1,pathType===PathType.SHADING?null:this._background,owner.cachedCanvases);return pathType!==PathType.SHADING&&(ctx.setTransform(...owner.baseTransform),this.matrix&&ctx.transform(...this.matrix)),ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY),ctx.createPattern(temporaryPatternCanvas.canvas,`no-repeat`)}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return`hotpink`}}function getShadingPattern(IR){switch(IR[0]){case`RadialAxial`:return new RadialAxialShadingPattern(IR);case`Mesh`:return new MeshShadingPattern(IR);case`Dummy`:return new DummyShadingPattern}throw Error(`Unknown IR type: ${IR[0]}`)}let PaintType={COLORED:1,UNCOLORED:2};class TilingPattern{static MAX_PATTERN_SIZE=3e3;constructor(IR,color$2,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2],this.matrix=IR[3]||[1,0,0,1,0,0],this.bbox=IR[4],this.xstep=IR[5],this.ystep=IR[6],this.paintType=IR[7],this.tilingType=IR[8],this.color=color$2,this.ctx=ctx,this.canvasGraphicsFactory=canvasGraphicsFactory,this.baseTransform=baseTransform}createPatternCanvas(owner){let operatorList=this.operatorList,bbox=this.bbox,xstep=this.xstep,ystep=this.ystep,paintType=this.paintType,tilingType=this.tilingType,color$2=this.color,canvasGraphicsFactory=this.canvasGraphicsFactory;(0,_util.info)(`TilingType: `+tilingType);let x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3],matrixScale=_util.Util.singularValueDecompose2dScale(this.matrix),curMatrixScale=_util.Util.singularValueDecompose2dScale(this.baseTransform),combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]],dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]),dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]),tmpCanvas=owner.cachedCanvases.getCanvas(`pattern`,dimx.size,dimy.size,!0),tmpCtx=tmpCanvas.context,graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel,this.setFillAndStrokeStyleToContext(graphics,paintType,color$2);let adjustedX0=x0,adjustedY0=y0,adjustedX1=x1,adjustedY1=y1;return x0<0&&(adjustedX0=0,adjustedX1+=Math.abs(x0)),y0<0&&(adjustedY0=0,adjustedY1+=Math.abs(y0)),tmpCtx.translate(-(dimx.scale*adjustedX0),-(dimy.scale*adjustedY0)),graphics.transform(dimx.scale,0,0,dimy.scale,0,0),tmpCtx.save(),this.clipBbox(graphics,adjustedX0,adjustedY0,adjustedX1,adjustedY1),graphics.baseTransform=(0,_display_utils.getCurrentTransform)(graphics.ctx),graphics.executeOperatorList(operatorList),graphics.endDrawing(),{canvas:tmpCanvas.canvas,scaleX:dimx.scale,scaleY:dimy.scale,offsetX:adjustedX0,offsetY:adjustedY0}}getSizeAndScale(step,realOutputSize,scale$1){step=Math.abs(step);let maxSize=Math.max(TilingPattern.MAX_PATTERN_SIZE,realOutputSize),size=Math.ceil(step*scale$1);return size>=maxSize?size=maxSize:scale$1=size/step,{scale:scale$1,size}}clipBbox(graphics,x0,y0,x1,y1){let bboxWidth=x1-x0,bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight),graphics.current.updateRectMinMax((0,_display_utils.getCurrentTransform)(graphics.ctx),[x0,y0,x1,y1]),graphics.clip(),graphics.endPath()}setFillAndStrokeStyleToContext(graphics,paintType,color$2){let context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType.COLORED:let ctx=this.ctx;context.fillStyle=ctx.fillStyle,context.strokeStyle=ctx.strokeStyle,current.fillColor=ctx.fillStyle,current.strokeColor=ctx.strokeStyle;break;case PaintType.UNCOLORED:let cssColor=_util.Util.makeHexColor(color$2[0],color$2[1],color$2[2]);context.fillStyle=cssColor,context.strokeStyle=cssColor,current.fillColor=cssColor,current.strokeColor=cssColor;break;default:throw new _util.FormatError(`Unsupported paint type: ${paintType}`)}}getPattern(ctx,owner,inverse,pathType){let matrix=inverse;pathType!==PathType.SHADING&&(matrix=_util.Util.transform(matrix,owner.baseTransform),this.matrix&&(matrix=_util.Util.transform(matrix,this.matrix)));let temporaryPatternCanvas=this.createPatternCanvas(owner),domMatrix=new DOMMatrix(matrix);domMatrix=domMatrix.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),domMatrix=domMatrix.scale(1/temporaryPatternCanvas.scaleX,1/temporaryPatternCanvas.scaleY);let pattern=ctx.createPattern(temporaryPatternCanvas.canvas,`repeat`);return pattern.setTransform(domMatrix),pattern}}exports$1.TilingPattern=TilingPattern}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.convertBlackAndWhiteToRGBA=convertBlackAndWhiteToRGBA,exports$1.convertToRGBA=convertToRGBA,exports$1.grayToRGBA=grayToRGBA;var _util=__w_pdfjs_require__$1(1);function convertToRGBA(params){switch(params.kind){case _util.ImageKind.GRAYSCALE_1BPP:return convertBlackAndWhiteToRGBA(params);case _util.ImageKind.RGB_24BPP:return convertRGBToRGBA(params)}return null}function convertBlackAndWhiteToRGBA({src,srcPos=0,dest,width,height,nonBlackColor=4294967295,inverseDecode=!1}){let black=_util.FeatureTest.isLittleEndian?4278190080:255,[zeroMapping,oneMapping]=inverseDecode?[nonBlackColor,black]:[black,nonBlackColor],widthInSource=width>>3,widthRemainder=width&7,srcLength=src.length;dest=new Uint32Array(dest.buffer);let destPos=0;for(let i$4=0;i$4<height;i$4++){for(let max=srcPos+widthInSource;srcPos<max;srcPos++){let elem$1=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=elem$1&128?oneMapping:zeroMapping,dest[destPos++]=elem$1&64?oneMapping:zeroMapping,dest[destPos++]=elem$1&32?oneMapping:zeroMapping,dest[destPos++]=elem$1&16?oneMapping:zeroMapping,dest[destPos++]=elem$1&8?oneMapping:zeroMapping,dest[destPos++]=elem$1&4?oneMapping:zeroMapping,dest[destPos++]=elem$1&2?oneMapping:zeroMapping,dest[destPos++]=elem$1&1?oneMapping:zeroMapping}if(widthRemainder===0)continue;let elem=srcPos<srcLength?src[srcPos++]:255;for(let j$2=0;j$2<widthRemainder;j$2++)dest[destPos++]=elem&1<<7-j$2?oneMapping:zeroMapping}return{srcPos,destPos}}function convertRGBToRGBA({src,srcPos=0,dest,destPos=0,width,height}){let i$4=0,len32=src.length>>2,src32=new Uint32Array(src.buffer,srcPos,len32);if(_util.FeatureTest.isLittleEndian){for(;i$4<len32-2;i$4+=3,destPos+=4){let s1=src32[i$4],s2=src32[i$4+1],s3=src32[i$4+2];dest[destPos]=s1|4278190080,dest[destPos+1]=s1>>>24|s2<<8|4278190080,dest[destPos+2]=s2>>>16|s3<<16|4278190080,dest[destPos+3]=s3>>>8|4278190080}for(let j$2=i$4*4,jj=src.length;j$2<jj;j$2+=3)dest[destPos++]=src[j$2]|src[j$2+1]<<8|src[j$2+2]<<16|4278190080}else{for(;i$4<len32-2;i$4+=3,destPos+=4){let s1=src32[i$4],s2=src32[i$4+1],s3=src32[i$4+2];dest[destPos]=s1|255,dest[destPos+1]=s1<<24|s2>>>8|255,dest[destPos+2]=s2<<16|s3>>>16|255,dest[destPos+3]=s3<<8|255}for(let j$2=i$4*4,jj=src.length;j$2<jj;j$2+=3)dest[destPos++]=src[j$2]<<24|src[j$2+1]<<16|src[j$2+2]<<8|255}return{srcPos,destPos}}function grayToRGBA(src,dest){if(_util.FeatureTest.isLittleEndian)for(let i$4=0,ii=src.length;i$4<ii;i$4++)dest[i$4]=src[i$4]*65793|4278190080;else for(let i$4=0,ii=src.length;i$4<ii;i$4++)dest[i$4]=src[i$4]*16843008|255}}),((__unused_webpack_module,exports$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.GlobalWorkerOptions=void 0;let GlobalWorkerOptions=Object.create(null);exports$1.GlobalWorkerOptions=GlobalWorkerOptions,GlobalWorkerOptions.workerPort=null,GlobalWorkerOptions.workerSrc=``}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.MessageHandler=void 0;var _util=__w_pdfjs_require__$1(1);let CallbackKind={UNKNOWN:0,DATA:1,ERROR:2},StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){switch(reason instanceof Error||typeof reason==`object`&&reason||(0,_util.unreachable)(`wrapReason: Expected "reason" to be a (possibly cloned) Error.`),reason.name){case`AbortException`:return new _util.AbortException(reason.message);case`MissingPDFException`:return new _util.MissingPDFException(reason.message);case`PasswordException`:return new _util.PasswordException(reason.message,reason.code);case`UnexpectedResponseException`:return new _util.UnexpectedResponseException(reason.message,reason.status);case`UnknownErrorException`:return new _util.UnknownErrorException(reason.message,reason.details);default:return new _util.UnknownErrorException(reason.message,reason.toString())}}class MessageHandler{constructor(sourceName,targetName,comObj){this.sourceName=sourceName,this.targetName=targetName,this.comObj=comObj,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=event=>{let data=event.data;if(data.targetName!==this.sourceName)return;if(data.stream){this.#t(data);return}if(data.callback){let callbackId=data.callbackId,capability=this.callbackCapabilities[callbackId];if(!capability)throw Error(`Cannot resolve callback ${callbackId}`);if(delete this.callbackCapabilities[callbackId],data.callback===CallbackKind.DATA)capability.resolve(data.data);else if(data.callback===CallbackKind.ERROR)capability.reject(wrapReason(data.reason));else throw Error(`Unexpected callback case`);return}let action=this.actionHandler[data.action];if(!action)throw Error(`Unknown action from worker: ${data.action}`);if(data.callbackId){let cbSourceName=this.sourceName,cbTargetName=data.sourceName;new Promise(function(resolve){resolve(action(data.data))}).then(function(result){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result})},function(reason){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)})});return}if(data.streamId){this.#e(data);return}action(data.data)},comObj.addEventListener(`message`,this._onComObjOnMessage)}on(actionName,handler){let ah=this.actionHandler;if(ah[actionName])throw Error(`There is already an actionName called "${actionName}"`);ah[actionName]=handler}send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data},transfers)}sendWithPromise(actionName,data,transfers){let callbackId=this.callbackId++,capability=new _util.PromiseCapability;this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId,data},transfers)}catch(ex){capability.reject(ex)}return capability.promise}sendWithStream(actionName,data,queueingStrategy,transfers){let streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:controller=>{let startCapability=new _util.PromiseCapability;return this.streamControllers[streamId]={controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:!1},comObj.postMessage({sourceName,targetName,action:actionName,streamId,data,desiredSize:controller.desiredSize},transfers),startCapability.promise},pull:controller=>{let pullCapability=new _util.PromiseCapability;return this.streamControllers[streamId].pullCall=pullCapability,comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL,streamId,desiredSize:controller.desiredSize}),pullCapability.promise},cancel:reason=>{(0,_util.assert)(reason instanceof Error,`cancel must have a valid reason`);let cancelCapability=new _util.PromiseCapability;return this.streamControllers[streamId].cancelCall=cancelCapability,this.streamControllers[streamId].isClosed=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL,streamId,reason:wrapReason(reason)}),cancelCapability.promise}},queueingStrategy)}#e(data){let streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,self$1=this,action=this.actionHandler[data.action],streamSink={enqueue(chunk,size=1,transfers){if(this.isCancelled)return;let lastDesiredSize=this.desiredSize;this.desiredSize-=size,lastDesiredSize>0&&this.desiredSize<=0&&(this.sinkCapability=new _util.PromiseCapability,this.ready=this.sinkCapability.promise),comObj.postMessage({sourceName,targetName,stream:StreamKind.ENQUEUE,streamId,chunk},transfers)},close(){this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CLOSE,streamId}),delete self$1.streamSinks[streamId])},error(reason){(0,_util.assert)(reason instanceof Error,`error must have a valid reason`),!this.isCancelled&&(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.ERROR,streamId,reason:wrapReason(reason)}))},sinkCapability:new _util.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve(),streamSink.ready=streamSink.sinkCapability.promise,this.streamSinks[streamId]=streamSink,new Promise(function(resolve){resolve(action(data.data,streamSink))}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,reason:wrapReason(reason)})})}#t(data){let streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:data.success?streamController.startCall.resolve():streamController.startCall.reject(wrapReason(data.reason));break;case StreamKind.PULL_COMPLETE:data.success?streamController.pullCall.resolve():streamController.pullCall.reject(wrapReason(data.reason));break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0});break}streamSink.desiredSize<=0&&data.desiredSize>0&&streamSink.sinkCapability.resolve(),streamSink.desiredSize=data.desiredSize,new Promise(function(resolve){resolve(streamSink.onPull?.())}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,reason:wrapReason(reason)})});break;case StreamKind.ENQUEUE:if((0,_util.assert)(streamController,`enqueue should have stream controller`),streamController.isClosed)break;streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:if((0,_util.assert)(streamController,`close should have stream controller`),streamController.isClosed)break;streamController.isClosed=!0,streamController.controller.close(),this.#n(streamController,streamId);break;case StreamKind.ERROR:(0,_util.assert)(streamController,`error should have stream controller`),streamController.controller.error(wrapReason(data.reason)),this.#n(streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:data.success?streamController.cancelCall.resolve():streamController.cancelCall.reject(wrapReason(data.reason)),this.#n(streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink)break;new Promise(function(resolve){resolve(streamSink.onCancel?.(wrapReason(data.reason)))}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,reason:wrapReason(reason)})}),streamSink.sinkCapability.reject(wrapReason(data.reason)),streamSink.isCancelled=!0,delete this.streamSinks[streamId];break;default:throw Error(`Unexpected stream case`)}}async#n(streamController,streamId){await Promise.allSettled([streamController.startCall?.promise,streamController.pullCall?.promise,streamController.cancelCall?.promise]),delete this.streamControllers[streamId]}destroy(){this.comObj.removeEventListener(`message`,this._onComObjOnMessage)}}exports$1.MessageHandler=MessageHandler}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.Metadata=void 0;var _util=__w_pdfjs_require__$1(1);class Metadata{#e;#t;constructor({parsedData,rawData}){this.#e=parsedData,this.#t=rawData}getRaw(){return this.#t}get(name){return this.#e.get(name)??null}getAll(){return(0,_util.objectFromMap)(this.#e)}has(name){return this.#e.has(name)}}exports$1.Metadata=Metadata}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.OptionalContentConfig=void 0;var _util=__w_pdfjs_require__$1(1),_murmurhash=__w_pdfjs_require__$1(8);let INTERNAL=Symbol(`INTERNAL`);class OptionalContentGroup{#e=!0;constructor(name,intent){this.name=name,this.intent=intent}get visible(){return this.#e}_setVisible(internal,visible){internal!==INTERNAL&&(0,_util.unreachable)("Internal method `_setVisible` called."),this.#e=visible}}class OptionalContentConfig{#e=null;#t=new Map;#n=null;#r=null;constructor(data){if(this.name=null,this.creator=null,data!==null){this.name=data.name,this.creator=data.creator,this.#r=data.order;for(let group of data.groups)this.#t.set(group.id,new OptionalContentGroup(group.name,group.intent));if(data.baseState===`OFF`)for(let group of this.#t.values())group._setVisible(INTERNAL,!1);for(let on of data.on)this.#t.get(on)._setVisible(INTERNAL,!0);for(let off of data.off)this.#t.get(off)._setVisible(INTERNAL,!1);this.#n=this.getHash()}}#i(array$1){let length=array$1.length;if(length<2)return!0;let operator=array$1[0];for(let i$4=1;i$4<length;i$4++){let element=array$1[i$4],state;if(Array.isArray(element))state=this.#i(element);else if(this.#t.has(element))state=this.#t.get(element).visible;else return(0,_util.warn)(`Optional content group not found: ${element}`),!0;switch(operator){case`And`:if(!state)return!1;break;case`Or`:if(state)return!0;break;case`Not`:return!state;default:return!0}}return operator===`And`}isVisible(group){if(this.#t.size===0)return!0;if(!group)return(0,_util.warn)(`Optional content group not defined.`),!0;if(group.type===`OCG`)return this.#t.has(group.id)?this.#t.get(group.id).visible:((0,_util.warn)(`Optional content group not found: ${group.id}`),!0);if(group.type===`OCMD`){if(group.expression)return this.#i(group.expression);if(!group.policy||group.policy===`AnyOn`){for(let id$3 of group.ids){if(!this.#t.has(id$3))return(0,_util.warn)(`Optional content group not found: ${id$3}`),!0;if(this.#t.get(id$3).visible)return!0}return!1}else if(group.policy===`AllOn`){for(let id$3 of group.ids){if(!this.#t.has(id$3))return(0,_util.warn)(`Optional content group not found: ${id$3}`),!0;if(!this.#t.get(id$3).visible)return!1}return!0}else if(group.policy===`AnyOff`){for(let id$3 of group.ids){if(!this.#t.has(id$3))return(0,_util.warn)(`Optional content group not found: ${id$3}`),!0;if(!this.#t.get(id$3).visible)return!0}return!1}else if(group.policy===`AllOff`){for(let id$3 of group.ids){if(!this.#t.has(id$3))return(0,_util.warn)(`Optional content group not found: ${id$3}`),!0;if(this.#t.get(id$3).visible)return!1}return!0}return(0,_util.warn)(`Unknown optional content policy ${group.policy}.`),!0}return(0,_util.warn)(`Unknown group type ${group.type}.`),!0}setVisibility(id$3,visible=!0){if(!this.#t.has(id$3)){(0,_util.warn)(`Optional content group not found: ${id$3}`);return}this.#t.get(id$3)._setVisible(INTERNAL,!!visible),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,_util.objectFromMap)(this.#t):null}getGroup(id$3){return this.#t.get(id$3)||null}getHash(){if(this.#e!==null)return this.#e;let hash=new _murmurhash.MurmurHash3_64;for(let[id$3,group]of this.#t)hash.update(`${id$3}:${group.visible}`);return this.#e=hash.hexdigest()}}exports$1.OptionalContentConfig=OptionalContentConfig}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.PDFDataTransportStream=void 0;var _util=__w_pdfjs_require__$1(1),_display_utils=__w_pdfjs_require__$1(6);class PDFDataTransportStream{constructor({length,initialData,progressiveDone=!1,contentDispositionFilename=null,disableRange=!1,disableStream=!1},pdfDataRangeTransport){if((0,_util.assert)(pdfDataRangeTransport,`PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.`),this._queuedChunks=[],this._progressiveDone=progressiveDone,this._contentDispositionFilename=contentDispositionFilename,initialData?.length>0){let buffer=initialData instanceof Uint8Array&&initialData.byteLength===initialData.buffer.byteLength?initialData.buffer:new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer)}this._pdfDataRangeTransport=pdfDataRangeTransport,this._isStreamingSupported=!disableStream,this._isRangeSupported=!disableRange,this._contentLength=length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((begin,chunk)=>{this._onReceiveData({begin,chunk})}),this._pdfDataRangeTransport.addProgressListener((loaded,total)=>{this._onProgress({loaded,total})}),this._pdfDataRangeTransport.addProgressiveReadListener(chunk=>{this._onReceiveData({chunk})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin,chunk}){let buffer=chunk instanceof Uint8Array&&chunk.byteLength===chunk.buffer.byteLength?chunk.buffer:new Uint8Array(chunk).buffer;if(begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(buffer):this._queuedChunks.push(buffer);else{let found=this._rangeReaders.some(function(rangeReader){return rangeReader._begin===begin?(rangeReader._enqueue(buffer),!0):!1});(0,_util.assert)(found,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(evt){evt.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:evt.loaded}):this._fullRequestReader?.onProgress?.({loaded:evt.loaded,total:evt.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(reader){let i$4=this._rangeReaders.indexOf(reader);i$4>=0&&this._rangeReaders.splice(i$4,1)}getFullReader(){(0,_util.assert)(!this._fullRequestReader,`PDFDataTransportStream.getFullReader can only be called once.`);let queuedChunks=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(begin,end$1){if(end$1<=this._progressiveDataLength)return null;let reader=new PDFDataTransportStreamRangeReader(this,begin,end$1);return this._pdfDataRangeTransport.requestDataRange(begin,end$1),this._rangeReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(let reader of this._rangeReaders.slice(0))reader.cancel(reason);this._pdfDataRangeTransport.abort()}}exports$1.PDFDataTransportStream=PDFDataTransportStream;class PDFDataTransportStreamReader{constructor(stream,queuedChunks,progressiveDone=!1,contentDispositionFilename=null){this._stream=stream,this._done=progressiveDone||!1,this._filename=(0,_display_utils.isPdfFile)(contentDispositionFilename)?contentDispositionFilename:null,this._queuedChunks=queuedChunks||[],this._loaded=0;for(let chunk of this._queuedChunks)this._loaded+=chunk.byteLength;this._requests=[],this._headersReady=Promise.resolve(),stream._fullRequestReader=this,this.onProgress=null}_enqueue(chunk){this._done||(this._requests.length>0?this._requests.shift().resolve({value:chunk,done:!1}):this._queuedChunks.push(chunk),this._loaded+=chunk.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let requestCapability=new _util.PromiseCapability;return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(let requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class PDFDataTransportStreamRangeReader{constructor(stream,begin,end$1){this._stream=stream,this._begin=begin,this._end=end$1,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(chunk){if(!this._done){if(this._requests.length===0)this._queuedChunk=chunk;else{this._requests.shift().resolve({value:chunk,done:!1});for(let requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let chunk=this._queuedChunk;return this._queuedChunk=null,{value:chunk,done:!1}}if(this._done)return{value:void 0,done:!0};let requestCapability=new _util.PromiseCapability;return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(let requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.PDFFetchStream=void 0;var _util=__w_pdfjs_require__$1(1),_network_utils=__w_pdfjs_require__$1(20);function createFetchOptions(headers,withCredentials,abortController){return{method:`GET`,headers,signal:abortController.signal,mode:`cors`,credentials:withCredentials?`include`:`same-origin`,redirect:`follow`}}function createHeaders(httpHeaders){let headers=new Headers;for(let property in httpHeaders){let value=httpHeaders[property];value!==void 0&&headers.append(property,value)}return headers}function getArrayBuffer(val){return val instanceof Uint8Array?val.buffer:val instanceof ArrayBuffer?val:((0,_util.warn)(`getArrayBuffer - unexpected data format: ${val}`),new Uint8Array(val).buffer)}class PDFFetchStream{constructor(source){this.source=source,this.isHttp=/^https?:/i.test(source.url),this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,_util.assert)(!this._fullRequestReader,`PDFFetchStream.getFullReader can only be called once.`),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(begin,end$1){if(end$1<=this._progressiveDataLength)return null;let reader=new PDFFetchStreamRangeReader(this,begin,end$1);return this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(let reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}}exports$1.PDFFetchStream=PDFFetchStream;class PDFFetchStreamReader{constructor(stream){this._stream=stream,this._reader=null,this._loaded=0,this._filename=null;let source=stream.source;this._withCredentials=source.withCredentials||!1,this._contentLength=source.length,this._headersCapability=new _util.PromiseCapability,this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._headers=createHeaders(this._stream.httpHeaders);let url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._reader=response.body.getReader(),this._headersCapability.resolve();let getResponseHeader=name=>response.headers.get(name),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _util.AbortException(`Streaming is disabled.`))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value,done}=await this._reader.read();return done?{value,done}:(this._loaded+=value.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(value),done:!1})}cancel(reason){this._reader?.cancel(reason),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(stream,begin,end$1){this._stream=stream,this._reader=null,this._loaded=0;let source=stream.source;this._withCredentials=source.withCredentials||!1,this._readCapability=new _util.PromiseCapability,this._isStreamingSupported=!source.disableStream,this._abortController=new AbortController,this._headers=createHeaders(this._stream.httpHeaders),this._headers.append(`Range`,`bytes=${begin}-${end$1-1}`);let url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._readCapability.resolve(),this._reader=response.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value,done}=await this._reader.read();return done?{value,done}:(this._loaded+=value.byteLength,this.onProgress?.({loaded:this._loaded}),{value:getArrayBuffer(value),done:!1})}cancel(reason){this._reader?.cancel(reason),this._abortController.abort()}}}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.createResponseStatusError=createResponseStatusError,exports$1.extractFilenameFromHeader=extractFilenameFromHeader,exports$1.validateRangeRequestCapabilities=validateRangeRequestCapabilities,exports$1.validateResponseStatus=validateResponseStatus;var _util=__w_pdfjs_require__$1(1),_content_disposition=__w_pdfjs_require__$1(21),_display_utils=__w_pdfjs_require__$1(6);function validateRangeRequestCapabilities({getResponseHeader,isHttp,rangeChunkSize,disableRange}){let returnValues={allowRangeRequests:!1,suggestedLength:void 0},length=parseInt(getResponseHeader(`Content-Length`),10);return!Number.isInteger(length)||(returnValues.suggestedLength=length,length<=2*rangeChunkSize)||disableRange||!isHttp||getResponseHeader(`Accept-Ranges`)!==`bytes`||(getResponseHeader(`Content-Encoding`)||`identity`)!==`identity`||(returnValues.allowRangeRequests=!0),returnValues}function extractFilenameFromHeader(getResponseHeader){let contentDisposition=getResponseHeader(`Content-Disposition`);if(contentDisposition){let filename=(0,_content_disposition.getFilenameFromContentDispositionHeader)(contentDisposition);if(filename.includes(`%`))try{filename=decodeURIComponent(filename)}catch{}if((0,_display_utils.isPdfFile)(filename))return filename}return null}function createResponseStatusError(status,url){return status===404||status===0&&url.startsWith(`file:`)?new _util.MissingPDFException(`Missing PDF "`+url+`".`):new _util.UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF "${url}".`,status)}function validateResponseStatus(status){return status===200||status===206}}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.getFilenameFromContentDispositionHeader=getFilenameFromContentDispositionHeader;var _util=__w_pdfjs_require__$1(1);function getFilenameFromContentDispositionHeader(contentDisposition){let needsEncodingFixup=!0,tmp=toParamRegExp(`filename\\*`,`i`).exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=unescape(filename),filename=rfc5987decode(filename),filename=rfc2047decode(filename),fixupEncoding(filename)}if(tmp=rfc2231getparam(contentDisposition),tmp)return fixupEncoding(rfc2047decode(tmp));if(tmp=toParamRegExp(`filename`,`i`).exec(contentDisposition),tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=rfc2047decode(filename),fixupEncoding(filename)}function toParamRegExp(attributePattern,flags){return RegExp(`(?:^|;)\\s*`+attributePattern+`\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)`,flags)}function textdecode(encoding,value){if(encoding){if(!/^[\x00-\xFF]+$/.test(value))return value;try{let decoder=new TextDecoder(encoding,{fatal:!0}),buffer=(0,_util.stringToBytes)(value);value=decoder.decode(buffer),needsEncodingFixup=!1}catch{}}return value}function fixupEncoding(value){return needsEncodingFixup&&/[\x80-\xff]/.test(value)&&(value=textdecode(`utf-8`,value),needsEncodingFixup&&(value=textdecode(`iso-8859-1`,value))),value}function rfc2231getparam(contentDispositionStr){let matches=[],match,iter=toParamRegExp(`filename\\*((?!0\\d)\\d+)(\\*?)`,`ig`);for(;(match=iter.exec(contentDispositionStr))!==null;){let[,n$4,quot,part]=match;if(n$4=parseInt(n$4,10),n$4 in matches){if(n$4===0)break;continue}matches[n$4]=[quot,part]}let parts=[];for(let n$4=0;n$4<matches.length&&n$4 in matches;++n$4){let[quot,part]=matches[n$4];part=rfc2616unquote(part),quot&&(part=unescape(part),n$4===0&&(part=rfc5987decode(part))),parts.push(part)}return parts.join(``)}function rfc2616unquote(value){if(value.startsWith(`"`)){let parts=value.slice(1).split(`\\"`);for(let i$4=0;i$4<parts.length;++i$4){let quotindex=parts[i$4].indexOf(`"`);quotindex!==-1&&(parts[i$4]=parts[i$4].slice(0,quotindex),parts.length=i$4+1),parts[i$4]=parts[i$4].replaceAll(/\\(.)/g,`$1`)}value=parts.join(`"`)}return value}function rfc5987decode(extvalue){let encodingend=extvalue.indexOf(`'`);return encodingend===-1?extvalue:textdecode(extvalue.slice(0,encodingend),extvalue.slice(encodingend+1).replace(/^[^']*'/,``))}function rfc2047decode(value){return!value.startsWith(`=?`)||/[\x00-\x19\x80-\xff]/.test(value)?value:value.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(matches,charset,encoding,text){if(encoding===`q`||encoding===`Q`)return text=text.replaceAll(`_`,` `),text=text.replaceAll(/=([0-9a-fA-F]{2})/g,function(match,hex$2){return String.fromCharCode(parseInt(hex$2,16))}),textdecode(charset,text);try{text=atob(text)}catch{}return textdecode(charset,text)})}return``}}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.PDFNetworkStream=void 0;var _util=__w_pdfjs_require__$1(1),_network_utils=__w_pdfjs_require__$1(20);let OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function getArrayBuffer(xhr){let data=xhr.response;return typeof data==`string`?(0,_util.stringToBytes)(data).buffer:data}class NetworkManager{constructor(url,args={}){this.url=url,this.isHttp=/^https?:/i.test(url),this.httpHeaders=this.isHttp&&args.httpHeaders||Object.create(null),this.withCredentials=args.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(begin,end$1,listeners){let args={begin,end:end$1};for(let prop in listeners)args[prop]=listeners[prop];return this.request(args)}requestFull(listeners){return this.request(listeners)}request(args){let xhr=new XMLHttpRequest,xhrId=this.currXhrId++,pendingRequest=this.pendingRequests[xhrId]={xhr};for(let property in xhr.open(`GET`,this.url),xhr.withCredentials=this.withCredentials,this.httpHeaders){let value=this.httpHeaders[property];value!==void 0&&xhr.setRequestHeader(property,value)}return this.isHttp&&`begin`in args&&`end`in args?(xhr.setRequestHeader(`Range`,`bytes=${args.begin}-${args.end-1}`),pendingRequest.expectedStatus=206):pendingRequest.expectedStatus=200,xhr.responseType=`arraybuffer`,args.onError&&(xhr.onerror=function(evt){args.onError(xhr.status)}),xhr.onreadystatechange=this.onStateChange.bind(this,xhrId),xhr.onprogress=this.onProgress.bind(this,xhrId),pendingRequest.onHeadersReceived=args.onHeadersReceived,pendingRequest.onDone=args.onDone,pendingRequest.onError=args.onError,pendingRequest.onProgress=args.onProgress,xhr.send(null),xhrId}onProgress(xhrId,evt){let pendingRequest=this.pendingRequests[xhrId];pendingRequest&&pendingRequest.onProgress?.(evt)}onStateChange(xhrId,evt){let pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest)return;let xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived&&(pendingRequest.onHeadersReceived(),delete pendingRequest.onHeadersReceived),xhr.readyState!==4||!(xhrId in this.pendingRequests))return;if(delete this.pendingRequests[xhrId],xhr.status===0&&this.isHttp){pendingRequest.onError?.(xhr.status);return}let xhrStatus=xhr.status||200;if(!(xhrStatus===200&&pendingRequest.expectedStatus===206)&&xhrStatus!==pendingRequest.expectedStatus){pendingRequest.onError?.(xhr.status);return}let chunk=getArrayBuffer(xhr);if(xhrStatus===206){let rangeHeader=xhr.getResponseHeader(`Content-Range`),matches=/bytes (\d+)-(\d+)\/(\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk})}else chunk?pendingRequest.onDone({begin:0,chunk}):pendingRequest.onError?.(xhr.status)}getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr}isPendingRequest(xhrId){return xhrId in this.pendingRequests}abortRequest(xhrId){let xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId],xhr.abort()}}class PDFNetworkStream{constructor(source){this._source=source,this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials}),this._rangeChunkSize=source.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(reader){let i$4=this._rangeRequestReaders.indexOf(reader);i$4>=0&&this._rangeRequestReaders.splice(i$4,1)}getFullReader(){return(0,_util.assert)(!this._fullRequestReader,`PDFNetworkStream.getFullReader can only be called once.`),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(begin,end$1){let reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end$1);return reader.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(let reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}}exports$1.PDFNetworkStream=PDFNetworkStream;class PDFNetworkStreamFullRequestReader{constructor(manager,source){this._manager=manager;let args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url,this._fullRequestId=manager.requestFull(args),this._headersReceivedCapability=new _util.PromiseCapability,this._disableRange=source.disableRange||!1,this._contentLength=source.length,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let fullRequestXhrId=this._fullRequestId,fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId),getResponseHeader=name=>fullRequestXhr.getResponseHeader(name),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});allowRangeRequests&&(this._isRangeSupported=!0),this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),this._isRangeSupported&&this._manager.abortRequest(fullRequestXhrId),this._headersReceivedCapability.resolve()}_onDone(data){if(data&&(this._requests.length>0?this._requests.shift().resolve({value:data.chunk,done:!1}):this._cachedChunks.push(data.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url),this._headersReceivedCapability.reject(this._storedError);for(let requestCapability of this._requests)requestCapability.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(evt){this.onProgress?.({loaded:evt.loaded,total:evt.lengthComputable?evt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let requestCapability=new _util.PromiseCapability;return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0,this._headersReceivedCapability.reject(reason);for(let requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(manager,begin,end$1){this._manager=manager;let args={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=manager.url,this._requestId=manager.requestRange(begin,end$1,args),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(data){let chunk=data.chunk;this._requests.length>0?this._requests.shift().resolve({value:chunk,done:!1}):this._queuedChunk=chunk,this._done=!0;for(let requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url);for(let requestCapability of this._requests)requestCapability.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(evt){this.isStreamingSupported||this.onProgress?.({loaded:evt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let chunk=this._queuedChunk;return this._queuedChunk=null,{value:chunk,done:!1}}if(this._done)return{value:void 0,done:!0};let requestCapability=new _util.PromiseCapability;return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(let requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.PDFNodeStream=void 0;var _util=__w_pdfjs_require__$1(1),_network_utils=__w_pdfjs_require__$1(20);let fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//;function parseUrl(sourceUrl){let url=require___vite_browser_external(),parsedUrl=url.parse(sourceUrl);return parsedUrl.protocol===`file:`||parsedUrl.host?parsedUrl:/^[a-z]:[/\\]/i.test(sourceUrl)?url.parse(`file:///${sourceUrl}`):(parsedUrl.host||(parsedUrl.protocol=`file:`),parsedUrl)}class PDFNodeStream{constructor(source){this.source=source,this.url=parseUrl(source.url),this.isHttp=this.url.protocol===`http:`||this.url.protocol===`https:`,this.isFsUrl=this.url.protocol===`file:`,this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,_util.assert)(!this._fullRequestReader,`PDFNodeStream.getFullReader can only be called once.`),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader(start$2,end$1){if(end$1<=this._progressiveDataLength)return null;let rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start$2,end$1):new PDFNodeStreamRangeReader(this,start$2,end$1);return this._rangeRequestReaders.push(rangeReader),rangeReader}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(let reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}}exports$1.PDFNodeStream=PDFNodeStream;class BaseFullReader{constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null;let source=stream.source;this._contentLength=source.length,this._loaded=0,this._filename=null,this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._readableStream=null,this._readCapability=new _util.PromiseCapability,this._headersCapability=new _util.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let chunk=this._readableStream.read();return chunk===null?(this._readCapability=new _util.PromiseCapability,this.read()):(this._loaded+=chunk.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(chunk).buffer,done:!1})}cancel(reason){if(!this._readableStream){this._error(reason);return}this._readableStream.destroy(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on(`readable`,()=>{this._readCapability.resolve()}),readableStream.on(`end`,()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()}),readableStream.on(`error`,reason=>{this._error(reason)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _util.AbortException(`streaming is disabled`)),this._storedError&&this._readableStream.destroy(this._storedError)}}class BaseRangeReader{constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new _util.PromiseCapability,this._isStreamingSupported=!stream.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let chunk=this._readableStream.read();return chunk===null?(this._readCapability=new _util.PromiseCapability,this.read()):(this._loaded+=chunk.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(chunk).buffer,done:!1})}cancel(reason){if(!this._readableStream){this._error(reason);return}this._readableStream.destroy(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on(`readable`,()=>{this._readCapability.resolve()}),readableStream.on(`end`,()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()}),readableStream.on(`error`,reason=>{this._error(reason)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function createRequestOptions(parsedUrl,headers){return{protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.hostname,port:parsedUrl.port,path:parsedUrl.path,method:`GET`,headers}}class PDFNodeStreamFullReader extends BaseFullReader{constructor(stream){super(stream),this._request=null,this._url.protocol,this._request=require___vite_browser_external().request(createRequestOptions(this._url,stream.httpHeaders),response=>{if(response.statusCode===404){let error$1=new _util.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=error$1,this._headersCapability.reject(error$1);return}this._headersCapability.resolve(),this._setReadableStream(response);let getResponseHeader=name=>this._readableStream.headers[name.toLowerCase()],{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader)}),this._request.on(`error`,reason=>{this._storedError=reason,this._headersCapability.reject(reason)}),this._request.end()}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(stream,start$2,end$1){for(let property in super(stream),this._httpHeaders={},stream.httpHeaders){let value=stream.httpHeaders[property];value!==void 0&&(this._httpHeaders[property]=value)}this._httpHeaders.Range=`bytes=${start$2}-${end$1-1}`,this._request=null,this._url.protocol,this._request=require___vite_browser_external().request(createRequestOptions(this._url,this._httpHeaders),response=>{if(response.statusCode===404){this._storedError=new _util.MissingPDFException(`Missing PDF "${this._url}".`);return}this._setReadableStream(response)}),this._request.on(`error`,reason=>{this._storedError=reason}),this._request.end()}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(stream){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,``));let fs=require___vite_browser_external();fs.lstat(path,(error$1,stat)=>{if(error$1){error$1.code===`ENOENT`&&(error$1=new _util.MissingPDFException(`Missing PDF "${path}".`)),this._storedError=error$1,this._headersCapability.reject(error$1);return}this._contentLength=stat.size,this._setReadableStream(fs.createReadStream(path)),this._headersCapability.resolve()})}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(stream,start$2,end$1){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,``));let fs=require___vite_browser_external();this._setReadableStream(fs.createReadStream(path,{start:start$2,end:end$1-1}))}}}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.SVGGraphics=void 0;var _display_utils=__w_pdfjs_require__$1(6),_util=__w_pdfjs_require__$1(1);let SVG_DEFAULTS={fontStyle:`normal`,fontWeight:`normal`,fillColor:`#000000`},XML_NS=`http://www.w3.org/XML/1998/namespace`,XLINK_NS=`http://www.w3.org/1999/xlink`,LINE_CAP_STYLES=[`butt`,`round`,`square`],LINE_JOIN_STYLES=[`miter`,`round`,`bevel`],createObjectURL=function(data,contentType=``,forceDataSchema=!1){if(URL.createObjectURL&&typeof Blob<`u`&&!forceDataSchema)return URL.createObjectURL(new Blob([data],{type:contentType}));let digits=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=`,buffer=`data:${contentType};base64,`;for(let i$4=0,ii=data.length;i$4<ii;i$4+=3){let b1=data[i$4]&255,b2=data[i$4+1]&255,b3=data[i$4+2]&255,d1=b1>>2,d2=(b1&3)<<4|b2>>4,d3=i$4+1<ii?(b2&15)<<2|b3>>6:64,d4=i$4+2<ii?b3&63:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4]}return buffer},convertImgDataToPng=function(){let PNG_HEADER=new Uint8Array([137,80,78,71,13,10,26,10]),CHUNK_WRAPPER_SIZE=12,crcTable=new Int32Array(256);for(let i$4=0;i$4<256;i$4++){let c$3=i$4;for(let h$3=0;h$3<8;h$3++)c$3=c$3&1?3988292384^c$3>>1&2147483647:c$3>>1&2147483647;crcTable[i$4]=c$3}function crc32(data,start$2,end$1){let crc=-1;for(let i$4=start$2;i$4<end$1;i$4++){let b$3=crcTable[(crc^data[i$4])&255];crc=crc>>>8^b$3}return crc^-1}function writePngChunk(type,body,data,offset$1){let p$3=offset$1,len=body.length;data[p$3]=len>>24&255,data[p$3+1]=len>>16&255,data[p$3+2]=len>>8&255,data[p$3+3]=len&255,p$3+=4,data[p$3]=type.charCodeAt(0)&255,data[p$3+1]=type.charCodeAt(1)&255,data[p$3+2]=type.charCodeAt(2)&255,data[p$3+3]=type.charCodeAt(3)&255,p$3+=4,data.set(body,p$3),p$3+=body.length;let crc=crc32(data,offset$1+4,p$3);data[p$3]=crc>>24&255,data[p$3+1]=crc>>16&255,data[p$3+2]=crc>>8&255,data[p$3+3]=crc&255}function adler32(data,start$2,end$1){let a$4=1,b$3=0;for(let i$4=start$2;i$4<end$1;++i$4)a$4=(a$4+(data[i$4]&255))%65521,b$3=(b$3+a$4)%65521;return b$3<<16|a$4}function deflateSync(literals){if(!_util.isNodeJS)return deflateSyncUncompressed(literals);try{let input=parseInt(process.versions.node)>=8?literals:Buffer.from(literals),output=require___vite_browser_external().deflateSync(input,{level:9});return output instanceof Uint8Array?output:new Uint8Array(output)}catch(e$4){(0,_util.warn)(`Not compressing PNG because zlib.deflateSync is unavailable: `+e$4)}return deflateSyncUncompressed(literals)}function deflateSyncUncompressed(literals){let len=literals.length,maxBlockLength=65535,deflateBlocks=Math.ceil(len/maxBlockLength),idat=new Uint8Array(2+len+deflateBlocks*5+4),pi=0;idat[pi++]=120,idat[pi++]=156;let pos=0;for(;len>maxBlockLength;)idat[pi++]=0,idat[pi++]=255,idat[pi++]=255,idat[pi++]=0,idat[pi++]=0,idat.set(literals.subarray(pos,pos+maxBlockLength),pi),pi+=maxBlockLength,pos+=maxBlockLength,len-=maxBlockLength;idat[pi++]=1,idat[pi++]=len&255,idat[pi++]=len>>8&255,idat[pi++]=~len&255,idat[pi++]=(~len&65535)>>8&255,idat.set(literals.subarray(pos),pi),pi+=literals.length-pos;let adler=adler32(literals,0,literals.length);return idat[pi++]=adler>>24&255,idat[pi++]=adler>>16&255,idat[pi++]=adler>>8&255,idat[pi++]=adler&255,idat}function encode$2(imgData,kind,forceDataSchema,isMask){let width=imgData.width,height=imgData.height,bitDepth,colorType,lineSize,bytes=imgData.data;switch(kind){case _util.ImageKind.GRAYSCALE_1BPP:colorType=0,bitDepth=1,lineSize=width+7>>3;break;case _util.ImageKind.RGB_24BPP:colorType=2,bitDepth=8,lineSize=width*3;break;case _util.ImageKind.RGBA_32BPP:colorType=6,bitDepth=8,lineSize=width*4;break;default:throw Error(`invalid format`)}let literals=new Uint8Array((1+lineSize)*height),offsetLiterals=0,offsetBytes=0;for(let y$2=0;y$2<height;++y$2)literals[offsetLiterals++]=0,literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals),offsetBytes+=lineSize,offsetLiterals+=lineSize;if(kind===_util.ImageKind.GRAYSCALE_1BPP&&isMask){offsetLiterals=0;for(let y$2=0;y$2<height;y$2++){offsetLiterals++;for(let i$4=0;i$4<lineSize;i$4++)literals[offsetLiterals++]^=255}}let ihdr=new Uint8Array([width>>24&255,width>>16&255,width>>8&255,width&255,height>>24&255,height>>16&255,height>>8&255,height&255,bitDepth,colorType,0,0,0]),idat=deflateSync(literals),pngLength=PNG_HEADER.length+36+ihdr.length+idat.length,data=new Uint8Array(pngLength),offset$1=0;return data.set(PNG_HEADER,offset$1),offset$1+=PNG_HEADER.length,writePngChunk(`IHDR`,ihdr,data,offset$1),offset$1+=12+ihdr.length,writePngChunk(`IDATA`,idat,data,offset$1),offset$1+=12+idat.length,writePngChunk(`IEND`,new Uint8Array,data,offset$1),createObjectURL(data,`image/png`,forceDataSchema)}return function(imgData,forceDataSchema,isMask){return encode$2(imgData,imgData.kind===void 0?_util.ImageKind.GRAYSCALE_1BPP:imgData.kind,forceDataSchema,isMask)}}();class SVGExtraState{constructor(){this.fontSizeScale=1,this.fontWeight=SVG_DEFAULTS.fontWeight,this.fontSize=0,this.textMatrix=_util.IDENTITY_MATRIX,this.fontMatrix=_util.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_util.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=SVG_DEFAULTS.fillColor,this.strokeColor=`#000000`,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin=``,this.lineCap=``,this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=``}clone(){return Object.create(this)}setCurrentPoint(x$2,y$2){this.x=x$2,this.y=y$2}}function opListToTree(opList){let opTree=[],tmp=[];for(let opListElement of opList){if(opListElement.fn===`save`){opTree.push({fnId:92,fn:`group`,items:[]}),tmp.push(opTree),opTree=opTree.at(-1).items;continue}opListElement.fn===`restore`?opTree=tmp.pop():opTree.push(opListElement)}return opTree}function pf(value){if(Number.isInteger(value))return value.toString();let s$3=value.toFixed(10),i$4=s$3.length-1;if(s$3[i$4]!==`0`)return s$3;do i$4--;while(s$3[i$4]===`0`);return s$3.substring(0,s$3[i$4]===`.`?i$4:i$4+1)}function pm(m$3){if(m$3[4]===0&&m$3[5]===0){if(m$3[1]===0&&m$3[2]===0)return m$3[0]===1&&m$3[3]===1?``:`scale(${pf(m$3[0])} ${pf(m$3[3])})`;if(m$3[0]===m$3[3]&&m$3[1]===-m$3[2])return`rotate(${pf(Math.acos(m$3[0])*180/Math.PI)})`}else if(m$3[0]===1&&m$3[1]===0&&m$3[2]===0&&m$3[3]===1)return`translate(${pf(m$3[4])} ${pf(m$3[5])})`;return`matrix(${pf(m$3[0])} ${pf(m$3[1])} ${pf(m$3[2])} ${pf(m$3[3])} ${pf(m$3[4])} ${pf(m$3[5])})`}let clipCount=0,maskCount=0,shadingCount=0;class SVGGraphics{constructor(commonObjs,objs,forceDataSchema=!1){for(let op in(0,_display_utils.deprecated)(`The SVG back-end is no longer maintained and *may* be removed in the future.`),this.svgFactory=new _display_utils.DOMSVGFactory,this.current=new SVGExtraState,this.transformMatrix=_util.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=commonObjs,this.objs=objs,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!forceDataSchema,this._operatorIdMapping=[],_util.OPS)this._operatorIdMapping[_util.OPS[op]]=op}getObject(data,fallback=null){return typeof data==`string`?data.startsWith(`g_`)?this.commonObjs.get(data):this.objs.get(data):fallback}save(){this.transformStack.push(this.transformMatrix);let old=this.current;this.extraStack.push(old),this.current=old.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(items){this.save(),this.executeOpTree(items),this.restore()}loadDependencies(operatorList){let fnArray=operatorList.fnArray,argsArray=operatorList.argsArray;for(let i$4=0,ii=fnArray.length;i$4<ii;i$4++)if(fnArray[i$4]===_util.OPS.dependency)for(let obj of argsArray[i$4]){let objsPool=obj.startsWith(`g_`)?this.commonObjs:this.objs,promise=new Promise(resolve=>{objsPool.get(obj,resolve)});this.current.dependencies.push(promise)}return Promise.all(this.current.dependencies)}transform(a$4,b$3,c$3,d$3,e$4,f$3){let transformMatrix=[a$4,b$3,c$3,d$3,e$4,f$3];this.transformMatrix=_util.Util.transform(this.transformMatrix,transformMatrix),this.tgrp=null}getSVG(operatorList,viewport){this.viewport=viewport;let svgElement=this._initialize(viewport);return this.loadDependencies(operatorList).then(()=>(this.transformMatrix=_util.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(operatorList)),svgElement))}convertOpList(operatorList){let operatorIdMapping=this._operatorIdMapping,argsArray=operatorList.argsArray,fnArray=operatorList.fnArray,opList=[];for(let i$4=0,ii=fnArray.length;i$4<ii;i$4++){let fnId=fnArray[i$4];opList.push({fnId,fn:operatorIdMapping[fnId],args:argsArray[i$4]})}return opListToTree(opList)}executeOpTree(opTree){for(let opTreeElement of opTree){let fn=opTreeElement.fn,fnId=opTreeElement.fnId,args=opTreeElement.args;switch(fnId|0){case _util.OPS.beginText:this.beginText();break;case _util.OPS.dependency:break;case _util.OPS.setLeading:this.setLeading(args);break;case _util.OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case _util.OPS.setFont:this.setFont(args);break;case _util.OPS.showText:this.showText(args[0]);break;case _util.OPS.showSpacedText:this.showText(args[0]);break;case _util.OPS.endText:this.endText();break;case _util.OPS.moveText:this.moveText(args[0],args[1]);break;case _util.OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case _util.OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case _util.OPS.setHScale:this.setHScale(args[0]);break;case _util.OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.setTextRise:this.setTextRise(args[0]);break;case _util.OPS.setTextRenderingMode:this.setTextRenderingMode(args[0]);break;case _util.OPS.setLineWidth:this.setLineWidth(args[0]);break;case _util.OPS.setLineJoin:this.setLineJoin(args[0]);break;case _util.OPS.setLineCap:this.setLineCap(args[0]);break;case _util.OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case _util.OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeColorN:this.setStrokeColorN(args);break;case _util.OPS.setFillColorN:this.setFillColorN(args);break;case _util.OPS.shadingFill:this.shadingFill(args[0]);break;case _util.OPS.setDash:this.setDash(args[0],args[1]);break;case _util.OPS.setRenderingIntent:this.setRenderingIntent(args[0]);break;case _util.OPS.setFlatness:this.setFlatness(args[0]);break;case _util.OPS.setGState:this.setGState(args[0]);break;case _util.OPS.fill:this.fill();break;case _util.OPS.eoFill:this.eoFill();break;case _util.OPS.stroke:this.stroke();break;case _util.OPS.fillStroke:this.fillStroke();break;case _util.OPS.eoFillStroke:this.eoFillStroke();break;case _util.OPS.clip:this.clip(`nonzero`);break;case _util.OPS.eoClip:this.clip(`evenodd`);break;case _util.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _util.OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case _util.OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case _util.OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case _util.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case _util.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _util.OPS.closePath:this.closePath();break;case _util.OPS.closeStroke:this.closeStroke();break;case _util.OPS.closeFillStroke:this.closeFillStroke();break;case _util.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _util.OPS.nextLine:this.nextLine();break;case _util.OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.constructPath:this.constructPath(args[0],args[1]);break;case _util.OPS.endPath:this.endPath();break;case 92:this.group(opTreeElement.items);break;default:(0,_util.warn)(`Unimplemented operator ${fn}`);break}}}setWordSpacing(wordSpacing){this.current.wordSpacing=wordSpacing}setCharSpacing(charSpacing){this.current.charSpacing=charSpacing}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(a$4,b$3,c$3,d$3,e$4,f$3){let current=this.current;current.textMatrix=current.lineMatrix=[a$4,b$3,c$3,d$3,e$4,f$3],current.textMatrixScale=Math.hypot(a$4,b$3),current.x=current.lineX=0,current.y=current.lineY=0,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement(`svg:tspan`),current.tspan.setAttributeNS(null,`font-family`,current.fontFamily),current.tspan.setAttributeNS(null,`font-size`,`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,`y`,pf(-current.y)),current.txtElement=this.svgFactory.createElement(`svg:text`),current.txtElement.append(current.tspan)}beginText(){let current=this.current;current.x=current.lineX=0,current.y=current.lineY=0,current.textMatrix=_util.IDENTITY_MATRIX,current.lineMatrix=_util.IDENTITY_MATRIX,current.textMatrixScale=1,current.tspan=this.svgFactory.createElement(`svg:tspan`),current.txtElement=this.svgFactory.createElement(`svg:text`),current.txtgrp=this.svgFactory.createElement(`svg:g`),current.xcoords=[],current.ycoords=[]}moveText(x$2,y$2){let current=this.current;current.x=current.lineX+=x$2,current.y=current.lineY+=y$2,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement(`svg:tspan`),current.tspan.setAttributeNS(null,`font-family`,current.fontFamily),current.tspan.setAttributeNS(null,`font-size`,`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,`y`,pf(-current.y))}showText(glyphs){let current=this.current,font=current.font,fontSize=current.fontSize;if(fontSize===0)return;let fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,vertical$1=font.vertical,spacingDir=vertical$1?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0],x$2=0;for(let glyph of glyphs){if(glyph===null){x$2+=fontDirection*wordSpacing;continue}else if(typeof glyph==`number`){x$2+=spacingDir*glyph*fontSize/1e3;continue}let spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar,scaledX,scaledY,width=glyph.width;if(vertical$1){let vx,vmetric=glyph.vmetric||defaultVMetrics;vx=glyph.vmetric?vmetric[1]:width*.5,vx=-vx*widthAdvanceScale;let vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x$2+vy)/fontSizeScale}else scaledX=x$2/fontSizeScale,scaledY=0;(glyph.isInFont||font.missingFile)&&(current.xcoords.push(current.x+scaledX),vertical$1&&current.ycoords.push(-current.y+scaledY),current.tspan.textContent+=character);let charWidth=vertical$1?width*widthAdvanceScale-spacing*fontDirection:width*widthAdvanceScale+spacing*fontDirection;x$2+=charWidth}current.tspan.setAttributeNS(null,`x`,current.xcoords.map(pf).join(` `)),vertical$1?current.tspan.setAttributeNS(null,`y`,current.ycoords.map(pf).join(` `)):current.tspan.setAttributeNS(null,`y`,pf(-current.y)),vertical$1?current.y-=x$2:current.x+=x$2*textHScale,current.tspan.setAttributeNS(null,`font-family`,current.fontFamily),current.tspan.setAttributeNS(null,`font-size`,`${pf(current.fontSize)}px`),current.fontStyle!==SVG_DEFAULTS.fontStyle&&current.tspan.setAttributeNS(null,`font-style`,current.fontStyle),current.fontWeight!==SVG_DEFAULTS.fontWeight&&current.tspan.setAttributeNS(null,`font-weight`,current.fontWeight);let fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE?(current.fillColor!==SVG_DEFAULTS.fillColor&&current.tspan.setAttributeNS(null,`fill`,current.fillColor),current.fillAlpha<1&&current.tspan.setAttributeNS(null,`fill-opacity`,current.fillAlpha)):current.textRenderingMode===_util.TextRenderingMode.ADD_TO_PATH?current.tspan.setAttributeNS(null,`fill`,`transparent`):current.tspan.setAttributeNS(null,`fill`,`none`),fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){let lineWidthScale=1/(current.textMatrixScale||1);this._setStrokeAttributes(current.tspan,lineWidthScale)}let textMatrix=current.textMatrix;current.textRise!==0&&(textMatrix=textMatrix.slice(),textMatrix[5]+=current.textRise),current.txtElement.setAttributeNS(null,`transform`,`${pm(textMatrix)} scale(${pf(textHScale)}, -1)`),current.txtElement.setAttributeNS(`http://www.w3.org/XML/1998/namespace`,`xml:space`,`preserve`),current.txtElement.append(current.tspan),current.txtgrp.append(current.txtElement),this._ensureTransformGroup().append(current.txtElement)}setLeadingMoveText(x$2,y$2){this.setLeading(-y$2),this.moveText(x$2,y$2)}addFontStyle(fontObj){if(!fontObj.data)throw Error(`addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.`);this.cssStyle||(this.cssStyle=this.svgFactory.createElement(`svg:style`),this.cssStyle.setAttributeNS(null,`type`,`text/css`),this.defs.append(this.cssStyle));let url=createObjectURL(fontObj.data,fontObj.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${fontObj.loadedName}"; src: url(${url}); }\n`}setFont(details){let current=this.current,fontObj=this.commonObjs.get(details[0]),size=details[1];current.font=fontObj,this.embedFonts&&!fontObj.missingFile&&!this.embeddedFonts[fontObj.loadedName]&&(this.addFontStyle(fontObj),this.embeddedFonts[fontObj.loadedName]=fontObj),current.fontMatrix=fontObj.fontMatrix||_util.FONT_IDENTITY_MATRIX;let bold=`normal`;fontObj.black?bold=`900`:fontObj.bold&&(bold=`bold`);let italic=fontObj.italic?`italic`:`normal`;size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,current.fontSize=size,current.fontFamily=fontObj.loadedName,current.fontWeight=bold,current.fontStyle=italic,current.tspan=this.svgFactory.createElement(`svg:tspan`),current.tspan.setAttributeNS(null,`y`,pf(-current.y)),current.xcoords=[],current.ycoords=[]}endText(){let current=this.current;current.textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG&&current.txtElement?.hasChildNodes()&&(current.element=current.txtElement,this.clip(`nonzero`),this.endPath())}setLineWidth(width){width>0&&(this.current.lineWidth=width)}setLineCap(style$3){this.current.lineCap=LINE_CAP_STYLES[style$3]}setLineJoin(style$3){this.current.lineJoin=LINE_JOIN_STYLES[style$3]}setMiterLimit(limit){this.current.miterLimit=limit}setStrokeAlpha(strokeAlpha){this.current.strokeAlpha=strokeAlpha}setStrokeRGBColor(r$4,g$3,b$3){this.current.strokeColor=_util.Util.makeHexColor(r$4,g$3,b$3)}setFillAlpha(fillAlpha){this.current.fillAlpha=fillAlpha}setFillRGBColor(r$4,g$3,b$3){this.current.fillColor=_util.Util.makeHexColor(r$4,g$3,b$3),this.current.tspan=this.svgFactory.createElement(`svg:tspan`),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(args){this.current.strokeColor=this._makeColorN_Pattern(args)}setFillColorN(args){this.current.fillColor=this._makeColorN_Pattern(args)}shadingFill(args){let{width,height}=this.viewport,inv=_util.Util.inverseTransform(this.transformMatrix),[x0,y0,x1,y1]=_util.Util.getAxialAlignedBoundingBox([0,0,width,height],inv),rect=this.svgFactory.createElement(`svg:rect`);rect.setAttributeNS(null,`x`,x0),rect.setAttributeNS(null,`y`,y0),rect.setAttributeNS(null,`width`,x1-x0),rect.setAttributeNS(null,`height`,y1-y0),rect.setAttributeNS(null,`fill`,this._makeShadingPattern(args)),this.current.fillAlpha<1&&rect.setAttributeNS(null,`fill-opacity`,this.current.fillAlpha),this._ensureTransformGroup().append(rect)}_makeColorN_Pattern(args){return args[0]===`TilingPattern`?this._makeTilingPattern(args):this._makeShadingPattern(args)}_makeTilingPattern(args){let color$2=args[1],operatorList=args[2],matrix=args[3]||_util.IDENTITY_MATRIX,[x0,y0,x1,y1]=args[4],xstep=args[5],ystep=args[6],paintType=args[7],tilingId=`shading${shadingCount++}`,[tx0,ty0,tx1,ty1]=_util.Util.normalizeRect([..._util.Util.applyTransform([x0,y0],matrix),..._util.Util.applyTransform([x1,y1],matrix)]),[xscale,yscale]=_util.Util.singularValueDecompose2dScale(matrix),txstep=xstep*xscale,tystep=ystep*yscale,tiling=this.svgFactory.createElement(`svg:pattern`);tiling.setAttributeNS(null,`id`,tilingId),tiling.setAttributeNS(null,`patternUnits`,`userSpaceOnUse`),tiling.setAttributeNS(null,`width`,txstep),tiling.setAttributeNS(null,`height`,tystep),tiling.setAttributeNS(null,`x`,`${tx0}`),tiling.setAttributeNS(null,`y`,`${ty0}`);let svg=this.svg,transformMatrix=this.transformMatrix,fillColor=this.current.fillColor,strokeColor=this.current.strokeColor,bbox=this.svgFactory.create(tx1-tx0,ty1-ty0);if(this.svg=bbox,this.transformMatrix=matrix,paintType===2){let cssColor=_util.Util.makeHexColor(...color$2);this.current.fillColor=cssColor,this.current.strokeColor=cssColor}return this.executeOpTree(this.convertOpList(operatorList)),this.svg=svg,this.transformMatrix=transformMatrix,this.current.fillColor=fillColor,this.current.strokeColor=strokeColor,tiling.append(bbox.childNodes[0]),this.defs.append(tiling),`url(#${tilingId})`}_makeShadingPattern(args){switch(typeof args==`string`&&(args=this.objs.get(args)),args[0]){case`RadialAxial`:let shadingId=`shading${shadingCount++}`,colorStops=args[3],gradient;switch(args[1]){case`axial`:let point0=args[4],point1=args[5];gradient=this.svgFactory.createElement(`svg:linearGradient`),gradient.setAttributeNS(null,`id`,shadingId),gradient.setAttributeNS(null,`gradientUnits`,`userSpaceOnUse`),gradient.setAttributeNS(null,`x1`,point0[0]),gradient.setAttributeNS(null,`y1`,point0[1]),gradient.setAttributeNS(null,`x2`,point1[0]),gradient.setAttributeNS(null,`y2`,point1[1]);break;case`radial`:let focalPoint=args[4],circlePoint=args[5],focalRadius=args[6],circleRadius=args[7];gradient=this.svgFactory.createElement(`svg:radialGradient`),gradient.setAttributeNS(null,`id`,shadingId),gradient.setAttributeNS(null,`gradientUnits`,`userSpaceOnUse`),gradient.setAttributeNS(null,`cx`,circlePoint[0]),gradient.setAttributeNS(null,`cy`,circlePoint[1]),gradient.setAttributeNS(null,`r`,circleRadius),gradient.setAttributeNS(null,`fx`,focalPoint[0]),gradient.setAttributeNS(null,`fy`,focalPoint[1]),gradient.setAttributeNS(null,`fr`,focalRadius);break;default:throw Error(`Unknown RadialAxial type: ${args[1]}`)}for(let colorStop of colorStops){let stop=this.svgFactory.createElement(`svg:stop`);stop.setAttributeNS(null,`offset`,colorStop[0]),stop.setAttributeNS(null,`stop-color`,colorStop[1]),gradient.append(stop)}return this.defs.append(gradient),`url(#${shadingId})`;case`Mesh`:return(0,_util.warn)(`Unimplemented pattern Mesh`),null;case`Dummy`:return`hotpink`;default:throw Error(`Unknown IR type: ${args[0]}`)}}setDash(dashArray,dashPhase){this.current.dashArray=dashArray,this.current.dashPhase=dashPhase}constructPath(ops,args){let current=this.current,x$2=current.x,y$2=current.y,d$3=[],j$2=0;for(let op of ops)switch(op|0){case _util.OPS.rectangle:x$2=args[j$2++],y$2=args[j$2++];let width=args[j$2++],height=args[j$2++],xw=x$2+width,yh=y$2+height;d$3.push(`M`,pf(x$2),pf(y$2),`L`,pf(xw),pf(y$2),`L`,pf(xw),pf(yh),`L`,pf(x$2),pf(yh),`Z`);break;case _util.OPS.moveTo:x$2=args[j$2++],y$2=args[j$2++],d$3.push(`M`,pf(x$2),pf(y$2));break;case _util.OPS.lineTo:x$2=args[j$2++],y$2=args[j$2++],d$3.push(`L`,pf(x$2),pf(y$2));break;case _util.OPS.curveTo:x$2=args[j$2+4],y$2=args[j$2+5],d$3.push(`C`,pf(args[j$2]),pf(args[j$2+1]),pf(args[j$2+2]),pf(args[j$2+3]),pf(x$2),pf(y$2)),j$2+=6;break;case _util.OPS.curveTo2:d$3.push(`C`,pf(x$2),pf(y$2),pf(args[j$2]),pf(args[j$2+1]),pf(args[j$2+2]),pf(args[j$2+3])),x$2=args[j$2+2],y$2=args[j$2+3],j$2+=4;break;case _util.OPS.curveTo3:x$2=args[j$2+2],y$2=args[j$2+3],d$3.push(`C`,pf(args[j$2]),pf(args[j$2+1]),pf(x$2),pf(y$2),pf(x$2),pf(y$2)),j$2+=4;break;case _util.OPS.closePath:d$3.push(`Z`);break}d$3=d$3.join(` `),current.path&&ops.length>0&&ops[0]!==_util.OPS.rectangle&&ops[0]!==_util.OPS.moveTo?d$3=current.path.getAttributeNS(null,`d`)+d$3:(current.path=this.svgFactory.createElement(`svg:path`),this._ensureTransformGroup().append(current.path)),current.path.setAttributeNS(null,`d`,d$3),current.path.setAttributeNS(null,`fill`,`none`),current.element=current.path,current.setCurrentPoint(x$2,y$2)}endPath(){let current=this.current;if(current.path=null,!this.pendingClip)return;if(!current.element){this.pendingClip=null;return}let clipId=`clippath${clipCount++}`,clipPath=this.svgFactory.createElement(`svg:clipPath`);clipPath.setAttributeNS(null,`id`,clipId),clipPath.setAttributeNS(null,`transform`,pm(this.transformMatrix));let clipElement=current.element.cloneNode(!0);if(this.pendingClip===`evenodd`?clipElement.setAttributeNS(null,`clip-rule`,`evenodd`):clipElement.setAttributeNS(null,`clip-rule`,`nonzero`),this.pendingClip=null,clipPath.append(clipElement),this.defs.append(clipPath),current.activeClipUrl){current.clipGroup=null;for(let prev of this.extraStack)prev.clipGroup=null;clipPath.setAttributeNS(null,`clip-path`,current.activeClipUrl)}current.activeClipUrl=`url(#${clipId})`,this.tgrp=null}clip(type){this.pendingClip=type}closePath(){let current=this.current;if(current.path){let d$3=`${current.path.getAttributeNS(null,`d`)}Z`;current.path.setAttributeNS(null,`d`,d$3)}}setLeading(leading){this.current.leading=-leading}setTextRise(textRise){this.current.textRise=textRise}setTextRenderingMode(textRenderingMode){this.current.textRenderingMode=textRenderingMode}setHScale(scale$1){this.current.textHScale=scale$1/100}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(let[key$1,value]of states)switch(key$1){case`LW`:this.setLineWidth(value);break;case`LC`:this.setLineCap(value);break;case`LJ`:this.setLineJoin(value);break;case`ML`:this.setMiterLimit(value);break;case`D`:this.setDash(value[0],value[1]);break;case`RI`:this.setRenderingIntent(value);break;case`FL`:this.setFlatness(value);break;case`Font`:this.setFont(value);break;case`CA`:this.setStrokeAlpha(value);break;case`ca`:this.setFillAlpha(value);break;default:(0,_util.warn)(`Unimplemented graphic state operator ${key$1}`);break}}fill(){let current=this.current;current.element&&(current.element.setAttributeNS(null,`fill`,current.fillColor),current.element.setAttributeNS(null,`fill-opacity`,current.fillAlpha),this.endPath())}stroke(){let current=this.current;current.element&&(this._setStrokeAttributes(current.element),current.element.setAttributeNS(null,`fill`,`none`),this.endPath())}_setStrokeAttributes(element,lineWidthScale=1){let current=this.current,dashArray=current.dashArray;lineWidthScale!==1&&dashArray.length>0&&(dashArray=dashArray.map(function(value){return lineWidthScale*value})),element.setAttributeNS(null,`stroke`,current.strokeColor),element.setAttributeNS(null,`stroke-opacity`,current.strokeAlpha),element.setAttributeNS(null,`stroke-miterlimit`,pf(current.miterLimit)),element.setAttributeNS(null,`stroke-linecap`,current.lineCap),element.setAttributeNS(null,`stroke-linejoin`,current.lineJoin),element.setAttributeNS(null,`stroke-width`,pf(lineWidthScale*current.lineWidth)+`px`),element.setAttributeNS(null,`stroke-dasharray`,dashArray.map(pf).join(` `)),element.setAttributeNS(null,`stroke-dashoffset`,pf(lineWidthScale*current.dashPhase)+`px`)}eoFill(){this.current.element?.setAttributeNS(null,`fill-rule`,`evenodd`),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,`fill-rule`,`evenodd`),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let rect=this.svgFactory.createElement(`svg:rect`);rect.setAttributeNS(null,`x`,`0`),rect.setAttributeNS(null,`y`,`0`),rect.setAttributeNS(null,`width`,`1px`),rect.setAttributeNS(null,`height`,`1px`),rect.setAttributeNS(null,`fill`,this.current.fillColor),this._ensureTransformGroup().append(rect)}paintImageXObject(objId){let imgData=this.getObject(objId);if(!imgData){(0,_util.warn)(`Dependent image with object ID ${objId} is not ready yet`);return}this.paintInlineImageXObject(imgData)}paintInlineImageXObject(imgData,mask){let width=imgData.width,height=imgData.height,imgSrc=convertImgDataToPng(imgData,this.forceDataSchema,!!mask),cliprect=this.svgFactory.createElement(`svg:rect`);cliprect.setAttributeNS(null,`x`,`0`),cliprect.setAttributeNS(null,`y`,`0`),cliprect.setAttributeNS(null,`width`,pf(width)),cliprect.setAttributeNS(null,`height`,pf(height)),this.current.element=cliprect,this.clip(`nonzero`);let imgEl=this.svgFactory.createElement(`svg:image`);imgEl.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,imgSrc),imgEl.setAttributeNS(null,`x`,`0`),imgEl.setAttributeNS(null,`y`,pf(-height)),imgEl.setAttributeNS(null,`width`,pf(width)+`px`),imgEl.setAttributeNS(null,`height`,pf(height)+`px`),imgEl.setAttributeNS(null,`transform`,`scale(${pf(1/width)} ${pf(-1/height)})`),mask?mask.append(imgEl):this._ensureTransformGroup().append(imgEl)}paintImageMaskXObject(img){let imgData=this.getObject(img.data,img);if(imgData.bitmap){(0,_util.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}let current=this.current,width=imgData.width,height=imgData.height,fillColor=current.fillColor;current.maskId=`mask${maskCount++}`;let mask=this.svgFactory.createElement(`svg:mask`);mask.setAttributeNS(null,`id`,current.maskId);let rect=this.svgFactory.createElement(`svg:rect`);rect.setAttributeNS(null,`x`,`0`),rect.setAttributeNS(null,`y`,`0`),rect.setAttributeNS(null,`width`,pf(width)),rect.setAttributeNS(null,`height`,pf(height)),rect.setAttributeNS(null,`fill`,fillColor),rect.setAttributeNS(null,`mask`,`url(#${current.maskId})`),this.defs.append(mask),this._ensureTransformGroup().append(rect),this.paintInlineImageXObject(imgData,mask)}paintFormXObjectBegin(matrix,bbox){if(Array.isArray(matrix)&&matrix.length===6&&this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]),bbox){let width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],cliprect=this.svgFactory.createElement(`svg:rect`);cliprect.setAttributeNS(null,`x`,bbox[0]),cliprect.setAttributeNS(null,`y`,bbox[1]),cliprect.setAttributeNS(null,`width`,pf(width)),cliprect.setAttributeNS(null,`height`,pf(height)),this.current.element=cliprect,this.clip(`nonzero`),this.endPath()}}paintFormXObjectEnd(){}_initialize(viewport){let svg=this.svgFactory.create(viewport.width,viewport.height),definitions=this.svgFactory.createElement(`svg:defs`);svg.append(definitions),this.defs=definitions;let rootGroup=this.svgFactory.createElement(`svg:g`);return rootGroup.setAttributeNS(null,`transform`,pm(viewport.transform)),svg.append(rootGroup),this.svg=rootGroup,svg}_ensureClipGroup(){if(!this.current.clipGroup){let clipGroup=this.svgFactory.createElement(`svg:g`);clipGroup.setAttributeNS(null,`clip-path`,this.current.activeClipUrl),this.svg.append(clipGroup),this.current.clipGroup=clipGroup}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement(`svg:g`),this.tgrp.setAttributeNS(null,`transform`,pm(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}exports$1.SVGGraphics=SVGGraphics}),((__unused_webpack_module,exports$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.XfaText=void 0;class XfaText{static textContent(xfa){let items=[],output={items,styles:Object.create(null)};function walk(node){if(!node)return;let str=null,name=node.name;if(name===`#text`)str=node.value;else if(XfaText.shouldBuildText(name))node?.attributes?.textContent?str=node.attributes.textContent:node.value&&(str=node.value);else return;if(str!==null&&items.push({str}),node.children)for(let child of node.children)walk(child)}return walk(xfa),output}static shouldBuildText(name){return!(name===`textarea`||name===`input`||name===`option`||name===`select`)}}exports$1.XfaText=XfaText}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.TextLayerRenderTask=void 0,exports$1.renderTextLayer=renderTextLayer,exports$1.updateTextLayer=updateTextLayer;var _util=__w_pdfjs_require__$1(1),_display_utils=__w_pdfjs_require__$1(6);let MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE$1=30,DEFAULT_FONT_ASCENT=.8,ascentCache=new Map;function getCtx(size,isOffscreenCanvasSupported){let ctx;if(isOffscreenCanvasSupported&&_util.FeatureTest.isOffscreenCanvasSupported)ctx=new OffscreenCanvas(size,size).getContext(`2d`,{alpha:!1});else{let canvas=document.createElement(`canvas`);canvas.width=canvas.height=size,ctx=canvas.getContext(`2d`,{alpha:!1})}return ctx}function getAscent(fontFamily,isOffscreenCanvasSupported){let cachedAscent=ascentCache.get(fontFamily);if(cachedAscent)return cachedAscent;let ctx=getCtx(30,isOffscreenCanvasSupported);ctx.font=`30px ${fontFamily}`;let metrics$1=ctx.measureText(``),ascent=metrics$1.fontBoundingBoxAscent,descent=Math.abs(metrics$1.fontBoundingBoxDescent);if(ascent){let ratio=ascent/(ascent+descent);return ascentCache.set(fontFamily,ratio),ctx.canvas.width=ctx.canvas.height=0,ratio}ctx.strokeStyle=`red`,ctx.clearRect(0,0,30,30),ctx.strokeText(`g`,0,0);let pixels=ctx.getImageData(0,0,30,30).data;descent=0;for(let i$4=pixels.length-1-3;i$4>=0;i$4-=4)if(pixels[i$4]>0){descent=Math.ceil(i$4/4/30);break}ctx.clearRect(0,0,30,30),ctx.strokeText(`A`,0,30),pixels=ctx.getImageData(0,0,30,30).data,ascent=0;for(let i$4=0,ii=pixels.length;i$4<ii;i$4+=4)if(pixels[i$4]>0){ascent=30-Math.floor(i$4/4/30);break}if(ctx.canvas.width=ctx.canvas.height=0,ascent){let ratio=ascent/(ascent+descent);return ascentCache.set(fontFamily,ratio),ratio}return ascentCache.set(fontFamily,DEFAULT_FONT_ASCENT),DEFAULT_FONT_ASCENT}function appendText(task,geom,styles$1){let textDiv=document.createElement(`span`),textDivProperties={angle:0,canvasWidth:0,hasText:geom.str!==``,hasEOL:geom.hasEOL,fontSize:0};task._textDivs.push(textDiv);let tx=_util.Util.transform(task._transform,geom.transform),angle=Math.atan2(tx[1],tx[0]),style$3=styles$1[geom.fontName];style$3.vertical&&(angle+=Math.PI/2);let fontHeight=Math.hypot(tx[2],tx[3]),fontAscent=fontHeight*getAscent(style$3.fontFamily,task._isOffscreenCanvasSupported),left,top;angle===0?(left=tx[4],top=tx[5]-fontAscent):(left=tx[4]+fontAscent*Math.sin(angle),top=tx[5]-fontAscent*Math.cos(angle));let scaleFactorStr=`calc(var(--scale-factor)*`,divStyle=textDiv.style;task._container===task._rootContainer?(divStyle.left=`${(100*left/task._pageWidth).toFixed(2)}%`,divStyle.top=`${(100*top/task._pageHeight).toFixed(2)}%`):(divStyle.left=`${scaleFactorStr}${left.toFixed(2)}px)`,divStyle.top=`${scaleFactorStr}${top.toFixed(2)}px)`),divStyle.fontSize=`${scaleFactorStr}${fontHeight.toFixed(2)}px)`,divStyle.fontFamily=style$3.fontFamily,textDivProperties.fontSize=fontHeight,textDiv.setAttribute(`role`,`presentation`),textDiv.textContent=geom.str,textDiv.dir=geom.dir,task._fontInspectorEnabled&&(textDiv.dataset.fontName=geom.fontName),angle!==0&&(textDivProperties.angle=angle*(180/Math.PI));let shouldScaleText=!1;if(geom.str.length>1)shouldScaleText=!0;else if(geom.str!==` `&&geom.transform[0]!==geom.transform[3]){let absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5&&(shouldScaleText=!0)}shouldScaleText&&(textDivProperties.canvasWidth=style$3.vertical?geom.height:geom.width),task._textDivProperties.set(textDiv,textDivProperties),task._isReadableStream&&task._layoutText(textDiv)}function layout$1(params){let{div,scale:scale$1,properties:properties$2,ctx,prevFontSize,prevFontFamily}=params,{style:style$3}=div,transform$1=``;if(properties$2.canvasWidth!==0&&properties$2.hasText){let{fontFamily}=style$3,{canvasWidth,fontSize}=properties$2;(prevFontSize!==fontSize||prevFontFamily!==fontFamily)&&(ctx.font=`${fontSize*scale$1}px ${fontFamily}`,params.prevFontSize=fontSize,params.prevFontFamily=fontFamily);let{width}=ctx.measureText(div.textContent);width>0&&(transform$1=`scaleX(${canvasWidth*scale$1/width})`)}properties$2.angle!==0&&(transform$1=`rotate(${properties$2.angle}deg) ${transform$1}`),transform$1.length>0&&(style$3.transform=transform$1)}function render(task){if(task._canceled)return;let textDivs=task._textDivs,capability=task._capability;if(textDivs.length>1e5){capability.resolve();return}if(!task._isReadableStream)for(let textDiv of textDivs)task._layoutText(textDiv);capability.resolve()}class TextLayerRenderTask{constructor({textContentSource,container,viewport,textDivs,textDivProperties,textContentItemsStr,isOffscreenCanvasSupported}){this._textContentSource=textContentSource,this._isReadableStream=textContentSource instanceof ReadableStream,this._container=this._rootContainer=container,this._textDivs=textDivs||[],this._textContentItemsStr=textContentItemsStr||[],this._isOffscreenCanvasSupported=isOffscreenCanvasSupported,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=textDivProperties||new WeakMap,this._canceled=!1,this._capability=new _util.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:viewport.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:getCtx(0,isOffscreenCanvasSupported)};let{pageWidth,pageHeight,pageX,pageY}=viewport.rawDims;this._transform=[1,0,0,-1,-pageX,pageY+pageHeight],this._pageWidth=pageWidth,this._pageHeight=pageHeight,(0,_display_utils.setLayerDimensions)(container,viewport),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&=(this._reader.cancel(new _util.AbortException(`TextLayer task cancelled.`)).catch(()=>{}),null),this._capability.reject(new _util.AbortException(`TextLayer task cancelled.`))}_processItems(items,styleCache){for(let item of items){if(item.str===void 0){if(item.type===`beginMarkedContentProps`||item.type===`beginMarkedContent`){let parent=this._container;this._container=document.createElement(`span`),this._container.classList.add(`markedContent`),item.id!==null&&this._container.setAttribute(`id`,`${item.id}`),parent.append(this._container)}else item.type===`endMarkedContent`&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(item.str),appendText(this,item,styleCache)}}_layoutText(textDiv){let textDivProperties=this._layoutTextParams.properties=this._textDivProperties.get(textDiv);if(this._layoutTextParams.div=textDiv,layout$1(this._layoutTextParams),textDivProperties.hasText&&this._container.append(textDiv),textDivProperties.hasEOL){let br=document.createElement(`br`);br.setAttribute(`role`,`presentation`),this._container.append(br)}}_render(){let capability=new _util.PromiseCapability,styleCache=Object.create(null);if(this._isReadableStream){let pump=()=>{this._reader.read().then(({value,done})=>{if(done){capability.resolve();return}Object.assign(styleCache,value.styles),this._processItems(value.items,styleCache),pump()},capability.reject)};this._reader=this._textContentSource.getReader(),pump()}else if(this._textContentSource){let{items,styles:styles$1}=this._textContentSource;this._processItems(items,styles$1),capability.resolve()}else throw Error(`No "textContentSource" parameter specified.`);capability.promise.then(()=>{styleCache=null,render(this)},this._capability.reject)}}exports$1.TextLayerRenderTask=TextLayerRenderTask;function renderTextLayer(params){!params.textContentSource&&(params.textContent||params.textContentStream)&&((0,_display_utils.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),params.textContentSource=params.textContent||params.textContentStream);let{container,viewport}=params,style$3=getComputedStyle(container),visibility=style$3.getPropertyValue(`visibility`),scaleFactor=parseFloat(style$3.getPropertyValue(`--scale-factor`));visibility===`visible`&&(!scaleFactor||Math.abs(scaleFactor-viewport.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");let task=new TextLayerRenderTask(params);return task._render(),task}function updateTextLayer({container,viewport,textDivs,textDivProperties,isOffscreenCanvasSupported,mustRotate=!0,mustRescale=!0}){if(mustRotate&&(0,_display_utils.setLayerDimensions)(container,{rotation:viewport.rotation}),mustRescale){let ctx=getCtx(0,isOffscreenCanvasSupported),params={prevFontSize:null,prevFontFamily:null,div:null,scale:viewport.scale*(globalThis.devicePixelRatio||1),properties:null,ctx};for(let div of textDivs)params.properties=textDivProperties.get(div),params.div=div,layout$1(params)}}}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.AnnotationEditorLayer=void 0;var _util=__w_pdfjs_require__$1(1),_editor=__w_pdfjs_require__$1(4),_freetext=__w_pdfjs_require__$1(28),_ink=__w_pdfjs_require__$1(33),_display_utils=__w_pdfjs_require__$1(6),_stamp=__w_pdfjs_require__$1(34);class AnnotationEditorLayer{#e;#t=!1;#n=null;#r=this.pointerup.bind(this);#i=this.pointerdown.bind(this);#a=new Map;#o=!1;#s=!1;#c=!1;#l;static _initialized=!1;constructor({uiManager,pageIndex,div,accessibilityManager,annotationLayer,viewport,l10n}){let editorTypes=[_freetext.FreeTextEditor,_ink.InkEditor,_stamp.StampEditor];if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=!0;for(let editorType of editorTypes)editorType.initialize(l10n)}uiManager.registerEditorTypes(editorTypes),this.#l=uiManager,this.pageIndex=pageIndex,this.div=div,this.#e=accessibilityManager,this.#n=annotationLayer,this.viewport=viewport,this.#l.addLayer(this)}get isEmpty(){return this.#a.size===0}updateToolbar(mode){this.#l.updateToolbar(mode)}updateMode(mode=this.#l.getMode()){this.#p(),mode===_util.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),mode!==_util.AnnotationEditorType.NONE&&(this.div.classList.toggle(`freeTextEditing`,mode===_util.AnnotationEditorType.FREETEXT),this.div.classList.toggle(`inkEditing`,mode===_util.AnnotationEditorType.INK),this.div.classList.toggle(`stampEditing`,mode===_util.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(isCommitting){if(!(!isCommitting&&this.#l.getMode()!==_util.AnnotationEditorType.INK)){if(!isCommitting){for(let editor of this.#a.values())if(editor.isEmpty()){editor.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(isEditing){this.#l.setEditingState(isEditing)}addCommands(params){this.#l.addCommands(params)}enable(){this.div.style.pointerEvents=`auto`;let annotationElementIds=new Set;for(let editor of this.#a.values())editor.enableEditing(),editor.annotationElementId&&annotationElementIds.add(editor.annotationElementId);if(!this.#n)return;let editables=this.#n.getEditableAnnotations();for(let editable of editables){if(editable.hide(),this.#l.isDeletedAnnotationElement(editable.data.id)||annotationElementIds.has(editable.data.id))continue;let editor=this.deserialize(editable);editor&&(this.addOrRebuild(editor),editor.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents=`none`;let hiddenAnnotationIds=new Set;for(let editor of this.#a.values()){if(editor.disableEditing(),!editor.annotationElementId||editor.serialize()!==null){hiddenAnnotationIds.add(editor.annotationElementId);continue}this.getEditableAnnotation(editor.annotationElementId)?.show(),editor.remove()}if(this.#n){let editables=this.#n.getEditableAnnotations();for(let editable of editables){let{id:id$3}=editable.data;hiddenAnnotationIds.has(id$3)||this.#l.isDeletedAnnotationElement(id$3)||editable.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(id$3){return this.#n?.getEditableAnnotation(id$3)||null}setActiveEditor(editor){this.#l.getActive()!==editor&&this.#l.setActiveEditor(editor)}enableClick(){this.div.addEventListener(`pointerdown`,this.#i),this.div.addEventListener(`pointerup`,this.#r)}disableClick(){this.div.removeEventListener(`pointerdown`,this.#i),this.div.removeEventListener(`pointerup`,this.#r)}attach(editor){this.#a.set(editor.id,editor);let{annotationElementId}=editor;annotationElementId&&this.#l.isDeletedAnnotationElement(annotationElementId)&&this.#l.removeDeletedAnnotationElement(editor)}detach(editor){this.#a.delete(editor.id),this.#e?.removePointerInTextLayer(editor.contentDiv),!this.#c&&editor.annotationElementId&&this.#l.addDeletedAnnotationElement(editor)}remove(editor){this.detach(editor),this.#l.removeEditor(editor),editor.div.contains(document.activeElement)&&setTimeout(()=>{this.#l.focusMainContainer()},0),editor.div.remove(),editor.isAttachedToDOM=!1,this.#s||this.addInkEditorIfNeeded(!1)}changeParent(editor){editor.parent!==this&&(editor.annotationElementId&&=(this.#l.addDeletedAnnotationElement(editor.annotationElementId),_editor.AnnotationEditor.deleteAnnotationElement(editor),null),this.attach(editor),editor.parent?.detach(editor),editor.setParent(this),editor.div&&editor.isAttachedToDOM&&(editor.div.remove(),this.div.append(editor.div)))}add(editor){if(this.changeParent(editor),this.#l.addEditor(editor),this.attach(editor),!editor.isAttachedToDOM){let div=editor.render();this.div.append(div),editor.isAttachedToDOM=!0}editor.fixAndSetPosition(),editor.onceAdded(),this.#l.addToAnnotationStorage(editor)}moveEditorInDOM(editor){if(!editor.isAttachedToDOM)return;let{activeElement:activeElement$2}=document;editor.div.contains(activeElement$2)&&(editor._focusEventsAllowed=!1,setTimeout(()=>{editor.div.contains(document.activeElement)?editor._focusEventsAllowed=!0:(editor.div.addEventListener(`focusin`,()=>{editor._focusEventsAllowed=!0},{once:!0}),activeElement$2.focus())},0)),editor._structTreeParentId=this.#e?.moveElementInDOM(this.div,editor.div,editor.contentDiv,!0)}addOrRebuild(editor){editor.needsToBeRebuilt()?editor.rebuild():this.add(editor)}addUndoableEditor(editor){this.addCommands({cmd:()=>editor._uiManager.rebuild(editor),undo:()=>{editor.remove()},mustExec:!1})}getNextId(){return this.#l.getId()}#u(params){switch(this.#l.getMode()){case _util.AnnotationEditorType.FREETEXT:return new _freetext.FreeTextEditor(params);case _util.AnnotationEditorType.INK:return new _ink.InkEditor(params);case _util.AnnotationEditorType.STAMP:return new _stamp.StampEditor(params)}return null}pasteEditor(mode,params){this.#l.updateToolbar(mode),this.#l.updateMode(mode);let{offsetX,offsetY}=this.#f(),id$3=this.getNextId(),editor=this.#u({parent:this,id:id$3,x:offsetX,y:offsetY,uiManager:this.#l,isCentered:!0,...params});editor&&this.add(editor)}deserialize(data){switch(data.annotationType??data.annotationEditorType){case _util.AnnotationEditorType.FREETEXT:return _freetext.FreeTextEditor.deserialize(data,this,this.#l);case _util.AnnotationEditorType.INK:return _ink.InkEditor.deserialize(data,this,this.#l);case _util.AnnotationEditorType.STAMP:return _stamp.StampEditor.deserialize(data,this,this.#l)}return null}#d(event,isCentered){let id$3=this.getNextId(),editor=this.#u({parent:this,id:id$3,x:event.offsetX,y:event.offsetY,uiManager:this.#l,isCentered});return editor&&this.add(editor),editor}#f(){let{x:x$2,y:y$2,width,height}=this.div.getBoundingClientRect(),tlX=Math.max(0,x$2),tlY=Math.max(0,y$2),brX=Math.min(window.innerWidth,x$2+width),brY=Math.min(window.innerHeight,y$2+height),centerX=(tlX+brX)/2-x$2,centerY=(tlY+brY)/2-y$2,[offsetX,offsetY]=this.viewport.rotation%180==0?[centerX,centerY]:[centerY,centerX];return{offsetX,offsetY}}addNewEditor(){this.#d(this.#f(),!0)}setSelected(editor){this.#l.setSelected(editor)}toggleSelected(editor){this.#l.toggleSelected(editor)}isSelected(editor){return this.#l.isSelected(editor)}unselect(editor){this.#l.unselect(editor)}pointerup(event){let{isMac}=_util.FeatureTest.platform;if(!(event.button!==0||event.ctrlKey&&isMac)&&event.target===this.div&&this.#o){if(this.#o=!1,!this.#t){this.#t=!0;return}if(this.#l.getMode()===_util.AnnotationEditorType.STAMP){this.#l.unselectAll();return}this.#d(event,!1)}}pointerdown(event){if(this.#o){this.#o=!1;return}let{isMac}=_util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac||event.target!==this.div)return;this.#o=!0;let editor=this.#l.getActive();this.#t=!editor||editor.isEmpty()}findNewParent(editor,x$2,y$2){let layer=this.#l.findParent(x$2,y$2);return layer===null||layer===this?!1:(layer.changeParent(editor),!0)}destroy(){this.#l.getActive()?.parent===this&&(this.#l.commitOrRemove(),this.#l.setActiveEditor(null));for(let editor of this.#a.values())this.#e?.removePointerInTextLayer(editor.contentDiv),editor.setParent(null),editor.isAttachedToDOM=!1,editor.div.remove();this.div=null,this.#a.clear(),this.#l.removeLayer(this)}#p(){this.#s=!0;for(let editor of this.#a.values())editor.isEmpty()&&editor.remove();this.#s=!1}render({viewport}){this.viewport=viewport,(0,_display_utils.setLayerDimensions)(this.div,viewport);for(let editor of this.#l.getEditors(this.pageIndex))this.add(editor);this.updateMode()}update({viewport}){this.#l.commitOrRemove(),this.viewport=viewport,(0,_display_utils.setLayerDimensions)(this.div,{rotation:viewport.rotation}),this.updateMode()}get pageDimensions(){let{pageWidth,pageHeight}=this.viewport.rawDims;return[pageWidth,pageHeight]}}exports$1.AnnotationEditorLayer=AnnotationEditorLayer}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.FreeTextEditor=void 0;var _util=__w_pdfjs_require__$1(1),_tools=__w_pdfjs_require__$1(5),_editor=__w_pdfjs_require__$1(4),_annotation_layer=__w_pdfjs_require__$1(29);class FreeTextEditor extends _editor.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#r=this.editorDivKeydown.bind(this);#i;#a=``;#o=`${this.id}-editor`;#s;#c=null;static _freeTextDefaultContent=``;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let proto=FreeTextEditor.prototype,arrowChecker=self$1=>self$1.isEmpty(),small=_tools.AnnotationEditorUIManager.TRANSLATE_SMALL,big=_tools.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,_util.shadow)(this,`_keyboardManager`,new _tools.KeyboardManager([[[`ctrl+s`,`mac+meta+s`,`ctrl+p`,`mac+meta+p`],proto.commitOrRemove,{bubbles:!0}],[[`ctrl+Enter`,`mac+meta+Enter`,`Escape`,`mac+Escape`],proto.commitOrRemove],[[`ArrowLeft`,`mac+ArrowLeft`],proto._translateEmpty,{args:[-small,0],checker:arrowChecker}],[[`ctrl+ArrowLeft`,`mac+shift+ArrowLeft`],proto._translateEmpty,{args:[-big,0],checker:arrowChecker}],[[`ArrowRight`,`mac+ArrowRight`],proto._translateEmpty,{args:[small,0],checker:arrowChecker}],[[`ctrl+ArrowRight`,`mac+shift+ArrowRight`],proto._translateEmpty,{args:[big,0],checker:arrowChecker}],[[`ArrowUp`,`mac+ArrowUp`],proto._translateEmpty,{args:[0,-small],checker:arrowChecker}],[[`ctrl+ArrowUp`,`mac+shift+ArrowUp`],proto._translateEmpty,{args:[0,-big],checker:arrowChecker}],[[`ArrowDown`,`mac+ArrowDown`],proto._translateEmpty,{args:[0,small],checker:arrowChecker}],[[`ctrl+ArrowDown`,`mac+shift+ArrowDown`],proto._translateEmpty,{args:[0,big],checker:arrowChecker}]]))}static _type=`freetext`;constructor(params){super({...params,name:`freeTextEditor`}),this.#i=params.color||FreeTextEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor,this.#s=params.fontSize||FreeTextEditor._defaultFontSize}static initialize(l10n){_editor.AnnotationEditor.initialize(l10n,{strings:[`free_text2_default_content`,`editor_free_text2_aria_label`]});let style$3=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(style$3.getPropertyValue(`--freetext-padding`))}static updateDefaultParams(type,value){switch(type){case _util.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=value;break;case _util.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=value;break}}updateParams(type,value){switch(type){case _util.AnnotationEditorParamsType.FREETEXT_SIZE:this.#l(value);break;case _util.AnnotationEditorParamsType.FREETEXT_COLOR:this.#u(value);break}}static get defaultPropertiesToUpdate(){return[[_util.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[_util.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[_util.AnnotationEditorParamsType.FREETEXT_SIZE,this.#s],[_util.AnnotationEditorParamsType.FREETEXT_COLOR,this.#i]]}#l(fontSize){let setFontsize=size=>{this.editorDiv.style.fontSize=`calc(${size}px * var(--scale-factor))`,this.translate(0,-(size-this.#s)*this.parentScale),this.#s=size,this.#f()},savedFontsize=this.#s;this.addCommands({cmd:()=>{setFontsize(fontSize)},undo:()=>{setFontsize(savedFontsize)},mustExec:!0,type:_util.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#u(color$2){let savedColor=this.#i;this.addCommands({cmd:()=>{this.#i=this.editorDiv.style.color=color$2},undo:()=>{this.#i=this.editorDiv.style.color=savedColor},mustExec:!0,type:_util.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(x$2,y$2){this._uiManager.translateSelectedEditors(x$2,y$2,!0)}getInitialTranslation(){let scale$1=this.parentScale;return[-FreeTextEditor._internalPadding*scale$1,-(FreeTextEditor._internalPadding+this.#s)*scale$1]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(_util.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove(`enabled`),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute(`aria-activedescendant`),this.editorDiv.addEventListener(`keydown`,this.#r),this.editorDiv.addEventListener(`focus`,this.#t),this.editorDiv.addEventListener(`blur`,this.#e),this.editorDiv.addEventListener(`input`,this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add(`enabled`),this.editorDiv.contentEditable=!1,this.div.setAttribute(`aria-activedescendant`,this.#o),this._isDraggable=!0,this.editorDiv.removeEventListener(`keydown`,this.#r),this.editorDiv.removeEventListener(`focus`,this.#t),this.editorDiv.removeEventListener(`blur`,this.#e),this.editorDiv.removeEventListener(`input`,this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add(`freeTextEditing`))}focusin(event){this._focusEventsAllowed&&(super.focusin(event),event.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#h();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===``}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add(`freeTextEditing`)),super.remove()}#d(){let divs=this.editorDiv.getElementsByTagName(`div`);if(divs.length===0)return this.editorDiv.innerText;let buffer=[];for(let div of divs)buffer.push(div.innerText.replace(/\r\n?|\n/,``));return buffer.join(`
`)}#f(){let[parentWidth,parentHeight]=this.parentDimensions,rect;if(this.isAttachedToDOM)rect=this.div.getBoundingClientRect();else{let{currentLayer,div}=this,savedDisplay=div.style.display;div.style.display=`hidden`,currentLayer.div.append(this.div),rect=div.getBoundingClientRect(),div.remove(),div.style.display=savedDisplay}this.rotation%180==this.parentRotation%180?(this.width=rect.width/parentWidth,this.height=rect.height/parentHeight):(this.width=rect.height/parentWidth,this.height=rect.width/parentHeight),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let savedText=this.#a,newText=this.#a=this.#d().trimEnd();if(savedText===newText)return;let setText=text=>{if(this.#a=text,!text){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#f()};this.addCommands({cmd:()=>{setText(newText)},undo:()=>{setText(savedText)},mustExec:!1}),this.#f()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(event){this.enterInEditMode()}keydown(event){event.target===this.div&&event.key===`Enter`&&(this.enterInEditMode(),event.preventDefault())}editorDivKeydown(event){FreeTextEditor._keyboardManager.exec(this,event)}editorDivFocus(event){this.isEditing=!0}editorDivBlur(event){this.isEditing=!1}editorDivInput(event){this.parent.div.classList.toggle(`freeTextEditing`,this.isEmpty())}disableEditing(){this.editorDiv.setAttribute(`role`,`comment`),this.editorDiv.removeAttribute(`aria-multiline`)}enableEditing(){this.editorDiv.setAttribute(`role`,`textbox`),this.editorDiv.setAttribute(`aria-multiline`,!0)}render(){if(this.div)return this.div;let baseX,baseY;this.width&&(baseX=this.x,baseY=this.y),super.render(),this.editorDiv=document.createElement(`div`),this.editorDiv.className=`internal`,this.editorDiv.setAttribute(`id`,this.#o),this.enableEditing(),_editor.AnnotationEditor._l10nPromise.get(`editor_free_text2_aria_label`).then(msg=>this.editorDiv?.setAttribute(`aria-label`,msg)),_editor.AnnotationEditor._l10nPromise.get(`free_text2_default_content`).then(msg=>this.editorDiv?.setAttribute(`default-content`,msg)),this.editorDiv.contentEditable=!0;let{style:style$3}=this.editorDiv;if(style$3.fontSize=`calc(${this.#s}px * var(--scale-factor))`,style$3.color=this.#i,this.div.append(this.editorDiv),this.overlayDiv=document.createElement(`div`),this.overlayDiv.classList.add(`overlay`,`enabled`),this.div.append(this.overlayDiv),(0,_tools.bindEvents)(this,this.div,[`dblclick`,`keydown`]),this.width){let[parentWidth,parentHeight]=this.parentDimensions;if(this.annotationElementId){let{position:position$1}=this.#c,[tx,ty]=this.getInitialTranslation();[tx,ty]=this.pageTranslationToScreen(tx,ty);let[pageWidth,pageHeight]=this.pageDimensions,[pageX,pageY]=this.pageTranslation,posX,posY;switch(this.rotation){case 0:posX=baseX+(position$1[0]-pageX)/pageWidth,posY=baseY+this.height-(position$1[1]-pageY)/pageHeight;break;case 90:posX=baseX+(position$1[0]-pageX)/pageWidth,posY=baseY-(position$1[1]-pageY)/pageHeight,[tx,ty]=[ty,-tx];break;case 180:posX=baseX-this.width+(position$1[0]-pageX)/pageWidth,posY=baseY-(position$1[1]-pageY)/pageHeight,[tx,ty]=[-tx,-ty];break;case 270:posX=baseX+(position$1[0]-pageX-this.height*pageHeight)/pageWidth,posY=baseY+(position$1[1]-pageY-this.width*pageWidth)/pageHeight,[tx,ty]=[-ty,tx];break}this.setAt(posX*parentWidth,posY*parentHeight,tx,ty)}else this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),this.#a)for(let line of this.#a.split(`
`)){let div=document.createElement(`div`);div.append(line?document.createTextNode(line):document.createElement(`br`)),this.editorDiv.append(div)}}get contentDiv(){return this.editorDiv}static deserialize(data,parent,uiManager){let initialData=null;if(data instanceof _annotation_layer.FreeTextAnnotationElement){let{data:{defaultAppearanceData:{fontSize,fontColor},rect,rotation,id:id$3},textContent,textPosition,parent:{page:{pageNumber}}}=data;if(!textContent||textContent.length===0)return null;initialData=data={annotationType:_util.AnnotationEditorType.FREETEXT,color:Array.from(fontColor),fontSize,value:textContent.join(`
`),position:textPosition,pageIndex:pageNumber-1,rect,rotation,id:id$3,deleted:!1}}let editor=super.deserialize(data,parent,uiManager);return editor.#s=data.fontSize,editor.#i=_util.Util.makeHexColor(...data.color),editor.#a=data.value,editor.annotationElementId=data.id||null,editor.#c=initialData,editor}serialize(isForCopying=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};let padding=FreeTextEditor._internalPadding*this.parentScale,rect=this.getRect(padding,padding),color$2=_editor.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#i),serialized={annotationType:_util.AnnotationEditorType.FREETEXT,color:color$2,fontSize:this.#s,value:this.#a,pageIndex:this.pageIndex,rect,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return isForCopying?serialized:this.annotationElementId&&!this.#m(serialized)?null:(serialized.id=this.annotationElementId,serialized)}#m(serialized){let{value,fontSize,color:color$2,rect,pageIndex}=this.#c;return serialized.value!==value||serialized.fontSize!==fontSize||serialized.rect.some((x$2,i$4)=>Math.abs(x$2-rect[i$4])>=1)||serialized.color.some((c$3,i$4)=>c$3!==color$2[i$4])||serialized.pageIndex!==pageIndex}#h(delayed$1=!1){if(!this.annotationElementId)return;if(this.#f(),!delayed$1&&(this.width===0||this.height===0)){setTimeout(()=>this.#h(!0),0);return}let padding=FreeTextEditor._internalPadding*this.parentScale;this.#c.rect=this.getRect(padding,padding)}}exports$1.FreeTextEditor=FreeTextEditor}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.StampAnnotationElement=exports$1.InkAnnotationElement=exports$1.FreeTextAnnotationElement=exports$1.AnnotationLayer=void 0;var _util=__w_pdfjs_require__$1(1),_display_utils=__w_pdfjs_require__$1(6),_annotation_storage=__w_pdfjs_require__$1(3),_scripting_utils=__w_pdfjs_require__$1(30),_displayL10n_utils=__w_pdfjs_require__$1(31),_xfa_layer=__w_pdfjs_require__$1(32);let DEFAULT_TAB_INDEX=1e3,DEFAULT_FONT_SIZE$1=9,GetElementsByNameSet=new WeakSet;function getRectDims(rect){return{width:rect[2]-rect[0],height:rect[3]-rect[1]}}class AnnotationElementFactory{static create(parameters){switch(parameters.data.annotationType){case _util.AnnotationType.LINK:return new LinkAnnotationElement(parameters);case _util.AnnotationType.TEXT:return new TextAnnotationElement(parameters);case _util.AnnotationType.WIDGET:switch(parameters.data.fieldType){case`Tx`:return new TextWidgetAnnotationElement(parameters);case`Btn`:return parameters.data.radioButton?new RadioButtonWidgetAnnotationElement(parameters):parameters.data.checkBox?new CheckboxWidgetAnnotationElement(parameters):new PushButtonWidgetAnnotationElement(parameters);case`Ch`:return new ChoiceWidgetAnnotationElement(parameters);case`Sig`:return new SignatureWidgetAnnotationElement(parameters)}return new WidgetAnnotationElement(parameters);case _util.AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case _util.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case _util.AnnotationType.LINE:return new LineAnnotationElement(parameters);case _util.AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case _util.AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case _util.AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case _util.AnnotationType.CARET:return new CaretAnnotationElement(parameters);case _util.AnnotationType.INK:return new InkAnnotationElement(parameters);case _util.AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case _util.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case _util.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case _util.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case _util.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case _util.AnnotationType.STAMP:return new StampAnnotationElement(parameters);case _util.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters)}}}class AnnotationElement{#e=!1;constructor(parameters,{isRenderable=!1,ignoreBorder=!1,createQuadrilaterals=!1}={}){this.isRenderable=isRenderable,this.data=parameters.data,this.layer=parameters.layer,this.linkService=parameters.linkService,this.downloadManager=parameters.downloadManager,this.imageResourcesPath=parameters.imageResourcesPath,this.renderForms=parameters.renderForms,this.svgFactory=parameters.svgFactory,this.annotationStorage=parameters.annotationStorage,this.enableScripting=parameters.enableScripting,this.hasJSActions=parameters.hasJSActions,this._fieldObjects=parameters.fieldObjects,this.parent=parameters.parent,isRenderable&&(this.container=this._createContainer(ignoreBorder)),createQuadrilaterals&&this._createQuadrilaterals()}static _hasPopupData({titleObj,contentsObj,richText}){return!!(titleObj?.str||contentsObj?.str||richText?.str)}get hasPopupData(){return AnnotationElement._hasPopupData(this.data)}_createContainer(ignoreBorder){let{data,parent:{page,viewport}}=this,container=document.createElement(`section`);container.setAttribute(`data-annotation-id`,data.id),this instanceof WidgetAnnotationElement||(container.tabIndex=DEFAULT_TAB_INDEX),container.style.zIndex=this.parent.zIndex++,this.data.popupRef&&container.setAttribute(`aria-haspopup`,`dialog`),data.noRotate&&container.classList.add(`norotate`);let{pageWidth,pageHeight,pageX,pageY}=viewport.rawDims;if(!data.rect||this instanceof PopupAnnotationElement){let{rotation:rotation$1}=data;return!data.hasOwnCanvas&&rotation$1!==0&&this.setRotation(rotation$1,container),container}let{width,height}=getRectDims(data.rect),rect=_util.Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);if(!ignoreBorder&&data.borderStyle.width>0){container.style.borderWidth=`${data.borderStyle.width}px`;let horizontalRadius=data.borderStyle.horizontalCornerRadius,verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){let radius=`calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;container.style.borderRadius=radius}else if(this instanceof RadioButtonWidgetAnnotationElement){let radius=`calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;container.style.borderRadius=radius}switch(data.borderStyle.style){case _util.AnnotationBorderStyleType.SOLID:container.style.borderStyle=`solid`;break;case _util.AnnotationBorderStyleType.DASHED:container.style.borderStyle=`dashed`;break;case _util.AnnotationBorderStyleType.BEVELED:(0,_util.warn)(`Unimplemented border style: beveled`);break;case _util.AnnotationBorderStyleType.INSET:(0,_util.warn)(`Unimplemented border style: inset`);break;case _util.AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle=`solid`;break;default:break}let borderColor=data.borderColor||null;borderColor?(this.#e=!0,container.style.borderColor=_util.Util.makeHexColor(borderColor[0]|0,borderColor[1]|0,borderColor[2]|0)):container.style.borderWidth=0}container.style.left=`${100*(rect[0]-pageX)/pageWidth}%`,container.style.top=`${100*(rect[1]-pageY)/pageHeight}%`;let{rotation}=data;return data.hasOwnCanvas||rotation===0?(container.style.width=`${100*width/pageWidth}%`,container.style.height=`${100*height/pageHeight}%`):this.setRotation(rotation,container),container}setRotation(angle,container=this.container){if(!this.data.rect)return;let{pageWidth,pageHeight}=this.parent.viewport.rawDims,{width,height}=getRectDims(this.data.rect),elementWidth,elementHeight;angle%180==0?(elementWidth=100*width/pageWidth,elementHeight=100*height/pageHeight):(elementWidth=100*height/pageWidth,elementHeight=100*width/pageHeight),container.style.width=`${elementWidth}%`,container.style.height=`${elementHeight}%`,container.setAttribute(`data-main-rotation`,(360-angle)%360)}get _commonActions(){let setColor=(jsName,styleName,event)=>{let color$2=event.detail[jsName],colorType=color$2[0],colorArray=color$2.slice(1);event.target.style[styleName]=_scripting_utils.ColorConverters[`${colorType}_HTML`](colorArray),this.annotationStorage.setValue(this.data.id,{[styleName]:_scripting_utils.ColorConverters[`${colorType}_rgb`](colorArray)})};return(0,_util.shadow)(this,`_commonActions`,{display:event=>{let{display}=event.detail,hidden=display%2==1;this.container.style.visibility=hidden?`hidden`:`visible`,this.annotationStorage.setValue(this.data.id,{noView:hidden,noPrint:display===1||display===2})},print:event=>{this.annotationStorage.setValue(this.data.id,{noPrint:!event.detail.print})},hidden:event=>{let{hidden}=event.detail;this.container.style.visibility=hidden?`hidden`:`visible`,this.annotationStorage.setValue(this.data.id,{noPrint:hidden,noView:hidden})},focus:event=>{setTimeout(()=>event.target.focus({preventScroll:!1}),0)},userName:event=>{event.target.title=event.detail.userName},readonly:event=>{event.target.disabled=event.detail.readonly},required:event=>{this._setRequired(event.target,event.detail.required)},bgColor:event=>{setColor(`bgColor`,`backgroundColor`,event)},fillColor:event=>{setColor(`fillColor`,`backgroundColor`,event)},fgColor:event=>{setColor(`fgColor`,`color`,event)},textColor:event=>{setColor(`textColor`,`color`,event)},borderColor:event=>{setColor(`borderColor`,`borderColor`,event)},strokeColor:event=>{setColor(`strokeColor`,`borderColor`,event)},rotation:event=>{let angle=event.detail.rotation;this.setRotation(angle),this.annotationStorage.setValue(this.data.id,{rotation:angle})}})}_dispatchEventFromSandbox(actions,jsEvent){let commonActions=this._commonActions;for(let name of Object.keys(jsEvent.detail))(actions[name]||commonActions[name])?.(jsEvent)}_setDefaultPropertiesFromJS(element){if(!this.enableScripting)return;let storedData=this.annotationStorage.getRawValue(this.data.id);if(!storedData)return;let commonActions=this._commonActions;for(let[actionName,detail]of Object.entries(storedData)){let action=commonActions[actionName];action&&(action({detail:{[actionName]:detail},target:element}),delete storedData[actionName])}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints}=this.data;if(!quadPoints)return;let[rectBlX,rectBlY,rectTrX,rectTrY]=this.data.rect;if(quadPoints.length===1){let[,{x:trX,y:trY},{x:blX,y:blY}]=quadPoints[0];if(rectTrX===trX&&rectTrY===trY&&rectBlX===blX&&rectBlY===blY)return}let{style:style$3}=this.container,svgBuffer;if(this.#e){let{borderColor,borderWidth}=style$3;style$3.borderWidth=0,svgBuffer=[`url('data:image/svg+xml;utf8,`,`<svg xmlns="http://www.w3.org/2000/svg"`,` preserveAspectRatio="none" viewBox="0 0 1 1">`,`<g fill="transparent" stroke="${borderColor}" stroke-width="${borderWidth}">`],this.container.classList.add(`hasBorder`)}let width=rectTrX-rectBlX,height=rectTrY-rectBlY,{svgFactory}=this,svg=svgFactory.createElement(`svg`);svg.classList.add(`quadrilateralsContainer`),svg.setAttribute(`width`,0),svg.setAttribute(`height`,0);let defs=svgFactory.createElement(`defs`);svg.append(defs);let clipPath=svgFactory.createElement(`clipPath`),id$3=`clippath_${this.data.id}`;clipPath.setAttribute(`id`,id$3),clipPath.setAttribute(`clipPathUnits`,`objectBoundingBox`),defs.append(clipPath);for(let[,{x:trX,y:trY},{x:blX,y:blY}]of quadPoints){let rect=svgFactory.createElement(`rect`),x$2=(blX-rectBlX)/width,y$2=(rectTrY-trY)/height,rectWidth=(trX-blX)/width,rectHeight=(trY-blY)/height;rect.setAttribute(`x`,x$2),rect.setAttribute(`y`,y$2),rect.setAttribute(`width`,rectWidth),rect.setAttribute(`height`,rectHeight),clipPath.append(rect),svgBuffer?.push(`<rect vector-effect="non-scaling-stroke" x="${x$2}" y="${y$2}" width="${rectWidth}" height="${rectHeight}"/>`)}this.#e&&(svgBuffer.push(`</g></svg>')`),style$3.backgroundImage=svgBuffer.join(``)),this.container.append(svg),this.container.style.clipPath=`url(#${id$3})`}_createPopup(){let{container,data}=this;container.setAttribute(`aria-haspopup`,`dialog`);let popup=new PopupAnnotationElement({data:{color:data.color,titleObj:data.titleObj,modificationDate:data.modificationDate,contentsObj:data.contentsObj,richText:data.richText,parentRect:data.rect,borderStyle:0,id:`popup_${data.id}`,rotation:data.rotation},parent:this.parent,elements:[this]});this.parent.div.append(popup.render())}render(){(0,_util.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(name,skipId=null){let fields=[];if(this._fieldObjects){let fieldObj=this._fieldObjects[name];if(fieldObj)for(let{page,id:id$3,exportValues}of fieldObj){if(page===-1||id$3===skipId)continue;let exportValue=typeof exportValues==`string`?exportValues:null,domElement=document.querySelector(`[data-element-id="${id$3}"]`);if(domElement&&!GetElementsByNameSet.has(domElement)){(0,_util.warn)(`_getElementsByName - element not allowed: ${id$3}`);continue}fields.push({id:id$3,exportValue,domElement})}return fields}for(let domElement of document.getElementsByName(name)){let{exportValue}=domElement,id$3=domElement.getAttribute(`data-element-id`);id$3!==skipId&&GetElementsByNameSet.has(domElement)&&fields.push({id:id$3,exportValue,domElement})}return fields}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let triggers=this.getElementsToTriggerPopup();if(Array.isArray(triggers))for(let element of triggers)element.classList.add(`highlightArea`);else triggers.classList.add(`highlightArea`)}_editOnDoubleClick(){let{annotationEditorType:mode,data:{id:editId}}=this;this.container.addEventListener(`dblclick`,()=>{this.linkService.eventBus?.dispatch(`switchannotationeditormode`,{source:this,mode,editId})})}}class LinkAnnotationElement extends AnnotationElement{constructor(parameters,options$1=null){super(parameters,{isRenderable:!0,ignoreBorder:!!options$1?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=parameters.data.isTooltipOnly}render(){let{data,linkService}=this,link=document.createElement(`a`);link.setAttribute(`data-element-id`,data.id);let isBound=!1;return data.url?(linkService.addLinkAttributes(link,data.url,data.newWindow),isBound=!0):data.action?(this._bindNamedAction(link,data.action),isBound=!0):data.attachment?(this._bindAttachment(link,data.attachment),isBound=!0):data.setOCGState?(this.#t(link,data.setOCGState),isBound=!0):data.dest?(this._bindLink(link,data.dest),isBound=!0):(data.actions&&(data.actions.Action||data.actions[`Mouse Up`]||data.actions[`Mouse Down`])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(link,data),isBound=!0),data.resetForm?(this._bindResetFormAction(link,data.resetForm),isBound=!0):this.isTooltipOnly&&!isBound&&(this._bindLink(link,``),isBound=!0)),this.container.classList.add(`linkAnnotation`),isBound&&this.container.append(link),this.container}#e(){this.container.setAttribute(`data-internal-link`,``)}_bindLink(link,destination){link.href=this.linkService.getDestinationHash(destination),link.onclick=()=>(destination&&this.linkService.goToDestination(destination),!1),(destination||destination===``)&&this.#e()}_bindNamedAction(link,action){link.href=this.linkService.getAnchorUrl(``),link.onclick=()=>(this.linkService.executeNamedAction(action),!1),this.#e()}_bindAttachment(link,attachment){link.href=this.linkService.getAnchorUrl(``),link.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,attachment.content,attachment.filename),!1),this.#e()}#t(link,action){link.href=this.linkService.getAnchorUrl(``),link.onclick=()=>(this.linkService.executeSetOCGState(action),!1),this.#e()}_bindJSAction(link,data){link.href=this.linkService.getAnchorUrl(``);let map=new Map([[`Action`,`onclick`],[`Mouse Up`,`onmouseup`],[`Mouse Down`,`onmousedown`]]);for(let name of Object.keys(data.actions)){let jsName=map.get(name);jsName&&(link[jsName]=()=>(this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:data.id,name}}),!1))}link.onclick||=()=>!1,this.#e()}_bindResetFormAction(link,resetForm){let otherClickAction=link.onclick;if(otherClickAction||(link.href=this.linkService.getAnchorUrl(``)),this.#e(),!this._fieldObjects){(0,_util.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),otherClickAction||(link.onclick=()=>!1);return}link.onclick=()=>{otherClickAction?.();let{fields:resetFormFields,refs:resetFormRefs,include}=resetForm,allFields=[];if(resetFormFields.length!==0||resetFormRefs.length!==0){let fieldIds=new Set(resetFormRefs);for(let fieldName of resetFormFields){let fields=this._fieldObjects[fieldName]||[];for(let{id:id$3}of fields)fieldIds.add(id$3)}for(let fields of Object.values(this._fieldObjects))for(let field of fields)fieldIds.has(field.id)===include&&allFields.push(field)}else for(let fields of Object.values(this._fieldObjects))allFields.push(...fields);let storage=this.annotationStorage,allIds=[];for(let field of allFields){let{id:id$3}=field;switch(allIds.push(id$3),field.type){case`text`:{let value=field.defaultValue||``;storage.setValue(id$3,{value});break}case`checkbox`:case`radiobutton`:{let value=field.defaultValue===field.exportValues;storage.setValue(id$3,{value});break}case`combobox`:case`listbox`:{let value=field.defaultValue||``;storage.setValue(id$3,{value});break}default:continue}let domElement=document.querySelector(`[data-element-id="${id$3}"]`);if(domElement){if(!GetElementsByNameSet.has(domElement)){(0,_util.warn)(`_bindResetFormAction - element not allowed: ${id$3}`);continue}}else continue;domElement.dispatchEvent(new Event(`resetform`))}return this.enableScripting&&this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:`app`,ids:allIds,name:`ResetForm`}}),!1}}}class TextAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!0})}render(){this.container.classList.add(`textAnnotation`);let image=document.createElement(`img`);return image.src=this.imageResourcesPath+`annotation-`+this.data.name.toLowerCase()+`.svg`,image.alt=`[{{type}} Annotation]`,image.dataset.l10nId=`text_annotation_type`,image.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(image),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(element){this.data.hasOwnCanvas&&(element.previousSibling?.nodeName===`CANVAS`&&(element.previousSibling.hidden=!0),element.hidden=!1)}_getKeyModifier(event){let{isWin,isMac}=_util.FeatureTest.platform;return isWin&&event.ctrlKey||isMac&&event.metaKey}_setEventListener(element,elementData,baseName,eventName,valueGetter){baseName.includes(`mouse`)?element.addEventListener(baseName,event=>{this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:this._getKeyModifier(event)}})}):element.addEventListener(baseName,event=>{if(baseName===`blur`){if(!elementData.focused||!event.relatedTarget)return;elementData.focused=!1}else if(baseName===`focus`){if(elementData.focused)return;elementData.focused=!0}valueGetter&&this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event)}})})}_setEventListeners(element,elementData,names,getter){for(let[baseName,eventName]of names)(eventName===`Action`||this.data.actions?.[eventName])&&((eventName===`Focus`||eventName===`Blur`)&&(elementData||={focused:!1}),this._setEventListener(element,elementData,baseName,eventName,getter),eventName===`Focus`&&!this.data.actions?.Blur?this._setEventListener(element,elementData,`blur`,`Blur`,null):eventName===`Blur`&&!this.data.actions?.Focus&&this._setEventListener(element,elementData,`focus`,`Focus`,null))}_setBackgroundColor(element){let color$2=this.data.backgroundColor||null;element.style.backgroundColor=color$2===null?`transparent`:_util.Util.makeHexColor(color$2[0],color$2[1],color$2[2])}_setTextStyle(element){let TEXT_ALIGNMENT=[`left`,`center`,`right`],{fontColor}=this.data.defaultAppearanceData,fontSize=this.data.defaultAppearanceData.fontSize||9,style$3=element.style,computedFontSize,BORDER_SIZE=2,roundToOneDecimal=x$2=>Math.round(10*x$2)/10;if(this.data.multiLine){let height=Math.abs(this.data.rect[3]-this.data.rect[1]-2),lineHeight=height/(Math.round(height/(_util.LINE_FACTOR*fontSize))||1);computedFontSize=Math.min(fontSize,roundToOneDecimal(lineHeight/_util.LINE_FACTOR))}else{let height=Math.abs(this.data.rect[3]-this.data.rect[1]-2);computedFontSize=Math.min(fontSize,roundToOneDecimal(height/_util.LINE_FACTOR))}style$3.fontSize=`calc(${computedFontSize}px * var(--scale-factor))`,style$3.color=_util.Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]),this.data.textAlignment!==null&&(style$3.textAlign=TEXT_ALIGNMENT[this.data.textAlignment])}_setRequired(element,isRequired){isRequired?element.setAttribute(`required`,!0):element.removeAttribute(`required`),element.setAttribute(`aria-required`,isRequired)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){let isRenderable=parameters.renderForms||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;super(parameters,{isRenderable})}setPropertyOnSiblings(base,key$1,value,keyInStorage){let storage=this.annotationStorage;for(let element of this._getElementsByName(base.name,base.id))element.domElement&&(element.domElement[key$1]=value),storage.setValue(element.id,{[keyInStorage]:value})}render(){let storage=this.annotationStorage,id$3=this.data.id;this.container.classList.add(`textWidgetAnnotation`);let element=null;if(this.renderForms){let storedData=storage.getValue(id$3,{value:this.data.fieldValue}),textContent=storedData.value||``,maxLen=storage.getValue(id$3,{charLimit:this.data.maxLen}).charLimit;maxLen&&textContent.length>maxLen&&(textContent=textContent.slice(0,maxLen));let fieldFormattedValues=storedData.formattedValue||this.data.textContent?.join(`
`)||null;fieldFormattedValues&&this.data.comb&&(fieldFormattedValues=fieldFormattedValues.replaceAll(/\s+/g,``));let elementData={userValue:textContent,formattedValue:fieldFormattedValues,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(element=document.createElement(`textarea`),element.textContent=fieldFormattedValues??textContent,this.data.doNotScroll&&(element.style.overflowY=`hidden`)):(element=document.createElement(`input`),element.type=`text`,element.setAttribute(`value`,fieldFormattedValues??textContent),this.data.doNotScroll&&(element.style.overflowX=`hidden`)),this.data.hasOwnCanvas&&(element.hidden=!0),GetElementsByNameSet.add(element),element.setAttribute(`data-element-id`,id$3),element.disabled=this.data.readOnly,element.name=this.data.fieldName,element.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(element,this.data.required),maxLen&&(element.maxLength=maxLen),element.addEventListener(`input`,event=>{storage.setValue(id$3,{value:event.target.value}),this.setPropertyOnSiblings(element,`value`,event.target.value,`value`),elementData.formattedValue=null}),element.addEventListener(`resetform`,event=>{element.value=elementData.userValue=this.data.defaultFieldValue??``,elementData.formattedValue=null});let blurListener=event=>{let{formattedValue}=elementData;formattedValue!=null&&(event.target.value=formattedValue),event.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){element.addEventListener(`focus`,event=>{if(elementData.focused)return;let{target}=event;elementData.userValue&&(target.value=elementData.userValue),elementData.lastCommittedValue=target.value,elementData.commitKey=1,elementData.focused=!0}),element.addEventListener(`updatefromsandbox`,jsEvent=>{this.showElementAndHideCanvas(jsEvent.target),this._dispatchEventFromSandbox({value(event){elementData.userValue=event.detail.value??``,storage.setValue(id$3,{value:elementData.userValue.toString()}),event.target.value=elementData.userValue},formattedValue(event){let{formattedValue}=event.detail;elementData.formattedValue=formattedValue,formattedValue!=null&&event.target!==document.activeElement&&(event.target.value=formattedValue),storage.setValue(id$3,{formattedValue})},selRange(event){event.target.setSelectionRange(...event.detail.selRange)},charLimit:event=>{let{charLimit}=event.detail,{target}=event;if(charLimit===0){target.removeAttribute(`maxLength`);return}target.setAttribute(`maxLength`,charLimit);let value=elementData.userValue;!value||value.length<=charLimit||(value=value.slice(0,charLimit),target.value=elementData.userValue=value,storage.setValue(id$3,{value}),this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:id$3,name:`Keystroke`,value,willCommit:!0,commitKey:1,selStart:target.selectionStart,selEnd:target.selectionEnd}}))}},jsEvent)}),element.addEventListener(`keydown`,event=>{elementData.commitKey=1;let commitKey=-1;if(event.key===`Escape`?commitKey=0:event.key===`Enter`&&!this.data.multiLine?commitKey=2:event.key===`Tab`&&(elementData.commitKey=3),commitKey===-1)return;let{value}=event.target;elementData.lastCommittedValue!==value&&(elementData.lastCommittedValue=value,elementData.userValue=value,this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:id$3,name:`Keystroke`,value,willCommit:!0,commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}}))});let _blurListener=blurListener;blurListener=null,element.addEventListener(`blur`,event=>{if(!elementData.focused||!event.relatedTarget)return;elementData.focused=!1;let{value}=event.target;elementData.userValue=value,elementData.lastCommittedValue!==value&&this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:id$3,name:`Keystroke`,value,willCommit:!0,commitKey:elementData.commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}}),_blurListener(event)}),this.data.actions?.Keystroke&&element.addEventListener(`beforeinput`,event=>{elementData.lastCommittedValue=null;let{data,target}=event,{value,selectionStart,selectionEnd}=target,selStart=selectionStart,selEnd=selectionEnd;switch(event.inputType){case`deleteWordBackward`:{let match=value.substring(0,selectionStart).match(/\w*[^\w]*$/);match&&(selStart-=match[0].length);break}case`deleteWordForward`:{let match=value.substring(selectionStart).match(/^[^\w]*\w*/);match&&(selEnd+=match[0].length);break}case`deleteContentBackward`:selectionStart===selectionEnd&&--selStart;break;case`deleteContentForward`:selectionStart===selectionEnd&&(selEnd+=1);break}event.preventDefault(),this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:id$3,name:`Keystroke`,value,change:data||``,willCommit:!1,selStart,selEnd}})}),this._setEventListeners(element,elementData,[[`focus`,`Focus`],[`blur`,`Blur`],[`mousedown`,`Mouse Down`],[`mouseenter`,`Mouse Enter`],[`mouseleave`,`Mouse Exit`],[`mouseup`,`Mouse Up`]],event=>event.target.value)}if(blurListener&&element.addEventListener(`blur`,blurListener),this.data.comb){let combWidth=(this.data.rect[2]-this.data.rect[0])/maxLen;element.classList.add(`comb`),element.style.letterSpacing=`calc(${combWidth}px * var(--scale-factor) - 1ch)`}}else element=document.createElement(`div`),element.textContent=this.data.fieldValue,element.style.verticalAlign=`middle`,element.style.display=`table-cell`;return this._setTextStyle(element),this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:!!parameters.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){let storage=this.annotationStorage,data=this.data,id$3=data.id,value=storage.getValue(id$3,{value:data.exportValue===data.fieldValue}).value;typeof value==`string`&&(value=value!==`Off`,storage.setValue(id$3,{value})),this.container.classList.add(`buttonWidgetAnnotation`,`checkBox`);let element=document.createElement(`input`);return GetElementsByNameSet.add(element),element.setAttribute(`data-element-id`,id$3),element.disabled=data.readOnly,this._setRequired(element,this.data.required),element.type=`checkbox`,element.name=data.fieldName,value&&element.setAttribute(`checked`,!0),element.setAttribute(`exportValue`,data.exportValue),element.tabIndex=DEFAULT_TAB_INDEX,element.addEventListener(`change`,event=>{let{name,checked}=event.target;for(let checkbox of this._getElementsByName(name,id$3)){let curChecked=checked&&checkbox.exportValue===data.exportValue;checkbox.domElement&&(checkbox.domElement.checked=curChecked),storage.setValue(checkbox.id,{value:curChecked})}storage.setValue(id$3,{value:checked})}),element.addEventListener(`resetform`,event=>{let defaultValue$3=data.defaultFieldValue||`Off`;event.target.checked=defaultValue$3===data.exportValue}),this.enableScripting&&this.hasJSActions&&(element.addEventListener(`updatefromsandbox`,jsEvent=>{this._dispatchEventFromSandbox({value(event){event.target.checked=event.detail.value!==`Off`,storage.setValue(id$3,{value:event.target.checked})}},jsEvent)}),this._setEventListeners(element,null,[[`change`,`Validate`],[`change`,`Action`],[`focus`,`Focus`],[`blur`,`Blur`],[`mousedown`,`Mouse Down`],[`mouseenter`,`Mouse Enter`],[`mouseleave`,`Mouse Exit`],[`mouseup`,`Mouse Up`]],event=>event.target.checked)),this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){this.container.classList.add(`buttonWidgetAnnotation`,`radioButton`);let storage=this.annotationStorage,data=this.data,id$3=data.id,value=storage.getValue(id$3,{value:data.fieldValue===data.buttonValue}).value;typeof value==`string`&&(value=value!==data.buttonValue,storage.setValue(id$3,{value}));let element=document.createElement(`input`);if(GetElementsByNameSet.add(element),element.setAttribute(`data-element-id`,id$3),element.disabled=data.readOnly,this._setRequired(element,this.data.required),element.type=`radio`,element.name=data.fieldName,value&&element.setAttribute(`checked`,!0),element.tabIndex=DEFAULT_TAB_INDEX,element.addEventListener(`change`,event=>{let{name,checked}=event.target;for(let radio of this._getElementsByName(name,id$3))storage.setValue(radio.id,{value:!1});storage.setValue(id$3,{value:checked})}),element.addEventListener(`resetform`,event=>{let defaultValue$3=data.defaultFieldValue;event.target.checked=defaultValue$3!=null&&defaultValue$3===data.buttonValue}),this.enableScripting&&this.hasJSActions){let pdfButtonValue=data.buttonValue;element.addEventListener(`updatefromsandbox`,jsEvent=>{this._dispatchEventFromSandbox({value:event=>{let checked=pdfButtonValue===event.detail.value;for(let radio of this._getElementsByName(event.target.name)){let curChecked=checked&&radio.id===id$3;radio.domElement&&(radio.domElement.checked=curChecked),storage.setValue(radio.id,{value:curChecked})}}},jsEvent)}),this._setEventListeners(element,null,[[`change`,`Validate`],[`change`,`Action`],[`focus`,`Focus`],[`blur`,`Blur`],[`mousedown`,`Mouse Down`],[`mouseenter`,`Mouse Enter`],[`mouseleave`,`Mouse Exit`],[`mouseup`,`Mouse Up`]],event=>event.target.checked)}return this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(parameters){super(parameters,{ignoreBorder:parameters.data.hasAppearance})}render(){let container=super.render();container.classList.add(`buttonWidgetAnnotation`,`pushButton`),this.data.alternativeText&&(container.title=this.data.alternativeText);let linkElement=container.lastChild;return this.enableScripting&&this.hasJSActions&&linkElement&&(this._setDefaultPropertiesFromJS(linkElement),linkElement.addEventListener(`updatefromsandbox`,jsEvent=>{this._dispatchEventFromSandbox({},jsEvent)})),container}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){this.container.classList.add(`choiceWidgetAnnotation`);let storage=this.annotationStorage,id$3=this.data.id,storedData=storage.getValue(id$3,{value:this.data.fieldValue}),selectElement=document.createElement(`select`);GetElementsByNameSet.add(selectElement),selectElement.setAttribute(`data-element-id`,id$3),selectElement.disabled=this.data.readOnly,this._setRequired(selectElement,this.data.required),selectElement.name=this.data.fieldName,selectElement.tabIndex=DEFAULT_TAB_INDEX;let addAnEmptyEntry=this.data.combo&&this.data.options.length>0;this.data.combo||(selectElement.size=this.data.options.length,this.data.multiSelect&&(selectElement.multiple=!0)),selectElement.addEventListener(`resetform`,event=>{let defaultValue$3=this.data.defaultFieldValue;for(let option of selectElement.options)option.selected=option.value===defaultValue$3});for(let option of this.data.options){let optionElement=document.createElement(`option`);optionElement.textContent=option.displayValue,optionElement.value=option.exportValue,storedData.value.includes(option.exportValue)&&(optionElement.setAttribute(`selected`,!0),addAnEmptyEntry=!1),selectElement.append(optionElement)}let removeEmptyEntry=null;if(addAnEmptyEntry){let noneOptionElement=document.createElement(`option`);noneOptionElement.value=` `,noneOptionElement.setAttribute(`hidden`,!0),noneOptionElement.setAttribute(`selected`,!0),selectElement.prepend(noneOptionElement),removeEmptyEntry=()=>{noneOptionElement.remove(),selectElement.removeEventListener(`input`,removeEmptyEntry),removeEmptyEntry=null},selectElement.addEventListener(`input`,removeEmptyEntry)}let getValue$1=isExport=>{let name=isExport?`value`:`textContent`,{options:options$1,multiple}=selectElement;return multiple?Array.prototype.filter.call(options$1,option=>option.selected).map(option=>option[name]):options$1.selectedIndex===-1?null:options$1[options$1.selectedIndex][name]},selectedValues=getValue$1(!1),getItems=event=>{let options$1=event.target.options;return Array.prototype.map.call(options$1,option=>({displayValue:option.textContent,exportValue:option.value}))};return this.enableScripting&&this.hasJSActions?(selectElement.addEventListener(`updatefromsandbox`,jsEvent=>{this._dispatchEventFromSandbox({value(event){removeEmptyEntry?.();let value=event.detail.value,values=new Set(Array.isArray(value)?value:[value]);for(let option of selectElement.options)option.selected=values.has(option.value);storage.setValue(id$3,{value:getValue$1(!0)}),selectedValues=getValue$1(!1)},multipleSelection(event){selectElement.multiple=!0},remove(event){let options$1=selectElement.options,index$2=event.detail.remove;options$1[index$2].selected=!1,selectElement.remove(index$2),options$1.length>0&&Array.prototype.findIndex.call(options$1,option=>option.selected)===-1&&(options$1[0].selected=!0),storage.setValue(id$3,{value:getValue$1(!0),items:getItems(event)}),selectedValues=getValue$1(!1)},clear(event){for(;selectElement.length!==0;)selectElement.remove(0);storage.setValue(id$3,{value:null,items:[]}),selectedValues=getValue$1(!1)},insert(event){let{index:index$2,displayValue,exportValue}=event.detail.insert,selectChild=selectElement.children[index$2],optionElement=document.createElement(`option`);optionElement.textContent=displayValue,optionElement.value=exportValue,selectChild?selectChild.before(optionElement):selectElement.append(optionElement),storage.setValue(id$3,{value:getValue$1(!0),items:getItems(event)}),selectedValues=getValue$1(!1)},items(event){let{items}=event.detail;for(;selectElement.length!==0;)selectElement.remove(0);for(let item of items){let{displayValue,exportValue}=item,optionElement=document.createElement(`option`);optionElement.textContent=displayValue,optionElement.value=exportValue,selectElement.append(optionElement)}selectElement.options.length>0&&(selectElement.options[0].selected=!0),storage.setValue(id$3,{value:getValue$1(!0),items:getItems(event)}),selectedValues=getValue$1(!1)},indices(event){let indices=new Set(event.detail.indices);for(let option of event.target.options)option.selected=indices.has(option.index);storage.setValue(id$3,{value:getValue$1(!0)}),selectedValues=getValue$1(!1)},editable(event){event.target.disabled=!event.detail.editable}},jsEvent)}),selectElement.addEventListener(`input`,event=>{let exportValue=getValue$1(!0);storage.setValue(id$3,{value:exportValue}),event.preventDefault(),this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:id$3,name:`Keystroke`,value:selectedValues,changeEx:exportValue,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(selectElement,null,[[`focus`,`Focus`],[`blur`,`Blur`],[`mousedown`,`Mouse Down`],[`mouseenter`,`Mouse Enter`],[`mouseleave`,`Mouse Exit`],[`mouseup`,`Mouse Up`],[`input`,`Action`],[`input`,`Validate`]],event=>event.target.value)):selectElement.addEventListener(`input`,function(event){storage.setValue(id$3,{value:getValue$1(!0)})}),this.data.combo&&this._setTextStyle(selectElement),this._setBackgroundColor(selectElement),this._setDefaultPropertiesFromJS(selectElement),this.container.append(selectElement),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(parameters){let{data,elements}=parameters;super(parameters,{isRenderable:AnnotationElement._hasPopupData(data)}),this.elements=elements}render(){this.container.classList.add(`popupAnnotation`);let popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),elementIds=[];for(let element of this.elements)element.popup=popup,elementIds.push(element.data.id),element.addHighlightArea();return this.container.setAttribute(`aria-controls`,elementIds.map(id$3=>`${_util.AnnotationPrefix}${id$3}`).join(`,`)),this.container}}class PopupElement{#e=null;#t=this.#_.bind(this);#n=this.#b.bind(this);#r=this.#y.bind(this);#i=this.#v.bind(this);#a=null;#o=null;#s=null;#c=null;#l=null;#u=null;#d=!1;#f=null;#p=null;#m=null;#h=null;#g=!1;constructor({container,color:color$2,elements,titleObj,modificationDate,contentsObj,richText,parent,rect,parentRect,open}){this.#o=container,this.#h=titleObj,this.#s=contentsObj,this.#m=richText,this.#l=parent,this.#a=color$2,this.#p=rect,this.#u=parentRect,this.#c=elements;let dateObject=_display_utils.PDFDateString.toDateObject(modificationDate);dateObject&&(this.#e=parent.l10n.get(`annotation_date_string`,{date:dateObject.toLocaleDateString(),time:dateObject.toLocaleTimeString()})),this.trigger=elements.flatMap(e$4=>e$4.getElementsToTriggerPopup());for(let element of this.trigger)element.addEventListener(`click`,this.#i),element.addEventListener(`mouseenter`,this.#r),element.addEventListener(`mouseleave`,this.#n),element.classList.add(`popupTriggerArea`);for(let element of elements)element.container?.addEventListener(`keydown`,this.#t);this.#o.hidden=!0,open&&this.#v()}render(){if(this.#f)return;let{page:{view},viewport:{rawDims:{pageWidth,pageHeight,pageX,pageY}}}=this.#l,popup=this.#f=document.createElement(`div`);if(popup.className=`popup`,this.#a){let baseColor=popup.style.outlineColor=_util.Util.makeHexColor(...this.#a);if(CSS.supports(`background-color`,`color-mix(in srgb, red 30%, white)`))popup.style.backgroundColor=`color-mix(in srgb, ${baseColor} 30%, white)`;else{let BACKGROUND_ENLIGHT=.7;popup.style.backgroundColor=_util.Util.makeHexColor(...this.#a.map(c$3=>Math.floor(.7*(255-c$3)+c$3)))}}let header=document.createElement(`span`);header.className=`header`;let title=document.createElement(`h1`);if(header.append(title),{dir:title.dir,str:title.textContent}=this.#h,popup.append(header),this.#e){let modificationDate=document.createElement(`span`);modificationDate.classList.add(`popupDate`),this.#e.then(localized=>{modificationDate.textContent=localized}),header.append(modificationDate)}let contentsObj=this.#s,richText=this.#m;if(richText?.str&&(!contentsObj?.str||contentsObj.str===richText.str))_xfa_layer.XfaLayer.render({xfaHtml:richText.html,intent:`richText`,div:popup}),popup.lastChild.classList.add(`richText`,`popupContent`);else{let contents=this._formatContents(contentsObj);popup.append(contents)}let useParentRect=!!this.#u,rect=useParentRect?this.#u:this.#p;for(let element of this.#c)if(!rect||_util.Util.intersect(element.data.rect,rect)!==null){rect=element.data.rect,useParentRect=!0;break}let normalizedRect=_util.Util.normalizeRect([rect[0],view[3]-rect[1]+view[1],rect[2],view[3]-rect[3]+view[1]]),parentWidth=useParentRect?rect[2]-rect[0]+5:0,popupLeft=normalizedRect[0]+parentWidth,popupTop=normalizedRect[1],{style:style$3}=this.#o;style$3.left=`${100*(popupLeft-pageX)/pageWidth}%`,style$3.top=`${100*(popupTop-pageY)/pageHeight}%`,this.#o.append(popup)}_formatContents({str,dir}){let p$3=document.createElement(`p`);p$3.classList.add(`popupContent`),p$3.dir=dir;let lines=str.split(/(?:\r\n?|\n)/);for(let i$4=0,ii=lines.length;i$4<ii;++i$4){let line=lines[i$4];p$3.append(document.createTextNode(line)),i$4<ii-1&&p$3.append(document.createElement(`br`))}return p$3}#_(event){event.altKey||event.shiftKey||event.ctrlKey||event.metaKey||(event.key===`Enter`||event.key===`Escape`&&this.#d)&&this.#v()}#v(){this.#d=!this.#d,this.#d?(this.#y(),this.#o.addEventListener(`click`,this.#i),this.#o.addEventListener(`keydown`,this.#t)):(this.#b(),this.#o.removeEventListener(`click`,this.#i),this.#o.removeEventListener(`keydown`,this.#t))}#y(){this.#f||this.render(),this.isVisible?this.#d&&this.#o.classList.add(`focused`):(this.#o.hidden=!1,this.#o.style.zIndex=parseInt(this.#o.style.zIndex)+1e3)}#b(){this.#o.classList.remove(`focused`),!(this.#d||!this.isVisible)&&(this.#o.hidden=!0,this.#o.style.zIndex=parseInt(this.#o.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#o.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#o.hidden=!1)}get isVisible(){return this.#o.hidden===!1}}class FreeTextAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0}),this.textContent=parameters.data.textContent,this.textPosition=parameters.data.textPosition,this.annotationEditorType=_util.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add(`freeTextAnnotation`),this.textContent){let content=document.createElement(`div`);content.classList.add(`annotationTextContent`),content.setAttribute(`role`,`comment`);for(let line of this.textContent){let lineSpan=document.createElement(`span`);lineSpan.textContent=line,content.append(lineSpan)}this.container.append(content)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}exports$1.FreeTextAnnotationElement=FreeTextAnnotationElement;class LineAnnotationElement extends AnnotationElement{#e=null;constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add(`lineAnnotation`);let data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),line=this.#e=this.svgFactory.createElement(`svg:line`);return line.setAttribute(`x1`,data.rect[2]-data.lineCoordinates[0]),line.setAttribute(`y1`,data.rect[3]-data.lineCoordinates[1]),line.setAttribute(`x2`,data.rect[2]-data.lineCoordinates[2]),line.setAttribute(`y2`,data.rect[3]-data.lineCoordinates[3]),line.setAttribute(`stroke-width`,data.borderStyle.width||1),line.setAttribute(`stroke`,`transparent`),line.setAttribute(`fill`,`transparent`),svg.append(line),this.container.append(svg),!data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add(`highlightArea`)}}class SquareAnnotationElement extends AnnotationElement{#e=null;constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add(`squareAnnotation`);let data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),borderWidth=data.borderStyle.width,square=this.#e=this.svgFactory.createElement(`svg:rect`);return square.setAttribute(`x`,borderWidth/2),square.setAttribute(`y`,borderWidth/2),square.setAttribute(`width`,width-borderWidth),square.setAttribute(`height`,height-borderWidth),square.setAttribute(`stroke-width`,borderWidth||1),square.setAttribute(`stroke`,`transparent`),square.setAttribute(`fill`,`transparent`),svg.append(square),this.container.append(svg),!data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add(`highlightArea`)}}class CircleAnnotationElement extends AnnotationElement{#e=null;constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add(`circleAnnotation`);let data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),borderWidth=data.borderStyle.width,circle=this.#e=this.svgFactory.createElement(`svg:ellipse`);return circle.setAttribute(`cx`,width/2),circle.setAttribute(`cy`,height/2),circle.setAttribute(`rx`,width/2-borderWidth/2),circle.setAttribute(`ry`,height/2-borderWidth/2),circle.setAttribute(`stroke-width`,borderWidth||1),circle.setAttribute(`stroke`,`transparent`),circle.setAttribute(`fill`,`transparent`),svg.append(circle),this.container.append(svg),!data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add(`highlightArea`)}}class PolylineAnnotationElement extends AnnotationElement{#e=null;constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName=`polylineAnnotation`,this.svgElementName=`svg:polyline`}render(){this.container.classList.add(this.containerClassName);let data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),points=[];for(let coordinate of data.vertices){let x$2=coordinate.x-data.rect[0],y$2=data.rect[3]-coordinate.y;points.push(x$2+`,`+y$2)}points=points.join(` `);let polyline=this.#e=this.svgFactory.createElement(this.svgElementName);return polyline.setAttribute(`points`,points),polyline.setAttribute(`stroke-width`,data.borderStyle.width||1),polyline.setAttribute(`stroke`,`transparent`),polyline.setAttribute(`fill`,`transparent`),svg.append(polyline),this.container.append(svg),!data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add(`highlightArea`)}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(parameters){super(parameters),this.containerClassName=`polygonAnnotation`,this.svgElementName=`svg:polygon`}}class CaretAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add(`caretAnnotation`),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class InkAnnotationElement extends AnnotationElement{#e=[];constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName=`inkAnnotation`,this.svgElementName=`svg:polyline`,this.annotationEditorType=_util.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);let data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0);for(let inkList of data.inkLists){let points=[];for(let coordinate of inkList){let x$2=coordinate.x-data.rect[0],y$2=data.rect[3]-coordinate.y;points.push(`${x$2},${y$2}`)}points=points.join(` `);let polyline=this.svgFactory.createElement(this.svgElementName);this.#e.push(polyline),polyline.setAttribute(`points`,points),polyline.setAttribute(`stroke-width`,data.borderStyle.width||1),polyline.setAttribute(`stroke`,`transparent`),polyline.setAttribute(`fill`,`transparent`),!data.popupRef&&this.hasPopupData&&this._createPopup(),svg.append(polyline)}return this.container.append(svg),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add(`highlightArea`)}}exports$1.InkAnnotationElement=InkAnnotationElement;class HighlightAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add(`highlightAnnotation`),this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add(`underlineAnnotation`),this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add(`squigglyAnnotation`),this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add(`strikeoutAnnotation`),this.container}}class StampAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add(`stampAnnotation`),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}exports$1.StampAnnotationElement=StampAnnotationElement;class FileAttachmentAnnotationElement extends AnnotationElement{#e=null;constructor(parameters){super(parameters,{isRenderable:!0});let{filename,content}=this.data.file;this.filename=(0,_display_utils.getFilenameFromUrl)(filename,!0),this.content=content,this.linkService.eventBus?.dispatch(`fileattachmentannotation`,{source:this,filename,content})}render(){this.container.classList.add(`fileAttachmentAnnotation`);let{container,data}=this,trigger;data.hasAppearance||data.fillAlpha===0?trigger=document.createElement(`div`):(trigger=document.createElement(`img`),trigger.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name)?`paperclip`:`pushpin`}.svg`,data.fillAlpha&&data.fillAlpha<1&&(trigger.style=`filter: opacity(${Math.round(data.fillAlpha*100)}%);`)),trigger.addEventListener(`dblclick`,this.#t.bind(this)),this.#e=trigger;let{isMac}=_util.FeatureTest.platform;return container.addEventListener(`keydown`,evt=>{evt.key===`Enter`&&(isMac?evt.metaKey:evt.ctrlKey)&&this.#t()}),!data.popupRef&&this.hasPopupData?this._createPopup():trigger.classList.add(`popupTriggerArea`),container.append(trigger),container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add(`highlightArea`)}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class AnnotationLayer{#e=null;#t=null;#n=new Map;constructor({div,accessibilityManager,annotationCanvasMap,l10n,page,viewport}){this.div=div,this.#e=accessibilityManager,this.#t=annotationCanvasMap,this.l10n=l10n,this.page=page,this.viewport=viewport,this.zIndex=0,this.l10n||=_displayL10n_utils.NullL10n}#r(element,id$3){let contentElement=element.firstChild||element;contentElement.id=`${_util.AnnotationPrefix}${id$3}`,this.div.append(element),this.#e?.moveElementInDOM(this.div,element,contentElement,!1)}async render(params){let{annotations}=params,layer=this.div;(0,_display_utils.setLayerDimensions)(layer,this.viewport);let popupToElements=new Map,elementParams={data:null,layer,linkService:params.linkService,downloadManager:params.downloadManager,imageResourcesPath:params.imageResourcesPath||``,renderForms:params.renderForms!==!1,svgFactory:new _display_utils.DOMSVGFactory,annotationStorage:params.annotationStorage||new _annotation_storage.AnnotationStorage,enableScripting:params.enableScripting===!0,hasJSActions:params.hasJSActions,fieldObjects:params.fieldObjects,parent:this,elements:null};for(let data of annotations){if(data.noHTML)continue;let isPopupAnnotation=data.annotationType===_util.AnnotationType.POPUP;if(isPopupAnnotation){let elements=popupToElements.get(data.id);if(!elements)continue;elementParams.elements=elements}else{let{width,height}=getRectDims(data.rect);if(width<=0||height<=0)continue}elementParams.data=data;let element=AnnotationElementFactory.create(elementParams);if(!element.isRenderable)continue;if(!isPopupAnnotation&&data.popupRef){let elements=popupToElements.get(data.popupRef);elements?elements.push(element):popupToElements.set(data.popupRef,[element])}element.annotationEditorType>0&&this.#n.set(element.data.id,element);let rendered=element.render();data.hidden&&(rendered.style.visibility=`hidden`),this.#r(rendered,data.id)}this.#i(),await this.l10n.translate(layer)}update({viewport}){let layer=this.div;this.viewport=viewport,(0,_display_utils.setLayerDimensions)(layer,{rotation:viewport.rotation}),this.#i(),layer.hidden=!1}#i(){if(!this.#t)return;let layer=this.div;for(let[id$3,canvas]of this.#t){let element=layer.querySelector(`[data-annotation-id="${id$3}"]`);if(!element)continue;let{firstChild}=element;firstChild?firstChild.nodeName===`CANVAS`?firstChild.replaceWith(canvas):firstChild.before(canvas):element.append(canvas)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(id$3){return this.#n.get(id$3)}}exports$1.AnnotationLayer=AnnotationLayer}),((__unused_webpack_module,exports$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.ColorConverters=void 0;function makeColorComp(n$4){return Math.floor(Math.max(0,Math.min(1,n$4))*255).toString(16).padStart(2,`0`)}function scaleAndClamp(x$2){return Math.max(0,Math.min(255,255*x$2))}class ColorConverters{static CMYK_G([c$3,y$2,m$3,k$3]){return[`G`,1-Math.min(1,.3*c$3+.59*m$3+.11*y$2+k$3)]}static G_CMYK([g$3]){return[`CMYK`,0,0,0,1-g$3]}static G_RGB([g$3]){return[`RGB`,g$3,g$3,g$3]}static G_rgb([g$3]){return g$3=scaleAndClamp(g$3),[g$3,g$3,g$3]}static G_HTML([g$3]){let G$1=makeColorComp(g$3);return`#${G$1}${G$1}${G$1}`}static RGB_G([r$4,g$3,b$3]){return[`G`,.3*r$4+.59*g$3+.11*b$3]}static RGB_rgb(color$2){return color$2.map(scaleAndClamp)}static RGB_HTML(color$2){return`#${color$2.map(makeColorComp).join(``)}`}static T_HTML(){return`#00000000`}static T_rgb(){return[null]}static CMYK_RGB([c$3,y$2,m$3,k$3]){return[`RGB`,1-Math.min(1,c$3+k$3),1-Math.min(1,m$3+k$3),1-Math.min(1,y$2+k$3)]}static CMYK_rgb([c$3,y$2,m$3,k$3]){return[scaleAndClamp(1-Math.min(1,c$3+k$3)),scaleAndClamp(1-Math.min(1,m$3+k$3)),scaleAndClamp(1-Math.min(1,y$2+k$3))]}static CMYK_HTML(components){let rgb$1=this.CMYK_RGB(components).slice(1);return this.RGB_HTML(rgb$1)}static RGB_CMYK([r$4,g$3,b$3]){let c$3=1-r$4,m$3=1-g$3,y$2=1-b$3;return[`CMYK`,c$3,m$3,y$2,Math.min(c$3,m$3,y$2)]}}exports$1.ColorConverters=ColorConverters}),((__unused_webpack_module,exports$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.NullL10n=void 0,exports$1.getL10nFallback=getL10nFallback;let DEFAULT_L10N_STRINGS={of_pages:`of {{pagesCount}}`,page_of_pages:`({{pageNumber}} of {{pagesCount}})`,document_properties_kb:`{{size_kb}} KB ({{size_b}} bytes)`,document_properties_mb:`{{size_mb}} MB ({{size_b}} bytes)`,document_properties_date_string:`{{date}}, {{time}}`,document_properties_page_size_unit_inches:`in`,document_properties_page_size_unit_millimeters:`mm`,document_properties_page_size_orientation_portrait:`portrait`,document_properties_page_size_orientation_landscape:`landscape`,document_properties_page_size_name_a3:`A3`,document_properties_page_size_name_a4:`A4`,document_properties_page_size_name_letter:`Letter`,document_properties_page_size_name_legal:`Legal`,document_properties_page_size_dimension_string:`{{width}}  {{height}} {{unit}} ({{orientation}})`,document_properties_page_size_dimension_name_string:`{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})`,document_properties_linearized_yes:`Yes`,document_properties_linearized_no:`No`,additional_layers:`Additional Layers`,page_landmark:`Page {{page}}`,thumb_page_title:`Page {{page}}`,thumb_page_canvas:`Thumbnail of Page {{page}}`,find_reached_top:`Reached top of document, continued from bottom`,find_reached_bottom:`Reached end of document, continued from top`,"find_match_count[one]":`{{current}} of {{total}} match`,"find_match_count[other]":`{{current}} of {{total}} matches`,"find_match_count_limit[one]":`More than {{limit}} match`,"find_match_count_limit[other]":`More than {{limit}} matches`,find_not_found:`Phrase not found`,page_scale_width:`Page Width`,page_scale_fit:`Page Fit`,page_scale_auto:`Automatic Zoom`,page_scale_actual:`Actual Size`,page_scale_percent:`{{scale}}%`,loading_error:`An error occurred while loading the PDF.`,invalid_file_error:`Invalid or corrupted PDF file.`,missing_file_error:`Missing PDF file.`,unexpected_response_error:`Unexpected server response.`,rendering_error:`An error occurred while rendering the page.`,annotation_date_string:`{{date}}, {{time}}`,printing_not_supported:`Warning: Printing is not fully supported by this browser.`,printing_not_ready:`Warning: The PDF is not fully loaded for printing.`,web_fonts_disabled:`Web fonts are disabled: unable to use embedded PDF fonts.`,free_text2_default_content:`Start typing`,editor_free_text2_aria_label:`Text Editor`,editor_ink2_aria_label:`Draw Editor`,editor_ink_canvas_aria_label:`User-created image`,editor_alt_text_button_label:`Alt text`,editor_alt_text_edit_button_label:`Edit alt text`,editor_alt_text_decorative_tooltip:`Marked as decorative`};DEFAULT_L10N_STRINGS.print_progress_percent=`{{progress}}%`;function getL10nFallback(key$1,args){switch(key$1){case`find_match_count`:key$1=`find_match_count[${args.total===1?`one`:`other`}]`;break;case`find_match_count_limit`:key$1=`find_match_count_limit[${args.limit===1?`one`:`other`}]`;break}return DEFAULT_L10N_STRINGS[key$1]||``}function formatL10nValue(text,args){return args?text.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(all,name)=>name in args?args[name]:`{{`+name+`}}`):text}exports$1.NullL10n={async getLanguage(){return`en-us`},async getDirection(){return`ltr`},async get(key$1,args=null,fallback=getL10nFallback(key$1,args)){return formatL10nValue(fallback,args)},async translate(element){}}}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.XfaLayer=void 0;var _xfa_text=__w_pdfjs_require__$1(25);class XfaLayer{static setupStorage(html,id$3,element,storage,intent){let storedData=storage.getValue(id$3,{value:null});switch(element.name){case`textarea`:if(storedData.value!==null&&(html.textContent=storedData.value),intent===`print`)break;html.addEventListener(`input`,event=>{storage.setValue(id$3,{value:event.target.value})});break;case`input`:if(element.attributes.type===`radio`||element.attributes.type===`checkbox`){if(storedData.value===element.attributes.xfaOn?html.setAttribute(`checked`,!0):storedData.value===element.attributes.xfaOff&&html.removeAttribute(`checked`),intent===`print`)break;html.addEventListener(`change`,event=>{storage.setValue(id$3,{value:event.target.checked?event.target.getAttribute(`xfaOn`):event.target.getAttribute(`xfaOff`)})})}else{if(storedData.value!==null&&html.setAttribute(`value`,storedData.value),intent===`print`)break;html.addEventListener(`input`,event=>{storage.setValue(id$3,{value:event.target.value})})}break;case`select`:if(storedData.value!==null){html.setAttribute(`value`,storedData.value);for(let option of element.children)option.attributes.value===storedData.value?option.attributes.selected=!0:option.attributes.hasOwnProperty(`selected`)&&delete option.attributes.selected}html.addEventListener(`input`,event=>{let options$1=event.target.options,value=options$1.selectedIndex===-1?``:options$1[options$1.selectedIndex].value;storage.setValue(id$3,{value})});break}}static setAttributes({html,element,storage=null,intent,linkService}){let{attributes}=element,isHTMLAnchorElement=html instanceof HTMLAnchorElement;attributes.type===`radio`&&(attributes.name=`${attributes.name}-${intent}`);for(let[key$1,value]of Object.entries(attributes))if(value!=null)switch(key$1){case`class`:value.length&&html.setAttribute(key$1,value.join(` `));break;case`dataId`:break;case`id`:html.setAttribute(`data-element-id`,value);break;case`style`:Object.assign(html.style,value);break;case`textContent`:html.textContent=value;break;default:(!isHTMLAnchorElement||key$1!==`href`&&key$1!==`newWindow`)&&html.setAttribute(key$1,value)}isHTMLAnchorElement&&linkService.addLinkAttributes(html,attributes.href,attributes.newWindow),storage&&attributes.dataId&&this.setupStorage(html,attributes.dataId,element,storage)}static render(parameters){let storage=parameters.annotationStorage,linkService=parameters.linkService,root$3=parameters.xfaHtml,intent=parameters.intent||`display`,rootHtml=document.createElement(root$3.name);root$3.attributes&&this.setAttributes({html:rootHtml,element:root$3,intent,linkService});let stack=[[root$3,-1,rootHtml]],rootDiv=parameters.div;if(rootDiv.append(rootHtml),parameters.viewport){let transform$1=`matrix(${parameters.viewport.transform.join(`,`)})`;rootDiv.style.transform=transform$1}intent!==`richText`&&rootDiv.setAttribute(`class`,`xfaLayer xfaFont`);let textDivs=[];for(;stack.length>0;){let[parent,i$4,html]=stack.at(-1);if(i$4+1===parent.children.length){stack.pop();continue}let child=parent.children[++stack.at(-1)[1]];if(child===null)continue;let{name}=child;if(name===`#text`){let node=document.createTextNode(child.value);textDivs.push(node),html.append(node);continue}let childHtml=child?.attributes?.xmlns?document.createElementNS(child.attributes.xmlns,name):document.createElement(name);if(html.append(childHtml),child.attributes&&this.setAttributes({html:childHtml,element:child,storage,intent,linkService}),child.children&&child.children.length>0)stack.push([child,-1,childHtml]);else if(child.value){let node=document.createTextNode(child.value);_xfa_text.XfaText.shouldBuildText(name)&&textDivs.push(node),childHtml.append(node)}}for(let el of rootDiv.querySelectorAll(`.xfaNonInteractive input, .xfaNonInteractive textarea`))el.setAttribute(`readOnly`,!0);return{textDivs}}static update(parameters){let transform$1=`matrix(${parameters.viewport.transform.join(`,`)})`;parameters.div.style.transform=transform$1,parameters.div.hidden=!1}}exports$1.XfaLayer=XfaLayer}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.InkEditor=void 0;var _util=__w_pdfjs_require__$1(1),_editor=__w_pdfjs_require__$1(4),_annotation_layer=__w_pdfjs_require__$1(29),_display_utils=__w_pdfjs_require__$1(6),_tools=__w_pdfjs_require__$1(5);class InkEditor extends _editor.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#r=this.canvasPointerleave.bind(this);#i=this.canvasPointerup.bind(this);#a=this.canvasPointerdown.bind(this);#o=new Path2D;#s=!1;#c=!1;#l=!1;#u=null;#d=0;#f=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type=`ink`;constructor(params){super({...params,name:`inkEditor`}),this.color=params.color||null,this.thickness=params.thickness||null,this.opacity=params.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(l10n){_editor.AnnotationEditor.initialize(l10n,{strings:[`editor_ink_canvas_aria_label`,`editor_ink2_aria_label`]})}static updateDefaultParams(type,value){switch(type){case _util.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=value;break;case _util.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=value;break;case _util.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=value/100;break}}updateParams(type,value){switch(type){case _util.AnnotationEditorParamsType.INK_THICKNESS:this.#m(value);break;case _util.AnnotationEditorParamsType.INK_COLOR:this.#h(value);break;case _util.AnnotationEditorParamsType.INK_OPACITY:this.#g(value);break}}static get defaultPropertiesToUpdate(){return[[_util.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[_util.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util.AnnotationEditorParamsType.INK_OPACITY,Math.round(InkEditor._defaultOpacity*100)]]}get propertiesToUpdate(){return[[_util.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[_util.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??InkEditor._defaultOpacity))]]}#m(thickness){let savedThickness=this.thickness;this.addCommands({cmd:()=>{this.thickness=thickness,this.#z()},undo:()=>{this.thickness=savedThickness,this.#z()},mustExec:!0,type:_util.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#h(color$2){let savedColor=this.color;this.addCommands({cmd:()=>{this.color=color$2,this.#E()},undo:()=>{this.color=savedColor,this.#E()},mustExec:!0,type:_util.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(opacity){opacity/=100;let savedOpacity=this.opacity;this.addCommands({cmd:()=>{this.opacity=opacity,this.#E()},undo:()=>{this.opacity=savedOpacity,this.#E()},mustExec:!0,type:_util.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#O(),this.#k()),this.isAttachedToDOM||(this.parent.add(this),this.#A()),this.#z()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#u.disconnect(),this.#u=null,super.remove())}setParent(parent){!this.parent&&parent?this._uiManager.removeShouldRescale(this):this.parent&&parent===null&&this._uiManager.addShouldRescale(this),super.setParent(parent)}onScaleChanging(){let[parentWidth,parentHeight]=this.parentDimensions,width=this.width*parentWidth,height=this.height*parentHeight;this.setDimensions(width,height)}enableEditMode(){this.#s||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener(`pointerdown`,this.#a))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove(`editing`),this.canvas.removeEventListener(`pointerdown`,this.#a))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#_(){let{parentRotation,parentDimensions:[width,height]}=this;switch(parentRotation){case 90:return[0,height,height,width];case 180:return[width,height,width,height];case 270:return[width,0,height,width];default:return[0,0,width,height]}}#v(){let{ctx,color:color$2,opacity,thickness,parentScale,scaleFactor}=this;ctx.lineWidth=thickness*parentScale/scaleFactor,ctx.lineCap=`round`,ctx.lineJoin=`round`,ctx.miterLimit=10,ctx.strokeStyle=`${color$2}${(0,_tools.opacityToHex)(opacity)}`}#y(x$2,y$2){this.canvas.addEventListener(`contextmenu`,_display_utils.noContextMenu),this.canvas.addEventListener(`pointerleave`,this.#r),this.canvas.addEventListener(`pointermove`,this.#n),this.canvas.addEventListener(`pointerup`,this.#i),this.canvas.removeEventListener(`pointerdown`,this.#a),this.isEditing=!0,this.#l||(this.#l=!0,this.#A(),this.thickness||=InkEditor._defaultThickness,this.color||=InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor,this.opacity??=InkEditor._defaultOpacity),this.currentPath.push([x$2,y$2]),this.#c=!1,this.#v(),this.#p=()=>{this.#C(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#b(x$2,y$2){let[lastX,lastY]=this.currentPath.at(-1);if(this.currentPath.length>1&&x$2===lastX&&y$2===lastY)return;let currentPath=this.currentPath,path2D=this.#o;if(currentPath.push([x$2,y$2]),this.#c=!0,currentPath.length<=2){path2D.moveTo(...currentPath[0]),path2D.lineTo(x$2,y$2);return}currentPath.length===3&&(this.#o=path2D=new Path2D,path2D.moveTo(...currentPath[0])),this.#w(path2D,...currentPath.at(-3),...currentPath.at(-2),x$2,y$2)}#x(){if(this.currentPath.length===0)return;let lastPoint=this.currentPath.at(-1);this.#o.lineTo(...lastPoint)}#S(x$2,y$2){this.#p=null,x$2=Math.min(Math.max(x$2,0),this.canvas.width),y$2=Math.min(Math.max(y$2,0),this.canvas.height),this.#b(x$2,y$2),this.#x();let bezier;if(this.currentPath.length!==1)bezier=this.#T();else{let xy=[x$2,y$2];bezier=[[xy,xy.slice(),xy.slice(),xy]]}let path2D=this.#o,currentPath=this.currentPath;this.currentPath=[],this.#o=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(currentPath),this.paths.push(bezier),this.bezierPath2D.push(path2D),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#O(),this.#k()),this.#z())},mustExec:!0})}#C(){if(!this.#c)return;this.#c=!1;let thickness=Math.ceil(this.thickness*this.parentScale),lastPoints=this.currentPath.slice(-3),x$2=lastPoints.map(xy=>xy[0]),y$2=lastPoints.map(xy=>xy[1]),xMin=Math.min(...x$2)-thickness,xMax=Math.max(...x$2)+thickness,yMin=Math.min(...y$2)-thickness,yMax=Math.max(...y$2)+thickness,{ctx}=this;ctx.save(),ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(let path of this.bezierPath2D)ctx.stroke(path);ctx.stroke(this.#o),ctx.restore()}#w(path2D,x0,y0,x1,y1,x2,y2){let prevX=(x0+x1)/2,prevY=(y0+y1)/2,x3=(x1+x2)/2,y3=(y1+y2)/2;path2D.bezierCurveTo(prevX+2*(x1-prevX)/3,prevY+2*(y1-prevY)/3,x3+2*(x1-x3)/3,y3+2*(y1-y3)/3,x3,y3)}#T(){let path=this.currentPath;if(path.length<=2)return[[path[0],path[0],path.at(-1),path.at(-1)]];let bezierPoints=[],i$4,[x0,y0]=path[0];for(i$4=1;i$4<path.length-2;i$4++){let[x1$1,y1$1]=path[i$4],[x2$1,y2$1]=path[i$4+1],x3=(x1$1+x2$1)/2,y3=(y1$1+y2$1)/2,control1$1=[x0+2*(x1$1-x0)/3,y0+2*(y1$1-y0)/3],control2$1=[x3+2*(x1$1-x3)/3,y3+2*(y1$1-y3)/3];bezierPoints.push([[x0,y0],control1$1,control2$1,[x3,y3]]),[x0,y0]=[x3,y3]}let[x1,y1]=path[i$4],[x2,y2]=path[i$4+1],control1=[x0+2*(x1-x0)/3,y0+2*(y1-y0)/3],control2=[x2+2*(x1-x2)/3,y2+2*(y1-y2)/3];return bezierPoints.push([[x0,y0],control1,control2,[x2,y2]]),bezierPoints}#E(){if(this.isEmpty()){this.#M();return}this.#v();let{canvas,ctx}=this;ctx.setTransform(1,0,0,1,0,0),ctx.clearRect(0,0,canvas.width,canvas.height),this.#M();for(let path of this.bezierPath2D)ctx.stroke(path)}commit(){this.#s||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#s=!0,this.div.classList.add(`disabled`),this.#z(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(event){this._focusEventsAllowed&&(super.focusin(event),this.enableEditMode())}canvasPointerdown(event){event.button!==0||!this.isInEditMode()||this.#s||(this.setInForeground(),event.preventDefault(),event.type!==`mouse`&&this.div.focus(),this.#y(event.offsetX,event.offsetY))}canvasPointermove(event){event.preventDefault(),this.#b(event.offsetX,event.offsetY)}canvasPointerup(event){event.preventDefault(),this.#D(event)}canvasPointerleave(event){this.#D(event)}#D(event){this.canvas.removeEventListener(`pointerleave`,this.#r),this.canvas.removeEventListener(`pointermove`,this.#n),this.canvas.removeEventListener(`pointerup`,this.#i),this.canvas.addEventListener(`pointerdown`,this.#a),setTimeout(()=>{this.canvas.removeEventListener(`contextmenu`,_display_utils.noContextMenu)},10),this.#S(event.offsetX,event.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#O(){this.canvas=document.createElement(`canvas`),this.canvas.width=this.canvas.height=0,this.canvas.className=`inkEditorCanvas`,_editor.AnnotationEditor._l10nPromise.get(`editor_ink_canvas_aria_label`).then(msg=>this.canvas?.setAttribute(`aria-label`,msg)),this.div.append(this.canvas),this.ctx=this.canvas.getContext(`2d`)}#k(){this.#u=new ResizeObserver(entries=>{let rect=entries[0].contentRect;rect.width&&rect.height&&this.setDimensions(rect.width,rect.height)}),this.#u.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#s}render(){if(this.div)return this.div;let baseX,baseY;this.width&&(baseX=this.x,baseY=this.y),super.render(),_editor.AnnotationEditor._l10nPromise.get(`editor_ink2_aria_label`).then(msg=>this.div?.setAttribute(`aria-label`,msg));let[x$2,y$2,w$1,h$3]=this.#_();if(this.setAt(x$2,y$2,0,0),this.setDims(w$1,h$3),this.#O(),this.width){let[parentWidth,parentHeight]=this.parentDimensions;this.setAspectRatio(this.width*parentWidth,this.height*parentHeight),this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight),this.#l=!0,this.#A(),this.setDims(this.width*parentWidth,this.height*parentHeight),this.#E(),this.div.classList.add(`disabled`)}else this.div.classList.add(`editing`),this.enableEditMode();return this.#k(),this.div}#A(){if(!this.#l)return;let[parentWidth,parentHeight]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*parentWidth),this.canvas.height=Math.ceil(this.height*parentHeight),this.#M()}setDimensions(width,height){let roundedWidth=Math.round(width),roundedHeight=Math.round(height);if(this.#d===roundedWidth&&this.#f===roundedHeight)return;this.#d=roundedWidth,this.#f=roundedHeight,this.canvas.style.visibility=`hidden`;let[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth,this.height=height/parentHeight,this.fixAndSetPosition(),this.#s&&this.#j(width,height),this.#A(),this.#E(),this.canvas.style.visibility=`visible`,this.fixDims()}#j(width,height){let padding=this.#R(),scaleFactorW=(width-padding)/this.#t,scaleFactorH=(height-padding)/this.#e;this.scaleFactor=Math.min(scaleFactorW,scaleFactorH)}#M(){let padding=this.#R()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+padding,this.translationY*this.scaleFactor+padding)}static#N(bezier){let path2D=new Path2D;for(let i$4=0,ii=bezier.length;i$4<ii;i$4++){let[first,control1,control2,second]=bezier[i$4];i$4===0&&path2D.moveTo(...first),path2D.bezierCurveTo(control1[0],control1[1],control2[0],control2[1],second[0],second[1])}return path2D}static#P(points,rect,rotation){let[blX,blY,trX,trY]=rect;switch(rotation){case 0:for(let i$4=0,ii=points.length;i$4<ii;i$4+=2)points[i$4]+=blX,points[i$4+1]=trY-points[i$4+1];break;case 90:for(let i$4=0,ii=points.length;i$4<ii;i$4+=2){let x$2=points[i$4];points[i$4]=points[i$4+1]+blX,points[i$4+1]=x$2+blY}break;case 180:for(let i$4=0,ii=points.length;i$4<ii;i$4+=2)points[i$4]=trX-points[i$4],points[i$4+1]+=blY;break;case 270:for(let i$4=0,ii=points.length;i$4<ii;i$4+=2){let x$2=points[i$4];points[i$4]=trX-points[i$4+1],points[i$4+1]=trY-x$2}break;default:throw Error(`Invalid rotation`)}return points}static#F(points,rect,rotation){let[blX,blY,trX,trY]=rect;switch(rotation){case 0:for(let i$4=0,ii=points.length;i$4<ii;i$4+=2)points[i$4]-=blX,points[i$4+1]=trY-points[i$4+1];break;case 90:for(let i$4=0,ii=points.length;i$4<ii;i$4+=2){let x$2=points[i$4];points[i$4]=points[i$4+1]-blY,points[i$4+1]=x$2-blX}break;case 180:for(let i$4=0,ii=points.length;i$4<ii;i$4+=2)points[i$4]=trX-points[i$4],points[i$4+1]-=blY;break;case 270:for(let i$4=0,ii=points.length;i$4<ii;i$4+=2){let x$2=points[i$4];points[i$4]=trY-points[i$4+1],points[i$4+1]=trX-x$2}break;default:throw Error(`Invalid rotation`)}return points}#I(s$3,tx,ty,rect){let paths=[],padding=this.thickness/2,shiftX$1=s$3*tx+padding,shiftY$1=s$3*ty+padding;for(let bezier of this.paths){let buffer=[],points=[];for(let j$2=0,jj=bezier.length;j$2<jj;j$2++){let[first,control1,control2,second]=bezier[j$2],p10=s$3*first[0]+shiftX$1,p11=s$3*first[1]+shiftY$1,p20=s$3*control1[0]+shiftX$1,p21=s$3*control1[1]+shiftY$1,p30=s$3*control2[0]+shiftX$1,p31=s$3*control2[1]+shiftY$1,p40=s$3*second[0]+shiftX$1,p41=s$3*second[1]+shiftY$1;j$2===0&&(buffer.push(p10,p11),points.push(p10,p11)),buffer.push(p20,p21,p30,p31,p40,p41),points.push(p20,p21),j$2===jj-1&&points.push(p40,p41)}paths.push({bezier:InkEditor.#P(buffer,rect,this.rotation),points:InkEditor.#P(points,rect,this.rotation)})}return paths}#L(){let xMin=1/0,xMax=-1/0,yMin=1/0,yMax=-1/0;for(let path of this.paths)for(let[first,control1,control2,second]of path){let bbox=_util.Util.bezierBoundingBox(...first,...control1,...control2,...second);xMin=Math.min(xMin,bbox[0]),yMin=Math.min(yMin,bbox[1]),xMax=Math.max(xMax,bbox[2]),yMax=Math.max(yMax,bbox[3])}return[xMin,yMin,xMax,yMax]}#R(){return this.#s?Math.ceil(this.thickness*this.parentScale):0}#z(firstTime=!1){if(this.isEmpty())return;if(!this.#s){this.#E();return}let bbox=this.#L(),padding=this.#R();this.#t=Math.max(_editor.AnnotationEditor.MIN_SIZE,bbox[2]-bbox[0]),this.#e=Math.max(_editor.AnnotationEditor.MIN_SIZE,bbox[3]-bbox[1]);let width=Math.ceil(padding+this.#t*this.scaleFactor),height=Math.ceil(padding+this.#e*this.scaleFactor),[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth,this.height=height/parentHeight,this.setAspectRatio(width,height);let prevTranslationX=this.translationX,prevTranslationY=this.translationY;this.translationX=-bbox[0],this.translationY=-bbox[1],this.#A(),this.#E(),this.#d=width,this.#f=height,this.setDims(width,height);let unscaledPadding=firstTime?padding/this.scaleFactor/2:0;this.translate(prevTranslationX-this.translationX-unscaledPadding,prevTranslationY-this.translationY-unscaledPadding)}static deserialize(data,parent,uiManager){if(data instanceof _annotation_layer.InkAnnotationElement)return null;let editor=super.deserialize(data,parent,uiManager);editor.thickness=data.thickness,editor.color=_util.Util.makeHexColor(...data.color),editor.opacity=data.opacity;let[pageWidth,pageHeight]=editor.pageDimensions,width=editor.width*pageWidth,height=editor.height*pageHeight,scaleFactor=editor.parentScale,padding=data.thickness/2;editor.#s=!0,editor.#d=Math.round(width),editor.#f=Math.round(height);let{paths,rect,rotation}=data;for(let{bezier}of paths){bezier=InkEditor.#F(bezier,rect,rotation);let path=[];editor.paths.push(path);let p0=scaleFactor*(bezier[0]-padding),p1=scaleFactor*(bezier[1]-padding);for(let i$4=2,ii=bezier.length;i$4<ii;i$4+=6){let p10=scaleFactor*(bezier[i$4]-padding),p11=scaleFactor*(bezier[i$4+1]-padding),p20=scaleFactor*(bezier[i$4+2]-padding),p21=scaleFactor*(bezier[i$4+3]-padding),p30=scaleFactor*(bezier[i$4+4]-padding),p31=scaleFactor*(bezier[i$4+5]-padding);path.push([[p0,p1],[p10,p11],[p20,p21],[p30,p31]]),p0=p30,p1=p31}let path2D=this.#N(path);editor.bezierPath2D.push(path2D)}let bbox=editor.#L();return editor.#t=Math.max(_editor.AnnotationEditor.MIN_SIZE,bbox[2]-bbox[0]),editor.#e=Math.max(_editor.AnnotationEditor.MIN_SIZE,bbox[3]-bbox[1]),editor.#j(width,height),editor}serialize(){if(this.isEmpty())return null;let rect=this.getRect(0,0),color$2=_editor.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:_util.AnnotationEditorType.INK,color:color$2,thickness:this.thickness,opacity:this.opacity,paths:this.#I(this.scaleFactor/this.parentScale,this.translationX,this.translationY,rect),pageIndex:this.pageIndex,rect,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}exports$1.InkEditor=InkEditor}),((__unused_webpack_module,exports$1,__w_pdfjs_require__$1)=>{Object.defineProperty(exports$1,`__esModule`,{value:!0}),exports$1.StampEditor=void 0;var _util=__w_pdfjs_require__$1(1),_editor=__w_pdfjs_require__$1(4),_display_utils=__w_pdfjs_require__$1(6),_annotation_layer=__w_pdfjs_require__$1(29);class StampEditor extends _editor.AnnotationEditor{#e=null;#t=null;#n=null;#r=null;#i=null;#a=null;#o=null;#s=null;#c=!1;#l=!1;static _type=`stamp`;constructor(params){super({...params,name:`stampEditor`}),this.#r=params.bitmapUrl,this.#i=params.bitmapFile}static initialize(l10n){_editor.AnnotationEditor.initialize(l10n)}static get supportedTypes(){return(0,_util.shadow)(this,`supportedTypes`,[`apng`,`avif`,`bmp`,`gif`,`jpeg`,`png`,`svg+xml`,`webp`,`x-icon`].map(type=>`image/${type}`))}static get supportedTypesStr(){return(0,_util.shadow)(this,`supportedTypesStr`,this.supportedTypes.join(`,`))}static isHandlingMimeForPasting(mime){return this.supportedTypes.includes(mime)}static paste(item,parent){parent.pasteEditor(_util.AnnotationEditorType.STAMP,{bitmapFile:item.getAsFile()})}#u(data,fromId=!1){if(!data){this.remove();return}this.#e=data.bitmap,fromId||(this.#t=data.id,this.#c=data.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#a&&this.div.focus()}#f(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(data=>this.#u(data,!0)).finally(()=>this.#d());return}if(this.#r){let url=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(url).then(data=>this.#u(data)).finally(()=>this.#d());return}if(this.#i){let file=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(file).then(data=>this.#u(data)).finally(()=>this.#d());return}let input=document.createElement(`input`);input.type=`file`,input.accept=StampEditor.supportedTypesStr,this.#n=new Promise(resolve=>{input.addEventListener(`change`,async()=>{if(!input.files||input.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let data=await this._uiManager.imageManager.getFromFile(input.files[0]);this.#u(data)}resolve()}),input.addEventListener(`cancel`,()=>{this.remove(),resolve()})}).finally(()=>this.#d()),input.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#o?.disconnect(),this.#o=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#f();return}super.rebuild(),this.div!==null&&(this.#t&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#i)}get isResizable(){return!0}render(){if(this.div)return this.div;let baseX,baseY;if(this.width&&(baseX=this.x,baseY=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#f(),this.width){let[parentWidth,parentHeight]=this.parentDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight)}return this.div}#p(){let{div}=this,{width,height}=this.#e,[pageWidth,pageHeight]=this.pageDimensions,MAX_RATIO=.75;if(this.width)width=this.width*pageWidth,height=this.height*pageHeight;else if(width>MAX_RATIO*pageWidth||height>MAX_RATIO*pageHeight){let factor=Math.min(MAX_RATIO*pageWidth/width,MAX_RATIO*pageHeight/height);width*=factor,height*=factor}let[parentWidth,parentHeight]=this.parentDimensions;this.setDims(width*parentWidth/pageWidth,height*parentHeight/pageHeight),this._uiManager.enableWaiting(!1);let canvas=this.#a=document.createElement(`canvas`);div.append(canvas),div.hidden=!1,this.#g(width,height),this.#v(),this.#l||=(this.parent.addUndoableEditor(this),!0),this._uiManager._eventBus.dispatch(`reporttelemetry`,{source:this,details:{type:`editing`,subtype:this.editorType,data:{action:`inserted_image`}}}),this.addAltTextButton()}#m(width,height){let[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth,this.height=height/parentHeight,this.setDims(width,height),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#s!==null&&clearTimeout(this.#s),this.#s=setTimeout(()=>{this.#s=null,this.#g(width,height)},200)}#h(width,height){let{width:bitmapWidth,height:bitmapHeight}=this.#e,newWidth=bitmapWidth,newHeight=bitmapHeight,bitmap=this.#e;for(;newWidth>2*width||newHeight>2*height;){let prevWidth=newWidth,prevHeight=newHeight;newWidth>2*width&&(newWidth=newWidth>=16384?Math.floor(newWidth/2)-1:Math.ceil(newWidth/2)),newHeight>2*height&&(newHeight=newHeight>=16384?Math.floor(newHeight/2)-1:Math.ceil(newHeight/2));let offscreen=new OffscreenCanvas(newWidth,newHeight);offscreen.getContext(`2d`).drawImage(bitmap,0,0,prevWidth,prevHeight,0,0,newWidth,newHeight),bitmap=offscreen.transferToImageBitmap()}return bitmap}#g(width,height){width=Math.ceil(width),height=Math.ceil(height);let canvas=this.#a;if(!canvas||canvas.width===width&&canvas.height===height)return;canvas.width=width,canvas.height=height;let bitmap=this.#c?this.#e:this.#h(width,height),ctx=canvas.getContext(`2d`);ctx.filter=this._uiManager.hcmFilter,ctx.drawImage(bitmap,0,0,bitmap.width,bitmap.height,0,0,width,height)}#_(toUrl){if(toUrl){if(this.#c){let url=this._uiManager.imageManager.getSvgUrl(this.#t);if(url)return url}let canvas=document.createElement(`canvas`);return{width:canvas.width,height:canvas.height}=this.#e,canvas.getContext(`2d`).drawImage(this.#e,0,0),canvas.toDataURL()}if(this.#c){let[pageWidth,pageHeight]=this.pageDimensions,width=Math.round(this.width*pageWidth*_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS),height=Math.round(this.height*pageHeight*_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS),offscreen=new OffscreenCanvas(width,height);return offscreen.getContext(`2d`).drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,width,height),offscreen.transferToImageBitmap()}return structuredClone(this.#e)}#v(){this.#o=new ResizeObserver(entries=>{let rect=entries[0].contentRect;rect.width&&rect.height&&this.#m(rect.width,rect.height)}),this.#o.observe(this.div)}static deserialize(data,parent,uiManager){if(data instanceof _annotation_layer.StampAnnotationElement)return null;let editor=super.deserialize(data,parent,uiManager),{rect,bitmapUrl,bitmapId,isSvg,accessibilityData}=data;bitmapId&&uiManager.imageManager.isValidId(bitmapId)?editor.#t=bitmapId:editor.#r=bitmapUrl,editor.#c=isSvg;let[parentWidth,parentHeight]=editor.pageDimensions;return editor.width=(rect[2]-rect[0])/parentWidth,editor.height=(rect[3]-rect[1])/parentHeight,accessibilityData&&(editor.altTextData=accessibilityData),editor}serialize(isForCopying=!1,context=null){if(this.isEmpty())return null;let serialized={annotationType:_util.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(isForCopying)return serialized.bitmapUrl=this.#_(!0),serialized.accessibilityData=this.altTextData,serialized;let{decorative,altText}=this.altTextData;if(!decorative&&altText&&(serialized.accessibilityData={type:`Figure`,alt:altText}),context===null)return serialized;context.stamps||=new Map;let area=this.#c?(serialized.rect[2]-serialized.rect[0])*(serialized.rect[3]-serialized.rect[1]):null;if(!context.stamps.has(this.#t))context.stamps.set(this.#t,{area,serialized}),serialized.bitmap=this.#_(!1);else if(this.#c){let prevData=context.stamps.get(this.#t);area>prevData.area&&(prevData.area=area,prevData.serialized.bitmap.close(),prevData.serialized.bitmap=this.#_(!1))}return serialized}}exports$1.StampEditor=StampEditor})],__webpack_module_cache__={};function __w_pdfjs_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==void 0)return cachedModule.exports;var module$1=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module$1,module$1.exports,__w_pdfjs_require__),module$1.exports}var __webpack_exports__={};return(()=>{var exports$1=__webpack_exports__;Object.defineProperty(exports$1,`__esModule`,{value:!0}),Object.defineProperty(exports$1,`AbortException`,{enumerable:!0,get:function(){return _util.AbortException}}),Object.defineProperty(exports$1,`AnnotationEditorLayer`,{enumerable:!0,get:function(){return _annotation_editor_layer.AnnotationEditorLayer}}),Object.defineProperty(exports$1,`AnnotationEditorParamsType`,{enumerable:!0,get:function(){return _util.AnnotationEditorParamsType}}),Object.defineProperty(exports$1,`AnnotationEditorType`,{enumerable:!0,get:function(){return _util.AnnotationEditorType}}),Object.defineProperty(exports$1,`AnnotationEditorUIManager`,{enumerable:!0,get:function(){return _tools.AnnotationEditorUIManager}}),Object.defineProperty(exports$1,`AnnotationLayer`,{enumerable:!0,get:function(){return _annotation_layer.AnnotationLayer}}),Object.defineProperty(exports$1,`AnnotationMode`,{enumerable:!0,get:function(){return _util.AnnotationMode}}),Object.defineProperty(exports$1,`CMapCompressionType`,{enumerable:!0,get:function(){return _util.CMapCompressionType}}),Object.defineProperty(exports$1,`DOMSVGFactory`,{enumerable:!0,get:function(){return _display_utils.DOMSVGFactory}}),Object.defineProperty(exports$1,`FeatureTest`,{enumerable:!0,get:function(){return _util.FeatureTest}}),Object.defineProperty(exports$1,`GlobalWorkerOptions`,{enumerable:!0,get:function(){return _worker_options.GlobalWorkerOptions}}),Object.defineProperty(exports$1,`ImageKind`,{enumerable:!0,get:function(){return _util.ImageKind}}),Object.defineProperty(exports$1,`InvalidPDFException`,{enumerable:!0,get:function(){return _util.InvalidPDFException}}),Object.defineProperty(exports$1,`MissingPDFException`,{enumerable:!0,get:function(){return _util.MissingPDFException}}),Object.defineProperty(exports$1,`OPS`,{enumerable:!0,get:function(){return _util.OPS}}),Object.defineProperty(exports$1,`PDFDataRangeTransport`,{enumerable:!0,get:function(){return _api.PDFDataRangeTransport}}),Object.defineProperty(exports$1,`PDFDateString`,{enumerable:!0,get:function(){return _display_utils.PDFDateString}}),Object.defineProperty(exports$1,`PDFWorker`,{enumerable:!0,get:function(){return _api.PDFWorker}}),Object.defineProperty(exports$1,`PasswordResponses`,{enumerable:!0,get:function(){return _util.PasswordResponses}}),Object.defineProperty(exports$1,`PermissionFlag`,{enumerable:!0,get:function(){return _util.PermissionFlag}}),Object.defineProperty(exports$1,`PixelsPerInch`,{enumerable:!0,get:function(){return _display_utils.PixelsPerInch}}),Object.defineProperty(exports$1,`PromiseCapability`,{enumerable:!0,get:function(){return _util.PromiseCapability}}),Object.defineProperty(exports$1,`RenderingCancelledException`,{enumerable:!0,get:function(){return _display_utils.RenderingCancelledException}}),Object.defineProperty(exports$1,`SVGGraphics`,{enumerable:!0,get:function(){return _api.SVGGraphics}}),Object.defineProperty(exports$1,`UnexpectedResponseException`,{enumerable:!0,get:function(){return _util.UnexpectedResponseException}}),Object.defineProperty(exports$1,`Util`,{enumerable:!0,get:function(){return _util.Util}}),Object.defineProperty(exports$1,`VerbosityLevel`,{enumerable:!0,get:function(){return _util.VerbosityLevel}}),Object.defineProperty(exports$1,`XfaLayer`,{enumerable:!0,get:function(){return _xfa_layer.XfaLayer}}),Object.defineProperty(exports$1,`build`,{enumerable:!0,get:function(){return _api.build}}),Object.defineProperty(exports$1,`createValidAbsoluteUrl`,{enumerable:!0,get:function(){return _util.createValidAbsoluteUrl}}),Object.defineProperty(exports$1,`getDocument`,{enumerable:!0,get:function(){return _api.getDocument}}),Object.defineProperty(exports$1,`getFilenameFromUrl`,{enumerable:!0,get:function(){return _display_utils.getFilenameFromUrl}}),Object.defineProperty(exports$1,`getPdfFilenameFromUrl`,{enumerable:!0,get:function(){return _display_utils.getPdfFilenameFromUrl}}),Object.defineProperty(exports$1,`getXfaPageViewport`,{enumerable:!0,get:function(){return _display_utils.getXfaPageViewport}}),Object.defineProperty(exports$1,`isDataScheme`,{enumerable:!0,get:function(){return _display_utils.isDataScheme}}),Object.defineProperty(exports$1,`isPdfFile`,{enumerable:!0,get:function(){return _display_utils.isPdfFile}}),Object.defineProperty(exports$1,`loadScript`,{enumerable:!0,get:function(){return _display_utils.loadScript}}),Object.defineProperty(exports$1,`noContextMenu`,{enumerable:!0,get:function(){return _display_utils.noContextMenu}}),Object.defineProperty(exports$1,`normalizeUnicode`,{enumerable:!0,get:function(){return _util.normalizeUnicode}}),Object.defineProperty(exports$1,`renderTextLayer`,{enumerable:!0,get:function(){return _text_layer.renderTextLayer}}),Object.defineProperty(exports$1,`setLayerDimensions`,{enumerable:!0,get:function(){return _display_utils.setLayerDimensions}}),Object.defineProperty(exports$1,`shadow`,{enumerable:!0,get:function(){return _util.shadow}}),Object.defineProperty(exports$1,`updateTextLayer`,{enumerable:!0,get:function(){return _text_layer.updateTextLayer}}),Object.defineProperty(exports$1,`version`,{enumerable:!0,get:function(){return _api.version}});var _util=__w_pdfjs_require__(1),_api=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(6),_text_layer=__w_pdfjs_require__(26),_annotation_editor_layer=__w_pdfjs_require__(27),_tools=__w_pdfjs_require__(5),_annotation_layer=__w_pdfjs_require__(29),_worker_options=__w_pdfjs_require__(14),_xfa_layer=__w_pdfjs_require__(32);let pdfjsVersion=`3.11.174`,pdfjsBuild=`ce8716743`})(),__webpack_exports__})())})),require_core_min=__commonJSMin((exports=>{var e$3=require_react(),t$3=require_pdf();function n$3(e$4){var t$4=Object.create(null);return e$4&&Object.keys(e$4).forEach((function(n$4){if(n$4!==`default`){var r$4=Object.getOwnPropertyDescriptor(e$4,n$4);Object.defineProperty(t$4,n$4,r$4.get?r$4:{enumerable:!0,get:function(){return e$4[n$4]}})}})),t$4.default=e$4,Object.freeze(t$4)}var r$3,o$2=n$3(e$3),a$3=n$3(t$3);exports.AnnotationType=void 0,(r$3=exports.AnnotationType||={})[r$3.Text=1]=`Text`,r$3[r$3.Link=2]=`Link`,r$3[r$3.FreeText=3]=`FreeText`,r$3[r$3.Line=4]=`Line`,r$3[r$3.Square=5]=`Square`,r$3[r$3.Circle=6]=`Circle`,r$3[r$3.Polygon=7]=`Polygon`,r$3[r$3.Polyline=8]=`Polyline`,r$3[r$3.Highlight=9]=`Highlight`,r$3[r$3.Underline=10]=`Underline`,r$3[r$3.Squiggly=11]=`Squiggly`,r$3[r$3.StrikeOut=12]=`StrikeOut`,r$3[r$3.Stamp=13]=`Stamp`,r$3[r$3.Caret=14]=`Caret`,r$3[r$3.Ink=15]=`Ink`,r$3[r$3.Popup=16]=`Popup`,r$3[r$3.FileAttachment=17]=`FileAttachment`;var i$3=function(e$4,t$4){return i$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e$5,t$5){e$5.__proto__=t$5}||function(e$5,t$5){for(var n$4 in t$5)Object.prototype.hasOwnProperty.call(t$5,n$4)&&(e$5[n$4]=t$5[n$4])},i$3(e$4,t$4)};function c$2(e$4,t$4){if(typeof t$4!=`function`&&t$4!==null)throw TypeError(`Class extends value `+String(t$4)+` is not a constructor or null`);function n$4(){this.constructor=e$4}i$3(e$4,t$4),e$4.prototype=t$4===null?Object.create(t$4):(n$4.prototype=t$4.prototype,new n$4)}var s$2,l$2=function(){return l$2=Object.assign||function(e$4){for(var t$4,n$4=1,r$4=arguments.length;n$4<r$4;n$4++)for(var o$3 in t$4=arguments[n$4])Object.prototype.hasOwnProperty.call(t$4,o$3)&&(e$4[o$3]=t$4[o$3]);return e$4},l$2.apply(this,arguments)};exports.TextDirection=void 0,(s$2=exports.TextDirection||={}).RightToLeft=`RTL`,s$2.LeftToRight=`LTR`;var u$2,p$2=o$2.createContext({currentTheme:`light`,direction:exports.TextDirection.LeftToRight,setCurrentTheme:function(){}}),d$2=function(e$4){var t$4=[];return Object.keys(e$4).forEach((function(n$4){n$4&&e$4[n$4]&&t$4.push(n$4)})),t$4.join(` `)},f$2=typeof window<`u`?o$2.useLayoutEffect:o$2.useEffect,g$2=function(e$4){var t$4=o$2.useRef(null),n$4=e$4.once,r$4=e$4.threshold,a$4=e$4.onVisibilityChanged;return f$2((function(){var e$5=t$4.current;if(e$5){var o$3=new IntersectionObserver((function(t$5){t$5.forEach((function(t$6){var r$5=t$6.isIntersecting,i$4=t$6.intersectionRatio;a$4({isVisible:r$5,ratio:i$4}),r$5&&n$4&&(o$3.unobserve(e$5),o$3.disconnect())}))}),{threshold:r$4||0});return o$3.observe(e$5),function(){o$3.unobserve(e$5),o$3.disconnect()}}}),[]),t$4},v$2=function(e$4){var t$4=e$4.children,n$4=e$4.ignoreDirection,r$4=n$4!==void 0&&n$4,a$4=e$4.size,i$4=a$4===void 0?24:a$4,c$3=o$2.useContext(p$2).direction,s$3=!r$4&&c$3===exports.TextDirection.RightToLeft,l$3=`${i$4||24}px`;return o$2.createElement(`svg`,{"aria-hidden":`true`,className:d$2({"rpv-core__icon":!0,"rpv-core__icon--rtl":s$3}),focusable:`false`,height:l$3,viewBox:`0 0 24 24`,width:l$3},t$4)},h$2=function(){return o$2.createElement(v$2,{size:16},o$2.createElement(`path`,{d:`M23.5,0.499l-16.5,23l-6.5-6.5`}))},m$2=function(e$4){var t$4=e$4.children,n$4=e$4.testId,r$4=e$4.onClick,a$4=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft,i$4=n$4?{"data-testid":n$4}:{};return o$2.createElement(`button`,l$2({className:d$2({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":a$4}),type:`button`,onClick:r$4},i$4),t$4)},x$1=function(e$4){var t$4=e$4.size,n$4=t$4===void 0?`4rem`:t$4,r$4=e$4.testId,a$4=o$2.useState(!1),i$4=a$4[0],c$3=a$4[1],s$3=r$4?{"data-testid":r$4}:{},u$3=g$2({onVisibilityChanged:function(e$5){c$3(e$5.isVisible)}});return o$2.createElement(`div`,l$2({},s$3,{className:d$2({"rpv-core__spinner":!0,"rpv-core__spinner--animating":i$4}),ref:u$3,style:{height:n$4,width:n$4}}))},w=function(e$4){var t$4=e$4.ariaLabel,n$4=t$4===void 0?``:t$4,r$4=e$4.autoFocus,a$4=r$4!==void 0&&r$4,i$4=e$4.placeholder,c$3=i$4===void 0?``:i$4,s$3=e$4.testId,u$3=e$4.type,g$3=u$3===void 0?`text`:u$3,v$3=e$4.value,h$3=v$3===void 0?``:v$3,m$3=e$4.onChange,x$2=e$4.onKeyDown,w$1=x$2===void 0?function(){}:x$2,E$3=o$2.useContext(p$2).direction,b$3=o$2.useRef(),y$2=E$3===exports.TextDirection.RightToLeft,S$2={ref:b$3,"data-testid":``,"aria-label":n$4,className:d$2({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":y$2}),placeholder:c$3,value:h$3,onChange:function(e$5){return m$3(e$5.target.value)},onKeyDown:w$1};return s$3&&(S$2[`data-testid`]=s$3),f$2((function(){if(a$4){var e$5=b$3.current;if(e$5){var t$5=window.scrollX,n$5=window.scrollY;e$5.focus(),window.scrollTo(t$5,n$5)}}}),[]),g$3===`text`?o$2.createElement(`input`,l$2({type:`text`},S$2)):o$2.createElement(`input`,l$2({type:`password`},S$2))};(function(e$4){e$4[e$4.ExitFullScreen=0]=`ExitFullScreen`,e$4[e$4.FullScreenChange=1]=`FullScreenChange`,e$4[e$4.FullScreenElement=2]=`FullScreenElement`,e$4[e$4.FullScreenEnabled=3]=`FullScreenEnabled`,e$4[e$4.RequestFullScreen=4]=`RequestFullScreen`})(u$2||={});var E$2,b$2={ExitFullScreen:`exitFullscreen`,FullScreenChange:`fullscreenchange`,FullScreenElement:`fullscreenElement`,FullScreenEnabled:`fullscreenEnabled`,RequestFullScreen:`requestFullscreen`},y$1={ExitFullScreen:`webkitExitFullscreen`,FullScreenChange:`webkitfullscreenchange`,FullScreenElement:`webkitFullscreenElement`,FullScreenEnabled:`webkitFullscreenEnabled`,RequestFullScreen:`webkitRequestFullscreen`},S$1={ExitFullScreen:`msExitFullscreen`,FullScreenChange:`msFullscreenChange`,FullScreenElement:`msFullscreenElement`,FullScreenEnabled:`msFullscreenEnabled`,RequestFullScreen:`msRequestFullscreen`},_=typeof window<`u`,P$1=_&&(u$2.FullScreenEnabled in document&&b$2||y$1.FullScreenEnabled in document&&y$1||S$1.FullScreenEnabled in document&&S$1)||b$2,R=function(){return _&&P$1.FullScreenEnabled in document&&!0===document[P$1.FullScreenEnabled]},M$1=function(e$4){return _?e$4[P$1.ExitFullScreen]():Promise.resolve({})},k$2=function(){return _?document[P$1.FullScreenElement]:null},C$2=function(e$4,t$4){var n$4=o$2.useRef(),r$4=function(){n$4.current&&clearTimeout(n$4.current)};return o$2.useEffect((function(){return function(){return r$4()}}),[]),o$2.useCallback((function(){var o$3=[...arguments];r$4(),n$4.current=setTimeout((function(){e$4.apply(void 0,o$3)}),t$4)}),[e$4,t$4])},T$1=function(){var e$4=o$2.useRef(!1);return o$2.useEffect((function(){return e$4.current=!0,function(){e$4.current=!1}}),[]),e$4},L$1=function(e$4){var t$4=o$2.useRef(e$4);return o$2.useEffect((function(){t$4.current=e$4}),[e$4]),t$4.current};(function(e$4){e$4.NotRenderedYet=`NotRenderedYet`,e$4.Rendering=`Rendering`,e$4.Rendered=`Rendered`})(E$2||={});var O,F=-9999,D$1=function(e$4){var t$4=e$4.doc,n$4=t$4.numPages,r$4=t$4.loadingTask.docId,a$4=o$2.useMemo((function(){return Array(n$4).fill(null).map((function(e$5,t$5){return{pageIndex:t$5,renderStatus:E$2.NotRenderedYet,visibility:F}}))}),[r$4]),i$4=o$2.useRef({currentRenderingPage:-1,startRange:0,endRange:n$4-1,visibilities:a$4}),c$3=function(e$5,t$5){i$4.current.visibilities[e$5].visibility=t$5};return{getHighestPriorityPage:function(){var e$5=i$4.current.visibilities.slice(i$4.current.startRange,i$4.current.endRange+1).filter((function(e$6){return e$6.visibility>F}));if(!e$5.length)return-1;for(var t$5=e$5[0].pageIndex,r$5=e$5[e$5.length-1].pageIndex,o$3=e$5.length,a$5=0;a$5<o$3;a$5++){if(e$5[a$5].renderStatus===E$2.Rendering)return-1;if(e$5[a$5].renderStatus===E$2.NotRenderedYet)return e$5[a$5].pageIndex}return r$5+1<n$4&&i$4.current.visibilities[r$5+1].renderStatus!==E$2.Rendered?r$5+1:t$5-1>=0&&i$4.current.visibilities[t$5-1].renderStatus!==E$2.Rendered?t$5-1:-1},isInRange:function(e$5){return e$5>=i$4.current.startRange&&e$5<=i$4.current.endRange},markNotRendered:function(){for(var e$5=0;e$5<n$4;e$5++)i$4.current.visibilities[e$5].renderStatus=E$2.NotRenderedYet},markRendered:function(e$5){i$4.current.visibilities[e$5].renderStatus=E$2.Rendered},markRendering:function(e$5){i$4.current.currentRenderingPage!==-1&&i$4.current.currentRenderingPage!==e$5&&i$4.current.visibilities[i$4.current.currentRenderingPage].renderStatus===E$2.Rendering&&(i$4.current.visibilities[i$4.current.currentRenderingPage].renderStatus=E$2.NotRenderedYet),i$4.current.visibilities[e$5].renderStatus=E$2.Rendering,i$4.current.currentRenderingPage=e$5},setOutOfRange:function(e$5){c$3(e$5,F)},setRange:function(e$5,t$5){i$4.current.startRange=e$5,i$4.current.endRange=t$5;for(var r$5=0;r$5<n$4;r$5++)(r$5<e$5||r$5>t$5)&&(i$4.current.visibilities[r$5].visibility=F,i$4.current.visibilities[r$5].renderStatus=E$2.NotRenderedYet)},setVisibility:c$3}},I$2={core:{askingPassword:{requirePasswordToOpen:`This document requires a password to open`,submit:`Submit`},wrongPassword:{tryAgain:`The password is wrong. Please try again`},pageLabel:`Page {{pageIndex}}`}},A=o$2.createContext({l10n:I$2,setL10n:function(){}}),H=0,N$1=function(){return H++},V=function(e$4,t$4,n$4){var r$4=function(e$5){var r$5=t$4.current;if(r$5){var o$3=e$5.target;if(o$3 instanceof Element&&o$3.shadowRoot){var a$4=e$5.composedPath();a$4.length>0&&!r$5.contains(a$4[0])&&n$4()}else r$5.contains(o$3)||n$4()}};o$2.useEffect((function(){if(e$4){var t$5={capture:!0};return document.addEventListener(`click`,r$4,t$5),function(){document.removeEventListener(`click`,r$4,t$5)}}}),[])},z$1=function(e$4){var t$4=function(t$5){t$5.key===`Escape`&&e$4()};o$2.useEffect((function(){return document.addEventListener(`keyup`,t$4),function(){document.removeEventListener(`keyup`,t$4)}}),[])},B=function(e$4){var t$4=e$4.ariaControlsSuffix,n$4=e$4.children,r$4=e$4.closeOnClickOutside,a$4=e$4.closeOnEscape,i$4=e$4.onToggle,c$3=o$2.useRef(),s$3=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft;return o$2.useEffect((function(){var e$5=window.getComputedStyle(document.body).overflow;return document.body.style.overflow=`hidden`,function(){document.body.style.overflow=e$5}}),[]),z$1((function(){c$3.current&&a$4&&i$4()})),V(r$4,c$3,i$4),f$2((function(){var e$5=c$3.current;if(e$5){var t$5=.75*document.body.clientHeight;e$5.getBoundingClientRect().height>=t$5&&(e$5.style.overflow=`auto`,e$5.style.maxHeight=`${t$5}px`)}}),[]),o$2.createElement(`div`,{"aria-modal":`true`,className:d$2({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":s$3}),id:`rpv-core__modal-body-${t$4}`,ref:c$3,role:`dialog`,tabIndex:-1},n$4)},W=function(e$4){var t$4=e$4.children;return o$2.createElement(`div`,{className:`rpv-core__modal-overlay`},t$4)};exports.ToggleStatus=void 0,(O=exports.ToggleStatus||={}).Close=`Close`,O.Open=`Open`,O.Toggle=`Toggle`;var j$1,q=function(e$4){var t$4=o$2.useState(e$4),n$4=t$4[0],r$4=t$4[1];return{opened:n$4,toggle:function(e$5){switch(e$5){case exports.ToggleStatus.Close:r$4(!1);break;case exports.ToggleStatus.Open:r$4(!0);break;case exports.ToggleStatus.Toggle:default:r$4((function(e$6){return!e$6}))}}}},U=function(e$4){var t$4=e$4.content,n$4=e$4.isOpened,r$4=n$4!==void 0&&n$4,a$4=e$4.target,i$4=q(r$4),c$3=i$4.opened,s$3=i$4.toggle;return o$2.createElement(o$2.Fragment,null,a$4&&a$4(s$3,c$3),c$3&&t$4(s$3))};exports.Position=void 0,(j$1=exports.Position||={}).TopLeft=`TOP_LEFT`,j$1.TopCenter=`TOP_CENTER`,j$1.TopRight=`TOP_RIGHT`,j$1.RightTop=`RIGHT_TOP`,j$1.RightCenter=`RIGHT_CENTER`,j$1.RightBottom=`RIGHT_BOTTOM`,j$1.BottomLeft=`BOTTOM_LEFT`,j$1.BottomCenter=`BOTTOM_CENTER`,j$1.BottomRight=`BOTTOM_RIGHT`,j$1.LeftTop=`LEFT_TOP`,j$1.LeftCenter=`LEFT_CENTER`,j$1.LeftBottom=`LEFT_BOTTOM`;var Z$1,J,G,Y,K,X$1,Q,$,ee=function(e$4,t$4,n$4,r$4,o$3){f$2((function(){var a$4=t$4.current,i$4=e$4.current,c$3=n$4.current;if(i$4&&a$4&&c$3){var s$3=c$3.getBoundingClientRect(),l$3=function(e$5,t$5,n$5,r$5){var o$4=t$5.getBoundingClientRect(),a$5=e$5.getBoundingClientRect(),i$5=a$5.height,c$4=a$5.width,s$4=0,l$4=0;switch(n$5){case exports.Position.TopLeft:s$4=o$4.top-i$5,l$4=o$4.left;break;case exports.Position.TopCenter:s$4=o$4.top-i$5,l$4=o$4.left+o$4.width/2-c$4/2;break;case exports.Position.TopRight:s$4=o$4.top-i$5,l$4=o$4.left+o$4.width-c$4;break;case exports.Position.RightTop:s$4=o$4.top,l$4=o$4.left+o$4.width;break;case exports.Position.RightCenter:s$4=o$4.top+o$4.height/2-i$5/2,l$4=o$4.left+o$4.width;break;case exports.Position.RightBottom:s$4=o$4.top+o$4.height-i$5,l$4=o$4.left+o$4.width;break;case exports.Position.BottomLeft:s$4=o$4.top+o$4.height,l$4=o$4.left;break;case exports.Position.BottomCenter:s$4=o$4.top+o$4.height,l$4=o$4.left+o$4.width/2-c$4/2;break;case exports.Position.BottomRight:s$4=o$4.top+o$4.height,l$4=o$4.left+o$4.width-c$4;break;case exports.Position.LeftTop:s$4=o$4.top,l$4=o$4.left-c$4;break;case exports.Position.LeftCenter:s$4=o$4.top+o$4.height/2-i$5/2,l$4=o$4.left-c$4;break;case exports.Position.LeftBottom:s$4=o$4.top+o$4.height-i$5,l$4=o$4.left-c$4}return{left:l$4+(r$5.left||0),top:s$4+(r$5.top||0)}}(i$4,a$4,r$4,o$3),u$3=l$3.top,p$3=l$3.left;i$4.style.top=`${u$3-s$3.top}px`,i$4.style.left=`${p$3-s$3.left}px`}}),[])},te=function(e$4){var t$4,n$4=e$4.customClassName,r$4=e$4.position;return o$2.createElement(`div`,{className:d$2((t$4={"rpv-core__arrow":!0,"rpv-core__arrow--tl":r$4===exports.Position.TopLeft,"rpv-core__arrow--tc":r$4===exports.Position.TopCenter,"rpv-core__arrow--tr":r$4===exports.Position.TopRight,"rpv-core__arrow--rt":r$4===exports.Position.RightTop,"rpv-core__arrow--rc":r$4===exports.Position.RightCenter,"rpv-core__arrow--rb":r$4===exports.Position.RightBottom,"rpv-core__arrow--bl":r$4===exports.Position.BottomLeft,"rpv-core__arrow--bc":r$4===exports.Position.BottomCenter,"rpv-core__arrow--br":r$4===exports.Position.BottomRight,"rpv-core__arrow--lt":r$4===exports.Position.LeftTop,"rpv-core__arrow--lc":r$4===exports.Position.LeftCenter,"rpv-core__arrow--lb":r$4===exports.Position.LeftBottom},t$4[`${n$4}`]=n$4!==``,t$4))})},ne=function(e$4){var t$4=e$4.ariaControlsSuffix,n$4=e$4.children,r$4=e$4.closeOnClickOutside,a$4=e$4.offset,i$4=e$4.position,c$3=e$4.targetRef,s$3=e$4.onClose,l$3=o$2.useRef(),u$3=o$2.useRef(),g$3=o$2.useRef(),v$3=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft;V(r$4,l$3,s$3),ee(l$3,c$3,g$3,i$4,a$4),f$2((function(){var e$5=u$3.current;if(e$5){var t$5=.75*document.body.clientHeight;e$5.getBoundingClientRect().height>=t$5&&(e$5.style.overflow=`auto`,e$5.style.maxHeight=`${t$5}px`)}}),[]);var h$3=`rpv-core__popover-body-inner-${t$4}`;return o$2.createElement(o$2.Fragment,null,o$2.createElement(`div`,{ref:g$3,style:{left:0,position:`absolute`,top:0}}),o$2.createElement(`div`,{"aria-describedby":h$3,className:d$2({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":v$3}),id:`rpv-core__popover-body-${t$4}`,ref:l$3,role:`dialog`,tabIndex:-1},o$2.createElement(te,{customClassName:`rpv-core__popover-body-arrow`,position:i$4}),o$2.createElement(`div`,{id:h$3,ref:u$3},n$4)))},re=function(e$4){var t$4=e$4.closeOnEscape,n$4=e$4.onClose,r$4=o$2.useRef();return z$1((function(){r$4.current&&t$4&&n$4()})),o$2.createElement(`div`,{className:`rpv-core__popover-overlay`,ref:r$4})},oe=function(e$4){var t$4=e$4.ariaControlsSuffix,n$4=e$4.children,r$4=e$4.contentRef,a$4=e$4.offset,i$4=e$4.position,c$3=e$4.targetRef,s$3=o$2.useRef(),l$3=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft;return ee(r$4,c$3,s$3,i$4,a$4),o$2.createElement(o$2.Fragment,null,o$2.createElement(`div`,{ref:s$3,style:{left:0,position:`absolute`,top:0}}),o$2.createElement(`div`,{className:d$2({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":l$3}),id:`rpv-core__tooltip-body-${t$4}`,ref:r$4,role:`tooltip`},o$2.createElement(te,{customClassName:`rpv-core__tooltip-body-arrow`,position:i$4}),o$2.createElement(`div`,{className:`rpv-core__tooltip-body-content`},n$4)))};exports.FullScreenMode=void 0,(Z$1=exports.FullScreenMode||={}).Normal=`Normal`,Z$1.Entering=`Entering`,Z$1.Entered=`Entered`,Z$1.EnteredCompletely=`EnteredCompletely`,Z$1.Exitting=`Exitting`,Z$1.Exited=`Exited`,exports.LayerRenderStatus=void 0,(J=exports.LayerRenderStatus||={})[J.PreRender=0]=`PreRender`,J[J.DidRender=1]=`DidRender`,exports.PageMode=void 0,(G=exports.PageMode||={}).Attachments=`UseAttachments`,G.Bookmarks=`UseOutlines`,G.ContentGroup=`UseOC`,G.Default=`UserNone`,G.FullScreen=`FullScreen`,G.Thumbnails=`UseThumbs`,exports.PasswordStatus=void 0,(Y=exports.PasswordStatus||={}).RequiredPassword=`RequiredPassword`,Y.WrongPassword=`WrongPassword`,exports.RotateDirection=void 0,(K=exports.RotateDirection||={}).Backward=`Backward`,K.Forward=`Forward`,exports.ScrollMode=void 0,(X$1=exports.ScrollMode||={}).Page=`Page`,X$1.Horizontal=`Horizontal`,X$1.Vertical=`Vertical`,X$1.Wrapped=`Wrapped`,exports.SpecialZoomLevel=void 0,(Q=exports.SpecialZoomLevel||={}).ActualSize=`ActualSize`,Q.PageFit=`PageFit`,Q.PageWidth=`PageWidth`,exports.ViewMode=void 0,($=exports.ViewMode||={}).DualPage=`DualPage`,$.DualPageWithCover=`DualPageWithCover`,$.SinglePage=`SinglePage`;var ae,ie=function(e$4,t$4){return e$4.reduce((function(e$5,n$4,r$4){return r$4%t$4?e$5[e$5.length-1].push(n$4):e$5.push([n$4]),e$5}),[])},ce=function(e$4,t$4){switch(t$4[1].name){case`XYZ`:return{bottomOffset:function(e$5,n$4){return t$4[3]===null?n$4:t$4[3]},leftOffset:function(e$5,n$4){return t$4[2]===null?0:t$4[2]},pageIndex:e$4,scaleTo:t$4[4]};case`Fit`:case`FitB`:return{bottomOffset:0,leftOffset:0,pageIndex:e$4,scaleTo:exports.SpecialZoomLevel.PageFit};case`FitH`:case`FitBH`:return{bottomOffset:t$4[2],leftOffset:0,pageIndex:e$4,scaleTo:exports.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:e$4,scaleTo:1}}},se=new Map,le=new Map,ue=function(e$4,t$4){return`${e$4.loadingTask.docId}___${t$4.num}R${t$4.gen===0?``:t$4.gen}`},pe=function(e$4,t$4,n$4){se.set(ue(e$4,t$4),n$4)},de=function(e$4,t$4){if(!e$4)return Promise.reject(`The document is not loaded yet`);var n$4=`${e$4.loadingTask.docId}___${t$4}`,r$4=le.get(n$4);return r$4?Promise.resolve(r$4):new Promise((function(r$5,o$3){e$4.getPage(t$4+1).then((function(o$4){le.set(n$4,o$4),o$4.ref&&pe(e$4,o$4.ref,t$4),r$5(o$4)}))}))},fe=function(e$4,t$4){return new Promise((function(n$4){new Promise((function(n$5){typeof t$4==`string`?e$4.getDestination(t$4).then((function(e$5){n$5(e$5)})):n$5(t$4)})).then((function(r$4){if(typeof r$4[0]==`object`&&r$4[0]!==null){var o$3=r$4[0],a$4=function(e$5,t$5){var n$5=ue(e$5,t$5);return se.has(n$5)?se.get(n$5):null}(e$4,o$3);a$4===null?e$4.getPageIndex(o$3).then((function(r$5){pe(e$4,o$3,r$5),fe(e$4,t$4).then((function(e$5){return n$4(e$5)}))})):n$4(ce(a$4,r$4))}else n$4(ce(r$4[0],r$4))}))}))};(function(e$4){e$4[e$4.Solid=1]=`Solid`,e$4[e$4.Dashed=2]=`Dashed`,e$4[e$4.Beveled=3]=`Beveled`,e$4[e$4.Inset=4]=`Inset`,e$4[e$4.Underline=5]=`Underline`})(ae||={});var ge,ve=RegExp(`^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?`),he=function(e$4,t$4,n$4,r$4){var o$3=parseInt(e$4,10);return o$3>=t$4&&o$3<=n$4?o$3:r$4},me=function(e$4){return e$4.contentsObj?e$4.contentsObj.str:e$4.contents||``},xe=function(e$4){return e$4.titleObj?e$4.titleObj.str:e$4.title||``},we=function(e$4){var t$4=e$4.annotation,n$4=o$2.useContext(p$2).direction,r$4=xe(t$4),a$4=me(t$4),i$4=n$4===exports.TextDirection.RightToLeft,c$3=o$2.useRef(),s$3=``;if(t$4.modificationDate){var l$3=function(e$5){var t$5=ve.exec(e$5);if(!t$5)return null;var n$5=parseInt(t$5[1],10),r$5=he(t$5[2],1,12,1)-1,o$3=he(t$5[3],1,31,1),a$5=he(t$5[4],0,23,0),i$5=he(t$5[5],0,59,0),c$4=he(t$5[6],0,59,0),s$4=t$5[7]||`Z`,l$4=he(t$5[8],0,23,0),u$3=he(t$5[9],0,59,0);switch(s$4){case`-`:a$5+=l$4,i$5+=u$3;break;case`+`:a$5-=l$4,i$5-=u$3}return new Date(Date.UTC(n$5,r$5,o$3,a$5,i$5,c$4))}(t$4.modificationDate);s$3=l$3?`${l$3.toLocaleDateString()}, ${l$3.toLocaleTimeString()}`:``}return o$2.useLayoutEffect((function(){if(c$3.current){var e$5=document.querySelector(`[data-annotation-id="${t$4.id}"]`);if(e$5){var n$5=e$5;return n$5.style.zIndex+=1,function(){n$5.style.zIndex=`${parseInt(n$5.style.zIndex,10)-1}`}}}}),[]),o$2.createElement(`div`,{ref:c$3,className:d$2({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":i$4}),style:{top:t$4.annotationType===exports.AnnotationType.Popup?``:`100%`}},r$4&&o$2.createElement(o$2.Fragment,null,o$2.createElement(`div`,{className:d$2({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!i$4,"rpv-core__annotation-popup-title--rtl":i$4})},r$4),o$2.createElement(`div`,{className:`rpv-core__annotation-popup-date`},s$3)),a$4&&o$2.createElement(`div`,{className:`rpv-core__annotation-popup-content`},a$4.split(`
`).map((function(e$5,t$5){return o$2.createElement(o$2.Fragment,{key:t$5},e$5,o$2.createElement(`br`,null))}))))};(function(e$4){e$4.Click=`Click`,e$4.Hover=`Hover`})(ge||={});var Ee,be=function(e$4){var t$4,n$4=e$4.annotation,r$4=e$4.children,a$4=e$4.ignoreBorder,i$4=e$4.hasPopup,c$3=e$4.isRenderable,s$3=e$4.page,l$3=e$4.viewport,u$3=n$4.rect,p$3=function(){var e$5=q(!1),t$5=e$5.opened,n$5=e$5.toggle,r$5=o$2.useState(ge.Hover),a$5=r$5[0],i$5=r$5[1];return{opened:t$5,closeOnHover:function(){a$5===ge.Hover&&n$5(exports.ToggleStatus.Close)},openOnHover:function(){a$5===ge.Hover&&n$5(exports.ToggleStatus.Open)},toggleOnClick:function(){switch(a$5){case ge.Click:t$5&&i$5(ge.Hover),n$5(exports.ToggleStatus.Toggle);break;case ge.Hover:i$5(ge.Click),n$5(exports.ToggleStatus.Open)}}}}(),d$3=p$3.closeOnHover,f$3=p$3.opened,g$3=p$3.openOnHover,v$3=p$3.toggleOnClick,h$3=(t$4=[u$3[0],s$3.view[3]+s$3.view[1]-u$3[1],u$3[2],s$3.view[3]+s$3.view[1]-u$3[3]],[Math.min(t$4[0],t$4[2]),Math.min(t$4[1],t$4[3]),Math.max(t$4[0],t$4[2]),Math.max(t$4[1],t$4[3])]),m$3=u$3[2]-u$3[0],x$2=u$3[3]-u$3[1],w$1={borderColor:``,borderRadius:``,borderStyle:``,borderWidth:``};if(!a$4&&n$4.borderStyle.width>0){switch(n$4.borderStyle.style){case ae.Dashed:w$1.borderStyle=`dashed`;break;case ae.Solid:w$1.borderStyle=`solid`;break;case ae.Underline:w$1=Object.assign({borderBottomStyle:`solid`},w$1);case ae.Beveled:case ae.Inset:}var E$3=n$4.borderStyle.width;w$1.borderWidth=`${E$3}px`,n$4.borderStyle.style!==ae.Underline&&(m$3-=2*E$3,x$2-=2*E$3);var b$3=n$4.borderStyle,y$2=b$3.horizontalCornerRadius,S$2=b$3.verticalCornerRadius;(y$2>0||S$2>0)&&(w$1.borderRadius=`${y$2}px / ${S$2}px`),n$4.color?w$1.borderColor=`rgb(${0|n$4.color[0]}, ${0|n$4.color[1]}, ${0|n$4.color[2]})`:w$1.borderWidth=`0`}return o$2.createElement(o$2.Fragment,null,c$3&&r$4({popup:{opened:f$3,closeOnHover:d$3,openOnHover:g$3,toggleOnClick:v$3},slot:{attrs:{style:Object.assign({height:`${x$2}px`,left:`${h$3[0]}px`,top:`${h$3[1]}px`,transform:`matrix(${l$3.transform.join(`,`)})`,transformOrigin:`-${h$3[0]}px -${h$3[1]}px`,width:`${m$3}px`},w$1)},children:o$2.createElement(o$2.Fragment,null,i$4&&f$3&&o$2.createElement(we,{annotation:n$4}))}}))},ye=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3);return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--caret`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),e$5.slot.children)}))},Se=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3),u$3=t$4.rect,p$3=u$3[2]-u$3[0],d$3=u$3[3]-u$3[1],f$3=t$4.borderStyle.width;return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--circle`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),o$2.createElement(`svg`,{height:`${d$3}px`,preserveAspectRatio:`none`,version:`1.1`,viewBox:`0 0 ${p$3} ${d$3}`,width:`${p$3}px`},o$2.createElement(`circle`,{cy:d$3/2,fill:`none`,rx:p$3/2-f$3/2,ry:d$3/2-f$3/2,stroke:`transparent`,strokeWidth:f$3||1})),e$5.slot.children)}))},_e=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=xe(t$4),i$4=me(t$4),c$3=!(!1!==t$4.hasPopup||!a$4&&!i$4),s$3=function(){var e$5,n$5,r$5,o$3,a$5=t$4.file;a$5&&(e$5=a$5.filename,n$5=a$5.content,r$5=typeof n$5==`string`?``:URL.createObjectURL(new Blob([n$5],{type:``})),(o$3=document.createElement(`a`)).style.display=`none`,o$3.href=r$5||e$5,o$3.setAttribute(`download`,function(e$6){var t$5=e$6.split(`/`).pop();return t$5?t$5.split(`#`)[0].split(`?`)[0]:e$6}(e$5)),document.body.appendChild(o$3),o$3.click(),document.body.removeChild(o$3),r$5&&URL.revokeObjectURL(r$5))};return o$2.createElement(be,{annotation:t$4,hasPopup:c$3,ignoreBorder:!0,isRenderable:!0,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--file-attachment`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onDoubleClick:s$3,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),e$5.slot.children)}))},Pe=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3);return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--free-text`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),e$5.slot.children)}))},Re=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=xe(t$4),i$4=me(t$4),c$3=!(!a$4&&!i$4),s$3=!t$4.parentType||[`Circle`,`Ink`,`Line`,`Polygon`,`PolyLine`,`Square`].indexOf(t$4.parentType)!==-1;return f$2((function(){if(t$4.parentId){var e$5=document.querySelector(`[data-annotation-id="${t$4.parentId}"]`),n$5=document.querySelector(`[data-annotation-id="${t$4.id}"]`);if(e$5&&n$5){var r$5=parseFloat(e$5.style.left),o$3=parseFloat(e$5.style.top)+parseFloat(e$5.style.height);n$5.style.left=`${r$5}px`,n$5.style.top=`${o$3}px`,n$5.style.transformOrigin=`-${r$5}px -${o$3}px`}}}),[]),o$2.createElement(be,{annotation:t$4,hasPopup:s$3,ignoreBorder:!1,isRenderable:c$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--popup`,"data-annotation-id":t$4.id}),o$2.createElement(we,{annotation:t$4}))}))},Me=function(e$4){var t$4=e$4.annotation,n$4=e$4.childAnnotation,r$4=e$4.page,a$4=e$4.viewport,i$4=!1===t$4.hasPopup,c$3=xe(t$4),s$3=me(t$4),u$3=!!(t$4.hasPopup||c$3||s$3);if(t$4.quadPoints&&t$4.quadPoints.length>0){var p$3=t$4.quadPoints.map((function(e$5){return Object.assign({},t$4,{rect:[e$5[2].x,e$5[2].y,e$5[1].x,e$5[1].y],quadPoints:[]})}));return o$2.createElement(o$2.Fragment,null,p$3.map((function(e$5,t$5){return o$2.createElement(Me,{key:t$5,annotation:e$5,childAnnotation:n$4,page:r$4,viewport:a$4})})))}return o$2.createElement(be,{annotation:t$4,hasPopup:i$4,ignoreBorder:!0,isRenderable:u$3,page:r$4,viewport:a$4},(function(e$5){return o$2.createElement(o$2.Fragment,null,o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--highlight`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),e$5.slot.children),n$4&&n$4.annotationType===exports.AnnotationType.Popup&&e$5.popup.opened&&o$2.createElement(Re,{annotation:n$4,page:r$4,viewport:a$4}))}))},ke=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3),u$3=t$4.rect,p$3=u$3[2]-u$3[0],d$3=u$3[3]-u$3[1],f$3=t$4.borderStyle.width;return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--ink`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),t$4.inkLists&&t$4.inkLists.length&&o$2.createElement(`svg`,{height:`${d$3}px`,preserveAspectRatio:`none`,version:`1.1`,viewBox:`0 0 ${p$3} ${d$3}`,width:`${p$3}px`},t$4.inkLists.map((function(e$6,t$5){return o$2.createElement(`polyline`,{key:t$5,fill:`none`,stroke:`transparent`,strokeWidth:f$3||1,points:e$6.map((function(e$7){return`${e$7.x-u$3[0]},${u$3[3]-e$7.y}`})).join(` `)})}))),e$5.slot.children)}))},Ce=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3),u$3=t$4.rect,p$3=u$3[2]-u$3[0],d$3=u$3[3]-u$3[1],f$3=t$4.borderStyle.width;return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--line`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),o$2.createElement(`svg`,{height:`${d$3}px`,preserveAspectRatio:`none`,version:`1.1`,viewBox:`0 0 ${p$3} ${d$3}`,width:`${p$3}px`},o$2.createElement(`line`,{stroke:`transparent`,strokeWidth:f$3||1,x1:u$3[2]-t$4.lineCoordinates[0],x2:u$3[2]-t$4.lineCoordinates[2],y1:u$3[3]-t$4.lineCoordinates[1],y2:u$3[3]-t$4.lineCoordinates[3]})),e$5.slot.children)}))},Te=/^([^\w]*)(javascript|data|vbscript)/im,Le=/&#(\w+)(^\w|;)?/g,Oe=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Fe=/^([^:]+):/gm,De=function(e$4,t$4){t$4===void 0&&(t$4=`about:blank`);var n$4,r$4=(n$4=e$4||``,n$4.replace(Le,(function(e$5,t$5){return String.fromCharCode(t$5)}))).replace(Oe,``).trim();if(!r$4)return t$4;var o$3=r$4[0];if(o$3===`.`||o$3===`/`)return r$4;var a$4=r$4.match(Fe);if(!a$4)return r$4;var i$4=a$4[0];return Te.test(i$4)?t$4:r$4},Ie=function(e$4){var t$4,n$4=e$4.annotation,r$4=e$4.annotationContainerRef,a$4=e$4.doc,i$4=e$4.outlines,c$3=e$4.page,s$3=e$4.pageIndex,u$3=e$4.scale,p$3=e$4.viewport,d$3=e$4.onExecuteNamedAction,f$3=e$4.onJumpFromLinkAnnotation,g$3=e$4.onJumpToDest,v$3=o$2.useRef(),h$3=i$4&&i$4.length&&n$4.dest&&typeof n$4.dest==`string`?i$4.find((function(e$5){return e$5.dest===n$4.dest}))?.title:``,m$3=!!(n$4.url||n$4.dest||n$4.action||n$4.unsafeUrl),x$2={};if(n$4.url||n$4.unsafeUrl){var w$1=De(n$4.url||n$4.unsafeUrl,``);w$1?x$2={"data-target":`external`,href:w$1,rel:`noopener noreferrer nofollow`,target:n$4.newWindow?`_blank`:``,title:w$1}:m$3=!1}else x$2={href:``,"data-annotation-link":n$4.id,onClick:function(e$5){e$5.preventDefault(),n$4.action?d$3(n$4.action):fe(a$4,n$4.dest).then((function(e$6){var t$5=v$3.current,n$5=r$4.current;if(t$5&&n$5){var o$3=t$5.getBoundingClientRect();n$5.style.setProperty(`height`,`100%`),n$5.style.setProperty(`width`,`100%`);var a$5=n$5.getBoundingClientRect();n$5.style.removeProperty(`height`),n$5.style.removeProperty(`width`);var i$5=(o$3.left-a$5.left)/u$3;f$3({bottomOffset:(a$5.bottom-o$3.bottom+o$3.height)/u$3,label:h$3,leftOffset:i$5,pageIndex:s$3})}g$3(e$6)}))}};return h$3&&(x$2=Object.assign({},x$2,{title:h$3,"aria-label":h$3})),o$2.createElement(be,{annotation:n$4,hasPopup:!1,ignoreBorder:!1,isRenderable:m$3,page:c$3,viewport:p$3},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--link`,"data-annotation-id":n$4.id,"data-testid":`core__annotation--link-${n$4.id}`}),o$2.createElement(`a`,l$2({ref:v$3},x$2)))}))},Ae=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3),u$3=t$4.rect,p$3=u$3[2]-u$3[0],d$3=u$3[3]-u$3[1],f$3=t$4.borderStyle.width;return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--polygon`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),t$4.vertices&&t$4.vertices.length&&o$2.createElement(`svg`,{height:`${d$3}px`,preserveAspectRatio:`none`,version:`1.1`,viewBox:`0 0 ${p$3} ${d$3}`,width:`${p$3}px`},o$2.createElement(`polygon`,{fill:`none`,stroke:`transparent`,strokeWidth:f$3||1,points:t$4.vertices.map((function(e$6){return`${e$6.x-u$3[0]},${u$3[3]-e$6.y}`})).join(` `)})),e$5.slot.children)}))},He=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3),u$3=t$4.rect,p$3=u$3[2]-u$3[0],d$3=u$3[3]-u$3[1],f$3=t$4.borderStyle.width;return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--polyline`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),t$4.vertices&&t$4.vertices.length&&o$2.createElement(`svg`,{height:`${d$3}px`,preserveAspectRatio:`none`,version:`1.1`,viewBox:`0 0 ${p$3} ${d$3}`,width:`${p$3}px`},o$2.createElement(`polyline`,{fill:`none`,stroke:`transparent`,strokeWidth:f$3||1,points:t$4.vertices.map((function(e$6){return`${e$6.x-u$3[0]},${u$3[3]-e$6.y}`})).join(` `)})),e$5.slot.children)}))},Ne=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3),u$3=t$4.rect,p$3=u$3[2]-u$3[0],d$3=u$3[3]-u$3[1],f$3=t$4.borderStyle.width;return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--square`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),o$2.createElement(`svg`,{height:`${d$3}px`,preserveAspectRatio:`none`,version:`1.1`,viewBox:`0 0 ${p$3} ${d$3}`,width:`${p$3}px`},o$2.createElement(`rect`,{height:d$3-f$3,fill:`none`,stroke:`transparent`,strokeWidth:f$3||1,x:f$3/2,y:f$3/2,width:p$3-f$3})),e$5.slot.children)}))},Ve=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3);return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--squiggly`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),e$5.slot.children)}))},ze=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3);return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--stamp`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),e$5.slot.children)}))},Be=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3);return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--strike-out`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),e$5.slot.children)}))},We=function(){return o$2.createElement(v$2,{size:16},o$2.createElement(`path`,{d:`M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z`}),o$2.createElement(`path`,{d:`M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25`}),o$2.createElement(`path`,{d:`M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75`}),o$2.createElement(`path`,{d:`M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25`}))},je=function(){return o$2.createElement(v$2,{size:16},o$2.createElement(`path`,{d:`M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z`}),o$2.createElement(`path`,{d:`M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z`}),o$2.createElement(`path`,{d:`M21.423 5.406L17.415 9.414`}),o$2.createElement(`path`,{d:`M14.587 6.585L18.607 2.565`}),o$2.createElement(`path`,{d:`M5.405 21.424L9.413 17.416`}),o$2.createElement(`path`,{d:`M6.585 14.588L2.577 18.596`}),o$2.createElement(`path`,{d:`M18.602 21.419L14.595 17.412`}),o$2.createElement(`path`,{d:`M17.419 14.58L21.428 18.589`}),o$2.createElement(`path`,{d:`M2.582 5.399L6.588 9.406`}),o$2.createElement(`path`,{d:`M9.421 6.581L5.412 2.572`}))},qe=function(){return o$2.createElement(v$2,{size:16},o$2.createElement(`path`,{d:`M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z`}),o$2.createElement(`path`,{d:`M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z`}))},Ue=function(){return o$2.createElement(v$2,{size:16},o$2.createElement(`path`,{d:`M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z`}),o$2.createElement(`path`,{d:`M6 4.5L6 0.5`}),o$2.createElement(`path`,{d:`M18 4.5L18 0.5`}),o$2.createElement(`path`,{d:`M10 4.5L10 0.5`}),o$2.createElement(`path`,{d:`M14 4.5L14 0.5`}))},Ze=function(){return o$2.createElement(v$2,{size:16},o$2.createElement(`path`,{d:`M17.5 0.498L17.5 23.498`}),o$2.createElement(`path`,{d:`M10.5 0.498L10.5 23.498`}),o$2.createElement(`path`,{d:`M23.5.5H6.5a6,6,0,0,0,0,12h4`}))},Je=function(){return o$2.createElement(v$2,{size:16},o$2.createElement(`path`,{d:`M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z`}))},Ge=function(e$4){var t$4=e$4.annotation,n$4=e$4.childAnnotation,r$4=e$4.page,a$4=e$4.viewport,i$4=!1===t$4.hasPopup,c$3=xe(t$4),s$3=me(t$4),u$3=!!(t$4.hasPopup||c$3||s$3),p$3=t$4.name?t$4.name.toLowerCase():``;return o$2.createElement(be,{annotation:t$4,hasPopup:i$4,ignoreBorder:!1,isRenderable:u$3,page:r$4,viewport:a$4},(function(e$5){return o$2.createElement(o$2.Fragment,null,o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--text`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),p$3&&o$2.createElement(`div`,{className:`rpv-core__annotation-text-icon`},p$3===`check`&&o$2.createElement(h$2,null),p$3===`comment`&&o$2.createElement(We,null),p$3===`help`&&o$2.createElement(je,null),p$3===`insert`&&o$2.createElement(Je,null),p$3===`key`&&o$2.createElement(qe,null),p$3===`note`&&o$2.createElement(Ue,null),(p$3===`newparagraph`||p$3===`paragraph`)&&o$2.createElement(Ze,null)),e$5.slot.children),n$4&&n$4.annotationType===exports.AnnotationType.Popup&&e$5.popup.opened&&o$2.createElement(Re,{annotation:n$4,page:r$4,viewport:a$4}))}))},Ye=function(e$4){var t$4=e$4.annotation,n$4=e$4.page,r$4=e$4.viewport,a$4=!1===t$4.hasPopup,i$4=xe(t$4),c$3=me(t$4),s$3=!!(t$4.hasPopup||i$4||c$3);return o$2.createElement(be,{annotation:t$4,hasPopup:a$4,ignoreBorder:!0,isRenderable:s$3,page:n$4,viewport:r$4},(function(e$5){return o$2.createElement(`div`,l$2({},e$5.slot.attrs,{className:`rpv-core__annotation rpv-core__annotation--underline`,"data-annotation-id":t$4.id,onClick:e$5.popup.toggleOnClick,onMouseEnter:e$5.popup.openOnHover,onMouseLeave:e$5.popup.closeOnHover}),e$5.slot.children)}))},Ke=function(e$4){var t$4=e$4.annotations,n$4=e$4.doc,r$4=e$4.outlines,a$4=e$4.page,i$4=e$4.pageIndex,c$3=e$4.plugins,s$3=e$4.rotation,l$3=e$4.scale,u$3=e$4.onExecuteNamedAction,p$3=e$4.onJumpFromLinkAnnotation,d$3=e$4.onJumpToDest,g$3=o$2.useRef(),v$3=a$4.getViewport({rotation:s$3,scale:l$3}).clone({dontFlip:!0}),h$3=t$4.filter((function(e$5){return!e$5.parentId}));return f$2((function(){var e$5=g$3.current;e$5&&c$3.forEach((function(t$5){t$5.onAnnotationLayerRender&&t$5.onAnnotationLayerRender({annotations:h$3,container:e$5,pageIndex:i$4,rotation:s$3,scale:l$3})}))}),[]),o$2.createElement(`div`,{ref:g$3,className:`rpv-core__annotation-layer`,"data-testid":`core__annotation-layer-${i$4}`},h$3.map((function(e$5){var c$4=t$4.find((function(t$5){return t$5.parentId===e$5.id}));switch(e$5.annotationType){case exports.AnnotationType.Caret:return o$2.createElement(ye,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.Circle:return o$2.createElement(Se,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.FileAttachment:return o$2.createElement(_e,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.FreeText:return o$2.createElement(Pe,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.Highlight:return o$2.createElement(Me,{key:e$5.id,annotation:e$5,childAnnotation:c$4,page:a$4,viewport:v$3});case exports.AnnotationType.Ink:return o$2.createElement(ke,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.Line:return o$2.createElement(Ce,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.Link:return o$2.createElement(Ie,{key:e$5.id,annotation:e$5,annotationContainerRef:g$3,doc:n$4,outlines:r$4,page:a$4,pageIndex:i$4,scale:l$3,viewport:v$3,onExecuteNamedAction:u$3,onJumpFromLinkAnnotation:p$3,onJumpToDest:d$3});case exports.AnnotationType.Polygon:return o$2.createElement(Ae,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.Polyline:return o$2.createElement(He,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.Popup:return o$2.createElement(Re,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.Square:return o$2.createElement(Ne,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.Squiggly:return o$2.createElement(Ve,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.Stamp:return o$2.createElement(ze,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.StrikeOut:return o$2.createElement(Be,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});case exports.AnnotationType.Text:return o$2.createElement(Ge,{key:e$5.id,annotation:e$5,childAnnotation:c$4,page:a$4,viewport:v$3});case exports.AnnotationType.Underline:return o$2.createElement(Ye,{key:e$5.id,annotation:e$5,page:a$4,viewport:v$3});default:return o$2.createElement(o$2.Fragment,{key:e$5.id})}})))},Xe=function(e$4){var t$4=e$4.page,n$4=e$4.renderAnnotations,r$4=T$1(),a$4=o$2.useState({loading:!0,annotations:[]}),i$4=a$4[0],c$3=a$4[1];return o$2.useEffect((function(){t$4.getAnnotations({intent:`display`}).then((function(e$5){r$4.current&&c$3({loading:!1,annotations:e$5})}))}),[]),i$4.loading?o$2.createElement(o$2.Fragment,null):n$4(i$4.annotations)},Qe=function(e$4){var t$4=e$4.doc,n$4=e$4.outlines,r$4=e$4.page,a$4=e$4.pageIndex,i$4=e$4.plugins,c$3=e$4.rotation,s$3=e$4.scale,l$3=e$4.onExecuteNamedAction,u$3=e$4.onJumpFromLinkAnnotation,p$3=e$4.onJumpToDest;return o$2.createElement(Xe,{page:r$4,renderAnnotations:function(e$5){return o$2.createElement(Ke,{annotations:e$5,doc:t$4,outlines:n$4,page:r$4,pageIndex:a$4,plugins:i$4,rotation:c$3,scale:s$3,onExecuteNamedAction:l$3,onJumpFromLinkAnnotation:u$3,onJumpToDest:p$3})}})},$e=function(e$4,t$4){var n$4=e$4%t$4;return n$4===0?e$4:Math.floor(e$4-n$4)},et=function(e$4){var t$4=e$4.canvasLayerRef,n$4=e$4.height,r$4=e$4.page,a$4=e$4.pageIndex,i$4=e$4.plugins,c$3=e$4.rotation,s$3=e$4.scale,l$3=e$4.width,u$3=e$4.onRenderCanvasCompleted,p$3=o$2.useRef();return f$2((function(){var e$5=p$3.current;e$5&&e$5.cancel();var n$5=t$4.current;n$5.removeAttribute(`data-testid`),i$4.forEach((function(e$6){e$6.onCanvasLayerRender&&e$6.onCanvasLayerRender({ele:n$5,pageIndex:a$4,rotation:c$3,scale:s$3,status:exports.LayerRenderStatus.PreRender})}));var o$3=r$4.getViewport({rotation:c$3,scale:s$3}),l$4=window.devicePixelRatio||1,d$3=Math.sqrt(16777216/(o$3.width*o$3.height)),f$3=l$4>d$3;f$3?n$5.style.transform=`scale(1, 1)`:n$5.style.removeProperty(`transform`);var g$3=Math.min(d$3,l$4),v$3=function(e$6,t$5){var n$6,r$5;if(Math.floor(e$6)===e$6)return[e$6,1];var o$4=1/e$6;if(o$4>t$5)return[1,t$5];if(Math.floor(o$4)===o$4)return[1,o$4];for(var a$5=e$6>1?o$4:e$6,i$5=0,c$4=1,s$4=1,l$5=1;;){var u$4=i$5+s$4,p$4=c$4+l$5;if(p$4>t$5)break;a$5<=u$4/p$4?(s$4=(n$6=[u$4,p$4])[0],l$5=n$6[1]):(i$5=(r$5=[u$4,p$4])[0],c$4=r$5[1])}return a$5<(i$5/c$4+s$4/l$5)/2?a$5===e$6?[i$5,c$4]:[c$4,i$5]:a$5===e$6?[s$4,l$5]:[l$5,s$4]}(g$3,8),h$3=v$3[0],m$3=v$3[1];n$5.width=$e(o$3.width*g$3,h$3),n$5.height=$e(o$3.height*g$3,h$3),n$5.style.width=`${$e(o$3.width,m$3)}px`,n$5.style.height=`${$e(o$3.height,m$3)}px`,n$5.hidden=!0;var x$2=n$5.getContext(`2d`,{alpha:!1}),w$1=f$3||l$4!==1?[g$3,0,0,g$3,0,0]:null;return p$3.current=r$4.render({canvasContext:x$2,transform:w$1,viewport:o$3}),p$3.current.promise.then((function(){n$5.hidden=!1,n$5.setAttribute(`data-testid`,`core__canvas-layer-${a$4}`),i$4.forEach((function(e$6){e$6.onCanvasLayerRender&&e$6.onCanvasLayerRender({ele:n$5,pageIndex:a$4,rotation:c$3,scale:s$3,status:exports.LayerRenderStatus.DidRender})})),u$3()}),(function(){u$3()})),function(){n$5&&(n$5.width=0,n$5.height=0)}}),[]),o$2.createElement(`div`,{className:`rpv-core__canvas-layer`,style:{height:`${n$4}px`,width:`${l$3}px`}},o$2.createElement(`canvas`,{ref:t$4}))},tt=function(e$4){var t$4=e$4.height,n$4=e$4.page,r$4=e$4.rotation,i$4=e$4.scale,c$3=e$4.width,s$3=o$2.useRef();return f$2((function(){var e$5=s$3.current,o$3=n$4.getViewport({rotation:r$4,scale:i$4});n$4.getOperatorList().then((function(r$5){(function(){var e$6=s$3.current;e$6&&(e$6.innerHTML=``)})(),new a$3.SVGGraphics(n$4.commonObjs,n$4.objs).getSVG(r$5,o$3).then((function(n$5){n$5.style.height=`${t$4}px`,n$5.style.width=`${c$3}px`,e$5.appendChild(n$5)}))}))}),[]),o$2.createElement(`div`,{className:`rpv-core__svg-layer`,ref:s$3})},nt=function(e$4){var t$4=e$4.containerRef,n$4=e$4.page,r$4=e$4.pageIndex,i$4=e$4.plugins,c$3=e$4.rotation,s$3=e$4.scale,l$3=e$4.onRenderTextCompleted,u$3=o$2.useRef(),p$3=function(){var e$5=t$4.current;e$5&&([].slice.call(e$5.querySelectorAll(`.rpv-core__text-layer-text`)).forEach((function(t$5){return e$5.removeChild(t$5)})),[].slice.call(e$5.querySelectorAll(`br[role="presentation"]`)).forEach((function(t$5){return e$5.removeChild(t$5)})))};return f$2((function(){var e$5=u$3.current;e$5&&e$5.cancel();var o$3=t$4.current;if(o$3){o$3.removeAttribute(`data-testid`);var d$3=n$4.getViewport({rotation:c$3,scale:s$3});return i$4.forEach((function(e$6){e$6.onTextLayerRender&&e$6.onTextLayerRender({ele:o$3,pageIndex:r$4,scale:s$3,status:exports.LayerRenderStatus.PreRender})})),n$4.getTextContent().then((function(e$6){p$3(),u$3.current=a$3.renderTextLayer({container:o$3,textContent:e$6,textContentSource:e$6,viewport:d$3}),u$3.current.promise.then((function(){o$3.setAttribute(`data-testid`,`core__text-layer-${r$4}`),[].slice.call(o$3.children).forEach((function(e$7){e$7.classList.contains(`rpv-core__text-layer-text--not`)||e$7.classList.add(`rpv-core__text-layer-text`)})),i$4.forEach((function(e$7){e$7.onTextLayerRender&&e$7.onTextLayerRender({ele:o$3,pageIndex:r$4,scale:s$3,status:exports.LayerRenderStatus.DidRender})})),l$3()}),(function(){o$3.removeAttribute(`data-testid`),l$3()}))})),function(){var e$6;p$3(),(e$6=u$3.current)==null||e$6.cancel()}}}),[]),o$2.createElement(`div`,{className:`rpv-core__text-layer`,ref:t$4})},rt=function(e$4){var t$4=e$4.doc,n$4=e$4.measureRef,r$4=e$4.outlines,a$4=e$4.pageIndex,i$4=e$4.pageRotation,c$3=e$4.pageSize,s$3=e$4.plugins,l$3=e$4.renderPage,u$3=e$4.renderQueueKey,p$3=e$4.rotation,f$3=e$4.scale,g$3=e$4.shouldRender,v$3=e$4.viewMode,h$3=e$4.onExecuteNamedAction,m$3=e$4.onJumpFromLinkAnnotation,w$1=e$4.onJumpToDest,E$3=e$4.onRenderCompleted,b$3=e$4.onRotatePage,y$2=T$1(),S$2=o$2.useState(null),_$1=S$2[0],P$2=S$2[1],R$1=o$2.useState(!1),M$2=R$1[0],k$3=R$1[1],C$3=o$2.useState(!1),L$2=C$3[0],O$1=C$3[1],F$1=o$2.useRef(),D$2=o$2.useRef(),I$3=Math.abs(p$3+i$4)%180==0,A$1=c$3.pageWidth*f$3,H$1=c$3.pageHeight*f$3,N$2=I$3?A$1:H$1,V$1=I$3?H$1:A$1,z$2=(c$3.rotation+p$3+i$4)%360,B$1=o$2.useRef(0),W$1=l$3||function(e$5){return o$2.createElement(o$2.Fragment,null,e$5.canvasLayer.children,e$5.textLayer.children,e$5.annotationLayer.children)};return o$2.useEffect((function(){P$2(null),k$3(!1),O$1(!1)}),[i$4,p$3,f$3]),o$2.useEffect((function(){g$3&&y$2.current&&!_$1&&de(t$4,a$4).then((function(e$5){y$2.current&&(B$1.current=u$3,P$2(e$5))}))}),[g$3,_$1]),o$2.useEffect((function(){M$2&&L$2&&(u$3===B$1.current?E$3(a$4):(P$2(null),k$3(!1),O$1(!1)))}),[M$2,L$2]),o$2.createElement(`div`,{className:d$2({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":v$3===exports.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":v$3===exports.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":v$3===exports.ViewMode.SinglePage}),"data-testid":`core__page-layer-${a$4}`,ref:n$4,style:{height:`${V$1}px`,width:`${N$2}px`}},_$1?o$2.createElement(o$2.Fragment,null,W$1({annotationLayer:{attrs:{},children:o$2.createElement(Qe,{doc:t$4,outlines:r$4,page:_$1,pageIndex:a$4,plugins:s$3,rotation:z$2,scale:f$3,onExecuteNamedAction:h$3,onJumpFromLinkAnnotation:m$3,onJumpToDest:w$1})},canvasLayer:{attrs:{},children:o$2.createElement(et,{canvasLayerRef:F$1,height:V$1,page:_$1,pageIndex:a$4,plugins:s$3,rotation:z$2,scale:f$3,width:N$2,onRenderCanvasCompleted:function(){y$2.current&&k$3(!0)}})},canvasLayerRendered:M$2,doc:t$4,height:V$1,pageIndex:a$4,rotation:z$2,scale:f$3,svgLayer:{attrs:{},children:o$2.createElement(tt,{height:V$1,page:_$1,rotation:z$2,scale:f$3,width:N$2})},textLayer:{attrs:{},children:o$2.createElement(nt,{containerRef:D$2,page:_$1,pageIndex:a$4,plugins:s$3,rotation:z$2,scale:f$3,onRenderTextCompleted:function(){y$2.current&&O$1(!0)}})},textLayerRendered:L$2,width:N$2,markRendered:E$3,onRotatePage:function(e$5){return b$3(a$4,e$5)}}),s$3.map((function(e$5,n$5){return e$5.renderPageLayer?o$2.createElement(o$2.Fragment,{key:n$5},e$5.renderPageLayer({canvasLayerRef:F$1,canvasLayerRendered:M$2,doc:t$4,height:V$1,pageIndex:a$4,rotation:z$2,scale:f$3,textLayerRef:D$2,textLayerRendered:L$2,width:N$2})):o$2.createElement(o$2.Fragment,{key:n$5})}))):o$2.createElement(x$1,{testId:`core__page-layer-loading-${a$4}`}))},ot=function(e$4,t$4){var n$4=t$4.rect;return e$4.height!==n$4.height||e$4.width!==n$4.width?n$4:e$4};(function(e$4){e$4.Horizontal=`Horizontal`,e$4.Vertical=`Vertical`,e$4.Both=`Both`})(Ee||={});var at=function(e$4){return 1-(1-e$4)**4},it=1e-4,ct={left:0,top:0},st={capture:!1,passive:!0},lt=function(e$4){var t$4=e$4.elementRef,n$4=e$4.enableSmoothScroll,r$4=e$4.isRtl,a$4=e$4.scrollDirection,i$4=e$4.onSmoothScroll,c$3=o$2.useState(ct),s$3=c$3[0],l$3=c$3[1],u$3=o$2.useState(t$4.current),p$3=u$3[0],d$3=u$3[1],g$3=r$4?-1:1,v$3=o$2.useRef(a$4);v$3.current=a$4;var h$3=o$2.useRef(ct),m$3=o$2.useRef(!0),x$2=o$2.useCallback((function(){m$3.current=!0,n$4&&l$3(h$3.current),i$4(!1)}),[]),w$1=o$2.useCallback((function(){if(p$3){switch(v$3.current){case Ee.Horizontal:h$3.current={left:g$3*p$3.scrollLeft,top:0};break;case Ee.Both:h$3.current={left:g$3*p$3.scrollLeft,top:p$3.scrollTop};break;case Ee.Vertical:default:h$3.current={left:0,top:p$3.scrollTop}}n$4&&!m$3.current||l$3(h$3.current)}}),[p$3]);return f$2((function(){d$3(t$4.current)})),f$2((function(){if(p$3)return p$3.addEventListener(`scroll`,w$1,st),function(){p$3.removeEventListener(`scroll`,w$1,st)}}),[p$3]),{scrollOffset:s$3,scrollTo:o$2.useCallback((function(e$5,n$5){var r$5=t$4.current;if(!r$5)return Promise.resolve();var o$3={left:0,top:0};switch(v$3.current){case Ee.Horizontal:o$3.left=g$3*e$5.left;break;case Ee.Both:o$3.left=g$3*e$5.left,o$3.top=e$5.top;break;case Ee.Vertical:default:o$3.top=e$5.top}return n$5?(m$3.current=!1,i$4(!0),new Promise((function(e$6,t$5){(function(e$7,t$6,n$6,r$6,o$4,a$5){o$4===void 0&&(o$4=function(e$8){return e$8}),a$5===void 0&&(a$5=function(){});var i$5=0,c$4=0,s$4=!1;switch(t$6){case Ee.Horizontal:c$4=e$7.scrollLeft,i$5=0;case Ee.Both:c$4=e$7.scrollLeft,i$5=e$7.scrollTop;break;case Ee.Vertical:default:c$4=0,i$5=e$7.scrollTop}var l$4=function(){s$4||(s$4=!0,e$7.scrollLeft=n$6.left,e$7.scrollTop=n$6.top,a$5())};if(Math.abs(i$5-n$6.top)<=it&&t$6===Ee.Vertical)l$4();else if(Math.abs(c$4-n$6.left)<=it&&t$6===Ee.Horizontal)l$4();else{var u$4,p$4=-1,d$4=c$4-n$6.left,f$3=i$5-n$6.top,g$4=function(a$6){p$4===-1&&(p$4=a$6);var v$4=a$6-p$4,h$4=Math.min(v$4/r$6,1),m$4=o$4(h$4),x$3={left:c$4-d$4*m$4,top:i$5-f$3*m$4};switch(t$6){case Ee.Horizontal:e$7.scrollLeft=x$3.left;break;case Ee.Both:e$7.scrollLeft=x$3.left,e$7.scrollTop=x$3.top;break;case Ee.Vertical:default:e$7.scrollTop=x$3.top}Math.abs(x$3.top-n$6.top)<=it&&Math.abs(x$3.left-n$6.left)<=it&&!s$4&&(window.cancelAnimationFrame(u$4),l$4()),v$4<r$6?u$4=window.requestAnimationFrame(g$4):window.cancelAnimationFrame(u$4)};u$4=window.requestAnimationFrame(g$4)}})(r$5,v$3.current,o$3,400,at,(function(){x$2(),e$6()}))}))):new Promise((function(e$6,t$5){switch(v$3.current){case Ee.Horizontal:r$5.scrollLeft=o$3.left;break;case Ee.Both:r$5.scrollLeft=o$3.left,r$5.scrollTop=o$3.top;break;case Ee.Vertical:default:r$5.scrollTop=o$3.top}e$6()}))}),[t$4])}},ut=function(e$4,t$4,n$4){return Math.max(e$4,Math.min(n$4,t$4))},pt=function(e$4,t$4){if(t$4!==exports.ViewMode.DualPageWithCover)return 0;if(!function(e$5){var t$5=e$5.length;if(t$5===1)return!1;for(var n$5=1;n$5<t$5;n$5++)if(e$5[n$5].height!==e$5[0].height||e$5[n$5].width!==e$5[0].width)return!0;return!1}(e$4))return 2*e$4[0].width;var n$4=ie(e$4.slice(1),2).map((function(e$5){return e$5.length===2?e$5[0].width+e$5[1].width:e$5[0].width})),r$4=[e$4[0].width].concat(n$4);return Math.max.apply(Math,r$4)},dt={left:0,top:0},ft={left:0,top:0},gt={left:0,top:0},vt={left:0,top:0},ht={height:0,width:0},mt={left:0,top:0},xt=`data-virtual-index`,wt=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Et=function(e$4){var t$4=e$4.enableSmoothScroll,n$4=e$4.isRtl,r$4=e$4.numberOfItems,a$4=e$4.parentRef,i$4=e$4.setRenderRange,c$3=e$4.sizes,s$3=e$4.scrollMode,u$3=e$4.viewMode,p$3=o$2.useState(!1),d$3=p$3[0],g$3=p$3[1],v$3=o$2.useCallback((function(e$5){return g$3(e$5)}),[]),h$3=o$2.useRef(s$3);h$3.current=s$3;var m$3=o$2.useRef(u$3);m$3.current=u$3;var x$2=s$3===exports.ScrollMode.Wrapped||u$3===exports.ViewMode.DualPageWithCover||u$3===exports.ViewMode.DualPage?Ee.Both:s$3===exports.ScrollMode.Horizontal?Ee.Horizontal:Ee.Vertical,w$1=lt({elementRef:a$4,enableSmoothScroll:t$4,isRtl:n$4,scrollDirection:x$2,onSmoothScroll:v$3}),E$3=w$1.scrollOffset,b$3=w$1.scrollTo,y$2=function(e$5){var t$5=e$5.elementRef,n$5=o$2.useState(t$5.current),r$5=n$5[0],a$5=n$5[1],i$5=o$2.useRef(!1),c$4=o$2.useReducer(ot,{height:0,width:0}),s$4=c$4[0],l$3=c$4[1];return f$2((function(){t$5.current!==r$5&&a$5(t$5.current)})),f$2((function(){if(r$5&&!i$5.current){i$5.current=!0;var e$6=r$5.getBoundingClientRect(),t$6=e$6.height,n$6=e$6.width;l$3({rect:{height:t$6,width:n$6}})}}),[r$5]),o$2.useEffect((function(){if(r$5){var e$6=new ResizeObserver((function(e$7,t$6){e$7.forEach((function(e$8){if(e$8.target===r$5){var t$7=e$8.contentRect,n$6=t$7.height,o$3=t$7.width;l$3({rect:{height:n$6,width:o$3}})}}))}));return e$6.observe(r$5),function(){e$6.unobserve(r$5)}}}),[r$5]),s$4}({elementRef:a$4}),S$2=o$2.useRef({scrollOffset:mt,measurements:[]});S$2.current.scrollOffset=E$3;var _$1=o$2.useMemo((function(){return Array(r$4).fill(-1)}),[]),P$2=o$2.useState(_$1),R$1=P$2[0],M$2=P$2[1],k$3=o$2.useMemo((function(){return new IntersectionObserver((function(e$5){e$5.forEach((function(e$6){var t$5=e$6.isIntersecting?e$6.intersectionRatio:-1,n$5=e$6.target.getAttribute(xt);if(n$5){var o$3=parseInt(n$5,10);0<=o$3&&o$3<r$4&&M$2((function(e$7){return e$7[o$3]=t$5,function(e$8,t$6,n$6){if(n$6||arguments.length===2)for(var r$5,o$4=0,a$5=t$6.length;o$4<a$5;o$4++)!r$5&&o$4 in t$6||(r$5||=Array.prototype.slice.call(t$6,0,o$4),r$5[o$4]=t$6[o$4]);return e$8.concat(r$5||Array.prototype.slice.call(t$6))}([],e$7,!0)}))}}))}),{threshold:wt})}),[]),C$3=o$2.useMemo((function(){return s$3===exports.ScrollMode.Page&&u$3===exports.ViewMode.SinglePage?function(e$5,t$5,n$5){for(var r$5=[],o$3=0;o$3<e$5;o$3++){var a$5={height:Math.max(t$5.height,n$5[o$3].height),width:Math.max(t$5.width,n$5[o$3].width)},i$5=o$3===0?vt:r$5[o$3-1].end,c$4={left:i$5.left+a$5.width,top:i$5.top+a$5.height};r$5[o$3]={index:o$3,start:i$5,size:a$5,end:c$4,visibility:-1}}return r$5}(r$4,y$2,c$3):u$3===exports.ViewMode.DualPageWithCover?function(e$5,t$5,n$5,r$5){for(var o$3=[],a$5=0,i$5=0,c$4=gt,s$4=0;s$4<e$5;s$4++){var l$3=s$4===0?{height:r$5===exports.ScrollMode.Page?Math.max(t$5.height,n$5[s$4].height):n$5[s$4].height,width:r$5===exports.ScrollMode.Page?Math.max(t$5.width,n$5[s$4].width):n$5[s$4].width}:{height:r$5===exports.ScrollMode.Page?Math.max(t$5.height,n$5[s$4].height):n$5[s$4].height,width:Math.max(t$5.width/2,n$5[s$4].width)};r$5===exports.ScrollMode.Page?c$4=s$4===0?gt:{left:s$4%2==0?l$3.width:0,top:Math.floor((s$4-1)/2)*l$3.height+o$3[0].end.top}:s$4===0?(c$4=gt,a$5=n$5[0].height,i$5=0):s$4%2==1?(c$4={left:0,top:a$5+=i$5},i$5=s$4===e$5-1?n$5[s$4].height:Math.max(n$5[s$4].height,n$5[s$4+1].height)):c$4={left:o$3[s$4-1].end.left,top:a$5};var u$4={left:c$4.left+l$3.width,top:c$4.top+l$3.height};o$3[s$4]={index:s$4,start:c$4,size:l$3,end:u$4,visibility:-1}}return o$3}(r$4,y$2,c$3,s$3):u$3===exports.ViewMode.DualPage?function(e$5,t$5,n$5,r$5){for(var o$3=[],a$5=0,i$5=0,c$4=ft,s$4=0;s$4<e$5;s$4++){var l$3={height:r$5===exports.ScrollMode.Page?Math.max(t$5.height,n$5[s$4].height):n$5[s$4].height,width:Math.max(t$5.width/2,n$5[s$4].width)};r$5===exports.ScrollMode.Page?c$4={left:s$4%2==0?0:l$3.width,top:Math.floor(s$4/2)*l$3.height}:s$4%2==0?(c$4={left:0,top:a$5+=i$5},i$5=s$4===e$5-1?n$5[s$4].height:Math.max(n$5[s$4].height,n$5[s$4+1].height)):c$4={left:o$3[s$4-1].end.left,top:a$5};var u$4={left:c$4.left+l$3.width,top:c$4.top+l$3.height};o$3[s$4]={index:s$4,start:c$4,size:l$3,end:u$4,visibility:-1}}return o$3}(r$4,y$2,c$3,s$3):function(e$5,t$5,n$5,r$5){for(var o$3=[],a$5=0,i$5={left:0,top:0},c$4=0,s$4=dt,l$3=0;l$3<e$5;l$3++){var u$4=n$5[l$3];if(l$3===0)a$5=u$4.width,i$5={left:0,top:0},c$4=u$4.height;else switch(r$5){case exports.ScrollMode.Wrapped:(a$5+=u$4.width)<t$5.width?(s$4={left:o$3[l$3-1].end.left,top:i$5.top},c$4=Math.max(c$4,u$4.height)):(a$5=u$4.width,i$5={left:(s$4={left:i$5.left,top:i$5.top+c$4}).left,top:s$4.top},c$4=u$4.height);break;case exports.ScrollMode.Horizontal:case exports.ScrollMode.Vertical:default:s$4=o$3[l$3-1].end}var p$4={left:s$4.left+u$4.width,top:s$4.top+u$4.height};o$3[l$3]={index:l$3,start:s$4,size:u$4,end:p$4,visibility:-1}}return o$3}(r$4,y$2,c$3,s$3)}),[s$3,c$3,u$3,y$2]),T$2=C$3[r$4-1]?{height:C$3[r$4-1].end.top,width:C$3[r$4-1].end.left}:ht;S$2.current.measurements=C$3;var L$2=o$2.useMemo((function(){var e$5=function(e$6,t$6,n$6,r$5){var o$3=0;switch(e$6){case Ee.Horizontal:o$3=r$5.left;break;case Ee.Vertical:default:o$3=r$5.top}var a$6=t$6.length-1,i$5=function(e$7,t$7,n$7,r$6){for(;e$7<=t$7;){var o$4=(e$7+t$7)/2|0,a$7=r$6(o$4);if(a$7<n$7)e$7=o$4+1;else{if(!(a$7>n$7))return o$4;t$7=o$4-1}}return e$7>0?e$7-1:0}(0,a$6,o$3,(function(n$7){switch(e$6){case Ee.Horizontal:return t$6[n$7].start.left;case Ee.Both:case Ee.Vertical:default:return t$6[n$7].start.top}}));if(e$6===Ee.Both)for(var c$5=t$6[i$5].start.top;i$5-1>=0&&t$6[i$5-1].start.top===c$5&&t$6[i$5-1].start.left>=r$5.left;)i$5--;for(var s$5=i$5;s$5<=a$6;){var l$4={top:t$6[s$5].start.top-r$5.top,left:t$6[s$5].start.left-r$5.left},u$4={height:n$6.height-l$4.top,width:n$6.width-l$4.left};if(e$6===Ee.Horizontal&&u$4.width<0||e$6===Ee.Vertical&&u$4.height<0||e$6===Ee.Both&&(u$4.width<0||u$4.height<0))break;s$5++}return{start:i$5,end:s$5}}(x$2,C$3,y$2,E$3),t$5=e$5.start,n$5=e$5.end,a$5=t$5+R$1.slice(ut(0,r$4,t$5),ut(0,r$4,n$5)).reduce((function(e$6,t$6,n$6,r$5){return t$6>r$5[e$6]?n$6:e$6}),0),c$4=a$5=ut(0,r$4-1,a$5),s$4=i$4({endPage:n$5,numPages:r$4,startPage:t$5}),l$3=s$4.startPage,p$4=s$4.endPage;switch(l$3=Math.max(l$3,0),p$4=Math.min(p$4,r$4-1),u$3){case exports.ViewMode.DualPageWithCover:a$5>0&&(c$4=a$5%2==1?a$5:a$5-1),l$3=l$3===0?0:l$3%2==1?l$3:l$3-1,r$4-(p$4=p$4%2==1?p$4-1:p$4)<=2&&(p$4=r$4-1);break;case exports.ViewMode.DualPage:c$4=a$5%2==0?a$5:a$5-1,l$3=l$3%2==0?l$3:l$3-1,p$4=p$4%2==1?p$4:p$4-1;break;case exports.ViewMode.SinglePage:default:c$4=a$5}return{startPage:l$3,endPage:p$4,maxVisbilityIndex:c$4}}),[C$3,y$2,E$3,u$3,R$1]),O$1=L$2.startPage,F$1=L$2.endPage,D$2=L$2.maxVisbilityIndex,I$3=o$2.useMemo((function(){for(var e$5=[],t$5=function(t$6){var n$6=C$3[t$6],r$5=l$2(l$2({},n$6),{visibility:R$1[t$6]===void 0?-1:R$1[t$6],measureRef:function(e$6){e$6&&(e$6.setAttribute(xt,`${t$6}`),k$3.observe(e$6))}});e$5.push(r$5)},n$5=O$1;n$5<=F$1;n$5++)t$5(n$5);return e$5}),[O$1,F$1,R$1,C$3]),A$1=o$2.useCallback((function(e$5,n$5){var o$3=S$2.current.measurements[ut(0,r$4-1,e$5)],a$5=h$3.current===exports.ScrollMode.Page?mt:n$5;return o$3?b$3({left:a$5.left+o$3.start.left,top:a$5.top+o$3.start.top},t$4):Promise.resolve()}),[b$3,t$4]),H$1=o$2.useCallback((function(e$5,t$5){var n$5=S$2.current.measurements,r$5=n$5[e$5].start,o$3=n$5.find((function(e$6){return e$6.start.top-r$5.top>1e-12}));if(!o$3)return Promise.resolve();var a$5=o$3.index;switch(m$3.current){case exports.ViewMode.DualPage:a$5=a$5%2==0?a$5:a$5+1;break;case exports.ViewMode.DualPageWithCover:a$5=a$5%2==1?a$5:a$5+1}return A$1(a$5,t$5)}),[]),N$2=o$2.useCallback((function(e$5,t$5){for(var n$5=S$2.current.measurements,o$3=n$5[e$5].start,a$5=e$5,i$5=!1,c$4=r$4-1;c$4>=0;c$4--)if(o$3.top-n$5[c$4].start.top>1e-12){i$5=!0,a$5=n$5[c$4].index;break}if(!i$5)return Promise.resolve();switch(m$3.current){case exports.ViewMode.DualPage:a$5=a$5%2==0?a$5:a$5-1;break;case exports.ViewMode.DualPageWithCover:a$5=a$5%2==0?a$5-1:a$5}return a$5===e$5&&(a$5=e$5-1),A$1(a$5,t$5)}),[]),V$1=o$2.useCallback((function(e$5,t$5){if(m$3.current===exports.ViewMode.DualPageWithCover||m$3.current===exports.ViewMode.DualPage)return H$1(e$5,t$5);switch(h$3.current){case exports.ScrollMode.Wrapped:return H$1(e$5,t$5);case exports.ScrollMode.Horizontal:case exports.ScrollMode.Vertical:default:return A$1(e$5+1,t$5)}}),[]),z$2=o$2.useCallback((function(e$5,t$5){if(m$3.current===exports.ViewMode.DualPageWithCover||m$3.current===exports.ViewMode.DualPage)return N$2(e$5,t$5);switch(h$3.current){case exports.ScrollMode.Wrapped:return N$2(e$5,t$5);case exports.ScrollMode.Horizontal:case exports.ScrollMode.Vertical:default:return A$1(e$5-1,t$5)}}),[]),B$1=o$2.useCallback((function(){return function(e$5,t$5){switch(t$5){case exports.ScrollMode.Horizontal:return{position:`relative`,height:`100%`,width:`${e$5.width}px`};case exports.ScrollMode.Vertical:default:return{position:`relative`,height:`${e$5.height}px`,width:`100%`}}}(T$2,h$3.current)}),[T$2]),W$1=o$2.useCallback((function(e$5){return function(e$6,t$5,n$5){return n$5===exports.ScrollMode.Page?{height:`${t$5.height}px`,width:`100%`,position:`absolute`,top:0,transform:`translateY(${e$6.start.top}px)`}:{}}(e$5,y$2,h$3.current)}),[y$2]),j$2=o$2.useCallback((function(e$5){return function(e$6,t$5,n$5,r$5,o$3){var a$5,i$5,c$4,s$4,l$3,u$4,p$4,d$4=t$5?`right`:`left`,f$3=t$5?-1:1,g$4=n$5.length,v$4=e$6.start.left*f$3,h$4=e$6.size,m$4=h$4.height,x$3=h$4.width;if(r$5===exports.ViewMode.DualPageWithCover){var w$2=o$3===exports.ScrollMode.Page?0:e$6.start.top;return e$6.index===0||g$4%2==0&&e$6.index===g$4-1?((a$5={height:`${m$4}px`,minWidth:`${pt(n$5,r$5)}px`,width:`100%`})[d$4]=0,a$5.position=`absolute`,a$5.top=0,a$5.transform=`translate(${v$4}px, ${w$2}px)`,a$5):((i$5={height:`${m$4}px`,width:`${x$3}px`})[d$4]=0,i$5.position=`absolute`,i$5.top=0,i$5.transform=`translate(${v$4}px, ${w$2}px)`,i$5)}if(r$5===exports.ViewMode.DualPage)return(c$4={height:`${m$4}px`,width:`${x$3}px`})[d$4]=0,c$4.position=`absolute`,c$4.top=0,c$4.transform=`translate(${v$4}px, ${o$3===exports.ScrollMode.Page?0:e$6.start.top}px)`,c$4;switch(o$3){case exports.ScrollMode.Horizontal:return(s$4={height:`100%`,width:`${x$3}px`})[d$4]=0,s$4.position=`absolute`,s$4.top=0,s$4.transform=`translateX(${v$4}px)`,s$4;case exports.ScrollMode.Page:return(l$3={height:`${m$4}px`,width:`${x$3}px`})[d$4]=0,l$3.position=`absolute`,l$3.top=0,l$3;case exports.ScrollMode.Wrapped:return(u$4={height:`${m$4}px`,width:`${x$3}px`})[d$4]=0,u$4.position=`absolute`,u$4.top=0,u$4.transform=`translate(${v$4}px, ${e$6.start.top}px)`,u$4;case exports.ScrollMode.Vertical:default:return(p$4={height:`${m$4}px`,width:`100%`})[d$4]=0,p$4.position=`absolute`,p$4.top=0,p$4.transform=`translateY(${e$6.start.top}px)`,p$4}}(e$5,n$4,c$3,m$3.current,h$3.current)}),[n$4,c$3]),q$1=o$2.useCallback((function(e$5,t$5){var n$5=S$2.current,o$3=n$5.measurements,a$5=n$5.scrollOffset,i$5=o$3[ut(0,r$4-1,t$5)];return i$5?b$3(h$3.current===exports.ScrollMode.Page?{left:i$5.start.left,top:i$5.start.top}:{left:a$5.left*e$5,top:a$5.top*e$5},!1):Promise.resolve()}),[]);return o$2.useEffect((function(){return function(){k$3.disconnect()}}),[]),{boundingClientRect:y$2,isSmoothScrolling:d$3,startPage:O$1,endPage:F$1,maxVisbilityIndex:D$2,virtualItems:I$3,getContainerStyles:B$1,getItemContainerStyles:W$1,getItemStyles:j$2,scrollToItem:A$1,scrollToNextItem:V$1,scrollToPreviousItem:z$2,zoom:q$1}},bt=function(e$4,t$4,n$4,r$4,o$3,a$4){var i$4=n$4;switch(!0){case o$3===exports.ViewMode.DualPageWithCover&&a$4>=3:case o$3===exports.ViewMode.DualPage&&a$4>=3:i$4=2*n$4;break;default:i$4=n$4}switch(r$4){case exports.SpecialZoomLevel.ActualSize:return 1;case exports.SpecialZoomLevel.PageFit:return Math.min((e$4.clientWidth-17)/i$4,(e$4.clientHeight-16)/t$4);case exports.SpecialZoomLevel.PageWidth:return(e$4.clientWidth-17)/i$4}},yt=function(e$4){var t$4,n$4,r$4=e$4.getCurrentPage,a$4=(t$4=50,n$4=o$2.useRef([]),o$2.useEffect((function(){return function(){n$4.current=[]}}),[]),{push:function(e$5){var r$5=n$4.current;r$5.length+1>t$4&&r$5.shift(),r$5.push(e$5),n$4.current=r$5},map:function(e$5){return n$4.current.map((function(t$5){return e$5(t$5)}))},pop:function(){var e$5=n$4.current;if(e$5.length===0)return null;var t$5=e$5.pop();return n$4.current=e$5,t$5}}),i$4=function(e$5){var t$5=o$2.useRef([]);return o$2.useEffect((function(){return function(){t$5.current=[]}}),[]),{dequeue:function(){var e$6=t$5.current;if(e$6.length===0)return null;var n$5=e$6.shift();return t$5.current=e$6,n$5||null},enqueue:function(n$5){var r$5=t$5.current;r$5.length+1>e$5&&r$5.pop(),t$5.current=[n$5].concat(r$5)},map:function(e$6){return t$5.current.map((function(t$6){return e$6(t$6)}))}}}(50),c$3=function(){var e$5=i$4.dequeue();return e$5&&a$4.push(e$5),e$5&&e$5.pageIndex===r$4()?c$3():e$5},s$3=function(){var e$5=a$4.pop();return e$5&&i$4.enqueue(e$5),e$5&&e$5.pageIndex===r$4()?s$3():e$5};return{getNextDestination:c$3,getPreviousDestination:s$3,markVisitedDestination:o$2.useCallback((function(e$5){a$4.push(e$5)}),[])}},St=function(e$4){var t$4=[];return e$4.map((function(e$5){t$4=t$4.concat(e$5).concat(function(e$6){var t$5=[];return e$6.items&&e$6.items.length>0&&(t$5=t$5.concat(St(e$6.items))),t$5}(e$5))})),t$4},_t={capture:!1,passive:!0},Pt={height:0,width:0},Rt={height:0,width:0},Mt=function(e$4){var t$4=e$4.getCurrentPage,n$4=e$4.getCurrentScrollMode,r$4=e$4.jumpToPage,a$4=e$4.targetRef,i$4=o$2.useState(exports.FullScreenMode.Normal),c$3=i$4[0],s$3=i$4[1],l$3=function(){var e$5=o$2.useState(Pt),t$5=e$5[0],n$5=e$5[1],r$5=C$2((function(){n$5({height:window.innerHeight,width:window.innerWidth})}),100);return f$2((function(){return window.addEventListener(`resize`,r$5,_t),function(){window.removeEventListener(`resize`,r$5,_t)}}),[]),t$5}(),u$3=o$2.useState(Rt),p$3=u$3[0],d$3=u$3[1],g$3=o$2.useRef(Rt),v$3=o$2.useRef(t$4()),h$3=o$2.useRef(Rt),m$3=o$2.useState(a$4.current),x$2=m$3[0],w$1=m$3[1],E$3=o$2.useRef();f$2((function(){a$4.current!==x$2&&w$1(a$4.current)}),[]),f$2((function(){if(x$2){var e$5=new ResizeObserver((function(e$6){e$6.forEach((function(e$7){var t$5=e$7.target.getBoundingClientRect(),n$5=t$5.height,r$5=t$5.width;d$3({height:n$5,width:r$5})}))}));return e$5.observe(x$2),function(){e$5.unobserve(x$2),e$5.disconnect()}}}),[x$2]);var b$3=o$2.useCallback((function(e$5){var t$5=k$2();return t$5&&t$5!==e$5?(s$3(exports.FullScreenMode.Normal),M$1(t$5)):Promise.resolve()}),[]),y$2=o$2.useCallback((function(e$5){e$5&&R()&&(w$1(e$5),b$3(e$5).then((function(){E$3.current=e$5,s$3(exports.FullScreenMode.Entering),function(e$6){_&&e$6[P$1.RequestFullScreen]()}(e$5)})))}),[]),S$2=o$2.useCallback((function(){k$2()&&(s$3(exports.FullScreenMode.Exitting),M$1(document))}),[]),T$2=o$2.useCallback((function(){x$2&&k$2()!==x$2&&s$3(exports.FullScreenMode.Exitting)}),[x$2]);return o$2.useEffect((function(){switch(c$3){case exports.FullScreenMode.Entering:E$3.current&&(E$3.current.style.backgroundColor=`var(--rpv-core__full-screen-target-background-color)`),v$3.current=t$4(),g$3.current={height:window.innerHeight,width:window.innerWidth};break;case exports.FullScreenMode.Entered:n$4()===exports.ScrollMode.Page?r$4(v$3.current).then((function(){s$3(exports.FullScreenMode.EnteredCompletely)})):s$3(exports.FullScreenMode.EnteredCompletely);break;case exports.FullScreenMode.Exitting:E$3.current&&=(E$3.current.style.backgroundColor=``,null),v$3.current=t$4();break;case exports.FullScreenMode.Exited:s$3(exports.FullScreenMode.Normal),n$4()===exports.ScrollMode.Page&&r$4(v$3.current)}}),[c$3]),o$2.useEffect((function(){if(c$3!==exports.FullScreenMode.Normal)return c$3===exports.FullScreenMode.Entering&&l$3.height===p$3.height&&l$3.width===p$3.width&&l$3.height>0&&l$3.width>0&&(h$3.current.height===0||l$3.height==h$3.current.height)?(h$3.current={height:window.innerHeight,width:window.innerWidth},void s$3(exports.FullScreenMode.Entered)):void(c$3===exports.FullScreenMode.Exitting&&g$3.current.height===l$3.height&&g$3.current.width===l$3.width&&l$3.height>0&&l$3.width>0&&s$3(exports.FullScreenMode.Exited))}),[c$3,l$3,p$3]),o$2.useEffect((function(){var e$5;return e$5=T$2,_&&document.addEventListener(P$1.FullScreenChange,e$5),function(){(function(e$6){_&&document.removeEventListener(P$1.FullScreenChange,e$6)})(T$2)}}),[x$2]),{enterFullScreenMode:y$2,exitFullScreenMode:S$2,fullScreenMode:c$3}},kt={buildPageStyles:function(){return{}},transformSize:function(e$4){return e$4.size}},Ct={left:0,top:0},Tt=function(e$4){var t$4=e$4.currentFile,n$4=e$4.defaultScale,r$4=e$4.doc,a$4=e$4.enableSmoothScroll,i$4=e$4.initialPage,c$3=e$4.initialRotation,s$3=e$4.initialScale,u$3=e$4.pageLayout,g$3=e$4.pageSizes,v$3=e$4.plugins,h$3=e$4.renderPage,m$3=e$4.scrollMode,x$2=e$4.setRenderRange,w$1=e$4.viewMode,E$3=e$4.viewerState,b$3=e$4.onDocumentLoad,y$2=e$4.onOpenFile,S$2=e$4.onPageChange,_$1=e$4.onRotate,P$2=e$4.onRotatePage,R$1=e$4.onZoom,M$2=r$4.numPages,k$3=r$4.loadingTask.docId,O$1=o$2.useContext(A).l10n,F$1=o$2.useContext(p$2),I$3=F$1.direction===exports.TextDirection.RightToLeft,H$1=o$2.useRef(),N$2=o$2.useRef(),V$1=o$2.useState(i$4),z$2=V$1[0],B$1=V$1[1],W$1=o$2.useRef(null),j$2=yt({getCurrentPage:function(){return me$1.current.pageIndex}}),q$1=o$2.useState(c$3),U$1=q$1[0],Z$2=q$1[1],J$1=L$1(U$1),G$1=o$2.useState(!1),Y$1=G$1[0],K$1=G$1[1],X$2=o$2.useState(new Map),Q$1=X$2[0],$$1=X$2[1],ee$1=o$2.useState(m$3),te$1=ee$1[0],ne$1=ee$1[1],re$1=L$1(te$1),oe$1=o$2.useState(w$1),ae$1=oe$1[0],ce$1=oe$1[1],ue$1=L$1(ae$1),pe$1=function(e$5){var t$5=T$1(),n$5=o$2.useState([]),r$5=n$5[0],a$5=n$5[1];return o$2.useEffect((function(){e$5.getOutline().then((function(e$6){t$5.current&&e$6!==null&&a$5(St(e$6))}))}),[]),r$5}(r$4),fe$1=o$2.useState(s$3),ge$1=fe$1[0],ve$1=fe$1[1],he$1=L$1(ge$1),me$1=o$2.useRef(E$3),xe$1=o$2.useRef(typeof n$4==`string`?n$4:null),we$1=o$2.useRef(-1),Ee$1=o$2.useRef(-1),be$1=o$2.useRef(i$4),ye$1=Mt({getCurrentPage:function(){return me$1.current.pageIndex},getCurrentScrollMode:function(){return me$1.current.scrollMode},jumpToPage:function(e$5){return je$1(e$5)},targetRef:N$2}),Se$1=o$2.useState(-1),_e$1=Se$1[0],Pe$1=Se$1[1],Re$1=o$2.useState(0),Me$1=Re$1[0],ke$1=Re$1[1],Ce$1=D$1({doc:r$4});o$2.useEffect((function(){return function(){se.clear(),le.clear()}}),[k$3]);var Te$1=o$2.useMemo((function(){return Object.assign({},kt,u$3)}),[]),Oe$1=Et({enableSmoothScroll:a$4,isRtl:I$3,numberOfItems:M$2,parentRef:N$2,scrollMode:te$1,setRenderRange:x$2,sizes:o$2.useMemo((function(){return Array(M$2).fill(0).map((function(e$5,t$5){var n$5=[g$3[t$5].pageHeight,g$3[t$5].pageWidth],r$5=Math.abs(U$1)%180==0?{height:n$5[0],width:n$5[1]}:{height:n$5[1],width:n$5[0]},o$3={height:r$5.height*ge$1,width:r$5.width*ge$1};return Te$1.transformSize({numPages:M$2,pageIndex:t$5,size:o$3})}))}),[U$1,ge$1]),viewMode:ae$1});(function(e$5){var t$5=e$5.targetRef,n$5=e$5.onResize;f$2((function(){var e$6=new ResizeObserver((function(e$7){e$7.forEach((function(e$8){n$5(e$8.target)}))})),r$5=t$5.current;if(r$5)return e$6.observe(r$5),function(){e$6.unobserve(r$5)}}),[])})({targetRef:N$2,onResize:C$2((function(){!xe$1.current||me$1.current.fullScreenMode!==exports.FullScreenMode.Normal||i$4>0&&be$1.current===i$4||Ke$1(xe$1.current)}),200)});var De$1=function(e$5){var t$5=e$5;v$3.forEach((function(e$6){e$6.onViewerStateChange&&(t$5=e$6.onViewerStateChange(t$5))})),me$1.current=t$5},Ie$1=function(){return N$2.current},Ae$1=function(){return me$1.current},He$1=o$2.useCallback((function(e$5){j$2.markVisitedDestination(e$5)}),[]),Ne$1=o$2.useCallback((function(e$5){var t$5=e$5.pageIndex,n$5=e$5.bottomOffset,o$3=e$5.leftOffset,a$5=e$5.scaleTo,i$5=N$2.current,c$4=me$1.current;return i$5&&c$4?new Promise((function(e$6,s$4){de(r$4,t$5).then((function(r$5){var s$5=r$5.getViewport({scale:1}),l$3=0,u$4=(typeof n$5==`function`?n$5(s$5.width,s$5.height):n$5)||0,p$3=(typeof o$3==`function`?o$3(s$5.width,s$5.height):o$3)||0,d$3=c$4.scale;switch(a$5){case exports.SpecialZoomLevel.PageFit:l$3=0,p$3=0,Ke$1(exports.SpecialZoomLevel.PageFit);break;case exports.SpecialZoomLevel.PageWidth:d$3=bt(i$5,g$3[t$5].pageHeight,g$3[t$5].pageWidth,exports.SpecialZoomLevel.PageWidth,w$1,M$2),l$3=(s$5.height-u$4)*d$3,p$3*=d$3,Ke$1(d$3);break;default:l$3=(s$5.height-u$4)*d$3,p$3*=d$3}switch(c$4.scrollMode){case exports.ScrollMode.Horizontal:Oe$1.scrollToItem(t$5,{left:p$3,top:0}).then((function(){e$6()}));break;case exports.ScrollMode.Vertical:default:Oe$1.scrollToItem(t$5,{left:0,top:l$3}).then((function(){e$6()}))}}))})):Promise.resolve()}),[]),Ve$1=o$2.useCallback((function(e$5){return j$2.markVisitedDestination(e$5),Ne$1(e$5)}),[]),ze$1=o$2.useCallback((function(){var e$5=j$2.getNextDestination();return e$5?Ne$1(e$5):Promise.resolve()}),[]),Be$1=o$2.useCallback((function(){var e$5=j$2.getPreviousDestination();return e$5?Ne$1(e$5):Promise.resolve()}),[]),We$1=o$2.useCallback((function(){return Oe$1.scrollToNextItem(me$1.current.pageIndex,Ct)}),[]),je$1=o$2.useCallback((function(e$5){return 0<=e$5&&e$5<M$2?Oe$1.scrollToItem(e$5,Ct):Promise.resolve()}),[]),qe$1=o$2.useCallback((function(){return Oe$1.scrollToPreviousItem(me$1.current.pageIndex,Ct)}),[]),Ue$1=o$2.useCallback((function(e$5){var t$5,n$5;(t$5=e$5.name,n$5=t$5.split(/\./).pop(),n$5?n$5.toLowerCase():``).toLowerCase()===`pdf`&&new Promise((function(t$6){var n$6=new FileReader;n$6.readAsArrayBuffer(e$5),n$6.onload=function(){t$6(new Uint8Array(n$6.result))}})).then((function(t$6){y$2(e$5.name,t$6)}))}),[y$2]),Ze$1=o$2.useCallback((function(e$5){var t$5=e$5===exports.RotateDirection.Backward?-90:90,n$5=me$1.current.rotation,o$3=n$5===360||n$5===-360?t$5:n$5+t$5;Ce$1.markNotRendered(),Z$2(o$3),De$1(l$2(l$2({},me$1.current),{rotation:o$3})),_$1({direction:e$5,doc:r$4,rotation:o$3})}),[]),Je$1=o$2.useCallback((function(e$5,t$5){var n$5=t$5===exports.RotateDirection.Backward?-90:90,o$3=me$1.current.pagesRotation,a$5=(o$3.has(e$5)?o$3.get(e$5):c$3)+n$5,i$5=o$3.set(e$5,a$5);$$1(i$5),K$1((function(e$6){return!e$6})),De$1(l$2(l$2({},me$1.current),{pagesRotation:i$5,rotatedPage:e$5})),P$2({direction:t$5,doc:r$4,pageIndex:e$5,rotation:a$5}),Ce$1.markRendering(e$5),Pe$1(e$5)}),[]),Ge$1=o$2.useCallback((function(e$5){De$1(l$2(l$2({},me$1.current),{scrollMode:e$5})),ne$1(e$5)}),[]),Ye$1=o$2.useCallback((function(e$5){De$1(l$2(l$2({},me$1.current),{viewMode:e$5})),ce$1(e$5)}),[]),Ke$1=o$2.useCallback((function(e$5){var t$5=N$2.current,n$5=me$1.current.pageIndex;if(!(n$5<0||n$5>=M$2)){var o$3=g$3[n$5].pageHeight,a$5=g$3[n$5].pageWidth,i$5=t$5?typeof e$5==`string`?bt(t$5,o$3,a$5,e$5,me$1.current.viewMode,M$2):e$5:1;xe$1.current=typeof e$5==`string`?e$5:null,i$5!==me$1.current.scale&&(ke$1((function(e$6){return e$6+1})),Ce$1.markNotRendered(),ve$1(i$5),R$1({doc:r$4,scale:i$5}),De$1(l$2(l$2({},me$1.current),{scale:i$5})))}}),[]),Xe$1=o$2.useCallback((function(e$5){ye$1.enterFullScreenMode(e$5)}),[]),Qe$1=o$2.useCallback((function(){ye$1.exitFullScreenMode()}),[]);o$2.useEffect((function(){De$1(l$2(l$2({},me$1.current),{fullScreenMode:ye$1.fullScreenMode}))}),[ye$1.fullScreenMode]),o$2.useEffect((function(){var e$5={enterFullScreenMode:Xe$1,exitFullScreenMode:Qe$1,getPagesContainer:Ie$1,getViewerState:Ae$1,jumpToDestination:Ve$1,jumpToNextDestination:ze$1,jumpToPreviousDestination:Be$1,jumpToNextPage:We$1,jumpToPreviousPage:qe$1,jumpToPage:je$1,openFile:Ue$1,rotate:Ze$1,rotatePage:Je$1,setViewerState:De$1,switchScrollMode:Ge$1,switchViewMode:Ye$1,zoom:Ke$1};return v$3.forEach((function(t$5){t$5.install&&t$5.install(e$5)})),function(){v$3.forEach((function(t$5){t$5.uninstall&&t$5.uninstall(e$5)}))}}),[k$3]),o$2.useEffect((function(){b$3({doc:r$4,file:t$4}),v$3.forEach((function(e$5){e$5.onDocumentLoad&&e$5.onDocumentLoad({doc:r$4,file:t$4})}))}),[k$3]);var $e$1,et$1,tt$1,nt$1=Oe$1.boundingClientRect;$e$1=function(){i$4&&je$1(i$4)},et$1=nt$1.height>0&&nt$1.width>0,tt$1=o$2.useRef(!1),f$2((function(){et$1&&!tt$1.current&&(tt$1.current=!0,$e$1())}),[$e$1,et$1]),f$2((function(){var e$5=me$1.current.pageIndex;e$5>-1&&re$1!==te$1&&Oe$1.scrollToItem(e$5,Ct).then((function(){ye$1.fullScreenMode===exports.FullScreenMode.EnteredCompletely&&(a$4||Ce$1.markNotRendered(),we$1.current=-1)}))}),[te$1]),f$2((function(){var e$5=me$1.current.pageIndex;e$5>-1&&J$1!==U$1&&Oe$1.scrollToItem(e$5,Ct)}),[U$1]),f$2((function(){he$1!=0&&he$1!=me$1.current.scale&&Oe$1.zoom(me$1.current.scale/he$1,me$1.current.pageIndex).then((function(){ye$1.fullScreenMode===exports.FullScreenMode.EnteredCompletely&&(Ee$1.current=-1)}))}),[ge$1]),f$2((function(){if(ue$1!==me$1.current.viewMode){var e$5=Oe$1.startPage,t$5=Oe$1.endPage,n$5=Oe$1.virtualItems;Ce$1.markNotRendered(),Ce$1.setRange(e$5,t$5);for(var r$5=function(e$6){var t$6=n$5.find((function(t$7){return t$7.index===e$6}));t$6&&Ce$1.setVisibility(e$6,t$6.visibility)},o$3=e$5;o$3<=t$5;o$3++)r$5(o$3);at$1()}}),[ae$1]),f$2((function(){var e$5=me$1.current.pageIndex;e$5>-1&&ue$1!==ae$1&&Oe$1.scrollToItem(e$5,Ct)}),[ae$1]),f$2((function(){var e$5=me$1.current.pageIndex;e$5>0&&e$5===i$4&&be$1.current===i$4&&xe$1.current&&(be$1.current=-1,Ke$1(xe$1.current))}),[z$2]),o$2.useEffect((function(){Oe$1.isSmoothScrolling||W$1.current!==null&&W$1.current===z$2||(W$1.current=z$2,S$2({currentPage:z$2,doc:r$4}))}),[z$2,Oe$1.isSmoothScrolling]),o$2.useEffect((function(){ye$1.fullScreenMode===exports.FullScreenMode.Entering&&me$1.current.scrollMode===exports.ScrollMode.Page&&(we$1.current=me$1.current.pageIndex),ye$1.fullScreenMode===exports.FullScreenMode.EnteredCompletely&&me$1.current.scrollMode===exports.ScrollMode.Page&&a$4&&(we$1.current=-1),ye$1.fullScreenMode===exports.FullScreenMode.EnteredCompletely&&xe$1.current&&(Ee$1.current=me$1.current.pageIndex,Ke$1(xe$1.current))}),[ye$1.fullScreenMode]),o$2.useEffect((function(){if(ye$1.fullScreenMode!==exports.FullScreenMode.Entering&&ye$1.fullScreenMode!==exports.FullScreenMode.Exitting&&!Oe$1.isSmoothScrolling){var e$5=Oe$1.startPage,t$5=Oe$1.endPage,n$5=Oe$1.maxVisbilityIndex,r$5=Oe$1.virtualItems,o$3=n$5,a$5=ye$1.fullScreenMode===exports.FullScreenMode.Entered||ye$1.fullScreenMode===exports.FullScreenMode.EnteredCompletely;if(!(a$5&&o$3!==we$1.current&&we$1.current>-1||a$5&&o$3!==Ee$1.current&&Ee$1.current>-1)){B$1(o$3),De$1(l$2(l$2({},me$1.current),{pageIndex:o$3})),Ce$1.setRange(e$5,t$5);for(var i$5=function(e$6){var t$6=r$5.find((function(t$7){return t$7.index===e$6}));t$6&&Ce$1.setVisibility(e$6,t$6.visibility)},c$4=e$5;c$4<=t$5;c$4++)i$5(c$4);at$1()}}}),[Oe$1.startPage,Oe$1.endPage,Oe$1.isSmoothScrolling,Oe$1.maxVisbilityIndex,ye$1.fullScreenMode,Y$1,U$1,ge$1]);var ot$1=o$2.useCallback((function(e$5){Ce$1.markRendered(e$5),at$1()}),[Me$1]),at$1=function(){var e$5=Ce$1.getHighestPriorityPage();e$5>-1&&Ce$1.isInRange(e$5)&&(Ce$1.markRendering(e$5),Pe$1(e$5))},it$1=function(e$5){var t$5=z$2-1,n$5=z$2+1;switch(e$5){case`FirstPage`:je$1(0);break;case`LastPage`:je$1(M$2-1);break;case`NextPage`:n$5<M$2&&je$1(n$5);break;case`PrevPage`:t$5>=0&&je$1(t$5)}},ct$1=o$2.useCallback((function(){var e$5=Oe$1.virtualItems,t$5=[];switch(ae$1){case exports.ViewMode.DualPage:t$5=ie(e$5,2);break;case exports.ViewMode.DualPageWithCover:e$5.length&&(t$5=e$5[0].index===0?[[e$5[0]]].concat(ie(e$5.slice(1),2)):ie(e$5,2));break;case exports.ViewMode.SinglePage:default:t$5=ie(e$5,1)}var n$5=O$1&&O$1.core?O$1.core.pageLabel:`Page {{pageIndex}}`,a$5={attrs:{className:`rpv-core__inner-container`,"data-testid":`core__inner-container`,ref:H$1,style:{height:`100%`}},children:o$2.createElement(o$2.Fragment,null),subSlot:{attrs:{"data-testid":`core__inner-pages`,className:d$2({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":te$1===exports.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":I$3,"rpv-core__inner-pages--single":te$1===exports.ScrollMode.Page,"rpv-core__inner-pages--vertical":te$1===exports.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":te$1===exports.ScrollMode.Wrapped}),ref:N$2,style:{height:`100%`,position:`relative`}},children:o$2.createElement(`div`,{"data-testid":`core__inner-current-page-${z$2}`,style:Object.assign({"--scale-factor":ge$1},Oe$1.getContainerStyles())},t$5.map((function(e$6){return o$2.createElement(`div`,{className:d$2({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":te$1===exports.ScrollMode.Page}),style:Oe$1.getItemContainerStyles(e$6[0]),key:`${e$6[0].index}-${ae$1}`},e$6.map((function(e$7){var t$6=ae$1===exports.ViewMode.DualPageWithCover&&(e$7.index===0||M$2%2==0&&e$7.index===M$2-1);return o$2.createElement(`div`,{"aria-label":n$5.replace(`{{pageIndex}}`,`${e$7.index+1}`),className:d$2({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":ae$1===exports.ViewMode.DualPage&&e$7.index%2==0,"rpv-core__inner-page--dual-odd":ae$1===exports.ViewMode.DualPage&&e$7.index%2==1,"rpv-core__inner-page--dual-cover":t$6,"rpv-core__inner-page--dual-cover-even":ae$1===exports.ViewMode.DualPageWithCover&&!t$6&&e$7.index%2==0,"rpv-core__inner-page--dual-cover-odd":ae$1===exports.ViewMode.DualPageWithCover&&!t$6&&e$7.index%2==1,"rpv-core__inner-page--single":ae$1===exports.ViewMode.SinglePage&&te$1===exports.ScrollMode.Page}),role:`region`,key:`${e$7.index}-${ae$1}`,style:Object.assign({},Oe$1.getItemStyles(e$7),Te$1.buildPageStyles({numPages:M$2,pageIndex:e$7.index,scrollMode:te$1,viewMode:ae$1}))},o$2.createElement(rt,{doc:r$4,measureRef:e$7.measureRef,outlines:pe$1,pageIndex:e$7.index,pageRotation:Q$1.has(e$7.index)?Q$1.get(e$7.index):0,pageSize:g$3[e$7.index],plugins:v$3,renderPage:h$3,renderQueueKey:Me$1,rotation:U$1,scale:ge$1,shouldRender:_e$1===e$7.index,viewMode:ae$1,onExecuteNamedAction:it$1,onJumpFromLinkAnnotation:He$1,onJumpToDest:Ve$1,onRenderCompleted:ot$1,onRotatePage:Je$1}))})))})))}};return v$3.forEach((function(e$6){e$6.renderViewer&&(a$5=e$6.renderViewer({containerRef:H$1,doc:r$4,pagesContainerRef:N$2,pagesRotation:Q$1,pageSizes:g$3,rotation:U$1,slot:a$5,themeContext:F$1,jumpToPage:je$1,openFile:Ue$1,rotate:Ze$1,rotatePage:Je$1,switchScrollMode:Ge$1,switchViewMode:Ye$1,zoom:Ke$1}))})),a$5}),[v$3,Oe$1]),st$1=o$2.useCallback((function(e$5){return o$2.createElement(`div`,l$2({},e$5.attrs,{style:e$5.attrs&&e$5.attrs.style?e$5.attrs.style:{}}),e$5.children,e$5.subSlot&&st$1(e$5.subSlot))}),[]);return st$1(ct$1())},Lt=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Ot=function(e$4){var t$4=e$4.defaultScale,n$4=e$4.doc,r$4=e$4.render,a$4=e$4.scrollMode,i$4=e$4.viewMode,c$3=o$2.useRef(),s$3=o$2.useState({pageSizes:[],scale:0}),l$3=s$3[0],u$3=s$3[1];return o$2.useLayoutEffect((function(){var e$5=Array(n$4.numPages).fill(0).map((function(e$6,t$5){return new Promise((function(e$7,r$5){de(n$4,t$5).then((function(t$6){var n$5=t$6.getViewport({scale:1});e$7({pageHeight:n$5.height,pageWidth:n$5.width,rotation:n$5.rotation})}))}))}));Promise.all(e$5).then((function(e$6){var r$5=c$3.current;if(r$5&&e$6.length!==0){var o$3=e$6[0].pageWidth,s$4=e$6[0].pageHeight,l$4=r$5.parentElement,p$3=(l$4.clientWidth-45)/o$3,d$3=(l$4.clientHeight-45)/s$4,f$3=p$3;switch(a$4){case exports.ScrollMode.Horizontal:f$3=Math.min(p$3,d$3);break;case exports.ScrollMode.Vertical:default:f$3=p$3}var g$3,v$3;u$3({pageSizes:e$6,scale:t$4?typeof t$4==`string`?bt(l$4,s$4,o$3,t$4,i$4,n$4.numPages):t$4:(g$3=f$3,(v$3=Lt.findIndex((function(e$7){return e$7>=g$3})))===-1||v$3===0?g$3:Lt[v$3-1])})}}))}),[n$4.loadingTask.docId]),l$3.pageSizes.length===0||l$3.scale===0?o$2.createElement(`div`,{className:`rpv-core__page-size-calculator`,"data-testid":`core__page-size-calculating`,ref:c$3},o$2.createElement(x$1,null)):r$4(l$3.pageSizes,l$3.scale)},Ft=function(){},Dt=function(e$4){function t$4(t$5,n$4){var r$4=e$4.call(this)||this;return r$4.verifyPassword=t$5,r$4.passwordStatus=n$4,r$4}return c$2(t$4,e$4),t$4}(Ft),It=function(e$4){var t$4=e$4.passwordStatus,n$4=e$4.renderProtectedView,r$4=e$4.verifyPassword,a$4=e$4.onDocumentAskPassword,i$4=o$2.useContext(A).l10n,c$3=o$2.useState(``),s$3=c$3[0],l$3=c$3[1],u$3=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft,f$3=function(){return r$4(s$3)};return o$2.useEffect((function(){a$4&&a$4({verifyPassword:r$4})}),[]),n$4?n$4({passwordStatus:t$4,verifyPassword:r$4}):o$2.createElement(`div`,{className:`rpv-core__asking-password-wrapper`},o$2.createElement(`div`,{className:d$2({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":u$3})},o$2.createElement(`div`,{className:`rpv-core__asking-password-message`},t$4===exports.PasswordStatus.RequiredPassword&&i$4.core.askingPassword.requirePasswordToOpen,t$4===exports.PasswordStatus.WrongPassword&&i$4.core.wrongPassword.tryAgain),o$2.createElement(`div`,{className:`rpv-core__asking-password-body`},o$2.createElement(`div`,{className:d$2({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!u$3,"rpv-core__asking-password-input--rtl":u$3})},o$2.createElement(w,{testId:`core__asking-password-input`,type:`password`,value:s$3,onChange:l$3,onKeyDown:function(e$5){e$5.key===`Enter`&&f$3()}})),o$2.createElement(m$2,{onClick:f$3},i$4.core.askingPassword.submit))))},At=function(e$4){function t$4(t$5){var n$4=e$4.call(this)||this;return n$4.doc=t$5,n$4}return c$2(t$4,e$4),t$4}(Ft),Ht=function(e$4){function t$4(t$5){var n$4=e$4.call(this)||this;return n$4.error=t$5,n$4}return c$2(t$4,e$4),t$4}(Ft),Nt=function(e$4){function t$4(t$5){var n$4=e$4.call(this)||this;return n$4.percentages=t$5,n$4}return c$2(t$4,e$4),t$4}(Ft),Vt=function(e$4){var t$4=e$4.characterMap,n$4=e$4.file,r$4=e$4.httpHeaders,i$4=e$4.render,c$3=e$4.renderError,s$3=e$4.renderLoader,l$3=e$4.renderProtectedView,u$3=e$4.transformGetDocumentParams,f$3=e$4.withCredentials,g$3=e$4.onDocumentAskPassword,v$3=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft,h$3=o$2.useState(new Nt(0)),m$3=h$3[0],w$1=h$3[1],E$3=o$2.useRef(``),b$3=T$1();return o$2.useEffect((function(){E$3.current=``,w$1(new Nt(0));var e$5=new a$3.PDFWorker({name:`PDFWorker_${Date.now()}`}),o$3=Object.assign({httpHeaders:r$4,withCredentials:f$3,worker:e$5},typeof n$4==`string`?{url:n$4}:{data:n$4},t$4?{cMapUrl:t$4.url,cMapPacked:t$4.isCompressed}:{}),i$5=u$3?u$3(o$3):o$3,c$4=a$3.getDocument(i$5);return c$4.onPassword=function(e$6,t$5){switch(t$5){case a$3.PasswordResponses.NEED_PASSWORD:b$3.current&&w$1(new Dt(e$6,exports.PasswordStatus.RequiredPassword));break;case a$3.PasswordResponses.INCORRECT_PASSWORD:b$3.current&&w$1(new Dt(e$6,exports.PasswordStatus.WrongPassword))}},c$4.onProgress=function(e$6){var t$5=e$6.total>0?Math.min(100,100*e$6.loaded/e$6.total):100;b$3.current&&E$3.current===``&&w$1(new Nt(t$5))},c$4.promise.then((function(e$6){E$3.current=e$6.loadingTask.docId,b$3.current&&w$1(new At(e$6))}),(function(t$5){return b$3.current&&!e$5.destroyed&&w$1(new Ht({message:t$5.message||`Cannot load document`,name:t$5.name}))})),function(){c$4.destroy(),e$5.destroy()}}),[n$4]),m$3 instanceof Dt?o$2.createElement(It,{passwordStatus:m$3.passwordStatus,renderProtectedView:l$3,verifyPassword:m$3.verifyPassword,onDocumentAskPassword:g$3}):m$3 instanceof At?i$4(m$3.doc):m$3 instanceof Ht?c$3?c$3(m$3.error):o$2.createElement(`div`,{className:d$2({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":v$3})},o$2.createElement(`div`,{className:`rpv-core__doc-error-text`},m$3.error.message)):o$2.createElement(`div`,{"data-testid":`core__doc-loading`,className:d$2({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":v$3})},s$3?s$3(m$3.percentages):o$2.createElement(x$1,null))},zt=function(e$4,t$4){var n$4=o$2.useMemo((function(){return e$4===`auto`?typeof window<`u`&&window.matchMedia&&window.matchMedia(`(prefers-color-scheme: dark)`).matches?`dark`:`light`:e$4}),[]),r$4=o$2.useState(n$4),a$4=r$4[0],i$4=r$4[1],c$3=L$1(a$4);return o$2.useEffect((function(){if(e$4===`auto`){var t$5=window.matchMedia(`(prefers-color-scheme: dark)`),n$5=function(e$5){i$4(e$5.matches?`dark`:`light`)};return t$5.addEventListener(`change`,n$5),function(){return t$5.removeEventListener(`change`,n$5)}}}),[]),o$2.useEffect((function(){a$4!==c$3&&t$4&&t$4(a$4)}),[a$4]),o$2.useEffect((function(){e$4!==a$4&&i$4(e$4)}),[e$4]),{currentTheme:a$4,setCurrentTheme:i$4}},Bt=function(e$4){return{startPage:e$4.startPage-3,endPage:e$4.endPage+3}};exports.Button=function(e$4){var t$4=e$4.children,n$4=e$4.testId,r$4=e$4.onClick,a$4=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft,i$4=n$4?{"data-testid":n$4}:{};return o$2.createElement(`button`,l$2({className:d$2({"rpv-core__button":!0,"rpv-core__button--rtl":a$4}),type:`button`,onClick:r$4},i$4),t$4)},exports.Icon=v$2,exports.LazyRender=function(e$4){var t$4=e$4.attrs,n$4=e$4.children,r$4=e$4.testId,a$4=o$2.useState(!1),i$4=a$4[0],c$3=a$4[1],s$3=r$4?l$2(l$2({},t$4),{"data-testid":r$4}):t$4,u$3=g$2({once:!0,onVisibilityChanged:function(e$5){e$5.isVisible&&c$3(!0)}});return o$2.createElement(`div`,l$2({ref:u$3},s$3),i$4&&n$4)},exports.LocalizationContext=A,exports.Menu=function(e$4){var t$4=e$4.children,n$4=o$2.useRef(),r$4=o$2.useRef([]),a$4=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft,i$4=function(e$5){if(n$4.current)switch(e$5.key){case`Tab`:e$5.preventDefault();break;case`ArrowDown`:e$5.preventDefault(),c$3((function(e$6,t$5){return t$5+1}));break;case`ArrowUp`:e$5.preventDefault(),c$3((function(e$6,t$5){return t$5-1}));break;case`End`:e$5.preventDefault(),c$3((function(e$6,t$5){return e$6.length-1}));break;case`Home`:e$5.preventDefault(),c$3((function(e$6,t$5){return 0}))}},c$3=function(e$5){if(n$4.current){var t$5=r$4.current,o$3=t$5.findIndex((function(e$6){return e$6.getAttribute(`tabindex`)===`0`})),a$5=Math.min(t$5.length-1,Math.max(0,e$5(t$5,o$3)));o$3>=0&&o$3<=t$5.length-1&&t$5[o$3].setAttribute(`tabindex`,`-1`),t$5[a$5].setAttribute(`tabindex`,`0`),t$5[a$5].focus()}};return f$2((function(){var e$5=n$4.current;e$5&&(r$4.current=function(e$6){var t$5=[];return e$6.querySelectorAll(`.rpv-core__menu-item[role="menuitem"]`).forEach((function(n$5){if(n$5 instanceof HTMLElement){var r$5=n$5.parentElement;(r$5===e$6||window.getComputedStyle(r$5).display!==`none`)&&t$5.push(n$5)}})),t$5}(e$5))}),[]),f$2((function(){return document.addEventListener(`keydown`,i$4),function(){document.removeEventListener(`keydown`,i$4)}}),[]),o$2.createElement(`div`,{ref:n$4,"aria-orientation":`vertical`,className:d$2({"rpv-core__menu":!0,"rpv-core__menu--rtl":a$4}),role:`menu`,tabIndex:0},t$4)},exports.MenuDivider=function(){return o$2.createElement(`div`,{"aria-orientation":`horizontal`,className:`rpv-core__menu-divider`,role:`separator`})},exports.MenuItem=function(e$4){var t$4=e$4.checked,n$4=t$4!==void 0&&t$4,r$4=e$4.children,a$4=e$4.icon,i$4=a$4===void 0?null:a$4,c$3=e$4.isDisabled,s$3=c$3!==void 0&&c$3,u$3=e$4.testId,f$3=e$4.onClick,g$3=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft,v$3=u$3?{"data-testid":u$3}:{};return o$2.createElement(`button`,l$2({className:d$2({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":s$3,"rpv-core__menu-item--ltr":!g$3,"rpv-core__menu-item--rtl":g$3}),role:`menuitem`,tabIndex:-1,type:`button`,onClick:f$3},v$3),o$2.createElement(`div`,{className:d$2({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!g$3,"rpv-core__menu-item-icon--rtl":g$3})},i$4),o$2.createElement(`div`,{className:d$2({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!g$3,"rpv-core__menu-item-label--rtl":g$3})},r$4),o$2.createElement(`div`,{className:d$2({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!g$3,"rpv-core__menu-item-check--rtl":g$3})},n$4&&o$2.createElement(h$2,null)))},exports.MinimalButton=function(e$4){var t$4=e$4.ariaLabel,n$4=t$4===void 0?``:t$4,r$4=e$4.ariaKeyShortcuts,a$4=r$4===void 0?``:r$4,i$4=e$4.children,c$3=e$4.isDisabled,s$3=c$3!==void 0&&c$3,u$3=e$4.isSelected,f$3=u$3!==void 0&&u$3,g$3=e$4.testId,v$3=e$4.onClick,h$3=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft,m$3=g$3?{"data-testid":g$3}:{};return o$2.createElement(`button`,l$2({"aria-label":n$4},a$4&&{"aria-keyshortcuts":a$4},s$3&&{"aria-disabled":!0},{className:d$2({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":s$3,"rpv-core__minimal-button--rtl":h$3,"rpv-core__minimal-button--selected":f$3}),type:`button`,onClick:v$3},m$3),i$4)},exports.Modal=function(e$4){var t$4=e$4.ariaControlsSuffix,n$4=e$4.closeOnClickOutside,r$4=e$4.closeOnEscape,a$4=e$4.content,i$4=e$4.isOpened,c$3=i$4!==void 0&&i$4,s$3=e$4.target,l$3=t$4||`${N$1()}`;return o$2.createElement(U,{target:s$3?function(e$5,t$5){return o$2.createElement(`div`,{"aria-expanded":t$5?`true`:`false`,"aria-haspopup":`dialog`,"aria-controls":`rpv-core__modal-body-${l$3}`},s$3(e$5,t$5))}:null,content:function(e$5){return o$2.createElement(W,null,o$2.createElement(B,{ariaControlsSuffix:l$3,closeOnClickOutside:n$4,closeOnEscape:r$4,onToggle:e$5},a$4(e$5)))},isOpened:c$3})},exports.Popover=function(e$4){var t$4=e$4.ariaHasPopup,n$4=t$4===void 0?`dialog`:t$4,r$4=e$4.ariaControlsSuffix,a$4=e$4.closeOnClickOutside,i$4=e$4.closeOnEscape,c$3=e$4.content,s$3=e$4.lockScroll,l$3=s$3===void 0||s$3,u$3=e$4.offset,p$3=e$4.position,d$3=e$4.target,f$3=q(!1),g$3=f$3.opened,v$3=f$3.toggle,h$3=o$2.useRef(),m$3=o$2.useMemo((function(){return r$4||`${N$1()}`}),[]);return o$2.createElement(`div`,{ref:h$3,"aria-expanded":g$3?`true`:`false`,"aria-haspopup":n$4,"aria-controls":`rpv-core__popver-body-${m$3}`},d$3(v$3,g$3),g$3&&o$2.createElement(o$2.Fragment,null,l$3&&o$2.createElement(re,{closeOnEscape:i$4,onClose:v$3}),o$2.createElement(ne,{ariaControlsSuffix:m$3,closeOnClickOutside:a$4,offset:u$3,position:p$3,targetRef:h$3,onClose:v$3},c$3(v$3))))},exports.PrimaryButton=m$2,exports.ProgressBar=function(e$4){var t$4=e$4.progress,n$4=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft;return o$2.createElement(`div`,{className:d$2({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":n$4})},o$2.createElement(`div`,{className:`rpv-core__progress-bar-progress`,style:{width:`${t$4}%`}},t$4,`%`))},exports.Separator=function(){return o$2.createElement(`div`,{className:`rpv-core__separator`})},exports.Spinner=x$1,exports.Splitter=function(e$4){var t$4=e$4.constrain,n$4=o$2.useContext(p$2).direction===exports.TextDirection.RightToLeft,r$4=o$2.useRef(),a$4=o$2.useRef(),i$4=o$2.useRef(),c$3=o$2.useRef(0),s$3=o$2.useRef(0),l$3=o$2.useRef(0),u$3=o$2.useRef(0),d$3={capture:!0},f$3=function(e$5){var o$3=r$4.current,s$4=a$4.current,p$3=i$4.current;if(o$3&&s$4&&p$3){var d$4=u$3.current,f$4=e$5.clientX-c$3.current,g$4=l$3.current+(n$4?-f$4:f$4),v$3=o$3.parentElement.getBoundingClientRect().width,h$3=100*g$4/v$3;if(o$3.classList.add(`rpv-core__splitter--resizing`),t$4){var m$3=v$3-g$4-d$4;if(!t$4({firstHalfPercentage:h$3,firstHalfSize:g$4,secondHalfPercentage:100*m$3/v$3,secondHalfSize:m$3}))return}s$4.style.width=`${h$3}%`,document.body.classList.add(`rpv-core__splitter-body--resizing`),s$4.classList.add(`rpv-core__splitter-sibling--resizing`),p$3.classList.add(`rpv-core__splitter-sibling--resizing`)}},g$3=function(e$5){var t$5=r$4.current,n$5=a$4.current,o$3=i$4.current;t$5&&n$5&&o$3&&(document.body.classList.remove(`rpv-core__splitter-body--resizing`),t$5.classList.remove(`rpv-core__splitter--resizing`),n$5.classList.remove(`rpv-core__splitter-sibling--resizing`),o$3.classList.remove(`rpv-core__splitter-sibling--resizing`),document.removeEventListener(`mousemove`,f$3,d$3),document.removeEventListener(`mouseup`,g$3,d$3))};return o$2.useEffect((function(){var e$5=r$4.current;e$5&&(u$3.current=e$5.getBoundingClientRect().width,a$4.current=e$5.previousElementSibling,i$4.current=e$5.nextElementSibling)}),[]),o$2.createElement(`div`,{ref:r$4,className:`rpv-core__splitter`,onMouseDown:function(e$5){var t$5=a$4.current;t$5&&(c$3.current=e$5.clientX,s$3.current=e$5.clientY,l$3.current=t$5.getBoundingClientRect().width,document.addEventListener(`mousemove`,f$3,d$3),document.addEventListener(`mouseup`,g$3,d$3))}})},exports.TextBox=w,exports.ThemeContext=p$2,exports.Tooltip=function(e$4){var t$4=e$4.ariaControlsSuffix,n$4=e$4.content,r$4=e$4.offset,a$4=e$4.position,i$4=e$4.target,c$3=q(!1),s$3=c$3.opened,l$3=c$3.toggle,u$3=o$2.useRef(),p$3=o$2.useRef(),d$3=o$2.useMemo((function(){return t$4||`${N$1()}`}),[]);z$1((function(){u$3.current&&document.activeElement&&u$3.current.contains(document.activeElement)&&g$3()}));var f$3=function(){l$3(exports.ToggleStatus.Open)},g$3=function(){l$3(exports.ToggleStatus.Close)};return o$2.createElement(o$2.Fragment,null,o$2.createElement(`div`,{ref:u$3,"aria-describedby":`rpv-core__tooltip-body-${d$3}`,onBlur:function(e$5){e$5.relatedTarget instanceof HTMLElement&&e$5.currentTarget.parentElement&&e$5.currentTarget.parentElement.contains(e$5.relatedTarget)?p$3.current&&(p$3.current.style.display=`none`):g$3()},onFocus:f$3,onMouseEnter:f$3,onMouseLeave:g$3},i$4),s$3&&o$2.createElement(oe,{ariaControlsSuffix:d$3,contentRef:p$3,offset:r$4,position:a$4,targetRef:u$3},n$4()))},exports.Viewer=function(e$4){var t$4=e$4.characterMap,n$4=e$4.defaultScale,r$4=e$4.enableSmoothScroll,a$4=r$4===void 0||r$4,i$4=e$4.fileUrl,c$3=e$4.httpHeaders,s$3=c$3===void 0?{}:c$3,l$3=e$4.initialPage,u$3=l$3===void 0?0:l$3,d$3=e$4.pageLayout,f$3=e$4.initialRotation,v$3=f$3===void 0?0:f$3,h$3=e$4.localization,m$3=e$4.plugins,x$2=m$3===void 0?[]:m$3,w$1=e$4.renderError,E$3=e$4.renderLoader,b$3=e$4.renderPage,y$2=e$4.renderProtectedView,S$2=e$4.scrollMode,_$1=S$2===void 0?exports.ScrollMode.Vertical:S$2,P$2=e$4.setRenderRange,R$1=P$2===void 0?Bt:P$2,M$2=e$4.transformGetDocumentParams,k$3=e$4.theme,C$3=k$3===void 0?{direction:exports.TextDirection.LeftToRight,theme:`light`}:k$3,T$2=e$4.viewMode,O$1=T$2===void 0?exports.ViewMode.SinglePage:T$2,F$1=e$4.withCredentials,D$2=F$1!==void 0&&F$1,H$1=e$4.onDocumentAskPassword,N$2=e$4.onDocumentLoad,V$1=N$2===void 0?function(){}:N$2,z$2=e$4.onPageChange,B$1=z$2===void 0?function(){}:z$2,W$1=e$4.onRotate,j$2=W$1===void 0?function(){}:W$1,q$1=e$4.onRotatePage,U$1=q$1===void 0?function(){}:q$1,Z$2=e$4.onSwitchTheme,J$1=Z$2===void 0?function(){}:Z$2,G$1=e$4.onZoom,Y$1=G$1===void 0?function(){}:G$1,K$1=o$2.useState({data:i$4,name:typeof i$4==`string`?i$4:``,shouldLoad:!1}),X$2=K$1[0],Q$1=K$1[1],$$1=function(e$5,t$5){Q$1({data:t$5,name:e$5,shouldLoad:!0})},ee$1=o$2.useState(!1),te$1=ee$1[0],ne$1=ee$1[1],re$1=L$1(X$2);o$2.useEffect((function(){var e$5=re$1.data,t$5,n$5,r$5=typeof(t$5=i$4);(n$5=typeof e$5)==`string`&&r$5===`string`&&e$5===t$5||n$5===`object`&&r$5===`object`&&e$5.length===t$5.length&&e$5.every((function(e$6,n$6){return e$6===t$5[n$6]}))||Q$1({data:i$4,name:typeof i$4==`string`?i$4:``,shouldLoad:te$1})}),[i$4,te$1]);var oe$1=g$2({onVisibilityChanged:function(e$5){ne$1(e$5.isVisible),e$5.isVisible&&Q$1((function(e$6){return Object.assign({},e$6,{shouldLoad:!0})}))}}),ae$1=typeof C$3==`string`?{direction:exports.TextDirection.LeftToRight,theme:C$3}:C$3,ie$1=o$2.useState(h$3||I$2),ce$1=ie$1[0],se$1=ie$1[1],le$1={l10n:ce$1,setL10n:se$1},ue$1=Object.assign({},{direction:ae$1.direction},zt(ae$1.theme||`light`,J$1));return o$2.useEffect((function(){h$3&&se$1(h$3)}),[h$3]),o$2.createElement(A.Provider,{value:le$1},o$2.createElement(p$2.Provider,{value:ue$1},o$2.createElement(`div`,{ref:oe$1,className:`rpv-core__viewer rpv-core__viewer--${ue$1.currentTheme}`,"data-testid":`core__viewer`,style:{height:`100%`,width:`100%`}},X$2.shouldLoad&&o$2.createElement(Vt,{characterMap:t$4,file:X$2.data,httpHeaders:s$3,render:function(e$5){return o$2.createElement(Ot,{defaultScale:n$4,doc:e$5,render:function(t$5,r$5){return o$2.createElement(Tt,{currentFile:{data:X$2.data,name:X$2.name},defaultScale:n$4,doc:e$5,enableSmoothScroll:a$4,initialPage:u$3,initialRotation:v$3,initialScale:r$5,pageLayout:d$3,pageSizes:t$5,plugins:x$2,renderPage:b$3,scrollMode:_$1,setRenderRange:R$1,viewMode:O$1,viewerState:{file:X$2,fullScreenMode:exports.FullScreenMode.Normal,pageIndex:-1,pageHeight:t$5[0].pageHeight,pageWidth:t$5[0].pageWidth,pagesRotation:new Map,rotation:v$3,scale:r$5,scrollMode:_$1,viewMode:O$1},onDocumentLoad:V$1,onOpenFile:$$1,onPageChange:B$1,onRotate:j$2,onRotatePage:U$1,onZoom:Y$1})},scrollMode:_$1,viewMode:O$1})},renderError:w$1,renderLoader:E$3,renderProtectedView:y$2,transformGetDocumentParams:M$2,withCredentials:D$2,onDocumentAskPassword:H$1}))))},exports.Worker=function(e$4){var t$4=e$4.children,n$4=e$4.workerUrl;return a$3.GlobalWorkerOptions.workerSrc=n$4,o$2.createElement(o$2.Fragment,null,t$4)},exports.chunk=ie,exports.classNames=d$2,exports.createStore=function(e$4){var t$4=e$4||{},n$4={},r$4=function(e$5,r$5){var o$4;t$4=l$2(l$2({},t$4),((o$4={})[e$5]=r$5,o$4)),(n$4[e$5]||[]).forEach((function(n$5){return n$5(t$4[e$5])}))},o$3=function(e$5){return t$4[e$5]};return{subscribe:function(e$5,t$5){n$4[e$5]=(n$4[e$5]||[]).concat(t$5)},unsubscribe:function(e$5,t$5){n$4[e$5]=(n$4[e$5]||[]).filter((function(e$6){return e$6!==t$5}))},update:function(e$5,t$5){r$4(e$5,t$5)},updateCurrentValue:function(e$5,t$5){var n$5=o$3(e$5);n$5!==void 0&&r$4(e$5,t$5(n$5))},get:function(e$5){return o$3(e$5)}}},exports.getDestination=fe,exports.getPage=de,exports.isFullScreenEnabled=R,exports.isMac=function(){return typeof window<`u`&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},exports.useDebounceCallback=C$2,exports.useIntersectionObserver=g$2,exports.useIsMounted=T$1,exports.useIsomorphicLayoutEffect=f$2,exports.usePrevious=L$1,exports.useRenderQueue=D$1})),require_lib$3=__commonJSMin(((exports,module)=>{module.exports=require_core_min()})),require_drop_min=__commonJSMin((exports=>{var e$2=require_react(),r$2=require_lib$3();function t$2(e$4){var r$4=Object.create(null);return e$4&&Object.keys(e$4).forEach((function(t$4){if(t$4!==`default`){var n$4=Object.getOwnPropertyDescriptor(e$4,t$4);Object.defineProperty(r$4,t$4,n$4.get?n$4:{enumerable:!0,get:function(){return e$4[t$4]}})}})),r$4.default=e$4,Object.freeze(r$4)}var n$2=t$2(e$2),a$2=function(){return a$2=Object.assign||function(e$4){for(var r$4,t$4=1,n$4=arguments.length;t$4<n$4;t$4++)for(var a$4 in r$4=arguments[t$4])Object.prototype.hasOwnProperty.call(r$4,a$4)&&(e$4[a$4]=r$4[a$4]);return e$4},a$2.apply(this,arguments)},i$2=function(e$4){var t$4=e$4.containerRef,a$4=e$4.openFile,i$4=n$2.useContext(r$2.ThemeContext).direction===r$2.TextDirection.RightToLeft,o$3=function(e$5,r$4){var t$5=n$2.useRef(0),a$5=n$2.useState(!1),i$5=a$5[0],o$4=a$5[1],c$4=function(e$6){e$6.preventDefault(),o$4(!1),t$5.current=0,e$6.dataTransfer&&r$4(e$6.dataTransfer.files)},u$3=function(e$6){e$6.preventDefault()},l$3=function(e$6){e$6.preventDefault(),t$5.current+=1,t$5.current<=1&&o$4(!0)},s$3=function(e$6){e$6.preventDefault(),--t$5.current,t$5.current<=0&&o$4(!1)};return n$2.useEffect((function(){var r$5=e$5.current;if(r$5)return r$5.addEventListener(`drop`,c$4),r$5.addEventListener(`dragover`,u$3),r$5.addEventListener(`dragenter`,l$3),r$5.addEventListener(`dragleave`,s$3),function(){r$5.removeEventListener(`drop`,c$4),r$5.removeEventListener(`dragover`,u$3),r$5.removeEventListener(`dragenter`,l$3),r$5.removeEventListener(`dragleave`,s$3)}}),[e$5.current]),{isDragging:i$5}}(t$4,(function(e$5){e$5.length!==0&&a$4(e$5[0])})).isDragging,c$3=n$2.useContext(r$2.LocalizationContext).l10n;return n$2.createElement(n$2.Fragment,null,o$3&&n$2.createElement(`div`,{className:`rpv-drop__area`},n$2.createElement(`div`,{className:r$2.classNames({"rpv-drop__area-body":!0,"rpv-drop__area-body--rtl":i$4})},c$3&&c$3.drop?c$3.drop.dragDropFile:`Drag and drop a PDF document here`)))};exports.dropPlugin=function(){return{renderViewer:function(e$4){var r$4=e$4.slot;if(r$4.attrs){var t$4=r$4.attrs&&r$4.attrs.style?r$4.attrs.style:{},o$3=a$2(a$2({},t$4),{height:`100%`,position:`relative`,width:`100%`});r$4.attrs.style=o$3}return r$4.children=n$2.createElement(n$2.Fragment,null,n$2.createElement(i$2,{containerRef:e$4.containerRef,openFile:e$4.openFile}),r$4.children),r$4}}}})),require_lib$2=__commonJSMin(((exports,module)=>{module.exports=require_drop_min()})),require_zoom_min=__commonJSMin((exports=>{var e$1=require_lib$3();function t$1(e$4){var t$4=Object.create(null);return e$4&&Object.keys(e$4).forEach((function(n$4){if(n$4!==`default`){var o$3=Object.getOwnPropertyDescriptor(e$4,n$4);Object.defineProperty(t$4,n$4,o$3.get?o$3:{enumerable:!0,get:function(){return e$4[n$4]}})}})),t$4.default=e$4,Object.freeze(t$4)}var n$1=t$1(require_react()),o$1=function(){return n$1.createElement(e$1.Icon,{ignoreDirection:!0,size:16},n$1.createElement(`path`,{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10
            M10.5,5.499v10`}))},r$1=function(){return n$1.createElement(e$1.Icon,{ignoreDirection:!0,size:16},n$1.createElement(`path`,{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10`}))},c$1=function(){return c$1=Object.assign||function(e$4){for(var t$4,n$4=1,o$3=arguments.length;n$4<o$3;n$4++)for(var r$4 in t$4=arguments[n$4])Object.prototype.hasOwnProperty.call(t$4,r$4)&&(e$4[r$4]=t$4[r$4]);return e$4},c$1.apply(this,arguments)},a$1=function(e$4){var t$4=n$1.useState(e$4.get(`scale`)||0),o$3=t$4[0],r$4=t$4[1],c$3=function(e$5){r$4(e$5)};return n$1.useEffect((function(){return e$4.subscribe(`scale`,c$3),function(){e$4.unsubscribe(`scale`,c$3)}}),[]),{scale:o$3}},u$1=function(e$4){var t$4=e$4.children,o$3=e$4.store;return(t$4||function(e$5){return n$1.createElement(n$1.Fragment,null,`${Math.round(100*e$5.scale)}%`)})({scale:a$1(o$3).scale})},l$1={passive:!1},i$1=null,s$1=function(t$4){var o$3=t$4.pagesContainerRef,r$4=t$4.store,c$3=e$1.useDebounceCallback((function(e$4){var t$5=r$4.get(`zoom`);t$5&&t$5(e$4)}),40),a$4=function(e$4){if(e$4.ctrlKey){e$4.preventDefault();var t$5=e$4.target.getBoundingClientRect(),n$4=1-e$4.deltaY/100,o$4=e$4.clientX-t$5.left,a$5=e$4.clientY-t$5.top,u$3=r$4.get(`scale`);c$3((i$1||=document.createElementNS(`http://www.w3.org/2000/svg`,`svg`)).createSVGMatrix().translate(o$4,a$5).scale(n$4).translate(-o$4,-a$5).scale(u$3).a)}};return e$1.useIsomorphicLayoutEffect((function(){var e$4=o$3.current;if(e$4)return e$4.addEventListener(`wheel`,a$4,l$1),function(){e$4.removeEventListener(`wheel`,a$4)}}),[]),n$1.createElement(n$1.Fragment,null)},m$1=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],f$1=function(e$4){return m$1.find((function(t$4){return t$4>e$4}))||e$4},v$1=function(e$4){var t$4=m$1.findIndex((function(t$5){return t$5>=e$4}));return t$4===-1||t$4===0?e$4:m$1[t$4-1]},p$1=function(t$4){var o$3=t$4.containerRef,r$4=t$4.store,c$3=function(t$5){if(!t$5.shiftKey&&!t$5.altKey&&(e$1.isMac()?t$5.metaKey:t$5.ctrlKey)){var n$4=o$3.current;if(n$4&&document.activeElement&&n$4.contains(document.activeElement)){var c$4=r$4.get(`zoom`);if(c$4){var a$4=r$4.get(`scale`)||1,u$3=1;switch(t$5.key){case`-`:u$3=v$1(a$4);break;case`=`:u$3=f$1(a$4);break;case`0`:u$3=1;break;default:u$3=a$4}u$3!==a$4&&(t$5.preventDefault(),c$4(u$3))}}}};return n$1.useEffect((function(){if(o$3.current)return document.addEventListener(`keydown`,c$3),function(){document.removeEventListener(`keydown`,c$3)}}),[o$3.current]),n$1.createElement(n$1.Fragment,null)},z=[.5,.75,1,1.25,1.5,2,3,4],E$1={left:0,top:8},d$1=function(t$4){var o$3=t$4.levels,r$4=o$3===void 0?z:o$3,c$3=t$4.scale,a$4=t$4.onZoom,u$3=n$1.useContext(e$1.LocalizationContext).l10n,l$3=n$1.useContext(e$1.ThemeContext).direction===e$1.TextDirection.RightToLeft,i$4=u$3&&u$3.zoom?u$3.zoom.zoomDocument:`Zoom document`;return n$1.createElement(e$1.Popover,{ariaControlsSuffix:`zoom`,ariaHasPopup:`menu`,position:e$1.Position.BottomCenter,target:function(t$5){return n$1.createElement(e$1.MinimalButton,{ariaLabel:i$4,testId:`zoom__popover-target`,onClick:function(){t$5()}},n$1.createElement(`span`,{className:`rpv-zoom__popover-target`},n$1.createElement(`span`,{"data-testid":`zoom__popover-target-scale`,className:e$1.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!l$3,"rpv-zoom__popover-target-scale--rtl":l$3})},Math.round(100*c$3),`%`),n$1.createElement(`span`,{className:`rpv-zoom__popover-target-arrow`})))},content:function(t$5){return n$1.createElement(e$1.Menu,null,Object.keys(e$1.SpecialZoomLevel).map((function(o$4){var r$5=o$4;return n$1.createElement(e$1.MenuItem,{key:r$5,onClick:function(){t$5(),a$4(r$5)}},function(t$6){switch(t$6){case e$1.SpecialZoomLevel.ActualSize:return u$3&&u$3.zoom?u$3.zoom.actualSize:`Actual size`;case e$1.SpecialZoomLevel.PageFit:return u$3&&u$3.zoom?u$3.zoom.pageFit:`Page fit`;case e$1.SpecialZoomLevel.PageWidth:return u$3&&u$3.zoom?u$3.zoom.pageWidth:`Page width`}}(r$5))})),n$1.createElement(e$1.MenuDivider,null),r$4.map((function(o$4){return n$1.createElement(e$1.MenuItem,{key:o$4,onClick:function(){t$5(),a$4(o$4)}},`${Math.round(100*o$4)}%`)})))},offset:E$1,closeOnClickOutside:!0,closeOnEscape:!0})},g$1=function(e$4){var t$4=e$4.children,o$3=e$4.levels,r$4=e$4.store;return(t$4||function(e$5){return n$1.createElement(d$1,{levels:o$3,scale:e$5.scale,onZoom:e$5.onZoom})})({scale:a$1(r$4).scale,onZoom:function(e$5){var t$5=r$4.get(`zoom`);t$5&&t$5(e$5)}})},C$1={left:0,top:8},h$1=function(t$4){var r$4=t$4.enableShortcuts,c$3=t$4.onClick,a$4=n$1.useContext(e$1.LocalizationContext).l10n,u$3=a$4&&a$4.zoom?a$4.zoom.zoomIn:`Zoom in`,l$3=r$4?e$1.isMac()?`Meta+=`:`Ctrl+=`:``;return n$1.createElement(e$1.Tooltip,{ariaControlsSuffix:`zoom-in`,position:e$1.Position.BottomCenter,target:n$1.createElement(e$1.MinimalButton,{ariaKeyShortcuts:l$3,ariaLabel:u$3,testId:`zoom__in-button`,onClick:c$3},n$1.createElement(o$1,null)),content:function(){return u$3},offset:C$1})},b$1=function(e$4){var t$4=e$4.children,n$4=e$4.enableShortcuts,o$3=e$4.store,r$4=a$1(o$3).scale;return(t$4||h$1)({enableShortcuts:n$4,onClick:function(){var e$5=o$3.get(`zoom`);e$5&&e$5(f$1(r$4))}})},k$1=function(t$4){var r$4=t$4.onClick,c$3=n$1.useContext(e$1.LocalizationContext).l10n,a$4=c$3&&c$3.zoom?c$3.zoom.zoomIn:`Zoom in`;return n$1.createElement(e$1.MenuItem,{icon:n$1.createElement(o$1,null),testId:`zoom__in-menu`,onClick:r$4},a$4)},S={left:0,top:8},M=function(t$4){var o$3=t$4.enableShortcuts,c$3=t$4.onClick,a$4=n$1.useContext(e$1.LocalizationContext).l10n,u$3=a$4&&a$4.zoom?a$4.zoom.zoomOut:`Zoom out`,l$3=o$3?e$1.isMac()?`Meta+-`:`Ctrl+-`:``;return n$1.createElement(e$1.Tooltip,{ariaControlsSuffix:`zoom-out`,position:e$1.Position.BottomCenter,target:n$1.createElement(e$1.MinimalButton,{ariaKeyShortcuts:l$3,ariaLabel:u$3,testId:`zoom__out-button`,onClick:c$3},n$1.createElement(r$1,null)),content:function(){return u$3},offset:S})},I$1=function(e$4){var t$4=e$4.children,n$4=e$4.enableShortcuts,o$3=e$4.store,r$4=a$1(o$3).scale;return(t$4||M)({enableShortcuts:n$4,onClick:function(){var e$5=o$3.get(`zoom`);e$5&&e$5(v$1(r$4))}})},Z=function(t$4){var o$3=t$4.onClick,c$3=n$1.useContext(e$1.LocalizationContext).l10n,a$4=c$3&&c$3.zoom?c$3.zoom.zoomOut:`Zoom out`;return n$1.createElement(e$1.MenuItem,{icon:n$1.createElement(r$1,null),testId:`zoom__out-menu`,onClick:o$3},a$4)};exports.ZoomInIcon=o$1,exports.ZoomOutIcon=r$1,exports.zoomPlugin=function(t$4){var o$3=n$1.useMemo((function(){return Object.assign({},{enableShortcuts:!0},t$4)}),[]),r$4=n$1.useMemo((function(){return e$1.createStore({})}),[]),a$4=function(e$4){return n$1.createElement(b$1,c$1({enableShortcuts:o$3.enableShortcuts},e$4,{store:r$4}))},l$3=function(e$4){return n$1.createElement(I$1,c$1({enableShortcuts:o$3.enableShortcuts},e$4,{store:r$4}))},i$4=function(e$4){return n$1.createElement(g$1,c$1({},e$4,{store:r$4}))};return{renderViewer:function(e$4){var t$5=e$4.slot;if(!o$3.enableShortcuts)return t$5;var a$5={children:n$1.createElement(n$1.Fragment,null,n$1.createElement(p$1,{containerRef:e$4.containerRef,store:r$4}),n$1.createElement(s$1,{pagesContainerRef:e$4.pagesContainerRef,store:r$4}),t$5.children)};return c$1(c$1({},t$5),a$5)},install:function(e$4){r$4.update(`zoom`,e$4.zoom)},onViewerStateChange:function(e$4){return r$4.update(`scale`,e$4.scale),e$4},zoomTo:function(e$4){var t$5=r$4.get(`zoom`);t$5&&t$5(e$4)},CurrentScale:function(e$4){return n$1.createElement(u$1,c$1({},e$4,{store:r$4}))},ZoomIn:a$4,ZoomInButton:function(){return n$1.createElement(a$4,null,(function(e$4){return n$1.createElement(h$1,c$1({},e$4))}))},ZoomInMenuItem:function(e$4){return n$1.createElement(a$4,null,(function(t$5){return n$1.createElement(k$1,{onClick:function(){t$5.onClick(),e$4.onClick()}})}))},ZoomOut:l$3,ZoomOutButton:function(){return n$1.createElement(l$3,null,(function(e$4){return n$1.createElement(M,c$1({},e$4))}))},ZoomOutMenuItem:function(e$4){return n$1.createElement(l$3,null,(function(t$5){return n$1.createElement(Z,{onClick:function(){t$5.onClick(),e$4.onClick()}})}))},Zoom:i$4,ZoomPopover:function(e$4){return n$1.createElement(i$4,null,(function(t$5){return n$1.createElement(d$1,c$1({levels:e$4?.levels},t$5))}))}}}})),require_lib$1=__commonJSMin(((exports,module)=>{module.exports=require_zoom_min()})),require_page_navigation_min=__commonJSMin((exports=>{var e=require_lib$3();function t(e$4){var t$4=Object.create(null);return e$4&&Object.keys(e$4).forEach((function(n$4){if(n$4!==`default`){var a$4=Object.getOwnPropertyDescriptor(e$4,n$4);Object.defineProperty(t$4,n$4,a$4.get?a$4:{enumerable:!0,get:function(){return e$4[n$4]}})}})),t$4.default=e$4,Object.freeze(t$4)}var n=t(require_react()),a=function(){return n.createElement(e.Icon,{size:16},n.createElement(`path`,{d:`M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552
            c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11
            C1.96,3.016,2.138,2.966,2.32,2.966z`}))},r=function(){return n.createElement(e.Icon,{size:16},n.createElement(`path`,{d:`M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043
            L23.541,5.627`}))},o=function(){return o=Object.assign||function(e$4){for(var t$4,n$4=1,a$4=arguments.length;n$4<a$4;n$4++)for(var r$4 in t$4=arguments[n$4])Object.prototype.hasOwnProperty.call(t$4,r$4)&&(e$4[r$4]=t$4[r$4]);return e$4},o.apply(this,arguments)},i=function(t$4){var a$4=n.useState(t$4.get(`currentPage`)||0),r$4=a$4[0],o$3=a$4[1],i$4=function(e$4){o$3(e$4)};return e.useIsomorphicLayoutEffect((function(){return t$4.subscribe(`currentPage`,i$4),function(){t$4.unsubscribe(`currentPage`,i$4)}}),[]),{currentPage:r$4}},u=function(e$4){var t$4=n.useState(e$4.get(`numberOfPages`)||0),a$4=t$4[0],r$4=t$4[1],o$3=function(e$5){r$4(e$5)};return n.useEffect((function(){return e$4.subscribe(`numberOfPages`,o$3),function(){e$4.unsubscribe(`numberOfPages`,o$3)}}),[]),{numberOfPages:a$4}},c=function(t$4){var a$4=t$4.store,r$4=n.useContext(e.LocalizationContext).l10n,o$3=n.useState(`1`),c$3=o$3[0],l$3=o$3[1],s$3=i(a$4).currentPage,g$3=u(a$4).numberOfPages;n.useEffect((function(){return l$3(`${s$3+1}`)}),[s$3]);var f$3=function(e$4){var t$5=a$4.get(`jumpToPage`);t$5&&t$5(e$4)},m$3=r$4&&r$4.pageNavigation?r$4.pageNavigation.enterPageNumber:`Enter a page number`;return n.createElement(`span`,{className:`rpv-page-navigation__current-page-input`},n.createElement(e.TextBox,{ariaLabel:m$3,testId:`page-navigation__current-page-input`,type:`text`,value:c$3,onChange:l$3,onKeyDown:function(e$4){switch(e$4.key){case`ArrowUp`:(a$5=s$3-1)>=0&&(l$3(`${a$5+1}`),f$3(a$5));break;case`ArrowDown`:(n$4=s$3+1)<g$3&&(l$3(`${n$4+1}`),f$3(n$4));break;case`Enter`:t$5=parseInt(c$3,10),c$3===``||t$5<1||t$5>g$3?l$3(`${s$3+1}`):f$3(t$5-1)}var t$5,n$4,a$5}}))},l=function(t$4){var a$4=t$4.children,r$4=t$4.doc,o$3=e.useIsMounted(),i$4=n.useState({loading:!0,labels:[]}),u$3=i$4[0],c$3=i$4[1];return n.useEffect((function(){r$4.getPageLabels().then((function(e$4){o$3.current&&c$3({loading:!1,labels:e$4||[]})}))}),[r$4.loadingTask.docId]),u$3.loading?n.createElement(n.Fragment,null):a$4(u$3.labels)},s=function(e$4){var t$4=e$4.children,a$4=e$4.store,r$4=function(e$5){var t$5=n.useState(e$5.get(`doc`)),a$5=t$5[0],r$5=t$5[1],o$4=function(e$6){r$5(e$6)};return n.useEffect((function(){return e$5.subscribe(`doc`,o$4),function(){e$5.unsubscribe(`doc`,o$4)}}),[]),a$5}(a$4),o$3=i(a$4).currentPage,c$3=u(a$4).numberOfPages,s$3=t$4||function(e$5){return n.createElement(n.Fragment,null,e$5.currentPage+1)};return r$4?n.createElement(l,{doc:r$4},(function(e$5){return s$3({currentPage:o$3,numberOfPages:c$3,pageLabel:e$5.length===c$3&&c$3>0?e$5[o$3]:``})})):n.createElement(n.Fragment,null)},g=function(){return n.createElement(e.Icon,{size:16},n.createElement(`path`,{d:`M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448
            c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373
            C22.143,20.984,21.965,21.034,21.783,21.034z`}))},f={left:0,top:8},m=function(t$4){var a$4=t$4.isDisabled,r$4=t$4.onClick,o$3=n.useContext(e.LocalizationContext).l10n,i$4=o$3&&o$3.pageNavigation?o$3.pageNavigation.goToFirstPage:`First page`;return n.createElement(e.Tooltip,{ariaControlsSuffix:`page-navigation-first`,position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaLabel:i$4,isDisabled:a$4,testId:`page-navigation__first-button`,onClick:r$4},n.createElement(g,null)),content:function(){return i$4},offset:f})},p=function(e$4){var t$4=e$4.children,a$4=e$4.store;return(t$4||function(e$5){return n.createElement(m,{isDisabled:e$5.isDisabled,onClick:e$5.onClick})})({isDisabled:i(a$4).currentPage===0,onClick:function(){var e$5=a$4.get(`jumpToPage`);e$5&&e$5(0)}})},v=function(t$4){var a$4=t$4.isDisabled,r$4=t$4.onClick,o$3=n.useContext(e.LocalizationContext).l10n,i$4=o$3&&o$3.pageNavigation?o$3.pageNavigation.goToFirstPage:`First page`;return n.createElement(e.MenuItem,{icon:n.createElement(g,null),isDisabled:a$4,testId:`page-navigation__first-menu`,onClick:r$4},i$4)},d={left:0,top:8},P=function(t$4){var r$4=t$4.isDisabled,o$3=t$4.onClick,i$4=n.useContext(e.LocalizationContext).l10n,u$3=i$4&&i$4.pageNavigation?i$4.pageNavigation.goToLastPage:`Last page`;return n.createElement(e.Tooltip,{ariaControlsSuffix:`page-navigation-last`,position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaLabel:u$3,isDisabled:r$4,testId:`page-navigation__last-button`,onClick:o$3},n.createElement(a,null)),content:function(){return u$3},offset:d})},b=function(e$4){var t$4=e$4.children,a$4=e$4.store,r$4=i(a$4).currentPage,o$3=u(a$4).numberOfPages;return(t$4||function(e$5){return n.createElement(P,{isDisabled:e$5.isDisabled,onClick:e$5.onClick})})({isDisabled:r$4+1>=o$3,onClick:function(){var e$5=a$4.get(`jumpToPage`);e$5&&e$5(o$3-1)}})},E=function(t$4){var r$4=t$4.isDisabled,o$3=t$4.onClick,i$4=n.useContext(e.LocalizationContext).l10n,u$3=i$4&&i$4.pageNavigation?i$4.pageNavigation.goToLastPage:`Last page`;return n.createElement(e.MenuItem,{icon:n.createElement(a,null),isDisabled:r$4,testId:`page-navigation__last-menu`,onClick:o$3},u$3)},C={left:0,top:8},D=function(t$4){var a$4=t$4.isDisabled,o$3=t$4.onClick,i$4=n.useContext(e.LocalizationContext).l10n,u$3=i$4&&i$4.pageNavigation?i$4.pageNavigation.goToNextPage:`Next page`;return n.createElement(e.Tooltip,{ariaControlsSuffix:`page-navigation-next`,position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaLabel:u$3,isDisabled:a$4,testId:`page-navigation__next-button`,onClick:o$3},n.createElement(r,null)),content:function(){return u$3},offset:C})},k=function(e$4){var t$4=e$4.children,a$4=e$4.store;return(t$4||function(e$5){return n.createElement(D,{onClick:e$5.onClick,isDisabled:e$5.isDisabled})})({isDisabled:i(a$4).currentPage+1>=u(a$4).numberOfPages,onClick:function(){var e$5=a$4.get(`jumpToNextPage`);e$5&&e$5()}})},T=function(t$4){var a$4=t$4.isDisabled,o$3=t$4.onClick,i$4=n.useContext(e.LocalizationContext).l10n,u$3=i$4&&i$4.pageNavigation?i$4.pageNavigation.goToNextPage:`Next page`;return n.createElement(e.MenuItem,{icon:n.createElement(r,null),isDisabled:a$4,testId:`page-navigation__next-menu`,onClick:o$3},u$3)},x=function(){return n.createElement(e.Icon,{size:16},n.createElement(`path`,{d:`M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8
            L0.535,18.373`}))},L={left:0,top:8},N=function(t$4){var a$4=t$4.isDisabled,r$4=t$4.onClick,o$3=n.useContext(e.LocalizationContext).l10n,i$4=o$3&&o$3.pageNavigation?o$3.pageNavigation.goToPreviousPage:`Previous page`;return n.createElement(e.Tooltip,{ariaControlsSuffix:`page-navigation-previous`,position:e.Position.BottomCenter,target:n.createElement(e.MinimalButton,{ariaLabel:i$4,isDisabled:a$4,testId:`page-navigation__previous-button`,onClick:r$4},n.createElement(x,null)),content:function(){return i$4},offset:L})},j=function(e$4){var t$4=e$4.store;return(e$4.children||function(e$5){return n.createElement(N,{isDisabled:e$5.isDisabled,onClick:e$5.onClick})})({isDisabled:i(t$4).currentPage<=0,onClick:function(){var e$5=t$4.get(`jumpToPreviousPage`);e$5&&e$5()}})},I=function(t$4){var a$4=t$4.isDisabled,r$4=t$4.onClick,o$3=n.useContext(e.LocalizationContext).l10n,i$4=o$3&&o$3.pageNavigation?o$3.pageNavigation.goToPreviousPage:`Previous page`;return n.createElement(e.MenuItem,{icon:n.createElement(x,null),isDisabled:a$4,testId:`page-navigation__previous-menu`,onClick:r$4},i$4)},h=function(e$4){var t$4=e$4.children,a$4=e$4.store,r$4=u(a$4).numberOfPages;return t$4?t$4({numberOfPages:r$4}):n.createElement(n.Fragment,null,r$4)},y=function(t$4){var a$4=t$4.containerRef,r$4=t$4.numPages,o$3=t$4.store,u$3=i(o$3).currentPage,c$3=n.useRef(u$3);c$3.current=u$3;var l$3=n.useRef(!1),s$3=function(){l$3.current=!0},g$3=function(){l$3.current=!1},f$3=function(t$5){var n$4=a$4.current,i$4=l$3.current||document.activeElement&&n$4.contains(document.activeElement);if(n$4&&i$4){var u$4,s$4,g$4=t$5.altKey&&t$5.key===`ArrowDown`||!t$5.shiftKey&&!t$5.altKey&&t$5.key===`PageDown`,f$4=t$5.altKey&&t$5.key===`ArrowUp`||!t$5.shiftKey&&!t$5.altKey&&t$5.key===`PageUp`;if(g$4)return t$5.preventDefault(),u$4=o$3.get(`jumpToPage`),s$4=c$3.current+1,void(u$4&&s$4<r$4&&u$4(s$4));if(f$4)return t$5.preventDefault(),void function(){var e$4=o$3.get(`jumpToPage`),t$6=c$3.current-1;e$4&&t$6>=0&&e$4(t$6)}();if(e.isMac()?t$5.metaKey&&!t$5.ctrlKey:t$5.altKey)switch(t$5.key){case`ArrowLeft`:t$5.preventDefault(),function(){var e$4=o$3.get(`jumpToPreviousDestination`);e$4&&e$4()}();break;case`ArrowRight`:t$5.preventDefault(),function(){var e$4=o$3.get(`jumpToNextDestination`);e$4&&e$4()}()}}};return n.useEffect((function(){var e$4=a$4.current;if(e$4)return document.addEventListener(`keydown`,f$3),e$4.addEventListener(`mouseenter`,s$3),e$4.addEventListener(`mouseleave`,g$3),function(){document.removeEventListener(`keydown`,f$3),e$4.removeEventListener(`mouseenter`,s$3),e$4.removeEventListener(`mouseleave`,g$3)}}),[a$4.current]),n.createElement(n.Fragment,null)};exports.DownArrowIcon=a,exports.NextIcon=r,exports.PreviousIcon=x,exports.UpArrowIcon=g,exports.pageNavigationPlugin=function(t$4){var a$4=n.useMemo((function(){return Object.assign({},{enableShortcuts:!0},t$4)}),[]),r$4=n.useMemo((function(){return e.createStore()}),[]),i$4=function(e$4){return n.createElement(p,o({},e$4,{store:r$4}))},u$3=function(e$4){return n.createElement(b,o({},e$4,{store:r$4}))},l$3=function(e$4){return n.createElement(k,o({},e$4,{store:r$4}))},g$3=function(e$4){return n.createElement(j,o({},e$4,{store:r$4}))};return{install:function(e$4){r$4.update(`jumpToDestination`,e$4.jumpToDestination),r$4.update(`jumpToNextDestination`,e$4.jumpToNextDestination),r$4.update(`jumpToNextPage`,e$4.jumpToNextPage),r$4.update(`jumpToPage`,e$4.jumpToPage),r$4.update(`jumpToPreviousDestination`,e$4.jumpToPreviousDestination),r$4.update(`jumpToPreviousPage`,e$4.jumpToPreviousPage)},renderViewer:function(e$4){var t$5=e$4.slot;if(!a$4.enableShortcuts)return t$5;var i$5={children:n.createElement(n.Fragment,null,n.createElement(y,{containerRef:e$4.containerRef,numPages:e$4.doc.numPages,store:r$4}),t$5.children)};return o(o({},t$5),i$5)},onDocumentLoad:function(e$4){r$4.update(`doc`,e$4.doc),r$4.update(`numberOfPages`,e$4.doc.numPages)},onViewerStateChange:function(e$4){return r$4.update(`currentPage`,e$4.pageIndex),e$4},jumpToNextPage:function(){var e$4=r$4.get(`jumpToNextPage`);e$4&&e$4()},jumpToPage:function(e$4){var t$5=r$4.get(`jumpToPage`);t$5&&t$5(e$4)},jumpToPreviousPage:function(){var e$4=r$4.get(`jumpToPreviousPage`);e$4&&e$4()},CurrentPageInput:function(){return n.createElement(c,{store:r$4})},CurrentPageLabel:function(e$4){return n.createElement(s,o({},e$4,{store:r$4}))},GoToFirstPage:i$4,GoToFirstPageButton:function(){return n.createElement(i$4,null,(function(e$4){return n.createElement(m,o({},e$4))}))},GoToFirstPageMenuItem:function(e$4){return n.createElement(i$4,null,(function(t$5){return n.createElement(v,{isDisabled:t$5.isDisabled,onClick:function(){t$5.onClick(),e$4.onClick()}})}))},GoToLastPage:u$3,GoToLastPageButton:function(){return n.createElement(u$3,null,(function(e$4){return n.createElement(P,o({},e$4))}))},GoToLastPageMenuItem:function(e$4){return n.createElement(u$3,null,(function(t$5){return n.createElement(E,{isDisabled:t$5.isDisabled,onClick:function(){t$5.onClick(),e$4.onClick()}})}))},GoToNextPage:l$3,GoToNextPageButton:function(){return n.createElement(l$3,null,(function(e$4){return n.createElement(D,o({},e$4))}))},GoToNextPageMenuItem:function(e$4){return n.createElement(l$3,null,(function(t$5){return n.createElement(T,{isDisabled:t$5.isDisabled,onClick:function(){t$5.onClick(),e$4.onClick()}})}))},GoToPreviousPage:g$3,GoToPreviousPageButton:function(){return n.createElement(g$3,null,(function(e$4){return n.createElement(N,o({},e$4))}))},GoToPreviousPageMenuItem:function(e$4){return n.createElement(g$3,null,(function(t$5){return n.createElement(I,{isDisabled:t$5.isDisabled,onClick:function(){t$5.onClick(),e$4.onClick()}})}))},NumberOfPages:function(e$4){return n.createElement(h,o({},e$4,{store:r$4}))}}}})),require_lib=__commonJSMin(((exports,module)=>{module.exports=require_page_navigation_min()})),import_lib$3=require_lib(),import_lib$2=require_lib$1(),import_lib$1=require_lib$2(),import_lib=require_lib$3(),MAX_FILE_SIZE_MB=2,MAX_FILE_SIZE_BYTES=MAX_FILE_SIZE_MB*1024*1024;function PdfDropViewer({content,onUpdate,height=`100%`}){let[fileUrl,setFileUrl]=(0,import_react.useState)(null),[fileName,setFileName]=(0,import_react.useState)(null),inputRef=(0,import_react.useRef)(null),drop$1=(0,import_lib$1.dropPlugin)(),zoomPluginInstance=(0,import_lib$2.zoomPlugin)(),pageNavigationPluginInstance=(0,import_lib$3.pageNavigationPlugin)(),{ZoomIn,ZoomOut}=zoomPluginInstance,{GoToNextPage,GoToPreviousPage}=pageNavigationPluginInstance;(0,import_react.useEffect)(()=>{content?.fileData&&(setFileUrl(content.fileData),setFileName(content.fileName||`Document.pdf`))},[content?.fileData]),(0,import_react.useEffect)(()=>()=>{fileUrl?.startsWith(`blob:`)&&URL.revokeObjectURL(fileUrl)},[fileUrl]);let processFile=file=>{if(file.type!==`application/pdf`){alert(`PDF    .`);return}let nextUrl=URL.createObjectURL(file);if(setFileUrl(prev=>(prev?.startsWith(`blob:`)&&URL.revokeObjectURL(prev),nextUrl)),setFileName(file.name),file.size>MAX_FILE_SIZE_BYTES)alert(`  (${Math.round(file.size/1024/1024)}MB)  . ( ${MAX_FILE_SIZE_MB}MB)\n .`),onUpdate&&onUpdate({fileData:null,fileName:null});else{let reader=new FileReader;reader.onload=e$4=>{let base64=e$4.target?.result;onUpdate&&onUpdate({fileData:base64,fileName:file.name})},reader.readAsDataURL(file)}};return(0,import_jsx_runtime.jsxs)(`div`,{onDropCapture:e$4=>{let f$3=e$4.dataTransfer.files?.[0];f$3&&processFile(f$3)},style:{height},className:`w-full h-full flex flex-col relative bg-white border border-gray-200 rounded-xl overflow-hidden group`,children:[(0,import_jsx_runtime.jsx)(import_lib.Worker,{workerUrl:`https://unpkg.com/pdfjs-dist@3.4.120/build/pdf.worker.min.js`,children:fileUrl?(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 w-full h-full overflow-hidden relative`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full`,children:(0,import_jsx_runtime.jsx)(import_lib.Viewer,{fileUrl,plugins:[drop$1,zoomPluginInstance,pageNavigationPluginInstance]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute top-4 right-4 flex flex-col gap-3 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none group-hover:pointer-events-auto`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-1 bg-white/90 backdrop-blur-sm border border-gray-200/50 shadow-sm rounded-lg p-1.5 text-gray-600`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>inputRef.current?.click(),className:`p-1.5 hover:bg-indigo-50 hover:text-indigo-600 rounded transition-colors`,title:fileName||`PDF `,children:(0,import_jsx_runtime.jsx)(Upload,{size:16})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{setFileUrl(null),setFileName(null),onUpdate&&onUpdate({fileData:null,fileName:null})},className:`p-1.5 hover:bg-red-50 hover:text-red-500 rounded transition-colors`,title:``,children:(0,import_jsx_runtime.jsx)(Trash2,{size:16})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-1 bg-white/90 backdrop-blur-sm border border-gray-200/50 shadow-sm rounded-lg p-1.5 text-gray-600`,children:[(0,import_jsx_runtime.jsx)(GoToPreviousPage,{children:props=>(0,import_jsx_runtime.jsx)(`button`,{onClick:props.onClick,disabled:props.isDisabled,className:`p-1.5 hover:bg-gray-100 rounded disabled:opacity-30 disabled:hover:bg-transparent transition-colors`,title:` `,children:(0,import_jsx_runtime.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,import_jsx_runtime.jsx)(`path`,{d:`m18 15-6-6-6 6`})})})}),(0,import_jsx_runtime.jsx)(GoToNextPage,{children:props=>(0,import_jsx_runtime.jsx)(`button`,{onClick:props.onClick,disabled:props.isDisabled,className:`p-1.5 hover:bg-gray-100 rounded disabled:opacity-30 disabled:hover:bg-transparent transition-colors`,title:` `,children:(0,import_jsx_runtime.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,import_jsx_runtime.jsx)(`path`,{d:`m6 9 6 6 6-6`})})})}),(0,import_jsx_runtime.jsx)(`div`,{className:`h-px bg-gray-200 my-0.5`}),(0,import_jsx_runtime.jsx)(ZoomIn,{children:props=>(0,import_jsx_runtime.jsx)(`button`,{onClick:props.onClick,className:`p-1.5 hover:bg-gray-100 rounded transition-colors`,title:``,children:(0,import_jsx_runtime.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,import_jsx_runtime.jsx)(`circle`,{cx:`11`,cy:`11`,r:`8`}),(0,import_jsx_runtime.jsx)(`line`,{x1:`21`,x2:`16.65`,y1:`21`,y2:`16.65`}),(0,import_jsx_runtime.jsx)(`line`,{x1:`11`,x2:`11`,y1:`8`,y2:`14`}),(0,import_jsx_runtime.jsx)(`line`,{x1:`8`,x2:`14`,y1:`11`,y2:`11`})]})})}),(0,import_jsx_runtime.jsx)(ZoomOut,{children:props=>(0,import_jsx_runtime.jsx)(`button`,{onClick:props.onClick,className:`p-1.5 hover:bg-gray-100 rounded transition-colors`,title:``,children:(0,import_jsx_runtime.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,import_jsx_runtime.jsx)(`circle`,{cx:`11`,cy:`11`,r:`8`}),(0,import_jsx_runtime.jsx)(`line`,{x1:`21`,x2:`16.65`,y1:`21`,y2:`16.65`}),(0,import_jsx_runtime.jsx)(`line`,{x1:`8`,x2:`14`,y1:`11`,y2:`11`})]})})})]})]})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full flex flex-col items-center justify-center bg-gray-50 text-gray-400 gap-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 bg-white rounded-full shadow-sm`,children:(0,import_jsx_runtime.jsx)(FileText,{size:32,className:`text-gray-300`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-center`,children:[(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm font-medium text-gray-600`,children:`PDF   `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-gray-400 mt-1`,children:` 2MB  `})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>inputRef.current?.click(),className:`px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold rounded-lg transition-colors flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Upload,{size:14}),` `]})]})}),(0,import_jsx_runtime.jsx)(`input`,{type:`file`,ref:inputRef,accept:`application/pdf`,className:`hidden`,onChange:e$4=>{let file=e$4.target.files?.[0];file&&processFile(file)}})]})}const EditableText=({text,tagName:Tag$1,className,style:style$3,onUpdate,placeholder})=>{let[isEditing,setIsEditing]=(0,import_react.useState)(!1),[value,setValue]=(0,import_react.useState)(text),inputRef=(0,import_react.useRef)(null);return(0,import_react.useEffect)(()=>{setValue(text)},[text]),(0,import_react.useEffect)(()=>{isEditing&&inputRef.current&&(inputRef.current.focus(),inputRef.current.select(),inputRef.current.style.height=`auto`,inputRef.current.style.height=inputRef.current.scrollHeight+`px`)},[isEditing]),isEditing?(0,import_jsx_runtime.jsx)(`textarea`,{ref:inputRef,value,onChange:e$4=>{setValue(e$4.target.value),e$4.target.style.height=`auto`,e$4.target.style.height=e$4.target.scrollHeight+`px`},onBlur:()=>{setIsEditing(!1),value!==text&&onUpdate(value)},onKeyDown:e$4=>{e$4.key===`Enter`&&!e$4.shiftKey&&(e$4.preventDefault(),inputRef.current?.blur())},className:`w-full bg-transparent outline-none resize-none overflow-hidden p-0 m-0 leading-none ${className}`,style:{...style$3,lineHeight:`1`},placeholder}):(0,import_jsx_runtime.jsx)(Tag$1,{className:`cursor-text hover:bg-black/5 rounded transition-colors border border-transparent hover:border-black/10 w-full m-0 p-0 leading-none block ${className}`,style:{...style$3},onClick:e$4=>{e$4.stopPropagation(),setIsEditing(!0)},children:text||(0,import_jsx_runtime.jsx)(`span`,{className:`text-gray-400 opacity-50 block`,children:placeholder||` ...`})})};var ToggleItem=({block,onUpdateBlock,style:style$3})=>{let{content}=block,[isOpen,setIsOpen]=(0,import_react.useState)(!1),items=content.items||[],handleItemUpdate=(index$2,newVal)=>{let newItems=[...items];newItems[index$2]=newVal,onUpdateBlock(block.id,{content:{...content,items:newItems}})};return(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full`,children:[(0,import_jsx_runtime.jsxs)(`div`,{onClick:e$4=>{e$4.stopPropagation(),setIsOpen(!isOpen)},className:`flex items-center gap-1 cursor-pointer hover:bg-gray-100 p-0.5 rounded select-none group`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-gray-400 group-hover:text-gray-600`,children:isOpen?(0,import_jsx_runtime.jsx)(ChevronDown,{size:16}):(0,import_jsx_runtime.jsx)(ChevronRight,{size:16})}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 min-w-0 font-bold`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`span`,text:content.title,onUpdate:val=>onUpdateBlock(block.id,{content:{...content,title:val}}),style:style$3,className:`truncate`,placeholder:` `})})]}),isOpen&&(0,import_jsx_runtime.jsx)(`ul`,{className:`pl-6 mt-1 list-disc text-gray-600 space-y-1`,children:items.map((it$1,i$4)=>(0,import_jsx_runtime.jsx)(`li`,{style:{fontSize:`0.9em`},className:`break-words pl-1 flex items-center`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`span`,text:it$1,onUpdate:val=>handleItemUpdate(i$4,val),style:{...style$3,fontWeight:`normal`},placeholder:` ${i$4+1}`})},i$4))})]})},AccordionItem=({block,onUpdateBlock,style:style$3})=>{let{content}=block,[isOpen,setIsOpen]=(0,import_react.useState)(!1);return(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full border border-gray-200 rounded-lg overflow-hidden bg-white shadow-sm flex flex-col`,children:[(0,import_jsx_runtime.jsxs)(`div`,{onClick:e$4=>{e$4.stopPropagation(),setIsOpen(!isOpen)},className:`bg-gray-50 p-1 flex justify-between items-center cursor-pointer hover:bg-gray-100 transition-colors shrink-0`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 min-w-0 font-bold text-gray-800`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`span`,text:content.title,onUpdate:val=>onUpdateBlock(block.id,{content:{...content,title:val}}),style:style$3,className:`truncate`,placeholder:` `})}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-gray-500 ml-2`,children:isOpen?(0,import_jsx_runtime.jsx)(ChevronDown,{size:16}):(0,import_jsx_runtime.jsx)(ChevronRight,{size:16})})]}),isOpen&&(0,import_jsx_runtime.jsx)(`div`,{className:`p-1 text-sm border-t border-gray-100 bg-white text-gray-600 leading-relaxed break-words h-full`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`p`,text:content.body,onUpdate:val=>onUpdateBlock(block.id,{content:{...content,body:val}}),style:style$3,className:`whitespace-pre-wrap`,placeholder:` ...`})})]})},SpoilerItem=({block,onUpdateBlock,style:style$3})=>{let{content}=block,[isRevealed,setIsRevealed]=(0,import_react.useState)(!1);return(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>setIsRevealed(!isRevealed),className:`w-full relative p-1 rounded-lg border transition-all cursor-pointer group select-none flex flex-col
                ${isRevealed?`bg-gray-50 border-gray-200 text-gray-800`:`bg-gray-900 border-gray-800 text-transparent hover:bg-gray-800`}
            `,style:style$3,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`break-words w-full h-full ${isRevealed?``:`blur-sm select-none pointer-events-none`}`,children:isRevealed?(0,import_jsx_runtime.jsx)(EditableText,{tagName:`p`,text:content.text,onUpdate:val=>onUpdateBlock(block.id,{content:{...content,text:val}}),style:style$3,placeholder:` `}):(0,import_jsx_runtime.jsx)(`p`,{children:content.text||` `})}),!isRevealed&&(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute inset-0 flex items-center justify-center gap-2 text-gray-400 font-medium`,children:[(0,import_jsx_runtime.jsx)(EyeOff,{size:18}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm`,children:` ( )`})]}),isRevealed&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute right-2 top-2 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400`,children:(0,import_jsx_runtime.jsx)(Eye,{size:14})})]})},TypingTextItem=({content,style:style$3})=>{let[displayedText,setDisplayedText]=(0,import_react.useState)(``),fullText=content.text||``,speed=content.speed||100,isBackspaceMode=content.isBackspaceMode||!1;return(0,import_react.useEffect)(()=>{let timeoutId,currentText=``,isDeleting=!0,animate=()=>{let currentLen=currentText.length;isDeleting?(currentText=fullText.substring(0,currentLen-1),setDisplayedText(currentText),currentText.length===0?(isDeleting=!1,timeoutId=setTimeout(animate,500)):timeoutId=setTimeout(animate,speed/2)):(currentText=fullText.substring(0,currentLen+1),setDisplayedText(currentText),currentText.length===fullText.length?isBackspaceMode?(isDeleting=!0,timeoutId=setTimeout(animate,2e3)):timeoutId=setTimeout(()=>{currentText=``,setDisplayedText(``),animate()},2e3):timeoutId=setTimeout(animate,speed))};return animate(),()=>clearTimeout(timeoutId)},[fullText,speed,isBackspaceMode]),(0,import_jsx_runtime.jsxs)(`div`,{style:style$3,className:`h-full w-full min-h-[1.5em] font-mono break-all`,children:[displayedText,(0,import_jsx_runtime.jsx)(`span`,{className:`animate-pulse border-r-2 border-indigo-500 ml-1 align-middle h-4 inline-block`})]})};function DroppableColumn({id:id$3,onClick,children:children$1}){let{setNodeRef,isOver}=useDroppable({id:id$3,data:{containerId:id$3,isContainer:!0}});return(0,import_jsx_runtime.jsx)(`div`,{ref:setNodeRef,onClick,className:`flex flex-col gap-1 w-full min-h-[50px] rounded-lg border-2 border-transparent p-1 relative transition-all
        ${isOver?`border-indigo-400 bg-indigo-50/30`:`hover:border-gray-300 hover:bg-gray-50/50`}`,children:children$1})}var RadarChartItem=({content,style:style$3,styles:styles$1})=>{let data=content.data||[],count=data.length;if(count<3)return(0,import_jsx_runtime.jsx)(`div`,{className:`text-gray-400 text-xs p-4 text-center`,children:` `});let size=200,center=200/2,radius=80,maxValue=100,polarToCartesian=(centerX,centerY,r$4,angleInDegrees)=>{let angleInRadians=(angleInDegrees-90)*Math.PI/180;return{x:centerX+r$4*Math.cos(angleInRadians),y:centerY+r$4*Math.sin(angleInRadians)}},angleSlice=360/count,gridPolygons=[20,40,60,80,100].map(level=>{let r$4=80*level/100;return(0,import_jsx_runtime.jsx)(`polygon`,{points:data.map((_$1,i$4)=>{let{x:x$2,y:y$2}=polarToCartesian(100,100,r$4,i$4*angleSlice);return`${x$2},${y$2}`}).join(` `),fill:`none`,stroke:`#e5e7eb`,strokeWidth:`1`},level)}),axes=data.map((item,i$4)=>{let{x:x$2,y:y$2}=polarToCartesian(100,100,80,i$4*angleSlice);return(0,import_jsx_runtime.jsxs)(`g`,{children:[(0,import_jsx_runtime.jsx)(`line`,{x1:100,y1:100,x2:x$2,y2:y$2,stroke:`#e5e7eb`,strokeWidth:`1`}),content.showLabels!==!1&&(0,import_jsx_runtime.jsx)(`text`,{x:x$2*1.15-100*.15,y:y$2*1.15-100*.15,dy:`0.35em`,textAnchor:`middle`,className:`text-[10px] fill-gray-500 font-bold`,style:{fontSize:`10px`},children:item.label})]},i$4)}),dataPoints=data.map((item,i$4)=>{let{x:x$2,y:y$2}=polarToCartesian(100,100,80*Math.min(Math.max(item.value,0),100)/100,i$4*angleSlice);return`${x$2},${y$2}`}).join(` `),chartColor=styles$1.color||`#6366f1`;return(0,import_jsx_runtime.jsx)(`div`,{style:style$3,className:`h-full w-full flex justify-center items-center p-0 bg-white rounded-lg border border-gray-100`,children:(0,import_jsx_runtime.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 200 200`,className:`max-w-[250px] aspect-square overflow-visible`,children:[gridPolygons,axes,(0,import_jsx_runtime.jsx)(`polygon`,{points:dataPoints,fill:chartColor,fillOpacity:`0.3`,stroke:chartColor,strokeWidth:`2`}),data.map((item,i$4)=>{let{x:x$2,y:y$2}=polarToCartesian(100,100,80*Math.min(Math.max(item.value,0),100)/100,i$4*angleSlice);return(0,import_jsx_runtime.jsx)(`circle`,{cx:x$2,cy:y$2,r:`3`,fill:chartColor},i$4)})]})})},RatingItem=({block,onUpdateBlock})=>{let{content,styles:styles$1,id:id$3}=block,value=content.value||0,max=content.max||5,iconType=content.icon||`star`,IconComponent={star:Star,heart:Heart,zap:Zap,thumb:ThumbsUp}[iconType]||Star,handleClick=idx=>{onUpdateBlock&&onUpdateBlock(id$3,{content:{...content,value:idx+1}})};return(0,import_jsx_runtime.jsxs)(`div`,{style:{justifyContent:styles$1.align===`center`?`center`:styles$1.align===`right`?`flex-end`:`flex-start`,...styles$1},className:`flex items-center gap-1 w-full h-full min-h-[40px]`,children:[Array.from({length:max}).map((_$1,i$4)=>{let isActive$1=i$4<value;return(0,import_jsx_runtime.jsx)(`div`,{onClick:e$4=>{e$4.stopPropagation(),handleClick(i$4)},className:`cursor-pointer transition-transform hover:scale-110 active:scale-95`,children:(0,import_jsx_runtime.jsx)(IconComponent,{size:styles$1.fontSize?Number(styles$1.fontSize)+4:24,fill:isActive$1?styles$1.color||`#F59E0B`:`none`,stroke:isActive$1?styles$1.color||`#F59E0B`:`#d1d5db`,strokeWidth:isActive$1?0:2,className:isActive$1?`text-transparent`:`text-gray-300`,style:{stroke:isActive$1?`none`:styles$1.color?styles$1.color:`#d1d5db`,fill:isActive$1?styles$1.color||`#F59E0B`:`none`}})},i$4)}),(0,import_jsx_runtime.jsxs)(`span`,{className:`ml-2 text-sm font-bold text-gray-500`,children:[value,`/`,max]})]})},BlockRenderer=props=>{let{block,onSelectBlock,onSetActiveContainer,onUpdateBlock,selectedBlockId}=props,{styles:styles$1,content,type}=block,{block:_unusedBlock,...otherProps}=props;block.layout;let textDecoration=[styles$1.underline?`underline`:``,styles$1.strikethrough?`line-through`:``].filter(Boolean).join(` `),{justifyContent,alignItems,alignContent,display,height,minHeight,...safeStyle}=styles$1,commonStyle={color:styles$1.color,backgroundColor:styles$1.bgColor,fontSize:styles$1.fontSize?`${styles$1.fontSize}px`:void 0,textAlign:styles$1.align,fontWeight:styles$1.bold?`bold`:`normal`,fontStyle:styles$1.italic?`italic`:`normal`,textDecoration:textDecoration||void 0};if(block.id,type===`columns`){let layout$1=content.layout||[[],[]],defaultWidths=layout$1.map(()=>100/layout$1.length),columnWidths=content.columnWidths||defaultWidths,isResizingRef=import_react.useRef(null),handleMouseDown=(0,import_react.useCallback)((e$4,index$2)=>{e$4.preventDefault(),e$4.stopPropagation();let containerWidth=e$4.currentTarget.parentElement?.clientWidth||0;if(!containerWidth)return;isResizingRef.current={index:index$2,startX:e$4.clientX,startWidths:[...columnWidths],containerWidth};let handleMouseMove=moveEvent=>{if(!isResizingRef.current)return;moveEvent.preventDefault();let{index:index$3,startX,startWidths,containerWidth:containerWidth$1}=isResizingRef.current,deltaPercent=(moveEvent.clientX-startX)/containerWidth$1*100,newWidths=[...startWidths];newWidths[index$3]=Math.max(5,Math.min(95,startWidths[index$3]+deltaPercent)),newWidths[index$3+1]=Math.max(5,Math.min(95,startWidths[index$3+1]-deltaPercent)),onUpdateBlock(block.id,{content:{...content,columnWidths:newWidths}})},handleMouseUp=()=>{isResizingRef.current=null,document.removeEventListener(`mousemove`,handleMouseMove),document.removeEventListener(`mouseup`,handleMouseUp)};document.addEventListener(`mousemove`,handleMouseMove),document.addEventListener(`mouseup`,handleMouseUp)},[block.id,content,columnWidths,onUpdateBlock]);return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex w-full h-full relative`,children:[` `,layout$1.map((colBlocks,index$2)=>{let columnContainerId=`COL-${block.id}-${index$2}`,widthPercent=columnWidths[index$2]||100/layout$1.length;return(0,import_jsx_runtime.jsxs)(import_react.Fragment,{children:[(0,import_jsx_runtime.jsx)(`div`,{style:{width:`${widthPercent}%`},className:`flex flex-col h-full min-w-[20px] transition-[width] duration-75 relative bg-white/50`,children:(0,import_jsx_runtime.jsx)(DroppableColumn,{id:columnContainerId,onClick:e$4=>{e$4.stopPropagation(),onSetActiveContainer({blockId:block.id,colIndex:index$2}),onSelectBlock(null)},children:(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full`,children:[` `,(0,import_jsx_runtime.jsx)(SortableContext,{items:colBlocks.map(c$3=>c$3.id),strategy:verticalListSortingStrategy,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`relative z-10 flex flex-col gap-0 w-full min-h-[50px]`,children:[` `,colBlocks.map(child=>(0,import_jsx_runtime.jsx)(ColumnSortableItem_default,{child,columnContainerId,selectedBlockId:props.selectedBlockId,onSelectBlock:props.onSelectBlock,onRemoveBlock:props.onRemoveBlock,activeContainer:props.activeContainer,onSetActiveContainer:props.onSetActiveContainer,onUpdateBlock:props.onUpdateBlock},child.id))]})})]})})}),index$2<layout$1.length-1&&(0,import_jsx_runtime.jsx)(`div`,{className:`w-[4px] -ml-[2px] -mr-[2px] z-50 cursor-col-resize hover:bg-indigo-400 active:bg-indigo-600 transition-colors h-full flex items-center justify-center group/handle`,onMouseDown:e$4=>handleMouseDown(e$4,index$2),children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-[1px] h-full bg-gray-200 group-hover/handle:bg-indigo-400 group-active/handle:bg-indigo-600`})})]},index$2)})]})}if(type===`custom-block`){let children$1=content.children||[];return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-0 w-full h-full relative`,children:[(0,import_jsx_runtime.jsx)(DecorationLayer_default,{decorations:content.decorations||[]}),children$1.map(childBlock=>{let layout$1=childBlock.layout||{w:`100%`,h:`auto`},width=`100%`,height$1=`auto`;return typeof layout$1.w==`number`?width=`${layout$1.w}px`:layout$1.w&&(width=layout$1.w),typeof layout$1.h==`number`?height$1=`${layout$1.h}px`:layout$1.h&&(height$1=layout$1.h),(0,import_jsx_runtime.jsx)(`div`,{style:{width,height:height$1,minHeight:`20px`,position:`relative`,overflow:`hidden`},children:(0,import_jsx_runtime.jsx)(BlockRenderer,{block:childBlock,selectedBlockId:null,onSelectBlock:()=>{},onRemoveBlock:()=>{},activeContainer:props.activeContainer,onSetActiveContainer:props.onSetActiveContainer,onUpdateBlock})},childBlock.id)})]})}let handleListUpdate=(items,index$2,value)=>{let newItems=[...items];newItems[index$2]=value,onUpdateBlock(block.id,{content:{...content,items:newItems}})};return(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full min-h-[30px] relative`,children:[(()=>{switch(type){case`heading1`:return(0,import_jsx_runtime.jsx)(`div`,{className:`w-full flex flex-col`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`h1`,text:content.text,onUpdate:val=>onUpdateBlock(block.id,{content:{...content,text:val}}),style:commonStyle,className:`text-2xl font-bold break-words leading-none m-0 p-0 block`,placeholder:`Heading 1`})});case`heading2`:return(0,import_jsx_runtime.jsx)(`div`,{className:`w-full flex flex-col`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`h2`,text:content.text,onUpdate:val=>onUpdateBlock(block.id,{content:{...content,text:val}}),style:commonStyle,className:`text-xl font-bold break-words leading-none m-0 p-0 block`,placeholder:`Heading 2`})});case`heading3`:return(0,import_jsx_runtime.jsx)(`div`,{className:`w-full overflow-hidden flex flex-col`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`h3`,text:content.text,onUpdate:val=>onUpdateBlock(block.id,{content:{...content,text:val}}),style:commonStyle,className:`text-lg font-semibold break-words leading-none m-0 p-0 block`,placeholder:`Heading 3`})});case`text`:return(0,import_jsx_runtime.jsx)(`div`,{className:`w-full flex flex-col`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`p`,text:content.text,onUpdate:val=>onUpdateBlock(block.id,{content:{...content,text:val}}),style:commonStyle,className:`whitespace-pre-wrap break-words leading-snug m-0 p-0 block`,placeholder:` ...`})});case`quote`:return(0,import_jsx_runtime.jsx)(`div`,{style:{...commonStyle,borderLeftColor:styles$1.color||`#333`},className:`border-l-4 pl-1 py-0 my-0 text-gray-600 italic bg-gray-50 rounded-r break-words flex flex-col`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`div`,text:content.text,onUpdate:val=>onUpdateBlock(block.id,{content:{...content,text:val}}),style:{...commonStyle,fontStyle:`italic`},className:`leading-none m-0 p-0 block`,placeholder:` ...`})});case`book-info`:return(0,import_jsx_runtime.jsx)(BookInfoWidget_default,{block});case`movie-ticket`:return(0,import_jsx_runtime.jsx)(MovieTicketWidget_default,{block,onUpdateBlock});case`link-bookmark`:return(0,import_jsx_runtime.jsx)(LinkBookmarkWidget,{block,onUpdateBlock});case`travel-plan`:return(0,import_jsx_runtime.jsx)(TravelPlanWidget,{block,onUpdateBlock});case`mindmap`:{let content0=content||{},nodes=content0.nodes||[],edges=content0.edges||[],selectedNodeId=content0.selectedNodeId??null,setContent=patch$1=>{props.onUpdateBlock(block.id,{content:{...content0,...patch$1}})},onNodesChange=(0,import_react.useCallback)(changes=>{setContent({nodes:applyNodeChanges(changes,nodes)})},[nodes]),onEdgesChange=(0,import_react.useCallback)(changes=>{setContent({edges:applyEdgeChanges(changes,edges)})},[edges]),onConnect=(0,import_react.useCallback)(connection=>{setContent({edges:addEdge({...connection,id:`mm-e-${Date.now()}-${Math.random().toString(36).slice(2,6)}`},edges)})},[edges]),addNode=()=>{let newId$1=`mm-n-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,newNode={id:newId$1,type:`mindmap`,position:{x:40*nodes.length,y:40*nodes.length},data:{label:`New Node`}};setContent({nodes:[...nodes,newNode],selectedNodeId:newId$1})},deleteSelectedNode=()=>{selectedNodeId&&setContent({nodes:nodes.filter(n$4=>n$4.id!==selectedNodeId),edges:edges.filter(e$4=>e$4.source!==selectedNodeId&&e$4.target!==selectedNodeId),selectedNodeId:null})},updateSelectedLabel=label=>{selectedNodeId&&setContent({nodes:nodes.map(n$4=>n$4.id===selectedNodeId?{...n$4,data:{...n$4.data,label}}:n$4)})};return(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full rounded-lg border border-gray-200 bg-white overflow-hidden`,onPointerDownCapture:e$4=>e$4.stopPropagation(),onMouseDownCapture:e$4=>e$4.stopPropagation(),onTouchStartCapture:e$4=>e$4.stopPropagation(),children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`px-3 py-2 text-[11px] text-gray-500 border-b bg-gray-50 flex items-center justify-between gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold truncate`,children:`Mind Map`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{className:`text-xs font-bold text-indigo-600`,onClick:e$4=>{e$4.stopPropagation(),addNode()},children:`+ Node`}),(0,import_jsx_runtime.jsx)(`button`,{className:`text-xs font-bold text-red-500 disabled:opacity-40`,disabled:!selectedNodeId,onClick:e$4=>{e$4.stopPropagation(),deleteSelectedNode()},children:`Delete`})]})]}),(0,import_jsx_runtime.jsx)(`div`,{style:{height:360},children:(0,import_jsx_runtime.jsxs)(index,{nodes,edges,onNodesChange,onEdgesChange,onConnect,onNodeClick:(_$1,node)=>setContent({selectedNodeId:node.id}),fitView:!0,children:[(0,import_jsx_runtime.jsx)(Controls,{showInteractive:!1}),(0,import_jsx_runtime.jsx)(Background,{})]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-3 border-t bg-white`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-[11px] text-gray-500 mb-1`,children:`Selected node`}),(0,import_jsx_runtime.jsx)(`input`,{className:`w-full border rounded px-2 py-1 text-sm`,placeholder:` `,value:selectedNodeId?nodes.find(n$4=>n$4.id===selectedNodeId)?.data?.label??``:``,disabled:!selectedNodeId,onChange:e$4=>updateSelectedLabel(e$4.target.value)})]})]})}case`todo-list`:return(0,import_jsx_runtime.jsx)(`div`,{className:`space-y-0.5 w-full h-full`,children:(content.items||[]).map((it$1,i$4)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-start gap-2 group`,children:[(0,import_jsx_runtime.jsx)(`div`,{onClick:e$4=>{e$4.stopPropagation();let newItems=[...content.items||[]];newItems[i$4]={...newItems[i$4],done:!newItems[i$4].done},onUpdateBlock(block.id,{content:{...content,items:newItems}})},className:`mt-0.5 w-4 h-4 border rounded flex items-center justify-center flex-shrink-0 transition-colors cursor-pointer ${it$1.done?`bg-indigo-500 border-indigo-500 text-white`:`border-gray-400 bg-white`}`,children:it$1.done&&(0,import_jsx_runtime.jsx)(Check,{size:10,strokeWidth:4})}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 min-w-0`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`span`,text:it$1.text,onUpdate:val=>{let newItems=[...content.items||[]];newItems[i$4]={...newItems[i$4],text:val},onUpdateBlock(block.id,{content:{...content,items:newItems}})},style:{...commonStyle,textDecoration:it$1.done?`line-through`:`none`,color:it$1.done?`#9ca3af`:styles$1.color},className:`text-sm break-words`})})]},i$4))});case`chart-pie`:{let data=content.data||[],total=data.reduce((acc,cur)=>acc+cur.value,0),currentDeg=0,colors=[`#6366f1`,`#8b5cf6`,`#ec4899`,`#f43f5e`,`#10b981`],gradientParts=data.map((item,i$4)=>{let deg=item.value/total*360,part=`${colors[i$4%colors.length]} ${currentDeg}deg ${currentDeg+deg}deg`;return currentDeg+=deg,part}).join(`, `),isRow=(content.layoutDirection||`col`)===`row`;return(0,import_jsx_runtime.jsxs)(`div`,{className:`relative w-full h-full bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden p-2 group`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onUpdateBlock(block.id,{content:{...content,layoutDirection:isRow?`col`:`row`}})},className:`absolute top-1 right-1 z-20 p-1 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity`,title:isRow?` `:` `,children:(0,import_jsx_runtime.jsx)(RotateCw,{size:12})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full flex ${isRow?`flex-row`:`flex-col`} gap-2 overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 min-w-0 min-h-0 flex items-center justify-center w-full`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`aspect-square relative rounded-full shadow-inner flex-shrink-0`,style:{background:`conic-gradient(${gradientParts||`#ddd 0deg 360deg`})`,height:`100%`,width:`auto`,maxHeight:`100%`,maxWidth:`100%`},children:(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-[25%] bg-white rounded-full flex items-center justify-center text-[10px] font-bold text-gray-500 shadow-sm`,children:`Total`})})}),(0,import_jsx_runtime.jsx)(`div`,{className:`
                            flex-shrink-0 
                            flex ${isRow?`flex-col justify-center max-w-[40%]`:`flex-row flex-wrap content-center justify-center max-h-[40%]`} 
                            gap-1 overflow-auto scrollbar-hide
                        `,children:data.map((item,i$4)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 min-w-0 flex-shrink-0 max-w-full`,title:`${item.label}: ${Math.round(item.value/total*100)}%`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`w-2 h-2 rounded-full flex-shrink-0`,style:{background:colors[i$4%colors.length]}}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] text-gray-600 truncate`,children:[item.label,(0,import_jsx_runtime.jsxs)(`span`,{className:`font-bold ml-1 text-gray-900`,children:[Math.round(item.value/total*100),`%`]})]})]},i$4))})]})]})}case`chart-bar`:{let data=content.data||[],max=Math.max(...data.map(d$3=>d$3.value),1),colors=[`#6366f1`,`#8b5cf6`,`#ec4899`,`#10b981`];return(0,import_jsx_runtime.jsx)(`div`,{className:`bg-white p-2 rounded-xl border border-gray-100 shadow-sm w-full h-full flex items-end justify-between gap-1 overflow-hidden`,children:data.map((item,i$4)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 flex flex-col items-center gap-0.5 group h-full justify-end min-w-0`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full rounded-t-sm transition-all relative`,style:{height:`${item.value/max*100}%`,backgroundColor:colors[i$4%colors.length]}}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-gray-500 truncate w-full text-center`,children:item.label})]},i$4))})}case`counter`:{let targetDate=new Date(content.date),today=new Date,diff=Math.ceil((targetDate.getTime()-today.getTime())/(1e3*60*60*24)),dDay=diff>0?`D-${diff}`:diff===0?`D-Day`:`D+${Math.abs(diff)}`;return(0,import_jsx_runtime.jsxs)(`div`,{style:{backgroundColor:styles$1.bgColor||`#eff6ff`},className:`p-3 rounded-lg flex flex-col justify-center items-center gap-2 overflow-hidden w-full h-full text-center`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`min-w-0`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`text-[10px] text-gray-500 font-bold uppercase truncate flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(CalendarDays,{size:10}),` `,content.title]}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] text-gray-400 truncate`,children:content.date})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-xl font-black text-indigo-600 whitespace-nowrap`,children:dDay})]})}case`divider`:return(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full py-2`,children:(0,import_jsx_runtime.jsx)(`hr`,{className:`border-t border-gray-200`,style:{borderColor:styles$1.color}})});case`bullet-list`:return(0,import_jsx_runtime.jsx)(`ul`,{style:commonStyle,className:`w-full h-full list-disc list-outside ml-5 space-y-1 text-gray-800 flex flex-col justify-center`,children:(content.items||[]).map((it$1,i$4)=>(0,import_jsx_runtime.jsx)(`li`,{className:`break-words pl-1`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`span`,text:it$1,onUpdate:val=>handleListUpdate(content.items||[],i$4,val),style:commonStyle,placeholder:` ${i$4+1}`,className:`block`})},i$4))});case`number-list`:return(0,import_jsx_runtime.jsx)(`ol`,{style:commonStyle,className:`w-full h-full list-decimal list-outside ml-5 space-y-1 text-gray-800 flex flex-col justify-center`,children:(content.items||[]).map((it$1,i$4)=>(0,import_jsx_runtime.jsx)(`li`,{className:`break-words pl-1`,children:(0,import_jsx_runtime.jsx)(EditableText,{tagName:`span`,text:it$1,onUpdate:val=>handleListUpdate(content.items||[],i$4,val),style:commonStyle,placeholder:` ${i$4+1}`,className:`block`})},i$4))});case`toggle-list`:return(0,import_jsx_runtime.jsx)(ToggleItem,{block,onUpdateBlock,style:commonStyle});case`accordion`:return(0,import_jsx_runtime.jsx)(AccordionItem,{block,onUpdateBlock,style:commonStyle});case`callout`:{let calloutType=content.type||`info`,configMap={info:{bg:`bg-blue-50`,border:`border-blue-200`,text:`text-blue-800`,icon:(0,import_jsx_runtime.jsx)(Info,{size:20,className:`text-blue-500`})},warning:{bg:`bg-orange-50`,border:`border-orange-200`,text:`text-orange-800`,icon:(0,import_jsx_runtime.jsx)(TriangleAlert,{size:20,className:`text-orange-500`})},error:{bg:`bg-red-50`,border:`border-red-200`,text:`text-red-800`,icon:(0,import_jsx_runtime.jsx)(CircleX,{size:20,className:`text-red-500`})},success:{bg:`bg-green-50`,border:`border-green-200`,text:`text-green-800`,icon:(0,import_jsx_runtime.jsx)(CircleCheckBig,{size:20,className:`text-green-500`})}},config=configMap[calloutType]||configMap.info;return(0,import_jsx_runtime.jsxs)(`div`,{className:`h-full w-full p-1 rounded-lg border flex items-center gap-1 ${config.bg} ${config.border} break-words`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex-shrink-0`,children:config.icon}),` `,(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col min-w-0 flex-1 justify-center`,children:[` `,(0,import_jsx_runtime.jsxs)(`div`,{className:`font-bold mb-0 leading-none ${config.text}`,children:[` `,(0,import_jsx_runtime.jsx)(EditableText,{tagName:`span`,text:content.title,onUpdate:val=>onUpdateBlock(block.id,{content:{...content,title:val}}),className:`leading-none m-0 p-0 block`,placeholder:` ()`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-gray-700 leading-none text-sm`,children:[` `,(0,import_jsx_runtime.jsx)(EditableText,{tagName:`p`,text:content.text,onUpdate:val=>onUpdateBlock(block.id,{content:{...content,text:val}}),className:`leading-none m-0 p-0 block`,placeholder:` ...`})]})]})]})}case`highlight`:return(0,import_jsx_runtime.jsx)(`div`,{style:commonStyle,className:`h-full w-full leading-relaxed flex flex-col justify-center`,children:(0,import_jsx_runtime.jsx)(`span`,{className:`px-2 py-1 rounded box-decoration-clone block w-fit`,style:{backgroundColor:styles$1.bgColor||`#fef08a`},children:content.text})});case`spoiler`:return(0,import_jsx_runtime.jsx)(SpoilerItem,{block,onUpdateBlock,style:commonStyle});case`vertical-text`:return(0,import_jsx_runtime.jsx)(`div`,{style:{...commonStyle,writingMode:`vertical-rl`,textOrientation:`upright`,letterSpacing:`0.1em`},className:`h-full w-full p-2 leading-normal whitespace-pre-wrap break-words border border-transparent`,children:content.text});case`math`:return content.text?(0,import_jsx_runtime.jsx)(`div`,{style:commonStyle,className:`h-full w-full p-4 flex justify-center items-center overflow-x-auto`,children:(0,import_jsx_runtime.jsx)(`img`,{src:`https://latex.codecogs.com/svg.latex?\\huge&space;${encodeURIComponent(content.text)}`,alt:`Math Formula`,className:`max-w-full`,style:{filter:styles$1.color===`#ffffff`||styles$1.color?.includes(`white`)?`invert(1)`:`none`}})}):(0,import_jsx_runtime.jsx)(`div`,{className:`text-gray-400 text-xs italic`,children:`( )`});case`typing-text`:return(0,import_jsx_runtime.jsx)(TypingTextItem,{content,style:commonStyle});case`scroll-text`:return(0,import_jsx_runtime.jsxs)(`div`,{className:`h-full w-full overflow-hidden bg-gray-100 rounded border border-gray-200 py-2 relative flex items-center`,children:[(0,import_jsx_runtime.jsx)(`style`,{children:`
                @keyframes marquee {
                    0% { transform: translateX(100%); }
                    100% { transform: translateX(-100%); }
                }
                `}),(0,import_jsx_runtime.jsx)(`div`,{style:{...commonStyle,whiteSpace:`nowrap`,animation:`marquee ${content.speed||10}s linear infinite`,width:`max-content`},children:content.text})]});case`chart-radar`:return(0,import_jsx_runtime.jsx)(RadarChartItem,{content,style:commonStyle,styles:styles$1});case`heatmap`:return(0,import_jsx_runtime.jsxs)(`div`,{style:commonStyle,className:`p-3 w-full h-full bg-white flex flex-col justify-center`,children:[content.title&&(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs font-bold text-gray-500 mb-2`,children:content.title}),(0,import_jsx_runtime.jsx)(HeatmapWidget_default,{viewMode:content.viewMode||`year`,themeColor:styles$1.color||`#6366f1`})]});case`rating`:return(0,import_jsx_runtime.jsx)(RatingItem,{block,...otherProps});case`progress-bar`:{let value=content.value||0,max=content.max||100,percentage=Math.min(100,Math.max(0,value/max*100));return(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 bg-white rounded-xl border border-gray-200 shadow-sm w-full h-full flex flex-col justify-center items-center`,children:content.style===`circle`?(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`relative w-32 h-32`,children:[(0,import_jsx_runtime.jsxs)(`svg`,{className:`w-full h-full transform -rotate-90`,children:[(0,import_jsx_runtime.jsx)(`circle`,{cx:`64`,cy:`64`,r:`56`,stroke:`currentColor`,strokeWidth:`12`,fill:`transparent`,className:`text-gray-100`}),(0,import_jsx_runtime.jsx)(`circle`,{cx:`64`,cy:`64`,r:`56`,stroke:`currentColor`,strokeWidth:`12`,fill:`transparent`,strokeDasharray:351.86,strokeDashoffset:351.86-351.86*percentage/100,className:`text-indigo-600 transition-all duration-1000 ease-out`,style:{color:styles$1.color},strokeLinecap:`round`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute inset-0 flex flex-col items-center justify-center text-indigo-900`,children:[(0,import_jsx_runtime.jsxs)(`span`,{className:`text-2xl font-bold`,style:{color:styles$1.color},children:[Math.round(percentage),`%`]}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-gray-400 uppercase tracking-wider`,children:content.label||`Progress`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`mt-2 text-xs text-gray-400 font-mono`,children:[value,` / `,max]})]}):(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between mb-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-bold text-gray-700`,children:content.label||``}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-sm font-bold text-indigo-600`,style:{color:styles$1.color},children:[Math.round(percentage),`%`]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-full bg-gray-100 rounded-full h-2.5 overflow-hidden relative`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`bg-indigo-600 h-2.5 rounded-full transition-all duration-500 ease-out relative`,style:{width:`${percentage}%`,backgroundColor:styles$1.color},children:(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-0 left-0 bottom-0 w-full bg-gradient-to-r from-transparent via-white/30 to-transparent animate-[shimmer_2s_infinite]`})})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`mt-2 text-xs text-gray-400 text-right`,children:[value,` / `,max]})]})})}return(0,import_jsx_runtime.jsx)(UnitConverterWidget_default,{block,...otherProps});case`pdf-viewer`:return(0,import_jsx_runtime.jsx)(PdfDropViewer,{content,onUpdate:patch$1=>onUpdateBlock(block.id,{content:{...content,...patch$1}})});case`flashcards`:{let title=content.title||`Flashcards`,cards=content.cards||[],currentIndex=Math.min(content.currentIndex??0,Math.max(cards.length-1,0)),showBack=!!content.showBack,current=cards[currentIndex],setState=patch$1=>{props.onUpdateBlock(block.id,{content:{...content,...patch$1}})},goPrev=()=>{cards.length!==0&&setState({currentIndex:Math.max(0,currentIndex-1),showBack:!1})},goNext=()=>{cards.length!==0&&setState({currentIndex:Math.min(cards.length-1,currentIndex+1),showBack:!1})},flip=()=>{cards.length!==0&&setState({showBack:!showBack})};return(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full rounded-lg border border-gray-200 bg-white overflow-hidden`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`px-3 py-2 text-[11px] text-gray-500 border-b bg-gray-50 flex items-center justify-between gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold truncate`,children:title}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-gray-400`,children:cards.length===0?`0 cards`:`${currentIndex+1}/${cards.length}`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-3`,children:[cards.length===0?(0,import_jsx_runtime.jsx)(`div`,{className:`text-sm text-gray-400`,children:`  (RightSidebar)`}):(0,import_jsx_runtime.jsx)(`div`,{className:`rounded-lg border border-gray-200 bg-white`,style:{perspective:1e3},children:(0,import_jsx_runtime.jsxs)(`div`,{className:`relative w-full h-[160px] cursor-pointer`,onClick:e$4=>{e$4.stopPropagation(),flip()},style:{transformStyle:`preserve-3d`,transition:`transform 0.4s ease`,transform:showBack?`rotateY(180deg)`:`rotateY(0deg)`},children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 p-4 flex items-center justify-center text-sm text-gray-800`,style:{backfaceVisibility:`hidden`},children:(0,import_jsx_runtime.jsx)(`div`,{className:`whitespace-pre-wrap break-words text-center`,children:current.front||`(Front empty)`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 p-4 flex items-center justify-center text-sm text-gray-800 bg-indigo-50`,style:{backfaceVisibility:`hidden`,transform:`rotateY(180deg)`},children:(0,import_jsx_runtime.jsx)(`div`,{className:`whitespace-pre-wrap break-words text-center`,children:current.back||`(Back empty)`})})]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`mt-3 flex gap-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{className:`flex-1 py-2 rounded bg-gray-900 text-white text-xs font-bold disabled:opacity-40`,onClick:e$4=>{e$4.stopPropagation(),goPrev()},disabled:cards.length===0||currentIndex===0,children:`Prev`}),(0,import_jsx_runtime.jsx)(`button`,{className:`flex-1 py-2 rounded bg-indigo-600 text-white text-xs font-bold disabled:opacity-40`,onClick:e$4=>{e$4.stopPropagation(),flip()},disabled:cards.length===0,children:`Flip`}),(0,import_jsx_runtime.jsx)(`button`,{className:`flex-1 py-2 rounded bg-gray-900 text-white text-xs font-bold disabled:opacity-40`,onClick:e$4=>{e$4.stopPropagation(),goNext()},disabled:cards.length===0||currentIndex===cards.length-1,children:`Next`})]})]})]})}case`movie-ticket`:return(0,import_jsx_runtime.jsx)(MovieTicketWidget_default,{block,onUpdateBlock});case`link-bookmark`:return(0,import_jsx_runtime.jsx)(LinkBookmarkWidget,{block,onUpdateBlock});case`database`:return(0,import_jsx_runtime.jsx)(DatabaseWidget,{block,onUpdateBlock});case`custom-block`:{let children$1=content.children||[];return console.log(` [BlockRenderer Debug] Custom Block Render:`,{id:block.id,childrenCount:children$1.length,decorations:content.decorations,styles:styles$1,wrapperClasses:`w-full h-full relative flex flex-col justify-start text-left`}),children$1.length===0?(0,import_jsx_runtime.jsx)(`div`,{className:`text-gray-300 text-xs p-2`,children:`Empty Custom Block`}):(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full relative flex flex-col justify-start text-left`,style:{justifyContent:`flex-start`,alignItems:`stretch`},children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute top-0 right-0 bg-red-600 text-white text-[10px] z-[999] p-1 font-bold pointer-events-none opacity-80`,children:[`DECOS: `,content.decorations?.length??0]}),content.decorations&&Array.isArray(content.decorations)&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 z-[50] pointer-events-none overflow-hidden border-4 border-red-500 bg-black/10`,children:content.decorations.map(deco=>{let safeType=deco.type;return typeof safeType==`object`&&safeType.type&&(safeType=safeType.type),console.log(` [BlockRenderer] Decoration item:`,deco,`SafeType:`,safeType),[`blob`,`text`,`circle`,`square`,`star`,`shape`].includes(safeType)?(0,import_jsx_runtime.jsx)(`div`,{className:`absolute`,style:{left:`${deco.x}%`,top:`${deco.y}%`,width:`${deco.w}px`,height:`${deco.h}px`,transform:`translate(-50%, -50%) rotate(${deco.rotation||0}deg)`,opacity:deco.opacity,zIndex:deco.zIndex||0},children:safeType===`blob`?(0,import_jsx_runtime.jsx)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 100 100`,style:{overflow:`visible`},children:(0,import_jsx_runtime.jsx)(`path`,{d:getSvgPathFromPoints(deco.points||[],.5,!0),fill:deco.color})}):safeType===`text`?(0,import_jsx_runtime.jsx)(`div`,{style:{color:deco.color,fontSize:deco.fontSize||14},children:deco.text}):(0,import_jsx_runtime.jsx)(`div`,{style:{width:`100%`,height:`100%`,backgroundColor:deco.color,borderRadius:safeType===`circle`||safeType===`shape`&&deco.shapeType===`circle`?`50%`:safeType===`square`||safeType===`shape`&&deco.shapeType===`square`?`4px`:`0%`,clipPath:safeType===`star`||safeType===`shape`&&deco.shapeType===`star`?`polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)`:void 0}})},deco.id):(console.log(` [BlockRenderer] Skipped decoration due to invalid type:`,safeType),null)})}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full relative z-10 flex flex-col justify-start`,children:children$1.map(childBlock=>(0,import_jsx_runtime.jsx)(`div`,{className:`relative mb-1 w-full`,children:(0,import_jsx_runtime.jsx)(BlockRenderer,{block:childBlock,onUpdateBlock,selectedBlockId:props.selectedBlockId,onSelectBlock:props.onSelectBlock,onRemoveBlock:props.onRemoveBlock,activeContainer:props.activeContainer,onSetActiveContainer:props.onSetActiveContainer})},childBlock.id))})]})}default:return(0,import_jsx_runtime.jsxs)(`div`,{className:`text-gray-400 text-xs p-2 border border-dashed rounded`,children:[`Unknown Block Type: `,type]})}})(),(()=>(block.content?.decorations&&block.content.decorations.length>0?console.log(` [BlockRenderer] Rendering Decorations:`,block.content.decorations):type===`custom-block`&&console.log(` [BlockRenderer] No decorations found for custom-block:`,block),null))(),block.content?.decorations&&Array.isArray(block.content.decorations)&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 z-0 pointer-events-none overflow-hidden`,children:block.content.decorations.map(deco=>{let safeType=deco.type;return typeof safeType==`object`&&safeType.type&&(safeType=safeType.type),[`blob`,`text`,`circle`,`square`,`star`,`shape`].includes(safeType)?(0,import_jsx_runtime.jsx)(`div`,{className:`absolute`,style:{left:`${deco.x}%`,top:`${deco.y}%`,width:`${deco.w}px`,height:`${deco.h}px`,transform:`translate(-50%, -50%) rotate(${deco.rotation||0}deg)`,opacity:deco.opacity,zIndex:deco.zIndex||0},children:safeType===`blob`?(0,import_jsx_runtime.jsx)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 100 100`,style:{overflow:`visible`},children:(0,import_jsx_runtime.jsx)(`path`,{d:getSvgPathFromPoints(deco.points||[],.5,!0),fill:deco.color})}):safeType===`text`?(0,import_jsx_runtime.jsx)(`div`,{style:{color:deco.color,fontSize:deco.fontSize||14},children:deco.text}):(0,import_jsx_runtime.jsx)(`div`,{style:{width:`100%`,height:`100%`,backgroundColor:deco.color,borderRadius:safeType===`circle`||safeType===`shape`&&deco.shapeType===`circle`?`50%`:safeType===`square`||safeType===`shape`&&deco.shapeType===`square`?`4px`:`0%`,clipPath:safeType===`star`||safeType===`shape`&&deco.shapeType===`star`?`polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)`:void 0}})},deco.id):null})})]})},BlockRenderer_default=BlockRenderer,CustomWidgetPreview=({content,defaultSize:defaultSize$1=`2x2`})=>{let[currentSceneIndex,setCurrentSceneIndex]=(0,import_react.useState)(0),scenes=content.scenes||[],hasScenes=scenes.length>0;(0,import_react.useEffect)(()=>{if(!hasScenes||scenes.length<=1)return;let duration=(scenes[currentSceneIndex].duration||1)*1e3,timer$1=setTimeout(()=>{setCurrentSceneIndex(prev=>(prev+1)%scenes.length)},duration);return()=>clearTimeout(timer$1)},[hasScenes,scenes.length,currentSceneIndex,scenes]);let blocks=hasScenes?scenes[currentSceneIndex].blocks||[]:content.children||[],decorations=hasScenes?scenes[currentSceneIndex].decorations||[]:content.decorations||[],[w$1,h$3]=defaultSize$1.split(`x`).map(Number);return(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full relative bg-white overflow-hidden rounded-lg`,children:[(0,import_jsx_runtime.jsx)(DecorationLayer_default,{decorations}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 z-10 flex flex-col gap-1 p-3`,style:{overflow:`hidden`},children:blocks.map(block=>(0,import_jsx_runtime.jsx)(`div`,{className:`relative w-full overflow-hidden rounded bg-transparent`,children:(0,import_jsx_runtime.jsx)(BlockRenderer_default,{block,selectedBlockId:null,onSelectBlock:()=>{},onRemoveBlock:()=>{},activeContainer:null,onSetActiveContainer:()=>{},onUpdateBlock:()=>{}})},block.id))})]})},CustomWidgetPreview_default=CustomWidgetPreview,CHOSUNG_LIST=[``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``];function extractChosung(text){let result=[];for(let i$4=0;i$4<text.length;i$4++){let code=text.charCodeAt(i$4)-44032;if(code>=0&&code<=11171){let chosungIndex=Math.floor(code/588);result.push(CHOSUNG_LIST[chosungIndex])}else result.push(text[i$4])}return result.join(``)}function normalizeSpacing(text){return text.replace(/\s+/g,``)}function fuzzyMatch(query,target){if(!query||!target)return!1;let normalizedQuery=query.toLowerCase().trim(),normalizedTarget=target.toLowerCase();if(normalizedTarget.includes(normalizedQuery))return!0;let spacelessQuery=normalizeSpacing(normalizedQuery);if(normalizeSpacing(normalizedTarget).includes(spacelessQuery))return!0;if(/[---]/.test(normalizedQuery)){let targetChosung=extractChosung(normalizedTarget),queryChosung=extractChosung(normalizedQuery);if(targetChosung.includes(queryChosung)||targetChosung.includes(normalizedQuery))return!0}return!1}function searchWidget(query,widget){if(!query||fuzzyMatch(query,widget.label)||widget.description&&fuzzyMatch(query,widget.description))return!0;if(widget.keywords&&Array.isArray(widget.keywords)){for(let keyword of widget.keywords)if(fuzzyMatch(query,keyword))return!0}return!1}const WidgetGallery=({onSelect,onMultiSelect,onEdit,onCreate})=>{let{registry,isLoading:isRegistryLoading,error:error$1}=useWidgetRegistry(),[customWidgets,setCustomWidgets]=(0,import_react.useState)([]),[isCustomLoading,setIsCustomLoading]=(0,import_react.useState)(!0);(0,import_react.useEffect)(()=>{(async()=>{try{let data=await getMyWidgets();Array.isArray(data)&&setCustomWidgets(data.map(item=>{let baseType=item.type,Component$2=WIDGET_COMPONENT_MAP[baseType];return!Component$2&&baseType===`custom-block`&&(Component$2=props=>(0,import_jsx_runtime.jsx)(CustomWidgetPreview_default,{content:{...props.content,decorations:props.decorations||[]},defaultSize:item.defaultSize||`2x2`})),Component$2?{id:item.id,widgetType:`custom-${item.id}`,label:item.name||` `,description:`Custom ${baseType} widget`,category:`My Saved`,keywords:[`custom`,baseType],defaultSize:item.defaultSize||`1x1`,validSizes:[[1,1],[1,2],[2,1],[2,2]],defaultProps:{content:item.content,styles:item.styles,decorations:item.decorations},isSystem:!1,thumbnail:void 0,component:Component$2}:null}).filter(w$1=>w$1!==null))}catch(e$4){console.error(`Failed to load custom widgets in Gallery:`,e$4)}finally{setIsCustomLoading(!1)}})()},[]);let handleDelete=async(widgetId,widgetName)=>{if(confirm(` '${widgetName}'  ?`))try{await deleteWidget(widgetId),setCustomWidgets(prev=>prev.filter(w$1=>String(w$1.id)!==widgetId)),alert(`.`)}catch(e$4){console.error(` `,e$4),alert(` .`)}},[searchTerm,setSearchTerm]=(0,import_react.useState)(``),[selectedWidgets,setSelectedWidgets]=(0,import_react.useState)([]),[expandedCategories,setExpandedCategories]=(0,import_react.useState)([`My Saved`]),handleCardClick=widget=>{setSelectedWidgets(prev=>[...prev,widget])},handleRemoveFromCart=index$2=>{setSelectedWidgets(prev=>prev.filter((_$1,i$4)=>i$4!==index$2))},handleApply=()=>{selectedWidgets.length!==0&&(onMultiSelect?onMultiSelect(selectedWidgets):selectedWidgets.forEach(widget=>{onSelect(widget)}))},toggleCategory=category=>{setExpandedCategories(prev=>prev.includes(category)?prev.filter(c$3=>c$3!==category):[...prev,category])},widgets=[...registry?Object.values(registry):[],...customWidgets].filter(widget=>searchWidget(searchTerm,widget)),CATEGORY_ORDER=[`My Saved`,`Utility`,`Diary & Emotion`,`Interactive`,`Data & Logic`,`Decoration & Collection`,`Global Controllers`,`Uncategorized`],groupedWidgets=widgets.reduce((acc,widget)=>{let category=widget.category||`Uncategorized`;return acc[category]||(acc[category]=[]),acc[category].push(widget),acc},{});return(0,import_react.useEffect)(()=>{if(searchTerm){let categoriesWithResults=Object.keys(groupedWidgets);setExpandedCategories(prev=>{let unique=new Set([...prev,...categoriesWithResults]);return Array.from(unique)})}else setExpandedCategories([`My Saved`])},[searchTerm,widgets.length]),isRegistryLoading||isCustomLoading?(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 text-center text-gray-500`,children:`   ...`}):error$1?(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 text-center text-red-500`,children:`   `}):(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col h-full bg-[var(--bg-primary)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`border-b border-[var(--border-color)] bg-[var(--bg-card)] sticky top-0 z-20 shadow-sm`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 pb-2`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`text`,placeholder:`Search widgets...`,value:searchTerm,onChange:e$4=>setSearchTerm(e$4.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border border-[var(--border-color)] bg-[var(--bg-input)] text-[var(--text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] transition-all`}),(0,import_jsx_runtime.jsx)(`svg`,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--icon-color)]`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,import_jsx_runtime.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z`})})]})}),(0,import_jsx_runtime.jsx)(`div`,{className:`px-4 pb-4`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card-secondary)]/50 rounded-xl border border-[var(--border-color)] p-3 transition-all`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`text-sm font-bold text-[var(--text-primary)] flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:`  `}),(0,import_jsx_runtime.jsx)(`span`,{className:`bg-[var(--btn-bg)] text-white text-[10px] px-1.5 py-0.5 rounded-full`,children:selectedWidgets.length})]}),selectedWidgets.length>0&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:handleApply,className:`bg-[var(--btn-bg)] hover:brightness-110 text-white text-xs px-3 py-1.5 rounded-lg flex items-center gap-1 transition-all shadow-sm active:scale-95`,children:[(0,import_jsx_runtime.jsx)(Check,{size:12}),``]})]}),selectedWidgets.length===0?(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs text-[var(--text-secondary)] py-2 text-center opacity-70`,children:`    .`}):(0,import_jsx_runtime.jsx)(`div`,{className:`flex gap-2 overflow-x-auto custom-scrollbar p-3 pt-4`,children:selectedWidgets.map((widget,idx)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-shrink-0 relative group`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-16 h-16 bg-[var(--bg-card)] rounded-lg border border-[var(--border-color)] flex flex-col items-center justify-center p-1 overflow-hidden`,children:widget.thumbnail?(0,import_jsx_runtime.jsx)(`img`,{src:widget.thumbnail,alt:widget.label,className:`w-full h-full object-contain opacity-80`}):(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] text-center break-all leading-tight text-[var(--text-secondary)]`,children:widget.label})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleRemoveFromCart(idx),className:`absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 shadow-md hover:scale-110 transition-transform`,children:(0,import_jsx_runtime.jsx)(X,{size:10})})]},`${widget.widgetType}-${idx}`))})]})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 overflow-y-auto custom-scrollbar p-4 pb-20 flex flex-col gap-4`,children:[CATEGORY_ORDER.map(category=>{let categoryWidgets=groupedWidgets[category],isCustomWidgetSection=category===`My Saved`;if(isCustomWidgetSection&&!categoryWidgets)categoryWidgets=[];else if(!categoryWidgets||categoryWidgets.length===0)return null;let isFoldable=!isCustomWidgetSection||categoryWidgets.length>3,isExpanded=isCustomWidgetSection&&categoryWidgets.length<=3||expandedCategories.includes(category);return(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card-secondary)] rounded-2xl border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{isFoldable&&toggleCategory(category)},className:`w-full px-6 py-4 flex items-center justify-between transition-colors rounded-2xl ${isFoldable?`hover:bg-[var(--bg-card)] cursor-pointer`:`cursor-default`}`,children:[(0,import_jsx_runtime.jsxs)(`h2`,{className:`text-lg font-bold text-[var(--text-primary)] flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`w-1.5 h-6 rounded-full bg-[var(--btn-bg)] inline-block transition-transform duration-300 ${isExpanded?`scale-y-100`:`scale-y-75 opacity-50`}`}),isCustomWidgetSection?` `:category,(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-normal text-[var(--text-secondary)] ml-2 bg-[var(--bg-card)] px-2 py-0.5 rounded-full border border-[var(--border-color)]`,children:categoryWidgets.length})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[isCustomWidgetSection&&onCreate&&(0,import_jsx_runtime.jsxs)(`div`,{onClick:e$4=>{e$4.stopPropagation(),onCreate()},className:`px-3 py-1.5 bg-[var(--btn-bg)] hover:brightness-110 text-white text-xs font-bold rounded-lg transition-all shadow-sm active:scale-95 cursor-pointer flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-lg leading-none`,children:`+`}),``]}),isFoldable&&(0,import_jsx_runtime.jsx)(`div`,{className:`text-[var(--text-secondary)] transition-transform duration-300 ${isExpanded?`rotate-180`:``}`,children:(0,import_jsx_runtime.jsx)(ChevronDown,{size:20})})]})]}),(0,import_jsx_runtime.jsx)(AnimatePresence,{initial:!1,children:isExpanded&&(0,import_jsx_runtime.jsx)(motion.div,{initial:{height:0,opacity:0},animate:{height:`auto`,opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:`circOut`},style:{overflow:`hidden`},children:(0,import_jsx_runtime.jsx)(`div`,{className:`p-6 pt-0 border-t border-[var(--border-color)]/30`,children:categoryWidgets.length===0?(0,import_jsx_runtime.jsxs)(`div`,{className:`py-8 text-center text-[var(--text-secondary)] text-sm opacity-70`,children:[`   .`,(0,import_jsx_runtime.jsx)(`br`,{}),`''     !`]}):(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pt-6`,children:categoryWidgets.map(widget=>{let selectedCount=selectedWidgets.filter(w$1=>w$1.widgetType===widget.widgetType).length;return(0,import_jsx_runtime.jsxs)(`div`,{className:`border rounded-xl p-4 cursor-pointer transition-all hover:scale-[1.02] active:scale-95 shadow-sm group flex flex-col relative
                                                                ${selectedCount>0?`border-[var(--btn-bg)] bg-[var(--bg-card)] ring-1 ring-[var(--btn-bg)]`:`border-[var(--border-color)] bg-[var(--bg-card)] hover:bg-[var(--bg-card-secondary)]`}`,onClick:()=>handleCardClick(widget),children:[selectedCount>0&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-3 right-3 bg-[var(--btn-bg)] text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center shadow-md animate-in zoom-in duration-200 z-10`,children:selectedCount}),widget.thumbnail?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full bg-[var(--bg-card-secondary)] rounded-lg mb-4 overflow-hidden border border-[var(--border-color)] flex items-center justify-center`,children:(0,import_jsx_runtime.jsx)(`img`,{src:widget.thumbnail,alt:widget.label,className:`w-full h-auto object-contain max-h-48`,onError:e$4=>{e$4.target.style.display=`none`}})}):(0,import_jsx_runtime.jsx)(`div`,{className:`w-full aspect-video bg-[var(--bg-card-secondary)] rounded-lg mb-4 overflow-hidden border border-[var(--border-color)] relative`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full pointer-events-none select-none transform scale-[0.9] origin-center`,children:(0,import_jsx_runtime.jsx)(widget.component,{...widget.defaultProps})})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full flex justify-between items-start mb-2`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold text-lg text-[var(--text-primary)] w-full`,children:widget.label}),onEdit&&!widget.isSystem&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onEdit(widget)},className:`text-xs px-2 py-1 bg-[var(--bg-card-secondary)] rounded hover:brightness-95 text-[var(--text-secondary)] border border-[var(--border-color)] transition-all z-20`,children:`Edit`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),widget.id&&handleDelete(String(widget.id),widget.label)},className:`ml-1 text-xs px-2 py-1 bg-red-100 rounded hover:bg-red-200 text-red-600 border border-red-200 transition-all z-20`,children:`Del`})]})]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm text-[var(--text-secondary)] mb-3 line-clamp-2 h-10 w-full text-left`,children:widget.description}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex gap-2 text-xs flex-wrap w-full justify-start`,children:widget.validSizes&&widget.validSizes.length>5?(0,import_jsx_runtime.jsx)(`span`,{className:`px-2 py-1 bg-[var(--bg-card-secondary)] text-[var(--btn-bg)] rounded border border-[var(--border-color)] font-medium opacity-90`,children:` `}):(widget.validSizes||[[1,1]]).map(([w$1,h$3],idx)=>(0,import_jsx_runtime.jsxs)(`span`,{className:`px-2 py-1 bg-[var(--bg-card-secondary)] text-[var(--btn-bg)] rounded border border-[var(--border-color)] font-medium opacity-90`,children:[w$1,`x`,h$3]},idx))})]},widget.widgetType)})})})})})]},category)}),widgets.length===0&&(0,import_jsx_runtime.jsxs)(`div`,{className:`text-center py-10 text-[var(--text-secondary)]`,children:[`No widgets found matching "`,searchTerm,`"`]})]})]})};function memoize(fn){let result=null;return()=>(result??=fn(),result)}function without(items,item){return items.filter(i$4=>i$4!==item)}function union(itemsA,itemsB){let set$2=new Set,insertItem=item=>set$2.add(item);itemsA.forEach(insertItem),itemsB.forEach(insertItem);let result=[];return set$2.forEach(key$1=>result.push(key$1)),result}var EnterLeaveCounter=class{enter(enteringNode){let previousLength=this.entered.length;return this.entered=union(this.entered.filter(node=>this.isNodeInDocument(node)&&(!node.contains||node.contains(enteringNode))),[enteringNode]),previousLength===0&&this.entered.length>0}leave(leavingNode){let previousLength=this.entered.length;return this.entered=without(this.entered.filter(this.isNodeInDocument),leavingNode),previousLength>0&&this.entered.length===0}reset(){this.entered=[]}constructor(isNodeInDocument){this.entered=[],this.isNodeInDocument=isNodeInDocument}},NativeDragSource=class{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(property=>{Object.defineProperty(this.item,property,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${property}" until the drop event.`),null}})})}loadDataTransfer(dataTransfer){if(dataTransfer){let newProperties={};Object.keys(this.config.exposeProperties).forEach(property=>{let propertyFn=this.config.exposeProperties[property];propertyFn!=null&&(newProperties[property]={value:propertyFn(dataTransfer,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,newProperties)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(monitor,handle){return handle===monitor.getSourceId()}endDrag(){}constructor(config){this.config=config,this.item={},this.initializeExposedProperties()}},NativeTypes_exports=__export({FILE:()=>FILE,HTML:()=>HTML,TEXT:()=>TEXT,URL:()=>URL$1});const FILE=`__NATIVE_FILE__`,URL$1=`__NATIVE_URL__`,TEXT=`__NATIVE_TEXT__`,HTML=`__NATIVE_HTML__`;function getDataFromDataTransfer(dataTransfer,typesToTry,defaultValue$3){return typesToTry.reduce((resultSoFar,typeToTry)=>resultSoFar||dataTransfer.getData(typeToTry),``)??defaultValue$3}const nativeTypesConfig={[FILE]:{exposeProperties:{files:dataTransfer=>Array.prototype.slice.call(dataTransfer.files),items:dataTransfer=>dataTransfer.items,dataTransfer:dataTransfer=>dataTransfer},matchesTypes:[`Files`]},[HTML]:{exposeProperties:{html:(dataTransfer,matchesTypes)=>getDataFromDataTransfer(dataTransfer,matchesTypes,``),dataTransfer:dataTransfer=>dataTransfer},matchesTypes:[`Html`,`text/html`]},[URL$1]:{exposeProperties:{urls:(dataTransfer,matchesTypes)=>getDataFromDataTransfer(dataTransfer,matchesTypes,``).split(`
`),dataTransfer:dataTransfer=>dataTransfer},matchesTypes:[`Url`,`text/uri-list`]},[TEXT]:{exposeProperties:{text:(dataTransfer,matchesTypes)=>getDataFromDataTransfer(dataTransfer,matchesTypes,``),dataTransfer:dataTransfer=>dataTransfer},matchesTypes:[`Text`,`text/plain`]}};function createNativeDragSource(type,dataTransfer){let config=nativeTypesConfig[type];if(!config)throw Error(`native type ${type} has no configuration`);let result=new NativeDragSource(config);return result.loadDataTransfer(dataTransfer),result}function matchNativeItemType(dataTransfer){if(!dataTransfer)return null;let dataTransferTypes=Array.prototype.slice.call(dataTransfer.types||[]);return Object.keys(nativeTypesConfig).filter(nativeItemType=>{let typeConfig=nativeTypesConfig[nativeItemType];return typeConfig?.matchesTypes?typeConfig.matchesTypes.some(t$4=>dataTransferTypes.indexOf(t$4)>-1):!1})[0]||null}const isFirefox=memoize(()=>/firefox/i.test(navigator.userAgent)),isSafari=memoize(()=>!!window.safari);var MonotonicInterpolant=class{interpolate(x$2){let{xs,ys,c1s,c2s,c3s}=this,i$4=xs.length-1;if(x$2===xs[i$4])return ys[i$4];let low=0,high=c3s.length-1,mid;for(;low<=high;){mid=Math.floor(.5*(low+high));let xHere=xs[mid];if(xHere<x$2)low=mid+1;else if(xHere>x$2)high=mid-1;else return ys[mid]}i$4=Math.max(0,high);let diff=x$2-xs[i$4],diffSq=diff*diff;return ys[i$4]+c1s[i$4]*diff+c2s[i$4]*diffSq+c3s[i$4]*diff*diffSq}constructor(xs,ys){let{length}=xs,indexes=[];for(let i$4=0;i$4<length;i$4++)indexes.push(i$4);indexes.sort((a$4,b$3)=>xs[a$4]<xs[b$3]?-1:1);let dys=[],dxs=[],ms=[],dx,dy;for(let i1=0;i1<length-1;i1++)dx=xs[i1+1]-xs[i1],dy=ys[i1+1]-ys[i1],dxs.push(dx),dys.push(dy),ms.push(dy/dx);let c1s=[ms[0]];for(let i2=0;i2<dxs.length-1;i2++){let m2=ms[i2],mNext=ms[i2+1];if(m2*mNext<=0)c1s.push(0);else{dx=dxs[i2];let dxNext=dxs[i2+1],common=dx+dxNext;c1s.push(3*common/((common+dxNext)/m2+(common+dx)/mNext))}}c1s.push(ms[ms.length-1]);let c2s=[],c3s=[],m$3;for(let i3=0;i3<c1s.length-1;i3++){m$3=ms[i3];let c1=c1s[i3],invDx=1/dxs[i3],common=c1+c1s[i3+1]-m$3-m$3;c2s.push((m$3-c1-common)*invDx),c3s.push(common*invDx*invDx)}this.xs=xs,this.ys=ys,this.c1s=c1s,this.c2s=c2s,this.c3s=c3s}},ELEMENT_NODE$1=1;function getNodeClientOffset$1(node){let el=node.nodeType===ELEMENT_NODE$1?node:node.parentElement;if(!el)return null;let{top,left}=el.getBoundingClientRect();return{x:left,y:top}}function getEventClientOffset$1(e$4){return{x:e$4.clientX,y:e$4.clientY}}function isImageNode(node){var ref;return node.nodeName===`IMG`&&(isFirefox()||!document.documentElement?.contains(node))}function getDragPreviewSize(isImage,dragPreview,sourceWidth,sourceHeight){let dragPreviewWidth=isImage?dragPreview.width:sourceWidth,dragPreviewHeight=isImage?dragPreview.height:sourceHeight;return isSafari()&&isImage&&(dragPreviewHeight/=window.devicePixelRatio,dragPreviewWidth/=window.devicePixelRatio),{dragPreviewWidth,dragPreviewHeight}}function getDragPreviewOffset(sourceNode,dragPreview,clientOffset,anchorPoint,offsetPoint){let isImage=isImageNode(dragPreview),dragPreviewNodeOffsetFromClient=getNodeClientOffset$1(isImage?sourceNode:dragPreview),offsetFromDragPreview={x:clientOffset.x-dragPreviewNodeOffsetFromClient.x,y:clientOffset.y-dragPreviewNodeOffsetFromClient.y},{offsetWidth:sourceWidth,offsetHeight:sourceHeight}=sourceNode,{anchorX,anchorY}=anchorPoint,{dragPreviewWidth,dragPreviewHeight}=getDragPreviewSize(isImage,dragPreview,sourceWidth,sourceHeight),calculateYOffset=()=>{let y$2=new MonotonicInterpolant([0,.5,1],[offsetFromDragPreview.y,offsetFromDragPreview.y/sourceHeight*dragPreviewHeight,offsetFromDragPreview.y+dragPreviewHeight-sourceHeight]).interpolate(anchorY);return isSafari()&&isImage&&(y$2+=(window.devicePixelRatio-1)*dragPreviewHeight),y$2},calculateXOffset=()=>new MonotonicInterpolant([0,.5,1],[offsetFromDragPreview.x,offsetFromDragPreview.x/sourceWidth*dragPreviewWidth,offsetFromDragPreview.x+dragPreviewWidth-sourceWidth]).interpolate(anchorX),{offsetX,offsetY}=offsetPoint,isManualOffsetX=offsetX===0||offsetX,isManualOffsetY=offsetY===0||offsetY;return{x:isManualOffsetX?offsetX:calculateXOffset(),y:isManualOffsetY?offsetY:calculateYOffset()}}var OptionsReader$1=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<`u`)return window}get document(){var ref;if(this.globalContext?.document)return this.globalContext.document;if(this.window)return this.window.document}get rootElement(){var ref;return this.optionsArgs?.rootElement||this.window}constructor(globalContext,options$1){this.ownerDocument=null,this.globalContext=globalContext,this.optionsArgs=options$1}};function _defineProperty(obj,key$1,value){return key$1 in obj?Object.defineProperty(obj,key$1,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key$1]=value,obj}function _objectSpread(target){for(var i$4=1;i$4<arguments.length;i$4++){var source=arguments[i$4]==null?{}:arguments[i$4],ownKeys=Object.keys(source);typeof Object.getOwnPropertySymbols==`function`&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key$1){_defineProperty(target,key$1,source[key$1])})}return target}var HTML5BackendImpl=class{profile(){var ref,ref1;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:this.dragStartSourceIds?.length||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:this.dragOverTargetIds?.length||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let root$3=this.rootElement;if(root$3!==void 0){if(root$3.__isReactDndBackendSetUp)throw Error(`Cannot have two HTML5 backends at the same time.`);root$3.__isReactDndBackendSetUp=!0,this.addEventListeners(root$3)}}teardown(){let root$3=this.rootElement;if(root$3!==void 0&&(root$3.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var ref;(ref=this.window)==null||ref.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(sourceId,node,options$1){return this.sourcePreviewNodeOptions.set(sourceId,options$1),this.sourcePreviewNodes.set(sourceId,node),()=>{this.sourcePreviewNodes.delete(sourceId),this.sourcePreviewNodeOptions.delete(sourceId)}}connectDragSource(sourceId,node,options$1){this.sourceNodes.set(sourceId,node),this.sourceNodeOptions.set(sourceId,options$1);let handleDragStart=e$4=>this.handleDragStart(e$4,sourceId),handleSelectStart=e$4=>this.handleSelectStart(e$4);return node.setAttribute(`draggable`,`true`),node.addEventListener(`dragstart`,handleDragStart),node.addEventListener(`selectstart`,handleSelectStart),()=>{this.sourceNodes.delete(sourceId),this.sourceNodeOptions.delete(sourceId),node.removeEventListener(`dragstart`,handleDragStart),node.removeEventListener(`selectstart`,handleSelectStart),node.setAttribute(`draggable`,`false`)}}connectDropTarget(targetId,node){let handleDragEnter=e$4=>this.handleDragEnter(e$4,targetId),handleDragOver=e$4=>this.handleDragOver(e$4,targetId),handleDrop=e$4=>this.handleDrop(e$4,targetId);return node.addEventListener(`dragenter`,handleDragEnter),node.addEventListener(`dragover`,handleDragOver),node.addEventListener(`drop`,handleDrop),()=>{node.removeEventListener(`dragenter`,handleDragEnter),node.removeEventListener(`dragover`,handleDragOver),node.removeEventListener(`drop`,handleDrop)}}addEventListeners(target){target.addEventListener&&(target.addEventListener(`dragstart`,this.handleTopDragStart),target.addEventListener(`dragstart`,this.handleTopDragStartCapture,!0),target.addEventListener(`dragend`,this.handleTopDragEndCapture,!0),target.addEventListener(`dragenter`,this.handleTopDragEnter),target.addEventListener(`dragenter`,this.handleTopDragEnterCapture,!0),target.addEventListener(`dragleave`,this.handleTopDragLeaveCapture,!0),target.addEventListener(`dragover`,this.handleTopDragOver),target.addEventListener(`dragover`,this.handleTopDragOverCapture,!0),target.addEventListener(`drop`,this.handleTopDrop),target.addEventListener(`drop`,this.handleTopDropCapture,!0))}removeEventListeners(target){target.removeEventListener&&(target.removeEventListener(`dragstart`,this.handleTopDragStart),target.removeEventListener(`dragstart`,this.handleTopDragStartCapture,!0),target.removeEventListener(`dragend`,this.handleTopDragEndCapture,!0),target.removeEventListener(`dragenter`,this.handleTopDragEnter),target.removeEventListener(`dragenter`,this.handleTopDragEnterCapture,!0),target.removeEventListener(`dragleave`,this.handleTopDragLeaveCapture,!0),target.removeEventListener(`dragover`,this.handleTopDragOver),target.removeEventListener(`dragover`,this.handleTopDragOverCapture,!0),target.removeEventListener(`drop`,this.handleTopDrop),target.removeEventListener(`drop`,this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let sourceId=this.monitor.getSourceId(),sourceNodeOptions=this.sourceNodeOptions.get(sourceId);return _objectSpread({dropEffect:this.altKeyPressed?`copy`:`move`},sourceNodeOptions||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?`copy`:this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let sourceId=this.monitor.getSourceId();return _objectSpread({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(sourceId)||{})}isDraggingNativeItem(){let itemType=this.monitor.getItemType();return Object.keys(NativeTypes_exports).some(key$1=>NativeTypes_exports[key$1]===itemType)}beginDragNativeItem(type,dataTransfer){this.clearCurrentDragSourceNode(),this.currentNativeSource=createNativeDragSource(type,dataTransfer),this.currentNativeHandle=this.registry.addSource(type,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(node){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=node,this.mouseMoveTimeoutTimer=setTimeout(()=>{var ref;return this.rootElement?.addEventListener(`mousemove`,this.endDragIfSourceWasRemovedFromDOM,!0)},1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var ref;(ref=this.window)==null||ref.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener(`mousemove`,this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e$4,sourceId){e$4.defaultPrevented||(this.dragStartSourceIds||=[],this.dragStartSourceIds.unshift(sourceId))}handleDragEnter(_e$1,targetId){this.dragEnterTargetIds.unshift(targetId)}handleDragOver(_e$1,targetId){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(targetId)}handleDrop(_e$1,targetId){this.dropTargetIds.unshift(targetId)}constructor(manager,globalContext,options$1){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=sourceId=>{let source=this.sourceNodes.get(sourceId);return source&&getNodeClientOffset$1(source)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=node=>!!(node&&this.document&&this.document.body&&this.document.body.contains(node)),this.endDragIfSourceWasRemovedFromDOM=()=>{let node=this.currentDragSourceNode;node==null||this.isNodeInDocument(node)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=dragOverTargetIds=>{this.hoverRafId===null&&typeof requestAnimationFrame<`u`&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(dragOverTargetIds||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<`u`&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e$4=>{if(e$4.defaultPrevented)return;let{dragStartSourceIds}=this;this.dragStartSourceIds=null;let clientOffset=getEventClientOffset$1(e$4);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(dragStartSourceIds||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset});let{dataTransfer}=e$4,nativeType=matchNativeItemType(dataTransfer);if(this.monitor.isDragging()){if(dataTransfer&&typeof dataTransfer.setDragImage==`function`){let sourceId=this.monitor.getSourceId(),sourceNode=this.sourceNodes.get(sourceId),dragPreview=this.sourcePreviewNodes.get(sourceId)||sourceNode;if(dragPreview){let{anchorX,anchorY,offsetX,offsetY}=this.getCurrentSourcePreviewNodeOptions(),dragPreviewOffset=getDragPreviewOffset(sourceNode,dragPreview,clientOffset,{anchorX,anchorY},{offsetX,offsetY});dataTransfer.setDragImage(dragPreview,dragPreviewOffset.x,dragPreviewOffset.y)}}try{dataTransfer?.setData(`application/json`,{})}catch{}this.setCurrentDragSourceNode(e$4.target);let{captureDraggingState}=this.getCurrentSourcePreviewNodeOptions();captureDraggingState?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(nativeType)this.beginDragNativeItem(nativeType);else if(dataTransfer&&!dataTransfer.types&&(e$4.target&&!e$4.target.hasAttribute||!e$4.target.hasAttribute(`draggable`)))return;else e$4.preventDefault()},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e$4=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var ref;(ref=this.currentNativeSource)==null||ref.loadDataTransfer(e$4.dataTransfer)}if(!this.enterLeaveCounter.enter(e$4.target)||this.monitor.isDragging())return;let{dataTransfer}=e$4,nativeType=matchNativeItemType(dataTransfer);nativeType&&this.beginDragNativeItem(nativeType,dataTransfer)},this.handleTopDragEnter=e$4=>{let{dragEnterTargetIds}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=e$4.altKey,dragEnterTargetIds.length>0&&this.actions.hover(dragEnterTargetIds,{clientOffset:getEventClientOffset$1(e$4)}),dragEnterTargetIds.some(targetId=>this.monitor.canDropOnTarget(targetId))&&(e$4.preventDefault(),e$4.dataTransfer&&(e$4.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=e$4=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var ref;(ref=this.currentNativeSource)==null||ref.loadDataTransfer(e$4.dataTransfer)}},this.handleTopDragOver=e$4=>{let{dragOverTargetIds}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){e$4.preventDefault(),e$4.dataTransfer&&(e$4.dataTransfer.dropEffect=`none`);return}this.altKeyPressed=e$4.altKey,this.lastClientOffset=getEventClientOffset$1(e$4),this.scheduleHover(dragOverTargetIds),(dragOverTargetIds||[]).some(targetId=>this.monitor.canDropOnTarget(targetId))?(e$4.preventDefault(),e$4.dataTransfer&&(e$4.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e$4.preventDefault():(e$4.preventDefault(),e$4.dataTransfer&&(e$4.dataTransfer.dropEffect=`none`))},this.handleTopDragLeaveCapture=e$4=>{this.isDraggingNativeItem()&&e$4.preventDefault(),this.enterLeaveCounter.leave(e$4.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=e$4=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var ref;e$4.preventDefault(),(ref=this.currentNativeSource)==null||ref.loadDataTransfer(e$4.dataTransfer)}else matchNativeItemType(e$4.dataTransfer)&&e$4.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e$4=>{let{dropTargetIds}=this;this.dropTargetIds=[],this.actions.hover(dropTargetIds,{clientOffset:getEventClientOffset$1(e$4)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e$4=>{let target=e$4.target;typeof target.dragDrop==`function`&&(target.tagName===`INPUT`||target.tagName===`SELECT`||target.tagName===`TEXTAREA`||target.isContentEditable||(e$4.preventDefault(),target.dragDrop()))},this.options=new OptionsReader$1(globalContext,options$1),this.actions=manager.getActions(),this.monitor=manager.getMonitor(),this.registry=manager.getRegistry(),this.enterLeaveCounter=new EnterLeaveCounter(this.isNodeInDocument)}},emptyImage;function getEmptyImage(){return emptyImage||(emptyImage=new Image,emptyImage.src=`data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==`),emptyImage}const HTML5Backend=function(manager,context,options$1){return new HTML5BackendImpl(manager,context,options$1)};var ListenerType;(function(ListenerType$1){ListenerType$1.mouse=`mouse`,ListenerType$1.touch=`touch`,ListenerType$1.keyboard=`keyboard`})(ListenerType||={});var OptionsReader=class{get delay(){var _delay;return this.args.delay??0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var _ignoreContextMenu;return this.args.ignoreContextMenu??!1}get enableHoverOutsideTarget(){var _enableHoverOutsideTarget;return this.args.enableHoverOutsideTarget??!1}get enableKeyboardEvents(){var _enableKeyboardEvents;return this.args.enableKeyboardEvents??!1}get enableMouseEvents(){var _enableMouseEvents;return this.args.enableMouseEvents??!1}get enableTouchEvents(){var _enableTouchEvents;return this.args.enableTouchEvents??!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var ref,ref1,ref2,ref3;return this.args?.delayTouchStart??this.args?.delay??0}get delayMouseStart(){var ref,ref4,ref5,ref6;return this.args?.delayMouseStart??this.args?.delay??0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<`u`)return window}get document(){var ref;if(this.context?.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var ref;return this.args?.rootElement||this.document}constructor(args,context){this.args=args,this.context=context}};function distance$1(x1,y1,x2,y2){return Math.sqrt(Math.abs(x2-x1)**2+Math.abs(y2-y1)**2)}function inAngleRanges(x1,y1,x2,y2,angleRanges){if(!angleRanges)return!1;let angle=Math.atan2(y2-y1,x2-x1)*180/Math.PI+180;for(let i$4=0;i$4<angleRanges.length;++i$4){let ar=angleRanges[i$4];if(ar&&(ar.start==null||angle>=ar.start)&&(ar.end==null||angle<=ar.end))return!0}return!1}var MouseButtons={Left:1,Right:2,Center:4},MouseButton={Left:0,Center:1,Right:2};function eventShouldStartDrag(e$4){return e$4.button===void 0||e$4.button===MouseButton.Left}function eventShouldEndDrag(e$4){return e$4.buttons===void 0||(e$4.buttons&MouseButtons.Left)===0}function isTouchEvent$1(e$4){return!!e$4.targetTouches}var ELEMENT_NODE=1;function getNodeClientOffset(node){let el=node.nodeType===ELEMENT_NODE?node:node.parentElement;if(!el)return;let{top,left}=el.getBoundingClientRect();return{x:left,y:top}}function getEventClientTouchOffset(e$4,lastTargetTouchFallback){if(e$4.targetTouches.length===1)return getEventClientOffset(e$4.targetTouches[0]);if(lastTargetTouchFallback&&e$4.touches.length===1&&e$4.touches[0].target===lastTargetTouchFallback.target)return getEventClientOffset(e$4.touches[0])}function getEventClientOffset(e$4,lastTargetTouchFallback){return isTouchEvent$1(e$4)?getEventClientTouchOffset(e$4,lastTargetTouchFallback):{x:e$4.clientX,y:e$4.clientY}}const supportsPassive=(()=>{let supported=!1;try{addEventListener(`test`,()=>{},Object.defineProperty({},`passive`,{get(){return supported=!0,!0}}))}catch{}return supported})();var eventNames={[ListenerType.mouse]:{start:`mousedown`,move:`mousemove`,end:`mouseup`,contextmenu:`contextmenu`},[ListenerType.touch]:{start:`touchstart`,move:`touchmove`,end:`touchend`},[ListenerType.keyboard]:{keydown:`keydown`}},TouchBackendImpl=class TouchBackendImpl{profile(){var ref;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:this.dragOverTargetIds?.length||0}}get document(){return this.options.document}setup(){let root$3=this.options.rootElement;root$3&&(invariant$2(!TouchBackendImpl.isSetUp,`Cannot have two Touch backends at the same time.`),TouchBackendImpl.isSetUp=!0,this.addEventListener(root$3,`start`,this.getTopMoveStartHandler()),this.addEventListener(root$3,`start`,this.handleTopMoveStartCapture,!0),this.addEventListener(root$3,`move`,this.handleTopMove),this.addEventListener(root$3,`move`,this.handleTopMoveCapture,!0),this.addEventListener(root$3,`end`,this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(root$3,`contextmenu`,this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(root$3,`keydown`,this.handleCancelOnEscape,!0))}teardown(){let root$3=this.options.rootElement;root$3&&(TouchBackendImpl.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(root$3,`start`,this.handleTopMoveStartCapture,!0),this.removeEventListener(root$3,`start`,this.handleTopMoveStart),this.removeEventListener(root$3,`move`,this.handleTopMoveCapture,!0),this.removeEventListener(root$3,`move`,this.handleTopMove),this.removeEventListener(root$3,`end`,this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(root$3,`contextmenu`,this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(root$3,`keydown`,this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(subject,event,handler,capture=!1){let options$1=supportsPassive?{capture,passive:!1}:capture;this.listenerTypes.forEach(function(listenerType){let evt=eventNames[listenerType][event];evt&&subject.addEventListener(evt,handler,options$1)})}removeEventListener(subject,event,handler,capture=!1){let options$1=supportsPassive?{capture,passive:!1}:capture;this.listenerTypes.forEach(function(listenerType){let evt=eventNames[listenerType][event];evt&&subject.removeEventListener(evt,handler,options$1)})}connectDragSource(sourceId,node){let handleMoveStart=this.handleMoveStart.bind(this,sourceId);return this.sourceNodes.set(sourceId,node),this.addEventListener(node,`start`,handleMoveStart),()=>{this.sourceNodes.delete(sourceId),this.removeEventListener(node,`start`,handleMoveStart)}}connectDragPreview(sourceId,node,options$1){return this.sourcePreviewNodeOptions.set(sourceId,options$1),this.sourcePreviewNodes.set(sourceId,node),()=>{this.sourcePreviewNodes.delete(sourceId),this.sourcePreviewNodeOptions.delete(sourceId)}}connectDropTarget(targetId,node){let root$3=this.options.rootElement;if(!this.document||!root$3)return()=>{};let handleMove=e$4=>{if(!this.document||!root$3||!this.monitor.isDragging())return;let coords;switch(e$4.type){case eventNames.mouse.move:coords={x:e$4.clientX,y:e$4.clientY};break;case eventNames.touch.move:var ref,ref1;coords={x:e$4.touches[0]?.clientX||0,y:e$4.touches[0]?.clientY||0};break}let droppedOn=coords==null?void 0:this.document.elementFromPoint(coords.x,coords.y),childMatch=droppedOn&&node.contains(droppedOn);if(droppedOn===node||childMatch)return this.handleMove(e$4,targetId)};return this.addEventListener(this.document.body,`move`,handleMove),this.targetNodes.set(targetId,node),()=>{this.document&&(this.targetNodes.delete(targetId),this.removeEventListener(this.document.body,`move`,handleMove))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(node){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=node,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{node&&!node.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!node||!node.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(node.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display=`none`,this.draggedSourceNode.removeAttribute(`data-reactid`),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(manager,context,options$1){this.getSourceClientOffset=sourceId=>{let element=this.sourceNodes.get(sourceId);return element&&getNodeClientOffset(element)},this.handleTopMoveStartCapture=e$4=>{eventShouldStartDrag(e$4)&&(this.moveStartSourceIds=[])},this.handleMoveStart=sourceId=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(sourceId)},this.handleTopMoveStart=e$4=>{if(!eventShouldStartDrag(e$4))return;let clientOffset=getEventClientOffset(e$4);clientOffset&&(isTouchEvent$1(e$4)&&(this.lastTargetTouchFallback=e$4.targetTouches[0]),this._mouseClientOffset=clientOffset),this.waitingForDelay=!1},this.handleTopMoveStartDelay=e$4=>{if(!eventShouldStartDrag(e$4))return;let delay$1=e$4.type===eventNames.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e$4),delay$1),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(_evt,targetId)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(targetId)},this.handleTopMove=e1=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds,dragOverTargetIds}=this,enableHoverOutsideTarget=this.options.enableHoverOutsideTarget,clientOffset=getEventClientOffset(e1,this.lastTargetTouchFallback);if(!clientOffset)return;if(this._isScrolling||!this.monitor.isDragging()&&inAngleRanges(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,clientOffset.x,clientOffset.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty(`x`)&&moveStartSourceIds&&distance$1(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,clientOffset.x,clientOffset.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(moveStartSourceIds,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let sourceNode=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(sourceNode),this.actions.publishDragSource(),e1.cancelable&&e1.preventDefault();let dragOverTargetNodes=(dragOverTargetIds||[]).map(key$1=>this.targetNodes.get(key$1)).filter(e$4=>!!e$4),elementsAtPoint=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(clientOffset.x,clientOffset.y,dragOverTargetNodes):this.document.elementsFromPoint(clientOffset.x,clientOffset.y),elementsAtPointExtended=[];for(let nodeId in elementsAtPoint){if(!elementsAtPoint.hasOwnProperty(nodeId))continue;let currentNode=elementsAtPoint[nodeId];for(currentNode!=null&&elementsAtPointExtended.push(currentNode);currentNode;)currentNode=currentNode.parentElement,currentNode&&elementsAtPointExtended.indexOf(currentNode)===-1&&elementsAtPointExtended.push(currentNode)}let orderedDragOverTargetIds=elementsAtPointExtended.filter(node=>dragOverTargetNodes.indexOf(node)>-1).map(node=>this._getDropTargetId(node)).filter(node=>!!node).filter((id$3,index$2,ids$1)=>ids$1.indexOf(id$3)===index$2);if(enableHoverOutsideTarget)for(let targetId in this.targetNodes){let targetNode=this.targetNodes.get(targetId);if(sourceNode&&targetNode&&targetNode.contains(sourceNode)&&orderedDragOverTargetIds.indexOf(targetId)===-1){orderedDragOverTargetIds.unshift(targetId);break}}orderedDragOverTargetIds.reverse(),this.actions.hover(orderedDragOverTargetIds,{clientOffset})},this._getDropTargetId=node=>{let keys=this.targetNodes.keys(),next=keys.next();for(;next.done===!1;){let targetId=next.value;if(node===this.targetNodes.get(targetId))return targetId;next=keys.next()}},this.handleTopMoveEndCapture=e$4=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,eventShouldEndDrag(e$4)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}e$4.cancelable&&e$4.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=e$4=>{e$4.key===`Escape`&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new OptionsReader(options$1,context),this.actions=manager.getActions(),this.monitor=manager.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(ListenerType.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(ListenerType.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(ListenerType.keyboard)}};const TouchBackend=function(manager,context={},options$1={}){return new TouchBackendImpl(manager,context,options$1)},collides=(w1,w2)=>w1===w2?!1:w1.x<w2.x+w2.w&&w1.x+w1.w>w2.x&&w1.y<w2.y+w2.h&&w1.y+w1.h>w2.y,clampWidget=(layout$1,gridCols)=>{let{x:x$2,w:w$1}=layout$1;return w$1>gridCols&&(w$1=gridCols),x$2+w$1>gridCols+1&&(x$2=gridCols-w$1+1),x$2<1&&(x$2=1),{...layout$1,x:x$2,w:w$1}},resolveCollisions=(widgets,activeWidget)=>{let sorted=[...widgets].sort((a$4,b$3)=>a$4.layout.y===b$3.layout.y?a$4.layout.x-b$3.layout.x:a$4.layout.y-b$3.layout.y),activeIndex=sorted.findIndex(w$1=>w$1.id===activeWidget.id);sorted.splice(activeIndex,1),sorted.push(activeWidget);let otherWidgets=widgets.filter(w$1=>w$1.id!==activeWidget.id),queue=[activeWidget],currentLayouts=new Map;for(widgets.forEach(w$1=>currentLayouts.set(w$1.id,{...w$1.layout})),currentLayouts.set(activeWidget.id,{...activeWidget.layout});queue.length>0;){let pusher=queue.shift(),pusherLayout=currentLayouts.get(pusher.id);for(let other of otherWidgets){let otherLayout=currentLayouts.get(other.id);if(collides(pusherLayout,otherLayout)){let newY=pusherLayout.y+pusherLayout.h,newLayout={...otherLayout,y:newY};currentLayouts.set(other.id,newLayout),newY!==otherLayout.y&&queue.push(other)}}}return widgets.map(w$1=>({...w$1,layout:currentLayouts.get(w$1.id)}))},compactLayout=widgets=>{let sorted=[...widgets].sort((a$4,b$3)=>a$4.layout.y===b$3.layout.y?a$4.layout.x-b$3.layout.x:a$4.layout.y-b$3.layout.y),placedWidgets=[];for(let widget of sorted){let newY=1;for(;;){let proposed={...widget.layout,y:newY};if(!placedWidgets.some(w$1=>collides(proposed,w$1.layout)))break;newY++}placedWidgets.push({...widget,layout:{...widget.layout,y:newY}})}return placedWidgets};var layerStyles={position:`fixed`,pointerEvents:`none`,zIndex:100,left:0,top:0,width:`100%`,height:`100%`};function getItemStyles(initialOffset,currentOffset){if(!initialOffset||!currentOffset)return{display:`none`};let{x:x$2,y:y$2}=currentOffset,transform$1=`translate(${x$2}px, ${y$2}px)`;return{transform:transform$1,WebkitTransform:transform$1}}const CustomDragLayer=()=>{let{itemType,isDragging:isDragging$2,item,initialOffset,currentOffset}=useDragLayer(monitor=>({item:monitor.getItem(),itemType:monitor.getItemType(),initialOffset:monitor.getInitialSourceClientOffset(),currentOffset:monitor.getSourceClientOffset(),isDragging:monitor.isDragging()}));if(!isDragging$2)return null;let WidgetComponent=WIDGET_COMPONENT_MAP[item.type],renderCustomPreview=()=>{if(item.type===`database`)return(0,import_jsx_runtime.jsx)(DatabaseWidget,{block:item,onUpdateBlock:()=>{}});if(item.type===`movie-ticket`)return(0,import_jsx_runtime.jsx)(MovieTicketWidget_default,{block:item,onUpdateBlock:()=>{}});if(item.type===`link-bookmark`)return(0,import_jsx_runtime.jsx)(LinkBookmarkWidget,{block:item,onUpdateBlock:()=>{}});if(item.type===`custom-block`&&item.content?.children){if(item.content.children.length===1){let child=item.content.children[0];if(child.type===`database`)return(0,import_jsx_runtime.jsx)(DatabaseWidget,{block:child,onUpdateBlock:()=>{}});if(child.type===`movie-ticket`)return(0,import_jsx_runtime.jsx)(MovieTicketWidget_default,{block:child,onUpdateBlock:()=>{}});if(child.type===`link-bookmark`)return(0,import_jsx_runtime.jsx)(LinkBookmarkWidget,{block:child,onUpdateBlock:()=>{}})}return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col items-center justify-center bg-white p-4 rounded-xl border border-indigo-200 shadow-xl opacity-90 h-full w-full`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-indigo-600 text-lg mb-1`,children:item.label||item.name||`Custom Widget`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-gray-400`,children:`Composite Widget`})]})}return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col items-center justify-center bg-white p-4 rounded-xl border border-indigo-200 shadow-xl opacity-90 h-full w-full`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-gray-700 text-md`,children:item.label||item.name||`Custom Widget`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-gray-400`,children:item.type})]})},isCustom=!WidgetComponent&&(item.type===`custom-block`||[`database`,`movie-ticket`,`link-bookmark`].includes(item.type)||typeof item.type==`string`&&item.type.startsWith(`custom-`));return(0,import_jsx_runtime.jsx)(`div`,{style:layerStyles,children:(0,import_jsx_runtime.jsx)(`div`,{style:getItemStyles(initialOffset,currentOffset),children:(0,import_jsx_runtime.jsx)(import_react.Suspense,{fallback:(0,import_jsx_runtime.jsx)(`div`,{className:`bg-white/50 w-full h-full`}),children:itemType===`MENU_ITEM`?(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center justify-center bg-[var(--bg-card)] rounded-lg shadow-lg border border-[var(--border-color)] opacity-90`,style:{width:item.initialWidth,height:item.initialHeight},children:(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold theme-text-primary text-lg`,children:item.label})}):WidgetComponent?(0,import_jsx_runtime.jsx)(`div`,{style:{width:item.initialWidth||item.w*100,height:item.initialHeight||item.h*100},children:(0,import_jsx_runtime.jsx)(WidgetComponent,{...item.props})}):isCustom?(0,import_jsx_runtime.jsx)(`div`,{style:{width:item.initialWidth||(item.layout?.w&&typeof item.layout.w==`number`?item.layout.w:200),height:item.initialHeight||(item.layout?.h&&typeof item.layout.h==`number`?item.layout.h:100),fontSize:`12px`},children:renderCustomPreview()}):(0,import_jsx_runtime.jsx)(`div`,{className:`bg-gray-200 p-2 rounded`,children:item.label||item.name||`Unknown Widget`})})})})},WIDGET_SIZES={"1x1":{w:160,h:160,label:`1x1`,capacity:4},"1x2":{w:160,h:340,label:`1x2`,capacity:6},"2x1":{w:340,h:160,label:`2x1`,capacity:4},"2x2":{w:340,h:340,label:`2x2`,capacity:10},"3x3":{w:520,h:520,label:`3x3`,capacity:20},"4x4":{w:700,h:700,label:`4x4`,capacity:35},"2x3":{w:340,h:520,label:`2x3`,capacity:15}},BLOCK_COSTS={text:1,heading3:1,"bullet-list":1,"number-list":1,"todo-list":1,"toggle-list":1,footnote:1,highlight:1,spoiler:1,callout:2,heading2:1.5,heading1:2,button:1.5,quote:2,divider:.5,"scroll-text":1.5,"typing-text":1,chart:5,calendar:6,image:4,accordion:3,"vertical-text":4,columns:3,math:2,"chart-pie":4,"chart-bar":4,"chart-radar":5,heatmap:3,counter:1.5,rating:1.5,"progress-bar":1,database:6,"unit-converter":2,calculator:3,"random-picker":2,"map-pin":3,"zip-viewer":2,"rss-reader":3,"link-bookmark":2,"pdf-viewer":4,"export-button":1,"flash-card":2,"mind-map":5,"code-sandbox":4,"word-book":3,"book-info":2,"movie-ticket":2};var LeftSidebar=({activeTab,setActiveTab,onAddBlock,onAddDecoration,remainingCapacity})=>{let renderBtn=(icon,label,type)=>{let cost=BLOCK_COSTS[type]||1,isDisabled=cost>remainingCapacity;return(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>!isDisabled&&onAddBlock(type),disabled:isDisabled,className:`w-full flex items-center gap-3 p-2.5 rounded-lg transition-all group relative text-left mb-1
                    ${isDisabled?`opacity-40 cursor-not-allowed bg-transparent`:`hover:bg-[var(--bg-card-secondary)] hover:text-[var(--text-primary)] cursor-pointer text-[var(--text-secondary)] bg-[var(--bg-card-secondary)]/50 border border-[var(--border-color)] hover:border-indigo-500`}
                `,children:[(0,import_jsx_runtime.jsx)(`div`,{className:isDisabled?``:`group-hover:text-indigo-400 text-[var(--text-secondary)]`,children:icon}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-medium text-[var(--text-primary)]`,children:label}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] text-[var(--text-secondary)]`,children:[`: `,cost]})]}),isDisabled&&(0,import_jsx_runtime.jsx)(`span`,{className:`absolute right-2 top-1/2 -translate-y-1/2 text-[10px] text-red-400 font-bold border border-red-900/50 bg-red-900/20 px-1.5 py-0.5 rounded`,children:`Full`})]},type)},renderDecoBtn=(icon,label,decoType)=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{let decoration={id:`deco-${Date.now()}`,type:decoType,x:50,y:50,w:200,h:200,color:`#e0e7ff`,opacity:1,zIndex:0,rotation:0};decoType===`blob`&&(decoration.points=[{x:50,y:0},{x:85,y:15},{x:100,y:50},{x:85,y:85},{x:50,y:100},{x:15,y:85},{x:0,y:50},{x:15,y:15}]),onAddDecoration?.(decoration)},className:`w-full flex items-center gap-3 p-2.5 rounded-lg transition-all text-left mb-1
                hover:bg-[var(--bg-card-secondary)] hover:text-[var(--text-primary)] cursor-pointer text-[var(--text-secondary)] bg-[var(--bg-card-secondary)]/50 border border-[var(--border-color)] hover:border-indigo-500`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`group-hover:text-indigo-400 text-[var(--text-secondary)]`,children:icon}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-medium text-[var(--text-primary)]`,children:label}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-[var(--text-secondary)]`,children:` `})]})]},decoType);return(0,import_jsx_runtime.jsxs)(`aside`,{className:`h-full flex bg-white/80 backdrop-blur-md border-r border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`w-16 h-full flex flex-col items-center py-4 gap-2 border-r border-[var(--border-color)] bg-white/50 overflow-y-auto scrollbar-hide`,children:[(0,import_jsx_runtime.jsx)(TabButton,{active:activeTab===`text`,onClick:()=>setActiveTab(`text`),icon:(0,import_jsx_runtime.jsx)(Type,{size:20}),label:``}),(0,import_jsx_runtime.jsx)(TabButton,{active:activeTab===`structure`,onClick:()=>setActiveTab(`structure`),icon:(0,import_jsx_runtime.jsx)(PanelsTopLeft,{size:20}),label:``}),(0,import_jsx_runtime.jsx)(TabButton,{active:activeTab===`visual`,onClick:()=>setActiveTab(`visual`),icon:(0,import_jsx_runtime.jsx)(Sparkles,{size:20}),label:``}),(0,import_jsx_runtime.jsx)(TabButton,{active:activeTab===`effect`,onClick:()=>setActiveTab(`effect`),icon:(0,import_jsx_runtime.jsx)(Activity,{size:20}),label:``}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-px bg-[var(--border-color)] my-1`}),(0,import_jsx_runtime.jsx)(TabButton,{active:activeTab===`data`,onClick:()=>setActiveTab(`data`),icon:(0,import_jsx_runtime.jsx)(ChartPie,{size:20}),label:``}),(0,import_jsx_runtime.jsx)(TabButton,{active:activeTab===`util`,onClick:()=>setActiveTab(`util`),icon:(0,import_jsx_runtime.jsx)(Wrench,{size:20}),label:``}),(0,import_jsx_runtime.jsx)(TabButton,{active:activeTab===`study`,onClick:()=>setActiveTab(`study`),icon:(0,import_jsx_runtime.jsx)(GraduationCap,{size:20}),label:``}),(0,import_jsx_runtime.jsx)(TabButton,{active:activeTab===`interaction`,onClick:()=>setActiveTab(`interaction`),icon:(0,import_jsx_runtime.jsx)(MousePointer2,{size:20}),label:``})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-52 h-full flex flex-col max-md:flex-1`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-2 border-b border-[var(--border-color)] bg-transparent`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 text-xs text-[var(--text-secondary)]`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold whitespace-nowrap`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 h-1.5 bg-[var(--bg-card-secondary)] rounded-full overflow-hidden`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`h-full transition-all duration-300 ${remainingCapacity<2?`bg-red-500`:`bg-indigo-500`}`,style:{width:`${Math.min(100,remainingCapacity*10)}%`}})}),(0,import_jsx_runtime.jsx)(`span`,{className:`whitespace-nowrap ${remainingCapacity<2?`text-red-400 font-bold`:`text-indigo-400 font-mono`}`,children:remainingCapacity.toFixed(1)})]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 overflow-y-auto p-3 scrollbar-thin scrollbar-thumb-[var(--border-color)] scrollbar-track-transparent`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xs font-bold text-[var(--text-secondary)] uppercase tracking-wider mb-3 px-1`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[activeTab===`text`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[renderBtn((0,import_jsx_runtime.jsx)(Heading1,{size:18}),` (H1~H3)`,`heading1`),renderBtn((0,import_jsx_runtime.jsx)(Type,{size:18}),` `,`text`),renderBtn((0,import_jsx_runtime.jsx)(Quote,{size:18}),``,`quote`),renderBtn((0,import_jsx_runtime.jsx)(Minus,{size:18}),``,`divider`)]}),activeTab===`structure`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[renderBtn((0,import_jsx_runtime.jsx)(List,{size:18}),` `,`bullet-list`),renderBtn((0,import_jsx_runtime.jsx)(ListOrdered,{size:18}),` `,`number-list`),renderBtn((0,import_jsx_runtime.jsx)(SquareCheckBig,{size:18}),`  `,`todo-list`),renderBtn((0,import_jsx_runtime.jsx)(PanelLeft,{size:18,className:`rotate-90`}),` `,`toggle-list`),renderBtn((0,import_jsx_runtime.jsx)(Columns2,{size:18}),` `,`columns`),renderBtn((0,import_jsx_runtime.jsx)(AlignVerticalJustifyCenter,{size:18}),``,`accordion`)]}),activeTab===`visual`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[renderBtn((0,import_jsx_runtime.jsx)(CircleAlert,{size:18}),` (Callout)`,`callout`),renderBtn((0,import_jsx_runtime.jsx)(Highlighter,{size:18}),` `,`highlight`),renderBtn((0,import_jsx_runtime.jsx)(EyeOff,{size:18}),` `,`spoiler`),(0,import_jsx_runtime.jsx)(`div`,{className:`my-2 border-t border-dashed border-[var(--border-color)]`}),(0,import_jsx_runtime.jsx)(`h4`,{className:`text-[10px] font-bold text-[var(--text-secondary)] mb-2 px-1`,children:` `}),renderDecoBtn((0,import_jsx_runtime.jsx)(`div`,{className:`w-4 h-4 rounded-full border-2 border-current`}),` (Circle)`,`circle`),renderDecoBtn((0,import_jsx_runtime.jsx)(`div`,{className:`w-4 h-4 border-2 border-current`}),` (Square)`,`square`),renderDecoBtn((0,import_jsx_runtime.jsx)(Star,{size:18}),`  (Star)`,`star`),renderDecoBtn((0,import_jsx_runtime.jsx)(Sparkles,{size:18}),`  (Blob)`,`blob`)]}),activeTab===`effect`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[renderBtn((0,import_jsx_runtime.jsx)(Play,{size:18}),` `,`typing-text`),renderBtn((0,import_jsx_runtime.jsx)(ChevronsRight,{size:18}),` `,`scroll-text`)]}),activeTab===`data`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[renderBtn((0,import_jsx_runtime.jsx)(ChartPie,{size:18}),` `,`chart-pie`),renderBtn((0,import_jsx_runtime.jsx)(ChartColumn,{size:18}),`/ `,`chart-bar`),renderBtn((0,import_jsx_runtime.jsx)(Radar,{size:18}),` `,`chart-radar`),renderBtn((0,import_jsx_runtime.jsx)(Grid3x3,{size:18}),` ()`,`heatmap`),renderBtn((0,import_jsx_runtime.jsx)(CirclePlus,{size:18}),``,`counter`),renderBtn((0,import_jsx_runtime.jsx)(Star,{size:18}),`/`,`rating`),renderBtn((0,import_jsx_runtime.jsx)(Battery,{size:18}),` `,`progress-bar`),renderBtn((0,import_jsx_runtime.jsx)(Database,{size:18}),``,`database`)]}),activeTab===`util`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[renderBtn((0,import_jsx_runtime.jsx)(ArrowLeftRight,{size:18}),` `,`unit-converter`),renderBtn((0,import_jsx_runtime.jsx)(Link$1,{size:18}),` `,`link-bookmark`),renderBtn((0,import_jsx_runtime.jsx)(FileText,{size:18}),`PDF `,`pdf-viewer`),renderBtn((0,import_jsx_runtime.jsx)(Map$1,{size:18}),` `,`travel-plan`)]}),activeTab===`study`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[renderBtn((0,import_jsx_runtime.jsx)(StickyNote,{size:18}),` `,`flashcards`),renderBtn((0,import_jsx_runtime.jsx)(Search,{size:18}),`  `,`book-info`),renderBtn((0,import_jsx_runtime.jsx)(Search,{size:18}),`  `,`movie-ticket`)]})]})]})]})]})},TabButton=({active,onClick,icon,label})=>(0,import_jsx_runtime.jsxs)(`button`,{onClick,className:`w-12 h-12 flex flex-col items-center justify-center rounded-lg transition-all gap-0.5
            ${active?`bg-indigo-600 text-white shadow-lg shadow-indigo-900/20`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-card-secondary)]`}
        `,title:label,children:[icon,(0,import_jsx_runtime.jsx)(`span`,{className:`text-[9px] font-medium`,children:label})]}),LeftSidebar_default=LeftSidebar,RightSidebar=({selectedBlock,onUpdateBlock,onDeleteBlock,onClose,selectedDecoration,onUpdateDecoration,onDeleteDecoration})=>{if(selectedDecoration&&!selectedBlock)return(0,import_jsx_runtime.jsxs)(`div`,{className:`w-80 h-full bg-[var(--bg-card)] border-l border-[var(--border-color)] flex flex-col shadow-xl z-50 overflow-hidden`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`h-14 flex items-center justify-between px-4 border-b border-[var(--border-color)] bg-[var(--bg-card-secondary)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Sparkles,{size:18,className:`text-indigo-500`}),(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-[var(--text-primary)]`,children:` `})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-1 hover:bg-black/10 rounded-full dark:hover:bg-white/10 transition-colors`,children:(0,import_jsx_runtime.jsx)(CircleX,{size:20,className:`text-[var(--text-secondary)]`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 overflow-y-auto p-4 space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold text-[var(--text-secondary)] uppercase`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex bg-[var(--bg-primary)] p-1 rounded-lg border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>onUpdateDecoration?.(selectedDecoration.id,{mediaType:`image`}),className:`flex-1 py-1 text-xs font-bold rounded flex items-center justify-center gap-1 transition-colors
                                    ${(selectedDecoration.mediaType||`image`)===`image`?`bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:[(0,import_jsx_runtime.jsx)(Search,{size:12}),` `]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>onUpdateDecoration?.(selectedDecoration.id,{mediaType:`video`}),className:`flex-1 py-1 text-xs font-bold rounded flex items-center justify-center gap-1 transition-colors
                                    ${selectedDecoration.mediaType===`video`?`bg-[var(--bg-card)] text-[var(--text-primary)] shadow-sm`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:[(0,import_jsx_runtime.jsx)(Film,{size:12}),` `]})]}),(selectedDecoration.mediaType||`image`)===`image`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2 mt-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold text-[var(--text-secondary)] uppercase`,children:` `}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:selectedDecoration.imageUrl||``,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{imageUrl:e$4.target.value}),placeholder:` URL ...`,className:`w-full p-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-xs text-[var(--text-primary)]`}),selectedDecoration.imageUrl&&(0,import_jsx_runtime.jsx)(`div`,{className:`w-20 h-20 bg-[var(--bg-primary)] rounded border border-[var(--border-color)] overflow-hidden mx-auto`,children:(0,import_jsx_runtime.jsx)(`img`,{src:selectedDecoration.imageUrl,alt:`preview`,className:`w-full h-full object-contain`})})]}),selectedDecoration.mediaType===`video`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2 mt-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold text-[var(--text-secondary)] uppercase`,children:`  (mp4/webm)`}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:selectedDecoration.videoUrl||``,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{videoUrl:e$4.target.value}),placeholder:` URL ... ( )`,className:`w-full p-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-xs text-[var(--text-primary)]`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 space-y-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-[10px] text-[var(--text-secondary)]`,children:`  ()`}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,min:`0`,step:`0.1`,value:selectedDecoration.videoStartTime||0,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{videoStartTime:parseFloat(e$4.target.value)}),className:`w-full p-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-xs`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 space-y-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-[10px] text-[var(--text-secondary)]`,children:`  ()`}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,min:`0`,step:`0.1`,value:selectedDecoration.videoEndTime||0,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{videoEndTime:parseFloat(e$4.target.value)}),className:`w-full p-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-xs`})]})]}),selectedDecoration.videoUrl&&(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-24 bg-[var(--bg-primary)] rounded border border-[var(--border-color)] overflow-hidden mx-auto relative group`,children:[(0,import_jsx_runtime.jsx)(`video`,{src:selectedDecoration.videoUrl,className:`w-full h-full object-cover`,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,onTimeUpdate:e$4=>{let vid=e$4.currentTarget,start$2=selectedDecoration.videoStartTime||0,end$1=selectedDecoration.videoEndTime||0;end$1>0&&vid.currentTime>=end$1&&(vid.currentTime=start$2)}}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-1 left-1 bg-black/50 text-white text-[10px] px-1 rounded`,children:`Preview`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold text-[var(--text-secondary)] uppercase`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[[`#a5b4fc`,`#818cf8`,`#6366f1`,`#fb7185`,`#f472b6`,`#2dd4bf`,`#34d399`,`#fbbf24`,`#f87171`,`#94a3b8`].map(c$3=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onUpdateDecoration?.(selectedDecoration.id,{color:c$3}),className:`w-6 h-6 rounded-full border border-gray-300 shadow-sm transition-transform hover:scale-110 ${selectedDecoration.color===c$3?`ring-2 ring-indigo-500 ring-offset-2`:``}`,style:{backgroundColor:c$3}},c$3)),(0,import_jsx_runtime.jsxs)(`label`,{className:`w-6 h-6 rounded-full border border-gray-300 shadow-sm transition-transform hover:scale-110 cursor-pointer flex items-center justify-center bg-white overflow-hidden relative group`,title:`  `,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-br from-red-400 via-green-400 to-blue-400 opacity-50 group-hover:opacity-80 transition-opacity`}),(0,import_jsx_runtime.jsx)(Plus,{size:14,className:`text-gray-700 z-10`}),(0,import_jsx_runtime.jsx)(`input`,{type:`color`,value:selectedDecoration.color,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{color:e$4.target.value}),className:`absolute inset-0 opacity-0 cursor-pointer w-full h-full p-0 border-0`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between text-xs text-[var(--text-secondary)]`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`font-bold uppercase`,children:``}),(0,import_jsx_runtime.jsxs)(`span`,{children:[Math.round(selectedDecoration.opacity*100),`%`]})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`0.1`,max:`1`,step:`0.1`,value:selectedDecoration.opacity,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{opacity:parseFloat(e$4.target.value)}),className:`w-full accent-indigo-500 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold text-[var(--text-secondary)] uppercase`,children:` (W)`}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,value:selectedDecoration.w,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{w:Number(e$4.target.value)}),className:`w-full p-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-sm text-[var(--text-primary)]`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold text-[var(--text-secondary)] uppercase`,children:` (H)`}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,value:selectedDecoration.h,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{h:Number(e$4.target.value)}),className:`w-full p-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-sm text-[var(--text-primary)]`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2 col-span-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between text-xs text-[var(--text-secondary)]`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`font-bold uppercase`,children:``}),(0,import_jsx_runtime.jsxs)(`span`,{children:[selectedDecoration.rotation||0,``]})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`0`,max:`360`,step:`15`,value:selectedDecoration.rotation||0,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{rotation:Number(e$4.target.value)}),className:`w-full accent-indigo-500 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold text-[var(--text-secondary)] uppercase`,children:`X  (%)`}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,value:selectedDecoration.x,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{x:Number(e$4.target.value)}),className:`w-full p-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-sm text-[var(--text-primary)]`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold text-[var(--text-secondary)] uppercase`,children:`Y  (%)`}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,value:selectedDecoration.y,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{y:Number(e$4.target.value)}),className:`w-full p-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-sm text-[var(--text-primary)]`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold text-[var(--text-secondary)] uppercase`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onUpdateDecoration?.(selectedDecoration.id,{zIndex:(selectedDecoration.zIndex||0)-1}),className:`flex-1 p-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded hover:bg-[var(--bg-card-hover)] text-xs`,children:` `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onUpdateDecoration?.(selectedDecoration.id,{zIndex:(selectedDecoration.zIndex||0)+1}),className:`flex-1 p-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded hover:bg-[var(--bg-card-hover)] text-xs`,children:` `})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold text-[var(--text-secondary)] uppercase`,children:``}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:[`none`,`spin`,`pulse`,`float`,`wiggle`,`bounce`].map(anim=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{anim===`none`?onUpdateDecoration?.(selectedDecoration.id,{animation:void 0}):onUpdateDecoration?.(selectedDecoration.id,{animation:{type:anim,duration:selectedDecoration.animation?.duration||3,delay:selectedDecoration.animation?.delay||0}})},className:`p-2 text-xs rounded border transition-all capitalized ${selectedDecoration.animation?.type===anim||!selectedDecoration.animation&&anim===`none`?`bg-indigo-600 text-white border-indigo-500`:`bg-[var(--bg-primary)] text-[var(--text-primary)] border-[var(--border-color)] hover:bg-[var(--bg-card-hover)]`}`,children:anim===`none`?``:anim},anim))}),selectedDecoration.animation&&(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mt-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-[var(--text-secondary)]`,children:` ()`}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,step:`0.1`,min:`0.1`,value:selectedDecoration.animation.duration||3,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{animation:{...selectedDecoration.animation,duration:Number(e$4.target.value)}}),className:`w-full p-1.5 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-xs`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-[var(--text-secondary)]`,children:` ()`}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,step:`0.1`,min:`0`,value:selectedDecoration.animation.delay||0,onChange:e$4=>onUpdateDecoration?.(selectedDecoration.id,{animation:{...selectedDecoration.animation,delay:Number(e$4.target.value)}}),className:`w-full p-1.5 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-xs`})]})]})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 border-t border-[var(--border-color)] bg-[var(--bg-card-secondary)]`,children:(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{confirm(`   ?`)&&(onDeleteDecoration?.(selectedDecoration.id),onClose?.())},className:`w-full flex items-center justify-center gap-2 p-2.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors text-sm font-bold`,children:[(0,import_jsx_runtime.jsx)(Trash2,{size:16}),``]})})]});if(!selectedBlock)return(0,import_jsx_runtime.jsx)(EmptyState,{});let{type,content,styles:styles$1}=selectedBlock,[bookQuery,setBookQuery]=import_react.useState(``),[bookResults,setBookResults]=import_react.useState([]),[isSearching,setIsSearching]=import_react.useState(!1),[movieQuery,setMovieQuery]=import_react.useState(``),[movieResults,setMovieResults]=import_react.useState([]),[isMovieSearching,setIsMovieSearching]=import_react.useState(!1),updateListItem=(index$2,value)=>{let newItems=[...content.items];newItems[index$2]=value,onUpdateBlock(selectedBlock.id,{content:{items:newItems}})},addListItem=()=>{onUpdateBlock(selectedBlock.id,{content:{items:[...content.items,` `]}})},removeListItem=index$2=>{let newItems=content.items.filter((_$1,i$4)=>i$4!==index$2);onUpdateBlock(selectedBlock.id,{content:{items:newItems}})},updateContent=(key$1,value)=>{onUpdateBlock(selectedBlock.id,{content:{...content,[key$1]:value}})};import_react.useEffect(()=>{setBookQuery(``),setBookResults([]),setIsSearching(!1),setMovieQuery(``),setMovieResults([])},[selectedBlock.id]);let searchBooks=async()=>{if(bookQuery.trim()){setIsSearching(!0);try{setBookResults((await(await fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(bookQuery)}&maxResults=5`)).json()).items||[])}catch(e$4){console.error(e$4),alert(`   .`)}finally{setIsSearching(!1)}}},searchMovies=async()=>{if(movieQuery.trim()){setIsMovieSearching(!0);try{let url=`https://api.themoviedb.org/3/search/movie?api_key=d7ddca14f677d7854d5e222002f435ee&query=${encodeURIComponent(movieQuery)}&language=ko-KR&include_adult=false`;setMovieResults((await(await fetch(url)).json()).results||[])}catch(e$4){console.error(e$4),alert(`   (TMDB API)`)}finally{setIsMovieSearching(!1)}}},handleSelectTMDBMovie=async movie=>{try{let director=(await(await fetch(`https://api.themoviedb.org/3/movie/${movie.id}/credits?api_key=d7ddca14f677d7854d5e222002f435ee&language=ko-KR`)).json()).crew?.find(c$3=>c$3.job===`Director`)?.name||``,posterUrl=movie.poster_path?`https://image.tmdb.org/t/p/w500${movie.poster_path}`:``,year=movie.release_date?movie.release_date.split(`-`)[0]:``;onUpdateBlock(selectedBlock.id,{content:{...content,movieData:{title:movie.title,poster:posterUrl,year,director,plot:movie.overview}}}),setMovieResults([]),setMovieQuery(``)}catch(e$4){console.error(e$4),alert(`    `)}};return(0,import_jsx_runtime.jsxs)(`aside`,{className:`w-80 bg-white/80 backdrop-blur-md border-l border-[var(--border-color)] flex flex-col text-sm h-full max-md:w-full`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 border-b border-[var(--border-color)] flex items-center justify-between`,children:[(0,import_jsx_runtime.jsxs)(`h2`,{className:`font-bold text-[var(--text-primary)] flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Settings2,{size:16}),` `,getLabelByType(type),` `]}),onClose&&(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-1 hover:bg-[var(--bg-card-secondary)] rounded md:hidden`,children:(0,import_jsx_runtime.jsx)(CircleX,{size:20,className:`text-[var(--text-secondary)]`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 overflow-y-auto p-4 space-y-6 scrollbar-thin scrollbar-thumb-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(Label,{children:`DATA & CONTENT`}),[`heading1`,`heading2`,`heading3`,`text`,`typing-text`,`quote`,`callout`,`spoiler`,`highlight`,`vertical-text`].includes(type)&&(0,import_jsx_runtime.jsx)(TextArea,{value:content.text,onChange:val=>updateContent(`text`,val),placeholder:` `}),type===`book-info`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(Label,{children:`   `}),content.bookData?(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`p-3 bg-indigo-900/20 border border-indigo-500/30 rounded flex gap-3 items-start mb-2`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-10 h-14 bg-[var(--bg-card)] rounded overflow-hidden flex-shrink-0`,children:content.bookData.thumbnail&&(0,import_jsx_runtime.jsx)(`img`,{src:content.bookData.thumbnail,alt:``,className:`w-full h-full object-cover`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`min-w-0`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs font-bold text-indigo-300 truncate`,children:content.bookData.title}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] text-[var(--text-secondary)]`,children:` .`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:` `}),(0,import_jsx_runtime.jsx)(Input,{value:content.bookData.title,onChange:val=>{onUpdateBlock(selectedBlock.id,{content:{...content,bookData:{...content.bookData,title:val}}})}})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:``}),(0,import_jsx_runtime.jsx)(Input,{value:(Array.isArray(content.bookData.authors)?content.bookData.authors:[]).join(`, `),onChange:val=>{let arr=val.split(`,`).map(s$3=>s$3.trim());onUpdateBlock(selectedBlock.id,{content:{...content,bookData:{...content.bookData,authors:arr}}})}})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:` `}),(0,import_jsx_runtime.jsx)(TextArea,{value:content.bookData.description,onChange:val=>{onUpdateBlock(selectedBlock.id,{content:{...content,bookData:{...content.bookData,description:val}}})}})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:` URL`}),(0,import_jsx_runtime.jsx)(Input,{value:content.bookData.thumbnail,onChange:val=>{onUpdateBlock(selectedBlock.id,{content:{...content,bookData:{...content.bookData,thumbnail:val}}})}})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`pt-2 border-t border-[var(--border-color)] mt-2`,children:(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{confirm(`     ?`)&&(onUpdateBlock(selectedBlock.id,{content:{...content,bookData:null}}),setBookResults([]),setBookQuery(``))},className:`w-full py-2 bg-red-900/50 hover:bg-red-900 text-red-200 border border-red-800 rounded text-xs transition-colors flex justify-center items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Trash2,{size:12}),`   ()`]})})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:`  `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:bookQuery,onChange:e$4=>setBookQuery(e$4.target.value),onKeyDown:e$4=>e$4.key===`Enter`&&searchBooks(),placeholder:`: `,className:`flex-1 bg-[var(--bg-card-secondary)] text-[var(--text-primary)] p-2 rounded border border-[var(--border-color)] outline-none text-xs placeholder:text-[var(--text-secondary)]`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:searchBooks,disabled:isSearching,className:`px-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded text-xs font-bold disabled:opacity-50`,children:isSearching?`...`:(0,import_jsx_runtime.jsx)(Search,{size:14})})]})]}),bookResults.length>0&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2 max-h-60 overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-gray-600 border-t border-[var(--border-color)] pt-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)] block mb-1`,children:`  ( )`}),bookResults.map(item=>{let info=item.volumeInfo;return(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>{let newBookData={title:info.title||` `,authors:info.authors||[` `],publisher:info.publisher||``,publishedDate:info.publishedDate||``,description:info.description||``,thumbnail:info.imageLinks?.thumbnail||``,previewLink:info.previewLink||``};onUpdateBlock(selectedBlock.id,{content:{...content,bookData:newBookData}}),setBookResults([]),setBookQuery(``)},className:`flex gap-2 p-2 rounded bg-[var(--bg-card-secondary)] hover:bg-[var(--bg-card)] cursor-pointer border border-transparent hover:border-indigo-500 transition-all`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-12 bg-[var(--bg-card)] flex-shrink-0 rounded overflow-hidden`,children:info.imageLinks?.thumbnail&&(0,import_jsx_runtime.jsx)(`img`,{src:info.imageLinks.thumbnail,alt:``,className:`w-full h-full object-cover`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs font-bold text-gray-200 truncate`,children:info.title}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] text-[var(--text-secondary)] truncate`,children:info.authors?.join(`, `)})]})]},item.id)})]})]})]}),type===`rating`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between text-xs text-[var(--text-secondary)]`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:``}),(0,import_jsx_runtime.jsxs)(`span`,{children:[content.value,` / `,content.max]})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`0`,max:content.max||5,value:content.value||0,onChange:e$4=>updateContent(`value`,Number(e$4.target.value)),className:`w-full h-2 bg-[var(--bg-card-hover)] rounded-lg appearance-none cursor-pointer accent-indigo-500`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex gap-2`,children:[5,10].map(num=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>updateContent(`max`,num),className:`flex-1 py-1 text-xs rounded border transition-colors ${content.max===num?`bg-indigo-600 text-white border-indigo-500`:`bg-[var(--bg-card-secondary)] text-[var(--text-primary)] border-[var(--border-color)] hover:bg-[var(--bg-card-hover)]`}`,children:[num,``]},num))})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-4 gap-2`,children:[{val:`star`,icon:(0,import_jsx_runtime.jsx)(Star,{size:16,fill:`currentColor`})},{val:`heart`,icon:(0,import_jsx_runtime.jsx)(Heart,{size:16,fill:`currentColor`})},{val:`zap`,icon:(0,import_jsx_runtime.jsx)(Zap,{size:16,fill:`currentColor`})},{val:`thumb`,icon:(0,import_jsx_runtime.jsx)(ThumbsUp,{size:16,fill:`currentColor`})}].map(item=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>updateContent(`icon`,item.val),className:`p-2 rounded flex justify-center items-center transition-all ${content.icon===item.val?`bg-indigo-100 text-indigo-600 ring-2 ring-indigo-500`:`bg-[var(--bg-card-secondary)] text-[var(--text-primary)] hover:bg-[var(--bg-card-hover)]`}`,title:item.val,children:item.icon},item.val))})]})]}),type===`typing-text`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(Label,{children:`  (ms)`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`30`,max:`300`,step:`10`,value:content.speed||100,onChange:e$4=>updateContent(`speed`,Number(e$4.target.value)),className:`flex-1`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)] w-8 text-right`,children:content.speed||100})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 bg-[var(--bg-card-secondary)] p-2.5 rounded border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,id:`backspace-toggle`,checked:!!content.isBackspaceMode,onChange:e$4=>updateContent(`isBackspaceMode`,e$4.target.checked),className:`w-4 h-4 rounded border-[var(--border-color)] text-indigo-600 focus:ring-indigo-500 bg-[var(--bg-card-hover)] cursor-pointer`}),(0,import_jsx_runtime.jsx)(`label`,{htmlFor:`backspace-toggle`,className:`text-xs text-[var(--text-primary)] cursor-pointer select-none flex-1`,children:`  ()`})]}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-[10px] text-[var(--text-secondary)]`,children:[`:   .`,(0,import_jsx_runtime.jsx)(`br`,{}),`:     .`]})]}),type===`scroll-text`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(Label,{children:`  ()`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`3`,max:`30`,step:`1`,value:content.speed||10,onChange:e$4=>updateContent(`speed`,Number(e$4.target.value)),className:`flex-1`}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-xs text-[var(--text-secondary)] w-8 text-right`,children:[content.speed||10,`s`]})]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[10px] text-[var(--text-secondary)]`,children:`   .`})]}),type===`math`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(Label,{children:`LaTeX  `}),(0,import_jsx_runtime.jsx)(TextArea,{value:content.text,onChange:val=>updateContent(`text`,val),placeholder:`: E = mc^2`}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-4 gap-1`,children:[{label:``,code:`\\frac{a}{b}`},{label:``,code:`\\sqrt{x}`},{label:``,code:`x^2`},{label:``,code:`\\sum`},{label:``,code:`\\alpha`},{label:``,code:`\\beta`},{label:``,code:`\\rightarrow`},{label:``,code:`\\infty`}].map(item=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>updateContent(`text`,(content.text||``)+item.code),className:`bg-[var(--bg-card-secondary)] hover:bg-[var(--btn-ghost-hover)] text-[var(--text-primary)] text-[10px] py-1 rounded border border-[var(--border-color)]`,children:item.label},item.label))}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)]/50 p-2 rounded text-[10px] text-[var(--text-secondary)]`,children:[` LaTeX  .`,(0,import_jsx_runtime.jsx)(`br`,{}),`: \\frac{a}{b}`]})]}),type===`callout`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3 mb-4 p-3 bg-[var(--bg-card)] rounded-lg border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-4 gap-2`,children:[{value:`info`,icon:(0,import_jsx_runtime.jsx)(Info,{size:16}),color:`text-blue-400`,bg:`bg-blue-900/30`},{value:`success`,icon:(0,import_jsx_runtime.jsx)(CircleCheckBig,{size:16}),color:`text-green-400`,bg:`bg-green-900/30`},{value:`warning`,icon:(0,import_jsx_runtime.jsx)(TriangleAlert,{size:16}),color:`text-orange-400`,bg:`bg-orange-900/30`},{value:`error`,icon:(0,import_jsx_runtime.jsx)(CircleX,{size:16}),color:`text-red-400`,bg:`bg-red-900/30`}].map(opt=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>updateContent(`type`,opt.value),className:`flex flex-col items-center justify-center p-2 rounded transition-all ${content.type===opt.value?`${opt.bg} border border-${opt.color.split(`-`)[1]}-500/50 ring-1 ring-${opt.color.split(`-`)[1]}-500`:`hover:bg-[var(--bg-card-hover)] border border-transparent`}`,title:opt.value,children:(0,import_jsx_runtime.jsx)(`div`,{className:opt.color,children:opt.icon})},opt.value))}),(0,import_jsx_runtime.jsxs)(`div`,{className:`pt-2 border-t border-[var(--border-color)] mt-2`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` ()`}),(0,import_jsx_runtime.jsx)(Input,{value:content.title,onChange:val=>updateContent(`title`,val),placeholder:` `})]})]}),type===`toggle-list`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` `}),(0,import_jsx_runtime.jsx)(Input,{value:content.title,onChange:val=>updateContent(`title`,val),placeholder:` `}),(0,import_jsx_runtime.jsx)(Label,{children:`  `}),content.items.map((item,idx)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsx)(Input,{value:item,onChange:val=>{let newItems=[...content.items];newItems[idx]=val,updateContent(`items`,newItems)}}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{updateContent(`items`,content.items.filter((_$1,i$4)=>i$4!==idx))},className:`text-[var(--text-secondary)] hover:text-red-400`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:14})})]},idx)),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>updateContent(`items`,[...content.items,` `]),className:`w-full py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded text-xs`,children:`+  `})]}),selectedBlock?.type===`mindmap`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs font-bold text-[var(--text-primary)]`,children:`Mind Map`}),(()=>{let nodes=selectedBlock.content.nodes||[],edges=selectedBlock.content.edges||[],selectedNodeId=selectedBlock.content.selectedNodeId||null,selectedNode=nodes.find(n$4=>n$4.id===selectedNodeId),addNode=()=>{let newId$1=`mm-n-${Date.now()}-${Math.random().toString(36).slice(2,6)}`;onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,nodes:[...nodes,{id:newId$1,type:`mindmap`,position:{x:20*nodes.length,y:20*nodes.length},data:{label:`New Node`}}],selectedNodeId:newId$1}})},deleteNode=()=>{selectedNodeId&&onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,nodes:nodes.filter(n$4=>n$4.id!==selectedNodeId),edges:edges.filter(e$4=>e$4.source!==selectedNodeId&&e$4.target!==selectedNodeId),selectedNodeId:null}})},updateLabel=label=>{selectedNodeId&&onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,nodes:nodes.map(n$4=>n$4.id===selectedNodeId?{...n$4,data:{...n$4.data||{},label}}:n$4)}})};return(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`button`,{className:`w-full bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold py-2 rounded`,onClick:addNode,children:` `}),(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs text-[var(--text-secondary)]`,children:`  `}),(0,import_jsx_runtime.jsx)(`input`,{className:`w-full bg-[var(--bg-card-secondary)] border border-[var(--border-color)] rounded px-2 py-1 text-xs text-[var(--text-primary)]`,value:selectedNode?.data?.label||``,disabled:!selectedNodeId,onChange:e$4=>updateLabel(e$4.target.value)}),(0,import_jsx_runtime.jsx)(`button`,{className:`w-full bg-red-600 hover:bg-red-700 text-white text-xs font-bold py-2 rounded disabled:opacity-40`,disabled:!selectedNodeId,onClick:deleteNode,children:`  `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-[11px] text-[var(--text-secondary)]`,children:[`Nodes: `,nodes.length,` / Edges: `,edges.length]})]})})()]}),selectedBlock?.type===`flashcards`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs font-bold text-[var(--text-primary)]`,children:`Flashcards`}),(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs text-[var(--text-secondary)]`,children:`Title`}),(0,import_jsx_runtime.jsx)(`input`,{className:`w-full bg-[var(--bg-card-secondary)] border border-[var(--border-color)] rounded px-2 py-1 text-xs text-[var(--text-primary)]`,value:selectedBlock.content.title||``,onChange:e$4=>onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,title:e$4.target.value}})}),(0,import_jsx_runtime.jsx)(`button`,{className:`w-full bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold py-2 rounded`,onClick:()=>{let prevCards=selectedBlock.content.cards||[],newCard={id:`fc-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,front:``,back:``};onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,cards:[newCard,...prevCards],currentIndex:0,showBack:!1}})},children:` `}),(()=>{let cards=selectedBlock.content.cards||[],idx=Math.min(selectedBlock.content.currentIndex??0,Math.max(cards.length-1,0)),cur=cards[idx];if(!cur)return(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs text-[var(--text-secondary)]`,children:` .`});let updateCard=patch$1=>{let next=cards.map((c$3,i$4)=>i$4===idx?{...c$3,...patch$1}:c$3);onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,cards:next}})};return(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2 border border-gray-800 rounded p-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`text-xs text-[var(--text-secondary)]`,children:[`Editing: `,idx+1,`/`,cards.length]}),(0,import_jsx_runtime.jsx)(`button`,{className:`text-xs font-bold text-red-400 hover:text-red-300`,onClick:()=>{let nextCards=cards.filter((_$1,i$4)=>i$4!==idx),nextIndex=Math.max(0,Math.min(idx,nextCards.length-1));onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,cards:nextCards,currentIndex:nextIndex,showBack:!1}})},children:``})]}),(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs text-[var(--text-secondary)]`,children:`Front`}),(0,import_jsx_runtime.jsx)(`textarea`,{className:`w-full bg-[var(--bg-card-secondary)] border border-[var(--border-color)] rounded px-2 py-1 text-xs text-[var(--text-primary)] min-h-[70px]`,value:cur.front||``,onChange:e$4=>updateCard({front:e$4.target.value})}),(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs text-[var(--text-secondary)]`,children:`Back`}),(0,import_jsx_runtime.jsx)(`textarea`,{className:`w-full bg-[var(--bg-card-secondary)] border border-[var(--border-color)] rounded px-2 py-1 text-xs text-[var(--text-primary)] min-h-[70px]`,value:cur.back||``,onChange:e$4=>updateCard({back:e$4.target.value})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{className:`flex-1 bg-[var(--bg-card)] hover:bg-[var(--bg-card-hover)] text-gray-200 text-xs font-bold py-2 rounded disabled:opacity-40`,disabled:idx===0,onClick:()=>onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,currentIndex:idx-1,showBack:!1}}),children:` `}),(0,import_jsx_runtime.jsx)(`button`,{className:`flex-1 bg-[var(--bg-card)] hover:bg-[var(--bg-card-hover)] text-gray-200 text-xs font-bold py-2 rounded disabled:opacity-40`,disabled:idx>=cards.length-1,onClick:()=>onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,currentIndex:idx+1,showBack:!1}}),children:` `})]})]})})()]}),type===`progress-bar`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:` ()`}),(0,import_jsx_runtime.jsx)(Input,{value:content.label,onChange:val=>updateContent(`label`,val),placeholder:`: `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:` `}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,value:content.value||0,onChange:e$4=>updateContent(`value`,Number(e$4.target.value)),className:`w-full bg-[var(--bg-card-secondary)] text-[var(--text-primary)] p-2 rounded border border-[var(--border-color)] outline-none text-xs`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:` `}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,value:content.max||100,onChange:e$4=>updateContent(`max`,Number(e$4.target.value)),className:`w-full bg-[var(--bg-card-secondary)] text-[var(--text-primary)] p-2 rounded border border-[var(--border-color)] outline-none text-xs`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:``}),(0,import_jsx_runtime.jsxs)(`select`,{value:content.style||`bar`,onChange:e$4=>updateContent(`style`,e$4.target.value),className:`w-full bg-[var(--bg-card-secondary)] text-[var(--text-primary)] p-2 rounded border border-[var(--border-color)] outline-none text-xs cursor-pointer`,children:[(0,import_jsx_runtime.jsx)(`option`,{value:`bar`,children:` (Bar)`}),(0,import_jsx_runtime.jsx)(`option`,{value:`circle`,children:` (Circle)`})]})]})]}),selectedBlock?.type===`pdf-viewer`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs font-bold text-[var(--text-primary)]`,children:`PDF Viewer`}),(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs text-[var(--text-secondary)]`,children:`PDF `}),(0,import_jsx_runtime.jsx)(`input`,{type:`file`,accept:`application/pdf`,className:`block w-full text-xs text-[var(--text-primary)]`,onChange:e$4=>{let file=e$4.target.files?.[0];if(!file)return;let url=URL.createObjectURL(file);onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,fileUrl:url,fileName:file.name}})}}),(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs text-[var(--text-secondary)]`,children:`PDF URL`}),(0,import_jsx_runtime.jsx)(`input`,{className:`w-full bg-[var(--bg-card-secondary)] border border-[var(--border-color)] rounded px-2 py-1 text-xs text-[var(--text-primary)]`,value:selectedBlock.content.fileUrl||``,placeholder:`https://...pdf`,onChange:e$4=>{onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,fileUrl:e$4.target.value}})}}),(0,import_jsx_runtime.jsx)(`button`,{className:`w-full bg-red-600 hover:bg-red-700 text-white text-xs font-bold py-2 rounded`,onClick:()=>{let url=selectedBlock.content.fileUrl||``;url.startsWith(`blob:`)&&URL.revokeObjectURL(url),onUpdateBlock(selectedBlock.id,{content:{...selectedBlock.content,fileUrl:``,fileName:``}})},children:`PDF `})]}),type===`unit-converter`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:``}),(0,import_jsx_runtime.jsx)(Input,{value:content.title,onChange:val=>updateContent(`title`,val),placeholder:` `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 gap-2`,children:[{val:`length`,label:` (m)`},{val:`weight`,label:` (kg)`},{val:`temperature`,label:` (C)`},{val:`area`,label:` ()`}].map(opt=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{onUpdateBlock(selectedBlock.id,{content:{...content,category:opt.val,fromUnitIdx:0,toUnitIdx:1,value:1}})},className:`p-2 rounded text-xs border transition-all ${(content.category||`length`)===opt.val?`bg-indigo-600 text-white border-indigo-500 font-bold`:`bg-[var(--bg-card-secondary)] text-[var(--text-primary)] border-[var(--border-color)] hover:bg-[var(--bg-card-hover)]`}`,children:opt.label},opt.val))})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`bg-[var(--bg-card)]/50 p-2 rounded text-[10px] text-[var(--text-secondary)]`,children:`    .`})]}),type===`database`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)] font-bold`,children:` ()`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-1 flex-wrap`,children:[(content.headers||[]).map((header,idx)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center bg-indigo-900/50 text-indigo-200 px-2 py-1 rounded text-xs border border-indigo-500/30`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:header}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{updateContent(`headers`,content.headers.filter((_$1,i$4)=>i$4!==idx))},className:`ml-1 hover:text-red-400`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:10})})]},idx)),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{let name=prompt(`   :`);name&&updateContent(`headers`,[...content.headers||[],name])},className:`px-2 py-1 rounded text-xs bg-[var(--bg-card-hover)] hover:bg-gray-600 text-[var(--text-primary)] flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Plus,{size:10}),`  `]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2 pt-2 border-t border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)] font-bold`,children:` `}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{let emptyRow=Array((content.headers||[]).length).fill(``);updateContent(`rows`,[...content.rows||[],emptyRow])},className:`text-xs text-indigo-400 hover:text-indigo-300 flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Plus,{size:12}),`  `]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`max-h-48 overflow-y-auto space-y-2 pr-1`,children:(content.rows||[]).map((row,rowIdx)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] p-2 rounded border border-[var(--border-color)] relative group`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{updateContent(`rows`,content.rows.filter((_$1,i$4)=>i$4!==rowIdx))},className:`absolute right-1 top-1 text-[var(--text-secondary)] hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:12})}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid gap-1`,style:{gridTemplateColumns:`repeat(${row.length}, 1fr)`},children:row.map((cell,cellIdx)=>(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:cell,onChange:e$4=>{let newRows=[...content.rows];newRows[rowIdx][cellIdx]=e$4.target.value,updateContent(`rows`,newRows)},className:`w-full bg-[var(--bg-card)] border border-[var(--border-color)] rounded px-1 py-0.5 text-[10px] text-[var(--text-primary)] focus:border-indigo-500 outline-none`,placeholder:content.headers?.[cellIdx]||``},cellIdx))})]},rowIdx))})]})]}),type===`travel-plan`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(Label,{children:`  `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)] font-bold`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-[var(--text-secondary)]`,children:` / `}),(0,import_jsx_runtime.jsx)(Input,{value:content.travelData?.title,onChange:val=>{let newData={...content.travelData||{},title:val};onUpdateBlock(selectedBlock.id,{content:{...content,travelData:newData}})},placeholder:` `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-[var(--text-secondary)]`,children:``}),(0,import_jsx_runtime.jsx)(`input`,{type:`date`,value:content.travelData?.startDate||``,onChange:e$4=>{let newData={...content.travelData||{},startDate:e$4.target.value};onUpdateBlock(selectedBlock.id,{content:{...content,travelData:newData}})},className:`w-full bg-[var(--bg-card-secondary)] text-[var(--text-primary)] p-1.5 rounded border border-[var(--border-color)] outline-none text-xs`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-[var(--text-secondary)]`,children:``}),(0,import_jsx_runtime.jsx)(`input`,{type:`date`,value:content.travelData?.endDate||``,onChange:e$4=>{let newData={...content.travelData||{},endDate:e$4.target.value};onUpdateBlock(selectedBlock.id,{content:{...content,travelData:newData}})},className:`w-full bg-[var(--bg-card-secondary)] text-[var(--text-primary)] p-1.5 rounded border border-[var(--border-color)] outline-none text-xs`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-[var(--text-secondary)]`,children:` (Currency)`}),(0,import_jsx_runtime.jsx)(Input,{value:content.travelData?.currency,onChange:val=>{let newData={...content.travelData||{},currency:val};onUpdateBlock(selectedBlock.id,{content:{...content,travelData:newData}})},placeholder:`KRW, USD, etc.`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2 pt-2 border-t border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)] font-bold`,children:`  ()`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(content.travelData?.columns||[]).map((col,idx)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 bg-[var(--bg-card-secondary)] p-2 rounded text-xs border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`relative group/type`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`w-5 h-5 flex items-center justify-center bg-gray-200 rounded text-gray-600 cursor-pointer hover:bg-indigo-100`,children:[col.type===`text`&&`T`,col.type===`number`&&`#`,col.type===`date`&&``,col.type===`select`&&``,col.type===`checkbox`&&``]}),(0,import_jsx_runtime.jsxs)(`select`,{value:col.type,onChange:e$4=>{let newCols=[...content.travelData?.columns||[]];newCols[idx]={...newCols[idx],type:e$4.target.value};let newData={...content.travelData||{},columns:newCols};onUpdateBlock(selectedBlock.id,{content:{...content,travelData:newData}})},className:`absolute inset-0 opacity-0 cursor-pointer`,children:[(0,import_jsx_runtime.jsx)(`option`,{value:`text`,children:``}),(0,import_jsx_runtime.jsx)(`option`,{value:`number`,children:` ()`}),(0,import_jsx_runtime.jsx)(`option`,{value:`date`,children:``}),(0,import_jsx_runtime.jsx)(`option`,{value:`select`,children:` ()`}),(0,import_jsx_runtime.jsx)(`option`,{value:`checkbox`,children:``})]})]}),(0,import_jsx_runtime.jsx)(`input`,{value:col.name,onChange:e$4=>{let newCols=[...content.travelData?.columns||[]];newCols[idx]={...newCols[idx],name:e$4.target.value};let newData={...content.travelData||{},columns:newCols};onUpdateBlock(selectedBlock.id,{content:{...content,travelData:newData}})},className:`bg-transparent border-b border-gray-300 w-full outline-none focus:border-indigo-500`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{let newCols=(content.travelData?.columns||[]).filter((_$1,i$4)=>i$4!==idx),newData={...content.travelData||{},columns:newCols};onUpdateBlock(selectedBlock.id,{content:{...content,travelData:newData}})},className:`text-gray-400 hover:text-red-400`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:12})})]},idx)),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{let curCols=content.travelData?.columns||[],newCol={id:`c-${Date.now()}`,name:` `,type:`text`,width:100},newCols=[...curCols,newCol],newData={...content.travelData||{},columns:newCols};onUpdateBlock(selectedBlock.id,{content:{...content,travelData:newData}})},className:`w-full py-1.5 rounded text-xs border border-dashed border-gray-300 hover:border-indigo-400 hover:text-indigo-500 text-gray-400 flex items-center justify-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Plus,{size:12}),`  `]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-[10px] text-[var(--text-secondary)] mt-2 bg-[var(--bg-card-secondary)] p-2 rounded`,children:[(0,import_jsx_runtime.jsx)(`p`,{children:` Tip:`}),(0,import_jsx_runtime.jsxs)(`ul`,{className:`list-disc pl-3 space-y-0.5`,children:[(0,import_jsx_runtime.jsx)(`li`,{children:`''   '', 'Cost', 'Price'    .`}),(0,import_jsx_runtime.jsx)(`li`,{children:`''   .`})]})]})]})]}),type===`columns`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` (  )`}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex gap-2`,children:[2,3,4].map(num=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{let newLayout=[...content.layout||[[],[]]];if(num>newLayout.length)for(let i$4=newLayout.length;i$4<num;i$4++)newLayout.push([]);else if(num<newLayout.length)if(confirm(`   . ?`))newLayout=newLayout.slice(0,num);else return;updateContent(`layout`,newLayout)},className:`flex-1 py-2 rounded text-xs font-bold transition-colors ${content.layout?.length===num?`bg-indigo-600 text-white`:`bg-[var(--bg-card-hover)] text-[var(--text-secondary)] hover:bg-gray-600`}`,children:[num,``]},num))}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)]/50 p-3 rounded text-[var(--text-secondary)] text-xs leading-relaxed border border-[var(--border-color)]/50`,children:[` `,(0,import_jsx_runtime.jsx)(`b`,{children:`:`}),(0,import_jsx_runtime.jsx)(`br`,{}),`1.  `,(0,import_jsx_runtime.jsx)(`b`,{children:`  `}),` .`,(0,import_jsx_runtime.jsx)(`br`,{}),`2.    `,(0,import_jsx_runtime.jsx)(`b`,{children:` `}),`   .`]})]}),type===`accordion`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` ()`}),(0,import_jsx_runtime.jsx)(Input,{value:content.title,onChange:val=>updateContent(`title`,val),placeholder:` `}),(0,import_jsx_runtime.jsx)(Label,{children:` ()`}),(0,import_jsx_runtime.jsx)(TextArea,{value:content.body,onChange:val=>updateContent(`body`,val),placeholder:`   `})]}),type===`divider`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(Label,{children:``}),(0,import_jsx_runtime.jsx)(ColorPicker,{label:` `,value:styles$1.color,onChange:val=>onUpdateBlock(selectedBlock.id,{color:val})})]}),(type===`bullet-list`||type===`number-list`)&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` `}),content.items.map((item,idx)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 items-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-6 text-center text-[var(--text-secondary)] text-xs font-bold`,children:type===`number-list`?`${idx+1}.`:``}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:item,onChange:e$4=>updateListItem(idx,e$4.target.value),className:`flex-1 bg-[var(--bg-card)] text-white p-2 rounded border border-[var(--border-color)] outline-none text-xs focus:border-indigo-500`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>removeListItem(idx),className:`text-[var(--text-secondary)] hover:text-red-400`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:14})})]},idx)),(0,import_jsx_runtime.jsxs)(`button`,{onClick:addListItem,className:`w-full py-2 flex items-center justify-center gap-2 text-xs bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors`,children:[(0,import_jsx_runtime.jsx)(Plus,{size:14}),`  `]})]}),type===`todo-list`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[content.items.map((item,idx)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 items-center bg-[var(--bg-card)] p-2 rounded`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,checked:item.done,onChange:e$4=>{let newItems=[...content.items];newItems[idx].done=e$4.target.checked,updateContent(`items`,newItems)},className:`cursor-pointer`}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:item.text,onChange:e$4=>{let newItems=[...content.items];newItems[idx].text=e$4.target.value,updateContent(`items`,newItems)},className:`flex-1 bg-transparent text-white outline-none text-xs`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{updateContent(`items`,content.items.filter((_$1,i$4)=>i$4!==idx))},className:`text-[var(--text-secondary)] hover:text-red-400`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:14})})]},idx)),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>updateContent(`items`,[...content.items,{text:`  `,done:!1}]),className:`w-full py-2 flex items-center justify-center gap-2 text-xs bg-[var(--bg-card)] hover:bg-[var(--bg-card-hover)] text-indigo-400 rounded dashed border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(Plus,{size:14}),`  `]})]}),(type===`chart-pie`||type===`chart-bar`||type===`chart-radar`)&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(Label,{children:`  (0 ~ 100)`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex text-xs text-[var(--text-secondary)] px-1 gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`flex-1`,children:``}),(0,import_jsx_runtime.jsx)(`span`,{className:`w-12 text-center`,children:``}),(0,import_jsx_runtime.jsx)(`span`,{className:`w-5`})]}),(content.data||[]).map((item,idx)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 items-center`,children:[(0,import_jsx_runtime.jsx)(Input,{value:item.label,onChange:val=>{let newData=[...content.data];newData[idx].label=val,updateContent(`data`,newData)},placeholder:``}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,min:`0`,max:`100`,value:item.value,onChange:e$4=>{let newData=[...content.data];newData[idx].value=Number(e$4.target.value),updateContent(`data`,newData)},className:`w-12 bg-[var(--bg-card)] text-white p-2 rounded border border-[var(--border-color)] outline-none text-xs text-center`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{updateContent(`data`,content.data.filter((_$1,i$4)=>i$4!==idx))},className:`text-[var(--text-secondary)] hover:text-red-400`,title:``,children:(0,import_jsx_runtime.jsx)(Trash2,{size:14})})]},idx)),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>updateContent(`data`,[...content.data||[],{label:` `,value:50}]),className:`w-full py-2 text-xs bg-indigo-900/50 text-indigo-400 rounded hover:bg-indigo-900 border border-indigo-500/30 transition-colors`,children:`+  `}),type===`chart-radar`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`pt-2 mt-2 border-t border-[var(--border-color)] flex items-center justify-between`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[var(--text-secondary)] text-xs`,children:` `}),(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,checked:content.showLabels!==!1,onChange:e$4=>updateContent(`showLabels`,e$4.target.checked),className:`cursor-pointer`})]})]}),type===`heatmap`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(Label,{children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-3 gap-1 bg-[var(--bg-card)] p-1 rounded`,children:[{label:`1`,value:`year`},{label:` `,value:`month`},{label:``,value:`week`}].map(opt=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>updateContent(`viewMode`,opt.value),className:`text-xs py-1.5 rounded transition-colors ${content.viewMode===opt.value?`bg-indigo-600 text-white font-bold`:`text-[var(--text-secondary)] hover:text-gray-200`}`,children:opt.label},opt.value))}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-[10px] text-[var(--text-secondary)] pt-1`,children:[content.viewMode===`year`&&` 365  .`,content.viewMode===`month`&&` 30  .`,content.viewMode===`week`&&` 7  .`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(Label,{children:``}),(0,import_jsx_runtime.jsx)(Input,{value:content.title,onChange:val=>updateContent(`title`,val),placeholder:`:   `})]})]}),type===`movie-ticket`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(Label,{children:`  `}),content.movieData?(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3 bg-[var(--bg-card)] p-2 rounded border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:content.movieData.poster,className:`w-10 h-14 object-cover rounded bg-black`,alt:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`min-w-0 flex-1 py-1`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs font-bold text-indigo-300 truncate`,children:content.movieData.title}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{confirm(` ? (  )`)&&onUpdateBlock(selectedBlock.id,{content:{...content,movieData:null}})},className:`text-[10px] text-red-400 hover:underline mt-1 flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Trash2,{size:10}),`   `]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:`  (Watched Date)`}),(0,import_jsx_runtime.jsx)(`input`,{type:`date`,value:content.watchedDate,onChange:e$4=>updateContent(`watchedDate`,e$4.target.value),className:`w-full bg-[var(--bg-card-secondary)] text-[var(--text-primary)] p-2 rounded border border-[var(--border-color)] outline-none text-xs`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:`  (Review)`}),(0,import_jsx_runtime.jsx)(TextArea,{value:content.review,onChange:val=>updateContent(`review`,val),placeholder:` ?  .`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1 pt-2 border-t border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:`  URL ()`}),(0,import_jsx_runtime.jsx)(Input,{value:content.movieData.poster,onChange:val=>{onUpdateBlock(selectedBlock.id,{content:{...content,movieData:{...content.movieData,poster:val}}})},placeholder:`https://...`})]})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] p-3 rounded text-center`,children:[(0,import_jsx_runtime.jsx)(Film,{className:`mx-auto text-[var(--text-secondary)] mb-1`,size:20}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-xs text-[var(--text-secondary)]`,children:[`  `,(0,import_jsx_runtime.jsx)(`br`,{}),`.`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:movieQuery,onChange:e$4=>setMovieQuery(e$4.target.value),onKeyDown:e$4=>e$4.key===`Enter`&&searchMovies(),placeholder:`  (: )`,className:`flex-1 bg-[var(--bg-card-secondary)] text-[var(--text-primary)] p-2 rounded border border-[var(--border-color)] outline-none text-xs placeholder:text-[var(--text-secondary)]`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:searchMovies,disabled:isMovieSearching,className:`px-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded text-xs font-bold disabled:opacity-50`,children:``})]}),movieResults.length>0&&(0,import_jsx_runtime.jsx)(`div`,{className:`space-y-2 max-h-60 overflow-y-auto pr-1 scrollbar-thin border-t border-[var(--border-color)] pt-2`,children:movieResults.map(m$3=>{let year=m$3.release_date?m$3.release_date.substring(0,4):``,posterUrl=m$3.poster_path?`https://image.tmdb.org/t/p/w200${m$3.poster_path}`:``;return(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>handleSelectTMDBMovie(m$3),className:`flex gap-2 p-2 rounded bg-[var(--bg-card)] hover:bg-[var(--bg-card-hover)] cursor-pointer transition-colors border border-transparent hover:border-indigo-500`,children:[posterUrl?(0,import_jsx_runtime.jsx)(`img`,{src:posterUrl,className:`w-8 h-12 object-cover rounded bg-black`,alt:``}):(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-12 bg-gray-800 rounded flex items-center justify-center text-gray-500`,children:(0,import_jsx_runtime.jsx)(Film,{size:16})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 min-w-0 flex flex-col justify-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs font-bold text-gray-200 truncate`,children:m$3.title}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] text-[var(--text-secondary)]`,children:year})]})]},m$3.id)})})]})]}),type===`counter`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(Input,{value:content.title,onChange:val=>updateContent(`title`,val),placeholder:` (: )`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:` `}),(0,import_jsx_runtime.jsx)(`input`,{type:`date`,value:content.date||``,onChange:e$4=>updateContent(`date`,e$4.target.value),className:`w-full bg-[var(--bg-card-secondary)] text-[var(--text-primary)] p-2 rounded border border-[var(--border-color)] outline-none`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4 pt-4 border-t border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(Label,{children:`STYLE & APPEARANCE`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-2`,children:[(0,import_jsx_runtime.jsx)(ColorPicker,{label:``,value:styles$1.color,onChange:val=>onUpdateBlock(selectedBlock.id,{color:val})}),(0,import_jsx_runtime.jsx)(ColorPicker,{label:``,value:styles$1.bgColor,onChange:val=>onUpdateBlock(selectedBlock.id,{bgColor:val})})]}),(0,import_jsx_runtime.jsx)(Label,{children:`TEXT STYLE`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap gap-2 mt-2 bg-[var(--bg-card)] p-2 rounded border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onUpdateBlock(selectedBlock.id,{bold:!styles$1.bold}),className:`p-2 rounded transition-colors ${styles$1.bold?`bg-indigo-600 text-white`:`text-[var(--text-secondary)] hover:bg-[var(--bg-card-hover)]`}`,title:`Bold`,children:(0,import_jsx_runtime.jsx)(Bold,{size:16})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onUpdateBlock(selectedBlock.id,{italic:!styles$1.italic}),className:`p-2 rounded transition-colors ${styles$1.italic?`bg-indigo-600 text-white`:`text-[var(--text-secondary)] hover:bg-[var(--bg-card-hover)]`}`,title:`Italic`,children:(0,import_jsx_runtime.jsx)(Italic,{size:16})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onUpdateBlock(selectedBlock.id,{underline:!styles$1.underline}),className:`p-2 rounded transition-colors ${styles$1.underline?`bg-indigo-600 text-white`:`text-[var(--text-secondary)] hover:bg-[var(--bg-card-hover)]`}`,title:`Underline`,children:(0,import_jsx_runtime.jsx)(Underline,{size:16})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onUpdateBlock(selectedBlock.id,{strikethrough:!styles$1.strikethrough}),className:`p-2 rounded transition-colors ${styles$1.strikethrough?`bg-indigo-600 text-white`:`text-[var(--text-secondary)] hover:bg-[var(--bg-card-hover)]`}`,title:`Strikethrough`,children:(0,import_jsx_runtime.jsx)(Strikethrough,{size:16})}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-px h-6 bg-[var(--border-color)] mx-1 self-center`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex bg-[var(--bg-card-secondary)] rounded overflow-hidden border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onUpdateBlock(selectedBlock.id,{align:`left`}),className:`p-2 ${styles$1.align===`left`||!styles$1.align?`bg-indigo-600 text-white`:`text-[var(--text-secondary)] hover:bg-[var(--bg-card-hover)]`}`,title:`Align Left`,children:(0,import_jsx_runtime.jsx)(TextAlignStart,{size:16})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onUpdateBlock(selectedBlock.id,{align:`center`}),className:`p-2 ${styles$1.align===`center`?`bg-indigo-600 text-white`:`text-[var(--text-secondary)] hover:bg-[var(--bg-card-hover)]`}`,title:`Align Center`,children:(0,import_jsx_runtime.jsx)(TextAlignCenter,{size:16})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onUpdateBlock(selectedBlock.id,{align:`right`}),className:`p-2 ${styles$1.align===`right`?`bg-indigo-600 text-white`:`text-[var(--text-secondary)] hover:bg-[var(--bg-card-hover)]`}`,title:`Align Right`,children:(0,import_jsx_runtime.jsx)(TextAlignEnd,{size:16})})]})]})]})]})]})},EmptyState=()=>(0,import_jsx_runtime.jsx)(`aside`,{className:`w-80 h-full bg-white/80 backdrop-blur-md border-l border-[var(--border-color)] flex flex-col items-center justify-center text-[var(--text-secondary)] space-y-2`,children:(0,import_jsx_runtime.jsx)(`p`,{className:`text-center text-sm`,children:`  `})}),Label=({children:children$1})=>(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] font-bold text-[var(--text-secondary)] uppercase tracking-wider`,children:children$1}),Input=({value,onChange,placeholder})=>(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:value||``,onChange:e$4=>onChange(e$4.target.value),placeholder,className:`w-full bg-[var(--bg-card-secondary)] text-[var(--text-primary)] p-2 rounded border border-[var(--border-color)] outline-none focus:border-indigo-500 text-xs placeholder:text-[var(--text-secondary)]`}),TextArea=({value,onChange,placeholder})=>(0,import_jsx_runtime.jsx)(`textarea`,{value:value||``,onChange:e$4=>onChange(e$4.target.value),placeholder,className:`w-full h-20 bg-[var(--bg-card-secondary)] text-[var(--text-primary)] p-2 rounded border border-[var(--border-color)] outline-none resize-none focus:border-indigo-500 text-xs placeholder:text-[var(--text-secondary)]`}),ColorPicker=({label,value,onChange})=>(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card-secondary)] p-2 rounded flex items-center justify-between`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[var(--text-secondary)] text-xs`,children:label}),(0,import_jsx_runtime.jsx)(`div`,{className:`relative w-6 h-6 rounded-full overflow-hidden border border-[var(--border-color)]`,children:(0,import_jsx_runtime.jsx)(`input`,{type:`color`,value:value||`#000000`,onChange:e$4=>onChange(e$4.target.value),className:`absolute -top-2 -left-2 w-10 h-10 cursor-pointer`})})]}),RightSidebar_default=RightSidebar,snapCenterToCursor=_ref=>{let{activatorEvent,draggingNodeRect,transform:transform$1}=_ref;if(draggingNodeRect&&activatorEvent){let activatorCoordinates=getEventCoordinates(activatorEvent);if(!activatorCoordinates)return transform$1;let offsetX=activatorCoordinates.x-draggingNodeRect.left,offsetY=activatorCoordinates.y-draggingNodeRect.top;return{...transform$1,x:transform$1.x+offsetX-draggingNodeRect.width/2,y:transform$1.y+offsetY-draggingNodeRect.height/2}}return transform$1},__assign$1=function(){return __assign$1=Object.assign||function(t$4){for(var s$3,i$4=1,n$4=arguments.length;i$4<n$4;i$4++)for(var p$3 in s$3=arguments[i$4],s$3)Object.prototype.hasOwnProperty.call(s$3,p$3)&&(t$4[p$3]=s$3[p$3]);return t$4},__assign$1.apply(this,arguments)},rowSizeBase={width:`100%`,height:`10px`,top:`0px`,left:`0px`,cursor:`row-resize`},colSizeBase={width:`10px`,height:`100%`,top:`0px`,left:`0px`,cursor:`col-resize`},edgeBase={width:`20px`,height:`20px`,position:`absolute`,zIndex:1},styles={top:__assign$1(__assign$1({},rowSizeBase),{top:`-5px`}),right:__assign$1(__assign$1({},colSizeBase),{left:void 0,right:`-5px`}),bottom:__assign$1(__assign$1({},rowSizeBase),{top:void 0,bottom:`-5px`}),left:__assign$1(__assign$1({},colSizeBase),{left:`-5px`}),topRight:__assign$1(__assign$1({},edgeBase),{right:`-10px`,top:`-10px`,cursor:`ne-resize`}),bottomRight:__assign$1(__assign$1({},edgeBase),{right:`-10px`,bottom:`-10px`,cursor:`se-resize`}),bottomLeft:__assign$1(__assign$1({},edgeBase),{left:`-10px`,bottom:`-10px`,cursor:`sw-resize`}),topLeft:__assign$1(__assign$1({},edgeBase),{left:`-10px`,top:`-10px`,cursor:`nw-resize`})},Resizer=(0,import_react.memo)(function(props){var onResizeStart=props.onResizeStart,direction=props.direction,children$1=props.children,replaceStyles=props.replaceStyles,className=props.className,onMouseDown=(0,import_react.useCallback)(function(e$4){onResizeStart(e$4,direction)},[onResizeStart,direction]),onTouchStart=(0,import_react.useCallback)(function(e$4){onResizeStart(e$4,direction)},[onResizeStart,direction]),style$3=(0,import_react.useMemo)(function(){return __assign$1(__assign$1({position:`absolute`,userSelect:`none`},styles[direction]),replaceStyles??{})},[replaceStyles,direction]);return(0,import_jsx_runtime.jsx)(`div`,{className:className||void 0,style:style$3,onMouseDown,onTouchStart,children:children$1})}),import_react_dom$2=require_react_dom(),__extends=(function(){var extendStatics=function(d$3,b$3){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d$4,b$4){d$4.__proto__=b$4}||function(d$4,b$4){for(var p$3 in b$4)Object.prototype.hasOwnProperty.call(b$4,p$3)&&(d$4[p$3]=b$4[p$3])},extendStatics(d$3,b$3)};return function(d$3,b$3){if(typeof b$3!=`function`&&b$3!==null)throw TypeError(`Class extends value `+String(b$3)+` is not a constructor or null`);extendStatics(d$3,b$3);function __(){this.constructor=d$3}d$3.prototype=b$3===null?Object.create(b$3):(__.prototype=b$3.prototype,new __)}})(),__assign=function(){return __assign=Object.assign||function(t$4){for(var s$3,i$4=1,n$4=arguments.length;i$4<n$4;i$4++)for(var p$3 in s$3=arguments[i$4],s$3)Object.prototype.hasOwnProperty.call(s$3,p$3)&&(t$4[p$3]=s$3[p$3]);return t$4},__assign.apply(this,arguments)},DEFAULT_SIZE={width:`auto`,height:`auto`},clamp=function(n$4,min,max){return Math.max(Math.min(n$4,max),min)},snap=function(n$4,size,gridGap){var v$3=Math.round(n$4/size);return v$3*size+gridGap*(v$3-1)},hasDirection=function(dir,target){return new RegExp(dir,`i`).test(target)},isTouchEvent=function(event){return!!(event.touches&&event.touches.length)},isMouseEvent=function(event){return!!((event.clientX||event.clientX===0)&&(event.clientY||event.clientY===0))},findClosestSnap=function(n$4,snapArray,snapGap){snapGap===void 0&&(snapGap=0);var closestGapIndex=snapArray.reduce(function(prev,curr,index$2){return Math.abs(curr-n$4)<Math.abs(snapArray[prev]-n$4)?index$2:prev},0),gap=Math.abs(snapArray[closestGapIndex]-n$4);return snapGap===0||gap<snapGap?snapArray[closestGapIndex]:n$4},getStringSize=function(n$4){return n$4=n$4.toString(),n$4===`auto`||n$4.endsWith(`px`)||n$4.endsWith(`%`)||n$4.endsWith(`vh`)||n$4.endsWith(`vw`)||n$4.endsWith(`vmax`)||n$4.endsWith(`vmin`)?n$4:`${n$4}px`},getPixelSize=function(size,parentSize,innerWidth,innerHeight){if(size&&typeof size==`string`){if(size.endsWith(`px`))return Number(size.replace(`px`,``));if(size.endsWith(`%`)){var ratio=Number(size.replace(`%`,``))/100;return parentSize*ratio}if(size.endsWith(`vw`)){var ratio=Number(size.replace(`vw`,``))/100;return innerWidth*ratio}if(size.endsWith(`vh`)){var ratio=Number(size.replace(`vh`,``))/100;return innerHeight*ratio}}return size},calculateNewMax=function(parentSize,innerWidth,innerHeight,maxWidth,maxHeight,minWidth,minHeight){return maxWidth=getPixelSize(maxWidth,parentSize.width,innerWidth,innerHeight),maxHeight=getPixelSize(maxHeight,parentSize.height,innerWidth,innerHeight),minWidth=getPixelSize(minWidth,parentSize.width,innerWidth,innerHeight),minHeight=getPixelSize(minHeight,parentSize.height,innerWidth,innerHeight),{maxWidth:maxWidth===void 0?void 0:Number(maxWidth),maxHeight:maxHeight===void 0?void 0:Number(maxHeight),minWidth:minWidth===void 0?void 0:Number(minWidth),minHeight:minHeight===void 0?void 0:Number(minHeight)}},normalizeToPair=function(val){return Array.isArray(val)?val:[val,val]},definedProps=`as.ref.style.className.grid.gridGap.snap.bounds.boundsByDirection.size.defaultSize.minWidth.minHeight.maxWidth.maxHeight.lockAspectRatio.lockAspectRatioExtraWidth.lockAspectRatioExtraHeight.enable.handleStyles.handleClasses.handleWrapperStyle.handleWrapperClass.children.onResizeStart.onResize.onResizeStop.handleComponent.scale.resizeRatio.snapGap`.split(`.`),baseClassName=`__resizable_base__`,Resizable=function(_super){__extends(Resizable$1,_super);function Resizable$1(props){var _a,_b,_c,_d,_this=_super.call(this,props)||this;return _this.ratio=1,_this.resizable=null,_this.parentLeft=0,_this.parentTop=0,_this.resizableLeft=0,_this.resizableRight=0,_this.resizableTop=0,_this.resizableBottom=0,_this.targetLeft=0,_this.targetTop=0,_this.delta={width:0,height:0},_this.appendBase=function(){if(!_this.resizable||!_this.window)return null;var parent=_this.parentNode;if(!parent)return null;var element=_this.window.document.createElement(`div`);return element.style.width=`100%`,element.style.height=`100%`,element.style.position=`absolute`,element.style.transform=`scale(0, 0)`,element.style.left=`0`,element.style.flex=`0 0 100%`,element.classList?element.classList.add(baseClassName):element.className+=baseClassName,parent.appendChild(element),element},_this.removeBase=function(base){var parent=_this.parentNode;parent&&parent.removeChild(base)},_this.state={isResizing:!1,width:_this.propsSize?.width??`auto`,height:_this.propsSize?.height??`auto`,direction:`right`,original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:`100%`,width:`100%`,backgroundColor:`rgba(0,0,0,0)`,cursor:`auto`,opacity:0,position:`fixed`,zIndex:9999,top:`0`,left:`0`,bottom:`0`,right:`0`},flexBasis:void 0},_this.onResizeStart=_this.onResizeStart.bind(_this),_this.onMouseMove=_this.onMouseMove.bind(_this),_this.onMouseUp=_this.onMouseUp.bind(_this),_this}return Object.defineProperty(Resizable$1.prototype,`parentNode`,{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(Resizable$1.prototype,`window`,{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(Resizable$1.prototype,`propsSize`,{get:function(){return this.props.size||this.props.defaultSize||DEFAULT_SIZE},enumerable:!1,configurable:!0}),Object.defineProperty(Resizable$1.prototype,`size`,{get:function(){var width=0,height=0;if(this.resizable&&this.window){var orgWidth=this.resizable.offsetWidth,orgHeight=this.resizable.offsetHeight,orgPosition=this.resizable.style.position;orgPosition!==`relative`&&(this.resizable.style.position=`relative`),width=this.resizable.style.width===`auto`?orgWidth:this.resizable.offsetWidth,height=this.resizable.style.height===`auto`?orgHeight:this.resizable.offsetHeight,this.resizable.style.position=orgPosition}return{width,height}},enumerable:!1,configurable:!0}),Object.defineProperty(Resizable$1.prototype,`sizeStyle`,{get:function(){var _this=this,size=this.props.size,getSize$1=function(key$1){var _a;if(_this.state[key$1]===void 0||_this.state[key$1]===`auto`)return`auto`;if(_this.propsSize&&_this.propsSize[key$1]&&_this.propsSize[key$1]?.toString().endsWith(`%`)){if(_this.state[key$1].toString().endsWith(`%`))return _this.state[key$1].toString();var parentSize=_this.getParentSize();return`${Number(_this.state[key$1].toString().replace(`px`,``))/parentSize[key$1]*100}%`}return getStringSize(_this.state[key$1])};return{width:size&&size.width!==void 0&&!this.state.isResizing?getStringSize(size.width):getSize$1(`width`),height:size&&size.height!==void 0&&!this.state.isResizing?getStringSize(size.height):getSize$1(`height`)}},enumerable:!1,configurable:!0}),Resizable$1.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var base=this.appendBase();if(!base)return{width:0,height:0};var wrapChanged=!1,wrap=this.parentNode.style.flexWrap;wrap!==`wrap`&&(wrapChanged=!0,this.parentNode.style.flexWrap=`wrap`),base.style.position=`relative`,base.style.minWidth=`100%`,base.style.minHeight=`100%`;var size={width:base.offsetWidth,height:base.offsetHeight};return wrapChanged&&(this.parentNode.style.flexWrap=wrap),this.removeBase(base),size},Resizable$1.prototype.bindEvents=function(){this.window&&(this.window.addEventListener(`mouseup`,this.onMouseUp),this.window.addEventListener(`mousemove`,this.onMouseMove),this.window.addEventListener(`mouseleave`,this.onMouseUp),this.window.addEventListener(`touchmove`,this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener(`touchend`,this.onMouseUp))},Resizable$1.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener(`mouseup`,this.onMouseUp),this.window.removeEventListener(`mousemove`,this.onMouseMove),this.window.removeEventListener(`mouseleave`,this.onMouseUp),this.window.removeEventListener(`touchmove`,this.onMouseMove,!0),this.window.removeEventListener(`touchend`,this.onMouseUp))},Resizable$1.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var computedStyle=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:computedStyle.flexBasis===`auto`?void 0:computedStyle.flexBasis})}},Resizable$1.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},Resizable$1.prototype.createSizeForCssProperty=function(newSize,kind){var propsSize=this.propsSize&&this.propsSize[kind];return this.state[kind]===`auto`&&this.state.original[kind]===newSize&&(propsSize===void 0||propsSize===`auto`)?`auto`:newSize},Resizable$1.prototype.calculateNewMaxFromBoundary=function(maxWidth,maxHeight){var boundsByDirection=this.props.boundsByDirection,direction=this.state.direction,widthByDirection=boundsByDirection&&hasDirection(`left`,direction),heightByDirection=boundsByDirection&&hasDirection(`top`,direction),boundWidth,boundHeight;if(this.props.bounds===`parent`){var parent_1=this.parentNode;parent_1&&(boundWidth=widthByDirection?this.resizableRight-this.parentLeft:parent_1.offsetWidth+(this.parentLeft-this.resizableLeft),boundHeight=heightByDirection?this.resizableBottom-this.parentTop:parent_1.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds===`window`?this.window&&(boundWidth=widthByDirection?this.resizableRight:this.window.innerWidth-this.resizableLeft,boundHeight=heightByDirection?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(boundWidth=widthByDirection?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),boundHeight=heightByDirection?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return boundWidth&&Number.isFinite(boundWidth)&&(maxWidth=maxWidth&&maxWidth<boundWidth?maxWidth:boundWidth),boundHeight&&Number.isFinite(boundHeight)&&(maxHeight=maxHeight&&maxHeight<boundHeight?maxHeight:boundHeight),{maxWidth,maxHeight}},Resizable$1.prototype.calculateNewSizeFromDirection=function(clientX,clientY){var scale$1=this.props.scale||1,_a=normalizeToPair(this.props.resizeRatio||1),resizeRatioX=_a[0],resizeRatioY=_a[1],_b=this.state,direction=_b.direction,original=_b.original,_c=this.props,lockAspectRatio=_c.lockAspectRatio,lockAspectRatioExtraHeight=_c.lockAspectRatioExtraHeight,lockAspectRatioExtraWidth=_c.lockAspectRatioExtraWidth,newWidth=original.width,newHeight=original.height,extraHeight=lockAspectRatioExtraHeight||0,extraWidth=lockAspectRatioExtraWidth||0;return hasDirection(`right`,direction)&&(newWidth=original.width+(clientX-original.x)*resizeRatioX/scale$1,lockAspectRatio&&(newHeight=(newWidth-extraWidth)/this.ratio+extraHeight)),hasDirection(`left`,direction)&&(newWidth=original.width-(clientX-original.x)*resizeRatioX/scale$1,lockAspectRatio&&(newHeight=(newWidth-extraWidth)/this.ratio+extraHeight)),hasDirection(`bottom`,direction)&&(newHeight=original.height+(clientY-original.y)*resizeRatioY/scale$1,lockAspectRatio&&(newWidth=(newHeight-extraHeight)*this.ratio+extraWidth)),hasDirection(`top`,direction)&&(newHeight=original.height-(clientY-original.y)*resizeRatioY/scale$1,lockAspectRatio&&(newWidth=(newHeight-extraHeight)*this.ratio+extraWidth)),{newWidth,newHeight}},Resizable$1.prototype.calculateNewSizeFromAspectRatio=function(newWidth,newHeight,max,min){var _a=this.props,lockAspectRatio=_a.lockAspectRatio,lockAspectRatioExtraHeight=_a.lockAspectRatioExtraHeight,lockAspectRatioExtraWidth=_a.lockAspectRatioExtraWidth,computedMinWidth=min.width===void 0?10:min.width,computedMaxWidth=max.width===void 0||max.width<0?newWidth:max.width,computedMinHeight=min.height===void 0?10:min.height,computedMaxHeight=max.height===void 0||max.height<0?newHeight:max.height,extraHeight=lockAspectRatioExtraHeight||0,extraWidth=lockAspectRatioExtraWidth||0;if(lockAspectRatio){var extraMinWidth=(computedMinHeight-extraHeight)*this.ratio+extraWidth,extraMaxWidth=(computedMaxHeight-extraHeight)*this.ratio+extraWidth,extraMinHeight=(computedMinWidth-extraWidth)/this.ratio+extraHeight,extraMaxHeight=(computedMaxWidth-extraWidth)/this.ratio+extraHeight,lockedMinWidth=Math.max(computedMinWidth,extraMinWidth),lockedMaxWidth=Math.min(computedMaxWidth,extraMaxWidth),lockedMinHeight=Math.max(computedMinHeight,extraMinHeight),lockedMaxHeight=Math.min(computedMaxHeight,extraMaxHeight);newWidth=clamp(newWidth,lockedMinWidth,lockedMaxWidth),newHeight=clamp(newHeight,lockedMinHeight,lockedMaxHeight)}else newWidth=clamp(newWidth,computedMinWidth,computedMaxWidth),newHeight=clamp(newHeight,computedMinHeight,computedMaxHeight);return{newWidth,newHeight}},Resizable$1.prototype.setBoundingClientRect=function(){var adjustedScale=1/(this.props.scale||1);if(this.props.bounds===`parent`){var parent_2=this.parentNode;if(parent_2){var parentRect=parent_2.getBoundingClientRect();this.parentLeft=parentRect.left*adjustedScale,this.parentTop=parentRect.top*adjustedScale}}if(this.props.bounds&&typeof this.props.bounds!=`string`){var targetRect=this.props.bounds.getBoundingClientRect();this.targetLeft=targetRect.left*adjustedScale,this.targetTop=targetRect.top*adjustedScale}if(this.resizable){var _a=this.resizable.getBoundingClientRect(),left=_a.left,top_1=_a.top,right=_a.right,bottom=_a.bottom;this.resizableLeft=left*adjustedScale,this.resizableRight=right*adjustedScale,this.resizableTop=top_1*adjustedScale,this.resizableBottom=bottom*adjustedScale}},Resizable$1.prototype.onResizeStart=function(event,direction){if(!(!this.resizable||!this.window)){var clientX=0,clientY=0;if(event.nativeEvent&&isMouseEvent(event.nativeEvent)?(clientX=event.nativeEvent.clientX,clientY=event.nativeEvent.clientY):event.nativeEvent&&isTouchEvent(event.nativeEvent)&&(clientX=event.nativeEvent.touches[0].clientX,clientY=event.nativeEvent.touches[0].clientY),!(this.props.onResizeStart&&this.resizable&&this.props.onResizeStart(event,direction,this.resizable)===!1)){this.props.size&&(this.props.size.height!==void 0&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),this.props.size.width!==void 0&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio==`number`?this.props.lockAspectRatio:this.size.width/this.size.height;var flexBasis,computedStyle=this.window.getComputedStyle(this.resizable);if(computedStyle.flexBasis!==`auto`){var parent_3=this.parentNode;parent_3&&(this.flexDir=this.window.getComputedStyle(parent_3).flexDirection.startsWith(`row`)?`row`:`column`,flexBasis=computedStyle.flexBasis)}this.setBoundingClientRect(),this.bindEvents();var state={original:{x:clientX,y:clientY,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:__assign(__assign({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(event.target).cursor||`auto`}),direction,flexBasis};this.setState(state)}}},Resizable$1.prototype.onMouseMove=function(event){var _this=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&isTouchEvent(event))try{event.preventDefault(),event.stopPropagation()}catch{}var _a=this.props,maxWidth=_a.maxWidth,maxHeight=_a.maxHeight,minWidth=_a.minWidth,minHeight=_a.minHeight,clientX=isTouchEvent(event)?event.touches[0].clientX:event.clientX,clientY=isTouchEvent(event)?event.touches[0].clientY:event.clientY,_b=this.state,direction=_b.direction,original=_b.original,width=_b.width,height=_b.height,parentSize=this.getParentSize(),max=calculateNewMax(parentSize,this.window.innerWidth,this.window.innerHeight,maxWidth,maxHeight,minWidth,minHeight);maxWidth=max.maxWidth,maxHeight=max.maxHeight,minWidth=max.minWidth,minHeight=max.minHeight;var _c=this.calculateNewSizeFromDirection(clientX,clientY),newHeight=_c.newHeight,newWidth=_c.newWidth,boundaryMax=this.calculateNewMaxFromBoundary(maxWidth,maxHeight);this.props.snap&&this.props.snap.x&&(newWidth=findClosestSnap(newWidth,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(newHeight=findClosestSnap(newHeight,this.props.snap.y,this.props.snapGap));var newSize=this.calculateNewSizeFromAspectRatio(newWidth,newHeight,{width:boundaryMax.maxWidth,height:boundaryMax.maxHeight},{width:minWidth,height:minHeight});if(newWidth=newSize.newWidth,newHeight=newSize.newHeight,this.props.grid){var newGridWidth=snap(newWidth,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),newGridHeight=snap(newHeight,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),gap=this.props.snapGap||0,w$1=gap===0||Math.abs(newGridWidth-newWidth)<=gap?newGridWidth:newWidth,h$3=gap===0||Math.abs(newGridHeight-newHeight)<=gap?newGridHeight:newHeight;newWidth=w$1,newHeight=h$3}var delta={width:newWidth-original.width,height:newHeight-original.height};if(this.delta=delta,width&&typeof width==`string`){if(width.endsWith(`%`)){var percent$1=newWidth/parentSize.width*100;newWidth=`${percent$1}%`}else if(width.endsWith(`vw`)){var vw$1=newWidth/this.window.innerWidth*100;newWidth=`${vw$1}vw`}else if(width.endsWith(`vh`)){var vh$1=newWidth/this.window.innerHeight*100;newWidth=`${vh$1}vh`}}if(height&&typeof height==`string`){if(height.endsWith(`%`)){var percent$1=newHeight/parentSize.height*100;newHeight=`${percent$1}%`}else if(height.endsWith(`vw`)){var vw$1=newHeight/this.window.innerWidth*100;newHeight=`${vw$1}vw`}else if(height.endsWith(`vh`)){var vh$1=newHeight/this.window.innerHeight*100;newHeight=`${vh$1}vh`}}var newState={width:this.createSizeForCssProperty(newWidth,`width`),height:this.createSizeForCssProperty(newHeight,`height`)};this.flexDir===`row`?newState.flexBasis=newState.width:this.flexDir===`column`&&(newState.flexBasis=newState.height);var widthChanged=this.state.width!==newState.width,heightChanged=this.state.height!==newState.height,flexBaseChanged=this.state.flexBasis!==newState.flexBasis,changed=widthChanged||heightChanged||flexBaseChanged;changed&&(0,import_react_dom$2.flushSync)(function(){_this.setState(newState)}),this.props.onResize&&changed&&this.props.onResize(event,direction,this.resizable,delta)}},Resizable$1.prototype.onMouseUp=function(event){var _a,_b,_c=this.state,isResizing=_c.isResizing,direction=_c.direction;_c.original,!(!isResizing||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(event,direction,this.resizable,this.delta),this.props.size&&this.setState({width:this.props.size.width??`auto`,height:this.props.size.height??`auto`}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:__assign(__assign({},this.state.backgroundStyle),{cursor:`auto`})}))},Resizable$1.prototype.updateSize=function(size){var _a,_b;this.setState({width:size.width??`auto`,height:size.height??`auto`})},Resizable$1.prototype.renderResizer=function(){var _this=this,_a=this.props,enable=_a.enable,handleStyles=_a.handleStyles,handleClasses=_a.handleClasses,handleWrapperStyle=_a.handleWrapperStyle,handleWrapperClass=_a.handleWrapperClass,handleComponent=_a.handleComponent;return enable?(0,import_jsx_runtime.jsx)(`div`,{className:handleWrapperClass,style:handleWrapperStyle,children:Object.keys(enable).map(function(dir){return enable[dir]===!1?null:(0,import_jsx_runtime.jsx)(Resizer,{direction:dir,onResizeStart:_this.onResizeStart,replaceStyles:handleStyles&&handleStyles[dir],className:handleClasses&&handleClasses[dir],children:handleComponent&&handleComponent[dir]?handleComponent[dir]:null},dir)})}):null},Resizable$1.prototype.render=function(){var _this=this,extendsProps=Object.keys(this.props).reduce(function(acc,key$1){return definedProps.indexOf(key$1)===-1&&(acc[key$1]=_this.props[key$1]),acc},{}),style$3=__assign(__assign(__assign({position:`relative`,userSelect:this.state.isResizing?`none`:`auto`},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:`border-box`,flexShrink:0});return this.state.flexBasis&&(style$3.flexBasis=this.state.flexBasis),(0,import_jsx_runtime.jsxs)(this.props.as||`div`,__assign({style:style$3,className:this.props.className},extendsProps,{ref:function(c$3){c$3&&(_this.resizable=c$3)},children:[this.state.isResizing&&(0,import_jsx_runtime.jsx)(`div`,{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},Resizable$1.defaultProps={as:`div`,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},Resizable$1}(import_react.PureComponent),SortableBlockItem=props=>{let{block,selectedBlockId,onSelectBlock,onRemoveBlock,activeContainer,onSetActiveContainer,onUpdateBlock,onOpenSettings}=props,{attributes,listeners,setNodeRef,transform:transform$1,transition:transition$1,isDragging:isDragging$2}=useSortable({id:block.id,data:{containerId:`ROOT`}}),style$3={transform:CSS$1.Translate.toString(transform$1),transition:transition$1,opacity:isDragging$2?.8:1,zIndex:isDragging$2?9999:`auto`},isSelected=selectedBlockId===block.id,layout$1=block.layout||{w:`100%`,h:`auto`},[boundaryElement,setBoundaryElement]=(0,import_react.useState)(null);return(0,import_react.useEffect)(()=>{let canvasEl=document.getElementById(`canvas-boundary`);canvasEl&&setBoundaryElement(canvasEl)},[]),(0,import_jsx_runtime.jsx)(`div`,{ref:setNodeRef,style:style$3,...attributes,className:`outline-none relative`,children:(0,import_jsx_runtime.jsxs)(Resizable,{className:`relative`,maxWidth:`100%`,bounds:boundaryElement||void 0,minWidth:50,minHeight:20,size:{width:layout$1.w,height:layout$1.h},onResizeStop:(e$4,direction,ref,d$3)=>{onUpdateBlock(block.id,{layout:{w:ref.style.width,h:ref.style.height}})},enable:{top:!1,right:isSelected&&block.type!==`link-bookmark`,bottom:isSelected&&block.type!==`link-bookmark`,left:!1,topRight:!1,bottomRight:isSelected&&block.type!==`link-bookmark`,bottomLeft:!1,topLeft:!1},handleStyles:{bottomRight:{bottom:0,right:0,width:`12px`,height:`12px`,backgroundColor:`#6366f1`,borderRadius:`50%`,cursor:`nwse-resize`,zIndex:50},right:{width:`10px`,right:-5,cursor:`col-resize`},bottom:{height:`10px`,bottom:-5,cursor:`row-resize`}},children:[(0,import_jsx_runtime.jsxs)(`div`,{onClick:e$4=>{e$4.stopPropagation(),onSelectBlock(block.id)},onDoubleClick:e$4=>{e$4.stopPropagation(),onOpenSettings&&onOpenSettings()},className:`
                        relative group rounded-lg transition-all border-2 h-full overflow-hidden
                        ${isSelected?`border-indigo-500 bg-indigo-500/10 ring-2 ring-indigo-500/30`:`border-transparent hover:border-[var(--border-color)] hover:bg-[var(--bg-card-secondary)] bg-transparent`}
                    `,children:[(0,import_jsx_runtime.jsx)(`div`,{...listeners,className:`
                                absolute top-0 left-0 w-full h-3 z-20 cursor-grab active:cursor-grabbing flex justify-center items-start
                                transition-opacity duration-200
                                ${isSelected||isDragging$2?`opacity-100 bg-transparent`:`opacity-0 group-hover:opacity-100 bg-transparent`}
                            `,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-1 bg-transparent rounded-full mt-1`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full p-0`,children:[` `,(0,import_jsx_runtime.jsx)(BlockRenderer_default,{block,selectedBlockId,onSelectBlock,onRemoveBlock,activeContainer,onSetActiveContainer,onUpdateBlock})]})]}),isSelected&&(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onRemoveBlock(block.id)},className:`absolute -right-2 -top-2 bg-red-500 text-white p-1 rounded-full shadow-md hover:bg-red-600 z-50`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:12})})]})})},SortableBlockItem_default=SortableBlockItem,Canvas=props=>{let{blocks,currentSize,selectedBlockId,onSelectBlock,onRemoveBlock,activeContainer,onSetActiveContainer,onUpdateBlock,onDragEnd:onDragEnd$1,onDragOver,decorations,selectedDecorationId,onSelectDecoration,updateDecoration,onOpenSettings,scenes,currentSceneIndex=0,onAddScene,onChangeScene,onUpdateSceneDuration,onDeleteScene}=props,[isPlaying,setIsPlaying]=(0,import_react.useState)(!1);(0,import_react.useEffect)(()=>{let timer$1;if(isPlaying&&scenes&&scenes.length>1){let currentDuration=scenes[currentSceneIndex].duration||1;timer$1=setTimeout(()=>{let nextIndex=(currentSceneIndex+1)%scenes.length;onChangeScene?.(nextIndex)},currentDuration*1e3)}return()=>clearTimeout(timer$1)},[isPlaying,scenes,currentSceneIndex,onChangeScene]);let[activeId,setActiveId]=(0,import_react.useState)(null),findBlock=(id$3,items)=>{for(let item of items){if(item.id===id$3)return item;if(item.type===`columns`&&item.content.layout)for(let col of item.content.layout){let found=findBlock(id$3,col);if(found)return found}if(item.type===`custom-block`&&item.content.children){let found=findBlock(id$3,item.content.children);if(found)return found}}},dragRef=(0,import_react.useRef)({id:null,startX:0,startY:0,initialDecoX:0,initialDecoY:0}),handleDecoMouseDown=(e$4,deco)=>{e$4.stopPropagation(),e$4.preventDefault(),onSelectDecoration(deco.id),dragRef.current={id:deco.id,startX:e$4.clientX,startY:e$4.clientY,initialDecoX:deco.x,initialDecoY:deco.y},window.addEventListener(`mousemove`,handleDecoMouseMove),window.addEventListener(`mouseup`,handleDecoMouseUp)},handleDecoMouseMove=e$4=>{if(!dragRef.current.id)return;let{startX,startY,initialDecoX,initialDecoY,id:id$3}=dragRef.current,deltaX=e$4.clientX-startX,deltaY=e$4.clientY-startY,width=currentSize.w||1,height=currentSize.h||1,deltaXPercent=deltaX/width*100,deltaYPercent=deltaY/height*100;updateDecoration(id$3,{x:initialDecoX+deltaXPercent,y:initialDecoY+deltaYPercent})},handleDecoMouseUp=()=>{dragRef.current.id=null,window.removeEventListener(`mousemove`,handleDecoMouseMove),window.removeEventListener(`mouseup`,handleDecoMouseUp)},resizeRef=(0,import_react.useRef)({id:null,startX:0,startY:0,initialW:0,initialH:0,initialX:0,initialY:0,rotation:0,handle:``}),handleResizeMouseDown=(e$4,deco,handle)=>{e$4.stopPropagation(),e$4.preventDefault(),resizeRef.current={id:deco.id,startX:e$4.clientX,startY:e$4.clientY,initialW:deco.w,initialH:deco.h,initialX:deco.x,initialY:deco.y,rotation:deco.rotation||0,handle},window.addEventListener(`mousemove`,handleResizeMouseMove),window.addEventListener(`mouseup`,handleResizeMouseUp)},handleResizeMouseMove=e$4=>{if(!resizeRef.current.id)return;let{startX,startY,initialW,initialH,initialX,initialY,handle,id:id$3}=resizeRef.current,deltaX=e$4.clientX-startX,deltaY=e$4.clientY-startY,canvasW=currentSize.w||1,canvasH=currentSize.h||1,newW=initialW,newH=initialH,newX=initialX,newY=initialY;switch(handle){case`se`:newW=initialW+deltaX,newH=initialH+deltaY,newX=initialX+deltaX/2/canvasW*100,newY=initialY+deltaY/2/canvasH*100;break;case`sw`:newW=initialW-deltaX,newH=initialH+deltaY,newX=initialX+deltaX/2/canvasW*100,newX=initialX+deltaX/2/canvasW*100,newY=initialY+deltaY/2/canvasH*100;break;case`ne`:newW=initialW+deltaX,newH=initialH-deltaY,newX=initialX+deltaX/2/canvasW*100,newY=initialY+deltaY/2/canvasH*100;break;case`nw`:newW=initialW-deltaX,newH=initialH-deltaY,newX=initialX+deltaX/2/canvasW*100,newY=initialY+deltaY/2/canvasH*100;break}newW<20&&(newW=20),newH<20&&(newH=20),updateDecoration(id$3,{w:newW,h:newH,x:newX,y:newY})},handleResizeMouseUp=()=>{resizeRef.current.id=null,window.removeEventListener(`mousemove`,handleResizeMouseMove),window.removeEventListener(`mouseup`,handleResizeMouseUp)},blobRef=(0,import_react.useRef)(null),canvasRef=(0,import_react.useRef)(null),handlePointMouseUp=()=>{blobRef.current=null,window.removeEventListener(`mousemove`,handlePointDrag),window.removeEventListener(`mouseup`,handlePointMouseUp)},handlePointDrag=e$4=>{if(!blobRef.current||!canvasRef.current)return;let{id:id$3,index:index$2}=blobRef.current,deco=decorations.find(d$3=>d$3.id===id$3);if(!deco||!deco.points)return;let canvasRect=canvasRef.current.getBoundingClientRect(),mouseX=e$4.clientX-canvasRect.left,mouseY=e$4.clientY-canvasRect.top,decoCenterX=deco.x/100*canvasRect.width,decoCenterY=deco.y/100*canvasRect.height,rad=-(deco.rotation||0)*Math.PI/180,cos=Math.cos(rad),sin=Math.sin(rad),dx=mouseX-decoCenterX,dy=mouseY-decoCenterY,localX=dx*cos-dy*sin,localY=dx*sin+dy*cos,pxX=localX+deco.w/2,pxY=localY+deco.h/2,normX=pxX/deco.w*100,normY=pxY/deco.h*100,newPoints=[...deco.points];newPoints[index$2]={x:normX,y:normY},updateDecoration(id$3,{points:newPoints})};(0,import_react.useEffect)(()=>()=>{window.removeEventListener(`mousemove`,handleDecoMouseMove),window.removeEventListener(`mouseup`,handleDecoMouseUp),window.removeEventListener(`mousemove`,handleResizeMouseMove),window.removeEventListener(`mouseup`,handleResizeMouseUp),window.removeEventListener(`mousemove`,handlePointDrag),window.removeEventListener(`mouseup`,handlePointMouseUp)},[]);let startPointDrag=(e$4,decoId,index$2)=>{e$4.stopPropagation(),e$4.preventDefault(),blobRef.current={id:decoId,index:index$2},window.addEventListener(`mousemove`,handlePointDrag),window.addEventListener(`mouseup`,handlePointMouseUp)},handlePathClick=(e$4,deco)=>{if(!deco.points||!canvasRef.current)return;e$4.stopPropagation();let canvasRect=canvasRef.current.getBoundingClientRect(),mouseX=e$4.clientX-canvasRect.left,mouseY=e$4.clientY-canvasRect.top,decoCenterX=deco.x/100*canvasRect.width,decoCenterY=deco.y/100*canvasRect.height,rad=-(deco.rotation||0)*Math.PI/180,cos=Math.cos(rad),sin=Math.sin(rad),dx=mouseX-decoCenterX,dy=mouseY-decoCenterY,localX=dx*cos-dy*sin,localY=dx*sin+dy*cos,pxX=localX+deco.w/2,pxY=localY+deco.h/2,newPoint={x:pxX/deco.w*100,y:pxY/deco.h*100},minDist=1/0,insertIdx=0,pts=deco.points;for(let i$4=0;i$4<pts.length;i$4++){let p1=pts[i$4],p2=pts[(i$4+1)%pts.length],d1=Math.hypot(p1.x-newPoint.x,p1.y-newPoint.y),d2=Math.hypot(p2.x-newPoint.x,p2.y-newPoint.y),d12=Math.hypot(p1.x-p2.x,p1.y-p2.y),extraDist=d1+d2-d12;extraDist<minDist&&(minDist=extraDist,insertIdx=i$4+1)}let newPoints=[...pts];newPoints.splice(insertIdx,0,newPoint),updateDecoration(deco.id,{points:newPoints})},activeBlock=activeId?findBlock(activeId,blocks):null,getPreviewStyle=()=>{if(!activeBlock)return{};let layout$1=activeBlock.layout||{w:`100%`,h:`auto`},width=`200px`;if(typeof layout$1.w==`string`&&layout$1.w.endsWith(`%`)){let percent$1=parseFloat(layout$1.w);width=`${currentSize.w*percent$1/100}px`}else width=typeof layout$1.w==`number`?`${layout$1.w}px`:layout$1.w;let height=`100px`;if(layout$1.h===`auto`)height=`150px`;else if(typeof layout$1.h==`string`&&layout$1.h.endsWith(`%`)){let percent$1=parseFloat(layout$1.h);height=`${currentSize.h*percent$1/100}px`}else height=layout$1.h;return{width,height}},sensors=useSensors(useSensor(PointerSensor,{activationConstraint:{distance:5}})),{setNodeRef}=useDroppable({id:`ROOT`,data:{containerId:`ROOT`,isContainer:!0}});return(0,import_jsx_runtime.jsx)(`main`,{className:`flex-1 bg-[var(--bg-primary)] relative flex flex-col items-center pt-12 p-4 overflow-auto gap-1`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`relative group/canvas w-full max-w-full flex justify-center flex-1 `,children:[(0,import_jsx_runtime.jsxs)(`div`,{ref:canvasRef,id:`canvas-boundary`,className:`bg-[var(--bg-card)] rounded-[24px] shadow-[0_0_50px_rgba(0,0,0,0.3)] overflow-hidden relative transition-all duration-500 flex flex-col ring-[12px] ring-gray-900 border border-[var(--border-color)]`,style:{width:`${currentSize.w}px`,height:`${currentSize.h}px`,flexShrink:0,padding:`0px`},onClick:()=>{onSelectBlock(null),onSetActiveContainer(null)},children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute inset-0 pointer-events-none overflow-hidden z-10`,children:[(0,import_jsx_runtime.jsx)(`style`,{children:`
                                @keyframes spin { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }
                                @keyframes pulse { 0%, 100% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.1); } }
                                @keyframes bounce { 0%, 100% { transform: translate(-50%, -50%); } 50% { transform: translate(-50%, -60%); } }
                                @keyframes float { 0% { transform: translate(-50%, -50%); } 50% { transform: translate(-50%, -55%); } 100% { transform: translate(-50%, -50%); } }
                                @keyframes wiggle { 0%, 100% { transform: translate(-50%, -50%) rotate(-3deg); } 50% { transform: translate(-50%, -50%) rotate(3deg); } }
                            `}),decorations?.map(deco=>{let safeType=deco.type;return typeof safeType==`object`&&safeType.type&&(safeType=safeType.type),(0,import_jsx_runtime.jsxs)(`div`,{onMouseDown:e$4=>handleDecoMouseDown(e$4,deco),onClick:e$4=>e$4.stopPropagation(),onDoubleClick:e$4=>{e$4.stopPropagation(),onOpenSettings&&onOpenSettings()},className:`absolute transition-all duration-300 ease-out cursor-pointer pointer-events-auto ${selectedDecorationId===deco.id?`ring-2 ring-indigo-500 ring-offset-2`:`hover:ring-1 hover:ring-indigo-300`}`,style:{left:`${deco.x}%`,top:`${deco.y}%`,width:`${deco.w}px`,height:`${deco.h}px`,backgroundColor:deco.imageUrl?void 0:safeType===`circle`||safeType===`square`?deco.color:void 0,backgroundImage:deco.imageUrl&&safeType!==`blob`?`url(${deco.imageUrl})`:void 0,backgroundSize:`cover`,backgroundPosition:`center`,borderRadius:safeType===`circle`?`50%`:safeType===`square`?`10%`:`0%`,transform:`translate(-50%, -50%) rotate(${deco.rotation||0}deg)`,opacity:deco.opacity,zIndex:deco.zIndex||0,animationName:deco.animation?.type,animationDuration:`${deco.animation?.duration||3}s`,animationIterationCount:`infinite`,animationTimingFunction:`ease-in-out`,animationDelay:`${deco.animation?.delay||0}s`},children:[safeType===`blob`&&!deco.mediaType&&!deco.imageUrl?(0,import_jsx_runtime.jsxs)(`svg`,{width:`100%`,height:`100%`,viewBox:`0 0 100 100`,style:{overflow:`visible`},children:[(0,import_jsx_runtime.jsx)(`path`,{d:getSvgPathFromPoints(deco.points||[],.5,!0),fill:deco.color,fillOpacity:.8,stroke:selectedDecorationId===deco.id?`rgba(99, 102, 241, 0.5)`:`none`,strokeWidth:`1`,className:`pointer-events-none`}),(0,import_jsx_runtime.jsx)(`path`,{d:getSvgPathFromPoints(deco.points||[],.5,!0),fill:`transparent`,stroke:`transparent`,strokeWidth:`15`,className:`cursor-crosshair pointer-events-auto`,onMouseDown:e$4=>e$4.stopPropagation(),onClick:e$4=>handlePathClick(e$4,deco)})]}):(0,import_jsx_runtime.jsxs)(`div`,{style:{width:`100%`,height:`100%`,backgroundColor:deco.mediaType===`video`||deco.imageUrl?void 0:deco.color,backgroundImage:deco.mediaType!==`video`&&deco.imageUrl&&safeType!==`blob`?`url(${deco.imageUrl})`:void 0,backgroundSize:`cover`,backgroundPosition:`center`,borderRadius:safeType===`circle`?`50%`:safeType===`square`?`10%`:`0%`,clipPath:safeType===`star`?`polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)`:safeType===`blob`&&deco.points?`path('${getSvgPathFromPoints(deco.points,.5,!0).replace(/,/g,` `)}')`:void 0},children:[deco.mediaType===`video`&&deco.videoUrl&&(0,import_jsx_runtime.jsx)(`video`,{src:deco.videoUrl,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,style:{width:`100%`,height:`100%`,objectFit:`cover`},onTimeUpdate:e$4=>{let vid=e$4.currentTarget,start$2=deco.videoStartTime||0,end$1=deco.videoEndTime||0;end$1>0&&vid.currentTime>=end$1&&(vid.currentTime=start$2)},onLoadedMetadata:e$4=>{deco.videoStartTime&&(e$4.currentTarget.currentTime=deco.videoStartTime)}}),deco.mediaType!==`video`&&deco.imageUrl&&safeType===`blob`&&(0,import_jsx_runtime.jsx)(`img`,{src:deco.imageUrl,alt:``,className:`w-full h-full object-cover`})]}),selectedDecorationId===deco.id&&deco.points&&deco.points.map((p$3,idx)=>(0,import_jsx_runtime.jsx)(`div`,{onMouseDown:e$4=>startPointDrag(e$4,deco.id,idx),onDoubleClick:e$4=>{if(e$4.stopPropagation(),deco.points&&deco.points.length>3){let newPoints=[...deco.points];newPoints.splice(idx,1),updateDecoration(deco.id,{points:newPoints})}},onClick:e$4=>e$4.stopPropagation(),className:`absolute w-3 h-3 bg-white border border-indigo-500 rounded-full cursor-grab active:cursor-grabbing hover:bg-indigo-100 z-50 shadow-sm`,style:{left:`${p$3.x}%`,top:`${p$3.y}%`,transform:`translate(-50%, -50%)`}},idx)),selectedDecorationId===deco.id&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`div`,{onMouseDown:e$4=>handleResizeMouseDown(e$4,deco,`nw`),className:`absolute -top-1 -left-1 w-2.5 h-2.5 bg-white border border-indigo-500 rounded-full cursor-nw-resize z-50 hover:bg-indigo-100`}),(0,import_jsx_runtime.jsx)(`div`,{onMouseDown:e$4=>handleResizeMouseDown(e$4,deco,`ne`),className:`absolute -top-1 -right-1 w-2.5 h-2.5 bg-white border border-indigo-500 rounded-full cursor-ne-resize z-50 hover:bg-indigo-100`}),(0,import_jsx_runtime.jsx)(`div`,{onMouseDown:e$4=>handleResizeMouseDown(e$4,deco,`sw`),className:`absolute -bottom-1 -left-1 w-2.5 h-2.5 bg-white border border-indigo-500 rounded-full cursor-sw-resize z-50 hover:bg-indigo-100`}),(0,import_jsx_runtime.jsx)(`div`,{onMouseDown:e$4=>handleResizeMouseDown(e$4,deco,`se`),className:`absolute -bottom-1 -right-1 w-2.5 h-2.5 bg-white border border-indigo-500 rounded-full cursor-se-resize z-50 hover:bg-indigo-100`})]})]},deco.id)})]}),(0,import_jsx_runtime.jsxs)(DndContext,{sensors,collisionDetection:pointerWithin,onDragStart:event=>{setActiveId(event.active.id)},onDragEnd:event=>{setActiveId(null),onDragEnd$1(event)},onDragOver,children:[(0,import_jsx_runtime.jsx)(`div`,{ref:setNodeRef,className:`flex-1 flex flex-col gap-0 min-h-full relative z-20`,style:{pointerEvents:activeId?`auto`:`none`},children:blocks.length===0?(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 flex flex-col items-center justify-center text-[var(--text-secondary)]`,style:{pointerEvents:`none`,userSelect:`none`},children:[(0,import_jsx_runtime.jsx)(Smartphone,{size:40,className:`mb-3 opacity-10`}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm font-semibold opacity-20 max-md:hidden`,children:`  `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm font-semibold opacity-20 md:hidden`,children:`  `})]}):(0,import_jsx_runtime.jsx)(SortableContext,{items:blocks.map(b$3=>b$3.id),strategy:verticalListSortingStrategy,children:blocks.map(block=>(0,import_jsx_runtime.jsx)(`div`,{className:``,style:{pointerEvents:`auto`},children:(0,import_jsx_runtime.jsx)(SortableBlockItem_default,{block,selectedBlockId,onSelectBlock,onRemoveBlock,activeContainer,onSetActiveContainer,onUpdateBlock,onOpenSettings})},block.id))})}),(0,import_jsx_runtime.jsx)(DragOverlay,{modifiers:[snapCenterToCursor],zIndex:1e3,dropAnimation:null,children:activeBlock?(0,import_jsx_runtime.jsx)(`div`,{className:`rounded-lg shadow-2xl opacity-90 overflow-hidden bg-white ring-2 ring-indigo-500 ring-offset-2`,style:getPreviewStyle(),children:(0,import_jsx_runtime.jsx)(BlockRenderer_default,{block:activeBlock,selectedBlockId:null,onSelectBlock:()=>{},onRemoveBlock:()=>{},activeContainer:null,onSetActiveContainer:()=>{},onUpdateBlock:()=>{}})}):null})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute -bottom-12 left-1/2 -translate-x-1/2 flex items-center gap-2 text-[10px] font-bold text-[var(--text-secondary)] bg-[var(--bg-card-secondary)] px-4 py-1.5 rounded-full border border-[var(--border-color)] opacity-0 group-hover/canvas:opacity-100 transition-opacity`,children:[(0,import_jsx_runtime.jsxs)(`span`,{children:[`WIDTH `,currentSize.w,`px`]}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[var(--text-secondary)]`,children:`|`}),(0,import_jsx_runtime.jsxs)(`span`,{children:[`HEIGHT `,currentSize.h,`px`]})]}),scenes&&(0,import_jsx_runtime.jsxs)(`div`,{className:`mt-4 w-full max-w-[500px] flex flex-col gap-2 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-lg p-2 shadow-sm z-10 transition-all absolute bottom-4 left-1/2 -translate-x-1/2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,import_jsx_runtime.jsxs)(`span`,{className:`text-xs font-bold text-[var(--text-secondary)] flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Clock,{size:12}),` ANIMATION TIMELINE`]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsPlaying(!isPlaying),className:`p-1.5 rounded hover:bg-[var(--bg-card-secondary)] transition-colors ${isPlaying?`text-indigo-500`:`text-[var(--text-primary)]`}`,title:isPlaying?`Pause`:`Play`,children:isPlaying?(0,import_jsx_runtime.jsx)(Pause,{size:14,fill:`currentColor`}):(0,import_jsx_runtime.jsx)(Play,{size:14,fill:`currentColor`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 bg-[var(--bg-site)] px-2 py-1 rounded text-[10px] border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[var(--text-secondary)]`,children:`Duration:`}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,min:`0.1`,step:`0.1`,value:scenes[currentSceneIndex]?.duration||1,onChange:e$4=>onUpdateSceneDuration?.(currentSceneIndex,parseFloat(e$4.target.value)),className:`w-8 bg-transparent text-right outline-none font-bold`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[var(--text-secondary)]`,children:`s`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 overflow-x-auto pb-1 scrollbar-thin`,children:[scenes.map((scene,idx)=>(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>{onChangeScene?.(idx),setIsPlaying(!1)},className:`
                                    flex-shrink-0 w-16 h-12 rounded border cursor-pointer relative group flex flex-col items-center justify-center gap-1 transition-all
                                    ${currentSceneIndex===idx?`border-indigo-500 bg-indigo-500/10 ring-1 ring-indigo-500`:`border-[var(--border-color)] hover:border-[var(--text-secondary)] bg-[var(--bg-site)]`}
                                `,children:[(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] font-bold text-[var(--text-secondary)]`,children:[`Frame `,idx+1]}),scenes.length>1&&currentSceneIndex===idx&&(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onDeleteScene?.(idx)},className:`absolute -top-1.5 -right-1.5 w-4 h-4 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:scale-110`,title:`Delete Frame`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:8})})]},scene.id)),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{onAddScene?.(),setIsPlaying(!1)},className:`flex-shrink-0 w-8 h-12 rounded border border-dashed border-[var(--border-color)] hover:border-indigo-500 hover:text-indigo-500 flex items-center justify-center transition-colors text-[var(--text-secondary)]`,title:`Duplicate Current Frame`,children:(0,import_jsx_runtime.jsx)(Plus,{size:16})})]})]})]})})},Canvas_default=Canvas;function changeJpegDpi(uint8Array,dpi){return uint8Array[13]=1,uint8Array[14]=dpi>>8,uint8Array[15]=dpi&255,uint8Array[16]=dpi>>8,uint8Array[17]=dpi&255,uint8Array}var _P=112,_H=72,_Y=89,_S=115,pngDataTable;function createPngDataTable(){let crcTable=new Int32Array(256);for(let n$4=0;n$4<256;n$4++){let c$3=n$4;for(let k$3=0;k$3<8;k$3++)c$3=c$3&1?3988292384^c$3>>>1:c$3>>>1;crcTable[n$4]=c$3}return crcTable}function calcCrc(uint8Array){let c$3=-1;pngDataTable||=createPngDataTable();for(let n$4=0;n$4<uint8Array.length;n$4++)c$3=pngDataTable[(c$3^uint8Array[n$4])&255]^c$3>>>8;return c$3^-1}function searchStartOfPhys(uint8Array){let length=uint8Array.length-1;for(let i$4=length;i$4>=4;i$4--)if(uint8Array[i$4-4]===9&&uint8Array[i$4-3]===_P&&uint8Array[i$4-2]===_H&&uint8Array[i$4-1]===_Y&&uint8Array[i$4]===_S)return i$4-3;return 0}function changePngDpi(uint8Array,dpi,overwritepHYs=!1){let physChunk=new Uint8Array(13);dpi*=39.3701,physChunk[0]=_P,physChunk[1]=_H,physChunk[2]=_Y,physChunk[3]=_S,physChunk[4]=dpi>>>24,physChunk[5]=dpi>>>16,physChunk[6]=dpi>>>8,physChunk[7]=dpi&255,physChunk[8]=physChunk[4],physChunk[9]=physChunk[5],physChunk[10]=physChunk[6],physChunk[11]=physChunk[7],physChunk[12]=1;let crc=calcCrc(physChunk),crcChunk=new Uint8Array(4);if(crcChunk[0]=crc>>>24,crcChunk[1]=crc>>>16,crcChunk[2]=crc>>>8,crcChunk[3]=crc&255,overwritepHYs){let startingIndex=searchStartOfPhys(uint8Array);return uint8Array.set(physChunk,startingIndex),uint8Array.set(crcChunk,startingIndex+13),uint8Array}else{let chunkLength=new Uint8Array(4);chunkLength[0]=0,chunkLength[1]=0,chunkLength[2]=0,chunkLength[3]=9;let finalHeader=new Uint8Array(54);return finalHeader.set(uint8Array,0),finalHeader.set(chunkLength,33),finalHeader.set(physChunk,37),finalHeader.set(crcChunk,50),finalHeader}}var b64PhysSignature1=`AAlwSFlz`,b64PhysSignature2=`AAAJcEhZ`,b64PhysSignature3=`AAAACXBI`;function detectPhysChunkFromDataUrl(dataUrl){let b64index=dataUrl.indexOf(b64PhysSignature1);return b64index===-1&&(b64index=dataUrl.indexOf(b64PhysSignature2)),b64index===-1&&(b64index=dataUrl.indexOf(b64PhysSignature3)),b64index}var PREFIX=`[modern-screenshot]`,IN_BROWSER=typeof window<`u`,SUPPORT_WEB_WORKER=IN_BROWSER&&`Worker`in window,SUPPORT_ATOB=IN_BROWSER&&`atob`in window,SUPPORT_BTOA=IN_BROWSER&&`btoa`in window,USER_AGENT=IN_BROWSER?window.navigator?.userAgent:``,IN_CHROME=USER_AGENT.includes(`Chrome`),IN_SAFARI=USER_AGENT.includes(`AppleWebKit`)&&!IN_CHROME,IN_FIREFOX=USER_AGENT.includes(`Firefox`),isContext=value=>value&&`__CONTEXT__`in value,isCssFontFaceRule=rule=>rule.constructor.name===`CSSFontFaceRule`,isCSSImportRule=rule=>rule.constructor.name===`CSSImportRule`,isElementNode=node=>node.nodeType===1,isSVGElementNode=node=>typeof node.className==`object`,isSVGImageElementNode=node=>node.tagName===`image`,isSVGUseElementNode=node=>node.tagName===`use`,isHTMLElementNode=node=>isElementNode(node)&&node.style!==void 0&&!isSVGElementNode(node),isCommentNode=node=>node.nodeType===8,isTextNode=node=>node.nodeType===3,isImageElement=node=>node.tagName===`IMG`,isVideoElement=node=>node.tagName===`VIDEO`,isCanvasElement=node=>node.tagName===`CANVAS`,isTextareaElement=node=>node.tagName===`TEXTAREA`,isInputElement=node=>node.tagName===`INPUT`,isStyleElement=node=>node.tagName===`STYLE`,isScriptElement=node=>node.tagName===`SCRIPT`,isSelectElement=node=>node.tagName===`SELECT`,isSlotElement=node=>node.tagName===`SLOT`,isIFrameElement=node=>node.tagName===`IFRAME`,consoleWarn=(...args)=>console.warn(PREFIX,...args);function supportWebp(ownerDocument){let canvas=ownerDocument?.createElement?.(`canvas`);return canvas&&(canvas.height=canvas.width=1),!!canvas&&`toDataURL`in canvas&&!!canvas.toDataURL(`image/webp`).includes(`image/webp`)}var isDataUrl=url=>url.startsWith(`data:`);function resolveUrl(url,baseUrl){if(url.match(/^[a-z]+:\/\//i))return url;if(IN_BROWSER&&url.match(/^\/\//))return window.location.protocol+url;if(url.match(/^[a-z]+:/i)||!IN_BROWSER)return url;let doc=getDocument().implementation.createHTMLDocument(),base=doc.createElement(`base`),a$4=doc.createElement(`a`);return doc.head.appendChild(base),doc.body.appendChild(a$4),baseUrl&&(base.href=baseUrl),a$4.href=url,a$4.href}function getDocument(target){return(target&&isElementNode(target)?target?.ownerDocument:target)??window.document}var XMLNS=`http://www.w3.org/2000/svg`;function createSvg(width,height,ownerDocument){let svg=getDocument(ownerDocument).createElementNS(XMLNS,`svg`);return svg.setAttributeNS(null,`width`,width.toString()),svg.setAttributeNS(null,`height`,height.toString()),svg.setAttributeNS(null,`viewBox`,`0 0 ${width} ${height}`),svg}function svgToDataUrl(svg,removeControlCharacter){let xhtml$1=new XMLSerializer().serializeToString(svg);return removeControlCharacter&&(xhtml$1=xhtml$1.replace(/[\u0000-\u0008\v\f\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,``)),`data:image/svg+xml;charset=utf-8,${encodeURIComponent(xhtml$1)}`}function readBlob(blob,type){return new Promise((resolve,reject)=>{let reader=new FileReader;reader.onload=()=>resolve(reader.result),reader.onerror=()=>reject(reader.error),reader.onabort=()=>reject(Error(`Failed read blob to ${type}`)),type===`dataUrl`?reader.readAsDataURL(blob):type===`arrayBuffer`&&reader.readAsArrayBuffer(blob)})}var blobToDataUrl=blob=>readBlob(blob,`dataUrl`);function createImage(url,ownerDocument){let img=getDocument(ownerDocument).createElement(`img`);return img.decoding=`sync`,img.loading=`eager`,img.src=url,img}function loadMedia(media,options$1){return new Promise(resolve=>{let{timeout:timeout$1,ownerDocument,onError:userOnError,onWarn}=options$1??{},node=typeof media==`string`?createImage(media,getDocument(ownerDocument)):media,timer$1=null,removeEventListeners=null;function onResolve(){resolve(node),timer$1&&clearTimeout(timer$1),removeEventListeners?.()}if(timeout$1&&(timer$1=setTimeout(onResolve,timeout$1)),isVideoElement(node)){let currentSrc=node.currentSrc||node.src;if(!currentSrc)return node.poster?loadMedia(node.poster,options$1).then(resolve):onResolve();if(node.readyState>=2)return onResolve();let onLoadeddata=onResolve,onError=error$1=>{onWarn?.(`Failed video load`,currentSrc,error$1),userOnError?.(error$1),onResolve()};removeEventListeners=()=>{node.removeEventListener(`loadeddata`,onLoadeddata),node.removeEventListener(`error`,onError)},node.addEventListener(`loadeddata`,onLoadeddata,{once:!0}),node.addEventListener(`error`,onError,{once:!0})}else{let currentSrc=isSVGImageElementNode(node)?node.href.baseVal:node.currentSrc||node.src;if(!currentSrc)return onResolve();let onLoad=async()=>{if(isImageElement(node)&&`decode`in node)try{await node.decode()}catch(error$1){onWarn?.(`Failed to decode image, trying to render anyway`,node.dataset.originalSrc||currentSrc,error$1)}onResolve()},onError=error$1=>{onWarn?.(`Failed image load`,node.dataset.originalSrc||currentSrc,error$1),onResolve()};if(isImageElement(node)&&node.complete)return onLoad();removeEventListeners=()=>{node.removeEventListener(`load`,onLoad),node.removeEventListener(`error`,onError)},node.addEventListener(`load`,onLoad,{once:!0}),node.addEventListener(`error`,onError,{once:!0})}})}async function waitUntilLoad(node,options$1){isHTMLElementNode(node)&&(isImageElement(node)||isVideoElement(node)?await loadMedia(node,options$1):await Promise.all([`img`,`video`].flatMap(selectors=>Array.from(node.querySelectorAll(selectors)).map(el=>loadMedia(el,options$1)))))}var uuid=function(){let counter=0,random=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(counter+=1,`u${random()}${counter}`)}();function splitFontFamily(fontFamily){return fontFamily?.split(`,`).map(val=>val.trim().replace(/"|'/g,``).toLowerCase()).filter(Boolean)}var uid=0;function createLogger(debug){let prefix$4=`${PREFIX}[#${uid}]`;return uid++,{time:label=>debug&&console.time(`${prefix$4} ${label}`),timeEnd:label=>debug&&console.timeEnd(`${prefix$4} ${label}`),warn:(...args)=>debug&&consoleWarn(...args)}}function getDefaultRequestInit(bypassingCache){return{cache:bypassingCache?`no-cache`:`force-cache`}}async function orCreateContext(node,options$1){return isContext(node)?node:createContext$2(node,{...options$1,autoDestruct:!0})}async function createContext$2(node,options$1){let{scale:scale$1=1,workerUrl,workerNumber=1}=options$1||{},debug=!!options$1?.debug,features=options$1?.features??!0,ownerDocument=node.ownerDocument??(IN_BROWSER?window.document:void 0),ownerWindow=node.ownerDocument?.defaultView??(IN_BROWSER?window:void 0),requests=new Map,context={width:0,height:0,quality:1,type:`image/png`,scale:scale$1,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug,fetch:{requestInit:getDefaultRequestInit(options$1?.fetch?.bypassingCache),placeholderImage:`data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7`,bypassingCache:!1,...options$1?.fetch},fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber,onCloneEachNode:null,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1,...options$1,__CONTEXT__:!0,log:createLogger(debug),node,ownerDocument,ownerWindow,dpi:scale$1===1?null:96*scale$1,svgStyleElement:createStyleElement(ownerDocument),svgDefsElement:ownerDocument?.createElementNS(XMLNS,`defs`),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...Array.from({length:SUPPORT_WEB_WORKER&&workerUrl&&workerNumber?workerNumber:0})].map(()=>{try{let worker=new Worker(workerUrl);return worker.onmessage=async event=>{let{url,result}=event.data;result?requests.get(url)?.resolve?.(result):requests.get(url)?.reject?.(Error(`Error receiving message from worker: ${url}`))},worker.onmessageerror=event=>{let{url}=event.data;requests.get(url)?.reject?.(Error(`Error receiving message from worker: ${url}`))},worker}catch(error$1){return context.log.warn(`Failed to new Worker`,error$1),null}}).filter(Boolean),fontFamilies:new Map,fontCssTexts:new Map,acceptOfImage:`${[supportWebp(ownerDocument)&&`image/webp`,`image/svg+xml`,`image/*`,`*/*`].filter(Boolean).join(`,`)};q=0.8`,requests,drawImageCount:0,tasks:[],features,isEnable:key$1=>key$1===`restoreScrollPosition`?typeof features==`boolean`?!1:features[key$1]??!1:typeof features==`boolean`?features:features[key$1]??!0,shadowRoots:[]};context.log.time(`wait until load`),await waitUntilLoad(node,{timeout:context.timeout,onWarn:context.log.warn}),context.log.timeEnd(`wait until load`);let{width,height}=resolveBoundingBox(node,context);return context.width=width,context.height=height,context}function createStyleElement(ownerDocument){if(!ownerDocument)return;let style$3=ownerDocument.createElement(`style`),cssText=style$3.ownerDocument.createTextNode(`
.______background-clip--text {
  background-clip: text;
  -webkit-background-clip: text;
}
`);return style$3.appendChild(cssText),style$3}function resolveBoundingBox(node,context){let{width,height}=context;if(isElementNode(node)&&(!width||!height)){let box=node.getBoundingClientRect();width=width||box.width||Number(node.getAttribute(`width`))||0,height=height||box.height||Number(node.getAttribute(`height`))||0}return{width,height}}async function imageToCanvas(image,context){let{log:log$3,timeout:timeout$1,drawImageCount,drawImageInterval}=context;log$3.time(`image to canvas`);let loaded=await loadMedia(image,{timeout:timeout$1,onWarn:context.log.warn}),{canvas,context2d}=createCanvas(image.ownerDocument,context),drawImage=()=>{try{context2d?.drawImage(loaded,0,0,canvas.width,canvas.height)}catch(error$1){context.log.warn(`Failed to drawImage`,error$1)}};if(drawImage(),context.isEnable(`fixSvgXmlDecode`))for(let i$4=0;i$4<drawImageCount;i$4++)await new Promise(resolve=>{setTimeout(()=>{context2d?.clearRect(0,0,canvas.width,canvas.height),drawImage(),resolve()},i$4+drawImageInterval)});return context.drawImageCount=0,log$3.timeEnd(`image to canvas`),canvas}function createCanvas(ownerDocument,context){let{width,height,scale:scale$1,backgroundColor,maximumCanvasSize:max}=context,canvas=ownerDocument.createElement(`canvas`);canvas.width=Math.floor(width*scale$1),canvas.height=Math.floor(height*scale$1),canvas.style.width=`${width}px`,canvas.style.height=`${height}px`,max&&(canvas.width>max||canvas.height>max)&&(canvas.width>max&&canvas.height>max?canvas.width>canvas.height?(canvas.height*=max/canvas.width,canvas.width=max):(canvas.width*=max/canvas.height,canvas.height=max):canvas.width>max?(canvas.height*=max/canvas.width,canvas.width=max):(canvas.width*=max/canvas.height,canvas.height=max));let context2d=canvas.getContext(`2d`);return context2d&&backgroundColor&&(context2d.fillStyle=backgroundColor,context2d.fillRect(0,0,canvas.width,canvas.height)),{canvas,context2d}}function cloneCanvas(canvas,context){if(canvas.ownerDocument)try{let dataURL=canvas.toDataURL();if(dataURL!==`data:,`)return createImage(dataURL,canvas.ownerDocument)}catch(error$1){context.log.warn(`Failed to clone canvas`,error$1)}let cloned=canvas.cloneNode(!1),ctx=canvas.getContext(`2d`),clonedCtx=cloned.getContext(`2d`);try{return ctx&&clonedCtx&&clonedCtx.putImageData(ctx.getImageData(0,0,canvas.width,canvas.height),0,0),cloned}catch(error$1){context.log.warn(`Failed to clone canvas`,error$1)}return cloned}function cloneIframe(iframe,context){try{if(iframe?.contentDocument?.body)return cloneNode(iframe.contentDocument.body,context)}catch(error$1){context.log.warn(`Failed to clone iframe`,error$1)}return iframe.cloneNode(!1)}function cloneImage(image){let cloned=image.cloneNode(!1);return image.currentSrc&&image.currentSrc!==image.src&&(cloned.src=image.currentSrc,cloned.srcset=``),cloned.loading===`lazy`&&(cloned.loading=`eager`),cloned}async function cloneVideo(video,context){if(video.ownerDocument&&!video.currentSrc&&video.poster)return createImage(video.poster,video.ownerDocument);let cloned=video.cloneNode(!1);cloned.crossOrigin=`anonymous`,video.currentSrc&&video.currentSrc!==video.src&&(cloned.src=video.currentSrc);let ownerDocument=cloned.ownerDocument;if(ownerDocument){let canPlay=!0;if(await loadMedia(cloned,{onError:()=>canPlay=!1,onWarn:context.log.warn}),!canPlay)return video.poster?createImage(video.poster,video.ownerDocument):cloned;cloned.currentTime=video.currentTime,await new Promise(resolve=>{cloned.addEventListener(`seeked`,resolve,{once:!0})});let canvas=ownerDocument.createElement(`canvas`);canvas.width=video.offsetWidth,canvas.height=video.offsetHeight;try{let ctx=canvas.getContext(`2d`);ctx&&ctx.drawImage(cloned,0,0,canvas.width,canvas.height)}catch(error$1){return context.log.warn(`Failed to clone video`,error$1),video.poster?createImage(video.poster,video.ownerDocument):cloned}return cloneCanvas(canvas,context)}return cloned}function cloneElement(node,context){return isCanvasElement(node)?cloneCanvas(node,context):isIFrameElement(node)?cloneIframe(node,context):isImageElement(node)?cloneImage(node):isVideoElement(node)?cloneVideo(node,context):node.cloneNode(!1)}function getSandBox(context){let sandbox=context.sandbox;if(!sandbox){let{ownerDocument}=context;try{ownerDocument&&(sandbox=ownerDocument.createElement(`iframe`),sandbox.id=`__SANDBOX__${uuid()}`,sandbox.width=`0`,sandbox.height=`0`,sandbox.style.visibility=`hidden`,sandbox.style.position=`fixed`,ownerDocument.body.appendChild(sandbox),sandbox.srcdoc=`<!DOCTYPE html><meta charset="UTF-8"><title></title><body>`,context.sandbox=sandbox)}catch(error$1){context.log.warn(`Failed to getSandBox`,error$1)}}return sandbox}var ignoredStyles=[`width`,`height`,`-webkit-text-fill-color`],includedAttributes=[`stroke`,`fill`];function getDefaultStyle(node,pseudoElement,context){let{defaultComputedStyles}=context,nodeName=node.nodeName.toLowerCase(),isSvgNode=isSVGElementNode(node)&&nodeName!==`svg`,attributes=isSvgNode?includedAttributes.map(name=>[name,node.getAttribute(name)]).filter(([,value])=>value!==null):[],key$1=[isSvgNode&&`svg`,nodeName,attributes.map((name,value)=>`${name}=${value}`).join(`,`),pseudoElement].filter(Boolean).join(`:`);if(defaultComputedStyles.has(key$1))return defaultComputedStyles.get(key$1);let sandboxWindow=getSandBox(context)?.contentWindow;if(!sandboxWindow)return new Map;let sandboxDocument=sandboxWindow?.document,root$3,el;isSvgNode?(root$3=sandboxDocument.createElementNS(XMLNS,`svg`),el=root$3.ownerDocument.createElementNS(root$3.namespaceURI,nodeName),attributes.forEach(([name,value])=>{el.setAttributeNS(null,name,value)}),root$3.appendChild(el)):root$3=el=sandboxDocument.createElement(nodeName),el.textContent=` `,sandboxDocument.body.appendChild(root$3);let computedStyle=sandboxWindow.getComputedStyle(el,pseudoElement),styles$1=new Map;for(let len=computedStyle.length,i$4=0;i$4<len;i$4++){let name=computedStyle.item(i$4);ignoredStyles.includes(name)||styles$1.set(name,computedStyle.getPropertyValue(name))}return sandboxDocument.body.removeChild(root$3),defaultComputedStyles.set(key$1,styles$1),styles$1}function getDiffStyle(style$3,defaultStyle,includeStyleProperties){let diffStyle=new Map,prefixs=[],prefixTree=new Map;if(includeStyleProperties)for(let name of includeStyleProperties)applyTo(name);else for(let len=style$3.length,i$4=0;i$4<len;i$4++)applyTo(style$3.item(i$4));for(let len=prefixs.length,i$4=0;i$4<len;i$4++)prefixTree.get(prefixs[i$4])?.forEach((value,name)=>diffStyle.set(name,value));function applyTo(name){let value=style$3.getPropertyValue(name),priority=style$3.getPropertyPriority(name),subIndex=name.lastIndexOf(`-`),prefix$4=subIndex>-1?name.substring(0,subIndex):void 0;if(prefix$4){let map=prefixTree.get(prefix$4);map||(map=new Map,prefixTree.set(prefix$4,map)),map.set(name,[value,priority])}defaultStyle.get(name)===value&&!priority||(prefix$4?prefixs.push(prefix$4):diffStyle.set(name,[value,priority]))}return diffStyle}function copyCssStyles(node,cloned,isRoot,context){let{ownerWindow,includeStyleProperties,currentParentNodeStyle}=context,clonedStyle=cloned.style,computedStyle=ownerWindow.getComputedStyle(node),defaultStyle=getDefaultStyle(node,null,context);currentParentNodeStyle?.forEach((_$1,key$1)=>{defaultStyle.delete(key$1)});let style$3=getDiffStyle(computedStyle,defaultStyle,includeStyleProperties);style$3.delete(`transition-property`),style$3.delete(`all`),style$3.delete(`d`),style$3.delete(`content`),isRoot&&(style$3.delete(`margin-top`),style$3.delete(`margin-right`),style$3.delete(`margin-bottom`),style$3.delete(`margin-left`),style$3.delete(`margin-block-start`),style$3.delete(`margin-block-end`),style$3.delete(`margin-inline-start`),style$3.delete(`margin-inline-end`),style$3.set(`box-sizing`,[`border-box`,``])),style$3.get(`background-clip`)?.[0]===`text`&&cloned.classList.add(`______background-clip--text`),IN_CHROME&&(style$3.has(`font-kerning`)||style$3.set(`font-kerning`,[`normal`,``]),(style$3.get(`overflow-x`)?.[0]===`hidden`||style$3.get(`overflow-y`)?.[0]===`hidden`)&&style$3.get(`text-overflow`)?.[0]===`ellipsis`&&node.scrollWidth===node.clientWidth&&style$3.set(`text-overflow`,[`clip`,``]));for(let len=clonedStyle.length,i$4=0;i$4<len;i$4++)clonedStyle.removeProperty(clonedStyle.item(i$4));return style$3.forEach(([value,priority],name)=>{clonedStyle.setProperty(name,value,priority)}),style$3}function copyInputValue(node,cloned){(isTextareaElement(node)||isInputElement(node)||isSelectElement(node))&&cloned.setAttribute(`value`,node.value)}var pseudoClasses=[`::before`,`::after`],scrollbarPseudoClasses=[`::-webkit-scrollbar`,`::-webkit-scrollbar-button`,`::-webkit-scrollbar-thumb`,`::-webkit-scrollbar-track`,`::-webkit-scrollbar-track-piece`,`::-webkit-scrollbar-corner`,`::-webkit-resizer`];function copyPseudoClass(node,cloned,copyScrollbar,context,addWordToFontFamilies){let{ownerWindow,svgStyleElement,svgStyles,currentNodeStyle}=context;if(!svgStyleElement||!ownerWindow)return;function copyBy(pseudoClass){let computedStyle=ownerWindow.getComputedStyle(node,pseudoClass),content=computedStyle.getPropertyValue(`content`);if(!content||content===`none`)return;addWordToFontFamilies?.(content),content=content.replace(/(')|(")|(counter\(.+\))/g,``);let klasses=[uuid()],defaultStyle=getDefaultStyle(node,pseudoClass,context);currentNodeStyle?.forEach((_$1,key$1)=>{defaultStyle.delete(key$1)});let style$3=getDiffStyle(computedStyle,defaultStyle,context.includeStyleProperties);style$3.delete(`content`),style$3.delete(`-webkit-locale`),style$3.get(`background-clip`)?.[0]===`text`&&cloned.classList.add(`______background-clip--text`);let cloneStyle=[`content: '${content}';`];if(style$3.forEach(([value,priority],name)=>{cloneStyle.push(`${name}: ${value}${priority?` !important`:``};`)}),cloneStyle.length===1)return;try{cloned.className=[cloned.className,...klasses].join(` `)}catch(err){context.log.warn(`Failed to copyPseudoClass`,err);return}let cssText=cloneStyle.join(`
  `),allClasses=svgStyles.get(cssText);allClasses||(allClasses=[],svgStyles.set(cssText,allClasses)),allClasses.push(`.${klasses[0]}${pseudoClass}`)}pseudoClasses.forEach(copyBy),copyScrollbar&&scrollbarPseudoClasses.forEach(copyBy)}var excludeParentNodes=new Set([`symbol`]);async function appendChildNode(node,cloned,child,context,addWordToFontFamilies){if(isElementNode(child)&&(isStyleElement(child)||isScriptElement(child))||context.filter&&!context.filter(child))return;excludeParentNodes.has(cloned.nodeName)||excludeParentNodes.has(child.nodeName)?context.currentParentNodeStyle=void 0:context.currentParentNodeStyle=context.currentNodeStyle;let childCloned=await cloneNode(child,context,!1,addWordToFontFamilies);context.isEnable(`restoreScrollPosition`)&&restoreScrollPosition(node,childCloned),cloned.appendChild(childCloned)}async function cloneChildNodes(node,cloned,context,addWordToFontFamilies){let firstChild=node.firstChild;isElementNode(node)&&node.shadowRoot&&(firstChild=node.shadowRoot?.firstChild,context.shadowRoots.push(node.shadowRoot));for(let child=firstChild;child;child=child.nextSibling)if(!isCommentNode(child))if(isElementNode(child)&&isSlotElement(child)&&typeof child.assignedNodes==`function`){let nodes=child.assignedNodes();for(let i$4=0;i$4<nodes.length;i$4++)await appendChildNode(node,cloned,nodes[i$4],context,addWordToFontFamilies)}else await appendChildNode(node,cloned,child,context,addWordToFontFamilies)}function restoreScrollPosition(node,chlidCloned){if(!isHTMLElementNode(node)||!isHTMLElementNode(chlidCloned))return;let{scrollTop,scrollLeft}=node;if(!scrollTop&&!scrollLeft)return;let{transform:transform$1}=chlidCloned.style,matrix=new DOMMatrix(transform$1),{a:a$4,b:b$3,c:c$3,d:d$3}=matrix;matrix.a=1,matrix.b=0,matrix.c=0,matrix.d=1,matrix.translateSelf(-scrollLeft,-scrollTop),matrix.a=a$4,matrix.b=b$3,matrix.c=c$3,matrix.d=d$3,chlidCloned.style.transform=matrix.toString()}function applyCssStyleWithOptions(cloned,context){let{backgroundColor,width,height,style:styles$1}=context,clonedStyle=cloned.style;if(backgroundColor&&clonedStyle.setProperty(`background-color`,backgroundColor,`important`),width&&clonedStyle.setProperty(`width`,`${width}px`,`important`),height&&clonedStyle.setProperty(`height`,`${height}px`,`important`),styles$1)for(let name in styles$1)clonedStyle[name]=styles$1[name]}var NORMAL_ATTRIBUTE_RE=/^[\w-:]+$/;async function cloneNode(node,context,isRoot=!1,addWordToFontFamilies){let{ownerDocument,ownerWindow,fontFamilies:fontFamilies$1,onCloneEachNode}=context;if(ownerDocument&&isTextNode(node))return addWordToFontFamilies&&/\S/.test(node.data)&&addWordToFontFamilies(node.data),ownerDocument.createTextNode(node.data);if(ownerDocument&&ownerWindow&&isElementNode(node)&&(isHTMLElementNode(node)||isSVGElementNode(node))){let cloned2=await cloneElement(node,context);if(context.isEnable(`removeAbnormalAttributes`)){let names=cloned2.getAttributeNames();for(let len=names.length,i$4=0;i$4<len;i$4++){let name=names[i$4];NORMAL_ATTRIBUTE_RE.test(name)||cloned2.removeAttribute(name)}}let style$3=context.currentNodeStyle=copyCssStyles(node,cloned2,isRoot,context);isRoot&&applyCssStyleWithOptions(cloned2,context);let copyScrollbar=!1;if(context.isEnable(`copyScrollbar`)){let overflow=[style$3.get(`overflow-x`)?.[0],style$3.get(`overflow-y`)?.[0]];copyScrollbar=overflow.includes(`scroll`)||(overflow.includes(`auto`)||overflow.includes(`overlay`))&&(node.scrollHeight>node.clientHeight||node.scrollWidth>node.clientWidth)}let textTransform=style$3.get(`text-transform`)?.[0],families=splitFontFamily(style$3.get(`font-family`)?.[0]),addWordToFontFamilies2=families?word=>{textTransform===`uppercase`?word=word.toUpperCase():textTransform===`lowercase`?word=word.toLowerCase():textTransform===`capitalize`&&(word=word[0].toUpperCase()+word.substring(1)),families.forEach(family=>{let fontFamily=fontFamilies$1.get(family);fontFamily||fontFamilies$1.set(family,fontFamily=new Set),word.split(``).forEach(text=>fontFamily.add(text))})}:void 0;return copyPseudoClass(node,cloned2,copyScrollbar,context,addWordToFontFamilies2),copyInputValue(node,cloned2),isVideoElement(node)||await cloneChildNodes(node,cloned2,context,addWordToFontFamilies2),await onCloneEachNode?.(cloned2),cloned2}let cloned=node.cloneNode(!1);return await cloneChildNodes(node,cloned,context),await onCloneEachNode?.(cloned),cloned}function destroyContext(context){if(context.ownerDocument=void 0,context.ownerWindow=void 0,context.svgStyleElement=void 0,context.svgDefsElement=void 0,context.svgStyles.clear(),context.defaultComputedStyles.clear(),context.sandbox){try{context.sandbox.remove()}catch(err){context.log.warn(`Failed to destroyContext`,err)}context.sandbox=void 0}context.workers=[],context.fontFamilies.clear(),context.fontCssTexts.clear(),context.requests.clear(),context.tasks=[],context.shadowRoots=[]}function baseFetch(options$1){let{url,timeout:timeout$1,responseType,...requestInit}=options$1,controller=new AbortController,timer$1=timeout$1?setTimeout(()=>controller.abort(),timeout$1):void 0;return fetch(url,{signal:controller.signal,...requestInit}).then(response=>{if(!response.ok)throw Error(`Failed fetch, not 2xx response`,{cause:response});switch(responseType){case`arrayBuffer`:return response.arrayBuffer();case`dataUrl`:return response.blob().then(blobToDataUrl);case`text`:default:return response.text()}}).finally(()=>clearTimeout(timer$1))}function contextFetch(context,options$1){let{url:rawUrl,requestType=`text`,responseType=`text`,imageDom}=options$1,url=rawUrl,{timeout:timeout$1,acceptOfImage,requests,fetchFn,fetch:{requestInit,bypassingCache,placeholderImage},font,workers,fontFamilies:fontFamilies$1}=context;requestType===`image`&&(IN_SAFARI||IN_FIREFOX)&&context.drawImageCount++;let request=requests.get(rawUrl);if(!request){bypassingCache&&bypassingCache instanceof RegExp&&bypassingCache.test(url)&&(url+=(/\?/.test(url)?`&`:`?`)+new Date().getTime());let canFontMinify=requestType.startsWith(`font`)&&font&&font.minify,fontTexts=new Set;canFontMinify&&requestType.split(`;`)[1].split(`,`).forEach(family=>{fontFamilies$1.has(family)&&fontFamilies$1.get(family).forEach(text=>fontTexts.add(text))});let needFontMinify=canFontMinify&&fontTexts.size,baseFetchOptions={url,timeout:timeout$1,responseType:needFontMinify?`arrayBuffer`:responseType,headers:requestType===`image`?{accept:acceptOfImage}:void 0,...requestInit};request={type:requestType,resolve:void 0,reject:void 0,response:null},request.response=(async()=>{if(fetchFn&&requestType===`image`){let result=await fetchFn(rawUrl);if(result)return result}return!IN_SAFARI&&rawUrl.startsWith(`http`)&&workers.length?new Promise((resolve,reject)=>{workers[requests.size&workers.length-1].postMessage({rawUrl,...baseFetchOptions}),request.resolve=resolve,request.reject=reject}):baseFetch(baseFetchOptions)})().catch(error$1=>{if(requests.delete(rawUrl),requestType===`image`&&placeholderImage)return context.log.warn(`Failed to fetch image base64, trying to use placeholder image`,url),typeof placeholderImage==`string`?placeholderImage:placeholderImage(imageDom);throw error$1}),requests.set(rawUrl,request)}return request.response}async function replaceCssUrlToDataUrl(cssText,baseUrl,context,isImage){if(!hasCssUrl(cssText))return cssText;for(let[rawUrl,url]of parseCssUrls(cssText,baseUrl))try{let dataUrl=await contextFetch(context,{url,requestType:isImage?`image`:`text`,responseType:`dataUrl`});cssText=cssText.replace(toRE(rawUrl),`$1${dataUrl}$3`)}catch(error$1){context.log.warn(`Failed to fetch css data url`,rawUrl,error$1)}return cssText}function hasCssUrl(cssText){return/url\((['"]?)([^'"]+?)\1\)/.test(cssText)}var URL_RE=/url\((['"]?)([^'"]+?)\1\)/g;function parseCssUrls(cssText,baseUrl){let result=[];return cssText.replace(URL_RE,(raw,quotation,url)=>(result.push([url,resolveUrl(url,baseUrl)]),raw)),result.filter(([url])=>!isDataUrl(url))}function toRE(url){let escaped=url.replace(/([.*+?^${}()|\[\]\/\\])/g,`\\$1`);return RegExp(`(url\\(['"]?)(${escaped})(['"]?\\))`,`g`)}var properties=[`background-image`,`border-image-source`,`-webkit-border-image`,`-webkit-mask-image`,`list-style-image`];function embedCssStyleImage(style$3,context){return properties.map(property=>{let value=style$3.getPropertyValue(property);return!value||value===`none`?null:((IN_SAFARI||IN_FIREFOX)&&context.drawImageCount++,replaceCssUrlToDataUrl(value,null,context,!0).then(newValue=>{!newValue||value===newValue||style$3.setProperty(property,newValue,style$3.getPropertyPriority(property))}))}).filter(Boolean)}function embedImageElement(cloned,context){if(isImageElement(cloned)){let originalSrc=cloned.currentSrc||cloned.src;if(!isDataUrl(originalSrc))return[contextFetch(context,{url:originalSrc,imageDom:cloned,requestType:`image`,responseType:`dataUrl`}).then(url=>{url&&(cloned.srcset=``,cloned.dataset.originalSrc=originalSrc,cloned.src=url||``)})];(IN_SAFARI||IN_FIREFOX)&&context.drawImageCount++}else if(isSVGElementNode(cloned)&&!isDataUrl(cloned.href.baseVal)){let originalSrc=cloned.href.baseVal;return[contextFetch(context,{url:originalSrc,imageDom:cloned,requestType:`image`,responseType:`dataUrl`}).then(url=>{url&&(cloned.dataset.originalSrc=originalSrc,cloned.href.baseVal=url||``)})]}return[]}function embedSvgUse(cloned,context){let{ownerDocument,svgDefsElement}=context,href=cloned.getAttribute(`href`)??cloned.getAttribute(`xlink:href`);if(!href)return[];let[svgUrl,id$3]=href.split(`#`);if(id$3){let query=`#${id$3}`,definition=context.shadowRoots.reduce((res,root$3)=>res??root$3.querySelector(`svg ${query}`),ownerDocument?.querySelector(`svg ${query}`));if(svgUrl&&cloned.setAttribute(`href`,query),svgDefsElement?.querySelector(query))return[];if(definition)return svgDefsElement?.appendChild(definition.cloneNode(!0)),[];if(svgUrl)return[contextFetch(context,{url:svgUrl,responseType:`text`}).then(svgData=>{svgDefsElement?.insertAdjacentHTML(`beforeend`,svgData)})]}return[]}function embedNode(cloned,context){let{tasks}=context;isElementNode(cloned)&&((isImageElement(cloned)||isSVGImageElementNode(cloned))&&tasks.push(...embedImageElement(cloned,context)),isSVGUseElementNode(cloned)&&tasks.push(...embedSvgUse(cloned,context))),isHTMLElementNode(cloned)&&tasks.push(...embedCssStyleImage(cloned.style,context)),cloned.childNodes.forEach(child=>{embedNode(child,context)})}async function embedWebFont(clone,context){let{ownerDocument,svgStyleElement,fontFamilies:fontFamilies$1,fontCssTexts,tasks,font}=context;if(!(!ownerDocument||!svgStyleElement||!fontFamilies$1.size))if(font&&font.cssText){let cssText=filterPreferredFormat(font.cssText,context);svgStyleElement.appendChild(ownerDocument.createTextNode(`${cssText}
`))}else{let styleSheets=Array.from(ownerDocument.styleSheets).filter(styleSheet=>{try{return`cssRules`in styleSheet&&!!styleSheet.cssRules.length}catch(error$1){return context.log.warn(`Error while reading CSS rules from ${styleSheet.href}`,error$1),!1}});await Promise.all(styleSheets.flatMap(styleSheet=>Array.from(styleSheet.cssRules).map(async(cssRule,index$2)=>{if(isCSSImportRule(cssRule)){let importIndex=index$2+1,baseUrl=cssRule.href,cssText=``;try{cssText=await contextFetch(context,{url:baseUrl,requestType:`text`,responseType:`text`})}catch(error$1){context.log.warn(`Error fetch remote css import from ${baseUrl}`,error$1)}let replacedCssText=cssText.replace(URL_RE,(raw,quotation,url)=>raw.replace(url,resolveUrl(url,baseUrl)));for(let rule of parseCss(replacedCssText))try{styleSheet.insertRule(rule,rule.startsWith(`@import`)?importIndex+=1:styleSheet.cssRules.length)}catch(error$1){context.log.warn(`Error inserting rule from remote css import`,{rule,error:error$1})}}}))),styleSheets.flatMap(styleSheet=>Array.from(styleSheet.cssRules)).filter(cssRule=>isCssFontFaceRule(cssRule)&&hasCssUrl(cssRule.style.getPropertyValue(`src`))&&splitFontFamily(cssRule.style.getPropertyValue(`font-family`))?.some(val=>fontFamilies$1.has(val))).forEach(value=>{let rule=value,cssText=fontCssTexts.get(rule.cssText);cssText?svgStyleElement.appendChild(ownerDocument.createTextNode(`${cssText}
`)):tasks.push(replaceCssUrlToDataUrl(rule.cssText,rule.parentStyleSheet?rule.parentStyleSheet.href:null,context).then(cssText2=>{cssText2=filterPreferredFormat(cssText2,context),fontCssTexts.set(rule.cssText,cssText2),svgStyleElement.appendChild(ownerDocument.createTextNode(`${cssText2}
`))}))})}}var COMMENTS_RE=/(\/\*[\s\S]*?\*\/)/g,KEYFRAMES_RE=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;function parseCss(source){if(source==null)return[];let result=[],cssText=source.replace(COMMENTS_RE,``);for(;;){let matches=KEYFRAMES_RE.exec(cssText);if(!matches)break;result.push(matches[0])}cssText=cssText.replace(KEYFRAMES_RE,``);let IMPORT_RE=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,UNIFIED_RE=RegExp(`((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})`,`gi`);for(;;){let matches=IMPORT_RE.exec(cssText);if(matches)UNIFIED_RE.lastIndex=IMPORT_RE.lastIndex;else if(matches=UNIFIED_RE.exec(cssText),matches)IMPORT_RE.lastIndex=UNIFIED_RE.lastIndex;else break;result.push(matches[0])}return result}var URL_WITH_FORMAT_RE=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,FONT_SRC_RE=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function filterPreferredFormat(str,context){let{font}=context,preferredFormat=font?font?.preferredFormat:void 0;return preferredFormat?str.replace(FONT_SRC_RE,match=>{for(;;){let[src,,format]=URL_WITH_FORMAT_RE.exec(match)||[];if(!format)return``;if(format===preferredFormat)return`src: ${src};`}}):str}async function domToForeignObjectSvg(node,options$1){let context=await orCreateContext(node,options$1);if(isElementNode(context.node)&&isSVGElementNode(context.node))return context.node;let{ownerDocument,log:log$3,tasks,svgStyleElement,svgDefsElement,svgStyles,font,progress:progress$1,autoDestruct,onCloneNode,onEmbedNode,onCreateForeignObjectSvg}=context;log$3.time(`clone node`);let clone=await cloneNode(context.node,context,!0);if(svgStyleElement&&ownerDocument){let allCssText=``;svgStyles.forEach((klasses,cssText)=>{allCssText+=`${klasses.join(`,
`)} {
  ${cssText}
}
`}),svgStyleElement.appendChild(ownerDocument.createTextNode(allCssText))}log$3.timeEnd(`clone node`),await onCloneNode?.(clone),font!==!1&&isElementNode(clone)&&(log$3.time(`embed web font`),await embedWebFont(clone,context),log$3.timeEnd(`embed web font`)),log$3.time(`embed node`),embedNode(clone,context);let count=tasks.length,current=0,runTask=async()=>{for(;;){let task=tasks.pop();if(!task)break;try{await task}catch(error$1){context.log.warn(`Failed to run task`,error$1)}progress$1?.(++current,count)}};progress$1?.(current,count),await Promise.all([...Array.from({length:4})].map(runTask)),log$3.timeEnd(`embed node`),await onEmbedNode?.(clone);let svg=createForeignObjectSvg(clone,context);return svgDefsElement&&svg.insertBefore(svgDefsElement,svg.children[0]),svgStyleElement&&svg.insertBefore(svgStyleElement,svg.children[0]),autoDestruct&&destroyContext(context),await onCreateForeignObjectSvg?.(svg),svg}function createForeignObjectSvg(clone,context){let{width,height}=context,svg=createSvg(width,height,clone.ownerDocument),foreignObject=svg.ownerDocument.createElementNS(svg.namespaceURI,`foreignObject`);return foreignObject.setAttributeNS(null,`x`,`0%`),foreignObject.setAttributeNS(null,`y`,`0%`),foreignObject.setAttributeNS(null,`width`,`100%`),foreignObject.setAttributeNS(null,`height`,`100%`),foreignObject.append(clone),svg.appendChild(foreignObject),svg}async function domToCanvas(node,options$1){let context=await orCreateContext(node,options$1),svg=await domToForeignObjectSvg(context),dataUrl=svgToDataUrl(svg,context.isEnable(`removeControlCharacter`));return context.autoDestruct||(context.svgStyleElement=createStyleElement(context.ownerDocument),context.svgDefsElement=context.ownerDocument?.createElementNS(XMLNS,`defs`),context.svgStyles.clear()),await imageToCanvas(createImage(dataUrl,svg.ownerDocument),context)}async function domToDataUrl(node,options$1){let context=await orCreateContext(node,options$1),{log:log$3,quality,type,dpi}=context,canvas=await domToCanvas(context);log$3.time(`canvas to data url`);let dataUrl=canvas.toDataURL(type,quality);if([`image/png`,`image/jpeg`].includes(type)&&dpi&&SUPPORT_ATOB&&SUPPORT_BTOA){let[format,body]=dataUrl.split(`,`),headerLength=0,overwritepHYs=!1;if(type===`image/png`){let b64Index=detectPhysChunkFromDataUrl(body);b64Index>=0?(headerLength=Math.ceil((b64Index+28)/3)*4,overwritepHYs=!0):headerLength=33/3*4}else type===`image/jpeg`&&(headerLength=18/3*4);let stringHeader=body.substring(0,headerLength),restOfData=body.substring(headerLength),headerBytes=window.atob(stringHeader),uint8Array=new Uint8Array(headerBytes.length);for(let i$4=0;i$4<uint8Array.length;i$4++)uint8Array[i$4]=headerBytes.charCodeAt(i$4);let finalArray=type===`image/png`?changePngDpi(uint8Array,dpi,overwritepHYs):changeJpegDpi(uint8Array,dpi);dataUrl=[format,`,`,window.btoa(String.fromCharCode(...finalArray)),restOfData].join(``)}return log$3.timeEnd(`canvas to data url`),dataUrl}async function domToPng(node,options$1){return domToDataUrl(await orCreateContext(node,{...options$1,type:`image/png`}))}var WidgetBuilder=({onExit,initialData,onSave})=>{let[currentSizeKey,setCurrentSizeKey]=(0,import_react.useState)(`2x2`),[selectedBlockId,setSelectedBlockId]=(0,import_react.useState)(null),[scenes,setScenes]=(0,import_react.useState)([{id:`scene-1`,decorations:[],blocks:[],duration:1}]),[currentSceneIndex,setCurrentSceneIndex]=(0,import_react.useState)(0),decorations=scenes[currentSceneIndex]?.decorations||[],blocks=scenes[currentSceneIndex]?.blocks||[],setDecorations=newDecorations=>{setScenes(prev=>{let next=[...prev],currentScene={...next[currentSceneIndex]};return typeof newDecorations==`function`?currentScene.decorations=newDecorations(currentScene.decorations):currentScene.decorations=newDecorations,next[currentSceneIndex]=currentScene,next})},setBlocks=newBlocks=>{setScenes(prev=>{let next=[...prev],currentScene={...next[currentSceneIndex]};return typeof newBlocks==`function`?currentScene.blocks=newBlocks(currentScene.blocks||[]):currentScene.blocks=newBlocks,next[currentSceneIndex]=currentScene,next})},[selectedDecorationId,setSelectedDecorationId]=(0,import_react.useState)(null),handleSelectDecoration=id$3=>{setSelectedDecorationId(id$3),id$3&&setSelectedBlockId(null)};(0,import_react.useEffect)(()=>{!selectedBlockId&&!selectedDecorationId&&setIsRightOpen(!1)},[selectedBlockId,selectedDecorationId]);let handleOpenSettings=()=>{setIsRightOpen(!0)};(0,import_react.useEffect)(()=>{let handleKeyDown=e$4=>{if(e$4.key===`Backspace`||e$4.key===`Delete`){let isWriting=e$4.target.tagName.match(/INPUT|TEXTAREA|SELECT|DIV/i)&&e$4.target.isContentEditable,isInput=e$4.target.tagName.match(/INPUT|TEXTAREA|SELECT/i);if(isWriting||isInput)return;selectedBlockId?removeBlock(selectedBlockId):selectedDecorationId&&removeDecoration(selectedDecorationId)}};return window.addEventListener(`keydown`,handleKeyDown),()=>window.removeEventListener(`keydown`,handleKeyDown)},[selectedBlockId,selectedDecorationId,blocks,decorations]),(0,import_react.useEffect)(()=>{if(initialData)if(initialData.type===`custom-block`&&initialData.content?.children)initialData.content.scenes?(setScenes(initialData.content.scenes),setCurrentSceneIndex(0)):setScenes([{id:`scene-1`,decorations:initialData.content.decorations||[],blocks:initialData.content.children||initialData.content.blocks||[],duration:1}]);else{let loadedBlock={id:initialData.id||initialData._id||`blk - ${Date.now()} `,type:initialData.type,content:initialData.content||{},styles:initialData.styles||{}};setScenes([{id:`scene-1`,decorations:[],blocks:[loadedBlock],duration:1}]),setSelectedBlockId(loadedBlock.id)}},[initialData]);let[activeContainer,setActiveContainer]=(0,import_react.useState)(null),currentSize=WIDGET_SIZES[currentSizeKey],findBlockRecursive=(items,id$3)=>{for(let item of items){if(item.id===id$3)return item;if(item.type===`columns`&&item.content.layout)for(let col of item.content.layout){let found=findBlockRecursive(col,id$3);if(found)return found}}},getListFromId=(droppableId,currentBlocks)=>{if(droppableId===`ROOT`)return currentBlocks;if(droppableId.startsWith(`COL-`)){let splitIndex=droppableId.lastIndexOf(`-`),blockId=droppableId.substring(4,splitIndex),colIndex=parseInt(droppableId.substring(splitIndex+1)),parentBlock=findBlockRecursive(currentBlocks,blockId);if(parentBlock&&parentBlock.type===`columns`&&parentBlock.content.layout)return parentBlock.content.layout[colIndex]}},selectedBlock=selectedBlockId?findBlockRecursive(blocks,selectedBlockId):void 0,calculateCapacity=items=>items.reduce((sum,block)=>{let cost=BLOCK_COSTS[block.type]||1;return block.type===`columns`&&block.content.layout&&block.content.layout.forEach(col=>{cost+=calculateCapacity(col)}),sum+cost},0),usedCapacity=calculateCapacity(blocks),remainingCapacity=currentSize.capacity-usedCapacity,addBlock=type=>{if((BLOCK_COSTS[type]||1)>remainingCapacity){alert(` !`);return}let newBlock={id:`blk - ${Date.now()} -${Math.random().toString(36).substr(2,5)} `,type,content:getDefaultContent(type),styles:{color:`#1e293b`,align:`left`,fontSize:14}};setBlocks(activeContainer?prev=>{let copy=JSON.parse(JSON.stringify(prev)),targetList=getListFromId(`COL - ${activeContainer.blockId} -${activeContainer.colIndex} `,copy);return targetList?targetList.unshift(newBlock):copy.unshift(newBlock),copy}:[newBlock,...blocks]),setSelectedBlockId(newBlock.id)},removeBlock=id$3=>{let filterRecursive=items=>items.filter(item=>item.id!==id$3).map(item=>(item.type===`columns`&&(item.content.layout=item.content.layout.map(col=>filterRecursive(col))),item));setBlocks(prev=>filterRecursive(prev)),selectedBlockId===id$3&&setSelectedBlockId(null)},updateBlock=(id$3,updates)=>{let updateRecursive=items=>items.map(item=>item.id===id$3?`color`in updates||`bgColor`in updates||`fontSize`in updates||`align`in updates||`bold`in updates||`italic`in updates||`underline`in updates||`strikethrough`in updates?{...item,styles:{...item.styles,...updates}}:{...item,...updates}:(item.type===`columns`&&(item.content.layout=item.content.layout.map(col=>updateRecursive(col))),item));setBlocks(prev=>updateRecursive(prev))},addDecoration=type=>{let newDecoration={id:`deco-${Date.now()}`,type,x:50,y:50,w:100,h:100,color:`#a5b4fc`,opacity:.5,zIndex:0};setDecorations([...decorations,newDecoration]),handleSelectDecoration(newDecoration.id)},updateDecoration=(id$3,updates)=>{setDecorations(prev=>prev.map(d$3=>d$3.id===id$3?{...d$3,...updates}:d$3))},removeDecoration=id$3=>{setDecorations(prev=>prev.filter(d$3=>d$3.id!==id$3)),selectedDecorationId===id$3&&setSelectedDecorationId(null)},getContainerIdFromDroppable=over=>over?.data?.current?.containerId??(typeof over?.id==`string`?over.id:void 0),handleDndKitDragOver=event=>{let{active,over}=event;if(!over)return;let activeId=active.id,fromContainer=active.data.current?.containerId,toContainer=getContainerIdFromDroppable(over);!fromContainer||!toContainer||fromContainer!==toContainer&&setBlocks(prev=>{let draft=JSON.parse(JSON.stringify(prev)),sourceList=getListFromId(fromContainer,draft),destList=getListFromId(toContainer,draft);if(!sourceList||!destList)return prev;let oldIndex=sourceList.findIndex(b$3=>b$3.id===activeId);if(oldIndex===-1)return prev;let[moved]=sourceList.splice(oldIndex,1);return destList.push(moved),active.data.current={...active.data.current??{},containerId:toContainer},draft})},handleDndKitDragEnd=event=>{let{active,over}=event;if(!over)return;let activeId=active.id,fromContainer=active.data.current?.containerId,toContainer=getContainerIdFromDroppable(over);!fromContainer||!toContainer||fromContainer===toContainer&&setBlocks(prev=>{let draft=JSON.parse(JSON.stringify(prev)),list=getListFromId(fromContainer,draft);if(!list)return prev;let oldIndex=list.findIndex(b$3=>b$3.id===activeId);if(oldIndex===-1)return prev;let overId=over.id,newIndex=list.findIndex(b$3=>b$3.id===overId);newIndex===-1&&(newIndex=list.length-1);let[moved]=list.splice(oldIndex,1);return list.splice(newIndex,0,moved),draft})},handleSaveToCloud=async()=>{if(blocks.length===0&&decorations.length===0){alert(`    .    .`);return}let blockToSave,cleanScenes=scenes.map(scene=>({...scene,decorations:scene.decorations.map(d$3=>{let safeType=d$3.type;return typeof safeType==`object`&&safeType.type&&(safeType=safeType.type),{...d$3,type:safeType}})}));blockToSave={id:`group-${Date.now()}`,type:`custom-block`,content:{children:blocks,scenes:cleanScenes},decorations:decorations.map(d$3=>{let safeType=d$3.type;return typeof safeType==`object`&&safeType.type&&(safeType=safeType.type),{...d$3,type:safeType}}),styles:{}};let defaultName=initialData?.name||(blocks.length>1?`Composite Widget`:getLabelByType(blockToSave.type)),name=prompt(`    :`,defaultName);if(name)try{let thumbnailUrl,canvasElement=document.getElementById(`widget-canvas-container`);if(canvasElement)try{let dataUrl=await domToPng(canvasElement,{scale:2,backgroundColor:`#ffffff`}),blob=await(await fetch(dataUrl)).blob();thumbnailUrl=await uploadImageToSupabase(new File([blob],`thumb-${Date.now()}.png`,{type:`image/png`}))||void 0}catch(imgError){console.warn(`  :`,imgError)}let targetId=initialData?.id||initialData?._id,result;targetId?(result=await updateWidget(targetId,{...blockToSave,thumbnailUrl},name),alert(`'${name}'  ! `)):(result=await saveWidget({...blockToSave,thumbnailUrl},name),alert(`'${name}'   ! `)),onSave&&result&&onSave(result)}catch(e$4){console.error(e$4),alert(` .`)}},handleDeleteWidget=async()=>{if(!(!initialData||!initialData.id&&!initialData._id)&&confirm(`   ?     .`))try{await deleteWidget(initialData.id||initialData._id),alert(` .`),onExit()}catch(e$4){console.error(e$4),alert(` `)}},[isLeftOpen,setIsLeftOpen]=(0,import_react.useState)(!0),[isRightOpen,setIsRightOpen]=(0,import_react.useState)(!1),[activeTab,setActiveTab]=(0,import_react.useState)(`text`),handleRemoveBlock=removeBlock,handleUpdateBlock=updateBlock;return(0,import_jsx_runtime.jsxs)(`div`,{className:`h-screen bg-[var(--bg-primary)] flex flex-col text-[var(--text-primary)] font-sans transition-colors`,children:[(0,import_jsx_runtime.jsxs)(`header`,{className:`h-16 border-b border-[var(--border-color)] bg-[var(--bg-card)] flex items-center justify-between px-[3%] w-full shadow-md z-20 gap-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 md:gap-4 flex-shrink-0`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onExit,className:`p-2 hover:bg-[var(--bg-card-secondary)] rounded-full transition text-[var(--text-secondary)]`,children:(0,import_jsx_runtime.jsx)(ArrowLeft,{size:20,className:`max-md:w-5 max-md:h-5`})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-lg font-bold max-md:text-sm whitespace-nowrap`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3 overflow-x-auto scrollbar-hide flex-shrink min-w-0`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex bg-[var(--bg-card-secondary)] p-1 rounded-lg gap-1`,children:[`1x1`,`2x2`,`3x3`,`4x4`].map(key$1=>{let val=WIDGET_SIZES[key$1];return val?(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setCurrentSizeKey(key$1),className:`px-3 py-1 text-xs font-bold rounded transition-colors whitespace-nowrap
                                        max-md:px-2 max-md:text-[10px] max-md:py-1
                                        ${currentSizeKey===key$1?`bg-indigo-600 text-white`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`} 
                                    `,children:val.label},key$1):null})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex bg-[var(--bg-card-secondary)]/50 p-1 rounded-lg border border-dashed border-[var(--border-color)] gap-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-[var(--text-secondary)] self-center px-1 font-bold`,children:`ETC`}),[`1x2`,`2x1`,`2x3`].map(key$1=>{let val=WIDGET_SIZES[key$1];return val?(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setCurrentSizeKey(key$1),className:`px-2 py-1 text-[10px] font-bold rounded transition-colors whitespace-nowrap
                                        ${currentSizeKey===key$1?`bg-indigo-500 text-white`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`} 
                                    `,children:val.label},key$1):null})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 md:gap-4 flex-shrink-0`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:handleSaveToCloud,className:`px-5 py-2 bg-[var(--btn-bg)] hover:brightness-110 text-[var(--btn-text)] text-sm font-bold rounded-lg transition shadow-lg max-md:px-3 max-md:text-xs whitespace-nowrap`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`max-md:hidden`,children:initialData?` `:``}),(0,import_jsx_runtime.jsx)(`span`,{className:`md:hidden`,children:``})]}),initialData&&(0,import_jsx_runtime.jsx)(`button`,{onClick:handleDeleteWidget,className:`p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-lg transition`,title:` `,children:(0,import_jsx_runtime.jsx)(Trash2,{size:20})})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 flex overflow-hidden relative`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsLeftOpen(!isLeftOpen),className:`absolute top-1/2 -translate-y-1/2 z-50 bg-[var(--bg-card)] border border-[var(--border-color)] p-1.5 rounded-full shadow-md text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-card-secondary)] transition-all duration-300
                        max-md:fixed max-md:left-4 max-md:top-auto max-md:translate-y-0
                    `,style:{left:isLeftOpen?`270px`:`10px`,bottom:isLeftOpen?`calc(30vh + 10px)`:`20px`},title:isLeftOpen?`  `:`  `,children:(0,import_jsx_runtime.jsx)(PanelLeft,{size:16})}),(0,import_jsx_runtime.jsx)(`div`,{className:`transition-all duration-300 ease-in-out overflow-hidden flex-shrink-0
                    ${isLeftOpen?`w-[280px] opacity-100 max-md:fixed max-md:bottom-0 max-md:left-0 max-md:w-full max-md:h-[30vh] max-md:z-40 max-md:translate-y-0 max-md:border-t max-md:border-[var(--border-color)] max-md:shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]`:`w-0 opacity-0 max-md:fixed max-md:bottom-0 max-md:left-0 max-md:w-full max-md:h-[30vh] max-md:translate-y-full max-md:opacity-100 max-md:z-40`}
                `,children:(0,import_jsx_runtime.jsx)(LeftSidebar_default,{activeTab,setActiveTab,onAddBlock:addBlock,onAddDecoration:addDecoration,remainingCapacity})}),(0,import_jsx_runtime.jsx)(Canvas_default,{blocks,scenes,currentSceneIndex,onAddScene:()=>{setScenes(prev=>[...prev,{id:`scene-${Date.now()}`,decorations:JSON.parse(JSON.stringify(prev[currentSceneIndex].decorations||[])),blocks:JSON.parse(JSON.stringify(prev[currentSceneIndex].blocks||[])),duration:prev[currentSceneIndex].duration}]),setCurrentSceneIndex(scenes.length)},onChangeScene:setCurrentSceneIndex,onUpdateSceneDuration:(index$2,duration)=>{setScenes(prev=>{let next=[...prev];return next[index$2]={...next[index$2],duration},next})},onDeleteScene:index$2=>{scenes.length<=1||(setScenes(prev=>prev.filter((_$1,i$4)=>i$4!==index$2)),currentSceneIndex>=index$2&&currentSceneIndex>0&&setCurrentSceneIndex(currentSceneIndex-1))},decorations,selectedBlockId,selectedDecorationId,onSelectBlock:id$3=>{setSelectedBlockId(id$3),setSelectedDecorationId(null)},onSelectDecoration:handleSelectDecoration,onUpdateBlock:updateBlock,updateDecoration,currentSize,onDragOver:handleDndKitDragOver,onDragEnd:handleDndKitDragEnd,activeContainer,onRemoveBlock:handleRemoveBlock,onSetActiveContainer:setActiveContainer,onOpenSettings:handleOpenSettings}),isRightOpen&&(0,import_jsx_runtime.jsx)(`div`,{className:`md:hidden fixed inset-0 z-[90] bg-black/50 backdrop-blur-sm transition-opacity`,onClick:()=>setIsRightOpen(!1)}),(0,import_jsx_runtime.jsx)(`div`,{className:`transition-all duration-300 ease-in-out overflow-hidden flex-shrink-0 
                    ${isRightOpen?`w-80 opacity-100 max-md:fixed max-md:top-1/2 max-md:left-1/2 max-md:-translate-x-1/2 max-md:-translate-y-1/2 max-md:w-[90%] max-md:h-[80%] max-md:z-[100] max-md:rounded-2xl max-md:shadow-2xl max-md:border max-md:border-white/20`:`w-0 opacity-0 max-md:hidden`}
                `,children:(0,import_jsx_runtime.jsx)(RightSidebar_default,{selectedBlock,onUpdateBlock:handleUpdateBlock,onClose:()=>{setSelectedBlockId(null),setSelectedDecorationId(null)},selectedDecoration:decorations.find(d$3=>d$3.id===selectedDecorationId),onUpdateDecoration:updateDecoration,onDeleteDecoration:removeDecoration})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsRightOpen(!isRightOpen),className:`max-md:hidden absolute top-1/2 -translate-y-1/2 z-50 bg-[var(--bg-card)] border border-[var(--border-color)] p-1.5 rounded-full shadow-md text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-card-secondary)] transition-all duration-300`,style:{right:isRightOpen?`310px`:`10px`},title:isRightOpen?`  `:`  `,children:(0,import_jsx_runtime.jsx)(PanelRight,{size:16})})]})]})},WidgetBuilder_default=WidgetBuilder,renderWidgetPreview=widgetData=>(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full overflow-hidden transform scale-95 origin-center pointer-events-none`,children:(0,import_jsx_runtime.jsx)(BlockRenderer_default,{block:{id:String(widgetData.id||`preview`),type:widgetData.type,content:widgetData.content||{},styles:widgetData.styles||{}},selectedBlockId:null,onSelectBlock:()=>{},onRemoveBlock:()=>{},activeContainer:null,onSetActiveContainer:()=>{},onUpdateBlock:()=>{}})}),CATEGORY_TRANSLATIONS={"My Saved":`   (Saved)`,System:``,"Data & Logic":` & `,"Diary & Emotion":` & `,Utility:``,Decoration:``,Collection:``,Interactive:``,Tool:``,Global:` `,Uncategorized:``};const WidgetInfoModal=({widget,onClose,onAction,actionLabel=` `,showAction=!0})=>(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/20 backdrop-blur-sm animate-in fade-in duration-200`,onClick:onClose,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-modal)] rounded-2xl shadow-xl border border-[var(--border-color)] p-5 w-full max-w-sm`,onClick:e$4=>e$4.stopPropagation(),children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-lg font-bold text-[var(--text-primary)]`,children:widget.label}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-1 rounded-full hover:bg-[var(--bg-card-secondary)] text-[var(--icon-color)]`,children:(0,import_jsx_runtime.jsx)(X,{size:18})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`aspect-video bg-[var(--bg-card-secondary)] rounded-lg flex items-center justify-center overflow-hidden border border-[var(--border-color)] p-2`,children:widget.isSaved?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full transform scale-95 flex items-center justify-center`,children:renderWidgetPreview(widget.data)}):(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/thumbnails/${widget.type}.png`,className:`w-full h-full object-contain`,alt:widget.label,onError:e$4=>e$4.currentTarget.style.display=`none`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-sm text-[var(--text-secondary)] px-1`,children:widget.description}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-3 pt-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card-secondary)] rounded-lg p-2.5`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-[var(--text-secondary)] block mb-0.5`,children:`Category`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-medium text-[var(--text-primary)]`,children:CATEGORY_TRANSLATIONS[widget.category]||widget.category})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card-secondary)] rounded-lg p-2.5`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-[var(--text-secondary)] block mb-0.5`,children:widget.isSaved?`Saved Date`:`Available Sizes`}),widget.isSaved?(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-medium text-[var(--text-primary)] font-mono`,children:typeof widget.description==`string`?widget.description.replace(` : `,``):`-`}):(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-wrap gap-1.5 mt-1`,children:(widget.validSizes||[[1,1]]).map(([w$1,h$3],idx)=>(0,import_jsx_runtime.jsxs)(`span`,{className:`px-1.5 py-0.5 bg-[var(--bg-card)] text-[var(--btn-bg)] rounded border border-[var(--border-color)] text-[10px] font-bold shadow-sm`,children:[w$1,`x`,h$3]},idx))})]})]}),showAction&&onAction&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{onAction(),onClose()},className:`w-full py-2.5 rounded-xl bg-[var(--btn-bg)] hover:bg-[var(--btn-hover)] text-[var(--btn-text)] font-medium text-sm transition-colors flex items-center justify-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Plus,{size:16}),` `,actionLabel]})]})]})});var API_BASE_URL$2=``,getHeaders=()=>{let token=localStorage.getItem(`accessToken`);return{"Content-Type":`application/json`,Authorization:token?`Bearer ${token}`:``}};const getWidgetSettings=async()=>{let response=await fetch(`${API_BASE_URL$2}/api/setting/all`,{headers:getHeaders()});if(!response.ok)return null;let rawWidgets=(await response.json()).widget;return rawWidgets?rawWidgets.map(w$1=>w$1.layout?w$1:{id:w$1.id||w$1.i,type:w$1.type,props:w$1.props||{},layout:{x:w$1.x||0,y:w$1.y||0,w:w$1.w||1,h:w$1.h||1}}):null},updateWidgetSettings=async widgets=>{if(localStorage.getItem(`accessToken`)&&!(await fetch(`${API_BASE_URL$2}/api/setting/widgets`,{method:`PUT`,headers:getHeaders(),body:JSON.stringify(widgets)})).ok)throw Error(`Failed to update widget settings`)},getPresets=async()=>{if(!localStorage.getItem(`accessToken`))return[];let response=await fetch(`${API_BASE_URL$2}/api/setting/widgets/presets`,{headers:getHeaders()});return response.ok?(await response.json()).map(d$3=>({...d$3,widgets:d$3.widgets.map(w$1=>w$1.layout?w$1:{id:w$1.id||w$1.i,type:w$1.type,props:w$1.props||{},layout:{x:w$1.x||0,y:w$1.y||0,w:w$1.w||1,h:w$1.h||1}})})):[]},createPreset=async(name,widgets,gridSize)=>{localStorage.getItem(`accessToken`)&&await fetch(`${API_BASE_URL$2}/api/setting/widgets/presets`,{method:`POST`,headers:getHeaders(),body:JSON.stringify({name,widgets,gridSize})})},deletePreset=async id$3=>{localStorage.getItem(`accessToken`)&&await fetch(`${API_BASE_URL$2}/api/setting/widgets/presets/${id$3}`,{method:`DELETE`,headers:getHeaders()})},updatePreset=async(id$3,widgets,gridSize)=>{localStorage.getItem(`accessToken`)&&await fetch(`${API_BASE_URL$2}/api/setting/widgets/presets/${id$3}`,{method:`PUT`,headers:getHeaders(),body:JSON.stringify({widgets,gridSize})})},PresetManager=({currentWidgets,currentGridSize,onLoad,onClose})=>{let[presets,setPresets]=(0,import_react.useState)([]),[isCreating,setIsCreating]=(0,import_react.useState)(!1),[newPresetName,setNewPresetName]=(0,import_react.useState)(``);(0,import_react.useEffect)(()=>{loadPresets()},[]);let loadPresets=async()=>{try{setPresets(await getPresets())}catch(e$4){console.error(`Failed to load presets`,e$4)}},handleCreate=async()=>{if(newPresetName.trim())try{await createPreset(newPresetName.trim(),currentWidgets,currentGridSize),await loadPresets(),setNewPresetName(``),setIsCreating(!1)}catch(e$4){console.error(`Failed to create preset`,e$4)}},handleDelete=async id$3=>{if(confirm(` ?`))try{await deletePreset(id$3),await loadPresets()}catch(e$4){console.error(`Failed to delete preset`,e$4)}},handleOverwrite=async id$3=>{if(confirm(`    ?`))try{await updatePreset(id$3,currentWidgets,currentGridSize),await loadPresets()}catch(e$4){console.error(`Failed to update preset`,e$4)}},formatDate=dateStr=>new Date(dateStr).toLocaleDateString()+` `+new Date(dateStr).toLocaleTimeString();return(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-md animate-in fade-in duration-200`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] w-full max-w-md h-[500px] rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 border-b border-[var(--border-color)] flex justify-between items-center bg-[var(--bg-header)] shrink-0`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`text-lg font-bold text-[var(--text-primary)] flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(FolderOpen,{size:20}),`  `]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`,children:(0,import_jsx_runtime.jsx)(X,{size:20})})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 border-b border-[var(--border-color)] bg-[var(--bg-card)] z-10 shrink-0`,children:isCreating?(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card-secondary)] p-3 rounded-xl border border-[var(--border-color)] animate-in slide-in-from-top-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold text-[var(--text-secondary)] mb-1 block`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:newPresetName,onChange:e$4=>setNewPresetName(e$4.target.value),placeholder:`My Awesome Layout`,className:`flex-1 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-lg px-3 py-2 text-sm text-[var(--text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)]`,autoFocus:!0,onKeyDown:e$4=>e$4.key===`Enter`&&handleCreate()}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleCreate,disabled:!newPresetName.trim(),className:`bg-[var(--btn-bg)] text-[var(--btn-text)] p-2 rounded-lg disabled:opacity-50`,children:(0,import_jsx_runtime.jsx)(Check,{size:18})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsCreating(!1),className:`bg-[var(--bg-card-secondary)] text-[var(--text-secondary)] p-2 rounded-lg`,children:(0,import_jsx_runtime.jsx)(X,{size:18})})]})]}):(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsCreating(!0),className:`w-full py-3 rounded-xl bg-[var(--btn-bg)] text-[var(--btn-text)] hover:brightness-110 transition-all flex items-center justify-center gap-2 font-bold shadow-md`,children:[(0,import_jsx_runtime.jsx)(Plus,{size:18}),`   `]})}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 overflow-y-auto p-4 space-y-3`,children:presets.length===0?(0,import_jsx_runtime.jsx)(`div`,{className:`text-center py-10 text-[var(--text-secondary)] text-sm`,children:`  .`}):presets.map(preset$1=>(0,import_jsx_runtime.jsxs)(`div`,{className:`group bg-[var(--bg-card-secondary)] p-3 rounded-xl border border-[var(--border-color)] hover:border-[var(--btn-bg)] transition-colors flex justify-between items-center shadow-sm`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`div`,{className:`font-bold text-[var(--text-primary)]`,children:preset$1.name}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-xs text-[var(--text-secondary)] mt-0.5`,children:[formatDate(preset$1.createdAt),`  `,preset$1.widgets.length,` Widgets`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onLoad(preset$1.widgets,preset$1.gridSize),className:`p-2 rounded-lg bg-[var(--btn-bg)] text-[var(--btn-text)] hover:brightness-110 text-xs font-bold px-3`,children:`Load`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleOverwrite(preset$1.id),className:`p-2 rounded-lg bg-[var(--bg-card)] border border-[var(--border-color)] text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:border-[var(--text-secondary)]`,title:`Update with current layout`,children:(0,import_jsx_runtime.jsx)(RefreshCw,{size:16})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleDelete(preset$1.id),className:`p-2 rounded-lg bg-red-50 text-red-500 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/40`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:16})})]})]},preset$1.id))})]})})};var DashboardHeader=({isMenuEditMode,isWidgetEditMode,isMobile:isMobile$1,widgetSnapshot,setIsWidgetEditMode,setWidgets,setIsCatalogOpen,setIsBuilderOpen,setIsArrangeConfirmOpen,setIsPresetManagerOpen,resetWidgets})=>{let controlsRef=(0,import_react.useRef)(null),[showRightBlur,setShowRightBlur]=(0,import_react.useState)(!1);return(0,import_react.useEffect)(()=>{let el=controlsRef.current;if(!el)return;let checkScroll=()=>{setShowRightBlur(el.scrollWidth>el.clientWidth+el.scrollLeft+1)};return el.addEventListener(`scroll`,checkScroll),window.addEventListener(`resize`,checkScroll),checkScroll(),()=>{el.removeEventListener(`scroll`,checkScroll),window.removeEventListener(`resize`,checkScroll)}},[isWidgetEditMode,isMenuEditMode,isMobile$1]),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4`,children:[!isMenuEditMode&&(0,import_jsx_runtime.jsxs)(`h2`,{className:`text-xl font-bold theme-text-primary flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(LayoutGrid,{size:20}),` My Dashboard`]}),(0,import_jsx_runtime.jsx)(`div`,{ref:controlsRef,className:`flex gap-2 items-center ${isMobile$1?`flex-nowrap overflow-x-auto w-full pb-2 no-scrollbar`:`flex-wrap`} ${isMobile$1&&showRightBlur?`mask-linear-fade`:``}`,children:!isMenuEditMode&&(0,import_jsx_runtime.jsx)(import_jsx_runtime.Fragment,{children:isWidgetEditMode&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsWidgetEditMode(!1),className:`h-10 px-4 w-20 flex-shrink-0 flex items-center justify-center rounded-lg text-sm font-bold bg-[var(--btn-bg)] text-[var(--btn-text)] shadow-md transition-colors`,children:`Save`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{widgetSnapshot&&setWidgets(widgetSnapshot),setIsWidgetEditMode(!1)},className:`h-10 px-4 w-20 flex-shrink-0 flex items-center justify-center rounded-lg text-sm font-bold bg-[var(--bg-card)] border border-[var(--border-color)] text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)] hover:text-[var(--text-primary)] transition-colors`,children:`Cancel`}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-px h-6 bg-gray-200 mx-1 flex-shrink-0`}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsCatalogOpen(!0),className:`h-10 px-4 w-20 flex-shrink-0 flex items-center justify-center gap-1 rounded-lg text-sm font-bold bg-[var(--bg-card)] border border-[var(--border-color)] text-[var(--text-primary)] hover:bg-[var(--bg-card-secondary)] transition-colors`,children:[(0,import_jsx_runtime.jsx)(Plus,{size:18}),` Add`]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsBuilderOpen(!0),className:`h-10 px-4 flex-shrink-0 flex items-center justify-center gap-1 rounded-lg text-sm font-bold bg-[var(--bg-card)] border border-[var(--border-color)] text-[var(--text-primary)] hover:bg-[var(--bg-card-secondary)] transition-colors`,children:(0,import_jsx_runtime.jsx)(`span`,{children:` `})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsArrangeConfirmOpen(!0),className:`h-10 w-10 flex-shrink-0 flex items-center justify-center rounded-lg text-sm font-bold bg-[var(--bg-card)] border border-[var(--border-color)] text-[var(--text-secondary)] hover:text-[var(--btn-bg)] hover:bg-[var(--bg-card-secondary)] transition-colors`,title:`Auto Arrange`,children:(0,import_jsx_runtime.jsx)(AlignStartVertical,{size:18})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsPresetManagerOpen(!0),className:`h-10 w-10 flex-shrink-0 flex items-center justify-center rounded-lg text-sm font-bold bg-[var(--bg-card)] border border-[var(--border-color)] text-[var(--text-secondary)] hover:text-[var(--btn-bg)] hover:bg-[var(--bg-card-secondary)] transition-colors`,title:`Presets`,children:(0,import_jsx_runtime.jsx)(FolderOpen,{size:18})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:resetWidgets,className:`h-10 w-10 flex-shrink-0 flex items-center justify-center rounded-lg bg-[var(--bg-card)] border border-[var(--border-color)] text-red-400 hover:text-red-500 hover:bg-red-50 transition-colors`,title:`Reset Layout`,children:(0,import_jsx_runtime.jsx)(RefreshCw,{size:20})})]})})}),isMenuEditMode&&(0,import_jsx_runtime.jsx)(MenuSettings_default,{})]})},DashboardHeader_default=DashboardHeader,ItemTypes={WIDGET:`widget`};const DraggableWidget=({widget,registry,isEditMode,removeWidget,updateLayout:updateLayout$1,onDragStart:onDragStart$1,onDragEnd:onDragEnd$1,onHover,onDrop,isMobile:isMobile$1=!1,isSelected=!1,onSelect,onZoom,onShowInfo,onUpdateWidget,isZoomEnabled=!1})=>{let ref=(0,import_react.useRef)(null),[showSizeMenu,setShowSizeMenu]=(0,import_react.useState)(!1),{triggerWidgetInteraction}=useCredits(),[{isDragging:isDragging$2},drag$1,preview]=useDrag({type:ItemTypes.WIDGET,item:()=>{onDragStart$1&&onDragStart$1();let{offsetWidth,offsetHeight}=ref.current||{offsetWidth:0,offsetHeight:0};return{id:widget.id,type:widget.type,layout:widget.layout,props:widget.props,initialWidth:offsetWidth,initialHeight:offsetHeight}},collect:monitor=>({isDragging:monitor.isDragging()}),end:()=>{onDragEnd$1&&onDragEnd$1()},canDrag:isEditMode}),[,drop$1]=useDrop({accept:ItemTypes.WIDGET,hover:item=>{isEditMode&&onHover&&onHover(widget.layout.x,widget.layout.y,item)},drop:item=>{isEditMode&&onDrop&&onDrop(widget.layout.x,widget.layout.y,item)}});(0,import_react.useEffect)(()=>{preview(getEmptyImage(),{captureDraggingState:!0})},[preview]),(0,import_react.useEffect)(()=>{isSelected||setShowSizeMenu(!1)},[isSelected]),(0,import_react.useEffect)(()=>{if(!showSizeMenu)return;let handleClickOutside=e$4=>{e$4.target.closest(`.size-menu-container`)||setShowSizeMenu(!1)};return window.addEventListener(`click`,handleClickOutside),()=>window.removeEventListener(`click`,handleClickOutside)},[showSizeMenu]),isEditMode&&drag$1(drop$1(ref));let{x:x$2,y:y$2,w:w$1,h:h$3}=widget.layout,isTransparent=widget.type===`transparent`,WidgetComponent=null,registryItem=registry[widget.type];registryItem&&WIDGET_COMPONENT_MAP[widget.type]&&(WidgetComponent=WIDGET_COMPONENT_MAP[widget.type]),(widget.type===`custom-block`||!registryItem)&&(registryItem={id:0,widgetType:widget.type,label:`Custom`,description:``,category:`My Saved`,keywords:[],defaultSize:`2x2`,validSizes:[[1,1],[1,2],[2,1],[2,2]],defaultProps:{},isSystem:!1,component:null});let gridStyle={gridColumn:`${x$2} / span ${w$1}`,gridRow:`${y$2} / span ${h$3}`,opacity:isDragging$2?0:1,zIndex:isDragging$2?50:showSizeMenu?60:1};return(0,import_jsx_runtime.jsxs)(motion.div,{layout:!0,transition:{type:`spring`,stiffness:300,damping:30},ref,className:`global-physics-widget relative group rounded-2xl transition-colors duration-200 
                ${isTransparent?isEditMode?`bg-white/10 border-2 border-dashed border-white/30`:``:`theme-bg-card shadow-sm hover:shadow-md`} 
                ${isEditMode&&!isMobile$1?`cursor-move ring-2 ring-[var(--btn-bg)] ring-offset-2 overflow-visible`:`overflow-hidden`}
                ${isDragging$2?`pointer-events-none`:``}
                ${isMobile$1&&isSelected&&isEditMode?`ring-2 ring-[var(--btn-bg)] ring-offset-2`:``}
                ${isEditMode?`select-none`:``}
                ${isMobile$1&&isEditMode?`overflow-visible`:``}
            `,style:gridStyle,onClick:e$4=>{isMobile$1&&isEditMode?(onSelect?.(),e$4.stopPropagation()):isEditMode||(triggerWidgetInteraction(),onZoom?.())},onContextMenu:e$4=>{isEditMode&&e$4.preventDefault()},children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full transition-transform overflow-hidden rounded-2xl flex flex-col justify-start ${isEditMode?`pointer-events-none`:``}`,children:(0,import_jsx_runtime.jsx)(import_react.Suspense,{fallback:(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full bg-gray-100 animate-pulse rounded-2xl`}),children:(()=>((widget.type===`custom-block`||!WidgetComponent)&&console.log(` [DraggableWidget] Rendering custom-block:`,widget.id,widget.props),widget.type===`custom-block`||!WidgetComponent?(0,import_jsx_runtime.jsx)(BlockRenderer_default,{block:{id:widget.id,type:(widget.props||{}).type||widget.type,content:{...(widget.props||{}).content||{},decorations:(widget.props||{}).decorations||((widget.props||{}).content||{}).decorations},styles:(widget.props||{}).styles||{}},selectedBlockId:null,onSelectBlock:()=>{},onRemoveBlock:()=>{},activeContainer:null,onSetActiveContainer:()=>{},onUpdateBlock:(id$3,updates)=>{onUpdateWidget&&onUpdateWidget(widget.id,updates)}}):(0,import_jsx_runtime.jsx)(WidgetComponent,{...widget.props||{},gridSize:{w:w$1,h:h$3},updateLayout:layout$1=>updateLayout$1(widget.id,layout$1),widgetId:widget.id,onInteraction:triggerWidgetInteraction})))()})}),isEditMode&&(0,import_jsx_runtime.jsxs)(`div`,{style:{opacity:isMobile$1&&!isSelected?0:1,pointerEvents:isMobile$1&&!isSelected?`none`:`auto`},className:`absolute inset-0 bg-black/10 backdrop-blur-[1px] rounded-2xl flex flex-col items-center justify-center transition-opacity border-2 border-[var(--btn-bg)] z-20 gap-2 pointer-events-auto
                    ${isMobile$1?``:`opacity-0 group-hover:opacity-100`}
                `,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute top-2 right-2 flex gap-2`,children:[onShowInfo&&(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onShowInfo?.()},className:`p-1.5 rounded-full bg-white/20 hover:bg-white/40 text-black/70 backdrop-blur-sm transition-colors shadow-sm`,title:`Information`,children:(0,import_jsx_runtime.jsx)(CircleQuestionMark,{size:14})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),removeWidget(widget.id)},className:`p-1.5 rounded-full bg-red-500/80 hover:bg-red-500 text-white backdrop-blur-sm transition-colors shadow-sm`,title:`Remove Widget`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:14})})]}),registryItem.category!==`Global`&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute bottom-2 right-2 p-2 cursor-nwse-resize touch-none text-white/80 hover:text-white transition-colors`,onPointerDown:e$4=>{e$4.stopPropagation(),e$4.preventDefault();let startX=e$4.clientX,startY=e$4.clientY,originalW=w$1,originalH=h$3,element=ref.current;if(!element)return;let rect=element.getBoundingClientRect(),cellWidth=rect.width/w$1,cellHeight=rect.height/h$3,handlePointerMove=moveEvent=>{let dx=moveEvent.clientX-startX,dy=moveEvent.clientY-startY,gridDx=Math.round(dx/cellWidth),gridDy=Math.round(dy/cellHeight),newW=Math.max(1,originalW+gridDx),newH=Math.max(1,originalH+gridDy),validSizes=registryItem?.validSizes;if(validSizes){let bestSize=[newW,newH],minDistance=1/0;validSizes.forEach(([vw$1,vh$1])=>{if(isMobile$1&&(vw$1>2||widget.type===`welcome`&&vw$1===1&&vh$1===2||widget.type===`ootd`&&vh$1!==2||widget.type===`chat-diary`&&vw$1!==2||widget.type===`asmr-mixer`&&vw$1!==2||widget.type===`random-picker`&&vw$1===1&&vh$1===1))return;let dist=Math.sqrt((vw$1-newW)**2+(vh$1-newH)**2);dist<minDistance&&(minDistance=dist,bestSize=[vw$1,vh$1])}),newW=bestSize[0],newH=bestSize[1]}if(isMobile$1&&newW>2&&(newW=2),newW!==w$1||newH!==h$3){updateLayout$1(widget.id,{w:newW,h:newH});try{let key$1=`widget-config-${widget.type}`,existing=localStorage.getItem(key$1),newConfig={...existing?JSON.parse(existing):{},defaultSize:`${newW}x${newH}`};localStorage.setItem(key$1,JSON.stringify(newConfig))}catch(e$5){console.warn(e$5)}}},handlePointerUp=()=>{window.removeEventListener(`pointermove`,handlePointerMove),window.removeEventListener(`pointerup`,handlePointerUp)};window.addEventListener(`pointermove`,handlePointerMove),window.addEventListener(`pointerup`,handlePointerUp)},children:(0,import_jsx_runtime.jsxs)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,import_jsx_runtime.jsx)(`path`,{d:`M21 15v6`}),(0,import_jsx_runtime.jsx)(`path`,{d:`M21 21h-6`}),(0,import_jsx_runtime.jsx)(`path`,{d:`M21 21l-9-9`}),(0,import_jsx_runtime.jsx)(`path`,{d:`M3 21h6`,strokeOpacity:`0.5`}),(0,import_jsx_runtime.jsx)(`path`,{d:`M9 21v-6`,strokeOpacity:`0.5`})]})})]}),!isEditMode&&isZoomEnabled&&!isMobile$1&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center z-20 cursor-pointer rounded-2xl`,onClick:e$4=>{e$4.stopPropagation(),onZoom?.()},children:(0,import_jsx_runtime.jsx)(`div`,{className:`bg-black/40 p-3 rounded-full backdrop-blur-md shadow-lg transform scale-90 group-hover:scale-100 transition-all duration-200`,children:(0,import_jsx_runtime.jsx)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`white`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,import_jsx_runtime.jsx)(`path`,{d:`M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3`})})})})]})};var GridCell=({x:x$2,y:y$2,onDrop,onHover,isEditMode})=>{let[,drop$1]=useDrop({accept:`widget`,drop:item=>onDrop(x$2,y$2,item),hover:item=>onHover(x$2,y$2,item),collect:monitor=>({isOver:monitor.isOver()})});return(0,import_jsx_runtime.jsx)(`div`,{ref:drop$1,style:{gridColumn:x$2,gridRow:y$2},className:`
        w-full h-full rounded-xl transition-all duration-200
        ${isEditMode?`border border-dashed border-gray-200`:``}
      `})},GridCell_default=GridCell,DashboardGrid=({isMobile:isMobile$1,isMenuEditMode,isWidgetEditMode,gridSize,finalRows,widgetsToRender,registry,selectedWidgetId,removeWidget,updateLayout:updateLayout$1,setIsDragging,setLayoutPreview,onCellHover,updateWidgetPosition,setSelectedWidgetId,handleShowHelp,handleUpdateWidgetData,onWidgetClick,isZoomEnabled})=>{if(isMenuEditMode)return null;let gridCells=[],currentCols=isMobile$1?2:gridSize.cols;for(let y$2=1;y$2<=finalRows;y$2++)for(let x$2=1;x$2<=currentCols;x$2++)gridCells.push((0,import_jsx_runtime.jsx)(GridCell_default,{x:x$2,y:y$2,onDrop:(targetX,targetY,item)=>updateWidgetPosition(item.id,targetX,targetY),onHover:onCellHover,isEditMode:isWidgetEditMode},`${x$2}-${y$2}`));return(0,import_jsx_runtime.jsx)(`div`,{className:`relative w-full overflow-visible p-4`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`grid gap-4 transition-all duration-300 ease-in-out relative`,style:{gridTemplateColumns:isMobile$1?`repeat(2, minmax(0, 1fr))`:`repeat(${gridSize.cols}, minmax(0, 1fr))`,gridTemplateRows:`repeat(${finalRows}, ${isMobile$1?`45vw`:`200px`})`},children:[gridCells,widgetsToRender.map(widget=>(0,import_jsx_runtime.jsx)(DraggableWidget,{widget,registry,isEditMode:isWidgetEditMode,removeWidget,updateLayout:updateLayout$1,onDragStart:()=>setIsDragging(!0),onDragEnd:()=>{setLayoutPreview(null),setIsDragging(!1)},onHover:onCellHover,onDrop:(x$2,y$2,item)=>{updateWidgetPosition(item.id,x$2,y$2),setIsDragging(!1)},isMobile:isMobile$1,isSelected:selectedWidgetId===widget.id,onSelect:()=>setSelectedWidgetId(prev=>prev===widget.id?null:widget.id),onShowInfo:()=>handleShowHelp(widget),onUpdateWidget:handleUpdateWidgetData,onZoom:()=>onWidgetClick?.(widget.id),isZoomEnabled},widget.id))]})})},DashboardGrid_default=DashboardGrid,FloatingSettingsPanel=({defaultOpen=!1,isWidgetEditMode,setIsWidgetEditMode,setIsCatalogOpen,setIsBuilderOpen,setIsArrangeConfirmOpen,setIsPresetManagerOpen,resetWidgets,isMobile:isMobile$1})=>{let{settings}=useHeaderSettings(),[isOpen,setIsOpen]=(0,import_react.useState)(defaultOpen&&!isMobile$1),navigate=useNavigate(),{setIsEditMode}=useMenu();if((0,import_react.useEffect)(()=>{isMobile$1&&setIsOpen(!1)},[isMobile$1]),settings.showFloatingPanel===!1)return null;let openSettings=view=>{window.dispatchEvent(new CustomEvent(`open-settings-modal`,{detail:{view}}))},hasWidgetProps=isWidgetEditMode!==void 0&&setIsWidgetEditMode&&setIsCatalogOpen&&setIsBuilderOpen&&setIsArrangeConfirmOpen&&setIsPresetManagerOpen&&resetWidgets;return(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsOpen(!0),className:`fixed right-0 top-32 z-[90] mt-6 flex items-center justify-center w-12 h-14 
                bg-[var(--bg-card)]/80 backdrop-blur-xl border-y border-l border-[var(--border-color)] 
                rounded-l-2xl hover:bg-[var(--bg-card-secondary)] transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] shadow-[-4px_4px_12px_-2px_rgba(0,0,0,0.1)]
                ${isOpen?`translate-x-[150%] opacity-0 pointer-events-none`:`translate-x-0 opacity-100`}`,title:` `,children:(0,import_jsx_runtime.jsx)(ChevronLeft,{className:`w-6 h-6 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`fixed right-0 top-32 z-[90] w-64 flex flex-col gap-4 bg-[var(--bg-card)]/80 backdrop-blur-xl border-y border-l border-[var(--border-color)] rounded-l-3xl p-5 min-h-[240px] shadow-2xl transition-transform duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)]
                ${isOpen?`translate-x-0`:`translate-x-[120%]`}`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center mb-2 px-1`,children:(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsOpen(!1),className:`flex items-center gap-1 group hover:bg-[var(--bg-card-secondary)]/50 -ml-2 px-2 py-1 rounded-lg transition-all`,title:``,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-sm font-bold text-[var(--text-secondary)] group-hover:text-[var(--text-primary)] transition-colors`,children:``}),(0,import_jsx_runtime.jsx)(ChevronRight,{className:`w-4 h-4 text-[var(--text-secondary)] group-hover:text-[var(--text-primary)] transition-colors`})]})}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>openSettings(`theme`),className:`flex items-center gap-3 p-3 rounded-xl hover:bg-[var(--bg-card-secondary)] transition-all group text-left`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 group-hover:scale-110 transition-transform`,children:(0,import_jsx_runtime.jsx)(Palette,{size:18})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`div`,{className:`font-bold text-[var(--text-primary)] text-sm`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] text-[var(--text-secondary)]`,children:`  `})]})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{setIsEditMode(!0),navigate(`/home`),setIsOpen(!1)},className:`flex items-center gap-3 p-3 rounded-xl hover:bg-[var(--bg-card-secondary)] transition-all group text-left`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 group-hover:scale-110 transition-transform`,children:(0,import_jsx_runtime.jsx)(Menu,{size:18})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`div`,{className:`font-bold text-[var(--text-primary)] text-sm`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] text-[var(--text-secondary)]`,children:`  `})]})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>openSettings(`defaultPage`),className:`flex items-center gap-3 p-3 rounded-xl hover:bg-[var(--bg-card-secondary)] transition-all group text-left`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-2 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-300 group-hover:scale-110 transition-transform`,children:(0,import_jsx_runtime.jsx)(House,{size:18})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`div`,{className:`font-bold text-[var(--text-primary)] text-sm`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] text-[var(--text-secondary)]`,children:`  `})]})]}),hasWidgetProps&&setIsWidgetEditMode&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsWidgetEditMode(!isWidgetEditMode),className:`flex items-center gap-3 p-3 rounded-xl transition-all group text-left ${isWidgetEditMode?`bg-[var(--btn-bg)]/10 border border-[var(--btn-bg)]`:`hover:bg-[var(--bg-card-secondary)]`}`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-2 rounded-lg group-hover:scale-110 transition-transform ${isWidgetEditMode?`bg-[var(--btn-bg)] text-white`:`bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-300`}`,children:(0,import_jsx_runtime.jsx)(PanelsTopLeft,{size:18})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`div`,{className:`font-bold text-sm ${isWidgetEditMode?`text-[var(--btn-bg)]`:`text-[var(--text-primary)]`}`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] text-[var(--text-secondary)]`,children:isWidgetEditMode?`  `:`   `})]})]}),hasWidgetProps&&isWidgetEditMode&&setIsCatalogOpen&&setIsBuilderOpen&&setIsPresetManagerOpen&&setIsArrangeConfirmOpen&&resetWidgets&&(0,import_jsx_runtime.jsxs)(`div`,{className:`pt-2 border-t border-[var(--border-color)] flex flex-col gap-2 animate-in slide-in-from-right-5 fade-in duration-300`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-sm font-bold text-[var(--text-secondary)] mb-2 px-1`,children:` `}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsCatalogOpen(!0),className:`flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-card-secondary)] transition-colors text-left group`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-lg bg-[var(--bg-secondary)] flex items-center justify-center text-[var(--text-primary)] group-hover:bg-[var(--btn-bg)] group-hover:text-white transition-colors`,children:(0,import_jsx_runtime.jsx)(Plus,{size:16})}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-medium text-[var(--text-primary)]`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsBuilderOpen(!0),className:`flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-card-secondary)] transition-colors text-left group`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-lg bg-[var(--bg-secondary)] flex items-center justify-center text-[var(--text-primary)] group-hover:bg-[var(--btn-bg)] group-hover:text-white transition-colors`,children:(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] font-bold`,children:`New`})}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-medium text-[var(--text-primary)]`,children:`  `})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsPresetManagerOpen(!0),className:`flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-card-secondary)] transition-colors text-left group`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-lg bg-[var(--bg-secondary)] flex items-center justify-center text-[var(--text-primary)] group-hover:bg-[var(--btn-bg)] group-hover:text-white transition-colors`,children:(0,import_jsx_runtime.jsx)(FolderOpen,{size:16})}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-medium text-[var(--text-primary)]`,children:` `})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`h-px bg-[var(--border-color)] my-1`}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsArrangeConfirmOpen(!0),className:`flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-card-secondary)] transition-colors text-left group`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-lg bg-[var(--bg-secondary)] flex items-center justify-center text-[var(--text-primary)] group-hover:bg-[var(--btn-bg)] group-hover:text-white transition-colors`,children:(0,import_jsx_runtime.jsx)(AlignStartVertical,{size:16})}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-medium text-[var(--text-primary)]`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:resetWidgets,className:`flex items-center gap-3 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors text-left group`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-lg bg-[var(--bg-secondary)] flex items-center justify-center text-red-400 group-hover:text-red-500 transition-colors`,children:(0,import_jsx_runtime.jsx)(RefreshCw,{size:16})}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-medium text-red-500`,children:` `})]})]})]})]})},FloatingSettingsPanel_default=FloatingSettingsPanel,DEFAULT_GRID_SIZE$1={cols:4,rows:1},DEFAULT_WIDGETS_V3=[{id:`w-1`,type:`welcome`,layout:{x:1,y:1,w:4,h:1}},{id:`w-2`,type:`todo-list`,layout:{x:1,y:2,w:2,h:2}},{id:`w-3`,type:`ocean-wave`,layout:{x:3,y:2,w:2,h:1}},{id:`w-4`,type:`scratch-card`,layout:{x:3,y:3,w:1,h:1}},{id:`w-5`,type:`physics-box`,layout:{x:4,y:3,w:1,h:1}}];const useDashboardLogic=isMobile$1=>{let{registry}=useWidgetRegistry(),[searchParams,setSearchParams]=useSearchParams(),{isLoggedIn}=useAuth(),[isWidgetEditMode,setIsWidgetEditMode]=(0,import_react.useState)(!1),[widgets,setWidgets]=(0,import_react.useState)(()=>{let savedWidgets=localStorage.getItem(`my_dashboard_widgets_v3`);if(savedWidgets)try{return JSON.parse(savedWidgets)}catch{return DEFAULT_WIDGETS_V3}return DEFAULT_WIDGETS_V3}),[gridSize,setGridSize]=(0,import_react.useState)(()=>{let savedGrid=localStorage.getItem(`my_dashboard_grid_size_v4`);if(savedGrid)try{return JSON.parse(savedGrid)}catch{return DEFAULT_GRID_SIZE$1}return DEFAULT_GRID_SIZE$1}),[widgetSnapshot,setWidgetSnapshot]=(0,import_react.useState)(null),[layoutPreview,setLayoutPreview]=(0,import_react.useState)(null),[isDragging$2,setIsDragging]=(0,import_react.useState)(!1);(0,import_react.useEffect)(()=>{(async()=>{if(isLoggedIn)try{let remoteWidgets=await getWidgetSettings();remoteWidgets&&remoteWidgets.length>0&&(setWidgets(remoteWidgets),localStorage.setItem(`my_dashboard_widgets_v3`,JSON.stringify(remoteWidgets)))}catch(error$1){console.error(`Failed to load widgets:`,error$1)}})()},[isLoggedIn]),(0,import_react.useEffect)(()=>{if(localStorage.setItem(`my_dashboard_widgets_v3`,JSON.stringify(widgets)),localStorage.setItem(`my_dashboard_grid_size_v4`,JSON.stringify(gridSize)),isLoggedIn){let timer$1=setTimeout(()=>{updateWidgetSettings(widgets).catch(err=>console.error(`Failed to sync widgets:`,err))},1e3);return()=>clearTimeout(timer$1)}},[widgets,gridSize,isLoggedIn]),(0,import_react.useEffect)(()=>{isWidgetEditMode&&widgetSnapshot===null?setWidgetSnapshot(JSON.parse(JSON.stringify(widgets))):isWidgetEditMode||setWidgetSnapshot(null)},[isWidgetEditMode,widgetSnapshot,widgets]),(0,import_react.useEffect)(()=>{let maxY=widgets.reduce((max,w$1)=>Math.max(max,w$1.layout.y+w$1.layout.h),0),requiredRows=Math.max(maxY,DEFAULT_GRID_SIZE$1.rows);requiredRows!==gridSize.rows&&setGridSize(prev=>({...prev,rows:requiredRows}))},[widgets,gridSize.rows]),(0,import_react.useEffect)(()=>{searchParams.get(`editMode`)===`widget`&&(setIsWidgetEditMode(!0),setSearchParams(params=>{let newParams=new URLSearchParams(params);return newParams.delete(`editMode`),newParams},{replace:!0}))},[searchParams,setSearchParams]);let addWidgets=(items,setIsCatalogOpen,customProps)=>{setWidgets(prevWidgets=>{let currentWidgets=[...prevWidgets];return items.forEach(item=>{let type,w$1=1,h$3=1,initialProps={};if(typeof item==`object`&&item&&(item.widgetType||item.type))if(type=item.widgetType?item.widgetType:item.type,type.startsWith(`custom-`)){let baseType=item.keywords?.[1]||`custom-block`;type=baseType;let[wStr,hStr]=(item.defaultSize||`1x1`).split(`x`);w$1=parseInt(wStr,10)||1,h$3=parseInt(hStr,10)||1,initialProps=item.defaultProps?JSON.parse(JSON.stringify(item.defaultProps)):{type:baseType,content:JSON.parse(JSON.stringify(item.content||{})),styles:JSON.parse(JSON.stringify(item.styles||{})),title:item.name||item.label}}else if(type===`custom-block`||type===`custom`){let savedWidget=item,[wStr,hStr]=(savedWidget.defaultSize||`1x1`).split(`x`);w$1=parseInt(wStr,10)||2,h$3=parseInt(hStr,10)||2,initialProps={type:savedWidget.type,content:JSON.parse(JSON.stringify(savedWidget.content||{})),styles:JSON.parse(JSON.stringify(savedWidget.styles||{})),title:savedWidget.name}}else{let registryItem=registry[type];if(!registryItem){console.error(`Unknown widget type: ${type}`);return}if(registryItem.defaultSize){let[wStr,hStr]=registryItem.defaultSize.split(`x`);w$1=parseInt(wStr,10)||1,h$3=parseInt(hStr,10)||1}else if(item.validSizes&&item.validSizes.length>0){let[vw$1,vh$1]=item.validSizes[0];w$1=vw$1,h$3=vh$1}initialProps=registryItem.defaultProps?JSON.parse(JSON.stringify(registryItem.defaultProps)):{}}else if(typeof item==`string`){type=item;let registryItem=registry[type];if(!registryItem){console.error(`Unknown widget type: ${type}`);return}if(registryItem.defaultSize){let[wStr,hStr]=registryItem.defaultSize.split(`x`);w$1=parseInt(wStr,10)||1,h$3=parseInt(hStr,10)||1}initialProps=registryItem.defaultProps?JSON.parse(JSON.stringify(registryItem.defaultProps)):{}}else return;customProps&&(initialProps={...initialProps,...customProps},customProps.content&&(initialProps.content={...initialProps.content,...customProps.content})),w$1>gridSize.cols&&(w$1=gridSize.cols);let targetX=1,targetY=1,found=!1,currentMaxY=currentWidgets.reduce((max,w$2)=>Math.max(max,w$2.layout.y+w$2.layout.h),1);for(let y$2=1;y$2<=currentMaxY+h$3;y$2++){for(let x$2=1;x$2<=gridSize.cols-w$1+1;x$2++)if(!currentWidgets.some(existing=>{let e$4=existing.layout;return x$2<e$4.x+e$4.w&&x$2+w$1>e$4.x&&y$2<e$4.y+e$4.h&&y$2+h$3>e$4.y})){targetX=x$2,targetY=y$2,found=!0;break}if(found)break}let newWidget={id:`w-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,type,props:initialProps,layout:{x:targetX,y:targetY,w:w$1,h:h$3}};currentWidgets.push(newWidget)}),currentWidgets}),setIsCatalogOpen(!1)},addWidget=(item,setIsCatalogOpen,customProps)=>{addWidgets([item],setIsCatalogOpen,customProps)},removeWidget=id$3=>{setWidgets(prev=>prev.filter(w$1=>w$1.id!==id$3))},resetWidgets=()=>{setWidgets([]),setGridSize(DEFAULT_GRID_SIZE$1)},updateWidgetPosition=(id$3,targetX,targetY)=>{setLayoutPreview(null),setWidgets(prev=>{let activeWidget=prev.find(w$1=>w$1.id===id$3);if(!activeWidget)return prev;let clamped=clampWidget({...activeWidget.layout,x:targetX,y:targetY},gridSize.cols);return resolveCollisions(prev,{...activeWidget,layout:clamped})})},updateLayout$1=(id$3,layout$1)=>{setWidgets(prev=>{let activeWidget=prev.find(w$1=>w$1.id===id$3);if(!activeWidget)return prev;let clamped=clampWidget({...activeWidget.layout,...layout$1},gridSize.cols);return compactLayout(resolveCollisions(prev,{...activeWidget,layout:clamped}))})},handleUpdateWidgetData=(0,import_react.useCallback)((id$3,updates)=>{setWidgets(prev=>prev.map(w$1=>{if(w$1.id===id$3){let newProps={...w$1.props};return updates.content&&(newProps.content={...newProps.content||{},...updates.content}),updates.styles&&(newProps.styles={...newProps.styles||{},...updates.styles}),Object.keys(updates).forEach(key$1=>{key$1!==`content`&&key$1!==`styles`&&(newProps[key$1]=updates[key$1])}),{...w$1,props:newProps}}return w$1}))},[]),HOVER_THROTTLE_MS=isMobile$1?60:30,lastHoverTime=(0,import_react.useRef)(0);return{isWidgetEditMode,setIsWidgetEditMode,widgets,setWidgets,gridSize,setGridSize,widgetSnapshot,setWidgetSnapshot,layoutPreview,setLayoutPreview,isDragging:isDragging$2,setIsDragging,registry,addWidgets,addWidget,removeWidget,resetWidgets,updateWidgetPosition,updateLayout:updateLayout$1,handleUpdateWidgetData,onCellHover:(0,import_react.useCallback)((x$2,y$2,item)=>{if(!item||!item.id)return;let now$4=Date.now();if(now$4-lastHoverTime.current<HOVER_THROTTLE_MS)return;lastHoverTime.current=now$4;let draggingWidget=widgets.find(w$2=>w$2.id===item.id);if(!draggingWidget)return;let{w:w$1,h:h$3}=draggingWidget.layout,clamped=clampWidget({x:x$2,y:y$2,w:w$1,h:h$3},gridSize.cols);if(layoutPreview){let currentPreviewWidget=layoutPreview.find(w$2=>w$2.id===item.id);if(currentPreviewWidget&&currentPreviewWidget.layout.x===clamped.x&&currentPreviewWidget.layout.y===clamped.y)return}setLayoutPreview(resolveCollisions(widgets,{...draggingWidget,layout:{...draggingWidget.layout,x:clamped.x,y:clamped.y}}))},[widgets,gridSize.cols,layoutPreview,isMobile$1]),ensureMobileConstraints:widgets$1=>{let sorted=[...widgets$1].sort((a$4,b$3)=>a$4.layout.y===b$3.layout.y?a$4.layout.x-b$3.layout.x:a$4.layout.y-b$3.layout.y),mobileWidgets=[],occupied=new Set;return sorted.forEach(w$1=>{let width=Math.min(w$1.layout.w,2),height=w$1.layout.h,startX=Math.min(w$1.layout.x,2-width+1);startX<1&&(startX=1);let startY=w$1.layout.y,x$2=startX,y$2=startY,found=!1;for(;!found;){let fits=!0;if(x$2+width-1>2)fits=!1;else for(let dy=0;dy<height;dy++){for(let dx=0;dx<width;dx++)if(occupied.has(`${x$2+dx},${y$2+dy}`)){fits=!1;break}if(!fits)break}if(fits){mobileWidgets.push({...w$1,layout:{...w$1.layout,x:x$2,y:y$2,w:width}});for(let dy=0;dy<height;dy++)for(let dx=0;dx<width;dx++)occupied.add(`${x$2+dx},${y$2+dy}`);found=!0}else x$2++,x$2>2-width+1&&(x$2=1,y$2++)}}),mobileWidgets}}};var DEFAULT_GRID_SIZE={cols:4,rows:1},MainPage=()=>{useAutoScroll();let isMobile$1=useIsMobile(),{isEditMode:isMenuEditMode}=useMenu(),{isWidgetEditMode,setIsWidgetEditMode,widgets,setWidgets,gridSize,setGridSize,widgetSnapshot,layoutPreview,setLayoutPreview,isDragging:isDragging$2,setIsDragging,registry,addWidget,removeWidget,resetWidgets,updateWidgetPosition,updateLayout:updateLayout$1,handleUpdateWidgetData,onCellHover,ensureMobileConstraints,addWidgets}=useDashboardLogic(isMobile$1),[isCatalogOpen,setIsCatalogOpen]=(0,import_react.useState)(!1),[isArrangeConfirmOpen,setIsArrangeConfirmOpen]=(0,import_react.useState)(!1),[isResetConfirmOpen,setIsResetConfirmOpen]=(0,import_react.useState)(!1),[isBuilderOpen,setIsBuilderOpen]=(0,import_react.useState)(!1),[isPresetManagerOpen,setIsPresetManagerOpen]=(0,import_react.useState)(!1),[editingWidgetData,setEditingWidgetData]=(0,import_react.useState)(null),[infoWidget,setInfoWidget]=(0,import_react.useState)(null),[showScrollTop,setShowScrollTop]=(0,import_react.useState)(!1),[selectedWidgetId,setSelectedWidgetId]=(0,import_react.useState)(null),[zoomedWidgetId,setZoomedWidgetId]=(0,import_react.useState)(null),{settings:headerSettings}=useHeaderSettings();(0,import_react.useEffect)(()=>(isCatalogOpen?document.body.style.overflow=`hidden`:document.body.style.overflow=``,()=>{document.body.style.overflow=``}),[isCatalogOpen]),(0,import_react.useEffect)(()=>{let handleScroll=()=>{window.scrollY>300?setShowScrollTop(!0):setShowScrollTop(!1)};return window.addEventListener(`scroll`,handleScroll),()=>window.removeEventListener(`scroll`,handleScroll)},[]);let scrollToTop=()=>{window.scrollTo({top:0,behavior:`smooth`})};(0,import_react.useEffect)(()=>{let handleGlobalClick=e$4=>{e$4.target.closest(`.global-physics-widget`)||setSelectedWidgetId(null)};return isWidgetEditMode&&window.addEventListener(`click`,handleGlobalClick),()=>window.removeEventListener(`click`,handleGlobalClick)},[isWidgetEditMode]);let handleReset=()=>{resetWidgets(),setIsResetConfirmOpen(!1)},handleArrange=()=>{setWidgets(prev=>compactLayout([...prev].sort((a$4,b$3)=>a$4.layout.y===b$3.layout.y?a$4.layout.x-b$3.layout.x:a$4.layout.y-b$3.layout.y))),setIsArrangeConfirmOpen(!1)},handleShowHelp=widget=>{let info=null;if(widget.type===`custom-block`||widget.type===`custom`)info={type:widget.type,label:widget.props.title||`Custom Widget`,category:`My Saved`,isSaved:!0,data:{...widget,name:widget.props.title}};else{let regItem=registry[widget.type];regItem&&(info={...regItem,type:widget.type,isSaved:!1})}info&&setInfoWidget(info)},handleLoadPreset=(newWidgets,newGridSize)=>{setWidgets(newWidgets),setGridSize(newGridSize),setIsPresetManagerOpen(!1)},currentDisplayWidgets=layoutPreview||widgets,widgetsToRender=isMobile$1?ensureMobileConstraints(currentDisplayWidgets):currentDisplayWidgets,maxWidgetY=widgetsToRender.reduce((max,w$1)=>Math.max(max,w$1.layout.y+w$1.layout.h),0),finalRows=Math.max(gridSize.rows,maxWidgetY,DEFAULT_GRID_SIZE.rows)+(isDragging$2?4:0);return isBuilderOpen?(0,import_jsx_runtime.jsx)(WidgetBuilder_default,{initialData:editingWidgetData,onExit:()=>{setIsBuilderOpen(!1),setEditingWidgetData(null)},onSave:savedData=>{setEditingWidgetData(savedData)}}):(0,import_jsx_runtime.jsxs)(DndProvider,{backend:isMobile$1?TouchBackend:HTML5Backend,options:isMobile$1?{delayTouchStart:800,enableMouseEvents:!0}:void 0,children:[(0,import_jsx_runtime.jsx)(CustomDragLayer,{}),(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen pb-20`,children:[(0,import_jsx_runtime.jsx)(Navigation_default,{}),(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`,children:[(0,import_jsx_runtime.jsx)(DashboardHeader_default,{isMenuEditMode,isWidgetEditMode,isMobile:isMobile$1,widgetSnapshot,setIsWidgetEditMode,setWidgets,setIsCatalogOpen,setIsBuilderOpen,setIsArrangeConfirmOpen,setIsPresetManagerOpen,resetWidgets:()=>setIsResetConfirmOpen(!0)}),(0,import_jsx_runtime.jsx)(DashboardGrid_default,{isMobile:isMobile$1,isMenuEditMode,isWidgetEditMode,gridSize,finalRows,widgetsToRender,registry,selectedWidgetId,removeWidget,updateLayout:updateLayout$1,setIsDragging,setLayoutPreview,onCellHover,updateWidgetPosition,setSelectedWidgetId,handleShowHelp,handleUpdateWidgetData,onWidgetClick:widgetId=>{headerSettings.showWidgetZoom&&setZoomedWidgetId(widgetId)},isZoomEnabled:headerSettings.showWidgetZoom})]}),isCatalogOpen&&(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] w-full max-w-4xl h-[80vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in zoom-in duration-200`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 border-b border-[var(--border-color)] flex justify-between items-center bg-[var(--bg-card-secondary)]`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-lg font-bold text-[var(--text-primary)]`,children:` `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsCatalogOpen(!1),className:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`,children:(0,import_jsx_runtime.jsx)(X,{})})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 min-h-0 flex flex-col relative`,children:(0,import_jsx_runtime.jsx)(WidgetGallery,{onSelect:(item,props)=>addWidget(item,setIsCatalogOpen,props),onMultiSelect:items=>addWidgets(items,setIsCatalogOpen),onEdit:data=>{setEditingWidgetData(data),setIsBuilderOpen(!0),setIsCatalogOpen(!1)},onCreate:()=>{setEditingWidgetData(null),setIsBuilderOpen(!0),setIsCatalogOpen(!1)}})})]})}),isArrangeConfirmOpen&&(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] w-full max-w-sm rounded-2xl shadow-2xl p-6 animate-in zoom-in duration-200`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-lg font-bold text-[var(--text-primary)] mb-2`,children:` `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[var(--text-secondary)] mb-6`,children:`   .`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3 justify-end`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsArrangeConfirmOpen(!1),className:`px-4 py-2 rounded-lg text-sm font-bold bg-[var(--bg-card-secondary)] text-[var(--text-secondary)] hover:bg-gray-200 transition-colors`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleArrange,className:`px-4 py-2 rounded-lg text-sm font-bold bg-[var(--btn-bg)] text-white hover:opacity-90 transition-colors`,children:`, `})]})]})}),isPresetManagerOpen&&(0,import_jsx_runtime.jsx)(PresetManager,{currentWidgets:widgets,currentGridSize:gridSize,onLoad:handleLoadPreset,onClose:()=>setIsPresetManagerOpen(!1)}),isResetConfirmOpen&&(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] w-full max-w-sm rounded-2xl shadow-2xl p-6 animate-in zoom-in duration-200`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-lg font-bold text-[var(--text-primary)] mb-2`,children:` `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[var(--text-secondary)] mb-6`,children:`   . ?`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3 justify-end`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsResetConfirmOpen(!1),className:`px-4 py-2 rounded-lg text-sm font-bold bg-[var(--bg-card-secondary)] text-[var(--text-secondary)] hover:bg-gray-200 transition-colors`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleReset,className:`px-4 py-2 rounded-lg text-sm font-bold bg-red-500 text-white hover:bg-red-600 transition-colors`,children:``})]})]})}),isBuilderOpen&&(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-50 bg-[#1F1F1F] animate-in slide-in-from-bottom-5 duration-300`,children:(0,import_jsx_runtime.jsx)(WidgetBuilder_default,{onExit:()=>{setIsBuilderOpen(!1),setEditingWidgetData(null)},initialData:editingWidgetData,onSave:savedData=>{setEditingWidgetData(savedData)}})}),infoWidget&&(0,import_jsx_runtime.jsx)(WidgetInfoModal,{widget:infoWidget,onClose:()=>setInfoWidget(null),showAction:!1}),zoomedWidgetId&&(()=>{let zoomedWidget=widgets.find(w$1=>w$1.id===zoomedWidgetId);if(!zoomedWidget)return null;let WidgetComponent=null;return WIDGET_COMPONENT_MAP[zoomedWidget.type]&&(WidgetComponent=WIDGET_COMPONENT_MAP[zoomedWidget.type]),(0,import_jsx_runtime.jsxs)(`div`,{className:`fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-8 backdrop-blur-md animate-in zoom-in duration-200`,onClick:()=>setZoomedWidgetId(null),children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setZoomedWidgetId(null),className:`absolute top-8 right-8 p-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors z-[101]`,children:(0,import_jsx_runtime.jsx)(X,{size:32})}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-full max-w-6xl aspect-video bg-[var(--bg-card)] rounded-3xl overflow-hidden shadow-2xl relative`,onClick:e$4=>e$4.stopPropagation(),children:zoomedWidget.type===`custom-block`||!WidgetComponent?(0,import_jsx_runtime.jsx)(BlockRenderer_default,{block:{id:zoomedWidget.id,type:(zoomedWidget.props||{}).type||zoomedWidget.type,content:(zoomedWidget.props||{}).content||{},styles:(zoomedWidget.props||{}).styles||{}},selectedBlockId:null,onSelectBlock:()=>{},onRemoveBlock:()=>{},activeContainer:null,onSetActiveContainer:()=>{},onUpdateBlock:()=>{}}):(0,import_jsx_runtime.jsx)(WidgetComponent,{...zoomedWidget.props||{},gridSize:{w:4,h:4},updateLayout:()=>{},widgetId:zoomedWidget.id,onInteraction:()=>{}})})]})})(),(0,import_jsx_runtime.jsx)(FloatingSettingsPanel_default,{defaultOpen:!isMobile$1,isWidgetEditMode,setIsWidgetEditMode,setIsCatalogOpen,setIsBuilderOpen,setIsArrangeConfirmOpen,setIsPresetManagerOpen,resetWidgets:()=>setIsResetConfirmOpen(!0),isMobile:isMobile$1}),(0,import_jsx_runtime.jsx)(`button`,{onClick:scrollToTop,className:`fixed bottom-24 md:bottom-8 right-8 p-3 rounded-full bg-[var(--btn-bg)] text-white shadow-lg transition-all duration-300 z-40 hover:scale-110 active:scale-95 ${showScrollTop?`opacity-100 translate-y-0`:`opacity-0 translate-y-10 pointer-events-none`}`,"aria-label":`Scroll to top`,children:(0,import_jsx_runtime.jsx)(ArrowUp,{size:24})})]})]},isMobile$1?`mobile`:`desktop`)},MainPage_default=MainPage;const usePostEditor=()=>{let{triggerPostCreation}=useCredits(),[viewMode,setViewMode]=(0,import_react.useState)(`album`),[posts,setPosts]=(0,import_react.useState)([]),[currentPostId,setCurrentPostId]=(0,import_react.useState)(null),[selectedAlbumId,setSelectedAlbumId]=(0,import_react.useState)(null),[isDirty,setIsDirty]=(0,import_react.useState)(!1),[title,_setTitle]=(0,import_react.useState)(``),setTitle=value=>{_setTitle(value),setIsDirty(!0)},[titleStyles,_setTitleStyles]=(0,import_react.useState)({fontSize:`30px`,fontWeight:`bold`,fontFamily:`'Noto Sans KR', sans-serif`,color:`#000000`,textAlign:`left`}),setTitleStyles=value=>{_setTitleStyles(value),setIsDirty(!0)},[blocks,_setBlocks]=(0,import_react.useState)([]),setBlocks=value=>{_setBlocks(value),setIsDirty(!0)},[stickers,_setStickers]=(0,import_react.useState)([]),setStickers=value=>{_setStickers(value),setIsDirty(!0)},[floatingTexts,_setFloatingTexts]=(0,import_react.useState)([]),setFloatingTexts=value=>{_setFloatingTexts(value),setIsDirty(!0)},[floatingImages,_setFloatingImages]=(0,import_react.useState)([]),setFloatingImages=value=>{_setFloatingImages(value),setIsDirty(!0)},[selectedIds,setSelectedIds]=(0,import_react.useState)([]),[selectedId,setSelectedId]=(0,import_react.useState)(null),[selectedType,setSelectedType]=(0,import_react.useState)(null),[rawInput,setRawInput]=(0,import_react.useState)(``),[tempImages,setTempImages]=(0,import_react.useState)([]),[selectedLayoutId,setSelectedLayoutId]=(0,import_react.useState)(`type-a`),[isAiProcessing,setIsAiProcessing]=(0,import_react.useState)(!1),[isSaving,setIsSaving]=(0,import_react.useState)(!1),[customAlbums,setCustomAlbums]=(0,import_react.useState)([]),[myTemplates,setMyTemplates]=(0,import_react.useState)([]),[showHiddenTemplates,setShowHiddenTemplates]=(0,import_react.useState)(!1),[mode,setMode]=(0,import_react.useState)(`AUTO`),[isFavorite,setIsFavorite]=(0,import_react.useState)(!1),[currentTags,_setCurrentTags]=(0,import_react.useState)([]),setTags=value=>{_setCurrentTags(value),setIsDirty(!0)},[targetAlbumIds,setTargetAlbumIds]=(0,import_react.useState)([]),[isPublic,setIsPublic]=(0,import_react.useState)(!0),[sortOption,setSortOption]=(0,import_react.useState)(`name`),[paperStyles,_setPaperStyles]=(0,import_react.useState)({backgroundColor:`#ffffff`,boxShadow:`0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)`}),setPaperStyles=value=>{_setPaperStyles(value),setIsDirty(!0)},fileInputRef=(0,import_react.useRef)(null);(0,import_react.useEffect)(()=>{supabase&&(fetchPosts(),fetchAlbums(),fetchMyTemplates());let params=new URLSearchParams(window.location.search),albumIdParam=params.get(`albumId`),postIdParam=params.get(`id`);if(postIdParam){let postId=Number(postIdParam);if(!isNaN(postId)){fetchPostsFromApi().then(fetchedPosts=>{setPosts(fetchedPosts);let targetPost=fetchedPosts.find(p$3=>p$3.id===postId);targetPost&&(setCurrentPostId(targetPost.id),_setTitle(targetPost.title),_setTitleStyles(targetPost.titleStyles||{fontSize:`30px`,fontWeight:`bold`,fontFamily:`'Noto Sans KR', sans-serif`,color:`#000000`,textAlign:`left`}),_setBlocks(targetPost.blocks),_setStickers(targetPost.stickers),_setFloatingTexts(targetPost.floatingTexts||[]),_setFloatingImages(targetPost.floatingImages||[]),_setCurrentTags(targetPost.tags||[]),setTargetAlbumIds(targetPost.albumIds||[]),targetPost.styles&&_setPaperStyles(targetPost.styles),targetPost.mode&&setMode(targetPost.mode),setIsFavorite(targetPost.isFavorite||!1),setIsPublic(targetPost.isPublic??!0),setViewMode(`read`))});return}}else albumIdParam&&(setSelectedAlbumId(albumIdParam),setViewMode(`folder`))},[]);let fetchPosts=async()=>{setPosts(await fetchPostsFromApi())},fetchAlbums=async()=>{let albums=await fetchAlbumsFromApi(),rooms=await fetchRoomsFromApi();setCustomAlbums([...albums,...rooms])},fetchMyTemplates=async()=>{setMyTemplates(await fetchMyPostTemplatesApi(showHiddenTemplates))};(0,import_react.useEffect)(()=>{supabase&&fetchMyTemplates()},[showHiddenTemplates]);let getMaxZ=()=>{let sZ=stickers.length>0?Math.max(...stickers.map(s$3=>s$3.zIndex)):0,tZ=floatingTexts.length>0?Math.max(...floatingTexts.map(t$4=>t$4.zIndex)):0,iZ=floatingImages.length>0?Math.max(...floatingImages.map(i$4=>i$4.zIndex)):0;return Math.max(sZ,tZ,iZ,0)},handlePostClick=post=>{setCurrentPostId(post.id),_setTitle(post.title),_setTitleStyles(post.titleStyles||{fontSize:`30px`,fontWeight:`bold`,fontFamily:`'Noto Sans KR', sans-serif`,color:`#000000`,textAlign:`left`}),_setBlocks(post.blocks),_setStickers(post.stickers),_setFloatingTexts(post.floatingTexts||[]),_setFloatingImages(post.floatingImages||[]),_setCurrentTags(post.tags||[]),setTargetAlbumIds(post.albumIds||[]),post.styles?_setPaperStyles(post.styles):_setPaperStyles({backgroundColor:`#ffffff`,boxShadow:`0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)`}),post.mode?setMode(post.mode):setMode(post.tags&&post.tags.length>0?`AUTO`:`MANUAL`),setIsFavorite(post.isFavorite||!1),setIsPublic(post.isPublic??!0),setViewMode(`read`),setIsDirty(!1)},handleSave=async(isTemp=!1)=>{if(!title.trim()&&!isTemp)return{success:!1,message:` !`,type:`danger`};let safeTags=Array.isArray(currentTags)?[...currentTags.filter(t$4=>typeof t$4==`string`)]:[],DRAFT_TAG=``;if(isTemp)safeTags.includes(DRAFT_TAG)||safeTags.push(DRAFT_TAG);else{let idx=safeTags.indexOf(DRAFT_TAG);idx>-1&&safeTags.splice(idx,1)}let safeAlbumIds=Array.isArray(targetAlbumIds)?targetAlbumIds.filter(id$3=>typeof id$3==`string`):[],finalAlbumIds=new Set(safeAlbumIds);if(mode===`AUTO`&&safeTags.length>0){let uniqueTags=Array.from(new Set(safeTags));for(let tag of uniqueTags){if(tag===DRAFT_TAG)continue;let existing=customAlbums.find(a$4=>(a$4.tag===tag||a$4.name===tag)&&(a$4.type===`album`||a$4.type===`room`));if(existing)finalAlbumIds.add(existing.id);else{let newId$1=await handleCreateAlbum(tag,[tag]);newId$1&&finalAlbumIds.add(newId$1)}}}let mergedAlbumIds=Array.from(finalAlbumIds),postData={id:currentPostId,title,blocks:blocks.filter(b$3=>!b$3.text||!b$3.text.includes(`<!--METADATA:`)),stickers,floatingTexts,floatingImages,titleStyles,tags:safeTags,albumIds:mergedAlbumIds,mode,isFavorite,isPublic:isTemp?!1:isPublic,styles:paperStyles};setIsSaving(!0);try{let savedPost=await savePostToApi(postData,!!currentPostId);return!currentPostId&&savedPost?.id&&setCurrentPostId(savedPost.id),triggerPostCreation(),isTemp?(setIsDirty(!1),setIsPublic(!1),_setCurrentTags(safeTags),{success:!0,message:` .
"#"  .`,type:`success`}):(await Promise.all([fetchPosts(),fetchAlbums()]),targetAlbumIds.length===1?(setSelectedAlbumId(targetAlbumIds[0]),setViewMode(`folder`)):setViewMode(`album`),setIsDirty(!1),{success:!0,message:` !`,type:`success`})}catch(e$4){return console.error(e$4),{success:!1,message:` :   .`,type:`danger`}}finally{setIsSaving(!1)}},handleDeleteAlbum=async id$3=>{showConfirmModal(` `,` ?`,`danger`,async()=>{await deleteAlbumApi(id$3),fetchAlbums(),closeConfirmModal()})},handleDeletePost=async id$3=>{showConfirmModal(` `,` ?`,`danger`,async()=>{await deletePostApi(id$3),await fetchPosts(),currentPostId===id$3&&(setCurrentPostId(null),setViewMode(selectedAlbumId?`folder`:`album`)),closeConfirmModal()})},handleToggleFavorite=async post=>{await savePostToApi({...post,isFavorite:!post.isFavorite},!0),fetchPosts()},handleToggleAlbumFavorite=async album=>{await updateAlbumApi(album.id,{...album,isFavorite:!album.isFavorite}),fetchAlbums()},handleSaveAsTemplate=async(name,thumbnailUrl)=>{name&&(await createPostTemplateApi({name,styles:paperStyles,stickers,floatingTexts,floatingImages,defaultFontColor:`#000000`,thumbnailUrl:typeof thumbnailUrl==`string`?thumbnailUrl:void 0})?(showConfirmModal(` `,` ! 
(   !)`,`success`,void 0,!0),fetchMyTemplates()):showConfirmModal(` `,`  .`,`danger`,void 0,!0))},handleDeleteTemplate=async templateId=>{showConfirmModal(` `,`   ?`,`danger`,async()=>{closeConfirmModal();try{await deletePostTemplateApi(templateId)?await fetchMyTemplates():alert(` :    .`)}catch(e$4){console.error(`Delete template error:`,e$4)}})},handleRestoreTemplate=async templateId=>{try{await restorePostTemplateApi(templateId)?(showConfirmModal(` `,`  ! `,`success`,void 0,!0),setShowHiddenTemplates(!1)):showConfirmModal(` `,`  .`,`danger`,void 0,!0)}catch(e$4){console.error(`Restore template error:`,e$4),showConfirmModal(``,`   .`,`danger`,void 0,!0)}},handleAiGenerate=async()=>{setIsAiProcessing(!0);try{let newBlocks=await generateBlogContent(rawInput,selectedLayoutId,tempImages);newBlocks.length>0&&setBlocks(newBlocks)}catch{showConfirmModal(``,`AI  `,`danger`,void 0,!0)}finally{setIsAiProcessing(!1)}},addWidgetSticker=(widgetType,widgetProps={})=>{let newSticker={id:`sticker-${Date.now()}`,x:50,y:50,w:200,h:200,rotation:0,zIndex:stickers.length+floatingTexts.length+floatingImages.length+1,opacity:1,widgetType,widgetProps,url:``};setStickers(prev=>[...prev,newSticker]),isDirty||setIsDirty(!0)},handleUpdate=(id$3,updates)=>{if(id$3===`title`){updates.styles?setTitleStyles(prev=>({...prev,...updates.styles})):setTitleStyles(prev=>({...prev,...updates}));return}setBlocks(prev=>prev.map(b$3=>b$3.id===id$3?{...b$3,...updates}:b$3)),setStickers(prev=>prev.map(s$3=>s$3.id===id$3?{...s$3,...updates}:s$3)),setFloatingTexts(prev=>prev.map(t$4=>t$4.id===id$3?{...t$4,...updates}:t$4)),setFloatingImages(prev=>prev.map(i$4=>i$4.id===id$3?{...i$4,...updates}:i$4))},handleSelect=(id$3,type,isMulti=!1)=>{if(!id$3){setSelectedIds([]),setSelectedId(null),setSelectedType(null);return}isMulti?setSelectedIds(prev=>{let newIds=prev.includes(id$3)?prev.filter(i$4=>i$4!==id$3):[...prev,id$3];return newIds.length>0?prev.includes(id$3)?setSelectedId(newIds[newIds.length-1]):(setSelectedId(id$3),setSelectedType(type)):(setSelectedId(null),setSelectedType(null)),newIds}):(setSelectedIds([id$3]),setSelectedId(id$3),setSelectedType(type))},handleDelete=id$3=>{let idsToDelete=[];id$3&&selectedIds.includes(id$3)?idsToDelete=selectedIds:id$3?idsToDelete=[id$3]:selectedIds.length>0&&(idsToDelete=selectedIds),idsToDelete.length!==0&&(setBlocks(prev=>prev.filter(b$3=>!idsToDelete.includes(b$3.id))),setStickers(prev=>prev.filter(s$3=>!idsToDelete.includes(s$3.id))),setFloatingTexts(prev=>prev.filter(t$4=>!idsToDelete.includes(t$4.id))),setFloatingImages(prev=>prev.filter(i$4=>!idsToDelete.includes(i$4.id))),idsToDelete.includes(selectedId||``)?(setSelectedId(null),setSelectedType(null),setSelectedIds(prev=>prev.filter(pid=>!idsToDelete.includes(pid)))):setSelectedIds(prev=>prev.filter(pid=>!idsToDelete.includes(pid))))},addSticker=url=>{let newSticker={id:`sticker-${Date.now()}`,x:`50%`,y:`50%`,w:100,h:100,rotation:0,zIndex:getMaxZ()+1,opacity:1,url};setStickers(prev=>[...prev,newSticker])},addFloatingText=()=>{setFloatingTexts(prev=>[...prev,{id:`text-${Date.now()}`,x:`50%`,y:`50%`,w:200,h:50,rotation:0,zIndex:getMaxZ()+1,text:`New Text`,styles:{fontSize:`16px`,fontWeight:`normal`,textAlign:`center`,color:`#000000`,backgroundColor:`transparent`,fontFamily:`Arial`}}])},addFloatingImage=async file=>{setIsAiProcessing(!0);let url=await uploadImageToSupabase(file);url&&setFloatingImages(prev=>[...prev,{id:`fimg-${Date.now()}`,x:`50%`,y:`50%`,w:200,h:200,rotation:0,zIndex:getMaxZ()+1,url}]),setIsAiProcessing(!1)},handleBlockImageUpload=async(file,blockId)=>{let url=await uploadImageToSupabase(file);url&&setBlocks(prev=>prev.map(b$3=>b$3.id===blockId?{...b$3,imageUrl:url}:b$3))},changeZIndex=(id$3,direction)=>{let currentZ=getMaxZ();handleUpdate(id$3,{zIndex:direction===`up`?currentZ+1:Math.max(0,currentZ-1)})},handleAlbumClick=albumId=>{setSelectedAlbumId(albumId),setViewMode(albumId===null?`album`:`folder`)},handleCreateAlbum=async(name,tags,parentId,type=`album`,roomConfig,coverConfig)=>{try{let res;return res=type===`room`?await createRoomApi({name,description:roomConfig?.description,password:roomConfig?.password,coverConfig,tag:tags[0],hashtags:tags}):await createAlbumApi({name,tags,tag:tags[0],hashtags:tags,type,parentId,coverConfig}),res?(fetchAlbums(),res.id):null}catch(e$4){return console.error(e$4),showConfirmModal(` `,e$4.message||`    .`,`danger`,void 0,!0),null}},handleUpdateAlbum=async(id$3,data)=>{await updateAlbumApi(id$3,data),fetchAlbums()},[confirmModal,setConfirmModal]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}}),closeConfirmModal=import_react.useCallback(()=>{setConfirmModal(prev=>({...prev,isOpen:!1}))},[]),showConfirmModal=import_react.useCallback((title$1,message,type=`info`,onConfirm,singleButton=!1,onCancel)=>{setConfirmModal({isOpen:!0,title:title$1,message,type,singleButton,onConfirm:onConfirm||closeConfirmModal,onCancel})},[closeConfirmModal]);return{viewMode,setViewMode,posts,title,setTitle,titleStyles,setTitleStyles,blocks,setBlocks,stickers,floatingTexts,floatingImages,selectedId,setSelectedId,selectedType,setSelectedType,rawInput,setRawInput,tempImages,setTempImages,selectedLayoutId,setSelectedLayoutId,isAiProcessing,isSaving,fileInputRef,handleStartWriting:initialAlbumId=>{let validAlbumId=typeof initialAlbumId==`string`||typeof initialAlbumId==`number`?String(initialAlbumId):void 0;setCurrentPostId(null),_setTitle(``),setRawInput(``),_setTitleStyles({fontSize:`30px`,fontWeight:`bold`,fontFamily:`'Noto Sans KR', sans-serif`,color:`#000000`,textAlign:`left`}),_setBlocks([{id:`b-${Date.now()}`,type:`paragraph`,text:``}]),_setStickers([]),_setFloatingTexts([]),_setFloatingImages([]),setTempImages([]),setSelectedId(null),setSelectedType(null),setSelectedIds([]),_setCurrentTags([]),_setPaperStyles({backgroundColor:`#ffffff`,boxShadow:`0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)`}),validAlbumId?(setTargetAlbumIds([validAlbumId]),setMode(`MANUAL`)):(setTargetAlbumIds([]),setMode(`AUTO`)),setIsFavorite(!1),setIsPublic(!0),setViewMode(`editor`),setIsDirty(!1)},handlePostClick,handleSave,handleAiGenerate,handleUpdate,handleDelete,addSticker,addWidgetSticker,addFloatingText,addFloatingImage,handleBlockImageUpload,changeZIndex,currentPostId,selectedAlbumId,handleAlbumClick,customAlbums,handleCreateAlbum,handleUpdateAlbum,handleDeleteAlbum,currentTags,setTags,targetAlbumIds,setTargetAlbumIds,sortOption,setSortOption,handleDeletePost,handleToggleFavorite,handleToggleAlbumFavorite,mode,setMode,isFavorite,setIsFavorite,isPublic,setIsPublic,refreshPosts:fetchPosts,setStickers,setFloatingTexts,setFloatingImages,paperStyles,setPaperStyles,applyPaperPreset:preset$1=>{setPaperStyles(preset$1.styles),preset$1.defaultFontColor&&setTitleStyles(prev=>({...prev,color:preset$1.defaultFontColor})),setStickers(prev=>prev.filter(s$3=>!s$3.id.startsWith(`tmpl-`))),setFloatingTexts(prev=>prev.filter(t$4=>!t$4.id.startsWith(`tmpl-`))),setFloatingImages(prev=>prev.filter(i$4=>!i$4.id.startsWith(`tmpl-`)));let presetStickers=(preset$1.stickers||[]).map(s$3=>({...s$3,id:`preset-${Date.now()}-${Math.random()}`}));setStickers(prev=>[...prev.filter(s$3=>!s$3.id.startsWith(`tmpl-`)),...presetStickers])},handleSaveAsTemplate,handleDeleteTemplate,myTemplates,applyTemplate:template=>{setPaperStyles(template.styles||{backgroundColor:`#ffffff`,boxShadow:`0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)`,padding:`3rem`}),setTitleStyles(prev=>({...prev,color:template.defaultFontColor||`#000000`})),setStickers(prev=>{let userStickers=prev.filter(s$3=>!s$3.id.startsWith(`tmpl-`)),newStickers=(template.stickers||[]).map(s$3=>({...s$3,id:`tmpl-sticker-${Date.now()}-${Math.random()}`}));return[...userStickers,...newStickers]}),setFloatingTexts(prev=>{let userTexts=prev.filter(t$4=>!t$4.id.startsWith(`tmpl-`)),newTexts=(template.floatingTexts||[]).map(t$4=>({...t$4,id:`tmpl-text-${Date.now()}-${Math.random()}`}));return[...userTexts,...newTexts]}),setFloatingImages(prev=>{let userImages=prev.filter(i$4=>!i$4.id.startsWith(`tmpl-`)),newImages=(template.floatingImages||[]).map(i$4=>({...i$4,id:`tmpl-fimg-${Date.now()}-${Math.random()}`}));return[...userImages,...newImages]})},fetchMyTemplates,isDirty,setIsDirty,confirmModal,showConfirmModal,closeConfirmModal,selectedIds,handleSelect,showHiddenTemplates,setShowHiddenTemplates,handleRestoreTemplate}};var DroppableBreadcrumbItem=({item,isLast,index:index$2})=>{let{setNodeRef,isOver}=useDroppable({id:item.id===void 0?`breadcrumb-disabled-${index$2}`:`breadcrumb-${item.id}`,disabled:item.id===void 0||item.id===null||isLast,data:{type:`BREADCRUMB`,albumId:item.id}}),Icon$1=item.icon;return(0,import_jsx_runtime.jsx)(`div`,{ref:setNodeRef,className:`flex items-center gap-1 transition-all duration-200 rounded-lg px-2 -mx-1 border border-transparent ${isOver?`bg-indigo-50 text-indigo-600 scale-105 border-indigo-200 shadow-sm`:``}`,children:item.onClick&&!isLast?(0,import_jsx_runtime.jsxs)(`button`,{onClick:item.onClick,className:`flex items-center gap-1 hover:text-[var(--text-primary)] hover:underline transition-colors py-0.5`,children:[Icon$1&&(0,import_jsx_runtime.jsx)(Icon$1,{size:14}),(0,import_jsx_runtime.jsx)(`span`,{className:`truncate max-w-[150px]`,children:item.label})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 font-semibold py-0.5 ${isLast?`text-[var(--text-primary)]`:``}`,children:[Icon$1&&(0,import_jsx_runtime.jsx)(Icon$1,{size:14,className:isLast?`text-indigo-500`:``}),(0,import_jsx_runtime.jsx)(`span`,{className:`truncate max-w-[200px]`,children:item.label})]})})},PostBreadcrumb=({items})=>(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center gap-2 text-sm text-[var(--text-secondary)]`,children:items.map((item,index$2)=>(0,import_jsx_runtime.jsxs)(import_react.Fragment,{children:[index$2>0&&(0,import_jsx_runtime.jsx)(ChevronRight,{size:14,className:`text-[var(--text-tertiary)]`}),(0,import_jsx_runtime.jsx)(DroppableBreadcrumbItem,{item,isLast:index$2===items.length-1,index:index$2})]},index$2))}),PostBreadcrumb_default=PostBreadcrumb;const useBreadcrumbs=(currentId,customAlbums,onNavigate,baseLabel=` `,disableLast=!0)=>(0,import_react.useMemo)(()=>{let items=[{id:null,label:baseLabel,icon:House,onClick:()=>onNavigate(null)}];if(currentId===`__others__`)return items.push({id:`__all__`,label:`  `,icon:Folder,onClick:()=>onNavigate(`__all__`)}),items.push({id:`__others__`,label:``,icon:Folder,onClick:disableLast?void 0:()=>onNavigate(`__others__`)}),items;if(currentId===`__all__`)return items.push({id:`__all__`,label:`  `,icon:Folder,onClick:disableLast?void 0:()=>onNavigate(`__all__`)}),items;if(!currentId)return items;let chain=[],curr=customAlbums.find(a$4=>String(a$4.id)===String(currentId)),depth=0;for(;curr&&depth<10&&(chain.unshift(curr),curr.parentId);)curr=customAlbums.find(a$4=>String(a$4.id)===String(curr.parentId)),depth++;return chain.forEach((album,index$2)=>{let isRoot=!album.parentId,isLast=index$2===chain.length-1;items.push({id:album.id,label:album.name,icon:isRoot?Book:Folder,onClick:isLast&&disableLast?void 0:()=>onNavigate(album.id)})}),items},[currentId,customAlbums,onNavigate,baseLabel,disableLast]);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key$1,arg){try{var info=gen[key$1](arg),value=info.value}catch(error$1){reject(error$1);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self$1=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self$1,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,`next`,value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,`throw`,err)}_next(void 0)})}}var require_lodash=__commonJSMin(((exports,module)=>{var FUNC_ERROR_TEXT=`Expected a function`,NAN=NaN,symbolTag=`[object Symbol]`,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof global==`object`&&global&&global.Object===Object&&global,freeSelf=typeof self==`object`&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function(`return this`)(),objectToString=Object.prototype.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce$1(func,wait,options$1){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if(typeof func!=`function`)throw TypeError(FUNC_ERROR_TEXT);wait=toNumber(wait)||0,isObject(options$1)&&(leading=!!options$1.leading,maxing=`maxWait`in options$1,maxWait=maxing?nativeMax(toNumber(options$1.maxWait)||0,wait):maxWait,trailing=`trailing`in options$1?!!options$1.trailing:trailing);function invokeFunc(time$1){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time$1,result=func.apply(thisArg,args),result}function leadingEdge(time$1){return lastInvokeTime=time$1,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time$1):result}function remainingWait(time$1){var timeSinceLastCall=time$1-lastCallTime,timeSinceLastInvoke=time$1-lastInvokeTime,result$1=wait-timeSinceLastCall;return maxing?nativeMin(result$1,maxWait-timeSinceLastInvoke):result$1}function shouldInvoke(time$1){var timeSinceLastCall=time$1-lastCallTime,timeSinceLastInvoke=time$1-lastInvokeTime;return lastCallTime===void 0||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time$1=now();if(shouldInvoke(time$1))return trailingEdge(time$1);timerId=setTimeout(timerExpired,remainingWait(time$1))}function trailingEdge(time$1){return timerId=void 0,trailing&&lastArgs?invokeFunc(time$1):(lastArgs=lastThis=void 0,result)}function cancel(){timerId!==void 0&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0}function flush$1(){return timerId===void 0?result:trailingEdge(now())}function debounced(){var time$1=now(),isInvoking=shouldInvoke(time$1);if(lastArgs=arguments,lastThis=this,lastCallTime=time$1,isInvoking){if(timerId===void 0)return leadingEdge(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return timerId===void 0&&(timerId=setTimeout(timerExpired,wait)),result}return debounced.cancel=cancel,debounced.flush=flush$1,debounced}function isObject(value){var type=typeof value;return!!value&&(type==`object`||type==`function`)}function isObjectLike(value){return!!value&&typeof value==`object`}function isSymbol(value){return typeof value==`symbol`||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toNumber(value){if(typeof value==`number`)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other=typeof value.valueOf==`function`?value.valueOf():value;value=isObject(other)?other+``:other}if(typeof value!=`string`)return value===0?value:+value;value=value.replace(reTrim,``);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=debounce$1})),import_lodash=__toESM(require_lodash(),1),NativeSpeechRecognition=typeof window<`u`&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),isNative=SpeechRecognition$1=>SpeechRecognition$1===NativeSpeechRecognition,isAndroid=(()=>/(android)/i.test(typeof navigator<`u`?navigator.userAgent:``)),concatTranscripts=(...transcriptParts)=>transcriptParts.map(t$4=>t$4.trim()).join(` `).trim(),optionalParam=/\s*\((.*?)\)\s*/g,optionalRegex=/(\(\?:[^)]+\))\?/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*/g,escapeRegExp=/[-{}[\]+?.,\\^$|#]/g,commandToRegExp=command=>command instanceof RegExp?new RegExp(command.source,`i`):(command=command.replace(escapeRegExp,`\\$&`).replace(optionalParam,`(?:$1)?`).replace(namedParam,(match,optional)=>optional?match:`([^\\s]+)`).replace(splatParam,`(.*?)`).replace(optionalRegex,`\\s*$1?\\s*`),RegExp(`^`+command+`$`,`i`)),compareTwoStringsUsingDiceCoefficient=(first,second)=>{if(first=first.replace(/\s+/g,``).toLowerCase(),second=second.replace(/\s+/g,``).toLowerCase(),!first.length&&!second.length)return 1;if(!first.length||!second.length)return 0;if(first===second)return 1;if(first.length===1&&second.length===1||first.length<2||second.length<2)return 0;let firstBigrams=new Map;for(let i$4=0;i$4<first.length-1;i$4++){let bigram=first.substring(i$4,i$4+2),count=firstBigrams.has(bigram)?firstBigrams.get(bigram)+1:1;firstBigrams.set(bigram,count)}let intersectionSize=0;for(let i$4=0;i$4<second.length-1;i$4++){let bigram=second.substring(i$4,i$4+2),count=firstBigrams.has(bigram)?firstBigrams.get(bigram):0;count>0&&(firstBigrams.set(bigram,count-1),intersectionSize++)}return 2*intersectionSize/(first.length+second.length-2)},browserSupportsPolyfills=()=>typeof window<`u`&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0),RecognitionManager=class{setSpeechRecognition(SpeechRecognition$1){let browserSupportsRecogniser=!!SpeechRecognition$1&&(isNative(SpeechRecognition$1)||browserSupportsPolyfills());browserSupportsRecogniser&&(this.disableRecognition(),this.recognition=new SpeechRecognition$1,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(browserSupportsRecogniser)}subscribe(id$3,callbacks){this.subscribers[id$3]=callbacks}unsubscribe(id$3){delete this.subscribers[id$3]}emitListeningChange(listening){this.listening=listening,Object.keys(this.subscribers).forEach(id$3=>{let{onListeningChange}=this.subscribers[id$3];onListeningChange(listening)})}emitMicrophoneAvailabilityChange(isMicrophoneAvailable){this.isMicrophoneAvailable=isMicrophoneAvailable,Object.keys(this.subscribers).forEach(id$3=>{let{onMicrophoneAvailabilityChange}=this.subscribers[id$3];onMicrophoneAvailabilityChange(isMicrophoneAvailable)})}emitTranscriptChange(interimTranscript,finalTranscript){Object.keys(this.subscribers).forEach(id$3=>{let{onTranscriptChange}=this.subscribers[id$3];onTranscriptChange(interimTranscript,finalTranscript)})}emitClearTranscript(){Object.keys(this.subscribers).forEach(id$3=>{let{onClearTranscript}=this.subscribers[id$3];onClearTranscript()})}emitBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange){Object.keys(this.subscribers).forEach(id$3=>{let{onBrowserSupportsSpeechRecognitionChange,onBrowserSupportsContinuousListeningChange}=this.subscribers[id$3];onBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange),onBrowserSupportsContinuousListeningChange(browserSupportsSpeechRecognitionChange)})}disconnect(disconnectType){if(this.recognition&&this.listening)switch(disconnectType){case`ABORT`:this.pauseAfterDisconnect=!0,this.abort();break;case`RESET`:this.pauseAfterDisconnect=!1,this.abort();break;case`STOP`:default:this.pauseAfterDisconnect=!0,this.stop()}}disableRecognition(){this.recognition&&(this.recognition.onresult=()=>{},this.recognition.onend=()=>{},this.recognition.onerror=()=>{},this.listening&&this.stopListening())}onError(event){event&&event.error&&event.error===`not-allowed`&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}onRecognitionDisconnect(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}updateTranscript({results,resultIndex}){let currentIndex=resultIndex===void 0?results.length-1:resultIndex;this.interimTranscript=``,this.finalTranscript=``;for(let i$4=currentIndex;i$4<results.length;++i$4)results[i$4].isFinal&&(!isAndroid()||results[i$4][0].confidence>0)?this.updateFinalTranscript(results[i$4][0].transcript):this.interimTranscript=concatTranscripts(this.interimTranscript,results[i$4][0].transcript);let isDuplicateResult=!1;this.interimTranscript===``&&this.finalTranscript!==``?(this.previousResultWasFinalOnly&&(isDuplicateResult=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,isDuplicateResult||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}updateFinalTranscript(newFinalTranscript){this.finalTranscript=concatTranscripts(this.finalTranscript,newFinalTranscript)}resetTranscript(){this.disconnect(`RESET`)}startListening(){return _async_to_generator(function*({continuous=!1,language}={}){if(!this.recognition)return;let isContinuousChanged=continuous!==this.recognition.continuous,isLanguageChanged=language&&language!==this.recognition.lang;if((isContinuousChanged||isLanguageChanged)&&(this.listening&&(yield this.stopListening()),this.recognition.continuous=isContinuousChanged?continuous:this.recognition.continuous,this.recognition.lang=isLanguageChanged?language:this.recognition.lang),!this.listening){this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript());try{yield this.start(),this.emitListeningChange(!0)}catch(e$4){e$4 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1)}}}).apply(this,arguments)}abortListening(){return _async_to_generator(function*(){this.disconnect(`ABORT`),this.emitListeningChange(!1),yield new Promise(resolve=>{this.onStopListening=resolve})}).call(this)}stopListening(){return _async_to_generator(function*(){this.disconnect(`STOP`),this.emitListeningChange(!1),yield new Promise(resolve=>{this.onStopListening=resolve})}).call(this)}getRecognition(){return this.recognition}start(){return _async_to_generator(function*(){this.recognition&&!this.listening&&(yield this.recognition.start(),this.listening=!0)}).call(this)}stop(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}abort(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}constructor(SpeechRecognition$1){this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript=``,this.finalTranscript=``,this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=()=>{},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(SpeechRecognition$1),isAndroid()&&(this.updateFinalTranscript=(0,import_lodash.default)(this.updateFinalTranscript,250,{leading:!0}))}},CLEAR_TRANSCRIPT=`CLEAR_TRANSCRIPT`,APPEND_TRANSCRIPT=`APPEND_TRANSCRIPT`,clearTranscript=()=>({type:CLEAR_TRANSCRIPT}),appendTranscript=(interimTranscript,finalTranscript)=>({type:APPEND_TRANSCRIPT,payload:{interimTranscript,finalTranscript}}),transcriptReducer=(state,action)=>{switch(action.type){case CLEAR_TRANSCRIPT:return{interimTranscript:``,finalTranscript:``};case APPEND_TRANSCRIPT:return{interimTranscript:action.payload.interimTranscript,finalTranscript:concatTranscripts(state.finalTranscript,action.payload.finalTranscript)};default:throw Error()}},_browserSupportsSpeechRecognition=!!NativeSpeechRecognition,_browserSupportsContinuousListening=_browserSupportsSpeechRecognition&&!isAndroid(),recognitionManager,useSpeechRecognition=({transcribing=!0,clearTranscriptOnListen=!0,commands=[]}={})=>{let[recognitionManager$1]=(0,import_react.useState)(SpeechRecognition.getRecognitionManager()),[browserSupportsSpeechRecognition,setBrowserSupportsSpeechRecognition]=(0,import_react.useState)(_browserSupportsSpeechRecognition),[browserSupportsContinuousListening,setBrowserSupportsContinuousListening]=(0,import_react.useState)(_browserSupportsContinuousListening),[{interimTranscript,finalTranscript},dispatch$1]=(0,import_react.useReducer)(transcriptReducer,{interimTranscript:recognitionManager$1.interimTranscript,finalTranscript:``}),[listening,setListening]=(0,import_react.useState)(recognitionManager$1.listening),[isMicrophoneAvailable,setMicrophoneAvailable]=(0,import_react.useState)(recognitionManager$1.isMicrophoneAvailable),commandsRef=(0,import_react.useRef)(commands);commandsRef.current=commands;let dispatchClearTranscript=()=>{dispatch$1(clearTranscript())},resetTranscript=(0,import_react.useCallback)(()=>{recognitionManager$1.resetTranscript(),dispatchClearTranscript()},[recognitionManager$1]),testFuzzyMatch=(command,input,fuzzyMatchingThreshold)=>{let commandWithoutSpecials=(typeof command==`object`?command.toString():command).replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,``).replace(/  +/g,` `).trim(),howSimilar=compareTwoStringsUsingDiceCoefficient(commandWithoutSpecials,input);return howSimilar>=fuzzyMatchingThreshold?{command,commandWithoutSpecials,howSimilar,isFuzzyMatch:!0}:null},testMatch=(command,input)=>{let result=commandToRegExp(command).exec(input);return result?{command,parameters:result.slice(1)}:null},matchCommands=(0,import_react.useCallback)((newInterimTranscript,newFinalTranscript)=>{commandsRef.current.forEach(({command,callback,matchInterim=!1,isFuzzyMatch=!1,fuzzyMatchingThreshold=.8,bestMatchOnly=!1})=>{let input=!newFinalTranscript&&matchInterim?newInterimTranscript.trim():newFinalTranscript.trim(),results=(Array.isArray(command)?command:[command]).map(subcommand=>isFuzzyMatch?testFuzzyMatch(subcommand,input,fuzzyMatchingThreshold):testMatch(subcommand,input)).filter(x$2=>x$2);if(isFuzzyMatch&&bestMatchOnly&&results.length>=2){results.sort((a$4,b$3)=>b$3.howSimilar-a$4.howSimilar);let{command:command$1,commandWithoutSpecials,howSimilar}=results[0];callback(commandWithoutSpecials,input,howSimilar,{command:command$1,resetTranscript})}else results.forEach(result=>{if(result.isFuzzyMatch){let{command:command$1,commandWithoutSpecials,howSimilar}=result;callback(commandWithoutSpecials,input,howSimilar,{command:command$1,resetTranscript})}else{let{command:command$1,parameters}=result;callback(...parameters,{command:command$1,resetTranscript})}})})},[resetTranscript]),handleTranscriptChange=(0,import_react.useCallback)((newInterimTranscript,newFinalTranscript)=>{transcribing&&dispatch$1(appendTranscript(newInterimTranscript,newFinalTranscript)),matchCommands(newInterimTranscript,newFinalTranscript)},[matchCommands,transcribing]),handleClearTranscript=(0,import_react.useCallback)(()=>{clearTranscriptOnListen&&dispatchClearTranscript()},[clearTranscriptOnListen]);return(0,import_react.useEffect)(()=>{let id$3=SpeechRecognition.counter;SpeechRecognition.counter+=1;let callbacks={onListeningChange:setListening,onMicrophoneAvailabilityChange:setMicrophoneAvailable,onTranscriptChange:handleTranscriptChange,onClearTranscript:handleClearTranscript,onBrowserSupportsSpeechRecognitionChange:setBrowserSupportsSpeechRecognition,onBrowserSupportsContinuousListeningChange:setBrowserSupportsContinuousListening};return recognitionManager$1.subscribe(id$3,callbacks),()=>{recognitionManager$1.unsubscribe(id$3)}},[transcribing,clearTranscriptOnListen,recognitionManager$1,handleTranscriptChange,handleClearTranscript]),{transcript:concatTranscripts(finalTranscript,interimTranscript),interimTranscript,finalTranscript,listening,isMicrophoneAvailable,resetTranscript,browserSupportsSpeechRecognition,browserSupportsContinuousListening}},SpeechRecognition={counter:0,applyPolyfill:PolyfillSpeechRecognition=>{recognitionManager?recognitionManager.setSpeechRecognition(PolyfillSpeechRecognition):recognitionManager=new RecognitionManager(PolyfillSpeechRecognition);let browserSupportsPolyfill=!!PolyfillSpeechRecognition&&browserSupportsPolyfills();_browserSupportsSpeechRecognition=browserSupportsPolyfill,_browserSupportsContinuousListening=browserSupportsPolyfill},removePolyfill:()=>{recognitionManager?recognitionManager.setSpeechRecognition(NativeSpeechRecognition):recognitionManager=new RecognitionManager(NativeSpeechRecognition),_browserSupportsSpeechRecognition=!!NativeSpeechRecognition,_browserSupportsContinuousListening=_browserSupportsSpeechRecognition&&!isAndroid()},getRecognitionManager:()=>(recognitionManager||=new RecognitionManager(NativeSpeechRecognition),recognitionManager),getRecognition:()=>SpeechRecognition.getRecognitionManager().getRecognition(),startListening:({continuous,language}={})=>_async_to_generator(function*(){yield SpeechRecognition.getRecognitionManager().startListening({continuous,language})})(),stopListening:()=>_async_to_generator(function*(){yield SpeechRecognition.getRecognitionManager().stopListening()})(),abortListening:()=>_async_to_generator(function*(){yield SpeechRecognition.getRecognitionManager().abortListening()})(),browserSupportsSpeechRecognition:()=>_browserSupportsSpeechRecognition,browserSupportsContinuousListening:()=>_browserSupportsContinuousListening},ContentBlock=({block,onUpdate,onDelete,onImageUpload,isSelected,onSelect,readOnly,dragHandleProps})=>{let fileInputRef1=(0,import_react.useRef)(null),fileInputRef2=(0,import_react.useRef)(null),textareaRef=(0,import_react.useRef)(null),{transcript,listening,resetTranscript,browserSupportsSpeechRecognition}=useSpeechRecognition(),[isRecordingHere,setIsRecordingHere]=(0,import_react.useState)(!1),baseTextRef=(0,import_react.useRef)(block.text||``);(0,import_react.useEffect)(()=>{textareaRef.current&&(textareaRef.current.style.height=`auto`,textareaRef.current.style.height=`${textareaRef.current.scrollHeight}px`)},[block.text,block.styles]),(0,import_react.useEffect)(()=>{if(listening&&isRecordingHere){let newText=`${baseTextRef.current} ${transcript}`.trim();onUpdate(block.id,`text`,newText)}},[transcript,listening,isRecordingHere]);let toggleRecording=e$4=>{if(e$4.stopPropagation(),!browserSupportsSpeechRecognition){alert(`     . Chrome .`);return}listening?(SpeechRecognition.stopListening(),setIsRecordingHere(!1)):(onSelect(),baseTextRef.current=block.text||``,resetTranscript(),setIsRecordingHere(!0),SpeechRecognition.startListening({continuous:!0,language:`ko-KR`}))},triggerFile=idx=>idx===1?fileInputRef1.current?.click():fileInputRef2.current?.click(),handleFileChange=(e$4,imgIndex)=>{e$4.target.files?.[0]&&onImageUpload(block.id,e$4.target.files[0],imgIndex)},handleDeleteImage=(e$4,imgIndex)=>{e$4.stopPropagation(),onUpdate(block.id,imgIndex===1?`imageUrl`:`imageUrl2`,``)},toggleImageFit=e$4=>{e$4.stopPropagation();let newFit=block.imageFit===`contain`?`cover`:`contain`;onUpdate(block.id,`imageFit`,newFit)},imgHeight=(block.styles||{}).imageHeight||`300px`,renderImageArea=(url,index$2,isFull=!1)=>{let fitMode=block.imageFit||`cover`;return!url&&readOnly?null:(0,import_jsx_runtime.jsxs)(`div`,{onClick:e$4=>{e$4.stopPropagation(),readOnly||(onSelect(),url||triggerFile(index$2))},className:`relative rounded-lg overflow-hidden group/img transition-all bg-gray-50
                    ${url?``:`border-2 border-dashed border-gray-300 hover:border-indigo-400 cursor-pointer flex flex-col items-center justify-center`} 
                    ${isSelected&&!readOnly?`ring-2 ring-indigo-300 ring-offset-2`:``}
                    ${isFull?`w-full`:`h-full`} 
                `,style:{height:url?imgHeight:`200px`},children:[url?(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`img`,{src:url,className:`w-full h-full ${fitMode===`contain`?`object-contain`:`object-cover`}`,style:{transform:`rotate(${block.imageRotation||0}deg)`},alt:`img`}),!readOnly&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>handleDeleteImage(e$4,index$2),className:`absolute top-2 right-2 bg-black/50 hover:bg-red-500 text-white w-6 h-6 rounded-full flex items-center justify-center opacity-0 group-hover/img:opacity-100 transition z-10`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:toggleImageFit,className:`absolute bottom-2 right-2 bg-white/80 hover:bg-white text-xs px-2 py-1 rounded shadow text-gray-700 opacity-0 group-hover/img:opacity-100 transition z-10 font-bold`,children:fitMode===`contain`?`  `:`  `})]})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`text-gray-400 hover:text-indigo-500 text-center select-none`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-2xl block mb-1`,children:``}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold`,children:` `})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`file`,hidden:!0,ref:index$2===1?fileInputRef1:fileInputRef2,onChange:e$4=>handleFileChange(e$4,index$2),accept:`image/*`})]})};return(0,import_jsx_runtime.jsxs)(`div`,{className:`group relative mb-6 flex gap-6 items-start rounded-xl transition ${readOnly?``:`hover:bg-gray-50 ${isSelected?`bg-gray-50`:``}`}`,onClick:e$4=>{e$4.stopPropagation(),readOnly||onSelect()},children:[!readOnly&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`div`,{...dragHandleProps,className:`absolute -left-10 top-1 p-1.5 text-gray-400 hover:text-indigo-600 rounded cursor-grab active:cursor-grabbing transition z-50
                            ${isSelected?`opacity-0 pointer-events-none`:`opacity-0 group-hover:opacity-100`}
                        `,children:(0,import_jsx_runtime.jsx)(GripVertical,{size:20})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:toggleRecording,className:`absolute -left-10 top-9 p-1.5 rounded transition-all duration-200 flex items-center justify-center z-50
                            ${isRecordingHere&&listening?`bg-red-100 text-red-600 animate-pulse ring-2 ring-red-200 opacity-100`:`bg-transparent text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 opacity-0 group-hover:opacity-100`}
                        `,title:listening?`  `:` `,children:isRecordingHere&&listening?(0,import_jsx_runtime.jsx)(MicOff,{size:18}):(0,import_jsx_runtime.jsx)(Mic,{size:18})}),!isSelected&&(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onDelete(block.id)},className:`absolute -right-12 top-0 bg-white border border-gray-200 shadow-sm p-1.5 rounded text-red-500 hover:bg-red-50 hover:border-red-200 opacity-0 group-hover:opacity-100 transition-all z-10`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:16})})]}),block.type===`image-full`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full flex flex-col gap-4`,children:[renderImageArea(block.imageUrl,1,!0),(0,import_jsx_runtime.jsx)(`textarea`,{ref:textareaRef,value:block.text,onChange:e$4=>onUpdate(block.id,`text`,e$4.target.value),placeholder:readOnly?``:` ...`,readOnly,rows:1,className:`w-full bg-transparent outline-none resize-none overflow-hidden leading-relaxed p-2 min-h-[3rem]`,style:{fontFamily:block.styles?.fontFamily,fontSize:block.styles?.fontSize||`18px`,textAlign:block.styles?.textAlign||`left`,color:block.styles?.color||`inherit`}})]}),block.type===`image-double`&&(0,import_jsx_runtime.jsx)(`div`,{className:`w-full flex flex-col gap-4`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-1/2`,children:renderImageArea(block.imageUrl,1,!0)}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-1/2`,children:renderImageArea(block.imageUrl2,2,!0)})]})}),block.type===`image-left`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full flex flex-col md:flex-row gap-4 md:gap-6 items-start`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full md:w-1/2 flex-shrink-0`,children:renderImageArea(block.imageUrl,1,!0)}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-full md:flex-1 min-w-0 md:pt-2 relative`,children:(0,import_jsx_runtime.jsx)(`textarea`,{ref:textareaRef,value:block.text,onChange:e$4=>onUpdate(block.id,`text`,e$4.target.value),placeholder:readOnly?``:` ...`,readOnly,rows:1,className:`w-full bg-transparent outline-none resize-none overflow-hidden leading-relaxed p-2 min-h-[3rem]`,style:{fontFamily:block.styles?.fontFamily,fontSize:block.styles?.fontSize||`18px`,textAlign:block.styles?.textAlign||`left`,color:block.styles?.color||`inherit`}})})]}),block.type===`image-right`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full flex flex-col md:flex-row gap-4 md:gap-6 items-start`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full md:flex-1 min-w-0 md:pt-2 relative order-2 md:order-1`,children:(0,import_jsx_runtime.jsx)(`textarea`,{ref:textareaRef,value:block.text,onChange:e$4=>onUpdate(block.id,`text`,e$4.target.value),placeholder:readOnly?``:` ...`,readOnly,rows:1,className:`w-full bg-transparent outline-none resize-none overflow-hidden leading-relaxed p-2 min-h-[3rem]`,style:{fontFamily:block.styles?.fontFamily,fontSize:block.styles?.fontSize||`18px`,textAlign:block.styles?.textAlign||`left`,color:block.styles?.color||`inherit`}})}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-full md:w-1/2 flex-shrink-0 order-1 md:order-2`,children:renderImageArea(block.imageUrl,1,!0)})]}),block.type===`paragraph`&&(0,import_jsx_runtime.jsx)(`div`,{className:`w-full`,children:(0,import_jsx_runtime.jsx)(`textarea`,{ref:textareaRef,value:block.text,onChange:e$4=>onUpdate(block.id,`text`,e$4.target.value),placeholder:readOnly?``:` ...`,readOnly,rows:1,className:`w-full block bg-transparent outline-none resize-none overflow-hidden leading-relaxed p-2 min-h-[75px] border-2 transition-colors rounded-lg ${isSelected?`border-indigo-200`:`border-transparent`}`,style:{fontFamily:block.styles?.fontFamily,fontSize:block.styles?.fontSize||`18px`,textAlign:block.styles?.textAlign||`left`,color:block.styles?.color||`inherit`,fontWeight:block.styles?.fontWeight||`normal`,fontStyle:block.styles?.fontStyle||`normal`,textDecoration:block.styles?.textDecoration||`none`,backgroundColor:block.styles?.backgroundColor||`transparent`}})})]})},ContentBlock_default=ContentBlock,ResizableItem=({id:id$3,x:x$2,y:y$2,w:w$1,h:h$3,rotation,zIndex,opacity=1,isSelected,readOnly,onSelect,onUpdate,onDoubleClick,children:children$1})=>{let[isDragging$2,setIsDragging]=(0,import_react.useState)(!1),[isResizing,setIsResizing]=(0,import_react.useState)(!1),[isRotating,setIsRotating]=(0,import_react.useState)(!1),elementRef=(0,import_react.useRef)(null),startPos=(0,import_react.useRef)({startX:0,startY:0,initialX:0,initialY:0,initialW:0,initialH:0,initialRotate:0,centerX:0,centerY:0}),handleMoveStart=e$4=>{if(readOnly)return;let target=e$4.target;if([`textarea`,`input`,`button`,`select`].includes(target.tagName.toLowerCase()))return;e$4.stopPropagation(),e$4.preventDefault(),onSelect(e$4.shiftKey),setIsDragging(!0);let currentX=elementRef.current?.offsetLeft||0,currentY=elementRef.current?.offsetTop||0;startPos.current={...startPos.current,startX:e$4.clientX,startY:e$4.clientY,initialX:currentX,initialY:currentY}};return(0,import_react.useEffect)(()=>{let handleMouseMove=e$4=>{if(isDragging$2){let deltaX=e$4.clientX-startPos.current.startX,deltaY=e$4.clientY-startPos.current.startY;onUpdate({x:startPos.current.initialX+deltaX,y:startPos.current.initialY+deltaY})}else if(isResizing){let deltaX=e$4.clientX-startPos.current.startX,deltaY=e$4.clientY-startPos.current.startY;onUpdate({w:Math.max(30,startPos.current.initialW+deltaX),h:Math.max(30,startPos.current.initialH+deltaY)})}else if(isRotating){let{centerX,centerY}=startPos.current;onUpdate({rotation:Math.atan2(e$4.clientY-centerY,e$4.clientX-centerX)*(180/Math.PI)+90})}},handleMouseUp=()=>{setIsDragging(!1),setIsResizing(!1),setIsRotating(!1)};return(isDragging$2||isResizing||isRotating)&&(window.addEventListener(`mousemove`,handleMouseMove),window.addEventListener(`mouseup`,handleMouseUp)),()=>{window.removeEventListener(`mousemove`,handleMouseMove),window.removeEventListener(`mouseup`,handleMouseUp)}},[isDragging$2,isResizing,isRotating,onUpdate]),(0,import_jsx_runtime.jsx)(`div`,{ref:elementRef,id:id$3,className:`absolute group`,style:{left:typeof x$2==`number`?`${x$2}px`:x$2,top:typeof y$2==`number`?`${y$2}px`:y$2,width:typeof w$1==`number`?`${w$1}px`:w$1,height:typeof h$3==`number`?`${h$3}px`:h$3,transform:`rotate(${rotation}deg)`,zIndex,opacity,cursor:`default`,touchAction:`none`},onMouseDown:handleMoveStart,onClick:e$4=>{e$4.stopPropagation(),onSelect(e$4.shiftKey)},children:(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full relative ${isSelected&&!readOnly?`ring-2 ring-indigo-500`:``}`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full pointer-events-auto`,children:children$1}),isSelected&&!readOnly&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`div`,{onMouseDown:e$4=>{e$4.stopPropagation(),e$4.preventDefault(),setIsResizing(!0);let currentW=elementRef.current?.offsetWidth||0,currentH=elementRef.current?.offsetHeight||0;startPos.current={...startPos.current,startX:e$4.clientX,startY:e$4.clientY,initialW:currentW,initialH:currentH}},className:`absolute -bottom-3 -right-3 w-6 h-6 bg-white border-2 border-indigo-500 rounded-full cursor-se-resize z-50 shadow-md hover:scale-110 transition`,title:` `}),(0,import_jsx_runtime.jsx)(`div`,{onMouseDown:e$4=>{e$4.stopPropagation(),e$4.preventDefault(),setIsRotating(!0);let rect=elementRef.current?.getBoundingClientRect();if(rect){let centerX=rect.left+rect.width/2,centerY=rect.top+rect.height/2;startPos.current={...startPos.current,centerX,centerY,initialRotate:rotation}}},className:`absolute -top-8 left-1/2 -translate-x-[20px] w-6 h-6 bg-white border-2 border-indigo-500 rounded-full cursor-grab z-50 flex items-center justify-center shadow-md hover:bg-indigo-50 hover:scale-110 transition`,title:``,children:(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] font-bold text-indigo-700`,children:``})}),(0,import_jsx_runtime.jsx)(`div`,{onMouseDown:handleMoveStart,className:`absolute -top-8 left-1/2 translate-x-[6px] w-6 h-6 bg-indigo-500 text-white border-2 border-indigo-500 rounded-full cursor-move z-50 flex items-center justify-center shadow-md hover:bg-indigo-600 hover:scale-110 transition`,title:``,children:(0,import_jsx_runtime.jsx)(Move,{size:12,strokeWidth:3})})]})]})})},ResizableItem_default=ResizableItem,EditorToolbar=({selectedId,selectedType,currentItem,onUpdate,onDelete,positionMode=`fixed`})=>{let[showTextMenu,setShowTextMenu]=import_react.useState(!1),[showBgMenu,setShowBgMenu]=import_react.useState(!1),itemType=currentItem?.type,currentZIndex=currentItem.zIndex||1,handleZIndexChange=change=>{onUpdate(selectedId,selectedType,{zIndex:Math.max(1,currentZIndex+change)})},isTextItem=selectedType===`block`&&itemType===`paragraph`||selectedType===`floating`||selectedType===`title`,isImageItem=selectedType===`block`&&itemType!==`paragraph`||selectedType===`sticker`||selectedType===`floatingImage`,handleTextUpdate=(key$1,value)=>{onUpdate(selectedId,selectedType,{styles:{...currentItem.styles||{},[key$1]:value}})};return(0,import_jsx_runtime.jsxs)(`div`,{className:`${positionMode===`fixed`?`fixed bottom-8 left-1/2 -translate-x-1/2`:`absolute top-full mt-2 left-1/2 -translate-x-1/2`} bg-white/95 backdrop-blur-md shadow-2xl border border-gray-200 rounded-2xl px-6 py-3 flex items-center z-[100] animate-in slide-in-from-bottom-5 text-gray-900`,onMouseDown:e$4=>e$4.stopPropagation(),onPointerDown:e$4=>e$4.stopPropagation(),onClick:e$4=>e$4.stopPropagation(),children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 border-r pr-4 mr-2 border-gray-200`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-gray-400 font-bold mr-1 whitespace-nowrap`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleZIndexChange(-1),className:`p-2 hover:bg-gray-100 rounded-full text-gray-600`,title:` `,children:(0,import_jsx_runtime.jsx)(SendToBack,{size:18})}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-mono w-4 text-center`,children:currentZIndex}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleZIndexChange(1),className:`p-2 hover:bg-gray-100 rounded-full text-gray-600`,title:` `,children:(0,import_jsx_runtime.jsx)(BringToFront,{size:18})})]}),isTextItem&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center gap-2 bg-gray-50 rounded-lg p-1 border`,children:(0,import_jsx_runtime.jsx)(`select`,{value:currentItem.styles?.fontFamily||FONT_FAMILIES[0].value,onChange:e$4=>handleTextUpdate(`fontFamily`,e$4.target.value),className:`bg-transparent text-sm outline-none cursor-pointer w-24 truncate px-1`,children:FONT_FAMILIES.map(font=>(0,import_jsx_runtime.jsx)(`option`,{value:font.value,children:font.name},font.name))})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 bg-gray-50 rounded-lg p-1 border`,children:[(0,import_jsx_runtime.jsx)(Type,{size:14,className:`text-gray-400 ml-1`}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,min:`10`,max:`170`,value:(()=>{let sizeStr=currentItem.styles?.fontSize||`18px`;return parseInt(sizeStr.replace(`px`,``))||18})(),onChange:e$4=>handleTextUpdate(`fontSize`,`${e$4.target.value}px`),className:`w-12 bg-transparent text-sm outline-none text-center font-mono`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-gray-400 pr-1`,children:`px`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex bg-gray-100 rounded-lg p-1 gap-1`,children:[`left`,`center`,`right`].map(align=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>handleTextUpdate(`textAlign`,align),className:`p-1.5 rounded-md ${(currentItem.styles?.textAlign||`left`)===align?`bg-white shadow-sm text-indigo-600`:`text-gray-400 hover:bg-gray-200`}`,children:[align===`left`&&(0,import_jsx_runtime.jsx)(TextAlignStart,{size:14}),align===`center`&&(0,import_jsx_runtime.jsx)(TextAlignCenter,{size:14}),align===`right`&&(0,import_jsx_runtime.jsx)(TextAlignEnd,{size:14})]},align))}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setShowTextMenu(!showTextMenu),className:`flex items-center gap-1 px-3 py-1.5 rounded hover:bg-gray-100 transition ${showTextMenu?`bg-gray-100`:``}`,title:` `,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-serif font-bold text-lg`,style:{color:currentItem.styles?.color||`#000000`,textDecoration:currentItem.styles?.textDecoration,fontStyle:currentItem.styles?.fontStyle},children:`T`}),(0,import_jsx_runtime.jsx)(ChevronDown,{size:12,className:`text-gray-400`})]}),showTextMenu&&(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute bottom-full left-0 mb-2 bg-white rounded-lg shadow-xl border border-gray-200 p-2 flex flex-col gap-2 min-w-[140px] animate-in fade-in zoom-in-95 duration-200`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between bg-gray-50 rounded p-1`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleTextUpdate(`fontWeight`,currentItem.styles?.fontWeight===`bold`?`normal`:`bold`),className:`p-1.5 rounded hover:bg-white hover:shadow-sm transition ${currentItem.styles?.fontWeight===`bold`?`bg-white shadow text-indigo-600`:`text-gray-500`}`,title:``,children:(0,import_jsx_runtime.jsx)(Bold,{size:16})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleTextUpdate(`fontStyle`,currentItem.styles?.fontStyle===`italic`?`normal`:`italic`),className:`p-1.5 rounded hover:bg-white hover:shadow-sm transition ${currentItem.styles?.fontStyle===`italic`?`bg-white shadow text-indigo-600`:`text-gray-500`}`,title:``,children:(0,import_jsx_runtime.jsx)(Italic,{size:16})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleTextUpdate(`textDecoration`,currentItem.styles?.textDecoration?.includes(`underline`)?`none`:`underline`),className:`p-1.5 rounded hover:bg-white hover:shadow-sm transition ${currentItem.styles?.textDecoration?.includes(`underline`)?`bg-white shadow text-indigo-600`:`text-gray-500`}`,title:``,children:(0,import_jsx_runtime.jsx)(Underline,{size:16})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleTextUpdate(`textDecoration`,currentItem.styles?.textDecoration?.includes(`line-through`)?`none`:`line-through`),className:`p-1.5 rounded hover:bg-white hover:shadow-sm transition ${currentItem.styles?.textDecoration?.includes(`line-through`)?`bg-white shadow text-indigo-600`:`text-gray-500`}`,title:``,children:(0,import_jsx_runtime.jsx)(Strikethrough,{size:16})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative h-8 rounded-lg overflow-hidden border border-gray-200 cursor-pointer group`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full flex items-center justify-center gap-2 bg-gray-50 group-hover:bg-gray-100 transition`,style:{backgroundColor:currentItem.styles?.color||`#00000010`},children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold text-gray-600 mix-blend-difference`,children:`Color`}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-4 h-4 rounded-full border border-gray-200 shadow-sm`,style:{backgroundColor:currentItem.styles?.color||`#000000`}})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`color`,value:currentItem.styles?.color||`#000000`,onChange:e$4=>handleTextUpdate(`color`,e$4.target.value),className:`absolute inset-0 opacity-0 cursor-pointer w-full h-full`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setShowBgMenu(!showBgMenu),className:`flex items-center gap-1 px-2 py-2 rounded hover:bg-gray-100 transition ${showBgMenu?`bg-gray-100`:``}`,title:` `,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`w-5 h-5 rounded-full border border-gray-300 shadow-sm flex items-center justify-center font-bold text-xs`,style:{backgroundColor:currentItem.styles?.backgroundColor||`transparent`},children:!currentItem.styles?.backgroundColor||currentItem.styles?.backgroundColor===`transparent`?`/`:``}),(0,import_jsx_runtime.jsx)(ChevronDown,{size:12,className:`text-gray-400`})]}),showBgMenu&&(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute bottom-full left-0 mb-2 bg-white rounded-lg shadow-xl border border-gray-200 p-2 flex flex-col gap-2 min-w-[140px] animate-in fade-in zoom-in-95 duration-200`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`relative h-8 rounded-lg overflow-hidden border border-gray-200 cursor-pointer group`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full flex items-center justify-center gap-2 bg-gray-50 group-hover:bg-gray-100 transition`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold text-gray-600`,children:`BG Color`}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-4 h-4 rounded-full border border-gray-200 shadow-sm`,style:{backgroundColor:currentItem.styles?.backgroundColor||`transparent`}})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`color`,value:currentItem.styles?.backgroundColor||`#ffffff`,onChange:e$4=>handleTextUpdate(`backgroundColor`,e$4.target.value),className:`absolute inset-0 opacity-0 cursor-pointer w-full h-full`})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleTextUpdate(`backgroundColor`,`transparent`),className:`w-full py-1.5 text-xs font-bold text-gray-500 hover:text-red-500 hover:bg-red-50 rounded transition`,children:` `})]})]})]}),isImageItem&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[selectedType===`block`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-gray-500 font-bold whitespace-nowrap`,children:` `}),(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`200`,max:`800`,step:`10`,value:parseInt(currentItem.styles?.imageHeight||`300`),onChange:e$4=>onUpdate(selectedId,`block`,{imageHeight:`${e$4.target.value}px`}),className:`w-32 accent-indigo-600 cursor-pointer h-2 bg-gray-200 rounded-lg appearance-none`})]}),(selectedType===`sticker`||selectedType===`floatingImage`)&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-gray-500 font-bold whitespace-nowrap`,children:``}),(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`0`,max:`1`,step:`0.01`,value:currentItem.opacity??1,onChange:e$4=>onUpdate(selectedId,selectedType,{opacity:parseFloat(e$4.target.value)}),className:`w-32 accent-indigo-600 cursor-pointer h-2 bg-gray-200 rounded-lg appearance-none`})]})]}),onDelete&&(0,import_jsx_runtime.jsx)(`div`,{className:`border-l pl-3 ml-2 text-gray-500`,children:(0,import_jsx_runtime.jsx)(`button`,{onClick:onDelete,className:`flex items-center justify-center text-red-500 hover:bg-red-50 w-8 h-5 rounded-lg transition`,title:``,children:(0,import_jsx_runtime.jsx)(Trash2,{size:18})})})]})},EditorToolbar_default=EditorToolbar,ToolbarOverlay=({selectedId,selectedType,currentItem,onUpdate,onDelete,scale:scale$1})=>{let[position$1,setPosition]=(0,import_react.useState)(null);return(0,import_react.useLayoutEffect)(()=>{let updatePosition=()=>{if(!selectedId)return;let targetEl$1=document.getElementById(selectedId);if(!targetEl$1)return;let containerEl=targetEl$1.closest(`.selection-zone`);if(!containerEl)return;let targetRect=targetEl$1.getBoundingClientRect(),containerRect=containerEl.getBoundingClientRect(),top=(targetRect.bottom-containerRect.top)/scale$1,centerLeft=(targetRect.left-containerRect.left+targetRect.width/2)/scale$1;setPosition({top:top+10,left:centerLeft})};updatePosition();let resizeObserver=new ResizeObserver(updatePosition),targetEl=document.getElementById(selectedId);return targetEl&&resizeObserver.observe(targetEl),window.addEventListener(`scroll`,updatePosition,!0),window.addEventListener(`resize`,updatePosition),()=>{resizeObserver.disconnect(),window.removeEventListener(`scroll`,updatePosition,!0),window.removeEventListener(`resize`,updatePosition)}},[selectedId,selectedType,scale$1]),!position$1||!selectedId?null:(0,import_jsx_runtime.jsx)(`div`,{style:{position:`absolute`,top:position$1.top,left:position$1.left,transform:`translateX(-50%)`,zIndex:9999,width:`max-content`,pointerEvents:`auto`,color:`#1f2937`},onMouseDown:e$4=>e$4.stopPropagation(),children:(0,import_jsx_runtime.jsx)(EditorToolbar_default,{selectedId,selectedType,currentItem,onUpdate,onDelete,positionMode:`inline`})})},ToolbarOverlay_default=ToolbarOverlay;function formatProdErrorMessage(code){return`Minified Redux error #${code}; visit https://redux.js.org/Errors?code=${code} for the full message or use the non-minified dev environment for full errors. `}var symbol_observable_default=(()=>typeof Symbol==`function`&&Symbol.observable||`@@observable`)(),randomString=()=>Math.random().toString(36).substring(7).split(``).join(`.`),actionTypes_default={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`};function isPlainObject(obj){if(typeof obj!=`object`||!obj)return!1;let proto=obj;for(;Object.getPrototypeOf(proto)!==null;)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(obj)===proto||Object.getPrototypeOf(obj)===null}function createStore(reducer$2,preloadedState,enhancer){if(typeof reducer$2!=`function`)throw Error(formatProdErrorMessage(2));if(typeof preloadedState==`function`&&typeof enhancer==`function`||typeof enhancer==`function`&&typeof arguments[3]==`function`)throw Error(formatProdErrorMessage(0));if(typeof preloadedState==`function`&&enhancer===void 0&&(enhancer=preloadedState,preloadedState=void 0),enhancer!==void 0){if(typeof enhancer!=`function`)throw Error(formatProdErrorMessage(1));return enhancer(createStore)(reducer$2,preloadedState)}let currentReducer=reducer$2,currentState=preloadedState,currentListeners=new Map,nextListeners=currentListeners,listenerIdCounter=0,isDispatching=!1;function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=new Map,currentListeners.forEach((listener,key$1)=>{nextListeners.set(key$1,listener)}))}function getState(){if(isDispatching)throw Error(formatProdErrorMessage(3));return currentState}function subscribe(listener){if(typeof listener!=`function`)throw Error(formatProdErrorMessage(4));if(isDispatching)throw Error(formatProdErrorMessage(5));let isSubscribed=!0;ensureCanMutateNextListeners();let listenerId=listenerIdCounter++;return nextListeners.set(listenerId,listener),function(){if(isSubscribed){if(isDispatching)throw Error(formatProdErrorMessage(6));isSubscribed=!1,ensureCanMutateNextListeners(),nextListeners.delete(listenerId),currentListeners=null}}}function dispatch$1(action){if(!isPlainObject(action))throw Error(formatProdErrorMessage(7));if(action.type===void 0)throw Error(formatProdErrorMessage(8));if(typeof action.type!=`string`)throw Error(formatProdErrorMessage(17));if(isDispatching)throw Error(formatProdErrorMessage(9));try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}return(currentListeners=nextListeners).forEach(listener=>{listener()}),action}function replaceReducer(nextReducer){if(typeof nextReducer!=`function`)throw Error(formatProdErrorMessage(10));currentReducer=nextReducer,dispatch$1({type:actionTypes_default.REPLACE})}function observable(){let outerSubscribe=subscribe;return{subscribe(observer){if(typeof observer!=`object`||!observer)throw Error(formatProdErrorMessage(11));function observeState(){let observerAsObserver=observer;observerAsObserver.next&&observerAsObserver.next(getState())}return observeState(),{unsubscribe:outerSubscribe(observeState)}},[symbol_observable_default](){return this}}}return dispatch$1({type:actionTypes_default.INIT}),{dispatch:dispatch$1,subscribe,getState,replaceReducer,[symbol_observable_default]:observable}}function bindActionCreator(actionCreator,dispatch$1){return function(...args){return dispatch$1(actionCreator.apply(this,args))}}function bindActionCreators(actionCreators,dispatch$1){if(typeof actionCreators==`function`)return bindActionCreator(actionCreators,dispatch$1);if(typeof actionCreators!=`object`||!actionCreators)throw Error(formatProdErrorMessage(16));let boundActionCreators={};for(let key$1 in actionCreators){let actionCreator=actionCreators[key$1];typeof actionCreator==`function`&&(boundActionCreators[key$1]=bindActionCreator(actionCreator,dispatch$1))}return boundActionCreators}function compose(...funcs){return funcs.length===0?arg=>arg:funcs.length===1?funcs[0]:funcs.reduce((a$4,b$3)=>(...args)=>a$4(b$3(...args)))}function applyMiddleware(...middlewares){return createStore2=>(reducer$2,preloadedState)=>{let store=createStore2(reducer$2,preloadedState),dispatch$1=()=>{throw Error(formatProdErrorMessage(15))},middlewareAPI={getState:store.getState,dispatch:(action,...args)=>dispatch$1(action,...args)};return dispatch$1=compose(...middlewares.map(middleware=>middleware(middlewareAPI)))(store.dispatch),{...store,dispatch:dispatch$1}}}var require_use_sync_external_store_with_selector_production=__commonJSMin((exports=>{var React$70=require_react();function is$1(x$2,y$2){return x$2===y$2&&(x$2!==0||1/x$2==1/y$2)||x$2!==x$2&&y$2!==y$2}var objectIs=typeof Object.is==`function`?Object.is:is$1,useSyncExternalStore=React$70.useSyncExternalStore,useRef$8=React$70.useRef,useEffect$35=React$70.useEffect,useMemo$4=React$70.useMemo,useDebugValue=React$70.useDebugValue})),require_with_selector=__commonJSMin(((exports,module)=>{module.exports=require_use_sync_external_store_with_selector_production()})),import_with_selector=require_with_selector(),IS_REACT_19=!0,REACT_ELEMENT_TYPE=Symbol.for(IS_REACT_19?`react.transitional.element`:`react.element`),REACT_PORTAL_TYPE=Symbol.for(`react.portal`),REACT_FRAGMENT_TYPE=Symbol.for(`react.fragment`),REACT_STRICT_MODE_TYPE=Symbol.for(`react.strict_mode`),REACT_PROFILER_TYPE=Symbol.for(`react.profiler`),REACT_CONSUMER_TYPE=Symbol.for(`react.consumer`),REACT_CONTEXT_TYPE=Symbol.for(`react.context`),REACT_FORWARD_REF_TYPE=Symbol.for(`react.forward_ref`),REACT_SUSPENSE_TYPE=Symbol.for(`react.suspense`),REACT_SUSPENSE_LIST_TYPE=Symbol.for(`react.suspense_list`),REACT_MEMO_TYPE=Symbol.for(`react.memo`),REACT_LAZY_TYPE=Symbol.for(`react.lazy`),ForwardRef=REACT_FORWARD_REF_TYPE,Memo=REACT_MEMO_TYPE;function typeOf(object){if(typeof object==`object`&&object){let{$$typeof}=object;switch($$typeof){case REACT_ELEMENT_TYPE:switch(object=object.type,object){case REACT_FRAGMENT_TYPE:case REACT_PROFILER_TYPE:case REACT_STRICT_MODE_TYPE:case REACT_SUSPENSE_TYPE:case REACT_SUSPENSE_LIST_TYPE:return object;default:switch(object&&=object.$$typeof,object){case REACT_CONTEXT_TYPE:case REACT_FORWARD_REF_TYPE:case REACT_LAZY_TYPE:case REACT_MEMO_TYPE:return object;case REACT_CONSUMER_TYPE:return object;default:return $$typeof}}case REACT_PORTAL_TYPE:return $$typeof}}}function isMemo(object){return typeOf(object)===REACT_MEMO_TYPE}function pureFinalPropsSelectorFactory(mapStateToProps,mapDispatchToProps,mergeProps,dispatch$1,{areStatesEqual,areOwnPropsEqual,areStatePropsEqual}){let hasRunAtLeastOnce=!1,state,ownProps,stateProps,dispatchProps,mergedProps;function handleFirstCall(firstState,firstOwnProps){return state=firstState,ownProps=firstOwnProps,stateProps=mapStateToProps(state,ownProps),dispatchProps=mapDispatchToProps(dispatch$1,ownProps),mergedProps=mergeProps(stateProps,dispatchProps,ownProps),hasRunAtLeastOnce=!0,mergedProps}function handleNewPropsAndNewState(){return stateProps=mapStateToProps(state,ownProps),mapDispatchToProps.dependsOnOwnProps&&(dispatchProps=mapDispatchToProps(dispatch$1,ownProps)),mergedProps=mergeProps(stateProps,dispatchProps,ownProps),mergedProps}function handleNewProps(){return mapStateToProps.dependsOnOwnProps&&(stateProps=mapStateToProps(state,ownProps)),mapDispatchToProps.dependsOnOwnProps&&(dispatchProps=mapDispatchToProps(dispatch$1,ownProps)),mergedProps=mergeProps(stateProps,dispatchProps,ownProps),mergedProps}function handleNewState(){let nextStateProps=mapStateToProps(state,ownProps),statePropsChanged=!areStatePropsEqual(nextStateProps,stateProps);return stateProps=nextStateProps,statePropsChanged&&(mergedProps=mergeProps(stateProps,dispatchProps,ownProps)),mergedProps}function handleSubsequentCalls(nextState,nextOwnProps){let propsChanged=!areOwnPropsEqual(nextOwnProps,ownProps),stateChanged=!areStatesEqual(nextState,state,nextOwnProps,ownProps);return state=nextState,ownProps=nextOwnProps,propsChanged&&stateChanged?handleNewPropsAndNewState():propsChanged?handleNewProps():stateChanged?handleNewState():mergedProps}return function(nextState,nextOwnProps){return hasRunAtLeastOnce?handleSubsequentCalls(nextState,nextOwnProps):handleFirstCall(nextState,nextOwnProps)}}function finalPropsSelectorFactory(dispatch$1,{initMapStateToProps,initMapDispatchToProps,initMergeProps,...options$1}){return pureFinalPropsSelectorFactory(initMapStateToProps(dispatch$1,options$1),initMapDispatchToProps(dispatch$1,options$1),initMergeProps(dispatch$1,options$1),dispatch$1,options$1)}function bindActionCreators$1(actionCreators,dispatch$1){let boundActionCreators={};for(let key$1 in actionCreators){let actionCreator=actionCreators[key$1];typeof actionCreator==`function`&&(boundActionCreators[key$1]=(...args)=>dispatch$1(actionCreator(...args)))}return boundActionCreators}function wrapMapToPropsConstant(getConstant){return function(dispatch$1){let constant=getConstant(dispatch$1);function constantSelector(){return constant}return constantSelector.dependsOnOwnProps=!1,constantSelector}}function getDependsOnOwnProps(mapToProps){return mapToProps.dependsOnOwnProps?!!mapToProps.dependsOnOwnProps:mapToProps.length!==1}function wrapMapToPropsFunc(mapToProps,methodName){return function(dispatch$1,{displayName}){let proxy=function(stateOrDispatch,ownProps){return proxy.dependsOnOwnProps?proxy.mapToProps(stateOrDispatch,ownProps):proxy.mapToProps(stateOrDispatch,void 0)};return proxy.dependsOnOwnProps=!0,proxy.mapToProps=function(stateOrDispatch,ownProps){proxy.mapToProps=mapToProps,proxy.dependsOnOwnProps=getDependsOnOwnProps(mapToProps);let props=proxy(stateOrDispatch,ownProps);return typeof props==`function`&&(proxy.mapToProps=props,proxy.dependsOnOwnProps=getDependsOnOwnProps(props),props=proxy(stateOrDispatch,ownProps)),props},proxy}}function createInvalidArgFactory(arg,name){return(dispatch$1,options$1)=>{throw Error(`Invalid value of type ${typeof arg} for ${name} argument when connecting component ${options$1.wrappedComponentName}.`)}}function mapDispatchToPropsFactory(mapDispatchToProps){return mapDispatchToProps&&typeof mapDispatchToProps==`object`?wrapMapToPropsConstant(dispatch$1=>bindActionCreators$1(mapDispatchToProps,dispatch$1)):mapDispatchToProps?typeof mapDispatchToProps==`function`?wrapMapToPropsFunc(mapDispatchToProps,`mapDispatchToProps`):createInvalidArgFactory(mapDispatchToProps,`mapDispatchToProps`):wrapMapToPropsConstant(dispatch$1=>({dispatch:dispatch$1}))}function mapStateToPropsFactory(mapStateToProps){return mapStateToProps?typeof mapStateToProps==`function`?wrapMapToPropsFunc(mapStateToProps,`mapStateToProps`):createInvalidArgFactory(mapStateToProps,`mapStateToProps`):wrapMapToPropsConstant(()=>({}))}function defaultMergeProps(stateProps,dispatchProps,ownProps){return{...ownProps,...stateProps,...dispatchProps}}function wrapMergePropsFunc(mergeProps){return function(dispatch$1,{displayName,areMergedPropsEqual}){let hasRunOnce=!1,mergedProps;return function(stateProps,dispatchProps,ownProps){let nextMergedProps=mergeProps(stateProps,dispatchProps,ownProps);return hasRunOnce?areMergedPropsEqual(nextMergedProps,mergedProps)||(mergedProps=nextMergedProps):(hasRunOnce=!0,mergedProps=nextMergedProps),mergedProps}}}function mergePropsFactory(mergeProps){return mergeProps?typeof mergeProps==`function`?wrapMergePropsFunc(mergeProps):createInvalidArgFactory(mergeProps,`mergeProps`):()=>defaultMergeProps}function defaultNoopBatch(callback){callback()}function createListenerCollection(){let first=null,last=null;return{clear(){first=null,last=null},notify(){defaultNoopBatch(()=>{let listener=first;for(;listener;)listener.callback(),listener=listener.next})},get(){let listeners=[],listener=first;for(;listener;)listeners.push(listener),listener=listener.next;return listeners},subscribe(callback){let isSubscribed=!0,listener=last={callback,next:null,prev:last};return listener.prev?listener.prev.next=listener:first=listener,function(){!isSubscribed||first===null||(isSubscribed=!1,listener.next?listener.next.prev=listener.prev:last=listener.prev,listener.prev?listener.prev.next=listener.next:first=listener.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(store,parentSub){let unsubscribe,listeners=nullListeners,subscriptionsAmount=0,selfSubscribed=!1;function addNestedSub(listener){trySubscribe();let cleanupListener=listeners.subscribe(listener),removed=!1;return()=>{removed||(removed=!0,cleanupListener(),tryUnsubscribe())}}function notifyNestedSubs(){listeners.notify()}function handleChangeWrapper(){subscription.onStateChange&&subscription.onStateChange()}function isSubscribed(){return selfSubscribed}function trySubscribe(){subscriptionsAmount++,unsubscribe||(unsubscribe=parentSub?parentSub.addNestedSub(handleChangeWrapper):store.subscribe(handleChangeWrapper),listeners=createListenerCollection())}function tryUnsubscribe(){subscriptionsAmount--,unsubscribe&&subscriptionsAmount===0&&(unsubscribe(),unsubscribe=void 0,listeners.clear(),listeners=nullListeners)}function trySubscribeSelf(){selfSubscribed||(selfSubscribed=!0,trySubscribe())}function tryUnsubscribeSelf(){selfSubscribed&&(selfSubscribed=!1,tryUnsubscribe())}let subscription={addNestedSub,notifyNestedSubs,handleChangeWrapper,isSubscribed,trySubscribe:trySubscribeSelf,tryUnsubscribe:tryUnsubscribeSelf,getListeners:()=>listeners};return subscription}var canUseDOM=()=>typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0,isDOM=canUseDOM(),isRunningInReactNative=()=>typeof navigator<`u`&&navigator.product===`ReactNative`,isReactNative=isRunningInReactNative(),getUseIsomorphicLayoutEffect=()=>isDOM||isReactNative?import_react.useLayoutEffect:import_react.useEffect,useIsomorphicLayoutEffect$1=getUseIsomorphicLayoutEffect();function is(x$2,y$2){return x$2===y$2?x$2!==0||y$2!==0||1/x$2==1/y$2:x$2!==x$2&&y$2!==y$2}function shallowEqual(objA,objB){if(is(objA,objB))return!0;if(typeof objA!=`object`||!objA||typeof objB!=`object`||!objB)return!1;let keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(let i$4=0;i$4<keysA.length;i$4++)if(!Object.prototype.hasOwnProperty.call(objB,keysA[i$4])||!is(objA[keysA[i$4]],objB[keysA[i$4]]))return!1;return!0}var REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={[ForwardRef]:FORWARD_REF_STATICS,[Memo]:MEMO_STATICS};function getStatics(component){return isMemo(component)?MEMO_STATICS:TYPE_STATICS[component.$$typeof]||REACT_STATICS}var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(targetComponent,sourceComponent){if(typeof sourceComponent!=`string`){if(objectPrototype){let inheritedComponent=getPrototypeOf(sourceComponent);inheritedComponent&&inheritedComponent!==objectPrototype&&hoistNonReactStatics(targetComponent,inheritedComponent)}let keys=getOwnPropertyNames(sourceComponent);getOwnPropertySymbols&&(keys=keys.concat(getOwnPropertySymbols(sourceComponent)));let targetStatics=getStatics(targetComponent),sourceStatics=getStatics(sourceComponent);for(let i$4=0;i$4<keys.length;++i$4){let key$1=keys[i$4];if(!KNOWN_STATICS[key$1]&&!(sourceStatics&&sourceStatics[key$1])&&!(targetStatics&&targetStatics[key$1])){let descriptor=getOwnPropertyDescriptor(sourceComponent,key$1);try{defineProperty(targetComponent,key$1,descriptor)}catch{}}}}return targetComponent}var ContextKey=Symbol.for(`react-redux-context`),gT=typeof globalThis<`u`?globalThis:{};function getContext(){if(!import_react.createContext)return{};let contextMap=gT[ContextKey]??=new Map,realContext=contextMap.get(import_react.createContext);return realContext||(realContext=import_react.createContext(null),contextMap.set(import_react.createContext,realContext)),realContext}var ReactReduxContext=getContext(),NO_SUBSCRIPTION_ARRAY=[null,null];function useIsomorphicLayoutEffectWithArgs(effectFunc,effectArgs,dependencies){useIsomorphicLayoutEffect$1(()=>effectFunc(...effectArgs),dependencies)}function captureWrapperProps(lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,childPropsFromStoreUpdate,notifyNestedSubs){lastWrapperProps.current=wrapperProps,renderIsScheduled.current=!1,childPropsFromStoreUpdate.current&&(childPropsFromStoreUpdate.current=null,notifyNestedSubs())}function subscribeUpdates(shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,isMounted,childPropsFromStoreUpdate,notifyNestedSubs,additionalSubscribeListener){if(!shouldHandleStateChanges)return()=>{};let didUnsubscribe=!1,lastThrownError=null,checkForUpdates=()=>{if(didUnsubscribe||!isMounted.current)return;let latestStoreState=store.getState(),newChildProps,error$1;try{newChildProps=childPropsSelector(latestStoreState,lastWrapperProps.current)}catch(e$4){error$1=e$4,lastThrownError=e$4}error$1||(lastThrownError=null),newChildProps===lastChildProps.current?renderIsScheduled.current||notifyNestedSubs():(lastChildProps.current=newChildProps,childPropsFromStoreUpdate.current=newChildProps,renderIsScheduled.current=!0,additionalSubscribeListener())};return subscription.onStateChange=checkForUpdates,subscription.trySubscribe(),checkForUpdates(),()=>{if(didUnsubscribe=!0,subscription.tryUnsubscribe(),subscription.onStateChange=null,lastThrownError)throw lastThrownError}}function strictEqual(a$4,b$3){return a$4===b$3}function connect(mapStateToProps,mapDispatchToProps,mergeProps,{pure,areStatesEqual=strictEqual,areOwnPropsEqual=shallowEqual,areStatePropsEqual=shallowEqual,areMergedPropsEqual=shallowEqual,forwardRef:forwardRef$6=!1,context=ReactReduxContext}={}){let Context$1=context,initMapStateToProps=mapStateToPropsFactory(mapStateToProps),initMapDispatchToProps=mapDispatchToPropsFactory(mapDispatchToProps),initMergeProps=mergePropsFactory(mergeProps),shouldHandleStateChanges=!!mapStateToProps;return WrappedComponent=>{let wrappedComponentName=WrappedComponent.displayName||WrappedComponent.name||`Component`,displayName=`Connect(${wrappedComponentName})`,selectorFactoryOptions={shouldHandleStateChanges,displayName,wrappedComponentName,WrappedComponent,initMapStateToProps,initMapDispatchToProps,initMergeProps,areStatesEqual,areStatePropsEqual,areOwnPropsEqual,areMergedPropsEqual};function ConnectFunction(props){let[propsContext,reactReduxForwardedRef,wrapperProps]=import_react.useMemo(()=>{let{reactReduxForwardedRef:reactReduxForwardedRef2,...wrapperProps2}=props;return[props.context,reactReduxForwardedRef2,wrapperProps2]},[props]),ContextToUse=import_react.useMemo(()=>{let ResultContext=Context$1;return propsContext?.Consumer,ResultContext},[propsContext,Context$1]),contextValue=import_react.useContext(ContextToUse),didStoreComeFromProps=!!props.store&&!!props.store.getState&&!!props.store.dispatch,didStoreComeFromContext=!!contextValue&&!!contextValue.store,store=didStoreComeFromProps?props.store:contextValue.store,getServerState=didStoreComeFromContext?contextValue.getServerState:store.getState,childPropsSelector=import_react.useMemo(()=>finalPropsSelectorFactory(store.dispatch,selectorFactoryOptions),[store]),[subscription,notifyNestedSubs]=import_react.useMemo(()=>{if(!shouldHandleStateChanges)return NO_SUBSCRIPTION_ARRAY;let subscription2=createSubscription(store,didStoreComeFromProps?void 0:contextValue.subscription);return[subscription2,subscription2.notifyNestedSubs.bind(subscription2)]},[store,didStoreComeFromProps,contextValue]),overriddenContextValue=import_react.useMemo(()=>didStoreComeFromProps?contextValue:{...contextValue,subscription},[didStoreComeFromProps,contextValue,subscription]),lastChildProps=import_react.useRef(void 0),lastWrapperProps=import_react.useRef(wrapperProps),childPropsFromStoreUpdate=import_react.useRef(void 0),renderIsScheduled=import_react.useRef(!1),isMounted=import_react.useRef(!1),latestSubscriptionCallbackError=import_react.useRef(void 0);useIsomorphicLayoutEffect$1(()=>(isMounted.current=!0,()=>{isMounted.current=!1}),[]);let actualChildPropsSelector=import_react.useMemo(()=>()=>childPropsFromStoreUpdate.current&&wrapperProps===lastWrapperProps.current?childPropsFromStoreUpdate.current:childPropsSelector(store.getState(),wrapperProps),[store,wrapperProps]),subscribeForReact=import_react.useMemo(()=>reactListener=>subscription?subscribeUpdates(shouldHandleStateChanges,store,subscription,childPropsSelector,lastWrapperProps,lastChildProps,renderIsScheduled,isMounted,childPropsFromStoreUpdate,notifyNestedSubs,reactListener):()=>{},[subscription]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[lastWrapperProps,lastChildProps,renderIsScheduled,wrapperProps,childPropsFromStoreUpdate,notifyNestedSubs]);let actualChildProps;try{actualChildProps=import_react.useSyncExternalStore(subscribeForReact,actualChildPropsSelector,getServerState?()=>childPropsSelector(getServerState(),wrapperProps):actualChildPropsSelector)}catch(err){throw latestSubscriptionCallbackError.current&&(err.message+=`
The error may be correlated with this previous error:
${latestSubscriptionCallbackError.current.stack}

`),err}useIsomorphicLayoutEffect$1(()=>{latestSubscriptionCallbackError.current=void 0,childPropsFromStoreUpdate.current=void 0,lastChildProps.current=actualChildProps});let renderedWrappedComponent=import_react.useMemo(()=>import_react.createElement(WrappedComponent,{...actualChildProps,ref:reactReduxForwardedRef}),[reactReduxForwardedRef,WrappedComponent,actualChildProps]);return import_react.useMemo(()=>shouldHandleStateChanges?import_react.createElement(ContextToUse.Provider,{value:overriddenContextValue},renderedWrappedComponent):renderedWrappedComponent,[ContextToUse,renderedWrappedComponent,overriddenContextValue])}let Connect=import_react.memo(ConnectFunction);if(Connect.WrappedComponent=WrappedComponent,Connect.displayName=ConnectFunction.displayName=displayName,forwardRef$6){let forwarded=import_react.forwardRef(function(props,ref){return import_react.createElement(Connect,{...props,reactReduxForwardedRef:ref})});return forwarded.displayName=displayName,forwarded.WrappedComponent=WrappedComponent,hoistNonReactStatics(forwarded,WrappedComponent)}return hoistNonReactStatics(Connect,WrappedComponent)}}var connect_default=connect;function Provider(providerProps){let{children:children$1,context,serverState,store}=providerProps,contextValue=import_react.useMemo(()=>({store,subscription:createSubscription(store),getServerState:serverState?()=>serverState:void 0}),[store,serverState]),previousState=import_react.useMemo(()=>store.getState(),[store]);useIsomorphicLayoutEffect$1(()=>{let{subscription}=contextValue;return subscription.onStateChange=subscription.notifyNestedSubs,subscription.trySubscribe(),previousState!==store.getState()&&subscription.notifyNestedSubs(),()=>{subscription.tryUnsubscribe(),subscription.onStateChange=void 0}},[contextValue,previousState]);let Context$1=context||ReactReduxContext;return import_react.createElement(Context$1.Provider,{value:contextValue},children$1)}var Provider_default=Provider,isProduction=!0,prefix$2=`Invariant failed`;function invariant$1(condition,message){if(!condition){if(isProduction)throw Error(prefix$2);var provided=typeof message==`function`?message():message,value=provided?`${prefix$2}: ${provided}`:prefix$2;throw Error(value)}}var getRect=function(_ref){var top=_ref.top,right=_ref.right,bottom=_ref.bottom,left=_ref.left;return{top,right,bottom,left,width:right-left,height:bottom-top,x:left,y:top,center:{x:(right+left)/2,y:(bottom+top)/2}}},expand=function(target,expandBy){return{top:target.top-expandBy.top,left:target.left-expandBy.left,bottom:target.bottom+expandBy.bottom,right:target.right+expandBy.right}},shrink=function(target,shrinkBy){return{top:target.top+shrinkBy.top,left:target.left+shrinkBy.left,bottom:target.bottom-shrinkBy.bottom,right:target.right-shrinkBy.right}},shift=function(target,shiftBy){return{top:target.top+shiftBy.y,left:target.left+shiftBy.x,bottom:target.bottom+shiftBy.y,right:target.right+shiftBy.x}},noSpacing$1={top:0,right:0,bottom:0,left:0},createBox=function(_ref2){var borderBox=_ref2.borderBox,_ref2$margin=_ref2.margin,margin=_ref2$margin===void 0?noSpacing$1:_ref2$margin,_ref2$border=_ref2.border,border=_ref2$border===void 0?noSpacing$1:_ref2$border,_ref2$padding=_ref2.padding,padding=_ref2$padding===void 0?noSpacing$1:_ref2$padding,marginBox=getRect(expand(borderBox,margin)),paddingBox=getRect(shrink(borderBox,border)),contentBox=getRect(shrink(paddingBox,padding));return{marginBox,borderBox:getRect(borderBox),paddingBox,contentBox,margin,border,padding}},parse=function(raw){var value=raw.slice(0,-2);if(raw.slice(-2)!==`px`)return 0;var result=Number(value);return isNaN(result)&&invariant$1(!1),result},getWindowScroll$1=function(){return{x:window.pageXOffset,y:window.pageYOffset}},offset=function(original,change){var borderBox=original.borderBox,border=original.border,margin=original.margin,padding=original.padding;return createBox({borderBox:shift(borderBox,change),border,margin,padding})},withScroll=function(original,scroll$2){return scroll$2===void 0&&(scroll$2=getWindowScroll$1()),offset(original,scroll$2)},calculateBox=function(borderBox,styles$1){return createBox({borderBox,margin:{top:parse(styles$1.marginTop),right:parse(styles$1.marginRight),bottom:parse(styles$1.marginBottom),left:parse(styles$1.marginLeft)},padding:{top:parse(styles$1.paddingTop),right:parse(styles$1.paddingRight),bottom:parse(styles$1.paddingBottom),left:parse(styles$1.paddingLeft)},border:{top:parse(styles$1.borderTopWidth),right:parse(styles$1.borderRightWidth),bottom:parse(styles$1.borderBottomWidth),left:parse(styles$1.borderLeftWidth)}})},getBox=function(el){return calculateBox(el.getBoundingClientRect(),window.getComputedStyle(el))},rafSchd=function(fn){var lastArgs=[],frameId=null,wrapperFn=function(){lastArgs=[...arguments],!frameId&&(frameId=requestAnimationFrame(function(){frameId=null,fn.apply(void 0,lastArgs)}))};return wrapperFn.cancel=function(){frameId&&=(cancelAnimationFrame(frameId),null)},wrapperFn},raf_schd_esm_default=rafSchd;function _extends(){return _extends=Object.assign?Object.assign.bind():function(n$4){for(var e$4=1;e$4<arguments.length;e$4++){var t$4=arguments[e$4];for(var r$4 in t$4)({}).hasOwnProperty.call(t$4,r$4)&&(n$4[r$4]=t$4[r$4])}return n$4},_extends.apply(null,arguments)}var import_react_dom$1=__toESM(require_react_dom());function log(type,message){}log.bind(null,`warn`);var error=log.bind(null,`error`);function noop$2(){}function getOptions(shared$1,fromBinding){return{...shared$1,...fromBinding}}function bindEvents(el,bindings,sharedOptions){let unbindings=bindings.map(binding=>{let options$1=getOptions(sharedOptions,binding.options);return el.addEventListener(binding.eventName,binding.fn,options$1),function(){el.removeEventListener(binding.eventName,binding.fn,options$1)}});return function(){unbindings.forEach(unbind=>{unbind()})}}var prefix$1=`Invariant failed`,RbdInvariant=class extends Error{};RbdInvariant.prototype.toString=function(){return this.message};function invariant(condition,message){throw new RbdInvariant(prefix$1)}var ErrorBoundary=class extends import_react.Component{constructor(...args){super(...args),this.callbacks=null,this.unbind=noop$2,this.onWindowError=event=>{let callbacks=this.getCallbacks();callbacks.isDragging()&&callbacks.tryAbort(),event.error instanceof RbdInvariant&&event.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw Error(`Unable to find AppCallbacks in <ErrorBoundary/>`);return this.callbacks},this.setCallbacks=callbacks=>{this.callbacks=callbacks}}componentDidMount(){this.unbind=bindEvents(window,[{eventName:`error`,fn:this.onWindowError}])}componentDidCatch(err){if(err instanceof RbdInvariant){this.setState({});return}throw err}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}},dragHandleUsageInstructions=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,position=index$2=>index$2+1,onDragStart=start$2=>`
  You have lifted an item in position ${position(start$2.source.index)}
`,withLocation=(source,destination)=>{let isInHomeList=source.droppableId===destination.droppableId,startPosition=position(source.index),endPosition=position(destination.index);return isInHomeList?`
      You have moved the item from position ${startPosition}
      to position ${endPosition}
    `:`
    You have moved the item from position ${startPosition}
    in list ${source.droppableId}
    to list ${destination.droppableId}
    in position ${endPosition}
  `},withCombine=(id$3,source,combine$1)=>source.droppableId===combine$1.droppableId?`
      The item ${id$3}
      has been combined with ${combine$1.draggableId}`:`
      The item ${id$3}
      in list ${source.droppableId}
      has been combined with ${combine$1.draggableId}
      in list ${combine$1.droppableId}
    `,onDragUpdate=update$1=>{let location$1=update$1.destination;if(location$1)return withLocation(update$1.source,location$1);let combine$1=update$1.combine;return combine$1?withCombine(update$1.draggableId,update$1.source,combine$1):`You are over an area that cannot be dropped on`},returnedToStart=source=>`
  The item has returned to its starting position
  of ${position(source.index)}
`,onDragEnd=result=>{if(result.reason===`CANCEL`)return`
      Movement cancelled.
      ${returnedToStart(result.source)}
    `;let location$1=result.destination,combine$1=result.combine;return location$1?`
      You have dropped the item.
      ${withLocation(result.source,location$1)}
    `:combine$1?`
      You have dropped the item.
      ${withCombine(result.draggableId,result.source,combine$1)}
    `:`
    The item has been dropped while not over a drop area.
    ${returnedToStart(result.source)}
  `},preset={dragHandleUsageInstructions,onDragStart,onDragUpdate,onDragEnd};function isEqual$2(first,second){return!!(first===second||Number.isNaN(first)&&Number.isNaN(second))}function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length)return!1;for(let i$4=0;i$4<newInputs.length;i$4++)if(!isEqual$2(newInputs[i$4],lastInputs[i$4]))return!1;return!0}function useMemo$3(getResult,inputs){let initial=(0,import_react.useState)(()=>({inputs,result:getResult()}))[0],isFirstRun=(0,import_react.useRef)(!0),committed=(0,import_react.useRef)(initial),cache=isFirstRun.current||inputs&&committed.current.inputs&&areInputsEqual(inputs,committed.current.inputs)?committed.current:{inputs,result:getResult()};return(0,import_react.useEffect)(()=>{isFirstRun.current=!1,committed.current=cache},[cache]),cache.result}function useCallback$1(callback,inputs){return useMemo$3(()=>callback,inputs)}var origin={x:0,y:0},add=(point1,point2)=>({x:point1.x+point2.x,y:point1.y+point2.y}),subtract=(point1,point2)=>({x:point1.x-point2.x,y:point1.y-point2.y}),isEqual$1=(point1,point2)=>point1.x===point2.x&&point1.y===point2.y,negate=point=>({x:point.x===0?0:-point.x,y:point.y===0?0:-point.y}),patch=(line,value,otherValue=0)=>line===`x`?{x:value,y:otherValue}:{x:otherValue,y:value},distance=(point1,point2)=>Math.sqrt((point2.x-point1.x)**2+(point2.y-point1.y)**2),closest$1=(target,points)=>Math.min(...points.map(point=>distance(target,point))),apply=fn=>point=>({x:fn(point.x),y:fn(point.y)}),executeClip=(frame$2,subject)=>{let result=getRect({top:Math.max(subject.top,frame$2.top),right:Math.min(subject.right,frame$2.right),bottom:Math.min(subject.bottom,frame$2.bottom),left:Math.max(subject.left,frame$2.left)});return result.width<=0||result.height<=0?null:result},offsetByPosition=(spacing,point)=>({top:spacing.top+point.y,left:spacing.left+point.x,bottom:spacing.bottom+point.y,right:spacing.right+point.x}),getCorners=spacing=>[{x:spacing.left,y:spacing.top},{x:spacing.right,y:spacing.top},{x:spacing.left,y:spacing.bottom},{x:spacing.right,y:spacing.bottom}],noSpacing={top:0,right:0,bottom:0,left:0},scroll$1=(target,frame$2)=>frame$2?offsetByPosition(target,frame$2.scroll.diff.displacement):target,increase=(target,axis,withPlaceholder)=>withPlaceholder&&withPlaceholder.increasedBy?{...target,[axis.end]:target[axis.end]+withPlaceholder.increasedBy[axis.line]}:target,clip=(target,frame$2)=>frame$2&&frame$2.shouldClipSubject?executeClip(frame$2.pageMarginBox,target):getRect(target),getSubject=({page,withPlaceholder,axis,frame:frame$2})=>({page,withPlaceholder,active:clip(increase(scroll$1(page.marginBox,frame$2),axis,withPlaceholder),frame$2)}),scrollDroppable=(droppable$1,newScroll)=>{!droppable$1.frame&&invariant();let scrollable=droppable$1.frame,scrollDiff=subtract(newScroll,scrollable.scroll.initial),scrollDisplacement=negate(scrollDiff),frame$2={...scrollable,scroll:{initial:scrollable.scroll.initial,current:newScroll,diff:{value:scrollDiff,displacement:scrollDisplacement},max:scrollable.scroll.max}},subject=getSubject({page:droppable$1.subject.page,withPlaceholder:droppable$1.subject.withPlaceholder,axis:droppable$1.axis,frame:frame$2});return{...droppable$1,frame:frame$2,subject}};function memoizeOne(resultFn,isEqual$3=areInputsEqual){let cache=null;function memoized(...newArgs){if(cache&&cache.lastThis===this&&isEqual$3(newArgs,cache.lastArgs))return cache.lastResult;let lastResult=resultFn.apply(this,newArgs);return cache={lastResult,lastArgs:newArgs,lastThis:this},lastResult}return memoized.clear=function(){cache=null},memoized}var toDroppableMap=memoizeOne(droppables=>droppables.reduce((previous,current)=>(previous[current.descriptor.id]=current,previous),{})),toDraggableMap=memoizeOne(draggables=>draggables.reduce((previous,current)=>(previous[current.descriptor.id]=current,previous),{})),toDroppableList=memoizeOne(droppables=>Object.values(droppables)),toDraggableList=memoizeOne(draggables=>Object.values(draggables)),getDraggablesInsideDroppable=memoizeOne((droppableId,draggables)=>toDraggableList(draggables).filter(draggable$1=>droppableId===draggable$1.descriptor.droppableId).sort((a$4,b$3)=>a$4.descriptor.index-b$3.descriptor.index));function tryGetDestination(impact){return impact.at&&impact.at.type===`REORDER`?impact.at.destination:null}function tryGetCombine(impact){return impact.at&&impact.at.type===`COMBINE`?impact.at.combine:null}var removeDraggableFromList=memoizeOne((remove$1,list)=>list.filter(item=>item.descriptor.id!==remove$1.descriptor.id)),moveToNextCombine=({isMovingForward,draggable:draggable$1,destination,insideDestination,previousImpact})=>{if(!destination.isCombineEnabled||!tryGetDestination(previousImpact))return null;function getImpact(target){let at$1={type:`COMBINE`,combine:{draggableId:target,droppableId:destination.descriptor.id}};return{...previousImpact,at:at$1}}let all=previousImpact.displaced.all,closestId=all.length?all[0]:null;if(isMovingForward)return closestId?getImpact(closestId):null;let withoutDraggable=removeDraggableFromList(draggable$1,insideDestination);if(!closestId){if(!withoutDraggable.length)return null;let last=withoutDraggable[withoutDraggable.length-1];return getImpact(last.descriptor.id)}let indexOfClosest=withoutDraggable.findIndex(d$3=>d$3.descriptor.id===closestId);indexOfClosest===-1&&invariant();let proposedIndex=indexOfClosest-1;if(proposedIndex<0)return null;let before=withoutDraggable[proposedIndex];return getImpact(before.descriptor.id)},isHomeOf=(draggable$1,destination)=>draggable$1.descriptor.droppableId===destination.descriptor.id,noDisplacedBy={point:origin,value:0},emptyGroups={invisible:{},visible:{},all:[]},noImpact={displaced:emptyGroups,displacedBy:noDisplacedBy,at:null},isWithin=(lowerBound,upperBound)=>value=>lowerBound<=value&&value<=upperBound,isPartiallyVisibleThroughFrame=frame$2=>{let isWithinVertical=isWithin(frame$2.top,frame$2.bottom),isWithinHorizontal=isWithin(frame$2.left,frame$2.right);return subject=>{if(isWithinVertical(subject.top)&&isWithinVertical(subject.bottom)&&isWithinHorizontal(subject.left)&&isWithinHorizontal(subject.right))return!0;let isPartiallyVisibleVertically=isWithinVertical(subject.top)||isWithinVertical(subject.bottom),isPartiallyVisibleHorizontally=isWithinHorizontal(subject.left)||isWithinHorizontal(subject.right);if(isPartiallyVisibleVertically&&isPartiallyVisibleHorizontally)return!0;let isBiggerVertically=subject.top<frame$2.top&&subject.bottom>frame$2.bottom,isBiggerHorizontally=subject.left<frame$2.left&&subject.right>frame$2.right;return isBiggerVertically&&isBiggerHorizontally?!0:isBiggerVertically&&isPartiallyVisibleHorizontally||isBiggerHorizontally&&isPartiallyVisibleVertically}},isTotallyVisibleThroughFrame=frame$2=>{let isWithinVertical=isWithin(frame$2.top,frame$2.bottom),isWithinHorizontal=isWithin(frame$2.left,frame$2.right);return subject=>isWithinVertical(subject.top)&&isWithinVertical(subject.bottom)&&isWithinHorizontal(subject.left)&&isWithinHorizontal(subject.right)},vertical={direction:`vertical`,line:`y`,crossAxisLine:`x`,start:`top`,end:`bottom`,size:`height`,crossAxisStart:`left`,crossAxisEnd:`right`,crossAxisSize:`width`},horizontal={direction:`horizontal`,line:`x`,crossAxisLine:`y`,start:`left`,end:`right`,size:`width`,crossAxisStart:`top`,crossAxisEnd:`bottom`,crossAxisSize:`height`},isTotallyVisibleThroughFrameOnAxis=axis=>frame$2=>{let isWithinVertical=isWithin(frame$2.top,frame$2.bottom),isWithinHorizontal=isWithin(frame$2.left,frame$2.right);return subject=>axis===vertical?isWithinVertical(subject.top)&&isWithinVertical(subject.bottom):isWithinHorizontal(subject.left)&&isWithinHorizontal(subject.right)},getDroppableDisplaced=(target,destination)=>offsetByPosition(target,destination.frame?destination.frame.scroll.diff.displacement:origin),isVisibleInDroppable=(target,destination,isVisibleThroughFrameFn)=>destination.subject.active?isVisibleThroughFrameFn(destination.subject.active)(target):!1,isVisibleInViewport=(target,viewport,isVisibleThroughFrameFn)=>isVisibleThroughFrameFn(viewport)(target),isVisible$1=({target:toBeDisplaced,destination,viewport,withDroppableDisplacement:withDroppableDisplacement$1,isVisibleThroughFrameFn})=>{let displacedTarget=withDroppableDisplacement$1?getDroppableDisplaced(toBeDisplaced,destination):toBeDisplaced;return isVisibleInDroppable(displacedTarget,destination,isVisibleThroughFrameFn)&&isVisibleInViewport(displacedTarget,viewport,isVisibleThroughFrameFn)},isPartiallyVisible=args=>isVisible$1({...args,isVisibleThroughFrameFn:isPartiallyVisibleThroughFrame}),isTotallyVisible=args=>isVisible$1({...args,isVisibleThroughFrameFn:isTotallyVisibleThroughFrame}),isTotallyVisibleOnAxis=args=>isVisible$1({...args,isVisibleThroughFrameFn:isTotallyVisibleThroughFrameOnAxis(args.destination.axis)}),getShouldAnimate=(id$3,last,forceShouldAnimate)=>{if(typeof forceShouldAnimate==`boolean`)return forceShouldAnimate;if(!last)return!0;let{invisible,visible}=last;if(invisible[id$3])return!1;let previous=visible[id$3];return previous?previous.shouldAnimate:!0};function getTarget(draggable$1,displacedBy){let marginBox=draggable$1.page.marginBox;return getRect(expand(marginBox,{top:displacedBy.point.y,right:0,bottom:0,left:displacedBy.point.x}))}function getDisplacementGroups({afterDragging,destination,displacedBy,viewport,forceShouldAnimate,last}){return afterDragging.reduce(function(groups,draggable$1){let target=getTarget(draggable$1,displacedBy),id$3=draggable$1.descriptor.id;if(groups.all.push(id$3),!isPartiallyVisible({target,destination,viewport,withDroppableDisplacement:!0}))return groups.invisible[draggable$1.descriptor.id]=!0,groups;let displacement={draggableId:id$3,shouldAnimate:getShouldAnimate(id$3,last,forceShouldAnimate)};return groups.visible[id$3]=displacement,groups},{all:[],visible:{},invisible:{}})}function getIndexOfLastItem(draggables,options$1){if(!draggables.length)return 0;let indexOfLastItem=draggables[draggables.length-1].descriptor.index;return options$1.inHomeList?indexOfLastItem:indexOfLastItem+1}function goAtEnd({insideDestination,inHomeList,displacedBy,destination}){let newIndex=getIndexOfLastItem(insideDestination,{inHomeList});return{displaced:emptyGroups,displacedBy,at:{type:`REORDER`,destination:{droppableId:destination.descriptor.id,index:newIndex}}}}function calculateReorderImpact({draggable:draggable$1,insideDestination,destination,viewport,displacedBy,last,index:index$2,forceShouldAnimate}){let inHomeList=isHomeOf(draggable$1,destination);if(index$2==null)return goAtEnd({insideDestination,inHomeList,displacedBy,destination});let match=insideDestination.find(item=>item.descriptor.index===index$2);if(!match)return goAtEnd({insideDestination,inHomeList,displacedBy,destination});let withoutDragging=removeDraggableFromList(draggable$1,insideDestination),sliceFrom=insideDestination.indexOf(match);return{displaced:getDisplacementGroups({afterDragging:withoutDragging.slice(sliceFrom),destination,displacedBy,last,viewport:viewport.frame,forceShouldAnimate}),displacedBy,at:{type:`REORDER`,destination:{droppableId:destination.descriptor.id,index:index$2}}}}function didStartAfterCritical(draggableId,afterCritical){return!!afterCritical.effected[draggableId]}var fromCombine=({isMovingForward,destination,draggables,combine:combine$1,afterCritical})=>{if(!destination.isCombineEnabled)return null;let combineId=combine$1.draggableId,combineWithIndex=draggables[combineId].descriptor.index;return didStartAfterCritical(combineId,afterCritical)?isMovingForward?combineWithIndex:combineWithIndex-1:isMovingForward?combineWithIndex+1:combineWithIndex},fromReorder=({isMovingForward,isInHomeList,insideDestination,location:location$1})=>{if(!insideDestination.length)return null;let currentIndex=location$1.index,proposedIndex=isMovingForward?currentIndex+1:currentIndex-1,firstIndex=insideDestination[0].descriptor.index,lastIndex=insideDestination[insideDestination.length-1].descriptor.index,upperBound=isInHomeList?lastIndex:lastIndex+1;return proposedIndex<firstIndex||proposedIndex>upperBound?null:proposedIndex},moveToNextIndex=({isMovingForward,isInHomeList,draggable:draggable$1,draggables,destination,insideDestination,previousImpact,viewport,afterCritical})=>{let wasAt=previousImpact.at;if(!wasAt&&invariant(),wasAt.type===`REORDER`){let newIndex$1=fromReorder({isMovingForward,isInHomeList,location:wasAt.destination,insideDestination});return newIndex$1==null?null:calculateReorderImpact({draggable:draggable$1,insideDestination,destination,viewport,last:previousImpact.displaced,displacedBy:previousImpact.displacedBy,index:newIndex$1})}let newIndex=fromCombine({isMovingForward,destination,displaced:previousImpact.displaced,draggables,combine:wasAt.combine,afterCritical});return newIndex==null?null:calculateReorderImpact({draggable:draggable$1,insideDestination,destination,viewport,last:previousImpact.displaced,displacedBy:previousImpact.displacedBy,index:newIndex})},getCombinedItemDisplacement=({displaced,afterCritical,combineWith,displacedBy})=>{let isDisplaced=!!(displaced.visible[combineWith]||displaced.invisible[combineWith]);return didStartAfterCritical(combineWith,afterCritical)?isDisplaced?origin:negate(displacedBy.point):isDisplaced?displacedBy.point:origin},whenCombining=({afterCritical,impact,draggables})=>{let combine$1=tryGetCombine(impact);!combine$1&&invariant();let combineWith=combine$1.draggableId,center=draggables[combineWith].page.borderBox.center;return add(center,getCombinedItemDisplacement({displaced:impact.displaced,afterCritical,combineWith,displacedBy:impact.displacedBy}))},distanceFromStartToBorderBoxCenter=(axis,box)=>box.margin[axis.start]+box.borderBox[axis.size]/2,distanceFromEndToBorderBoxCenter=(axis,box)=>box.margin[axis.end]+box.borderBox[axis.size]/2,getCrossAxisBorderBoxCenter=(axis,target,isMoving)=>target[axis.crossAxisStart]+isMoving.margin[axis.crossAxisStart]+isMoving.borderBox[axis.crossAxisSize]/2,goAfter=({axis,moveRelativeTo,isMoving})=>patch(axis.line,moveRelativeTo.marginBox[axis.end]+distanceFromStartToBorderBoxCenter(axis,isMoving),getCrossAxisBorderBoxCenter(axis,moveRelativeTo.marginBox,isMoving)),goBefore=({axis,moveRelativeTo,isMoving})=>patch(axis.line,moveRelativeTo.marginBox[axis.start]-distanceFromEndToBorderBoxCenter(axis,isMoving),getCrossAxisBorderBoxCenter(axis,moveRelativeTo.marginBox,isMoving)),goIntoStart=({axis,moveInto,isMoving})=>patch(axis.line,moveInto.contentBox[axis.start]+distanceFromStartToBorderBoxCenter(axis,isMoving),getCrossAxisBorderBoxCenter(axis,moveInto.contentBox,isMoving)),whenReordering=({impact,draggable:draggable$1,draggables,droppable:droppable$1,afterCritical})=>{let insideDestination=getDraggablesInsideDroppable(droppable$1.descriptor.id,draggables),draggablePage=draggable$1.page,axis=droppable$1.axis;if(!insideDestination.length)return goIntoStart({axis,moveInto:droppable$1.page,isMoving:draggablePage});let{displaced,displacedBy}=impact,closestAfter=displaced.all[0];if(closestAfter){let closest$2=draggables[closestAfter];return didStartAfterCritical(closestAfter,afterCritical)?goBefore({axis,moveRelativeTo:closest$2.page,isMoving:draggablePage}):goBefore({axis,moveRelativeTo:offset(closest$2.page,displacedBy.point),isMoving:draggablePage})}let last=insideDestination[insideDestination.length-1];return last.descriptor.id===draggable$1.descriptor.id?draggablePage.borderBox.center:didStartAfterCritical(last.descriptor.id,afterCritical)?goAfter({axis,moveRelativeTo:offset(last.page,negate(afterCritical.displacedBy.point)),isMoving:draggablePage}):goAfter({axis,moveRelativeTo:last.page,isMoving:draggablePage})},withDroppableDisplacement=(droppable$1,point)=>{let frame$2=droppable$1.frame;return frame$2?add(point,frame$2.scroll.diff.displacement):point},getResultWithoutDroppableDisplacement=({impact,draggable:draggable$1,droppable:droppable$1,draggables,afterCritical})=>{let original=draggable$1.page.borderBox.center,at$1=impact.at;return!droppable$1||!at$1?original:at$1.type===`REORDER`?whenReordering({impact,draggable:draggable$1,draggables,droppable:droppable$1,afterCritical}):whenCombining({impact,draggables,afterCritical})},getPageBorderBoxCenterFromImpact=args=>{let withoutDisplacement=getResultWithoutDroppableDisplacement(args),droppable$1=args.droppable;return droppable$1?withDroppableDisplacement(droppable$1,withoutDisplacement):withoutDisplacement},scrollViewport=(viewport,newScroll)=>{let diff=subtract(newScroll,viewport.scroll.initial),displacement=negate(diff);return{frame:getRect({top:newScroll.y,bottom:newScroll.y+viewport.frame.height,left:newScroll.x,right:newScroll.x+viewport.frame.width}),scroll:{initial:viewport.scroll.initial,max:viewport.scroll.max,current:newScroll,diff:{value:diff,displacement}}}};function getDraggables$1(ids$1,draggables){return ids$1.map(id$3=>draggables[id$3])}function tryGetVisible(id$3,groups){for(let i$4=0;i$4<groups.length;i$4++){let displacement=groups[i$4].visible[id$3];if(displacement)return displacement}return null}var speculativelyIncrease=({impact,viewport,destination,draggables,maxScrollChange})=>{let scrolledViewport=scrollViewport(viewport,add(viewport.scroll.current,maxScrollChange)),scrolledDroppable=destination.frame?scrollDroppable(destination,add(destination.frame.scroll.current,maxScrollChange)):destination,last=impact.displaced,withViewportScroll=getDisplacementGroups({afterDragging:getDraggables$1(last.all,draggables),destination,displacedBy:impact.displacedBy,viewport:scrolledViewport.frame,last,forceShouldAnimate:!1}),withDroppableScroll$1=getDisplacementGroups({afterDragging:getDraggables$1(last.all,draggables),destination:scrolledDroppable,displacedBy:impact.displacedBy,viewport:viewport.frame,last,forceShouldAnimate:!1}),invisible={},visible={},groups=[last,withViewportScroll,withDroppableScroll$1];return last.all.forEach(id$3=>{let displacement=tryGetVisible(id$3,groups);if(displacement){visible[id$3]=displacement;return}invisible[id$3]=!0}),{...impact,displaced:{all:last.all,invisible,visible}}},withViewportDisplacement=(viewport,point)=>add(viewport.scroll.diff.displacement,point),getClientFromPageBorderBoxCenter=({pageBorderBoxCenter,draggable:draggable$1,viewport})=>{let offset$1=subtract(withViewportDisplacement(viewport,pageBorderBoxCenter),draggable$1.page.borderBox.center);return add(draggable$1.client.borderBox.center,offset$1)},isTotallyVisibleInNewLocation=({draggable:draggable$1,destination,newPageBorderBoxCenter,viewport,withDroppableDisplacement:withDroppableDisplacement$1,onlyOnMainAxis=!1})=>{let changeNeeded=subtract(newPageBorderBoxCenter,draggable$1.page.borderBox.center),args={target:offsetByPosition(draggable$1.page.borderBox,changeNeeded),destination,withDroppableDisplacement:withDroppableDisplacement$1,viewport};return onlyOnMainAxis?isTotallyVisibleOnAxis(args):isTotallyVisible(args)},moveToNextPlace=({isMovingForward,draggable:draggable$1,destination,draggables,previousImpact,viewport,previousPageBorderBoxCenter,previousClientSelection,afterCritical})=>{if(!destination.isEnabled)return null;let insideDestination=getDraggablesInsideDroppable(destination.descriptor.id,draggables),isInHomeList=isHomeOf(draggable$1,destination),impact=moveToNextCombine({isMovingForward,draggable:draggable$1,destination,insideDestination,previousImpact})||moveToNextIndex({isMovingForward,isInHomeList,draggable:draggable$1,draggables,destination,insideDestination,previousImpact,viewport,afterCritical});if(!impact)return null;let pageBorderBoxCenter=getPageBorderBoxCenterFromImpact({impact,draggable:draggable$1,droppable:destination,draggables,afterCritical});if(isTotallyVisibleInNewLocation({draggable:draggable$1,destination,newPageBorderBoxCenter:pageBorderBoxCenter,viewport:viewport.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter,draggable:draggable$1,viewport}),impact,scrollJumpRequest:null};let distance$4=subtract(pageBorderBoxCenter,previousPageBorderBoxCenter);return{clientSelection:previousClientSelection,impact:speculativelyIncrease({impact,viewport,destination,draggables,maxScrollChange:distance$4}),scrollJumpRequest:distance$4}},getKnownActive=droppable$1=>{let rect=droppable$1.subject.active;return!rect&&invariant(),rect},getBestCrossAxisDroppable=({isMovingForward,pageBorderBoxCenter,source,droppables,viewport})=>{let active=source.subject.active;if(!active)return null;let axis=source.axis,isBetweenSourceClipped=isWithin(active[axis.start],active[axis.end]),candidates=toDroppableList(droppables).filter(droppable$1=>droppable$1!==source).filter(droppable$1=>droppable$1.isEnabled).filter(droppable$1=>!!droppable$1.subject.active).filter(droppable$1=>isPartiallyVisibleThroughFrame(viewport.frame)(getKnownActive(droppable$1))).filter(droppable$1=>{let activeOfTarget=getKnownActive(droppable$1);return isMovingForward?active[axis.crossAxisEnd]<activeOfTarget[axis.crossAxisEnd]:activeOfTarget[axis.crossAxisStart]<active[axis.crossAxisStart]}).filter(droppable$1=>{let activeOfTarget=getKnownActive(droppable$1),isBetweenDestinationClipped=isWithin(activeOfTarget[axis.start],activeOfTarget[axis.end]);return isBetweenSourceClipped(activeOfTarget[axis.start])||isBetweenSourceClipped(activeOfTarget[axis.end])||isBetweenDestinationClipped(active[axis.start])||isBetweenDestinationClipped(active[axis.end])}).sort((a$4,b$3)=>{let first=getKnownActive(a$4)[axis.crossAxisStart],second=getKnownActive(b$3)[axis.crossAxisStart];return isMovingForward?first-second:second-first}).filter((droppable$1,index$2,array$1)=>getKnownActive(droppable$1)[axis.crossAxisStart]===getKnownActive(array$1[0])[axis.crossAxisStart]);if(!candidates.length)return null;if(candidates.length===1)return candidates[0];let contains=candidates.filter(droppable$1=>isWithin(getKnownActive(droppable$1)[axis.start],getKnownActive(droppable$1)[axis.end])(pageBorderBoxCenter[axis.line]));return contains.length===1?contains[0]:contains.length>1?contains.sort((a$4,b$3)=>getKnownActive(a$4)[axis.start]-getKnownActive(b$3)[axis.start])[0]:candidates.sort((a$4,b$3)=>{let first=closest$1(pageBorderBoxCenter,getCorners(getKnownActive(a$4))),second=closest$1(pageBorderBoxCenter,getCorners(getKnownActive(b$3)));return first===second?getKnownActive(a$4)[axis.start]-getKnownActive(b$3)[axis.start]:first-second})[0]},getCurrentPageBorderBoxCenter=(draggable$1,afterCritical)=>{let original=draggable$1.page.borderBox.center;return didStartAfterCritical(draggable$1.descriptor.id,afterCritical)?subtract(original,afterCritical.displacedBy.point):original},getCurrentPageBorderBox=(draggable$1,afterCritical)=>{let original=draggable$1.page.borderBox;return didStartAfterCritical(draggable$1.descriptor.id,afterCritical)?offsetByPosition(original,negate(afterCritical.displacedBy.point)):original},getClosestDraggable=({pageBorderBoxCenter,viewport,destination,insideDestination,afterCritical})=>insideDestination.filter(draggable$1=>isTotallyVisible({target:getCurrentPageBorderBox(draggable$1,afterCritical),destination,viewport:viewport.frame,withDroppableDisplacement:!0})).sort((a$4,b$3)=>{let distanceToA=distance(pageBorderBoxCenter,withDroppableDisplacement(destination,getCurrentPageBorderBoxCenter(a$4,afterCritical))),distanceToB=distance(pageBorderBoxCenter,withDroppableDisplacement(destination,getCurrentPageBorderBoxCenter(b$3,afterCritical)));return distanceToA<distanceToB?-1:distanceToB<distanceToA?1:a$4.descriptor.index-b$3.descriptor.index})[0]||null,getDisplacedBy=memoizeOne(function(axis,displaceBy){let displacement=displaceBy[axis.line];return{value:displacement,point:patch(axis.line,displacement)}}),getRequiredGrowthForPlaceholder=(droppable$1,placeholderSize,draggables)=>{let axis=droppable$1.axis;if(droppable$1.descriptor.mode===`virtual`)return patch(axis.line,placeholderSize[axis.line]);let availableSpace=droppable$1.subject.page.contentBox[axis.size],needsToGrowBy=getDraggablesInsideDroppable(droppable$1.descriptor.id,draggables).reduce((sum,dimension)=>sum+dimension.client.marginBox[axis.size],0)+placeholderSize[axis.line]-availableSpace;return needsToGrowBy<=0?null:patch(axis.line,needsToGrowBy)},withMaxScroll=(frame$2,max)=>({...frame$2,scroll:{...frame$2.scroll,max}}),addPlaceholder=(droppable$1,draggable$1,draggables)=>{let frame$2=droppable$1.frame;isHomeOf(draggable$1,droppable$1)&&invariant(),droppable$1.subject.withPlaceholder&&invariant();let placeholderSize=getDisplacedBy(droppable$1.axis,draggable$1.displaceBy).point,requiredGrowth=getRequiredGrowthForPlaceholder(droppable$1,placeholderSize,draggables),added={placeholderSize,increasedBy:requiredGrowth,oldFrameMaxScroll:droppable$1.frame?droppable$1.frame.scroll.max:null};if(!frame$2){let subject$1=getSubject({page:droppable$1.subject.page,withPlaceholder:added,axis:droppable$1.axis,frame:droppable$1.frame});return{...droppable$1,subject:subject$1}}let newFrame=withMaxScroll(frame$2,requiredGrowth?add(frame$2.scroll.max,requiredGrowth):frame$2.scroll.max),subject=getSubject({page:droppable$1.subject.page,withPlaceholder:added,axis:droppable$1.axis,frame:newFrame});return{...droppable$1,subject,frame:newFrame}},removePlaceholder=droppable$1=>{let added=droppable$1.subject.withPlaceholder;!added&&invariant();let frame$2=droppable$1.frame;if(!frame$2){let subject$1=getSubject({page:droppable$1.subject.page,axis:droppable$1.axis,frame:null,withPlaceholder:null});return{...droppable$1,subject:subject$1}}let oldMaxScroll=added.oldFrameMaxScroll;!oldMaxScroll&&invariant();let newFrame=withMaxScroll(frame$2,oldMaxScroll),subject=getSubject({page:droppable$1.subject.page,axis:droppable$1.axis,frame:newFrame,withPlaceholder:null});return{...droppable$1,subject,frame:newFrame}},moveToNewDroppable=({previousPageBorderBoxCenter,moveRelativeTo,insideDestination,draggable:draggable$1,draggables,destination,viewport,afterCritical})=>{if(!moveRelativeTo){if(insideDestination.length)return null;let proposed={displaced:emptyGroups,displacedBy:noDisplacedBy,at:{type:`REORDER`,destination:{droppableId:destination.descriptor.id,index:0}}},proposedPageBorderBoxCenter=getPageBorderBoxCenterFromImpact({impact:proposed,draggable:draggable$1,droppable:destination,draggables,afterCritical});return isTotallyVisibleInNewLocation({draggable:draggable$1,destination:isHomeOf(draggable$1,destination)?destination:addPlaceholder(destination,draggable$1,draggables),newPageBorderBoxCenter:proposedPageBorderBoxCenter,viewport:viewport.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?proposed:null}let isGoingBeforeTarget=previousPageBorderBoxCenter[destination.axis.line]<=moveRelativeTo.page.borderBox.center[destination.axis.line],proposedIndex=(()=>{let relativeTo=moveRelativeTo.descriptor.index;return moveRelativeTo.descriptor.id===draggable$1.descriptor.id||isGoingBeforeTarget?relativeTo:relativeTo+1})();return calculateReorderImpact({draggable:draggable$1,insideDestination,destination,viewport,displacedBy:getDisplacedBy(destination.axis,draggable$1.displaceBy),last:emptyGroups,index:proposedIndex})},moveCrossAxis=({isMovingForward,previousPageBorderBoxCenter,draggable:draggable$1,isOver,draggables,droppables,viewport,afterCritical})=>{let destination=getBestCrossAxisDroppable({isMovingForward,pageBorderBoxCenter:previousPageBorderBoxCenter,source:isOver,droppables,viewport});if(!destination)return null;let insideDestination=getDraggablesInsideDroppable(destination.descriptor.id,draggables),impact=moveToNewDroppable({previousPageBorderBoxCenter,destination,draggable:draggable$1,draggables,moveRelativeTo:getClosestDraggable({pageBorderBoxCenter:previousPageBorderBoxCenter,viewport,destination,insideDestination,afterCritical}),insideDestination,viewport,afterCritical});return impact?{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter:getPageBorderBoxCenterFromImpact({impact,draggable:draggable$1,droppable:destination,draggables,afterCritical}),draggable:draggable$1,viewport}),impact,scrollJumpRequest:null}:null},whatIsDraggedOver=impact=>{let at$1=impact.at;return at$1?at$1.type===`REORDER`?at$1.destination.droppableId:at$1.combine.droppableId:null},getDroppableOver$1=(impact,droppables)=>{let id$3=whatIsDraggedOver(impact);return id$3?droppables[id$3]:null},moveInDirection=({state,type})=>{let isActuallyOver=getDroppableOver$1(state.impact,state.dimensions.droppables),isMainAxisMovementAllowed=!!isActuallyOver,home$1=state.dimensions.droppables[state.critical.droppable.id],isOver=isActuallyOver||home$1,direction=isOver.axis.direction,isMovingOnMainAxis=direction===`vertical`&&(type===`MOVE_UP`||type===`MOVE_DOWN`)||direction===`horizontal`&&(type===`MOVE_LEFT`||type===`MOVE_RIGHT`);if(isMovingOnMainAxis&&!isMainAxisMovementAllowed)return null;let isMovingForward=type===`MOVE_DOWN`||type===`MOVE_RIGHT`,draggable$1=state.dimensions.draggables[state.critical.draggable.id],previousPageBorderBoxCenter=state.current.page.borderBoxCenter,{draggables,droppables}=state.dimensions;return isMovingOnMainAxis?moveToNextPlace({isMovingForward,previousPageBorderBoxCenter,draggable:draggable$1,destination:isOver,draggables,viewport:state.viewport,previousClientSelection:state.current.client.selection,previousImpact:state.impact,afterCritical:state.afterCritical}):moveCrossAxis({isMovingForward,previousPageBorderBoxCenter,draggable:draggable$1,isOver,draggables,droppables,viewport:state.viewport,afterCritical:state.afterCritical})};function isMovementAllowed(state){return state.phase===`DRAGGING`||state.phase===`COLLECTING`}function isPositionInFrame(frame$2){let isWithinVertical=isWithin(frame$2.top,frame$2.bottom),isWithinHorizontal=isWithin(frame$2.left,frame$2.right);return function(point){return isWithinVertical(point.y)&&isWithinHorizontal(point.x)}}function getHasOverlap(first,second){return first.left<second.right&&first.right>second.left&&first.top<second.bottom&&first.bottom>second.top}function getFurthestAway({pageBorderBox,draggable:draggable$1,candidates}){let startCenter=draggable$1.page.borderBox.center,sorted=candidates.map(candidate=>{let axis=candidate.axis,target=patch(candidate.axis.line,pageBorderBox.center[axis.line],candidate.page.borderBox.center[axis.crossAxisLine]);return{id:candidate.descriptor.id,distance:distance(startCenter,target)}}).sort((a$4,b$3)=>b$3.distance-a$4.distance);return sorted[0]?sorted[0].id:null}function getDroppableOver({pageBorderBox,draggable:draggable$1,droppables}){let candidates=toDroppableList(droppables).filter(item=>{if(!item.isEnabled)return!1;let active=item.subject.active;if(!active||!getHasOverlap(pageBorderBox,active))return!1;if(isPositionInFrame(active)(pageBorderBox.center))return!0;let axis=item.axis,childCenter=active.center[axis.crossAxisLine],crossAxisStart=pageBorderBox[axis.crossAxisStart],crossAxisEnd=pageBorderBox[axis.crossAxisEnd],isContained=isWithin(active[axis.crossAxisStart],active[axis.crossAxisEnd]),isStartContained=isContained(crossAxisStart),isEndContained=isContained(crossAxisEnd);return!isStartContained&&!isEndContained?!0:isStartContained?crossAxisStart<childCenter:crossAxisEnd>childCenter});return candidates.length?candidates.length===1?candidates[0].descriptor.id:getFurthestAway({pageBorderBox,draggable:draggable$1,candidates}):null}var offsetRectByPosition=(rect,point)=>getRect(offsetByPosition(rect,point)),withDroppableScroll=(droppable$1,area)=>{let frame$2=droppable$1.frame;return frame$2?offsetRectByPosition(area,frame$2.scroll.diff.value):area};function getIsDisplaced({displaced,id:id$3}){return!!(displaced.visible[id$3]||displaced.invisible[id$3])}function atIndex({draggable:draggable$1,closest:closest$2,inHomeList}){return closest$2?inHomeList&&closest$2.descriptor.index>draggable$1.descriptor.index?closest$2.descriptor.index-1:closest$2.descriptor.index:null}var getReorderImpact=({pageBorderBoxWithDroppableScroll:targetRect,draggable:draggable$1,destination,insideDestination,last,viewport,afterCritical})=>{let axis=destination.axis,displacedBy=getDisplacedBy(destination.axis,draggable$1.displaceBy),displacement=displacedBy.value,targetStart=targetRect[axis.start],targetEnd=targetRect[axis.end];return calculateReorderImpact({draggable:draggable$1,insideDestination,destination,viewport,last,displacedBy,index:atIndex({draggable:draggable$1,closest:removeDraggableFromList(draggable$1,insideDestination).find(child=>{let id$3=child.descriptor.id,childCenter=child.page.borderBox.center[axis.line],didStartAfterCritical$1=didStartAfterCritical(id$3,afterCritical),isDisplaced=getIsDisplaced({displaced:last,id:id$3});return didStartAfterCritical$1?isDisplaced?targetEnd<=childCenter:targetStart<childCenter-displacement:isDisplaced?targetEnd<=childCenter+displacement:targetStart<childCenter})||null,inHomeList:isHomeOf(draggable$1,destination)})})},combineThresholdDivisor=4,getCombineImpact=({draggable:draggable$1,pageBorderBoxWithDroppableScroll:targetRect,previousImpact,destination,insideDestination,afterCritical})=>{if(!destination.isCombineEnabled)return null;let axis=destination.axis,displacedBy=getDisplacedBy(destination.axis,draggable$1.displaceBy),displacement=displacedBy.value,targetStart=targetRect[axis.start],targetEnd=targetRect[axis.end],combineWith=removeDraggableFromList(draggable$1,insideDestination).find(child=>{let id$3=child.descriptor.id,childRect=child.page.borderBox,threshold=childRect[axis.size]/combineThresholdDivisor,didStartAfterCritical$1=didStartAfterCritical(id$3,afterCritical),isDisplaced=getIsDisplaced({displaced:previousImpact.displaced,id:id$3});return didStartAfterCritical$1?isDisplaced?targetEnd>childRect[axis.start]+threshold&&targetEnd<childRect[axis.end]-threshold:targetStart>childRect[axis.start]-displacement+threshold&&targetStart<childRect[axis.end]-displacement-threshold:isDisplaced?targetEnd>childRect[axis.start]+displacement+threshold&&targetEnd<childRect[axis.end]+displacement-threshold:targetStart>childRect[axis.start]+threshold&&targetStart<childRect[axis.end]-threshold});return combineWith?{displacedBy,displaced:previousImpact.displaced,at:{type:`COMBINE`,combine:{draggableId:combineWith.descriptor.id,droppableId:destination.descriptor.id}}}:null},getDragImpact=({pageOffset,draggable:draggable$1,draggables,droppables,previousImpact,viewport,afterCritical})=>{let pageBorderBox=offsetRectByPosition(draggable$1.page.borderBox,pageOffset),destinationId=getDroppableOver({pageBorderBox,draggable:draggable$1,droppables});if(!destinationId)return noImpact;let destination=droppables[destinationId],insideDestination=getDraggablesInsideDroppable(destination.descriptor.id,draggables),pageBorderBoxWithDroppableScroll=withDroppableScroll(destination,pageBorderBox);return getCombineImpact({pageBorderBoxWithDroppableScroll,draggable:draggable$1,previousImpact,destination,insideDestination,afterCritical})||getReorderImpact({pageBorderBoxWithDroppableScroll,draggable:draggable$1,destination,insideDestination,last:previousImpact.displaced,viewport,afterCritical})},patchDroppableMap=(droppables,updated)=>({...droppables,[updated.descriptor.id]:updated}),clearUnusedPlaceholder=({previousImpact,impact,droppables})=>{let last=whatIsDraggedOver(previousImpact),now$4=whatIsDraggedOver(impact);if(!last||last===now$4)return droppables;let lastDroppable=droppables[last];return lastDroppable.subject.withPlaceholder?patchDroppableMap(droppables,removePlaceholder(lastDroppable)):droppables},recomputePlaceholders=({draggable:draggable$1,draggables,droppables,previousImpact,impact})=>{let cleaned=clearUnusedPlaceholder({previousImpact,impact,droppables}),isOver=whatIsDraggedOver(impact);if(!isOver)return cleaned;let droppable$1=droppables[isOver];return isHomeOf(draggable$1,droppable$1)||droppable$1.subject.withPlaceholder?cleaned:patchDroppableMap(cleaned,addPlaceholder(droppable$1,draggable$1,draggables))},update=({state,clientSelection:forcedClientSelection,dimensions:forcedDimensions,viewport:forcedViewport,impact:forcedImpact,scrollJumpRequest})=>{let viewport=forcedViewport||state.viewport,dimensions=forcedDimensions||state.dimensions,clientSelection=forcedClientSelection||state.current.client.selection,offset$1=subtract(clientSelection,state.initial.client.selection),client={offset:offset$1,selection:clientSelection,borderBoxCenter:add(state.initial.client.borderBoxCenter,offset$1)},page={selection:add(client.selection,viewport.scroll.current),borderBoxCenter:add(client.borderBoxCenter,viewport.scroll.current),offset:add(client.offset,viewport.scroll.diff.value)},current={client,page};if(state.phase===`COLLECTING`)return{...state,dimensions,viewport,current};let draggable$1=dimensions.draggables[state.critical.draggable.id],newImpact=forcedImpact||getDragImpact({pageOffset:page.offset,draggable:draggable$1,draggables:dimensions.draggables,droppables:dimensions.droppables,previousImpact:state.impact,viewport,afterCritical:state.afterCritical}),withUpdatedPlaceholders=recomputePlaceholders({draggable:draggable$1,impact:newImpact,previousImpact:state.impact,draggables:dimensions.draggables,droppables:dimensions.droppables});return{...state,current,dimensions:{draggables:dimensions.draggables,droppables:withUpdatedPlaceholders},impact:newImpact,viewport,scrollJumpRequest:scrollJumpRequest||null,forceShouldAnimate:scrollJumpRequest?!1:null}};function getDraggables(ids$1,draggables){return ids$1.map(id$3=>draggables[id$3])}var recompute=({impact,viewport,draggables,destination,forceShouldAnimate})=>{let last=impact.displaced,displaced=getDisplacementGroups({afterDragging:getDraggables(last.all,draggables),destination,displacedBy:impact.displacedBy,viewport:viewport.frame,forceShouldAnimate,last});return{...impact,displaced}},getClientBorderBoxCenter=({impact,draggable:draggable$1,droppable:droppable$1,draggables,viewport,afterCritical})=>getClientFromPageBorderBoxCenter({pageBorderBoxCenter:getPageBorderBoxCenterFromImpact({impact,draggable:draggable$1,draggables,droppable:droppable$1,afterCritical}),draggable:draggable$1,viewport}),refreshSnap=({state,dimensions:forcedDimensions,viewport:forcedViewport})=>{state.movementMode!==`SNAP`&&invariant();let needsVisibilityCheck=state.impact,viewport=forcedViewport||state.viewport,dimensions=forcedDimensions||state.dimensions,{draggables,droppables}=dimensions,draggable$1=draggables[state.critical.draggable.id],isOver=whatIsDraggedOver(needsVisibilityCheck);!isOver&&invariant();let destination=droppables[isOver],impact=recompute({impact:needsVisibilityCheck,viewport,destination,draggables});return update({impact,clientSelection:getClientBorderBoxCenter({impact,draggable:draggable$1,droppable:destination,draggables,viewport,afterCritical:state.afterCritical}),state,dimensions,viewport})},getHomeLocation=descriptor=>({index:descriptor.index,droppableId:descriptor.droppableId}),getLiftEffect=({draggable:draggable$1,home:home$1,draggables,viewport})=>{let displacedBy=getDisplacedBy(home$1.axis,draggable$1.displaceBy),insideHome=getDraggablesInsideDroppable(home$1.descriptor.id,draggables),rawIndex=insideHome.indexOf(draggable$1);rawIndex===-1&&invariant();let afterDragging=insideHome.slice(rawIndex+1),effected=afterDragging.reduce((previous,item)=>(previous[item.descriptor.id]=!0,previous),{}),afterCritical={inVirtualList:home$1.descriptor.mode===`virtual`,displacedBy,effected};return{impact:{displaced:getDisplacementGroups({afterDragging,destination:home$1,displacedBy,last:null,viewport:viewport.frame,forceShouldAnimate:!1}),displacedBy,at:{type:`REORDER`,destination:getHomeLocation(draggable$1.descriptor)}},afterCritical}},patchDimensionMap=(dimensions,updated)=>({draggables:dimensions.draggables,droppables:patchDroppableMap(dimensions.droppables,updated)}),start=key$1=>{},finish=key$1=>{},offsetDraggable=({draggable:draggable$1,offset:offset$1,initialWindowScroll})=>{let client=offset(draggable$1.client,offset$1),page=withScroll(client,initialWindowScroll);return{...draggable$1,placeholder:{...draggable$1.placeholder,client},client,page}},getFrame=droppable$1=>{let frame$2=droppable$1.frame;return!frame$2&&invariant(),frame$2},adjustAdditionsForScrollChanges=({additions,updatedDroppables,viewport})=>{let windowScrollChange=viewport.scroll.diff.value;return additions.map(draggable$1=>{let modified=updatedDroppables[draggable$1.descriptor.droppableId],droppableScrollChange=getFrame(modified).scroll.diff.value;return offsetDraggable({draggable:draggable$1,offset:add(windowScrollChange,droppableScrollChange),initialWindowScroll:viewport.scroll.initial})})},publishWhileDraggingInVirtual=({state,published})=>{let withScrollChange=published.modified.map(update$1=>{let existing=state.dimensions.droppables[update$1.droppableId];return scrollDroppable(existing,update$1.scroll)}),droppables={...state.dimensions.droppables,...toDroppableMap(withScrollChange)},updatedAdditions=toDraggableMap(adjustAdditionsForScrollChanges({additions:published.additions,updatedDroppables:droppables,viewport:state.viewport})),draggables={...state.dimensions.draggables,...updatedAdditions};published.removals.forEach(id$3=>{delete draggables[id$3]});let dimensions={droppables,draggables},wasOverId=whatIsDraggedOver(state.impact),wasOver=wasOverId?dimensions.droppables[wasOverId]:null,draggable$1=dimensions.draggables[state.critical.draggable.id],home$1=dimensions.droppables[state.critical.droppable.id],{impact:onLiftImpact,afterCritical}=getLiftEffect({draggable:draggable$1,home:home$1,draggables,viewport:state.viewport}),previousImpact=wasOver&&wasOver.isCombineEnabled?state.impact:onLiftImpact,impact=getDragImpact({pageOffset:state.current.page.offset,draggable:dimensions.draggables[state.critical.draggable.id],draggables:dimensions.draggables,droppables:dimensions.droppables,previousImpact,viewport:state.viewport,afterCritical}),draggingState={...state,phase:`DRAGGING`,impact,onLiftImpact,dimensions,afterCritical,forceShouldAnimate:!1};return state.phase===`COLLECTING`?draggingState:{...draggingState,phase:`DROP_PENDING`,reason:state.reason,isWaiting:!1}},isSnapping=state=>state.movementMode===`SNAP`,postDroppableChange=(state,updated,isEnabledChanging)=>{let dimensions=patchDimensionMap(state.dimensions,updated);return!isSnapping(state)||isEnabledChanging?update({state,dimensions}):refreshSnap({state,dimensions})};function removeScrollJumpRequest(state){return state.isDragging&&state.movementMode===`SNAP`?{...state,scrollJumpRequest:null}:state}var idle$2={phase:`IDLE`,completed:null,shouldFlush:!1},reducer=(state=idle$2,action)=>{if(action.type===`FLUSH`)return{...idle$2,shouldFlush:!0};if(action.type===`INITIAL_PUBLISH`){state.phase!==`IDLE`&&invariant();let{critical,clientSelection,viewport,dimensions,movementMode}=action.payload,draggable$1=dimensions.draggables[critical.draggable.id],home$1=dimensions.droppables[critical.droppable.id],client={selection:clientSelection,borderBoxCenter:draggable$1.client.borderBox.center,offset:origin},initial={client,page:{selection:add(client.selection,viewport.scroll.initial),borderBoxCenter:add(client.selection,viewport.scroll.initial),offset:add(client.selection,viewport.scroll.diff.value)}},isWindowScrollAllowed=toDroppableList(dimensions.droppables).every(item=>!item.isFixedOnPage),{impact,afterCritical}=getLiftEffect({draggable:draggable$1,home:home$1,draggables:dimensions.draggables,viewport});return{phase:`DRAGGING`,isDragging:!0,critical,movementMode,dimensions,initial,current:initial,isWindowScrollAllowed,impact,afterCritical,onLiftImpact:impact,viewport,scrollJumpRequest:null,forceShouldAnimate:null}}if(action.type===`COLLECTION_STARTING`)return state.phase===`COLLECTING`||state.phase===`DROP_PENDING`?state:(state.phase!==`DRAGGING`&&invariant(),{...state,phase:`COLLECTING`});if(action.type===`PUBLISH_WHILE_DRAGGING`)return!(state.phase===`COLLECTING`||state.phase===`DROP_PENDING`)&&invariant(),publishWhileDraggingInVirtual({state,published:action.payload});if(action.type===`MOVE`){if(state.phase===`DROP_PENDING`)return state;!isMovementAllowed(state)&&invariant();let{client:clientSelection}=action.payload;return isEqual$1(clientSelection,state.current.client.selection)?state:update({state,clientSelection,impact:isSnapping(state)?state.impact:null})}if(action.type===`UPDATE_DROPPABLE_SCROLL`){if(state.phase===`DROP_PENDING`||state.phase===`COLLECTING`)return removeScrollJumpRequest(state);!isMovementAllowed(state)&&invariant();let{id:id$3,newScroll}=action.payload,target=state.dimensions.droppables[id$3];return target?postDroppableChange(state,scrollDroppable(target,newScroll),!1):state}if(action.type===`UPDATE_DROPPABLE_IS_ENABLED`){if(state.phase===`DROP_PENDING`)return state;!isMovementAllowed(state)&&invariant();let{id:id$3,isEnabled}=action.payload,target=state.dimensions.droppables[id$3];return!target&&invariant(),target.isEnabled===isEnabled&&invariant(),postDroppableChange(state,{...target,isEnabled},!0)}if(action.type===`UPDATE_DROPPABLE_IS_COMBINE_ENABLED`){if(state.phase===`DROP_PENDING`)return state;!isMovementAllowed(state)&&invariant();let{id:id$3,isCombineEnabled}=action.payload,target=state.dimensions.droppables[id$3];return!target&&invariant(),target.isCombineEnabled===isCombineEnabled&&invariant(),postDroppableChange(state,{...target,isCombineEnabled},!0)}if(action.type===`MOVE_BY_WINDOW_SCROLL`){if(state.phase===`DROP_PENDING`||state.phase===`DROP_ANIMATING`)return state;!isMovementAllowed(state)&&invariant(),!state.isWindowScrollAllowed&&invariant();let newScroll=action.payload.newScroll;if(isEqual$1(state.viewport.scroll.current,newScroll))return removeScrollJumpRequest(state);let viewport=scrollViewport(state.viewport,newScroll);return isSnapping(state)?refreshSnap({state,viewport}):update({state,viewport})}if(action.type===`UPDATE_VIEWPORT_MAX_SCROLL`){if(!isMovementAllowed(state))return state;let maxScroll=action.payload.maxScroll;if(isEqual$1(maxScroll,state.viewport.scroll.max))return state;let withMaxScroll$1={...state.viewport,scroll:{...state.viewport.scroll,max:maxScroll}};return{...state,viewport:withMaxScroll$1}}if(action.type===`MOVE_UP`||action.type===`MOVE_DOWN`||action.type===`MOVE_LEFT`||action.type===`MOVE_RIGHT`){if(state.phase===`COLLECTING`||state.phase===`DROP_PENDING`)return state;state.phase!==`DRAGGING`&&invariant();let result=moveInDirection({state,type:action.type});return result?update({state,impact:result.impact,clientSelection:result.clientSelection,scrollJumpRequest:result.scrollJumpRequest}):state}if(action.type===`DROP_PENDING`){let reason=action.payload.reason;return state.phase!==`COLLECTING`&&invariant(),{...state,phase:`DROP_PENDING`,isWaiting:!0,reason}}if(action.type===`DROP_ANIMATE`){let{completed,dropDuration,newHomeClientOffset}=action.payload;return!(state.phase===`DRAGGING`||state.phase===`DROP_PENDING`)&&invariant(),{phase:`DROP_ANIMATING`,completed,dropDuration,newHomeClientOffset,dimensions:state.dimensions}}if(action.type===`DROP_COMPLETE`){let{completed}=action.payload;return{phase:`IDLE`,completed,shouldFlush:!1}}return state};function guard(action,predicate){return action instanceof Object&&`type`in action&&action.type===predicate}var beforeInitialCapture=args=>({type:`BEFORE_INITIAL_CAPTURE`,payload:args}),lift$1=args=>({type:`LIFT`,payload:args}),initialPublish=args=>({type:`INITIAL_PUBLISH`,payload:args}),publishWhileDragging=args=>({type:`PUBLISH_WHILE_DRAGGING`,payload:args}),collectionStarting=()=>({type:`COLLECTION_STARTING`,payload:null}),updateDroppableScroll=args=>({type:`UPDATE_DROPPABLE_SCROLL`,payload:args}),updateDroppableIsEnabled=args=>({type:`UPDATE_DROPPABLE_IS_ENABLED`,payload:args}),updateDroppableIsCombineEnabled=args=>({type:`UPDATE_DROPPABLE_IS_COMBINE_ENABLED`,payload:args}),move=args=>({type:`MOVE`,payload:args}),moveByWindowScroll=args=>({type:`MOVE_BY_WINDOW_SCROLL`,payload:args}),updateViewportMaxScroll=args=>({type:`UPDATE_VIEWPORT_MAX_SCROLL`,payload:args}),moveUp=()=>({type:`MOVE_UP`,payload:null}),moveDown=()=>({type:`MOVE_DOWN`,payload:null}),moveRight=()=>({type:`MOVE_RIGHT`,payload:null}),moveLeft=()=>({type:`MOVE_LEFT`,payload:null}),flush=()=>({type:`FLUSH`,payload:null}),animateDrop=args=>({type:`DROP_ANIMATE`,payload:args}),completeDrop=args=>({type:`DROP_COMPLETE`,payload:args}),drop=args=>({type:`DROP`,payload:args}),dropPending=args=>({type:`DROP_PENDING`,payload:args}),dropAnimationFinished=()=>({type:`DROP_ANIMATION_FINISHED`,payload:null});function validateDimensions(critical,dimensions){}var lift=marshal=>({getState,dispatch:dispatch$1})=>next=>action=>{if(!guard(action,`LIFT`)){next(action);return}let{id:id$3,clientSelection,movementMode}=action.payload,initial=getState();initial.phase===`DROP_ANIMATING`&&dispatch$1(completeDrop({completed:initial.completed})),getState().phase!==`IDLE`&&invariant(),dispatch$1(flush()),dispatch$1(beforeInitialCapture({draggableId:id$3,movementMode}));let request={draggableId:id$3,scrollOptions:{shouldPublishImmediately:movementMode===`SNAP`}},{critical,dimensions,viewport}=marshal.startPublishing(request);dispatch$1(initialPublish({critical,dimensions,clientSelection,movementMode,viewport}))},style=marshal=>()=>next=>action=>{guard(action,`INITIAL_PUBLISH`)&&marshal.dragging(),guard(action,`DROP_ANIMATE`)&&marshal.dropping(action.payload.completed.result.reason),(guard(action,`FLUSH`)||guard(action,`DROP_COMPLETE`))&&marshal.resting(),next(action)},curves={outOfTheWay:`cubic-bezier(0.2, 0, 0, 1)`,drop:`cubic-bezier(.2,1,.1,1)`},combine={opacity:{drop:0,combining:.7},scale:{drop:.75}},timings={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},outOfTheWayTiming=`${timings.outOfTheWay}s ${curves.outOfTheWay}`,transitions={fluid:`opacity ${outOfTheWayTiming}`,snap:`transform ${outOfTheWayTiming}, opacity ${outOfTheWayTiming}`,drop:duration=>{let timing=`${duration}s ${curves.drop}`;return`transform ${timing}, opacity ${timing}`},outOfTheWay:`transform ${outOfTheWayTiming}`,placeholder:`height ${outOfTheWayTiming}, width ${outOfTheWayTiming}, margin ${outOfTheWayTiming}`},moveTo=offset$1=>isEqual$1(offset$1,origin)?void 0:`translate(${offset$1.x}px, ${offset$1.y}px)`,transforms={moveTo,drop:(offset$1,isCombining)=>{let translate=moveTo(offset$1);if(translate)return isCombining?`${translate} scale(${combine.scale.drop})`:translate}},{minDropTime,maxDropTime}=timings,dropTimeRange=maxDropTime-minDropTime,maxDropTimeAtDistance=1500,cancelDropModifier=.6,getDropDuration=({current,destination,reason})=>{let distance$1$1=distance(current,destination);if(distance$1$1<=0)return minDropTime;if(distance$1$1>=maxDropTimeAtDistance)return maxDropTime;let duration=minDropTime+dropTimeRange*(distance$1$1/maxDropTimeAtDistance),withDuration=reason===`CANCEL`?duration*cancelDropModifier:duration;return Number(withDuration.toFixed(2))},getNewHomeClientOffset=({impact,draggable:draggable$1,dimensions,viewport,afterCritical})=>{let{draggables,droppables}=dimensions,droppableId=whatIsDraggedOver(impact),destination=droppableId?droppables[droppableId]:null,home$1=droppables[draggable$1.descriptor.droppableId];return subtract(getClientBorderBoxCenter({impact,draggable:draggable$1,draggables,afterCritical,droppable:destination||home$1,viewport}),draggable$1.client.borderBox.center)},getDropImpact=({draggables,reason,lastImpact,home:home$1,viewport,onLiftImpact})=>!lastImpact.at||reason!==`DROP`?{impact:recompute({draggables,impact:onLiftImpact,destination:home$1,viewport,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:lastImpact.at.type===`REORDER`?{impact:lastImpact,didDropInsideDroppable:!0}:{impact:{...lastImpact,displaced:emptyGroups},didDropInsideDroppable:!0},dropMiddleware=({getState,dispatch:dispatch$1})=>next=>action=>{if(!guard(action,`DROP`)){next(action);return}let state=getState(),reason=action.payload.reason;if(state.phase===`COLLECTING`){dispatch$1(dropPending({reason}));return}if(state.phase===`IDLE`)return;state.phase===`DROP_PENDING`&&state.isWaiting&&invariant(),!(state.phase===`DRAGGING`||state.phase===`DROP_PENDING`)&&invariant();let critical=state.critical,dimensions=state.dimensions,draggable$1=dimensions.draggables[state.critical.draggable.id],{impact,didDropInsideDroppable}=getDropImpact({reason,lastImpact:state.impact,afterCritical:state.afterCritical,onLiftImpact:state.onLiftImpact,home:state.dimensions.droppables[state.critical.droppable.id],viewport:state.viewport,draggables:state.dimensions.draggables}),destination=didDropInsideDroppable?tryGetDestination(impact):null,combine$1=didDropInsideDroppable?tryGetCombine(impact):null,source={index:critical.draggable.index,droppableId:critical.droppable.id},result={draggableId:draggable$1.descriptor.id,type:draggable$1.descriptor.type,source,reason,mode:state.movementMode,destination,combine:combine$1},newHomeClientOffset=getNewHomeClientOffset({impact,draggable:draggable$1,dimensions,viewport:state.viewport,afterCritical:state.afterCritical}),completed={critical:state.critical,afterCritical:state.afterCritical,result,impact};if(!(!isEqual$1(state.current.client.offset,newHomeClientOffset)||result.combine)){dispatch$1(completeDrop({completed}));return}dispatch$1(animateDrop({newHomeClientOffset,dropDuration:getDropDuration({current:state.current.client.offset,destination:newHomeClientOffset,reason}),completed}))},getWindowScroll=()=>({x:window.pageXOffset,y:window.pageYOffset});function getWindowScrollBinding(update$1){return{eventName:`scroll`,options:{passive:!0,capture:!1},fn:event=>{event.target!==window&&event.target!==window.document||update$1()}}}function getScrollListener({onWindowScroll}){function updateScroll(){onWindowScroll(getWindowScroll())}let scheduled=raf_schd_esm_default(updateScroll),binding=getWindowScrollBinding(scheduled),unbind=noop$2;function isActive$1(){return unbind!==noop$2}function start$2(){isActive$1()&&invariant(),unbind=bindEvents(window,[binding])}function stop(){!isActive$1()&&invariant(),scheduled.cancel(),unbind(),unbind=noop$2}return{start:start$2,stop,isActive:isActive$1}}var shouldStop$1=action=>guard(action,`DROP_COMPLETE`)||guard(action,`DROP_ANIMATE`)||guard(action,`FLUSH`),scrollListener=store=>{let listener=getScrollListener({onWindowScroll:newScroll=>{store.dispatch(moveByWindowScroll({newScroll}))}});return next=>action=>{!listener.isActive()&&guard(action,`INITIAL_PUBLISH`)&&listener.start(),listener.isActive()&&shouldStop$1(action)&&listener.stop(),next(action)}},getExpiringAnnounce=announce=>{let wasCalled=!1,isExpired=!1,timeoutId=setTimeout(()=>{isExpired=!0}),result=message=>{wasCalled||isExpired||(wasCalled=!0,announce(message),clearTimeout(timeoutId))};return result.wasCalled=()=>wasCalled,result},getAsyncMarshal=()=>{let entries=[],execute$1=timerId=>{let index$2=entries.findIndex(item=>item.timerId===timerId);index$2===-1&&invariant();let[entry]=entries.splice(index$2,1);entry.callback()};return{add:fn=>{let timerId=setTimeout(()=>execute$1(timerId)),entry={timerId,callback:fn};entries.push(entry)},flush:()=>{if(!entries.length)return;let shallow=[...entries];entries.length=0,shallow.forEach(entry=>{clearTimeout(entry.timerId),entry.callback()})}}},areLocationsEqual=(first,second)=>first==null&&second==null?!0:first==null||second==null?!1:first.droppableId===second.droppableId&&first.index===second.index,isCombineEqual=(first,second)=>first==null&&second==null?!0:first==null||second==null?!1:first.draggableId===second.draggableId&&first.droppableId===second.droppableId,isCriticalEqual=(first,second)=>{if(first===second)return!0;let isDraggableEqual=first.draggable.id===second.draggable.id&&first.draggable.droppableId===second.draggable.droppableId&&first.draggable.type===second.draggable.type&&first.draggable.index===second.draggable.index,isDroppableEqual=first.droppable.id===second.droppable.id&&first.droppable.type===second.droppable.type;return isDraggableEqual&&isDroppableEqual},withTimings=(key$1,fn)=>{fn()},getDragStart=(critical,mode)=>({draggableId:critical.draggable.id,type:critical.droppable.type,source:{droppableId:critical.droppable.id,index:critical.draggable.index},mode});function execute(responder,data,announce,getDefaultMessage){if(!responder){announce(getDefaultMessage(data));return}let willExpire=getExpiringAnnounce(announce);responder(data,{announce:willExpire}),willExpire.wasCalled()||announce(getDefaultMessage(data))}var getPublisher=(getResponders,announce)=>{let asyncMarshal=getAsyncMarshal(),dragging=null,beforeCapture=(draggableId,mode)=>{dragging&&invariant(),withTimings(`onBeforeCapture`,()=>{let fn=getResponders().onBeforeCapture;fn&&fn({draggableId,mode})})},beforeStart=(critical,mode)=>{dragging&&invariant(),withTimings(`onBeforeDragStart`,()=>{let fn=getResponders().onBeforeDragStart;fn&&fn(getDragStart(critical,mode))})},start$2=(critical,mode)=>{dragging&&invariant();let data=getDragStart(critical,mode);dragging={mode,lastCritical:critical,lastLocation:data.source,lastCombine:null},asyncMarshal.add(()=>{withTimings(`onDragStart`,()=>execute(getResponders().onDragStart,data,announce,preset.onDragStart))})},update$1=(critical,impact)=>{let location$1=tryGetDestination(impact),combine$1=tryGetCombine(impact);!dragging&&invariant();let hasCriticalChanged=!isCriticalEqual(critical,dragging.lastCritical);hasCriticalChanged&&(dragging.lastCritical=critical);let hasLocationChanged=!areLocationsEqual(dragging.lastLocation,location$1);hasLocationChanged&&(dragging.lastLocation=location$1);let hasGroupingChanged=!isCombineEqual(dragging.lastCombine,combine$1);if(hasGroupingChanged&&(dragging.lastCombine=combine$1),!hasCriticalChanged&&!hasLocationChanged&&!hasGroupingChanged)return;let data={...getDragStart(critical,dragging.mode),combine:combine$1,destination:location$1};asyncMarshal.add(()=>{withTimings(`onDragUpdate`,()=>execute(getResponders().onDragUpdate,data,announce,preset.onDragUpdate))})},flush$1=()=>{!dragging&&invariant(),asyncMarshal.flush()},drop$1=result=>{!dragging&&invariant(),dragging=null,withTimings(`onDragEnd`,()=>execute(getResponders().onDragEnd,result,announce,preset.onDragEnd))};return{beforeCapture,beforeStart,start:start$2,update:update$1,flush:flush$1,drop:drop$1,abort:()=>{dragging&&drop$1({...getDragStart(dragging.lastCritical,dragging.mode),combine:null,destination:null,reason:`CANCEL`})}}},responders=(getResponders,announce)=>{let publisher=getPublisher(getResponders,announce);return store=>next=>action=>{if(guard(action,`BEFORE_INITIAL_CAPTURE`)){publisher.beforeCapture(action.payload.draggableId,action.payload.movementMode);return}if(guard(action,`INITIAL_PUBLISH`)){let critical=action.payload.critical;publisher.beforeStart(critical,action.payload.movementMode),next(action),publisher.start(critical,action.payload.movementMode);return}if(guard(action,`DROP_COMPLETE`)){let result=action.payload.completed.result;publisher.flush(),next(action),publisher.drop(result);return}if(next(action),guard(action,`FLUSH`)){publisher.abort();return}let state=store.getState();state.phase===`DRAGGING`&&publisher.update(state.critical,state.impact)}},dropAnimationFinishMiddleware=store=>next=>action=>{if(!guard(action,`DROP_ANIMATION_FINISHED`)){next(action);return}let state=store.getState();state.phase!==`DROP_ANIMATING`&&invariant(),store.dispatch(completeDrop({completed:state.completed}))},dropAnimationFlushOnScrollMiddleware=store=>{let unbind=null,frameId=null;function clear(){frameId&&=(cancelAnimationFrame(frameId),null),unbind&&=(unbind(),null)}return next=>action=>{if((guard(action,`FLUSH`)||guard(action,`DROP_COMPLETE`)||guard(action,`DROP_ANIMATION_FINISHED`))&&clear(),next(action),!guard(action,`DROP_ANIMATE`))return;let binding={eventName:`scroll`,options:{capture:!0,passive:!1,once:!0},fn:function(){store.getState().phase===`DROP_ANIMATING`&&store.dispatch(dropAnimationFinished())}};frameId=requestAnimationFrame(()=>{frameId=null,unbind=bindEvents(window,[binding])})}},dimensionMarshalStopper=marshal=>()=>next=>action=>{(guard(action,`DROP_COMPLETE`)||guard(action,`FLUSH`)||guard(action,`DROP_ANIMATE`))&&marshal.stopPublishing(),next(action)},focus=marshal=>{let isWatching=!1;return()=>next=>action=>{if(guard(action,`INITIAL_PUBLISH`)){isWatching=!0,marshal.tryRecordFocus(action.payload.critical.draggable.id),next(action),marshal.tryRestoreFocusRecorded();return}if(next(action),isWatching){if(guard(action,`FLUSH`)){isWatching=!1,marshal.tryRestoreFocusRecorded();return}if(guard(action,`DROP_COMPLETE`)){isWatching=!1;let result=action.payload.completed.result;result.combine&&marshal.tryShiftRecord(result.draggableId,result.combine.draggableId),marshal.tryRestoreFocusRecorded()}}}},shouldStop=action=>guard(action,`DROP_COMPLETE`)||guard(action,`DROP_ANIMATE`)||guard(action,`FLUSH`),autoScroll=autoScroller=>store=>next=>action=>{if(shouldStop(action)){autoScroller.stop(),next(action);return}if(guard(action,`INITIAL_PUBLISH`)){next(action);let state=store.getState();state.phase!==`DRAGGING`&&invariant(),autoScroller.start(state);return}next(action),autoScroller.scroll(store.getState())},pendingDrop=store=>next=>action=>{if(next(action),!guard(action,`PUBLISH_WHILE_DRAGGING`))return;let postActionState=store.getState();postActionState.phase===`DROP_PENDING`&&(postActionState.isWaiting||store.dispatch(drop({reason:postActionState.reason})))},composeEnhancers=compose,createStore$1=({dimensionMarshal,focusMarshal,styleMarshal,getResponders,announce,autoScroller})=>createStore(reducer,composeEnhancers(applyMiddleware(style(styleMarshal),dimensionMarshalStopper(dimensionMarshal),lift(dimensionMarshal),dropMiddleware,dropAnimationFinishMiddleware,dropAnimationFlushOnScrollMiddleware,pendingDrop,autoScroll(autoScroller),scrollListener,focus(focusMarshal),responders(getResponders,announce)))),clean$1=()=>({additions:{},removals:{},modified:{}});function createPublisher({registry,callbacks}){let staging=clean$1(),frameId=null,collect=()=>{frameId||=(callbacks.collectionStarting(),requestAnimationFrame(()=>{frameId=null;let{additions,removals,modified}=staging,added=Object.keys(additions).map(id$3=>registry.draggable.getById(id$3).getDimension(origin)).sort((a$4,b$3)=>a$4.descriptor.index-b$3.descriptor.index),updated=Object.keys(modified).map(id$3=>({droppableId:id$3,scroll:registry.droppable.getById(id$3).callbacks.getScrollWhileDragging()})),result={additions:added,removals:Object.keys(removals),modified:updated};staging=clean$1(),callbacks.publish(result)}))};return{add:entry=>{let id$3=entry.descriptor.id;staging.additions[id$3]=entry,staging.modified[entry.descriptor.droppableId]=!0,staging.removals[id$3]&&delete staging.removals[id$3],collect()},remove:entry=>{let descriptor=entry.descriptor;staging.removals[descriptor.id]=!0,staging.modified[descriptor.droppableId]=!0,staging.additions[descriptor.id]&&delete staging.additions[descriptor.id],collect()},stop:()=>{frameId&&(cancelAnimationFrame(frameId),frameId=null,staging=clean$1())}}}var getMaxScroll=({scrollHeight,scrollWidth,height,width})=>{let maxScroll=subtract({x:scrollWidth,y:scrollHeight},{x:width,y:height});return{x:Math.max(0,maxScroll.x),y:Math.max(0,maxScroll.y)}},getDocumentElement=()=>{let doc=document.documentElement;return!doc&&invariant(),doc},getMaxWindowScroll=()=>{let doc=getDocumentElement();return getMaxScroll({scrollHeight:doc.scrollHeight,scrollWidth:doc.scrollWidth,width:doc.clientWidth,height:doc.clientHeight})},getViewport=()=>{let scroll$2=getWindowScroll(),maxScroll=getMaxWindowScroll(),top=scroll$2.y,left=scroll$2.x,doc=getDocumentElement(),width=doc.clientWidth,height=doc.clientHeight;return{frame:getRect({top,left,right:left+width,bottom:top+height}),scroll:{initial:scroll$2,current:scroll$2,max:maxScroll,diff:{value:origin,displacement:origin}}}},getInitialPublish=({critical,scrollOptions,registry})=>{let viewport=getViewport(),windowScroll=viewport.scroll.current,home$1=critical.droppable,droppables=registry.droppable.getAllByType(home$1.type).map(entry=>entry.callbacks.getDimensionAndWatchScroll(windowScroll,scrollOptions));return{dimensions:{draggables:toDraggableMap(registry.draggable.getAllByType(critical.draggable.type).map(entry=>entry.getDimension(windowScroll))),droppables:toDroppableMap(droppables)},critical,viewport}};function shouldPublishUpdate(registry,dragging,entry){return!(entry.descriptor.id===dragging.id||entry.descriptor.type!==dragging.type||registry.droppable.getById(entry.descriptor.droppableId).descriptor.mode!==`virtual`)}var createDimensionMarshal=(registry,callbacks)=>{let collection=null,publisher=createPublisher({callbacks:{publish:callbacks.publishWhileDragging,collectionStarting:callbacks.collectionStarting},registry}),updateDroppableIsEnabled$1=(id$3,isEnabled)=>{!registry.droppable.exists(id$3)&&invariant(),collection&&callbacks.updateDroppableIsEnabled({id:id$3,isEnabled})},updateDroppableIsCombineEnabled$1=(id$3,isCombineEnabled)=>{collection&&(!registry.droppable.exists(id$3)&&invariant(),callbacks.updateDroppableIsCombineEnabled({id:id$3,isCombineEnabled}))},updateDroppableScroll$1=(id$3,newScroll)=>{collection&&(!registry.droppable.exists(id$3)&&invariant(),callbacks.updateDroppableScroll({id:id$3,newScroll}))},scrollDroppable$1=(id$3,change)=>{collection&&registry.droppable.getById(id$3).callbacks.scroll(change)},stopPublishing=()=>{if(!collection)return;publisher.stop();let home$1=collection.critical.droppable;registry.droppable.getAllByType(home$1.type).forEach(entry=>entry.callbacks.dragStopped()),collection.unsubscribe(),collection=null},subscriber=event=>{!collection&&invariant();let dragging=collection.critical.draggable;event.type===`ADDITION`&&shouldPublishUpdate(registry,dragging,event.value)&&publisher.add(event.value),event.type===`REMOVAL`&&shouldPublishUpdate(registry,dragging,event.value)&&publisher.remove(event.value)};return{updateDroppableIsEnabled:updateDroppableIsEnabled$1,updateDroppableIsCombineEnabled:updateDroppableIsCombineEnabled$1,scrollDroppable:scrollDroppable$1,updateDroppableScroll:updateDroppableScroll$1,startPublishing:request=>{collection&&invariant();let entry=registry.draggable.getById(request.draggableId),home$1=registry.droppable.getById(entry.descriptor.droppableId),critical={draggable:entry.descriptor,droppable:home$1.descriptor};return collection={critical,unsubscribe:registry.subscribe(subscriber)},getInitialPublish({critical,registry,scrollOptions:request.scrollOptions})},stopPublishing}},canStartDrag=(state,id$3)=>state.phase===`IDLE`?!0:state.phase!==`DROP_ANIMATING`||state.completed.result.draggableId===id$3?!1:state.completed.result.reason===`DROP`,scrollWindow=change=>{window.scrollBy(change.x,change.y)},getScrollableDroppables=memoizeOne(droppables=>toDroppableList(droppables).filter(droppable$1=>!(!droppable$1.isEnabled||!droppable$1.frame))),getScrollableDroppableOver=(target,droppables)=>getScrollableDroppables(droppables).find(droppable$1=>(!droppable$1.frame&&invariant(),isPositionInFrame(droppable$1.frame.pageMarginBox)(target)))||null,getBestScrollableDroppable=({center,destination,droppables})=>{if(destination){let dimension=droppables[destination];return dimension.frame?dimension:null}return getScrollableDroppableOver(center,droppables)},defaultAutoScrollerOptions={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:percentage=>percentage**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1},getDistanceThresholds=(container,axis,getAutoScrollerOptions=()=>defaultAutoScrollerOptions)=>{let autoScrollerOptions=getAutoScrollerOptions();return{startScrollingFrom:container[axis.size]*autoScrollerOptions.startFromPercentage,maxScrollValueAt:container[axis.size]*autoScrollerOptions.maxScrollAtPercentage}},getPercentage=({startOfRange,endOfRange,current})=>{let range=endOfRange-startOfRange;return range===0?0:(current-startOfRange)/range},minScroll=1,getValueFromDistance=(distanceToEdge,thresholds,getAutoScrollerOptions=()=>defaultAutoScrollerOptions)=>{let autoScrollerOptions=getAutoScrollerOptions();if(distanceToEdge>thresholds.startScrollingFrom)return 0;if(distanceToEdge<=thresholds.maxScrollValueAt)return autoScrollerOptions.maxPixelScroll;if(distanceToEdge===thresholds.startScrollingFrom)return minScroll;let percentageFromStartScrollingFrom=1-getPercentage({startOfRange:thresholds.maxScrollValueAt,endOfRange:thresholds.startScrollingFrom,current:distanceToEdge}),scroll$2=autoScrollerOptions.maxPixelScroll*autoScrollerOptions.ease(percentageFromStartScrollingFrom);return Math.ceil(scroll$2)},dampenValueByTime=(proposedScroll,dragStartTime,getAutoScrollerOptions)=>{let autoScrollerOptions=getAutoScrollerOptions(),accelerateAt=autoScrollerOptions.durationDampening.accelerateAt,stopAt=autoScrollerOptions.durationDampening.stopDampeningAt,startOfRange=dragStartTime,endOfRange=stopAt,runTime=Date.now()-startOfRange;if(runTime>=stopAt)return proposedScroll;if(runTime<accelerateAt)return minScroll;let betweenAccelerateAtAndStopAtPercentage=getPercentage({startOfRange:accelerateAt,endOfRange,current:runTime}),scroll$2=proposedScroll*autoScrollerOptions.ease(betweenAccelerateAtAndStopAtPercentage);return Math.ceil(scroll$2)},getValue=({distanceToEdge,thresholds,dragStartTime,shouldUseTimeDampening,getAutoScrollerOptions})=>{let scroll$2=getValueFromDistance(distanceToEdge,thresholds,getAutoScrollerOptions);return scroll$2===0?0:shouldUseTimeDampening?Math.max(dampenValueByTime(scroll$2,dragStartTime,getAutoScrollerOptions),minScroll):scroll$2},getScrollOnAxis=({container,distanceToEdges,dragStartTime,axis,shouldUseTimeDampening,getAutoScrollerOptions})=>{let thresholds=getDistanceThresholds(container,axis,getAutoScrollerOptions);return distanceToEdges[axis.end]<distanceToEdges[axis.start]?getValue({distanceToEdge:distanceToEdges[axis.end],thresholds,dragStartTime,shouldUseTimeDampening,getAutoScrollerOptions}):-1*getValue({distanceToEdge:distanceToEdges[axis.start],thresholds,dragStartTime,shouldUseTimeDampening,getAutoScrollerOptions})},adjustForSizeLimits=({container,subject,proposedScroll})=>{let isTooBigVertically=subject.height>container.height,isTooBigHorizontally=subject.width>container.width;return!isTooBigHorizontally&&!isTooBigVertically?proposedScroll:isTooBigHorizontally&&isTooBigVertically?null:{x:isTooBigHorizontally?0:proposedScroll.x,y:isTooBigVertically?0:proposedScroll.y}},clean=apply(value=>value===0?0:value),getScroll$1=({dragStartTime,container,subject,center,shouldUseTimeDampening,getAutoScrollerOptions})=>{let distanceToEdges={top:center.y-container.top,right:container.right-center.x,bottom:container.bottom-center.y,left:center.x-container.left},y$2=getScrollOnAxis({container,distanceToEdges,dragStartTime,axis:vertical,shouldUseTimeDampening,getAutoScrollerOptions}),required=clean({x:getScrollOnAxis({container,distanceToEdges,dragStartTime,axis:horizontal,shouldUseTimeDampening,getAutoScrollerOptions}),y:y$2});if(isEqual$1(required,origin))return null;let limited=adjustForSizeLimits({container,subject,proposedScroll:required});return limited?isEqual$1(limited,origin)?null:limited:null},smallestSigned=apply(value=>value===0?0:value>0?1:-1),getOverlap=(()=>{let getRemainder=(target,max)=>target<0?target:target>max?target-max:0;return({current,max,change})=>{let targetScroll=add(current,change),overlap={x:getRemainder(targetScroll.x,max.x),y:getRemainder(targetScroll.y,max.y)};return isEqual$1(overlap,origin)?null:overlap}})(),canPartiallyScroll=({max:rawMax,current,change})=>{let max={x:Math.max(current.x,rawMax.x),y:Math.max(current.y,rawMax.y)},smallestChange=smallestSigned(change),overlap=getOverlap({max,current,change:smallestChange});return!overlap||smallestChange.x!==0&&overlap.x===0||smallestChange.y!==0&&overlap.y===0},canScrollWindow=(viewport,change)=>canPartiallyScroll({current:viewport.scroll.current,max:viewport.scroll.max,change}),getWindowOverlap=(viewport,change)=>{if(!canScrollWindow(viewport,change))return null;let max=viewport.scroll.max,current=viewport.scroll.current;return getOverlap({current,max,change})},canScrollDroppable=(droppable$1,change)=>{let frame$2=droppable$1.frame;return frame$2?canPartiallyScroll({current:frame$2.scroll.current,max:frame$2.scroll.max,change}):!1},getDroppableOverlap=(droppable$1,change)=>{let frame$2=droppable$1.frame;return!frame$2||!canScrollDroppable(droppable$1,change)?null:getOverlap({current:frame$2.scroll.current,max:frame$2.scroll.max,change})},getWindowScrollChange=({viewport,subject,center,dragStartTime,shouldUseTimeDampening,getAutoScrollerOptions})=>{let scroll$2=getScroll$1({dragStartTime,container:viewport.frame,subject,center,shouldUseTimeDampening,getAutoScrollerOptions});return scroll$2&&canScrollWindow(viewport,scroll$2)?scroll$2:null},getDroppableScrollChange=({droppable:droppable$1,subject,center,dragStartTime,shouldUseTimeDampening,getAutoScrollerOptions})=>{let frame$2=droppable$1.frame;if(!frame$2)return null;let scroll$2=getScroll$1({dragStartTime,container:frame$2.pageMarginBox,subject,center,shouldUseTimeDampening,getAutoScrollerOptions});return scroll$2&&canScrollDroppable(droppable$1,scroll$2)?scroll$2:null},scroll=({state,dragStartTime,shouldUseTimeDampening,scrollWindow:scrollWindow$1,scrollDroppable:scrollDroppable$1,getAutoScrollerOptions})=>{let center=state.current.page.borderBoxCenter,subject=state.dimensions.draggables[state.critical.draggable.id].page.marginBox;if(state.isWindowScrollAllowed){let viewport=state.viewport,change$1=getWindowScrollChange({dragStartTime,viewport,subject,center,shouldUseTimeDampening,getAutoScrollerOptions});if(change$1){scrollWindow$1(change$1);return}}let droppable$1=getBestScrollableDroppable({center,destination:whatIsDraggedOver(state.impact),droppables:state.dimensions.droppables});if(!droppable$1)return;let change=getDroppableScrollChange({dragStartTime,droppable:droppable$1,subject,center,shouldUseTimeDampening,getAutoScrollerOptions});change&&scrollDroppable$1(droppable$1.descriptor.id,change)},createFluidScroller=({scrollWindow:scrollWindow$1,scrollDroppable:scrollDroppable$1,getAutoScrollerOptions=()=>defaultAutoScrollerOptions})=>{let scheduleWindowScroll=raf_schd_esm_default(scrollWindow$1),scheduleDroppableScroll=raf_schd_esm_default(scrollDroppable$1),dragging=null,tryScroll=state=>{!dragging&&invariant();let{shouldUseTimeDampening,dragStartTime}=dragging;scroll({state,scrollWindow:scheduleWindowScroll,scrollDroppable:scheduleDroppableScroll,dragStartTime,shouldUseTimeDampening,getAutoScrollerOptions})};return{start:state=>{dragging&&invariant();let dragStartTime=Date.now(),wasScrollNeeded=!1,fakeScrollCallback=()=>{wasScrollNeeded=!0};scroll({state,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:fakeScrollCallback,scrollDroppable:fakeScrollCallback,getAutoScrollerOptions}),dragging={dragStartTime,shouldUseTimeDampening:wasScrollNeeded},wasScrollNeeded&&tryScroll(state)},stop:()=>{dragging&&=(scheduleWindowScroll.cancel(),scheduleDroppableScroll.cancel(),null)},scroll:tryScroll}},createJumpScroller=({move:move$1,scrollDroppable:scrollDroppable$1,scrollWindow:scrollWindow$1})=>{let moveByOffset=(state,offset$1)=>{move$1({client:add(state.current.client.selection,offset$1)})},scrollDroppableAsMuchAsItCan=(droppable$1,change)=>{if(!canScrollDroppable(droppable$1,change))return change;let overlap=getDroppableOverlap(droppable$1,change);if(!overlap)return scrollDroppable$1(droppable$1.descriptor.id,change),null;let whatTheDroppableCanScroll=subtract(change,overlap);return scrollDroppable$1(droppable$1.descriptor.id,whatTheDroppableCanScroll),subtract(change,whatTheDroppableCanScroll)},scrollWindowAsMuchAsItCan=(isWindowScrollAllowed,viewport,change)=>{if(!isWindowScrollAllowed||!canScrollWindow(viewport,change))return change;let overlap=getWindowOverlap(viewport,change);if(!overlap)return scrollWindow$1(change),null;let whatTheWindowCanScroll=subtract(change,overlap);return scrollWindow$1(whatTheWindowCanScroll),subtract(change,whatTheWindowCanScroll)};return state=>{let request=state.scrollJumpRequest;if(!request)return;let destination=whatIsDraggedOver(state.impact);!destination&&invariant();let droppableRemainder=scrollDroppableAsMuchAsItCan(state.dimensions.droppables[destination],request);if(!droppableRemainder)return;let viewport=state.viewport,windowRemainder=scrollWindowAsMuchAsItCan(state.isWindowScrollAllowed,viewport,droppableRemainder);windowRemainder&&moveByOffset(state,windowRemainder)}},createAutoScroller=({scrollDroppable:scrollDroppable$1,scrollWindow:scrollWindow$1,move:move$1,getAutoScrollerOptions})=>{let fluidScroller=createFluidScroller({scrollWindow:scrollWindow$1,scrollDroppable:scrollDroppable$1,getAutoScrollerOptions}),jumpScroll=createJumpScroller({move:move$1,scrollWindow:scrollWindow$1,scrollDroppable:scrollDroppable$1});return{scroll:state=>{if(!(getAutoScrollerOptions().disabled||state.phase!==`DRAGGING`)){if(state.movementMode===`FLUID`){fluidScroller.scroll(state);return}state.scrollJumpRequest&&jumpScroll(state)}},start:fluidScroller.start,stop:fluidScroller.stop}},prefix=`data-rfd`,dragHandle=(()=>{let base=`${prefix}-drag-handle`;return{base,draggableId:`${base}-draggable-id`,contextId:`${base}-context-id`}})(),draggable=(()=>{let base=`${prefix}-draggable`;return{base,contextId:`${base}-context-id`,id:`${base}-id`}})(),droppable=(()=>{let base=`${prefix}-droppable`;return{base,contextId:`${base}-context-id`,id:`${base}-id`}})(),scrollContainer={contextId:`${prefix}-scroll-container-context-id`},makeGetSelector=context=>attribute=>`[${attribute}="${context}"]`,getStyles=(rules,property)=>rules.map(rule=>{let value=rule.styles[property];return value?`${rule.selector} { ${value} }`:``}).join(` `),noPointerEvents=`pointer-events: none;`,getStyles$1=contextId=>{let getSelector$2=makeGetSelector(contextId),dragHandle$1=(()=>{let grabCursor=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:getSelector$2(dragHandle.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:grabCursor,dragging:noPointerEvents,dropAnimating:grabCursor}}})(),rules=[(()=>{let transition$1=`
      transition: ${transitions.outOfTheWay};
    `;return{selector:getSelector$2(draggable.contextId),styles:{dragging:transition$1,dropAnimating:transition$1,userCancel:transition$1}}})(),dragHandle$1,{selector:getSelector$2(droppable.contextId),styles:{always:`overflow-anchor: none;`}},{selector:`body`,styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:getStyles(rules,`always`),resting:getStyles(rules,`resting`),dragging:getStyles(rules,`dragging`),dropAnimating:getStyles(rules,`dropAnimating`),userCancel:getStyles(rules,`userCancel`)}},useIsomorphicLayoutEffect=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0?import_react.useLayoutEffect:import_react.useEffect,getHead=()=>{let head=document.querySelector(`head`);return!head&&invariant(),head},createStyleEl=nonce=>{let el=document.createElement(`style`);return nonce&&el.setAttribute(`nonce`,nonce),el.type=`text/css`,el};function useStyleMarshal(contextId,nonce){let styles$1=useMemo$3(()=>getStyles$1(contextId),[contextId]),alwaysRef=(0,import_react.useRef)(null),dynamicRef=(0,import_react.useRef)(null),setDynamicStyle=useCallback$1(memoizeOne(proposed=>{let el=dynamicRef.current;!el&&invariant(),el.textContent=proposed}),[]),setAlwaysStyle=useCallback$1(proposed=>{let el=alwaysRef.current;!el&&invariant(),el.textContent=proposed},[]);useIsomorphicLayoutEffect(()=>{!(!alwaysRef.current&&!dynamicRef.current)&&invariant();let always=createStyleEl(nonce),dynamic=createStyleEl(nonce);return alwaysRef.current=always,dynamicRef.current=dynamic,always.setAttribute(`${prefix}-always`,contextId),dynamic.setAttribute(`${prefix}-dynamic`,contextId),getHead().appendChild(always),getHead().appendChild(dynamic),setAlwaysStyle(styles$1.always),setDynamicStyle(styles$1.resting),()=>{let remove$1=ref=>{let current=ref.current;!current&&invariant(),getHead().removeChild(current),ref.current=null};remove$1(alwaysRef),remove$1(dynamicRef)}},[nonce,setAlwaysStyle,setDynamicStyle,styles$1.always,styles$1.resting,contextId]);let dragging=useCallback$1(()=>setDynamicStyle(styles$1.dragging),[setDynamicStyle,styles$1.dragging]),dropping=useCallback$1(reason=>{if(reason===`DROP`){setDynamicStyle(styles$1.dropAnimating);return}setDynamicStyle(styles$1.userCancel)},[setDynamicStyle,styles$1.dropAnimating,styles$1.userCancel]),resting=useCallback$1(()=>{dynamicRef.current&&setDynamicStyle(styles$1.resting)},[setDynamicStyle,styles$1.resting]);return useMemo$3(()=>({dragging,dropping,resting}),[dragging,dropping,resting])}function querySelectorAll(parentNode,selector){return Array.from(parentNode.querySelectorAll(selector))}var getWindowFromEl=el=>el&&el.ownerDocument&&el.ownerDocument.defaultView?el.ownerDocument.defaultView:window;function isHtmlElement(el){return el instanceof getWindowFromEl(el).HTMLElement}function findDragHandle(contextId,draggableId){let selector=`[${dragHandle.contextId}="${contextId}"]`,possible=querySelectorAll(document,selector);if(!possible.length)return null;let handle=possible.find(el=>el.getAttribute(dragHandle.draggableId)===draggableId);return!handle||!isHtmlElement(handle)?null:handle}function useFocusMarshal(contextId){let entriesRef=(0,import_react.useRef)({}),recordRef=(0,import_react.useRef)(null),restoreFocusFrameRef=(0,import_react.useRef)(null),isMountedRef=(0,import_react.useRef)(!1),register=useCallback$1(function(id$3,focus$1){let entry={id:id$3,focus:focus$1};return entriesRef.current[id$3]=entry,function(){let entries=entriesRef.current;entries[id$3]!==entry&&delete entries[id$3]}},[]),tryGiveFocus=useCallback$1(function(tryGiveFocusTo){let handle=findDragHandle(contextId,tryGiveFocusTo);handle&&handle!==document.activeElement&&handle.focus()},[contextId]),tryShiftRecord=useCallback$1(function(previous,redirectTo){recordRef.current===previous&&(recordRef.current=redirectTo)},[]),tryRestoreFocusRecorded=useCallback$1(function(){restoreFocusFrameRef.current||isMountedRef.current&&(restoreFocusFrameRef.current=requestAnimationFrame(()=>{restoreFocusFrameRef.current=null;let record=recordRef.current;record&&tryGiveFocus(record)}))},[tryGiveFocus]),tryRecordFocus=useCallback$1(function(id$3){recordRef.current=null;let focused=document.activeElement;focused&&focused.getAttribute(dragHandle.draggableId)===id$3&&(recordRef.current=id$3)},[]);return useIsomorphicLayoutEffect(()=>(isMountedRef.current=!0,function(){isMountedRef.current=!1;let frameId=restoreFocusFrameRef.current;frameId&&cancelAnimationFrame(frameId)}),[]),useMemo$3(()=>({register,tryRecordFocus,tryRestoreFocusRecorded,tryShiftRecord}),[register,tryRecordFocus,tryRestoreFocusRecorded,tryShiftRecord])}function createRegistry(){let entries={draggables:{},droppables:{}},subscribers=[];function subscribe(cb){return subscribers.push(cb),function(){let index$2=subscribers.indexOf(cb);index$2!==-1&&subscribers.splice(index$2,1)}}function notify(event){subscribers.length&&subscribers.forEach(cb=>cb(event))}function findDraggableById(id$3){return entries.draggables[id$3]||null}function getDraggableById(id$3){let entry=findDraggableById(id$3);return!entry&&invariant(),entry}let draggableAPI={register:entry=>{entries.draggables[entry.descriptor.id]=entry,notify({type:`ADDITION`,value:entry})},update:(entry,last)=>{let current=entries.draggables[last.descriptor.id];current&&current.uniqueId===entry.uniqueId&&(delete entries.draggables[last.descriptor.id],entries.draggables[entry.descriptor.id]=entry)},unregister:entry=>{let draggableId=entry.descriptor.id,current=findDraggableById(draggableId);current&&entry.uniqueId===current.uniqueId&&(delete entries.draggables[draggableId],entries.droppables[entry.descriptor.droppableId]&&notify({type:`REMOVAL`,value:entry}))},getById:getDraggableById,findById:findDraggableById,exists:id$3=>!!findDraggableById(id$3),getAllByType:type=>Object.values(entries.draggables).filter(entry=>entry.descriptor.type===type)};function findDroppableById(id$3){return entries.droppables[id$3]||null}function getDroppableById(id$3){let entry=findDroppableById(id$3);return!entry&&invariant(),entry}let droppableAPI={register:entry=>{entries.droppables[entry.descriptor.id]=entry},unregister:entry=>{let current=findDroppableById(entry.descriptor.id);current&&entry.uniqueId===current.uniqueId&&delete entries.droppables[entry.descriptor.id]},getById:getDroppableById,findById:findDroppableById,exists:id$3=>!!findDroppableById(id$3),getAllByType:type=>Object.values(entries.droppables).filter(entry=>entry.descriptor.type===type)};function clean$2(){entries.draggables={},entries.droppables={},subscribers.length=0}return{draggable:draggableAPI,droppable:droppableAPI,subscribe,clean:clean$2}}function useRegistry(){let registry=useMemo$3(createRegistry,[]);return(0,import_react.useEffect)(()=>function(){registry.clean()},[registry]),registry}var StoreContext=import_react.createContext(null),getBodyElement=()=>{let body=document.body;return!body&&invariant(),body},visuallyHidden={position:`absolute`,width:`1px`,height:`1px`,margin:`-1px`,border:`0`,padding:`0`,overflow:`hidden`,clip:`rect(0 0 0 0)`,"clip-path":`inset(100%)`},getId=contextId=>`rfd-announcement-${contextId}`;function useAnnouncer(contextId){let id$3=useMemo$3(()=>getId(contextId),[contextId]),ref=(0,import_react.useRef)(null);return(0,import_react.useEffect)(function(){let el=document.createElement(`div`);return ref.current=el,el.id=id$3,el.setAttribute(`aria-live`,`assertive`),el.setAttribute(`aria-atomic`,`true`),_extends(el.style,visuallyHidden),getBodyElement().appendChild(el),function(){setTimeout(function(){let body=getBodyElement();body.contains(el)&&body.removeChild(el),el===ref.current&&(ref.current=null)})}},[id$3]),useCallback$1(message=>{let el=ref.current;if(el){el.textContent=message;return}},[])}var defaults={separator:`::`};function useUniqueId(prefix$4,options$1=defaults){let id$3=import_react.useId();return useMemo$3(()=>`${prefix$4}${options$1.separator}${id$3}`,[options$1.separator,prefix$4,id$3])}function getElementId({contextId,uniqueId}){return`rfd-hidden-text-${contextId}-${uniqueId}`}function useHiddenTextElement({contextId,text}){let uniqueId=useUniqueId(`hidden-text`,{separator:`-`}),id$3=useMemo$3(()=>getElementId({contextId,uniqueId}),[uniqueId,contextId]);return(0,import_react.useEffect)(function(){let el=document.createElement(`div`);return el.id=id$3,el.textContent=text,el.style.display=`none`,getBodyElement().appendChild(el),function(){let body=getBodyElement();body.contains(el)&&body.removeChild(el)}},[id$3,text]),id$3}var AppContext=import_react.createContext(null),peerDependencies={react:`^18.0.0 || ^19.0.0`},semver=/(\d+)\.(\d+)\.(\d+)/,getVersion=value=>{let result=semver.exec(value);return result??invariant(),{major:Number(result[1]),minor:Number(result[2]),patch:Number(result[3]),raw:value}},isSatisfied=(expected,actual)=>actual.major>expected.major?!0:actual.major<expected.major?!1:actual.minor>expected.minor?!0:actual.minor<expected.minor?!1:actual.patch>=expected.patch,checkReactVersion=(peerDepValue,actualValue)=>{isSatisfied(getVersion(peerDepValue),getVersion(actualValue))},checkDoctype=doc=>{let doctype=doc.doctype;doctype&&(doctype.name.toLowerCase(),doctype.publicId)};function useDev(useHook){}function useDevSetupWarning(fn,inputs){}function useStartupValidation(){}function usePrevious(current){let ref=(0,import_react.useRef)(current);return(0,import_react.useEffect)(()=>{ref.current=current}),ref}function create(){let lock=null;function isClaimed(){return!!lock}function isActive$1(value){return value===lock}function claim(abandon){lock&&invariant();let newLock={abandon};return lock=newLock,newLock}function release(){!lock&&invariant(),lock=null}function tryAbandon(){lock&&(lock.abandon(),release())}return{isClaimed,isActive:isActive$1,claim,release,tryAbandon}}function isDragging(state){return state.phase===`IDLE`||state.phase===`DROP_ANIMATING`?!1:state.isDragging}var tab=9,enter=13,escape$1=27,space=32,pageUp=33,pageDown=34,end=35,home=36,arrowLeft=37,arrowUp=38,arrowRight=39,arrowDown=40,preventedKeys={[enter]:!0,[tab]:!0},preventStandardKeyEvents=event=>{preventedKeys[event.keyCode]&&event.preventDefault()},supportedEventName=(()=>{let base=`visibilitychange`;return typeof document>`u`?base:[base,`ms${base}`,`webkit${base}`,`moz${base}`,`o${base}`].find(eventName=>`on${eventName}`in document)||base})(),primaryButton=0,sloppyClickThreshold=5;function isSloppyClickThresholdExceeded(original,current){return Math.abs(current.x-original.x)>=sloppyClickThreshold||Math.abs(current.y-original.y)>=sloppyClickThreshold}var idle$1={type:`IDLE`};function getCaptureBindings({cancel,completed,getPhase,setPhase}){return[{eventName:`mousemove`,fn:event=>{let{button,clientX,clientY}=event;if(button!==primaryButton)return;let point={x:clientX,y:clientY},phase=getPhase();if(phase.type===`DRAGGING`){event.preventDefault(),phase.actions.move(point);return}phase.type!==`PENDING`&&invariant();let pending=phase.point;isSloppyClickThresholdExceeded(pending,point)&&(event.preventDefault(),setPhase({type:`DRAGGING`,actions:phase.actions.fluidLift(point)}))}},{eventName:`mouseup`,fn:event=>{let phase=getPhase();if(phase.type!==`DRAGGING`){cancel();return}event.preventDefault(),phase.actions.drop({shouldBlockNextClick:!0}),completed()}},{eventName:`mousedown`,fn:event=>{getPhase().type===`DRAGGING`&&event.preventDefault(),cancel()}},{eventName:`keydown`,fn:event=>{if(getPhase().type===`PENDING`){cancel();return}if(event.keyCode===escape$1){event.preventDefault(),cancel();return}preventStandardKeyEvents(event)}},{eventName:`resize`,fn:cancel},{eventName:`scroll`,options:{passive:!0,capture:!1},fn:()=>{getPhase().type===`PENDING`&&cancel()}},{eventName:`webkitmouseforcedown`,fn:event=>{let phase=getPhase();if(phase.type===`IDLE`&&invariant(),phase.actions.shouldRespectForcePress()){cancel();return}event.preventDefault()}},{eventName:supportedEventName,fn:cancel}]}function useMouseSensor(api){let phaseRef=(0,import_react.useRef)(idle$1),unbindEventsRef=(0,import_react.useRef)(noop$2),startCaptureBinding=useMemo$3(()=>({eventName:`mousedown`,fn:function(event){if(event.defaultPrevented||event.button!==primaryButton||event.ctrlKey||event.metaKey||event.shiftKey||event.altKey)return;let draggableId=api.findClosestDraggableId(event);if(!draggableId)return;let actions=api.tryGetLock(draggableId,stop,{sourceEvent:event});if(!actions)return;event.preventDefault();let point={x:event.clientX,y:event.clientY};unbindEventsRef.current(),startPendingDrag(actions,point)}}),[api]),preventForcePressBinding=useMemo$3(()=>({eventName:`webkitmouseforcewillbegin`,fn:event=>{if(event.defaultPrevented)return;let id$3=api.findClosestDraggableId(event);if(!id$3)return;let options$1=api.findOptionsForDraggable(id$3);options$1&&(options$1.shouldRespectForcePress||api.canGetLock(id$3)&&event.preventDefault())}}),[api]),listenForCapture=useCallback$1(function(){unbindEventsRef.current=bindEvents(window,[preventForcePressBinding,startCaptureBinding],{passive:!1,capture:!0})},[preventForcePressBinding,startCaptureBinding]),stop=useCallback$1(()=>{phaseRef.current.type!==`IDLE`&&(phaseRef.current=idle$1,unbindEventsRef.current(),listenForCapture())},[listenForCapture]),cancel=useCallback$1(()=>{let phase=phaseRef.current;stop(),phase.type===`DRAGGING`&&phase.actions.cancel({shouldBlockNextClick:!0}),phase.type===`PENDING`&&phase.actions.abort()},[stop]),bindCapturingEvents=useCallback$1(function(){let options$1={capture:!0,passive:!1},bindings=getCaptureBindings({cancel,completed:stop,getPhase:()=>phaseRef.current,setPhase:phase=>{phaseRef.current=phase}});unbindEventsRef.current=bindEvents(window,bindings,options$1)},[cancel,stop]),startPendingDrag=useCallback$1(function(actions,point){phaseRef.current.type!==`IDLE`&&invariant(),phaseRef.current={type:`PENDING`,point,actions},bindCapturingEvents()},[bindCapturingEvents]);useIsomorphicLayoutEffect(function(){return listenForCapture(),function(){unbindEventsRef.current()}},[listenForCapture])}function noop$1(){}var scrollJumpKeys={[pageDown]:!0,[pageUp]:!0,[home]:!0,[end]:!0};function getDraggingBindings(actions,stop){function cancel(){stop(),actions.cancel()}function drop$1(){stop(),actions.drop()}return[{eventName:`keydown`,fn:event=>{if(event.keyCode===escape$1){event.preventDefault(),cancel();return}if(event.keyCode===space){event.preventDefault(),drop$1();return}if(event.keyCode===arrowDown){event.preventDefault(),actions.moveDown();return}if(event.keyCode===arrowUp){event.preventDefault(),actions.moveUp();return}if(event.keyCode===arrowRight){event.preventDefault(),actions.moveRight();return}if(event.keyCode===arrowLeft){event.preventDefault(),actions.moveLeft();return}if(scrollJumpKeys[event.keyCode]){event.preventDefault();return}preventStandardKeyEvents(event)}},{eventName:`mousedown`,fn:cancel},{eventName:`mouseup`,fn:cancel},{eventName:`click`,fn:cancel},{eventName:`touchstart`,fn:cancel},{eventName:`resize`,fn:cancel},{eventName:`wheel`,fn:cancel,options:{passive:!0}},{eventName:supportedEventName,fn:cancel}]}function useKeyboardSensor(api){let unbindEventsRef=(0,import_react.useRef)(noop$1),startCaptureBinding=useMemo$3(()=>({eventName:`keydown`,fn:function(event){if(event.defaultPrevented||event.keyCode!==space)return;let draggableId=api.findClosestDraggableId(event);if(!draggableId)return;let preDrag=api.tryGetLock(draggableId,stop,{sourceEvent:event});if(!preDrag)return;event.preventDefault();let isCapturing=!0,actions=preDrag.snapLift();unbindEventsRef.current();function stop(){!isCapturing&&invariant(),isCapturing=!1,unbindEventsRef.current(),listenForCapture()}unbindEventsRef.current=bindEvents(window,getDraggingBindings(actions,stop),{capture:!0,passive:!1})}}),[api]),listenForCapture=useCallback$1(function(){unbindEventsRef.current=bindEvents(window,[startCaptureBinding],{passive:!1,capture:!0})},[startCaptureBinding]);useIsomorphicLayoutEffect(function(){return listenForCapture(),function(){unbindEventsRef.current()}},[listenForCapture])}var idle={type:`IDLE`},timeForLongPress=120,forcePressThreshold=.15;function getWindowBindings({cancel,getPhase}){return[{eventName:`orientationchange`,fn:cancel},{eventName:`resize`,fn:cancel},{eventName:`contextmenu`,fn:event=>{event.preventDefault()}},{eventName:`keydown`,fn:event=>{if(getPhase().type!==`DRAGGING`){cancel();return}event.keyCode===escape$1&&event.preventDefault(),cancel()}},{eventName:supportedEventName,fn:cancel}]}function getHandleBindings({cancel,completed,getPhase}){return[{eventName:`touchmove`,options:{capture:!1},fn:event=>{let phase=getPhase();if(phase.type!==`DRAGGING`){cancel();return}phase.hasMoved=!0;let{clientX,clientY}=event.touches[0],point={x:clientX,y:clientY};event.preventDefault(),phase.actions.move(point)}},{eventName:`touchend`,fn:event=>{let phase=getPhase();if(phase.type!==`DRAGGING`){cancel();return}event.preventDefault(),phase.actions.drop({shouldBlockNextClick:!0}),completed()}},{eventName:`touchcancel`,fn:event=>{if(getPhase().type!==`DRAGGING`){cancel();return}event.preventDefault(),cancel()}},{eventName:`touchforcechange`,fn:event=>{let phase=getPhase();phase.type===`IDLE`&&invariant();let touch=event.touches[0];if(!touch||!(touch.force>=forcePressThreshold))return;let shouldRespect=phase.actions.shouldRespectForcePress();if(phase.type===`PENDING`){shouldRespect&&cancel();return}if(shouldRespect){if(phase.hasMoved){event.preventDefault();return}cancel();return}event.preventDefault()}},{eventName:supportedEventName,fn:cancel}]}function useTouchSensor(api){let phaseRef=(0,import_react.useRef)(idle),unbindEventsRef=(0,import_react.useRef)(noop$2),getPhase=useCallback$1(function(){return phaseRef.current},[]),setPhase=useCallback$1(function(phase){phaseRef.current=phase},[]),startCaptureBinding=useMemo$3(()=>({eventName:`touchstart`,fn:function(event){if(event.defaultPrevented)return;let draggableId=api.findClosestDraggableId(event);if(!draggableId)return;let actions=api.tryGetLock(draggableId,stop,{sourceEvent:event});if(!actions)return;let{clientX,clientY}=event.touches[0],point={x:clientX,y:clientY};unbindEventsRef.current(),startPendingDrag(actions,point)}}),[api]),listenForCapture=useCallback$1(function(){unbindEventsRef.current=bindEvents(window,[startCaptureBinding],{capture:!0,passive:!1})},[startCaptureBinding]),stop=useCallback$1(()=>{let current=phaseRef.current;current.type!==`IDLE`&&(current.type===`PENDING`&&clearTimeout(current.longPressTimerId),setPhase(idle),unbindEventsRef.current(),listenForCapture())},[listenForCapture,setPhase]),cancel=useCallback$1(()=>{let phase=phaseRef.current;stop(),phase.type===`DRAGGING`&&phase.actions.cancel({shouldBlockNextClick:!0}),phase.type===`PENDING`&&phase.actions.abort()},[stop]),bindCapturingEvents=useCallback$1(function(){let options$1={capture:!0,passive:!1},args={cancel,completed:stop,getPhase},unbindTarget=bindEvents(window,getHandleBindings(args),options$1),unbindWindow=bindEvents(window,getWindowBindings(args),options$1);unbindEventsRef.current=function(){unbindTarget(),unbindWindow()}},[cancel,getPhase,stop]),startDragging=useCallback$1(function(){let phase=getPhase();phase.type!==`PENDING`&&invariant(),setPhase({type:`DRAGGING`,actions:phase.actions.fluidLift(phase.point),hasMoved:!1})},[getPhase,setPhase]),startPendingDrag=useCallback$1(function(actions,point){getPhase().type!==`IDLE`&&invariant(),setPhase({type:`PENDING`,point,actions,longPressTimerId:setTimeout(startDragging,timeForLongPress)}),bindCapturingEvents()},[bindCapturingEvents,getPhase,setPhase,startDragging]);useIsomorphicLayoutEffect(function(){return listenForCapture(),function(){unbindEventsRef.current();let phase=getPhase();phase.type===`PENDING`&&(clearTimeout(phase.longPressTimerId),setPhase(idle))}},[getPhase,listenForCapture,setPhase]),useIsomorphicLayoutEffect(function(){return bindEvents(window,[{eventName:`touchmove`,fn:()=>{},options:{capture:!1,passive:!1}}])},[])}function useValidateSensorHooks(sensorHooks){}var interactiveTagNames=[`input`,`button`,`textarea`,`select`,`option`,`optgroup`,`video`,`audio`];function isAnInteractiveElement(parent,current){if(current==null)return!1;if(interactiveTagNames.includes(current.tagName.toLowerCase()))return!0;let attribute=current.getAttribute(`contenteditable`);return attribute===`true`||attribute===``?!0:current===parent?!1:isAnInteractiveElement(parent,current.parentElement)}function isEventInInteractiveElement(draggable$1,event){let target=event.target;return isHtmlElement(target)?isAnInteractiveElement(draggable$1,target):!1}var getBorderBoxCenterPosition=el=>getRect(el.getBoundingClientRect()).center;function isElement(el){return el instanceof getWindowFromEl(el).Element}var supportedMatchesName=(()=>{let base=`matches`;return typeof document>`u`?base:[base,`msMatchesSelector`,`webkitMatchesSelector`].find(name=>name in Element.prototype)||base})();function closestPonyfill(el,selector){return el==null?null:el[supportedMatchesName](selector)?el:closestPonyfill(el.parentElement,selector)}function closest(el,selector){return el.closest?el.closest(selector):closestPonyfill(el,selector)}function getSelector(contextId){return`[${dragHandle.contextId}="${contextId}"]`}function findClosestDragHandleFromEvent(contextId,event){let target=event.target;if(!isElement(target))return null;let handle=closest(target,getSelector(contextId));return!handle||!isHtmlElement(handle)?null:handle}function tryGetClosestDraggableIdFromEvent(contextId,event){let handle=findClosestDragHandleFromEvent(contextId,event);return handle?handle.getAttribute(dragHandle.draggableId):null}function findDraggable(contextId,draggableId){let selector=`[${draggable.contextId}="${contextId}"]`,draggable$1=querySelectorAll(document,selector).find(el=>el.getAttribute(draggable.id)===draggableId);return!draggable$1||!isHtmlElement(draggable$1)?null:draggable$1}function preventDefault(event){event.preventDefault()}function isActive({expected,phase,isLockActive,shouldWarn}){return!(!isLockActive()||expected!==phase)}function canStart({lockAPI,store,registry,draggableId}){if(lockAPI.isClaimed())return!1;let entry=registry.draggable.findById(draggableId);return!(!entry||!entry.options.isEnabled||!canStartDrag(store.getState(),draggableId))}function tryStart({lockAPI,contextId,store,registry,draggableId,forceSensorStop,sourceEvent}){if(!canStart({lockAPI,store,registry,draggableId}))return null;let entry=registry.draggable.getById(draggableId),el=findDraggable(contextId,entry.descriptor.id);if(!el||sourceEvent&&!entry.options.canDragInteractiveElements&&isEventInInteractiveElement(el,sourceEvent))return null;let lock=lockAPI.claim(forceSensorStop||noop$2),phase=`PRE_DRAG`;function getShouldRespectForcePress(){return entry.options.shouldRespectForcePress}function isLockActive(){return lockAPI.isActive(lock)}function tryDispatch(expected,getAction){isActive({expected,phase,isLockActive,shouldWarn:!0})&&store.dispatch(getAction())}let tryDispatchWhenDragging=tryDispatch.bind(null,`DRAGGING`);function lift$2(args){function completed(){lockAPI.release(),phase=`COMPLETED`}phase!==`PRE_DRAG`&&(completed(),invariant()),store.dispatch(lift$1(args.liftActionArgs)),phase=`DRAGGING`;function finish$1(reason,options$1={shouldBlockNextClick:!1}){if(args.cleanup(),options$1.shouldBlockNextClick){let unbind=bindEvents(window,[{eventName:`click`,fn:preventDefault,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(unbind)}completed(),store.dispatch(drop({reason}))}return{isActive:()=>isActive({expected:`DRAGGING`,phase,isLockActive,shouldWarn:!1}),shouldRespectForcePress:getShouldRespectForcePress,drop:options$1=>finish$1(`DROP`,options$1),cancel:options$1=>finish$1(`CANCEL`,options$1),...args.actions}}function fluidLift(clientSelection){let move$1=raf_schd_esm_default(client=>{tryDispatchWhenDragging(()=>move({client}))});return{...lift$2({liftActionArgs:{id:draggableId,clientSelection,movementMode:`FLUID`},cleanup:()=>move$1.cancel(),actions:{move:move$1}}),move:move$1}}function snapLift(){return lift$2({liftActionArgs:{id:draggableId,clientSelection:getBorderBoxCenterPosition(el),movementMode:`SNAP`},cleanup:noop$2,actions:{moveUp:()=>tryDispatchWhenDragging(moveUp),moveRight:()=>tryDispatchWhenDragging(moveRight),moveDown:()=>tryDispatchWhenDragging(moveDown),moveLeft:()=>tryDispatchWhenDragging(moveLeft)}})}function abortPreDrag(){isActive({expected:`PRE_DRAG`,phase,isLockActive,shouldWarn:!0})&&lockAPI.release()}return{isActive:()=>isActive({expected:`PRE_DRAG`,phase,isLockActive,shouldWarn:!1}),shouldRespectForcePress:getShouldRespectForcePress,fluidLift,snapLift,abort:abortPreDrag}}var defaultSensors=[useMouseSensor,useKeyboardSensor,useTouchSensor];function useSensorMarshal({contextId,store,registry,customSensors,enableDefaultSensors}){let useSensors$1=[...enableDefaultSensors?defaultSensors:[],...customSensors||[]],lockAPI=(0,import_react.useState)(()=>create())[0],tryAbandonLock=useCallback$1(function(previous,current){isDragging(previous)&&!isDragging(current)&&lockAPI.tryAbandon()},[lockAPI]);useIsomorphicLayoutEffect(function(){let previous=store.getState();return store.subscribe(()=>{let current=store.getState();tryAbandonLock(previous,current),previous=current})},[lockAPI,store,tryAbandonLock]),useIsomorphicLayoutEffect(()=>lockAPI.tryAbandon,[lockAPI.tryAbandon]);let canGetLock=useCallback$1(draggableId=>canStart({lockAPI,registry,store,draggableId}),[lockAPI,registry,store]),tryGetLock=useCallback$1((draggableId,forceStop,options$1)=>tryStart({lockAPI,registry,contextId,store,draggableId,forceSensorStop:forceStop||null,sourceEvent:options$1&&options$1.sourceEvent?options$1.sourceEvent:null}),[contextId,lockAPI,registry,store]),findClosestDraggableId=useCallback$1(event=>tryGetClosestDraggableIdFromEvent(contextId,event),[contextId]),findOptionsForDraggable=useCallback$1(id$3=>{let entry=registry.draggable.findById(id$3);return entry?entry.options:null},[registry.draggable]),tryReleaseLock=useCallback$1(function(){lockAPI.isClaimed()&&(lockAPI.tryAbandon(),store.getState().phase!==`IDLE`&&store.dispatch(flush()))},[lockAPI,store]),isLockClaimed=useCallback$1(()=>lockAPI.isClaimed(),[lockAPI]),api=useMemo$3(()=>({canGetLock,tryGetLock,findClosestDraggableId,findOptionsForDraggable,tryReleaseLock,isLockClaimed}),[canGetLock,tryGetLock,findClosestDraggableId,findOptionsForDraggable,tryReleaseLock,isLockClaimed]);for(let i$4=0;i$4<useSensors$1.length;i$4++)useSensors$1[i$4](api)}var createResponders=props=>({onBeforeCapture:t$4=>{(0,import_react_dom$1.flushSync)(()=>{props.onBeforeCapture&&props.onBeforeCapture(t$4)})},onBeforeDragStart:props.onBeforeDragStart,onDragStart:props.onDragStart,onDragEnd:props.onDragEnd,onDragUpdate:props.onDragUpdate}),createAutoScrollerOptions=props=>({...defaultAutoScrollerOptions,...props.autoScrollerOptions,durationDampening:{...defaultAutoScrollerOptions.durationDampening,...props.autoScrollerOptions}});function getStore(lazyRef){return!lazyRef.current&&invariant(),lazyRef.current}function App(props){let{contextId,setCallbacks,sensors,nonce,dragHandleUsageInstructions:dragHandleUsageInstructions$1}=props,lazyStoreRef=(0,import_react.useRef)(null),lastPropsRef=usePrevious(props),getResponders=useCallback$1(()=>createResponders(lastPropsRef.current),[lastPropsRef]),getAutoScrollerOptions=useCallback$1(()=>createAutoScrollerOptions(lastPropsRef.current),[lastPropsRef]),announce=useAnnouncer(contextId),dragHandleUsageInstructionsId=useHiddenTextElement({contextId,text:dragHandleUsageInstructions$1}),styleMarshal=useStyleMarshal(contextId,nonce),lazyDispatch=useCallback$1(action=>{getStore(lazyStoreRef).dispatch(action)},[]),marshalCallbacks=useMemo$3(()=>bindActionCreators({publishWhileDragging,updateDroppableScroll,updateDroppableIsEnabled,updateDroppableIsCombineEnabled,collectionStarting},lazyDispatch),[lazyDispatch]),registry=useRegistry(),dimensionMarshal=useMemo$3(()=>createDimensionMarshal(registry,marshalCallbacks),[registry,marshalCallbacks]),autoScroller=useMemo$3(()=>createAutoScroller({scrollWindow,scrollDroppable:dimensionMarshal.scrollDroppable,getAutoScrollerOptions,...bindActionCreators({move},lazyDispatch)}),[dimensionMarshal.scrollDroppable,lazyDispatch,getAutoScrollerOptions]),focusMarshal=useFocusMarshal(contextId),store=useMemo$3(()=>createStore$1({announce,autoScroller,dimensionMarshal,focusMarshal,getResponders,styleMarshal}),[announce,autoScroller,dimensionMarshal,focusMarshal,getResponders,styleMarshal]);lazyStoreRef.current=store;let tryResetStore=useCallback$1(()=>{let current=getStore(lazyStoreRef);current.getState().phase!==`IDLE`&&current.dispatch(flush())},[]),isDragging$2=useCallback$1(()=>{let state=getStore(lazyStoreRef).getState();return state.phase===`DROP_ANIMATING`?!0:state.phase===`IDLE`?!1:state.isDragging},[]);setCallbacks(useMemo$3(()=>({isDragging:isDragging$2,tryAbort:tryResetStore}),[isDragging$2,tryResetStore]));let getCanLift=useCallback$1(id$3=>canStartDrag(getStore(lazyStoreRef).getState(),id$3),[]),getIsMovementAllowed=useCallback$1(()=>isMovementAllowed(getStore(lazyStoreRef).getState()),[]),appContext=useMemo$3(()=>({marshal:dimensionMarshal,focus:focusMarshal,contextId,canLift:getCanLift,isMovementAllowed:getIsMovementAllowed,dragHandleUsageInstructionsId,registry}),[contextId,dimensionMarshal,dragHandleUsageInstructionsId,focusMarshal,getCanLift,getIsMovementAllowed,registry]);return useSensorMarshal({contextId,store,registry,customSensors:sensors||null,enableDefaultSensors:props.enableDefaultSensors!==!1}),(0,import_react.useEffect)(()=>tryResetStore,[tryResetStore]),import_react.createElement(AppContext.Provider,{value:appContext},import_react.createElement(Provider_default,{context:StoreContext,store},props.children))}function useUniqueContextId(){return import_react.useId()}function DragDropContext(props){let contextId=useUniqueContextId(),dragHandleUsageInstructions$1=props.dragHandleUsageInstructions||preset.dragHandleUsageInstructions;return import_react.createElement(ErrorBoundary,null,setCallbacks=>import_react.createElement(App,{nonce:props.nonce,contextId,setCallbacks,dragHandleUsageInstructions:dragHandleUsageInstructions$1,enableDefaultSensors:props.enableDefaultSensors,sensors:props.sensors,onBeforeCapture:props.onBeforeCapture,onBeforeDragStart:props.onBeforeDragStart,onDragStart:props.onDragStart,onDragUpdate:props.onDragUpdate,onDragEnd:props.onDragEnd,autoScrollerOptions:props.autoScrollerOptions},props.children))}var zIndexOptions={dragging:5e3,dropAnimating:4500},getDraggingTransition=(shouldAnimateDragMovement,dropping)=>dropping?transitions.drop(dropping.duration):shouldAnimateDragMovement?transitions.snap:transitions.fluid,getDraggingOpacity=(isCombining,isDropAnimating)=>{if(isCombining)return isDropAnimating?combine.opacity.drop:combine.opacity.combining},getShouldDraggingAnimate=dragging=>dragging.forceShouldAnimate==null?dragging.mode===`SNAP`:dragging.forceShouldAnimate;function getDraggingStyle(dragging){let box=dragging.dimension.client,{offset:offset$1,combineWith,dropping}=dragging,isCombining=!!combineWith,shouldAnimate=getShouldDraggingAnimate(dragging),isDropAnimating=!!dropping,transform$1=isDropAnimating?transforms.drop(offset$1,isCombining):transforms.moveTo(offset$1);return{position:`fixed`,top:box.marginBox.top,left:box.marginBox.left,boxSizing:`border-box`,width:box.borderBox.width,height:box.borderBox.height,transition:getDraggingTransition(shouldAnimate,dropping),transform:transform$1,opacity:getDraggingOpacity(isCombining,isDropAnimating),zIndex:isDropAnimating?zIndexOptions.dropAnimating:zIndexOptions.dragging,pointerEvents:`none`}}function getSecondaryStyle(secondary){return{transform:transforms.moveTo(secondary.offset),transition:secondary.shouldAnimateDisplacement?void 0:`none`}}function getStyle$1(mapped){return mapped.type===`DRAGGING`?getDraggingStyle(mapped):getSecondaryStyle(mapped)}function getDimension$1(descriptor,el,windowScroll=origin){let computedStyles=window.getComputedStyle(el),client=calculateBox(el.getBoundingClientRect(),computedStyles),page=withScroll(client,windowScroll);return{descriptor,placeholder:{client,tagName:el.tagName.toLowerCase(),display:computedStyles.display},displaceBy:{x:client.marginBox.width,y:client.marginBox.height},client,page}}function useDraggablePublisher(args){let uniqueId=useUniqueId(`draggable`),{descriptor,registry,getDraggableRef,canDragInteractiveElements,shouldRespectForcePress,isEnabled}=args,options$1=useMemo$3(()=>({canDragInteractiveElements,shouldRespectForcePress,isEnabled}),[canDragInteractiveElements,isEnabled,shouldRespectForcePress]),getDimension$2=useCallback$1(windowScroll=>{let el=getDraggableRef();return!el&&invariant(),getDimension$1(descriptor,el,windowScroll)},[descriptor,getDraggableRef]),entry=useMemo$3(()=>({uniqueId,descriptor,options:options$1,getDimension:getDimension$2}),[descriptor,getDimension$2,options$1,uniqueId]),publishedRef=(0,import_react.useRef)(entry),isFirstPublishRef=(0,import_react.useRef)(!0);useIsomorphicLayoutEffect(()=>(registry.draggable.register(publishedRef.current),()=>registry.draggable.unregister(publishedRef.current)),[registry.draggable]),useIsomorphicLayoutEffect(()=>{if(isFirstPublishRef.current){isFirstPublishRef.current=!1;return}let last=publishedRef.current;publishedRef.current=entry,registry.draggable.update(entry,last)},[entry,registry.draggable])}var DroppableContext=import_react.createContext(null);function checkIsValidInnerRef(el){!(el&&isHtmlElement(el))&&invariant()}function useValidation$1(props,contextId,getRef){}function useClonePropValidation(isClone){}function useRequiredContext(Context$1){let result=(0,import_react.useContext)(Context$1);return!result&&invariant(),result}function preventHtml5Dnd(event){event.preventDefault()}var Draggable=props=>{let ref=(0,import_react.useRef)(null),setRef$2=useCallback$1((el=null)=>{ref.current=el},[]),getRef=useCallback$1(()=>ref.current,[]),{contextId,dragHandleUsageInstructionsId,registry}=useRequiredContext(AppContext),{type,droppableId}=useRequiredContext(DroppableContext),descriptor=useMemo$3(()=>({id:props.draggableId,index:props.index,type,droppableId}),[props.draggableId,props.index,type,droppableId]),{children:children$1,draggableId,isEnabled,shouldRespectForcePress,canDragInteractiveElements,isClone,mapped,dropAnimationFinished:dropAnimationFinishedAction}=props;isClone||useDraggablePublisher(useMemo$3(()=>({descriptor,registry,getDraggableRef:getRef,canDragInteractiveElements,shouldRespectForcePress,isEnabled}),[descriptor,registry,getRef,canDragInteractiveElements,shouldRespectForcePress,isEnabled]));let dragHandleProps=useMemo$3(()=>isEnabled?{tabIndex:0,role:`button`,"aria-describedby":dragHandleUsageInstructionsId,"data-rfd-drag-handle-draggable-id":draggableId,"data-rfd-drag-handle-context-id":contextId,draggable:!1,onDragStart:preventHtml5Dnd}:null,[contextId,dragHandleUsageInstructionsId,draggableId,isEnabled]),onMoveEnd=useCallback$1(event=>{mapped.type===`DRAGGING`&&mapped.dropping&&event.propertyName===`transform`&&(0,import_react_dom$1.flushSync)(dropAnimationFinishedAction)},[dropAnimationFinishedAction,mapped]),provided=useMemo$3(()=>{let style$3=getStyle$1(mapped),onTransitionEnd=mapped.type===`DRAGGING`&&mapped.dropping?onMoveEnd:void 0;return{innerRef:setRef$2,draggableProps:{"data-rfd-draggable-context-id":contextId,"data-rfd-draggable-id":draggableId,style:style$3,onTransitionEnd},dragHandleProps}},[contextId,dragHandleProps,draggableId,mapped,onMoveEnd,setRef$2]),rubric=useMemo$3(()=>({draggableId:descriptor.id,type:descriptor.type,source:{index:descriptor.index,droppableId:descriptor.droppableId}}),[descriptor.droppableId,descriptor.id,descriptor.index,descriptor.type]);return import_react.createElement(import_react.Fragment,null,children$1(provided,mapped.snapshot,rubric))},isStrictEqual=(a$4,b$3)=>a$4===b$3,whatIsDraggedOverFromResult=result=>{let{combine:combine$1,destination}=result;return destination?destination.droppableId:combine$1?combine$1.droppableId:null},getCombineWithFromResult=result=>result.combine?result.combine.draggableId:null,getCombineWithFromImpact=impact=>impact.at&&impact.at.type===`COMBINE`?impact.at.combine.draggableId:null;function getDraggableSelector(){let memoizedOffset=memoizeOne((x$2,y$2)=>({x:x$2,y:y$2})),getMemoizedSnapshot=memoizeOne((mode,isClone,draggingOver=null,combineWith=null,dropping=null)=>({isDragging:!0,isClone,isDropAnimating:!!dropping,dropAnimation:dropping,mode,draggingOver,combineWith,combineTargetFor:null})),getMemoizedProps=memoizeOne((offset$1,mode,dimension,isClone,draggingOver=null,combineWith=null,forceShouldAnimate=null)=>({mapped:{type:`DRAGGING`,dropping:null,draggingOver,combineWith,mode,offset:offset$1,dimension,forceShouldAnimate,snapshot:getMemoizedSnapshot(mode,isClone,draggingOver,combineWith,null)}}));return(state,ownProps)=>{if(isDragging(state)){if(state.critical.draggable.id!==ownProps.draggableId)return null;let offset$1=state.current.client.offset,dimension=state.dimensions.draggables[ownProps.draggableId],draggingOver=whatIsDraggedOver(state.impact),combineWith=getCombineWithFromImpact(state.impact),forceShouldAnimate=state.forceShouldAnimate;return getMemoizedProps(memoizedOffset(offset$1.x,offset$1.y),state.movementMode,dimension,ownProps.isClone,draggingOver,combineWith,forceShouldAnimate)}if(state.phase===`DROP_ANIMATING`){let completed=state.completed;if(completed.result.draggableId!==ownProps.draggableId)return null;let isClone=ownProps.isClone,dimension=state.dimensions.draggables[ownProps.draggableId],result=completed.result,mode=result.mode,draggingOver=whatIsDraggedOverFromResult(result),combineWith=getCombineWithFromResult(result),dropping={duration:state.dropDuration,curve:curves.drop,moveTo:state.newHomeClientOffset,opacity:combineWith?combine.opacity.drop:null,scale:combineWith?combine.scale.drop:null};return{mapped:{type:`DRAGGING`,offset:state.newHomeClientOffset,dimension,dropping,draggingOver,combineWith,mode,forceShouldAnimate:null,snapshot:getMemoizedSnapshot(mode,isClone,draggingOver,combineWith,dropping)}}}return null}}function getSecondarySnapshot(combineTargetFor=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor,combineWith:null}}var atRest={mapped:{type:`SECONDARY`,offset:origin,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:getSecondarySnapshot(null)}};function getSecondarySelector(){let memoizedOffset=memoizeOne((x$2,y$2)=>({x:x$2,y:y$2})),getMemoizedSnapshot=memoizeOne(getSecondarySnapshot),getMemoizedProps=memoizeOne((offset$1,combineTargetFor=null,shouldAnimateDisplacement)=>({mapped:{type:`SECONDARY`,offset:offset$1,combineTargetFor,shouldAnimateDisplacement,snapshot:getMemoizedSnapshot(combineTargetFor)}})),getFallback=combineTargetFor=>combineTargetFor?getMemoizedProps(origin,combineTargetFor,!0):null,getProps=(ownId,draggingId,impact,afterCritical)=>{let visualDisplacement=impact.displaced.visible[ownId],isAfterCriticalInVirtualList=!!(afterCritical.inVirtualList&&afterCritical.effected[ownId]),combine$1=tryGetCombine(impact),combineTargetFor=combine$1&&combine$1.draggableId===ownId?draggingId:null;if(!visualDisplacement){if(!isAfterCriticalInVirtualList)return getFallback(combineTargetFor);if(impact.displaced.invisible[ownId])return null;let change=negate(afterCritical.displacedBy.point);return getMemoizedProps(memoizedOffset(change.x,change.y),combineTargetFor,!0)}if(isAfterCriticalInVirtualList)return getFallback(combineTargetFor);let displaceBy=impact.displacedBy.point;return getMemoizedProps(memoizedOffset(displaceBy.x,displaceBy.y),combineTargetFor,visualDisplacement.shouldAnimate)};return(state,ownProps)=>{if(isDragging(state))return state.critical.draggable.id===ownProps.draggableId?null:getProps(ownProps.draggableId,state.critical.draggable.id,state.impact,state.afterCritical);if(state.phase===`DROP_ANIMATING`){let completed=state.completed;return completed.result.draggableId===ownProps.draggableId?null:getProps(ownProps.draggableId,completed.result.draggableId,completed.impact,completed.afterCritical)}return null}}var makeMapStateToProps$1=()=>{let draggingSelector=getDraggableSelector(),secondarySelector=getSecondarySelector();return(state,ownProps)=>draggingSelector(state,ownProps)||secondarySelector(state,ownProps)||atRest},ConnectedDraggable=connect_default(makeMapStateToProps$1,{dropAnimationFinished},null,{context:StoreContext,areStatePropsEqual:isStrictEqual})(Draggable);function PrivateDraggable(props){return useRequiredContext(DroppableContext).isUsingCloneFor===props.draggableId&&!props.isClone?null:import_react.createElement(ConnectedDraggable,props)}function PublicDraggable(props){let isEnabled=typeof props.isDragDisabled==`boolean`?!props.isDragDisabled:!0,canDragInteractiveElements=!!props.disableInteractiveElementBlocking,shouldRespectForcePress=!!props.shouldRespectForcePress;return import_react.createElement(PrivateDraggable,_extends({},props,{isClone:!1,isEnabled,canDragInteractiveElements,shouldRespectForcePress}))}var isEqual=base=>value=>base===value,isScroll=isEqual(`scroll`),isAuto=isEqual(`auto`),isEither=(overflow,fn)=>fn(overflow.overflowX)||fn(overflow.overflowY),isElementScrollable=el=>{let style$3=window.getComputedStyle(el),overflow={overflowX:style$3.overflowX,overflowY:style$3.overflowY};return isEither(overflow,isScroll)||isEither(overflow,isAuto)},isBodyScrollable=()=>!1,getClosestScrollable=el=>el==null?null:el===document.body?isBodyScrollable()?el:null:el===document.documentElement?null:isElementScrollable(el)?el:getClosestScrollable(el.parentElement),getScroll=el=>({x:el.scrollLeft,y:el.scrollTop}),getIsFixed=el=>el?window.getComputedStyle(el).position===`fixed`?!0:getIsFixed(el.parentElement):!1,getEnv=start$2=>({closestScrollable:getClosestScrollable(start$2),isFixedOnPage:getIsFixed(start$2)}),getDroppableDimension=({descriptor,isEnabled,isCombineEnabled,isFixedOnPage,direction,client,page,closest:closest$2})=>{let frame$2=(()=>{if(!closest$2)return null;let{scrollSize,client:frameClient}=closest$2,maxScroll=getMaxScroll({scrollHeight:scrollSize.scrollHeight,scrollWidth:scrollSize.scrollWidth,height:frameClient.paddingBox.height,width:frameClient.paddingBox.width});return{pageMarginBox:closest$2.page.marginBox,frameClient,scrollSize,shouldClipSubject:closest$2.shouldClipSubject,scroll:{initial:closest$2.scroll,current:closest$2.scroll,max:maxScroll,diff:{value:origin,displacement:origin}}}})(),axis=direction===`vertical`?vertical:horizontal;return{descriptor,isCombineEnabled,isFixedOnPage,axis,isEnabled,client,page,frame:frame$2,subject:getSubject({page,withPlaceholder:null,axis,frame:frame$2})}},getClient=(targetRef,closestScrollable)=>{let base=getBox(targetRef);if(!closestScrollable||targetRef!==closestScrollable)return base;let top=base.paddingBox.top-closestScrollable.scrollTop,left=base.paddingBox.left-closestScrollable.scrollLeft,bottom=top+closestScrollable.scrollHeight;return createBox({borderBox:expand({top,right:left+closestScrollable.scrollWidth,bottom,left},base.border),margin:base.margin,border:base.border,padding:base.padding})},getDimension=({ref,descriptor,env,windowScroll,direction,isDropDisabled,isCombineEnabled,shouldClipSubject})=>{let closestScrollable=env.closestScrollable,client=getClient(ref,closestScrollable),page=withScroll(client,windowScroll),closest$2=(()=>{if(!closestScrollable)return null;let frameClient=getBox(closestScrollable),scrollSize={scrollHeight:closestScrollable.scrollHeight,scrollWidth:closestScrollable.scrollWidth};return{client:frameClient,page:withScroll(frameClient,windowScroll),scroll:getScroll(closestScrollable),scrollSize,shouldClipSubject}})();return getDroppableDimension({descriptor,isEnabled:!isDropDisabled,isCombineEnabled,isFixedOnPage:env.isFixedOnPage,direction,client,page,closest:closest$2})},immediate={passive:!1},delayed={passive:!0},getListenerOptions=options$1=>options$1.shouldPublishImmediately?immediate:delayed,getClosestScrollableFromDrag=dragging=>dragging&&dragging.env.closestScrollable||null;function useDroppablePublisher(args){let whileDraggingRef=(0,import_react.useRef)(null),appContext=useRequiredContext(AppContext),uniqueId=useUniqueId(`droppable`),{registry,marshal}=appContext,previousRef=usePrevious(args),descriptor=useMemo$3(()=>({id:args.droppableId,type:args.type,mode:args.mode}),[args.droppableId,args.mode,args.type]),publishedDescriptorRef=(0,import_react.useRef)(descriptor),memoizedUpdateScroll=useMemo$3(()=>memoizeOne((x$2,y$2)=>{!whileDraggingRef.current&&invariant();let scroll$3={x:x$2,y:y$2};marshal.updateDroppableScroll(descriptor.id,scroll$3)}),[descriptor.id,marshal]),getClosestScroll=useCallback$1(()=>{let dragging=whileDraggingRef.current;return!dragging||!dragging.env.closestScrollable?origin:getScroll(dragging.env.closestScrollable)},[]),updateScroll=useCallback$1(()=>{let scroll$3=getClosestScroll();memoizedUpdateScroll(scroll$3.x,scroll$3.y)},[getClosestScroll,memoizedUpdateScroll]),scheduleScrollUpdate=useMemo$3(()=>raf_schd_esm_default(updateScroll),[updateScroll]),onClosestScroll=useCallback$1(()=>{let dragging=whileDraggingRef.current,closest$2=getClosestScrollableFromDrag(dragging);if(!(dragging&&closest$2)&&invariant(),dragging.scrollOptions.shouldPublishImmediately){updateScroll();return}scheduleScrollUpdate()},[scheduleScrollUpdate,updateScroll]),getDimensionAndWatchScroll=useCallback$1((windowScroll,options$1)=>{whileDraggingRef.current&&invariant();let previous=previousRef.current,ref=previous.getDroppableRef();!ref&&invariant();let env=getEnv(ref),dragging={ref,descriptor,env,scrollOptions:options$1};whileDraggingRef.current=dragging;let dimension=getDimension({ref,descriptor,env,windowScroll,direction:previous.direction,isDropDisabled:previous.isDropDisabled,isCombineEnabled:previous.isCombineEnabled,shouldClipSubject:!previous.ignoreContainerClipping}),scrollable=env.closestScrollable;return scrollable&&(scrollable.setAttribute(scrollContainer.contextId,appContext.contextId),scrollable.addEventListener(`scroll`,onClosestScroll,getListenerOptions(dragging.scrollOptions))),dimension},[appContext.contextId,descriptor,onClosestScroll,previousRef]),getScrollWhileDragging=useCallback$1(()=>{let dragging=whileDraggingRef.current,closest$2=getClosestScrollableFromDrag(dragging);return!(dragging&&closest$2)&&invariant(),getScroll(closest$2)},[]),dragStopped=useCallback$1(()=>{let dragging=whileDraggingRef.current;!dragging&&invariant();let closest$2=getClosestScrollableFromDrag(dragging);whileDraggingRef.current=null,closest$2&&(scheduleScrollUpdate.cancel(),closest$2.removeAttribute(scrollContainer.contextId),closest$2.removeEventListener(`scroll`,onClosestScroll,getListenerOptions(dragging.scrollOptions)))},[onClosestScroll,scheduleScrollUpdate]),scroll$2=useCallback$1(change=>{let dragging=whileDraggingRef.current;!dragging&&invariant();let closest$2=getClosestScrollableFromDrag(dragging);!closest$2&&invariant(),closest$2.scrollTop+=change.y,closest$2.scrollLeft+=change.x},[]),callbacks=useMemo$3(()=>({getDimensionAndWatchScroll,getScrollWhileDragging,dragStopped,scroll:scroll$2}),[dragStopped,getDimensionAndWatchScroll,getScrollWhileDragging,scroll$2]),entry=useMemo$3(()=>({uniqueId,descriptor,callbacks}),[callbacks,descriptor,uniqueId]);useIsomorphicLayoutEffect(()=>(publishedDescriptorRef.current=entry.descriptor,registry.droppable.register(entry),()=>{whileDraggingRef.current&&dragStopped(),registry.droppable.unregister(entry)}),[callbacks,descriptor,dragStopped,entry,marshal,registry.droppable]),useIsomorphicLayoutEffect(()=>{whileDraggingRef.current&&marshal.updateDroppableIsEnabled(publishedDescriptorRef.current.id,!args.isDropDisabled)},[args.isDropDisabled,marshal]),useIsomorphicLayoutEffect(()=>{whileDraggingRef.current&&marshal.updateDroppableIsCombineEnabled(publishedDescriptorRef.current.id,args.isCombineEnabled)},[args.isCombineEnabled,marshal])}function noop(){}var empty={width:0,height:0,margin:noSpacing},getSize=({isAnimatingOpenOnMount,placeholder,animate})=>isAnimatingOpenOnMount||animate===`close`?empty:{height:placeholder.client.borderBox.height,width:placeholder.client.borderBox.width,margin:placeholder.client.margin},getStyle=({isAnimatingOpenOnMount,placeholder,animate})=>{let size=getSize({isAnimatingOpenOnMount,placeholder,animate});return{display:placeholder.display,boxSizing:`border-box`,width:size.width,height:size.height,marginTop:size.margin.top,marginRight:size.margin.right,marginBottom:size.margin.bottom,marginLeft:size.margin.left,flexShrink:`0`,flexGrow:`0`,pointerEvents:`none`,transition:animate===`none`?null:transitions.placeholder}},Placeholder=props=>{let animateOpenTimerRef=(0,import_react.useRef)(null),tryClearAnimateOpenTimer=useCallback$1(()=>{animateOpenTimerRef.current&&=(clearTimeout(animateOpenTimerRef.current),null)},[]),{animate,onTransitionEnd,onClose,contextId}=props,[isAnimatingOpenOnMount,setIsAnimatingOpenOnMount]=(0,import_react.useState)(props.animate===`open`);(0,import_react.useEffect)(()=>isAnimatingOpenOnMount?animate===`open`?animateOpenTimerRef.current?noop:(animateOpenTimerRef.current=setTimeout(()=>{animateOpenTimerRef.current=null,setIsAnimatingOpenOnMount(!1)}),tryClearAnimateOpenTimer):(tryClearAnimateOpenTimer(),setIsAnimatingOpenOnMount(!1),noop):noop,[animate,isAnimatingOpenOnMount,tryClearAnimateOpenTimer]);let onSizeChangeEnd=useCallback$1(event=>{event.propertyName===`height`&&(onTransitionEnd(),animate===`close`&&onClose())},[animate,onClose,onTransitionEnd]),style$3=getStyle({isAnimatingOpenOnMount,animate:props.animate,placeholder:props.placeholder});return import_react.createElement(props.placeholder.tagName,{style:style$3,"data-rfd-placeholder-context-id":contextId,onTransitionEnd:onSizeChangeEnd,ref:props.innerRef})},Placeholder$1=import_react.memo(Placeholder);function isBoolean(value){return typeof value==`boolean`}function runChecks(args,checks){checks.forEach(check=>check(args))}var shared=[function({props}){!props.droppableId&&invariant(),typeof props.droppableId!=`string`&&invariant()},function({props}){!isBoolean(props.isDropDisabled)&&invariant(),!isBoolean(props.isCombineEnabled)&&invariant(),!isBoolean(props.ignoreContainerClipping)&&invariant()},function({getDroppableRef}){checkIsValidInnerRef(getDroppableRef())}],standard=[function({props,getPlaceholderRef}){props.placeholder&&getPlaceholderRef()}],virtual=[function({props}){!props.renderClone&&invariant()},function({getPlaceholderRef}){getPlaceholderRef()&&invariant()}];function useValidation(args){}var AnimateInOut=class extends import_react.PureComponent{constructor(...args){super(...args),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?`open`:`none`},this.onClose=()=>{this.state.animate===`close`&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(props,state){return props.shouldAnimate?props.on?{isVisible:!0,data:props.on,animate:`open`}:state.isVisible?{isVisible:!0,data:state.data,animate:`close`}:{isVisible:!1,animate:`close`,data:null}:{isVisible:!!props.on,data:props.on,animate:`none`}}render(){if(!this.state.isVisible)return null;let provided={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(provided)}},Droppable=props=>{let appContext=(0,import_react.useContext)(AppContext);!appContext&&invariant();let{contextId,isMovementAllowed:isMovementAllowed$1}=appContext,droppableRef=(0,import_react.useRef)(null),placeholderRef=(0,import_react.useRef)(null),{children:children$1,droppableId,type,mode,direction,ignoreContainerClipping,isDropDisabled,isCombineEnabled,snapshot,useClone,updateViewportMaxScroll:updateViewportMaxScroll$1,getContainerForClone}=props,getDroppableRef=useCallback$1(()=>droppableRef.current,[]),setDroppableRef=useCallback$1((value=null)=>{droppableRef.current=value},[]),getPlaceholderRef=useCallback$1(()=>placeholderRef.current,[]),setPlaceholderRef=useCallback$1((value=null)=>{placeholderRef.current=value},[]),onPlaceholderTransitionEnd=useCallback$1(()=>{isMovementAllowed$1()&&updateViewportMaxScroll$1({maxScroll:getMaxWindowScroll()})},[isMovementAllowed$1,updateViewportMaxScroll$1]);useDroppablePublisher({droppableId,type,mode,direction,isDropDisabled,isCombineEnabled,ignoreContainerClipping,getDroppableRef});let placeholder=useMemo$3(()=>import_react.createElement(AnimateInOut,{on:props.placeholder,shouldAnimate:props.shouldAnimatePlaceholder},({onClose,data,animate})=>import_react.createElement(Placeholder$1,{placeholder:data,onClose,innerRef:setPlaceholderRef,animate,contextId,onTransitionEnd:onPlaceholderTransitionEnd})),[contextId,onPlaceholderTransitionEnd,props.placeholder,props.shouldAnimatePlaceholder,setPlaceholderRef]),provided=useMemo$3(()=>({innerRef:setDroppableRef,placeholder,droppableProps:{"data-rfd-droppable-id":droppableId,"data-rfd-droppable-context-id":contextId}}),[contextId,droppableId,placeholder,setDroppableRef]),isUsingCloneFor=useClone?useClone.dragging.draggableId:null,droppableContext=useMemo$3(()=>({droppableId,type,isUsingCloneFor}),[droppableId,isUsingCloneFor,type]);function getClone(){if(!useClone)return null;let{dragging,render}=useClone,node=import_react.createElement(PrivateDraggable,{draggableId:dragging.draggableId,index:dragging.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(draggableProvided,draggableSnapshot)=>render(draggableProvided,draggableSnapshot,dragging));return import_react_dom$1.createPortal(node,getContainerForClone())}return import_react.createElement(DroppableContext.Provider,{value:droppableContext},children$1(provided,snapshot),getClone())};function getBody(){return!document.body&&invariant(),document.body}var defaultProps={mode:`standard`,type:`DEFAULT`,direction:`vertical`,isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:getBody},attachDefaultPropsToOwnProps=ownProps=>{let mergedProps={...ownProps},defaultPropKey;for(defaultPropKey in defaultProps)ownProps[defaultPropKey]===void 0&&(mergedProps={...mergedProps,[defaultPropKey]:defaultProps[defaultPropKey]});return mergedProps},isMatchingType=(type,critical)=>type===critical.droppable.type,getDraggable=(critical,dimensions)=>dimensions.draggables[critical.draggable.id],makeMapStateToProps=()=>{let idleWithAnimation={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},idleWithoutAnimation={...idleWithAnimation,shouldAnimatePlaceholder:!1},getDraggableRubric=memoizeOne(descriptor=>({draggableId:descriptor.id,type:descriptor.type,source:{index:descriptor.index,droppableId:descriptor.droppableId}})),getMapProps=memoizeOne((id$3,isEnabled,isDraggingOverForConsumer,isDraggingOverForImpact,dragging,renderClone)=>{let draggableId=dragging.descriptor.id;if(dragging.descriptor.droppableId===id$3){let useClone=renderClone?{render:renderClone,dragging:getDraggableRubric(dragging.descriptor)}:null,snapshot$1={isDraggingOver:isDraggingOverForConsumer,draggingOverWith:isDraggingOverForConsumer?draggableId:null,draggingFromThisWith:draggableId,isUsingPlaceholder:!0};return{placeholder:dragging.placeholder,shouldAnimatePlaceholder:!1,snapshot:snapshot$1,useClone}}if(!isEnabled)return idleWithoutAnimation;if(!isDraggingOverForImpact)return idleWithAnimation;let snapshot={isDraggingOver:isDraggingOverForConsumer,draggingOverWith:draggableId,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:dragging.placeholder,shouldAnimatePlaceholder:!0,snapshot,useClone:null}});return(state,ownProps)=>{let ownPropsWithDefaultProps=attachDefaultPropsToOwnProps(ownProps),id$3=ownPropsWithDefaultProps.droppableId,type=ownPropsWithDefaultProps.type,isEnabled=!ownPropsWithDefaultProps.isDropDisabled,renderClone=ownPropsWithDefaultProps.renderClone;if(isDragging(state)){let critical=state.critical;if(!isMatchingType(type,critical))return idleWithoutAnimation;let dragging=getDraggable(critical,state.dimensions),isDraggingOver=whatIsDraggedOver(state.impact)===id$3;return getMapProps(id$3,isEnabled,isDraggingOver,isDraggingOver,dragging,renderClone)}if(state.phase===`DROP_ANIMATING`){let completed=state.completed;if(!isMatchingType(type,completed.critical))return idleWithoutAnimation;let dragging=getDraggable(completed.critical,state.dimensions);return getMapProps(id$3,isEnabled,whatIsDraggedOverFromResult(completed.result)===id$3,whatIsDraggedOver(completed.impact)===id$3,dragging,renderClone)}if(state.phase===`IDLE`&&state.completed&&!state.shouldFlush){let completed=state.completed;if(!isMatchingType(type,completed.critical))return idleWithoutAnimation;let wasOver=whatIsDraggedOver(completed.impact)===id$3,wasCombining=!!(completed.impact.at&&completed.impact.at.type===`COMBINE`),isHome=completed.critical.droppable.id===id$3;return wasOver?wasCombining?idleWithAnimation:idleWithoutAnimation:isHome?idleWithAnimation:idleWithoutAnimation}return idleWithoutAnimation}},ConnectedDroppable=connect_default(makeMapStateToProps,{updateViewportMaxScroll},(stateProps,dispatchProps,ownProps)=>({...attachDefaultPropsToOwnProps(ownProps),...stateProps,...dispatchProps}),{context:StoreContext,areStatePropsEqual:isStrictEqual})(Droppable),EditorCanvas=(0,import_react.forwardRef)(({title,setTitle,titleStyles,viewMode,blocks,stickers,floatingTexts,floatingImages,selectedId,selectedIds=[],selectedType,setBlocks,onSelect,onUpdate,onDelete,onBlockImageUpload,paperStyles},ref)=>{let containerRef=(0,import_react.useRef)(null),contentRef=(0,import_react.useRef)(null),[scale$1,setScale]=(0,import_react.useState)(1),[scaledHeight,setScaledHeight]=(0,import_react.useState)(void 0),[isSelecting,setIsSelecting]=(0,import_react.useState)(!1),[selectionBox,setSelectionBox]=(0,import_react.useState)(null),[isToolbarVisible,setIsToolbarVisible]=(0,import_react.useState)(!1);(0,import_react.useImperativeHandle)(ref,()=>contentRef.current),(0,import_react.useEffect)(()=>{let handleResize=()=>{if(containerRef.current){let targetWidth=800,containerWidth=containerRef.current.clientWidth;setScale(containerWidth<800&&containerWidth>0?containerWidth/800:1)}},resizeObserver=new ResizeObserver(handleResize);return containerRef.current&&(resizeObserver.observe(containerRef.current),containerRef.current.parentElement&&resizeObserver.observe(containerRef.current.parentElement)),window.addEventListener(`resize`,handleResize),handleResize(),()=>{resizeObserver.disconnect(),window.removeEventListener(`resize`,handleResize)}},[viewMode]),(0,import_react.useEffect)(()=>{let handleKeyDown=e$4=>{if(e$4.key===`Delete`||e$4.key===`Backspace`){let activeTag=document.activeElement?.tagName.toLowerCase();if(activeTag===`input`||activeTag===`textarea`||document.activeElement.isContentEditable)return;(selectedIds&&selectedIds.length>0||selectedId)&&onDelete()}};return window.addEventListener(`keydown`,handleKeyDown),()=>window.removeEventListener(`keydown`,handleKeyDown)},[selectedIds,selectedId,onDelete]),(0,import_react.useEffect)(()=>{let updateHeight=()=>{if(contentRef.current){let originalHeight=contentRef.current.offsetHeight;setScaledHeight(originalHeight*scale$1)}};updateHeight();let observer=new ResizeObserver(updateHeight);return contentRef.current&&observer.observe(contentRef.current),()=>observer.disconnect()},[scale$1,blocks,stickers,floatingTexts,floatingImages]);let handleMouseDown=e$4=>{if(viewMode!==`editor`)return;let target=e$4.target;if([`input`,`textarea`,`button`].includes(target.tagName.toLowerCase())||target.closest(`button`))return;e$4.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur();let rect=contentRef.current.getBoundingClientRect(),x$2=(e$4.clientX-rect.left)/scale$1,y$2=(e$4.clientY-rect.top)/scale$1;setIsSelecting(!0),setSelectionBox({startX:x$2,startY:y$2,currentX:x$2,currentY:y$2}),e$4.shiftKey||(onSelect(null,null),setIsToolbarVisible(!1))},handleMouseMove=e$4=>{if(!isSelecting||!selectionBox||!contentRef.current)return;let rect=contentRef.current.getBoundingClientRect(),x$2=(e$4.clientX-rect.left)/scale$1,y$2=(e$4.clientY-rect.top)/scale$1;setSelectionBox(prev=>prev?{...prev,currentX:x$2,currentY:y$2}:null)},handleMouseUp=()=>{if(isSelecting&&selectionBox){let boxLeft=Math.min(selectionBox.startX,selectionBox.currentX),boxTop=Math.min(selectionBox.startY,selectionBox.currentY),boxWidth=Math.abs(selectionBox.currentX-selectionBox.startX),boxHeight=Math.abs(selectionBox.currentY-selectionBox.startY),boxRight=boxLeft+boxWidth,boxBottom=boxTop+boxHeight;if(boxWidth>5||boxHeight>5){let newSelectedIds=[],checkIntersection=(id$3,x$2,y$2,w$1,h$3)=>{let el=document.getElementById(id$3),finalX=x$2,finalY=y$2,finalW=w$1,finalH=h$3;if(el&&contentRef.current){let elRect=el.getBoundingClientRect(),contentRect=contentRef.current.getBoundingClientRect();finalX=(elRect.left-contentRect.left)/scale$1,finalY=(elRect.top-contentRect.top)/scale$1,finalW=elRect.width/scale$1,finalH=elRect.height/scale$1}return boxLeft<finalX+finalW&&boxRight>finalX&&boxTop<finalY+finalH&&boxBottom>finalY};stickers.forEach(stk=>{checkIntersection(stk.id,stk.x,stk.y,stk.w,stk.h)&&newSelectedIds.push(stk.id)}),floatingTexts.forEach(txt=>{checkIntersection(txt.id,txt.x,txt.y,txt.w,txt.h)&&newSelectedIds.push(txt.id)}),floatingImages.forEach(img=>{checkIntersection(img.id,img.x,img.y,img.w,img.h)&&newSelectedIds.push(img.id)}),blocks.forEach(blk=>{checkIntersection(blk.id,0,0,0,0)&&newSelectedIds.push(blk.id)}),newSelectedIds.forEach(id$3=>{let type=`sticker`;floatingTexts.some(t$4=>t$4.id===id$3)&&(type=`floating`),floatingImages.some(i$4=>i$4.id===id$3)&&(type=`floatingImage`),blocks.some(b$3=>b$3.id===id$3)&&(type=`block`),selectedIds.includes(id$3)||onSelect(id$3,type,!0)})}}setIsSelecting(!1),setSelectionBox(null)},onDragEnd$1=result=>{if(!result.destination)return;let sourceIndex=result.source.index,destinationIndex=result.destination.index;if(sourceIndex===destinationIndex)return;let newBlocks=Array.from(blocks),[reorderedItem]=newBlocks.splice(sourceIndex,1);newBlocks.splice(destinationIndex,0,reorderedItem),setBlocks(newBlocks)},handleAddBlock=type=>{let newBlock={id:`manual-${Date.now()}`,type,text:``,imageRotation:0,imageFit:`cover`,styles:{imageHeight:`300px`}};setBlocks(prev=>[...prev,newBlock])},moveBlock=(index$2,direction)=>{if(direction===`up`&&index$2===0||direction===`down`&&index$2===blocks.length-1)return;let newBlocks=[...blocks],targetIndex=direction===`up`?index$2-1:index$2+1;[newBlocks[index$2],newBlocks[targetIndex]]=[newBlocks[targetIndex],newBlocks[index$2]],setBlocks(newBlocks)},handleSwapLayout=id$3=>{setBlocks(prev=>prev.map(b$3=>b$3.id===id$3?b$3.type===`image-left`?{...b$3,type:`image-right`}:b$3.type===`image-right`?{...b$3,type:`image-left`}:b$3:b$3))},handleDeleteBlock=id$3=>{setBlocks(prev=>prev.filter(b$3=>b$3.id!==id$3)),selectedId===id$3&&onSelect(``,`block`)},detectedType=(()=>selectedType||(selectedId?selectedId===`title`?`title`:blocks.some(b$3=>b$3.id===selectedId)?`block`:stickers.some(s$3=>s$3.id===selectedId)?`sticker`:floatingTexts.some(t$4=>t$4.id===selectedId)?`floating`:floatingImages.some(i$4=>i$4.id===selectedId)?`floatingImage`:null:null))(),currentItem=(()=>!selectedId||!detectedType?null:detectedType===`title`?{id:`title`,type:`title`,styles:titleStyles}:detectedType===`block`?blocks.find(b$3=>b$3.id===selectedId):detectedType===`sticker`?stickers.find(s$3=>s$3.id===selectedId):detectedType===`floating`?floatingTexts.find(t$4=>t$4.id===selectedId):detectedType===`floatingImage`?floatingImages.find(i$4=>i$4.id===selectedId):null)();return(0,import_jsx_runtime.jsxs)(`div`,{ref:containerRef,className:`w-full h-full flex items-start justify-center overflow-x-hidden overflow-y-auto py-4 md:py-8 px-2 md:px-0 custom-scrollbar ${viewMode===`read`?`items-center`:``}`,onMouseDown:handleMouseDown,onMouseMove:handleMouseMove,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,children:[(0,import_jsx_runtime.jsx)(`div`,{style:{height:scaledHeight,width:`100%`,display:`flex`,justifyContent:`center`},children:(0,import_jsx_runtime.jsx)(`div`,{style:{transform:`scale(${scale$1})`,transformOrigin:`top center`,width:`800px`,minWidth:`800px`},children:(0,import_jsx_runtime.jsxs)(`div`,{ref:contentRef,className:`w-[800px] ${viewMode===`editor`?`min-h-[1000px]`:``} relative flex flex-col transition-shadow duration-300 overflow-hidden rounded-xl selection-zone`,style:{backgroundColor:`#ffffff`,...paperStyles},children:[isSelecting&&selectionBox&&(0,import_jsx_runtime.jsx)(`div`,{style:{position:`absolute`,left:Math.min(selectionBox.startX,selectionBox.currentX),top:Math.min(selectionBox.startY,selectionBox.currentY),width:Math.abs(selectionBox.currentX-selectionBox.startX),height:Math.abs(selectionBox.currentY-selectionBox.startY),backgroundColor:`rgba(59, 130, 246, 0.2)`,border:`1px solid rgba(59, 130, 246, 0.5)`,zIndex:9999,pointerEvents:`none`}}),(0,import_jsx_runtime.jsxs)(`div`,{id:`title`,className:`sticky top-0 bg-transparent border-b flex flex-col justify-start items-start transition-all pointer-events-none `,style:{zIndex:titleStyles.zIndex||20},onClick:e$4=>{e$4.stopPropagation(),viewMode===`editor`&&onSelect(`title`,`title`)},children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex justify-between items-start gap-4 pointer-events-auto w-full`,children:(0,import_jsx_runtime.jsx)(`input`,{value:title,onChange:e$4=>setTitle(e$4.target.value),placeholder:` `,readOnly:viewMode===`read`,className:`flex-1 outline-none bg-transparent placeholder-gray-300 min-w-0 h-25 pl-5`,style:{...titleStyles,fontSize:titleStyles.fontSize||`30px`,fontWeight:titleStyles.fontWeight||`bold`}})}),viewMode===`editor`&&selectedId===`title`&&null]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 relative ${viewMode===`read`?`p-6 md:pl-12 md:py-12 md:pr-16`:`pl-12 py-12 pr-16`}`,children:[(0,import_jsx_runtime.jsx)(DragDropContext,{onDragEnd:onDragEnd$1,children:(0,import_jsx_runtime.jsx)(ConnectedDroppable,{droppableId:`content-blocks-list`,children:provided=>(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,ref:provided.innerRef,...provided.droppableProps,children:[blocks.map((block,index$2)=>{let isFocused=viewMode===`editor`&&selectedId===block.id,canSwap=block.type===`image-left`||block.type===`image-right`;return(0,import_jsx_runtime.jsx)(PublicDraggable,{draggableId:block.id,index:index$2,isDragDisabled:viewMode===`read`||!!block.locked,children:(provided$1,snapshot)=>(0,import_jsx_runtime.jsxs)(`div`,{ref:provided$1.innerRef,...provided$1.draggableProps,id:block.id,style:{...provided$1.draggableProps.style,opacity:snapshot.isDragging?.8:1,zIndex:snapshot.isDragging?100:block.zIndex||`auto`},className:`relative group transition-shadow duration-200 ${isFocused?`rounded-xl`:``}`,onClick:e$4=>{e$4.stopPropagation(),viewMode===`editor`&&(onSelect(block.id,`block`,e$4.shiftKey),setIsToolbarVisible(!1))},onDoubleClick:e$4=>{e$4.stopPropagation(),viewMode===`editor`&&(onSelect(block.id,`block`),setIsToolbarVisible(!0))},children:[(0,import_jsx_runtime.jsx)(ContentBlock_default,{block,onUpdate:(id$3,k$3,v$3)=>setBlocks(p$3=>p$3.map(b$3=>b$3.id===id$3?{...b$3,[k$3]:v$3}:b$3)),onDelete:handleDeleteBlock,onImageUpload:onBlockImageUpload,isSelected:isFocused,onSelect:()=>onSelect(block.id,`block`),readOnly:viewMode===`read`||!!block.locked,dragHandleProps:provided$1.dragHandleProps}),viewMode===`editor`&&isFocused&&(0,import_jsx_runtime.jsx)(import_jsx_runtime.Fragment,{children:!block.locked&&(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute -right-14 top-0 h-full flex flex-col justify-center gap-2 z-30`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-1 bg-white/80 backdrop-blur rounded-lg shadow-sm p-1 border`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),moveBlock(index$2,`up`)},className:`p-1.5 rounded hover:bg-indigo-50 text-gray-400 hover:text-indigo-600 transition`,children:(0,import_jsx_runtime.jsx)(ArrowUp,{size:16})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),moveBlock(index$2,`down`)},className:`p-1.5 rounded hover:bg-indigo-50 text-gray-400 hover:text-indigo-600 transition`,children:(0,import_jsx_runtime.jsx)(ArrowDown,{size:16})})]}),canSwap&&(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),handleSwapLayout(block.id)},className:`p-2 bg-white border shadow-md rounded-full text-indigo-600 hover:bg-indigo-50 transition flex items-center justify-center ring-1 ring-indigo-100`,children:(0,import_jsx_runtime.jsx)(ArrowRightLeft,{size:18})})]})})]})},block.id)}),provided.placeholder]})})}),viewMode===`editor`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`mt-12 py-8 border-t border-dashed border-gray-200 flex flex-col items-center gap-4 text-gray-500 select-none`,children:[` `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-medium opacity-70`,children:`  ?`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap items-center justify-center gap-3`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>handleAddBlock(`paragraph`),className:`flex items-center gap-2 px-4 py-2 bg-gray-50 hover:bg-indigo-50 border border-gray-200 hover:border-indigo-200 rounded-full transition shadow-sm`,children:[(0,import_jsx_runtime.jsx)(Type,{size:16}),` `,(0,import_jsx_runtime.jsx)(`span`,{children:` `})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>handleAddBlock(`image-left`),className:`flex items-center gap-2 px-4 py-2 bg-gray-50 hover:bg-indigo-50 border border-gray-200 hover:border-indigo-200 rounded-full transition shadow-sm`,children:[(0,import_jsx_runtime.jsx)(LayoutTemplate,{size:16}),` `,(0,import_jsx_runtime.jsx)(`span`,{children:` + `})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>handleAddBlock(`image-full`),className:`flex items-center gap-2 px-4 py-2 bg-gray-50 hover:bg-indigo-50 border border-gray-200 hover:border-indigo-200 rounded-full transition shadow-sm`,children:[(0,import_jsx_runtime.jsx)(Image$1,{size:16}),` `,(0,import_jsx_runtime.jsx)(`span`,{children:` `})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>handleAddBlock(`image-double`),className:`flex items-center gap-2 px-4 py-2 bg-gray-50 hover:bg-indigo-50 border border-gray-200 hover:border-indigo-200 rounded-full transition shadow-sm`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex`,children:[(0,import_jsx_runtime.jsx)(Image$1,{size:14}),(0,import_jsx_runtime.jsx)(Image$1,{size:14})]}),` `,(0,import_jsx_runtime.jsx)(`span`,{children:` 2`})]})]})]})]}),stickers.map(stk=>(0,import_jsx_runtime.jsx)(ResizableItem_default,{...stk,isSelected:selectedId===stk.id||selectedIds.includes(stk.id),readOnly:viewMode===`read`||!!stk.locked,onSelect:isMulti=>{onSelect(stk.id,`sticker`,isMulti),setIsToolbarVisible(!1)},onDoubleClick:()=>setIsToolbarVisible(!0),onUpdate:changes=>onUpdate(stk.id,`sticker`,changes),children:stk.widgetType?(0,import_jsx_runtime.jsx)(import_react.Suspense,{fallback:(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full bg-gray-100 animate-pulse rounded-lg`}),children:(()=>{let Widget=WIDGET_COMPONENT_MAP[stk.widgetType];return Widget?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full overflow-hidden rounded-lg pointer-events-auto`,onDoubleClick:e$4=>{e$4.stopPropagation(),setIsToolbarVisible(!0)},children:(0,import_jsx_runtime.jsx)(Widget,{...stk.widgetProps||{},isStickerMode:!0})}):stk.widgetType===`custom-block`||stk.widgetType?.startsWith(`custom-`)?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full overflow-hidden rounded-lg pointer-events-auto`,onDoubleClick:e$4=>{e$4.stopPropagation(),setIsToolbarVisible(!0)},children:(0,import_jsx_runtime.jsx)(CustomWidgetPreview_default,{content:{...stk.widgetProps?.content||{},decorations:stk.widgetProps?.decorations||[]},defaultSize:`2x2`})}):(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full bg-red-50 flex items-center justify-center text-red-400 text-xs`,children:[`Unknown (`,stk.widgetType,`)`]})})()}):(0,import_jsx_runtime.jsx)(`img`,{src:stk.url,className:`w-full h-full object-contain pointer-events-none select-none`,style:{opacity:stk.opacity}})},stk.id)),floatingTexts.map(txt=>(0,import_jsx_runtime.jsx)(ResizableItem_default,{...txt,isSelected:selectedId===txt.id||selectedIds.includes(txt.id),readOnly:viewMode===`read`||!!txt.locked,onSelect:isMulti=>{onSelect(txt.id,`floating`,isMulti),setIsToolbarVisible(!1)},onDoubleClick:()=>setIsToolbarVisible(!0),onUpdate:changes=>onUpdate(txt.id,`floating`,changes),children:(0,import_jsx_runtime.jsx)(`textarea`,{value:txt.text,onChange:e$4=>onUpdate(txt.id,`floating`,{text:e$4.target.value}),className:`w-full h-full bg-transparent outline-none resize-none p-2 overflow-hidden`,style:{fontFamily:txt.styles?.fontFamily,fontSize:txt.styles?.fontSize,fontWeight:txt.styles?.fontWeight||`normal`,textAlign:txt.styles?.textAlign,color:txt.styles?.color,backgroundColor:txt.styles?.backgroundColor,fontStyle:txt.styles?.fontStyle||`normal`,textDecoration:txt.styles?.textDecoration||`none`},readOnly:viewMode===`read`||!!txt.locked})},txt.id)),floatingImages.map(img=>(0,import_jsx_runtime.jsx)(ResizableItem_default,{...img,isSelected:selectedId===img.id||selectedIds.includes(img.id),readOnly:viewMode===`read`||!!img.locked,onSelect:isMulti=>{onSelect(img.id,`floatingImage`,isMulti),setIsToolbarVisible(!1)},onDoubleClick:()=>setIsToolbarVisible(!0),onUpdate:changes=>onUpdate(img.id,`floatingImage`,changes),children:(0,import_jsx_runtime.jsx)(`img`,{src:img.url,className:`w-full h-full object-cover pointer-events-none rounded-lg select-none`,style:{opacity:img.opacity}})},img.id)),viewMode===`editor`&&selectedId&&currentItem&&(detectedType===`block`||detectedType===`title`)&&(0,import_jsx_runtime.jsx)(ToolbarOverlay_default,{selectedId,selectedType:detectedType,currentItem,onUpdate,onDelete:detectedType===`title`?void 0:onDelete,scale:scale$1})]})})}),viewMode===`editor`&&selectedId&&currentItem&&detectedType&&detectedType!==`block`&&detectedType!==`title`&&isToolbarVisible&&(0,import_jsx_runtime.jsx)(EditorToolbar_default,{selectedId,selectedType:detectedType,currentItem,onUpdate,onDelete:detectedType===`title`?void 0:onDelete,positionMode:`fixed`})]})}),EditorCanvas_default=EditorCanvas,PostReadView=({editor})=>{let breadcrumbs=useBreadcrumbs(editor.selectedAlbumId,editor.customAlbums,id$3=>id$3&&editor.handleAlbumClick(id$3),` `,!1),handleDelete=async()=>{editor.currentPostId&&await editor.handleDeletePost(editor.currentPostId)};return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col h-auto min-h-[85vh] gap-6 relative items-center pb-32`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full max-w-[800px] flex flex-col md:flex-row justify-between items-start md:items-center py-4 px-5 md:px-0 box-border gap-2 md:gap-0`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3 w-full md:w-auto overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{breadcrumbs.length>0?breadcrumbs[breadcrumbs.length-1].onClick?.():editor.setViewMode(`album`)},className:`p-1.5 text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)] rounded-full transition-colors shrink-0`,title:` `,children:(0,import_jsx_runtime.jsx)(ChevronRight,{className:`rotate-180`,size:20})}),(0,import_jsx_runtime.jsx)(`div`,{className:`overflow-x-auto no-scrollbar`,children:(0,import_jsx_runtime.jsx)(PostBreadcrumb_default,{items:[...breadcrumbs,{label:editor.title||` `}]})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 self-end md:self-auto`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>editor.setViewMode(`editor`),className:`p-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-card-secondary)] rounded-lg transition-all`,title:``,children:(0,import_jsx_runtime.jsx)(PenLine,{size:18})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleDelete,className:`p-2 text-[var(--text-secondary)] hover:text-red-600 hover:bg-red-50 rounded-lg transition-all`,title:` `,children:(0,import_jsx_runtime.jsx)(Trash2,{size:18})})]})]}),(0,import_jsx_runtime.jsx)(EditorCanvas_default,{title:editor.title,setTitle:editor.setTitle,titleStyles:editor.titleStyles,viewMode:`read`,paperStyles:editor.paperStyles,blocks:editor.blocks,setBlocks:editor.setBlocks,stickers:editor.stickers,floatingTexts:editor.floatingTexts,floatingImages:editor.floatingImages,selectedId:null,selectedType:null,onSelect:()=>{},onUpdate:()=>{},onDelete:()=>{},onBlockImageUpload:()=>{},onBackgroundClick:()=>{}})]})},PostReadView_default=PostReadView,dust_default=`/byeory/assets/dust-BLYpls_R.png`,paper_fibers_default=`/byeory/assets/paper-fibers-BqxPq_Ec.png`;const PAPER_PRESETS={DEFAULT:{id:`default`,name:` (A4)`,styles:{backgroundColor:`#ffffff`,boxShadow:`0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)`,padding:`3rem`},defaultFontColor:`#000000`},HANJI:{id:`hanji`,name:` (Hanji)`,styles:{backgroundColor:`#f5f5dc`,backgroundImage:`url("${paper_fibers_default}")`,backgroundSize:`auto`,backgroundRepeat:`repeat`,border:`2px solid #5d4037`,boxShadow:`inset 0 0 20px rgba(139, 69, 19, 0.2), 5px 5px 15px rgba(0,0,0,0.1)`,padding:`3.5rem`,fontFamily:`"Gowun Batang", serif`},defaultFontColor:`#3e2723`},NIGHT_SKY:{id:`night_sky`,name:` (Night Sky)`,styles:{backgroundColor:`#0f172a`,backgroundImage:`linear-gradient(to bottom, #0f172a, #1e1b4b)`,boxShadow:`0 10px 25px rgba(0, 0, 0, 0.5)`,padding:`3rem`,color:`#ffffff`},defaultFontColor:`#ffffff`,stickers:[{id:`star_1`,x:`10%`,y:`10%`,w:30,h:30,rotation:15,zIndex:1,url:`https://cdn-icons-png.flaticon.com/512/616/616490.png`},{id:`star_2`,x:`90%`,y:`20%`,w:20,h:20,rotation:-15,zIndex:1,url:`https://cdn-icons-png.flaticon.com/512/616/616490.png`},{id:`moon_1`,x:`80%`,y:`80%`,w:80,h:80,rotation:0,zIndex:1,url:`https://cdn-icons-png.flaticon.com/512/1164/1164955.png`}]},POLAROID:{id:`polaroid`,name:` (Polaroid)`,styles:{backgroundColor:`#ffffff`,padding:`2rem 2rem 8rem 2rem`,boxShadow:`0 15px 30px rgba(0,0,0,0.2)`,border:`1px solid #eee`,transform:`rotate(-2deg)`},defaultFontColor:`#333333`},WOOD:{id:`wood`,name:`  (Wood)`,styles:{backgroundColor:`#d8b98b`,backgroundImage:`url("${dust_default}")`,boxShadow:`0 4px 6px rgba(0,0,0,0.1)`,padding:`3rem`,border:`none`},defaultFontColor:`#4e342e`},LETTER:{id:`letter`,name:`  (Lined)`,styles:{backgroundColor:`#fffdf5`,backgroundImage:`repeating-linear-gradient(transparent, transparent 29px, #d1d5db 30px)`,backgroundSize:`100% 30px`,lineHeight:`30px`,padding:`3rem`,boxShadow:`0 2px 5px rgba(0,0,0,0.05)`},defaultFontColor:`#374151`}},DEFAULT_PAPER_PRESET=PAPER_PRESETS.DEFAULT;var WidgetButton=({widget,onAdd:onAdd$1})=>{let[imgError,setImgError]=import_react.useState(!1),thumbnailUrl=`/byeory/thumbnails/${widget.widgetType}.png`;return(0,import_jsx_runtime.jsxs)(`div`,{className:`group relative`,children:[(0,import_jsx_runtime.jsx)(`div`,{role:`button`,tabIndex:0,onClick:()=>onAdd$1(widget.widgetType,widget.defaultProps),onKeyDown:e$4=>{(e$4.key===`Enter`||e$4.key===` `)&&onAdd$1(widget.widgetType,widget.defaultProps)},className:`w-full aspect-square rounded-xl border border-[var(--border-color)] hover:bg-[var(--bg-card-secondary)] hover:border-[var(--accent-color)] transition-all flex items-center justify-center bg-white shadow-sm overflow-hidden p-1.5 cursor-pointer`,children:imgError?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full overflow-hidden relative bg-[var(--bg-card-secondary)] rounded-lg`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full pointer-events-none select-none transform scale-[0.4] origin-top-left`,style:{width:`250%`,height:`250%`},children:widget.component?(0,import_jsx_runtime.jsx)(widget.component,{...widget.defaultProps||{}}):(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full flex flex-col items-center justify-center p-2 text-[var(--accent-color)]`,children:(0,import_jsx_runtime.jsx)(`span`,{className:`text-xl`,children:``})})})}):(0,import_jsx_runtime.jsx)(`img`,{src:thumbnailUrl,alt:widget.label,className:`w-full h-full object-contain`,onError:()=>setImgError(!0)})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none`,children:[widget.label,(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-800`})]})]},widget.widgetType)},SidebarAccordion=({title,icon:Icon$1,children:children$1,defaultOpen=!1})=>{let[isOpen,setIsOpen]=(0,import_react.useState)(defaultOpen);return(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] rounded-2xl shadow-sm border border-[var(--border-color)] overflow-hidden transition-all duration-300`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsOpen(!isOpen),className:`w-full p-4 flex items-center justify-between transition-colors ${isOpen?`bg-[var(--bg-card-secondary)]/30 border-b border-[var(--border-color)]`:`hover:bg-[var(--bg-card-secondary)]/50`}`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 font-bold text-[var(--text-primary)]`,children:[(0,import_jsx_runtime.jsx)(Icon$1,{size:18,className:`text-[var(--text-secondary)]`}),title]}),(0,import_jsx_runtime.jsx)(ChevronDown,{size:16,className:`text-[var(--text-secondary)] transition-transform duration-300 ${isOpen?`rotate-180`:``}`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`transition-all duration-300 ease-in-out overflow-hidden ${isOpen?`max-h-[800px] opacity-100`:`max-h-0 opacity-0`}`,children:children$1})]})},EditorSidebar=({isSaving,onSave,onTempSave,onCancel,onAddBlock,onAddFloatingText,onAddSticker,onAddFloatingImage,rawInput,setRawInput,selectedLayoutId,setSelectedLayoutId,tempImages,fileInputRef,handleImagesUpload,onAiGenerate,isAiProcessing,currentTags,onTagsChange,applyPaperPreset,onSaveAsTemplate,myTemplates=[],applyTemplate,containerClassName=`xl:w-80`,showActionButtons=!0,onAddWidgetSticker=type=>console.warn(`onAddWidgetSticker missing`,type),isPublic=!0,setIsPublic,onDeleteTemplate,showHiddenTemplates=!1,setShowHiddenTemplates,onRestoreTemplate})=>{let{registry:widgetRegistry}=useWidgetRegistry(),[customWidgets,setCustomWidgets]=(0,import_react.useState)([]);(0,import_react.useEffect)(()=>{(async()=>{try{let data=await getMyWidgets();Array.isArray(data)&&setCustomWidgets(data.map(item=>{let baseType=item.type,Component$2=WIDGET_COMPONENT_MAP[baseType];return!Component$2&&baseType===`custom-block`&&(Component$2=props=>(0,import_jsx_runtime.jsx)(CustomWidgetPreview_default,{content:{...props.content,decorations:props.decorations||[]},defaultSize:item.defaultSize||`2x2`})),Component$2?{id:item.id,widgetType:`custom-${item.id}`,label:item.name||` `,description:`Custom ${baseType} widget`,category:`My Saved`,keywords:[`custom`,baseType],defaultSize:item.defaultSize||`1x1`,validSizes:[[1,1],[1,2],[2,1],[2,2]],defaultProps:{content:item.content,styles:item.styles,decorations:item.decorations},isSystem:!1,thumbnail:void 0,component:Component$2}:null}).filter(w$1=>w$1!==null))}catch(e$4){console.error(`Failed to load custom widgets in Sidebar:`,e$4)}})()},[]);let allWidgets=[...Object.values(widgetRegistry),...customWidgets],{isOwned,buyItem,getMarketItem,getPackPrice}=useMarket(),{transcript,listening,resetTranscript,browserSupportsSpeechRecognition}=useSpeechRecognition(),[isRecordingSidebar,setIsRecordingSidebar]=(0,import_react.useState)(!1),baseInputRef=(0,import_react.useRef)(rawInput);(0,import_react.useEffect)(()=>{listening&&isRecordingSidebar&&setRawInput(`${baseInputRef.current} ${transcript}`.trim())},[transcript,listening,isRecordingSidebar,setRawInput]);let toggleRecording=()=>{if(!browserSupportsSpeechRecognition){alert(`     . Chrome .`);return}listening?(SpeechRecognition.stopListening(),setIsRecordingSidebar(!1)):(baseInputRef.current=rawInput||``,resetTranscript(),setIsRecordingSidebar(!0),SpeechRecognition.startListening({continuous:!0,language:`ko-KR`}))},[confirmation,setConfirmation]=(0,import_react.useState)({isOpen:!1,title:``,message:``,type:`info`,onConfirm:()=>{}}),triggerFileClick=()=>fileInputRef.current?.click(),floatingImgRef=(0,import_react.useRef)(null),handleFloatingImgChange=e$4=>{e$4.target.files?.[0]&&(onAddFloatingImage(e$4.target.files[0]),e$4.target.value=``)},handleStickerClick=async sticker=>{if(!sticker.isPremium||isOwned(sticker.id)||sticker.packId&&isOwned(sticker.packId)){onAddSticker(sticker.url);return}if(sticker.packId){let packItem=await getMarketItem(sticker.packId);if(packItem){let packPrice=packItem.price,dynamicPrice=getPackPrice(sticker.packId,packPrice),discount=packPrice-dynamicPrice;setConfirmation({isOpen:!0,title:`  `,message:`  '${packItem.title}'  .\n${discount>0?`(  ${discount} C !)\n`:``} ?`,type:`info`,singleButton:!1,confirmLabel:`   (${dynamicPrice} C)`,secondaryLabel:`   (${sticker.price||100} C)`,onConfirm:async()=>{setConfirmation(prev=>({...prev,isOpen:!1})),await buyItem(packItem.id,dynamicPrice)?setTimeout(()=>setConfirmation({isOpen:!0,title:` `,message:`'${packItem.title}'  !`,type:`success`,onConfirm:()=>setConfirmation(prev=>({...prev,isOpen:!1})),singleButton:!0}),300):setTimeout(()=>setConfirmation({isOpen:!0,title:` `,message:`   .`,type:`danger`,onConfirm:()=>setConfirmation(prev=>({...prev,isOpen:!1})),singleButton:!0}),300)},onSecondary:async()=>{setConfirmation(prev=>({...prev,isOpen:!1})),await buyItem(sticker.id,sticker.price||100)?setTimeout(()=>setConfirmation({isOpen:!0,title:` `,message:`  !`,type:`success`,onConfirm:()=>setConfirmation(prev=>({...prev,isOpen:!1})),singleButton:!0}),300):setTimeout(()=>setConfirmation({isOpen:!0,title:` `,message:`   .`,type:`danger`,onConfirm:()=>setConfirmation(prev=>({...prev,isOpen:!1})),singleButton:!0}),300)}});return}}setConfirmation({isOpen:!0,title:` `,message:`  ${sticker.price||100}  ?`,type:`info`,singleButton:!1,confirmLabel:``,onConfirm:async()=>{setConfirmation(prev=>({...prev,isOpen:!1})),await buyItem(sticker.id,sticker.price||100)?setTimeout(()=>setConfirmation({isOpen:!0,title:` `,message:`  !`,type:`success`,onConfirm:()=>setConfirmation(prev=>({...prev,isOpen:!1})),singleButton:!0}),300):setTimeout(()=>setConfirmation({isOpen:!0,title:` `,message:` .`,type:`danger`,onConfirm:()=>setConfirmation(prev=>({...prev,isOpen:!1})),singleButton:!0}),300)}})};return(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full ${containerClassName} flex flex-col gap-5 h-full overflow-y-auto py-4 md:py-8 pr-1 pb-10`,children:[showActionButtons&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[setIsPublic&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between px-1`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`text-sm font-bold text-[var(--text-secondary)] flex items-center gap-1.5 cursor-pointer select-none`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-lg`,children:isPublic?``:``}),isPublic?` `:` `]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsPublic(!isPublic),className:`
                                    relative w-11 h-6 rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500
                                    ${isPublic?`bg-indigo-600`:`bg-gray-300`}
                                `,children:(0,import_jsx_runtime.jsx)(`span`,{className:`
                                        absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform duration-200 shadow-sm
                                        ${isPublic?`translate-x-5`:`translate-x-0`}
                                    `})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 w-full`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:onCancel,className:`flex-1 py-4 px-3 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-xl font-bold text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)] transition-all flex items-center justify-center gap-2`,title:``,children:[(0,import_jsx_runtime.jsx)(X,{size:20}),(0,import_jsx_runtime.jsx)(`span`,{children:``})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:onSave,disabled:isSaving,className:`flex-1 py-4 px-3 bg-[var(--btn-bg)] text-[var(--btn-text)] rounded-xl font-bold hover:opacity-90 transition-all shadow-md shadow-indigo-500/20 flex items-center justify-center gap-2 disabled:opacity-50`,children:[(0,import_jsx_runtime.jsx)(Check,{size:20}),(0,import_jsx_runtime.jsx)(`span`,{children:isSaving?` ...`:``})]})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:onTempSave,disabled:isSaving,className:`w-full py-2.5 px-3 bg-white border border-indigo-200 text-indigo-600 rounded-lg text-sm font-bold hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 disabled:opacity-50 shadow-sm`,children:[(0,import_jsx_runtime.jsx)(Save,{size:14}),(0,import_jsx_runtime.jsx)(`span`,{children:isSaving?`...`:` `})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] rounded-2xl shadow-sm border border-[var(--border-color)] overflow-hidden flex flex-col`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 border-b border-[var(--border-color)] bg-[var(--bg-card-secondary)]/30 flex items-center justify-between`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`font-bold text-[var(--text-primary)] flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Bot,{size:18,className:`text-[var(--text-secondary)]`}),`AI  `]}),(0,import_jsx_runtime.jsx)(`span`,{className:`px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-600 text-[10px] font-bold border border-indigo-100`,children:`BETA`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 flex flex-col gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`
                        relative w-full rounded-xl border border-[var(--border-color)] bg-[var(--bg-card-secondary)]
                        focus-within:ring-2 focus-within:ring-[var(--btn-bg)] focus-within:border-transparent transition-all
                    `,children:[(0,import_jsx_runtime.jsx)(`textarea`,{value:rawInput,onChange:e$4=>setRawInput(e$4.target.value),className:`w-full h-28 p-3 pr-10 bg-transparent border-none outline-none resize-none placeholder-gray-400 text-sm`,placeholder:`  ?     AI   .`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:toggleRecording,className:`absolute bottom-2 right-2 p-1.5 rounded-full transition-all duration-200
                                ${listening&&isRecordingSidebar?`text-red-500 bg-red-50 animate-pulse`:`text-gray-400 hover:text-indigo-600 hover:bg-gray-200/50`}
                            `,title:listening?`  `:` `,children:listening&&isRecordingSidebar?(0,import_jsx_runtime.jsx)(MicOff,{size:16}):(0,import_jsx_runtime.jsx)(Mic,{size:16})})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold text-[var(--text-secondary)] mb-2 block uppercase tracking-wider`,children:`Layout Style`}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 gap-2`,children:LAYOUT_PRESETS.map(l$3=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setSelectedLayoutId(l$3.id),className:`text-xs px-3 py-4 rounded-lg border transition-all flex items-center justify-center gap-1.5
                                        ${selectedLayoutId===l$3.id?`bg-indigo-50 border-indigo-200 text-indigo-700 font-bold ring-1 ring-indigo-200`:`border-[var(--border-color)] text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)]`}`,children:l$3.name},l$3.id))})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:triggerFileClick,className:`w-full py-3 border border-dashed border-[var(--border-color)] rounded-xl text-[var(--text-secondary)] hover:text-[var(--btn-bg)] hover:border-[var(--btn-bg)] hover:bg-indigo-50/30 transition-all text-xs font-medium flex flex-col items-center justify-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Upload,{size:16}),(0,import_jsx_runtime.jsxs)(`span`,{children:[`AI    (`,tempImages.length,` )`]})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:onAiGenerate,disabled:isAiProcessing,className:`w-full py-3.5 bg-gradient-to-r from-violet-600 to-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 hover:shadow-indigo-300 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:hover:scale-100`,children:[(0,import_jsx_runtime.jsx)(Sparkles,{size:18,className:isAiProcessing?`animate-spin`:``}),isAiProcessing?`AI   ...`:`AI  `]}),(0,import_jsx_runtime.jsx)(`input`,{type:`file`,hidden:!0,ref:fileInputRef,onChange:handleImagesUpload,multiple:!0,accept:`image/*`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] rounded-2xl shadow-sm border border-[var(--border-color)] overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 border-b border-[var(--border-color)] bg-[var(--bg-card-secondary)]/30`,children:(0,import_jsx_runtime.jsxs)(`h3`,{className:`font-bold text-[var(--text-primary)] flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-lg`,children:``}),``]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 flex flex-col gap-2`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-wrap gap-1`,children:currentTags.map(tag=>(0,import_jsx_runtime.jsxs)(`span`,{className:`px-2 py-1 bg-[var(--btn-bg)] text-[var(--btn-text)] text-xs rounded-full flex items-center gap-1 opacity-90`,children:[`#`,tag,(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onTagsChange(currentTags.filter(t$4=>t$4!==tag)),className:`hover:text-red-200`,children:(0,import_jsx_runtime.jsx)(X,{size:12})})]},tag))}),(0,import_jsx_runtime.jsx)(`input`,{placeholder:`  (Space/Ent)`,className:`w-full p-2 bg-[var(--bg-card-secondary)] border border-[var(--border-color)] rounded-lg text-sm outline-none focus:border-[var(--btn-bg)] transition-colors`,onKeyDown:e$4=>{if(e$4.key===`Enter`||e$4.key===` `){e$4.preventDefault();let val=e$4.currentTarget.value.trim();if(val){let tag=val.replace(/^#/,``);currentTags.includes(tag)||onTagsChange([...currentTags,tag]),e$4.currentTarget.value=``}}}})]})]}),(0,import_jsx_runtime.jsxs)(SidebarAccordion,{title:` `,icon:Palette,defaultOpen:!1,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 flex flex-col gap-3`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:onAddBlock,className:`w-full py-3 px-4 border border-[var(--border-color)] rounded-xl hover:bg-[var(--bg-card-secondary)] hover:border-indigo-200 transition-all text-sm font-medium text-[var(--text-primary)] flex items-center gap-3 group bg-white/50`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-1.5 rounded-lg bg-gray-100 text-gray-600 group-hover:bg-indigo-50 group-hover:text-indigo-600 transition-colors`,children:(0,import_jsx_runtime.jsx)(Type,{size:18})}),(0,import_jsx_runtime.jsx)(`span`,{className:`flex-1 text-left`,children:`  `}),(0,import_jsx_runtime.jsx)(Plus,{size:14,className:`opacity-0 group-hover:opacity-100 transition-opacity text-indigo-400`})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:onAddFloatingText,className:`w-full py-3 px-4 border border-[var(--border-color)] rounded-xl hover:bg-[var(--bg-card-secondary)] hover:border-yellow-200 transition-all text-sm font-medium text-[var(--text-primary)] flex items-center gap-3 group bg-white/50`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-1.5 rounded-lg bg-yellow-50 text-yellow-600 group-hover:bg-yellow-100 transition-colors`,children:(0,import_jsx_runtime.jsx)(StickyNote,{size:18})}),(0,import_jsx_runtime.jsx)(`span`,{className:`flex-1 text-left`,children:` `}),(0,import_jsx_runtime.jsx)(Plus,{size:14,className:`opacity-0 group-hover:opacity-100 transition-opacity text-yellow-400`})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>floatingImgRef.current?.click(),className:`w-full py-3 px-4 border border-[var(--border-color)] rounded-xl hover:bg-[var(--bg-card-secondary)] hover:border-blue-200 transition-all text-sm font-medium text-[var(--text-primary)] flex items-center gap-3 group bg-white/50`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-1.5 rounded-lg bg-blue-50 text-blue-600 group-hover:bg-blue-100 transition-colors`,children:(0,import_jsx_runtime.jsx)(Image$1,{size:18})}),(0,import_jsx_runtime.jsx)(`span`,{className:`flex-1 text-left`,children:`  `}),(0,import_jsx_runtime.jsx)(Plus,{size:14,className:`opacity-0 group-hover:opacity-100 transition-opacity text-blue-400`})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`file`,hidden:!0,ref:floatingImgRef,onChange:handleFloatingImgChange,accept:`image/*`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`px-4 pb-4 pt-2 border-t border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`h4`,{className:`text-xs font-bold text-[var(--text-secondary)] mb-3 mt-2 uppercase tracking-wider flex justify-between items-center`,children:[`Stickers`,(0,import_jsx_runtime.jsx)(`a`,{href:`/byeory/market`,className:`text-[10px] text-indigo-500 hover:underline`,children:`Get more`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-4 gap-2`,children:STICKERS.map(sticker=>{let isLocked=!(!sticker.isPremium||isOwned(sticker.id)||sticker.packId&&isOwned(sticker.packId));return(0,import_jsx_runtime.jsxs)(`button`,{title:isLocked?` (${sticker.price} C)`:``,onClick:()=>handleStickerClick(sticker),className:`relative aspect-square hover:bg-[var(--bg-card-secondary)] p-1.5 rounded-xl border border-transparent hover:border-[var(--border-color)] transition-all active:scale-95 ${isLocked?`grayscale opacity-70`:``}`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:sticker.url,className:`w-full h-full object-contain filter drop-shadow-sm`,alt:`sticker`}),isLocked&&(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute inset-0 flex flex-col items-center justify-center bg-black/10 rounded-xl text-white drop-shadow-md`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs`,children:``}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] font-bold`,children:sticker.price})]})]},sticker.id)})})]})]}),(0,import_jsx_runtime.jsx)(SidebarAccordion,{title:` `,icon:PanelsTopLeft,defaultOpen:!1,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 grid grid-cols-2 gap-2`,children:[Object.values(PAPER_PRESETS).map(preset$1=>{let isSpecial=preset$1.id!==`default`&&preset$1.id!==`hanji`,displayName=preset$1.name;if(isSpecial&&preset$1.name.includes(`(`)){let[main,sub]=preset$1.name.split(`(`);displayName=(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`span`,{children:main.trim()}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] opacity-80`,children:[`(`,sub]})]})}return(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>applyPaperPreset(preset$1),className:`h-15 p-2 border border-[var(--border-color)] rounded-lg text-xs hover:bg-[var(--bg-card-secondary)] hover:border-indigo-200 transition text-[var(--text-secondary)] font-medium flex flex-col items-center justify-center gap-0.5 leading-tight`,style:{backgroundColor:preset$1.styles.backgroundColor||`#fff`,color:preset$1.defaultFontColor||`#000`},children:displayName},preset$1.id)}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:onSaveAsTemplate,className:`col-span-2 h-12 border-2 border-dashed border-indigo-300 rounded-lg text-xs hover:bg-indigo-50 hover:border-indigo-500 transition text-indigo-600 font-bold flex items-center justify-center gap-2 bg-white/50`,children:[(0,import_jsx_runtime.jsx)(Save,{size:16}),`  (  )`]})]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] rounded-2xl shadow-sm border border-[var(--border-color)] overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 border-b border-[var(--border-color)] bg-[var(--bg-card-secondary)]/30`,children:(0,import_jsx_runtime.jsxs)(`h3`,{className:`font-bold text-[var(--text-primary)] flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Save,{size:18,className:`text-[var(--text-secondary)]`}),` `,setShowHiddenTemplates&&(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setShowHiddenTemplates(!showHiddenTemplates),className:`ml-auto p-1 rounded-full transition-colors ${showHiddenTemplates?`bg-red-100 text-red-500`:`hover:bg-gray-100 text-gray-400`}`,title:showHiddenTemplates?`  `:` `,children:(0,import_jsx_runtime.jsx)(Trash2,{size:14})})]})}),(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 grid grid-cols-2 gap-2`,children:myTemplates.length>0?myTemplates.map(template=>(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>applyTemplate&&applyTemplate(template),className:`p-2 border border-[var(--border-color)] rounded-lg text-xs hover:bg-[var(--bg-card-secondary)] hover:border-indigo-200 transition text-[var(--text-secondary)] font-medium flex flex-col items-center gap-1 overflow-hidden relative group cursor-pointer`,style:{backgroundColor:template.styles?.backgroundColor||`#fff`},children:[(0,import_jsx_runtime.jsx)(`span`,{className:`truncate w-full text-center relative z-10`,style:{color:(()=>{let bg=template.styles?.backgroundColor||`#ffffff`;if(bg.startsWith(`#`)){let r$4=parseInt(bg.substring(1,3),16),g$3=parseInt(bg.substring(3,5),16),b$3=parseInt(bg.substring(5,7),16);return(r$4*299+g$3*587+b$3*114)/1e3>125?`#000000`:`#ffffff`}return`#000000`})()},children:template.name}),showHiddenTemplates?onRestoreTemplate&&(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onRestoreTemplate(template.id)},className:`absolute top-1 right-1 p-1 rounded-full bg-black/10 hover:bg-green-500 hover:text-white transition-colors text-[var(--text-secondary)] opacity-0 group-hover:opacity-100 z-20`,title:` `,children:(0,import_jsx_runtime.jsx)(Undo2,{size:12})}):onDeleteTemplate&&(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onDeleteTemplate(template.id)},className:`absolute top-1 right-1 p-1 rounded-full bg-black/10 hover:bg-red-500 hover:text-white transition-colors text-[var(--text-secondary)] opacity-0 group-hover:opacity-100 z-20`,title:` `,children:(0,import_jsx_runtime.jsx)(X,{size:12})})]},template.id)):(0,import_jsx_runtime.jsx)(`div`,{className:`col-span-2 text-center text-xs text-gray-400 py-2`,children:showHiddenTemplates?` .`:`  .`})})]}),(0,import_jsx_runtime.jsx)(SidebarAccordion,{title:``,icon:()=>(0,import_jsx_runtime.jsx)(`span`,{className:`text-lg`,children:``}),defaultOpen:!1,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 flex flex-col gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h4`,{className:`text-xs font-bold text-[var(--text-secondary)] mb-2 uppercase tracking-wider`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 gap-2 max-h-[320px] overflow-y-auto custom-scrollbar`,children:allWidgets.filter(w$1=>!w$1.widgetType.startsWith(`custom-`)).map(widget=>(0,import_jsx_runtime.jsx)(WidgetButton,{widget,onAdd:onAddWidgetSticker},widget.widgetType))})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`pt-2 border-t border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`h4`,{className:`text-xs font-bold text-[var(--text-secondary)] mb-2 mt-2 uppercase tracking-wider flex items-center gap-2`,children:[` `,(0,import_jsx_runtime.jsx)(`span`,{className:`px-1.5 py-0.5 rounded-full bg-indigo-50 text-indigo-600 text-[10px] font-bold`,children:`Custom`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 gap-2 max-h-[320px] overflow-y-auto custom-scrollbar`,children:allWidgets.filter(w$1=>w$1.widgetType.startsWith(`custom-`)).length>0?allWidgets.filter(w$1=>w$1.widgetType.startsWith(`custom-`)).map(widget=>(0,import_jsx_runtime.jsx)(WidgetButton,{widget,onAdd:onAddWidgetSticker},widget.widgetType)):(0,import_jsx_runtime.jsxs)(`div`,{className:`col-span-2 py-4 flex flex-col items-center justify-center text-center text-gray-400 gap-1 bg-[var(--bg-card-secondary)]/30 rounded-lg border border-dashed border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xl`,children:``}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs`,children:`  .`})]})})]})]})}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmation.isOpen,onClose:()=>setConfirmation(prev=>({...prev,isOpen:!1})),onConfirm:confirmation.onConfirm,onCancel:confirmation.onSecondary||(()=>setConfirmation(prev=>({...prev,isOpen:!1}))),title:confirmation.title,message:confirmation.message,type:confirmation.type,singleButton:confirmation.singleButton,confirmText:confirmation.confirmLabel,cancelText:confirmation.secondaryLabel})]})},EditorSidebar_default=EditorSidebar,SaveLocationWidget=({currentTags,selectedAlbumIds=[],onTagsChange,onAlbumIdsChange,customAlbums,onCreateAlbum,onDeleteAlbum,mode})=>{let[tagInput,setTagInput]=(0,import_react.useState)(``),[albumSearch,setAlbumSearch]=(0,import_react.useState)(``),handleTagKeyDown=e$4=>{if(e$4.key===`Enter`&&tagInput.trim()){e$4.preventDefault();let newTag=tagInput.trim().replace(/^#/,``);if(!newTag)return;currentTags.includes(newTag)||onTagsChange([...currentTags,newTag]),setTagInput(``)}},removeTag=tagToRemove=>{onTagsChange(currentTags.filter(tag=>tag!==tagToRemove))},getAlbumPath=albumId=>{let album=customAlbums.find(a$4=>a$4.id===albumId);if(!album)return``;if(album.parentId){let parent=customAlbums.find(a$4=>a$4.id===album.parentId);if(parent)return`${parent.name} > ${album.name}`}return album.name},filteredAlbums=customAlbums,missingTagsForCreation=[];if(albumSearch.trim()){let lowerSearch=albumSearch.toLowerCase(),directMatches=customAlbums.filter(album=>album.name.toLowerCase().includes(lowerSearch)||album.tag&&album.tag.toLowerCase().includes(lowerSearch)),childMatches=customAlbums.filter(album=>album.parentId&&directMatches.some(parent=>parent.id===album.parentId)),combined=[...directMatches,...childMatches];filteredAlbums=Array.from(new Set(combined.map(a$4=>a$4.id))).map(id$3=>combined.find(a$4=>a$4.id===id$3))}else if(currentTags.length>0&&mode===`AUTO`){let tagMatches=customAlbums.filter(album=>currentTags.some(tag=>album.name===tag||album.tag===tag)),childMatches=customAlbums.filter(album=>album.parentId&&tagMatches.some(parent=>parent.id===album.parentId)),combined=[...tagMatches,...childMatches];filteredAlbums=Array.from(new Set(combined.map(a$4=>a$4.id))).map(id$3=>combined.find(a$4=>a$4.id===id$3)),missingTagsForCreation=currentTags.filter(tag=>!customAlbums.some(album=>album.name===tag||album.tag===tag))}else filteredAlbums=customAlbums;filteredAlbums=[...filteredAlbums].sort((a$4,b$3)=>{let aSelected=selectedAlbumIds.some(id$3=>String(id$3)===String(a$4.id));return aSelected===selectedAlbumIds.some(id$3=>String(id$3)===String(b$3.id))?0:aSelected?-1:1});let toggleAlbum=id$3=>{let strId=String(id$3);selectedAlbumIds.some(existingId=>String(existingId)===strId)?onAlbumIdsChange(selectedAlbumIds.filter(i$4=>String(i$4)!==strId)):onAlbumIdsChange([...selectedAlbumIds,strId])},handleCreateAlbum=async tagName=>{let input=tagName.trim();if(!input)return;let newTag=input.replace(/^#/,``),newId$1=await onCreateAlbum(newTag,[newTag]);newId$1&&(onAlbumIdsChange([...selectedAlbumIds,newId$1]),albumSearch&&setAlbumSearch(``))},handleToggleAll=()=>{selectedAlbumIds.length>0?onAlbumIdsChange([]):onAlbumIdsChange(filteredAlbums.map(a$4=>a$4.id))};import_react.useEffect(()=>{if(mode===`AUTO`&&currentTags.length>0&&!albumSearch.trim()){let autoSelectIds=filteredAlbums.map(a$4=>a$4.id),combined=Array.from(new Set([...selectedAlbumIds,...autoSelectIds]));combined.length!==selectedAlbumIds.length&&onAlbumIdsChange(combined)}else mode===`AUTO`&&currentTags.length},[currentTags,customAlbums.length,albumSearch,mode]);let visibleIds=new Set(filteredAlbums.map(a$4=>a$4.id)),hiddenSelectedIds=selectedAlbumIds.filter(id$3=>!visibleIds.has(id$3));return(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-white rounded-xl shadow-sm border border-gray-100 p-4 ${mode===`MANUAL`?`opacity-50 pointer-events-none grayscale`:``}`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`font-bold text-gray-800 mb-3 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Hash,{size:18,className:`text-indigo-500`}),`  `,mode===`MANUAL`&&(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-normal text-gray-500`,children:`(   )`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`relative mb-3`,children:(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:tagInput,onChange:e$4=>setTagInput(e$4.target.value),onKeyDown:handleTagKeyDown,placeholder:`  (Enter )`,disabled:mode===`MANUAL`,className:`w-full pl-3 pr-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all disabled:bg-gray-100`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[currentTags.map(tag=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-700 text-sm font-medium rounded-full shadow-sm hover:bg-indigo-100 transition-colors`,children:[(0,import_jsx_runtime.jsxs)(`span`,{children:[`#`,tag]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>removeTag(tag),disabled:mode===`MANUAL`,className:`w-4 h-4 rounded-full flex items-center justify-center hover:bg-indigo-200 text-indigo-500 disabled:pointer-events-none`,children:(0,import_jsx_runtime.jsx)(X,{size:10,strokeWidth:3})})]},tag)),currentTags.length===0&&(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-gray-400 py-1`,children:`  .`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-white rounded-xl shadow-sm border border-gray-100 p-4 ${mode===`AUTO`?`opacity-70 pointer-events-none`:``}`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`font-bold text-gray-800 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(FolderOpen,{size:18,className:`text-indigo-500`}),`   `,mode===`AUTO`&&(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-normal text-gray-500`,children:`( )`})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleToggleAll,disabled:mode===`AUTO`,className:`text-xs font-medium text-gray-400 hover:text-gray-600 underline decoration-gray-300 underline-offset-2 transition-colors disabled:pointer-events-none`,children:selectedAlbumIds.length>0?` `:` `})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`relative mb-4`,children:(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:albumSearch,onChange:e$4=>setAlbumSearch(e$4.target.value),placeholder:`     ...`,disabled:mode===`AUTO`,className:`w-full pl-3 pr-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all disabled:bg-gray-100`})}),hiddenSelectedIds.length>0&&(0,import_jsx_runtime.jsx)(`div`,{className:`mb-3 space-y-2`,children:hiddenSelectedIds.map(id$3=>{let album=customAlbums.find(a$4=>a$4.id===id$3);if(!album)return null;let pathName=getAlbumPath(id$3),recordCount=album.postCount??0,folderCount=album.folderCount??0;return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between p-3 rounded-xl border border-indigo-200 bg-indigo-50/50`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3 flex-1`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-lg flex items-center justify-center bg-indigo-100 text-indigo-600`,children:album.parentId?(0,import_jsx_runtime.jsx)(Folder,{size:16}):(0,import_jsx_runtime.jsx)(Book,{size:16})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-bold text-indigo-900`,children:pathName}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-xs text-gray-400 flex items-center gap-1`,children:[(0,import_jsx_runtime.jsxs)(`span`,{children:[`#`,album.tag||``]}),!album.parentId&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`span`,{children:``}),(0,import_jsx_runtime.jsxs)(`span`,{children:[` `,folderCount]})]}),(0,import_jsx_runtime.jsx)(`span`,{children:``}),(0,import_jsx_runtime.jsxs)(`span`,{children:[` `,recordCount]})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-5 h-5 rounded-full border border-indigo-500 bg-indigo-500 flex items-center justify-center`,children:(0,import_jsx_runtime.jsx)(Check,{size:12,className:`text-white`})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>toggleAlbum(id$3),disabled:mode===`AUTO`,className:`p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:14})})]})]},id$3)})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2 max-h-48 overflow-y-auto pr-1 custom-scrollbar`,children:[filteredAlbums.map(album=>{let isSelected=selectedAlbumIds.some(id$3=>String(id$3)===String(album.id)),pathName=getAlbumPath(album.id),recordCount=album.postCount??0,folderCount=album.folderCount??0;return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between p-3 rounded-xl border transition-all mb-2 ${isSelected?`bg-indigo-50 border-indigo-200 ring-1 ring-indigo-500/20`:`bg-white border-gray-100 hover:bg-gray-50`}`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3 flex-1 ${mode===`AUTO`?``:`cursor-pointer`}`,onClick:()=>mode!==`AUTO`&&toggleAlbum(album.id),children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-lg flex items-center justify-center ${isSelected?`bg-indigo-100 text-indigo-600`:`bg-gray-100 text-gray-400`}`,children:album.parentId?(0,import_jsx_runtime.jsx)(Folder,{size:16}):(0,import_jsx_runtime.jsx)(Book,{size:16})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-bold ${isSelected?`text-indigo-900`:`text-gray-700`}`,children:pathName}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-xs text-gray-400 flex items-center gap-1`,children:[(0,import_jsx_runtime.jsxs)(`span`,{children:[`#`,album.tag||``]}),!album.parentId&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`span`,{children:``}),(0,import_jsx_runtime.jsxs)(`span`,{children:[` `,folderCount]})]}),(0,import_jsx_runtime.jsx)(`span`,{children:``}),(0,import_jsx_runtime.jsxs)(`span`,{children:[` `,recordCount]})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`div`,{onClick:()=>mode!==`AUTO`&&toggleAlbum(album.id),className:`w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${mode===`AUTO`?``:`cursor-pointer`} ${isSelected?`bg-indigo-500 border-indigo-500`:`bg-white border-gray-300`}`,children:isSelected&&(0,import_jsx_runtime.jsx)(Check,{size:12,className:`text-white`})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),confirm(`'${album.name}'  ?`)&&onDeleteAlbum(album.id)},disabled:mode===`AUTO`,className:`p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:pointer-events-none`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:14})})]})]},album.id)}),missingTagsForCreation.map(tag=>(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>handleCreateAlbum(tag),className:`flex items-center gap-3 p-3 rounded-xl border border-dashed border-indigo-300 bg-indigo-50/50 cursor-pointer hover:bg-indigo-50 transition-colors mb-2 group ${mode===`AUTO`?`pointer-events-none opacity-50`:``}`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-lg flex items-center justify-center bg-indigo-100 text-indigo-600 group-hover:bg-indigo-200 transition-colors`,children:(0,import_jsx_runtime.jsx)(Sparkles,{size:16})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col`,children:[(0,import_jsx_runtime.jsxs)(`span`,{className:`text-sm font-bold text-indigo-900 flex items-center gap-1.5`,children:[`'`,tag,`'  `,(0,import_jsx_runtime.jsx)(`span`,{className:`px-1.5 py-0.5 text-[10px] bg-red-500 text-white rounded-full font-bold`,children:`NEW`})]}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-indigo-600/70`,children:`    .`})]})]},`create-${tag}`)),albumSearch&&!filteredAlbums.some(a$4=>a$4.name===albumSearch)&&(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>handleCreateAlbum(albumSearch),className:`flex items-center gap-3 p-3 rounded-xl border border-dashed border-indigo-300 bg-indigo-50/50 cursor-pointer hover:bg-indigo-50 transition-colors mb-2 group`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-lg flex items-center justify-center bg-indigo-100 text-indigo-600 group-hover:bg-indigo-200 transition-colors`,children:(0,import_jsx_runtime.jsx)(Sparkles,{size:16})}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-col`,children:(0,import_jsx_runtime.jsxs)(`span`,{className:`text-sm font-bold text-indigo-900 flex items-center gap-1.5`,children:[`'`,albumSearch,`'  `,(0,import_jsx_runtime.jsx)(`span`,{className:`px-1.5 py-0.5 text-[10px] bg-red-500 text-white rounded-full font-bold`,children:`NEW`})]})})]}),filteredAlbums.length===0&&missingTagsForCreation.length===0&&!albumSearch&&(0,import_jsx_runtime.jsx)(`div`,{className:`text-center py-6 text-gray-400 text-sm bg-gray-50 rounded-lg border border-dashed border-gray-200`,children:`  .`})]})]})]})},SaveLocationWidget_default=SaveLocationWidget,SavePostModal=({isOpen,onClose,onConfirm,currentTags,onTagsChange,customAlbums,isSaving,selectedAlbumIds,onAlbumIdsChange,onCreateAlbum,onDeleteAlbum,mode,setMode,isFavorite,setIsFavorite,isPublic,setIsPublic})=>isOpen?(0,import_jsx_runtime.jsx)(AnimatePresence,{children:(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm`,children:(0,import_jsx_runtime.jsxs)(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`bg-[var(--bg-card)] rounded-2xl shadow-xl w-full max-w-md overflow-hidden flex flex-col max-h-[90vh]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`px-6 py-4 border-b border-[var(--border-color)] flex items-center justify-between bg-[var(--bg-card)]`,children:[(0,import_jsx_runtime.jsxs)(`h2`,{className:`text-lg font-bold text-[var(--text-primary)] flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Save,{size:20,className:`text-indigo-600`}),` `]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-2 hover:bg-[var(--bg-card-secondary)] rounded-full text-[var(--text-secondary)] transition-colors`,children:(0,import_jsx_runtime.jsx)(X,{size:20})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-6 overflow-y-auto bg-[var(--bg-primary)] space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-white rounded-xl shadow-sm border border-gray-100 p-4 space-y-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-gray-800`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex bg-gray-100 p-1 rounded-lg`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setMode(`AUTO`),className:`px-3 py-1.5 text-sm font-bold rounded-md transition-all ${mode===`AUTO`?`bg-white text-indigo-600 shadow-sm`:`text-gray-500 hover:text-gray-700`}`,children:` (AUTO)`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setMode(`MANUAL`),className:`px-3 py-1.5 text-sm font-bold rounded-md transition-all ${mode===`MANUAL`?`bg-white text-indigo-600 shadow-sm`:`text-gray-500 hover:text-gray-700`}`,children:` (MANUAL)`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between border-t border-gray-100 pt-4`,children:[(0,import_jsx_runtime.jsxs)(`span`,{className:`font-bold text-gray-800 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-yellow-500`,children:``}),` `]}),(0,import_jsx_runtime.jsxs)(`label`,{className:`relative inline-flex items-center cursor-pointer`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,className:`sr-only peer`,checked:isFavorite,onChange:e$4=>setIsFavorite(e$4.target.checked)}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-400`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between border-t border-gray-100 pt-4`,children:[(0,import_jsx_runtime.jsxs)(`span`,{className:`font-bold text-gray-800 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-indigo-500`,children:``}),`  `]}),(0,import_jsx_runtime.jsxs)(`label`,{className:`relative inline-flex items-center cursor-pointer`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,className:`sr-only peer`,checked:isPublic,onChange:e$4=>setIsPublic(e$4.target.checked)}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500`})]})]})]}),(0,import_jsx_runtime.jsx)(SaveLocationWidget_default,{currentTags,onTagsChange,customAlbums,selectedAlbumIds,onAlbumIdsChange,onCreateAlbum,onDeleteAlbum,mode}),mode===`MANUAL`&&selectedAlbumIds.length===0&&(0,import_jsx_runtime.jsxs)(`div`,{className:`p-3 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3`,children:[(0,import_jsx_runtime.jsx)(CircleAlert,{size:20,className:`text-amber-500 shrink-0 mt-0.5`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-sm text-amber-800`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold`,children:`:`}),`   .`]})]}),mode===`AUTO`&&currentTags.length===0&&(0,import_jsx_runtime.jsxs)(`div`,{className:`p-3 bg-blue-50 border border-blue-200 rounded-xl flex items-start gap-3`,children:[(0,import_jsx_runtime.jsx)(CircleAlert,{size:20,className:`text-blue-500 shrink-0 mt-0.5`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-sm text-blue-800`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold`,children:`Info:`}),`     .`]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`px-6 py-4 border-t border-[var(--border-color)] bg-[var(--bg-card)] flex justify-end gap-3`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`px-4 py-2 text-sm font-bold text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)] rounded-xl transition-colors`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onConfirm,disabled:isSaving,className:`px-6 py-2 text-sm font-bold bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-md shadow-indigo-200 transition-all flex items-center gap-2 disabled:opacity-50`,children:isSaving?(0,import_jsx_runtime.jsx)(import_jsx_runtime.Fragment,{children:(0,import_jsx_runtime.jsx)(`span`,{children:` ...`})}):(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(Save,{size:16}),(0,import_jsx_runtime.jsx)(`span`,{children:` `})]})})]})]})})}):null,SavePostModal_default=SavePostModal,InputModal=({isOpen,onClose,onConfirm,title,message,placeholder=``,defaultValue:defaultValue$3=``,confirmText=``,cancelText=``})=>{let[value,setValue]=(0,import_react.useState)(defaultValue$3),inputRef=(0,import_react.useRef)(null);(0,import_react.useEffect)(()=>{isOpen&&(setValue(defaultValue$3),setTimeout(()=>inputRef.current?.focus(),100))},[isOpen,defaultValue$3]);let handleConfirm=()=>{value.trim()&&(onConfirm(value),onClose())};return isOpen?(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] w-full max-w-sm rounded-2xl overflow-hidden shadow-2xl border border-[var(--border-color)] animate-in zoom-in-95 duration-200`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`p-5 border-b border-[var(--border-color)] flex justify-between items-center bg-[var(--bg-card-secondary)]`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold text-[var(--text-primary)]`,children:title}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-1 hover:bg-black/10 rounded-full transition-colors`,children:(0,import_jsx_runtime.jsx)(X,{size:18,className:`text-[var(--text-secondary)]`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-5 flex flex-col gap-4`,children:[message&&(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm text-[var(--text-secondary)] whitespace-pre-wrap`,children:message}),(0,import_jsx_runtime.jsx)(`input`,{ref:inputRef,value,onChange:e$4=>setValue(e$4.target.value),onKeyDown:e$4=>{e$4.key===`Enter`?(e$4.preventDefault(),handleConfirm()):e$4.key===`Escape`&&onClose()},placeholder,className:`w-full p-3 bg-[var(--bg-card-secondary)] border border-[var(--border-color)] rounded-xl outline-none focus:border-[var(--btn-bg)] focus:ring-1 focus:ring-[var(--btn-bg)] transition-all text-[var(--text-primary)]`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 justify-end mt-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`px-4 py-2 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-xl text-sm font-bold text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)] transition-colors`,children:cancelText}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:handleConfirm,disabled:!value.trim(),className:`px-4 py-2 bg-[var(--btn-bg)] text-[var(--btn-text)] rounded-xl text-sm font-bold hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Check,{size:16}),confirmText]})]})]})]})}):null},InputModal_default=InputModal,PostEditorView=({editor,handleImagesUpload})=>{let[isSaveModalOpen,setIsSaveModalOpen]=import_react.useState(!1),canvasRef=import_react.useRef(null),[templateInputModal,setTemplateInputModal]=import_react.useState({isOpen:!1,defaultValue:``}),{setViewMode,blocks,setBlocks,addFloatingText,addFloatingImage,addSticker,addWidgetSticker,isPublic,setIsPublic,rawInput,setRawInput,selectedLayoutId,setSelectedLayoutId,tempImages,setTempImages,fileInputRef,isAiProcessing,handleAiGenerate,currentTags,setTags,applyPaperPreset,myTemplates,applyTemplate,selectedId,selectedType,handleUpdate,handleDelete,handleBlockImageUpload,handleSaveAsTemplate,paperStyles,title,setTitle,titleStyles,handleSave,currentPostId,selectedAlbumId,handleDeleteTemplate,showHiddenTemplates,setShowHiddenTemplates,handleRestoreTemplate}=editor,checkSoloActivityRestriction=()=>{let restrictedTags=[``,``,`rolling-paper`,`exchange-diary`];return editor.currentTags.some(tag=>restrictedTags.includes(tag))?(editor.showConfirmModal(` `,`    .
     .`,`danger`,void 0,!0),!0):!1};return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col xl:flex-row h-auto min-h-[85vh] gap-6 relative`,children:[(0,import_jsx_runtime.jsx)(InputModal_default,{isOpen:templateInputModal.isOpen,onClose:()=>setTemplateInputModal(prev=>({...prev,isOpen:!1})),onConfirm:async name=>{if(canvasRef.current)try{let dataUrl=await domToPng(canvasRef.current,{scale:.5});if(dataUrl){let blob=await(await fetch(dataUrl)).blob();handleSaveAsTemplate(name,await uploadImageToSupabase(new File([blob],`tmpl-${Date.now()}.png`,{type:`image/png`}))||void 0)}else handleSaveAsTemplate(name)}catch(e$4){console.warn(`Thumbnail capture failed`,e$4),handleSaveAsTemplate(name)}else handleSaveAsTemplate(name)},title:` `,message:`  ' ' ?`,placeholder:`  `,confirmText:``}),(0,import_jsx_runtime.jsx)(EditorCanvas_default,{ref:canvasRef,title,setTitle,titleStyles,viewMode:`editor`,blocks,setBlocks,stickers:editor.stickers,floatingTexts:editor.floatingTexts,floatingImages:editor.floatingImages,selectedId,selectedType,onSelect:(id$3,type)=>{editor.setSelectedId(id$3),editor.setSelectedType(type)},onUpdate:(id$3,_$1,changes)=>handleUpdate(id$3,changes),onDelete:()=>{selectedId&&handleDelete(selectedId)},onBlockImageUpload:(id$3,file)=>handleBlockImageUpload(file,id$3),onBackgroundClick:()=>{editor.setSelectedId(null),editor.setSelectedType(null)},paperStyles}),(0,import_jsx_runtime.jsx)(EditorSidebar_default,{isSaving:editor.isSaving,onSave:()=>{if(!title.trim()){editor.showConfirmModal(` `,` !`,`danger`,void 0,!0);return}if(!(blocks.some(b$3=>b$3.text?.trim()||b$3.imageUrl||b$3.imageUrl2)||editor.stickers.length>0||editor.floatingTexts.length>0||editor.floatingImages.length>0)){editor.showConfirmModal(` `,` !`,`danger`,void 0,!0);return}setIsSaveModalOpen(!0)},onTempSave:async()=>{let result=await handleSave(!0);result?.message&&editor.showConfirmModal(result.success?` `:` `,result.success?(0,import_jsx_runtime.jsxs)(`div`,{className:`text-center`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:` .`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`mt-2 flex items-center justify-center gap-1.5 flex-wrap`,children:[(0,import_jsx_runtime.jsx)(`button`,{className:`px-2 py-0.5 rounded-md text-xs font-bold bg-[var(--btn-bg)] text-[var(--btn-text)] shadow-sm`,children:`#`}),(0,import_jsx_runtime.jsx)(`span`,{children:`  .`})]})]}):result.message,result.type||(result.success?`success`:`danger`),void 0,!0)},onCancel:()=>{let proceed=()=>{let isDraft=currentTags.includes(``);setViewMode(currentPostId&&!isDraft?`read`:selectedAlbumId&&selectedAlbumId!==`__all__`&&selectedAlbumId!==`__others__`?`folder`:`album`)};editor.isDirty?editor.showConfirmModal(` `,`    .  ?`,`danger`,proceed):proceed()},onAddBlock:()=>setBlocks([...blocks,{id:`m-${Date.now()}`,type:`paragraph`,text:``}]),onAddFloatingText:addFloatingText,onAddSticker:addSticker,onAddFloatingImage:addFloatingImage,onAddWidgetSticker:addWidgetSticker,isPublic,setIsPublic,rawInput,setRawInput,selectedLayoutId,setSelectedLayoutId,tempImages,setTempImages,fileInputRef,handleImagesUpload,onAiGenerate:handleAiGenerate,isAiProcessing,currentTags,onTagsChange:setTags,applyPaperPreset,onSaveAsTemplate:()=>{setTemplateInputModal({isOpen:!0,defaultValue:``})},myTemplates,applyTemplate,onDeleteTemplate:handleDeleteTemplate,showHiddenTemplates,setShowHiddenTemplates,onRestoreTemplate:handleRestoreTemplate}),(0,import_jsx_runtime.jsx)(SavePostModal_default,{isOpen:isSaveModalOpen,onClose:()=>setIsSaveModalOpen(!1),onConfirm:async()=>{if(checkSoloActivityRestriction())return;let result=await editor.handleSave();setIsSaveModalOpen(!1),result?.message&&editor.showConfirmModal(result.success?` `:` `,result.message,result.type||(result.success?`success`:`danger`),void 0,!0)},currentTags,onTagsChange:setTags,customAlbums:editor.customAlbums,isSaving:editor.isSaving,selectedAlbumIds:editor.targetAlbumIds,onAlbumIdsChange:editor.setTargetAlbumIds,onCreateAlbum:editor.handleCreateAlbum,onDeleteAlbum:editor.handleDeleteAlbum,mode:editor.mode,setMode:editor.setMode,isFavorite:editor.isFavorite,setIsFavorite:editor.setIsFavorite,isPublic,setIsPublic})]})},PostEditorView_default=PostEditorView,PostCreateView=({editor,handleImagesUpload})=>{let[isSaveModalOpen,setIsSaveModalOpen]=import_react.useState(!1),canvasRef=import_react.useRef(null),[templateInputModal,setTemplateInputModal]=import_react.useState({isOpen:!1,defaultValue:``}),{setViewMode,blocks,setBlocks,addFloatingText,addFloatingImage,addSticker,addWidgetSticker:handleAddWidgetSticker,isPublic,setIsPublic,rawInput,setRawInput,selectedLayoutId,setSelectedLayoutId,tempImages,setTempImages,fileInputRef,isAiProcessing,handleAiGenerate,currentTags,setTags,applyPaperPreset,myTemplates,applyTemplate,selectedId,selectedIds,selectedType,handleSelect,handleUpdate,handleDelete,handleBlockImageUpload,handleSaveAsTemplate,paperStyles,title,setTitle,titleStyles,handleSave,handleDeleteTemplate,showHiddenTemplates,setShowHiddenTemplates,handleRestoreTemplate}=editor,checkSoloActivityRestriction=()=>{let restrictedTags=[``,``,`rolling-paper`,`exchange-diary`],hasRestrictedTag=editor.currentTags.some(tag=>restrictedTags.includes(tag)),hasRestrictedTitle=restrictedTags.some(keyword=>editor.title.includes(keyword));return hasRestrictedTag||hasRestrictedTitle?(editor.showConfirmModal(` `,`    .
[  > + ]  ''   .`,`danger`,void 0,!0),!0):!1};return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col xl:flex-row h-auto min-h-[85vh] gap-6 relative`,children:[(0,import_jsx_runtime.jsx)(InputModal_default,{isOpen:templateInputModal.isOpen,onClose:()=>setTemplateInputModal(prev=>({...prev,isOpen:!1})),onConfirm:async name=>{if(canvasRef.current)try{let dataUrl=await domToPng(canvasRef.current,{scale:.5});if(dataUrl){let blob=await(await fetch(dataUrl)).blob();handleSaveAsTemplate(name,await uploadImageToSupabase(new File([blob],`tmpl-${Date.now()}.png`,{type:`image/png`}))||void 0)}else handleSaveAsTemplate(name)}catch(e$4){console.warn(`Thumbnail capture failed`,e$4),handleSaveAsTemplate(name)}else handleSaveAsTemplate(name)},title:` `,message:`  ' ' ?`,placeholder:`  `,confirmText:``}),(0,import_jsx_runtime.jsx)(EditorCanvas_default,{ref:canvasRef,title,setTitle,titleStyles,viewMode:`editor`,blocks,setBlocks,stickers:editor.stickers,floatingTexts:editor.floatingTexts,floatingImages:editor.floatingImages,selectedId,selectedIds,selectedType,onSelect:(id$3,type,isMulti)=>{handleSelect(id$3,type,isMulti)},onUpdate:(id$3,_$1,changes)=>handleUpdate(id$3,changes),onDelete:()=>{selectedId&&handleDelete(selectedId)},onBlockImageUpload:(id$3,file)=>handleBlockImageUpload(file,id$3),onBackgroundClick:()=>{handleSelect(null,null)},paperStyles}),(0,import_jsx_runtime.jsx)(EditorSidebar_default,{isSaving:editor.isSaving,onSave:()=>{if(!title.trim()){editor.showConfirmModal(` `,` !`,`danger`,void 0,!0);return}if(!(blocks.some(b$3=>b$3.text?.trim()||b$3.imageUrl||b$3.imageUrl2)||editor.stickers.length>0||editor.floatingTexts.length>0||editor.floatingImages.length>0)){editor.showConfirmModal(` `,` !`,`danger`,void 0,!0);return}setIsSaveModalOpen(!0)},onTempSave:async()=>{let result=await handleSave(!0);result?.message&&editor.showConfirmModal(result.success?` `:` `,result.message,result.type||(result.success?`success`:`danger`),void 0,!0)},onCancel:()=>setViewMode(`album`),onAddBlock:()=>setBlocks([...blocks,{id:`m-${Date.now()}`,type:`paragraph`,text:``}]),onAddFloatingText:addFloatingText,onAddSticker:addSticker,onAddFloatingImage:addFloatingImage,onAddWidgetSticker:handleAddWidgetSticker,isPublic,setIsPublic,rawInput,setRawInput,selectedLayoutId,setSelectedLayoutId,tempImages,setTempImages,fileInputRef,handleImagesUpload,onAiGenerate:handleAiGenerate,isAiProcessing,currentTags,onTagsChange:setTags,applyPaperPreset,onSaveAsTemplate:()=>{setTemplateInputModal({isOpen:!0,defaultValue:``})},myTemplates,applyTemplate,onDeleteTemplate:handleDeleteTemplate,showHiddenTemplates,setShowHiddenTemplates,onRestoreTemplate:handleRestoreTemplate}),(0,import_jsx_runtime.jsx)(SavePostModal_default,{isOpen:isSaveModalOpen,onClose:()=>setIsSaveModalOpen(!1),onConfirm:async()=>{if(checkSoloActivityRestriction())return;let result=await editor.handleSave();setIsSaveModalOpen(!1),result?.message&&editor.showConfirmModal(result.success?` `:` `,result.message,result.type||(result.success?`success`:`danger`),void 0,!0)},currentTags:editor.currentTags,onTagsChange:editor.setTags,customAlbums:editor.customAlbums,isSaving:editor.isSaving,selectedAlbumIds:editor.targetAlbumIds,onAlbumIdsChange:editor.setTargetAlbumIds,onCreateAlbum:editor.handleCreateAlbum,onDeleteAlbum:editor.handleDeleteAlbum,mode:editor.mode,setMode:editor.setMode,isFavorite:editor.isFavorite,setIsFavorite:editor.setIsFavorite,isPublic:editor.isPublic,setIsPublic:editor.setIsPublic})]})},PostCreateView_default=PostCreateView,RenameAlbumModal=({isOpen,onClose,onSave,currentName,showConfirmModal})=>{let[name,setName]=(0,import_react.useState)(currentName);if((0,import_react.useEffect)(()=>{isOpen&&setName(currentName)},[isOpen,currentName]),!isOpen)return null;let handleSave=()=>{if(!name.trim()){showConfirmModal?showConfirmModal(` `,`  .`,`danger`,void 0,!0):alert(`  .`);return}onSave(name),onClose()};return(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in`,onClick:onClose,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] rounded-2xl w-full max-w-sm p-6 shadow-2xl transform transition-all animate-scale-up`,onClick:e$4=>e$4.stopPropagation(),children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center mb-6`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xl font-bold text-[var(--text-primary)]`,children:`  `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition`,children:(0,import_jsx_runtime.jsx)(X,{size:24})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-5`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-sm font-bold text-[var(--text-secondary)] mb-2`,children:` `}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:name,onChange:e$4=>setName(e$4.target.value),onKeyDown:e$4=>{e$4.key===`Enter`&&handleSave()},autoFocus:!0,placeholder:`  `,className:`w-full px-4 py-3 rounded-xl border border-[var(--border-color)] bg-[var(--bg-primary)] text-[var(--text-primary)] focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3 mt-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`flex-1 py-3 px-4 bg-[var(--bg-card-secondary)] text-[var(--text-secondary)] rounded-xl font-bold hover:bg-[var(--border-color)] transition`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleSave,className:`flex-1 py-3 px-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition`,children:``})]})]})]})})},RenameAlbumModal_default=RenameAlbumModal,svgColor=color$2=>encodeURIComponent(color$2);const PATTERN_SHAPES=[{id:`damask`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 0 Q30 10 40 0 Q30 10 20 20 Q10 10 0 0 Q10 10 20 0 M20 40 Q30 30 40 40 Q30 30 20 20 Q10 30 0 40 Q10 30 20 40' stroke='${svgColor(color$2)}' stroke-width='1' fill='none'/%3E%3Ccircle cx='20' cy='20' r='3' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`40px 40px`},{id:`arabesque`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M15 0 C22 5 22 25 15 30 C8 25 8 5 15 0 Z M0 15 C5 22 25 22 30 15 C25 8 5 8 0 15 Z' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`maze`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0 H10 V10 H20 V20 H10 V10 H0 Z' fill='none' stroke='${svgColor(color$2)}' stroke-width='2'/%3E%3C/svg%3E")`,size:`20px 20px`},{id:`hex-maze`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='28' viewBox='0 0 24 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 0 L24 7 V21 L12 28 L0 21 V7 Z' fill='none' stroke='${svgColor(color$2)}' stroke-width='1'/%3E%3Cpath d='M12 8 L18 11.5 V18.5 L12 22 L6 18.5 V11.5 Z' fill='${svgColor(color$2)}' fill-opacity='0.3'/%3E%3C/svg%3E")`,size:`24px 28px`},{id:`seigaiha`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='10' cy='10' r='7' stroke='${svgColor(color$2)}' stroke-width='1' fill='none'/%3E%3Ccircle cx='0' cy='20' r='7' stroke='${svgColor(color$2)}' stroke-width='1' fill='none'/%3E%3Ccircle cx='20' cy='20' r='7' stroke='${svgColor(color$2)}' stroke-width='1' fill='none'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`houndstooth`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0 L10 10 L20 0 L20 20 L0 20 Z M0 10 L10 20 L10 0 L0 0 Z' fill='${svgColor(color$2)}' fill-opacity='0.5'/%3E%3Cpath d='M0 0 L10 10 L0 20 Z' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`20px 20px`},{id:`diamond`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 0 L20 10 L10 20 L0 10 Z' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`24px 24px`},{id:`ornament`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M15 0 Q20 10 30 15 Q20 20 15 30 Q10 20 0 15 Q10 10 15 0' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`tic-tac-toe`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='32' height='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 16 H32 M16 0 V32' stroke='${svgColor(color$2)}' stroke-width='1' fill='none'/%3E%3Ccircle cx='8' cy='8' r='3' stroke='${svgColor(color$2)}' fill='none'/%3E%3Cpath d='M21 21 L27 27 M27 21 L21 27' stroke='${svgColor(color$2)}' stroke-width='1'/%3E%3C/svg%3E")`,size:`32px 32px`},{id:`scales`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0 Q 10 10 20 0' stroke='${svgColor(color$2)}' fill='none'/%3E%3Cpath d='M0 10 Q 10 20 20 10' stroke='${svgColor(color$2)}' fill='none'/%3E%3C/svg%3E")`,size:`20px 20px`},{id:`bamboo`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='40' viewBox='0 0 20 40' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='8' y='0' width='4' height='40' rx='2' fill='${svgColor(color$2)}'/%3E%3Cpath d='M0 20 Q10 25 20 20' stroke='${svgColor(color$2)}' fill='none' stroke-width='1'/%3E%3C/svg%3E")`,size:`20px 40px`},{id:`geometric-flower`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='20' cy='20' r='10' stroke='${svgColor(color$2)}' fill='none' stroke-width='1'/%3E%3Cpath d='M20 0 Q25 20 20 40 Q15 20 20 0 M0 20 Q20 25 40 20 Q20 15 0 20' stroke='${svgColor(color$2)}' fill='none' stroke-width='1'/%3E%3C/svg%3E")`,size:`40px 40px`},{id:`zigzag`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 10 L10 0 L20 10 L10 20 Z' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`20px 20px`},{id:`art-deco`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 40 C31 40 40 31 40 20 M0 20 C0 31 9 40 20 40' stroke='${svgColor(color$2)}' fill='none' stroke-width='1'/%3E%3Cpath d='M20 35 C28 35 35 28 35 20 M5 20 C5 28 12 35 20 35' stroke='${svgColor(color$2)}' fill='none' stroke-width='1'/%3E%3C/svg%3E")`,size:`40px 40px`},{id:`moroccan`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='32' height='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M16 0 Q20 8 32 8 Q24 12 24 20 Q28 28 16 32 Q4 28 8 20 Q8 12 0 8 Q12 8 16 0' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3C/svg%3E")`,size:`32px 32px`},{id:`greek-key`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 5 H25 V25 H10 V10 H20 V15 H15' stroke='${svgColor(color$2)}' fill='none' stroke-width='2'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`royal`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 5 L23 15 L33 15 L25 21 L28 31 L20 25 L12 31 L15 21 L7 15 H17 Z' stroke='${svgColor(color$2)}' fill='none' stroke-width='1'/%3E%3Ccircle cx='20' cy='20' r='15' stroke='${svgColor(color$2)}' fill='none' stroke-width='1'/%3E%3C/svg%3E")`,size:`40px 40px`},{id:`celtic`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='5' y='5' width='30' height='30' rx='5' stroke='${svgColor(color$2)}' fill='none' stroke-width='2'/%3E%3Cpath d='M5 20 H35 M20 5 V35' stroke='${svgColor(color$2)}' stroke-width='2'/%3E%3C/svg%3E")`,size:`40px 40px`},{id:`basket`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='0' y='0' width='10' height='10' fill='${svgColor(color$2)}' fill-opacity='0.2'/%3E%3Crect x='10' y='10' width='10' height='10' fill='${svgColor(color$2)}' fill-opacity='0.2'/%3E%3Cpath d='M0 5 H10 M5 0 V10 M10 15 H20 M15 10 V20' stroke='${svgColor(color$2)}' stroke-width='1'/%3E%3C/svg%3E")`,size:`20px 20px`},{id:`hex-flower-complex`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='34' height='60' viewBox='0 0 34 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 0 L34 10 V30 L17 40 L0 30 V10 Z' stroke='${svgColor(color$2)}' fill='none'/%3E%3Cpath d='M17 20 L34 30 V50 L17 60 L0 50 V30 Z' stroke='${svgColor(color$2)}' fill='none'/%3E%3C/svg%3E")`,size:`34px 60px`},{id:`scales-fish`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 10 Q10 20 20 10 Q30 20 40 10' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Cpath d='M-10 0 Q0 10 10 0 Q20 10 30 0' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3C/svg%3E")`,size:`20px 20px`},{id:`tile-ornate`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='18' y='0' width='4' height='40' fill='${svgColor(color$2)}' opacity='0.5'/%3E%3Crect x='0' y='18' width='40' height='4' fill='${svgColor(color$2)}' opacity='0.5'/%3E%3Ccircle cx='20' cy='20' r='5' stroke='${svgColor(color$2)}' fill='none'/%3E%3Crect x='10' y='10' width='20' height='20' stroke='${svgColor(color$2)}' fill='none'/%3E%3C/svg%3E")`,size:`40px 40px`},{id:`loops`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='10' cy='10' r='8' stroke='${svgColor(color$2)}' fill='none'/%3E%3Ccircle cx='20' cy='10' r='8' stroke='${svgColor(color$2)}' fill='none'/%3E%3C/svg%3E")`,size:`20px 20px`},{id:`bubbles`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='5' cy='5' r='3' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='15' cy='15' r='2' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='15' cy='5' r='1' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`20px 20px`},{id:`paws`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='15' cy='20' r='5' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='10' cy='12' r='2' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='15' cy='10' r='2' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='20' cy='12' r='2' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`bows`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='20' viewBox='0 0 30 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M15 10 L5 5 V15 L15 10 L25 5 V15 Z' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='15' cy='10' r='2' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`30px 20px`},{id:`cherries`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='10' cy='20' r='4' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='20' cy='20' r='4' fill='${svgColor(color$2)}'/%3E%3Cpath d='M10 20 Q15 5 20 20 M15 5 L20 8' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`clouds-soft`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='40' height='20' viewBox='0 0 40 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 15 Q10 10 15 10 Q20 5 25 10 Q30 10 30 15' stroke='${svgColor(color$2)}' fill='none' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E")`,size:`40px 20px`},{id:`hearts-scatter`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 15 L8 13 Q5 10 5 8 Q5 5 8 5 Q9 5 10 7 Q11 5 12 5 Q15 5 15 8 Q15 10 12 13 Z' fill='${svgColor(color$2)}' transform='scale(0.5) translate(10,10)'/%3E%3C/svg%3E")`,size:`20px 20px`},{id:`smileys`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='15' cy='15' r='10' stroke='${svgColor(color$2)}' fill='none'/%3E%3Ccircle cx='12' cy='12' r='1' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='18' cy='12' r='1' fill='${svgColor(color$2)}'/%3E%3Cpath d='M10 18 Q15 22 20 18' stroke='${svgColor(color$2)}' fill='none'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`daisy`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='15' cy='15' r='3' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='15' cy='8' r='3' fill='none' stroke='${svgColor(color$2)}'/%3E%3Ccircle cx='15' cy='22' r='3' fill='none' stroke='${svgColor(color$2)}'/%3E%3Ccircle cx='8' cy='15' r='3' fill='none' stroke='${svgColor(color$2)}'/%3E%3Ccircle cx='22' cy='15' r='3' fill='none' stroke='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`teddy`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='15' cy='18' r='8' stroke='${svgColor(color$2)}' fill='none'/%3E%3Ccircle cx='8' cy='10' r='3' stroke='${svgColor(color$2)}' fill='none'/%3E%3Ccircle cx='22' cy='10' r='3' stroke='${svgColor(color$2)}' fill='none'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`candy`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='15' cy='15' r='6' stroke='${svgColor(color$2)}' fill='none'/%3E%3Cpath d='M9 15 H2 M21 15 H28' stroke='${svgColor(color$2)}'/%3E%3Cpath d='M15 9 V15' stroke='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`sparkles`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 0 L14 10 L24 12 L14 14 L12 24 L10 14 L0 12 L10 10 Z' fill='${svgColor(color$2)}' transform='scale(0.8) translate(3,3)'/%3E%3C/svg%3E")`,size:`24px 24px`},{id:`moon-dream`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 5 C10 5 15 5 18 10 C21 15 18 22 18 22' stroke='${svgColor(color$2)}' fill='none' stroke-width='2' stroke-linecap='round'/%3E%3Ccircle cx='22' cy='8' r='2' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`bunny`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='15' cy='18' r='6' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Cpath d='M11 14 L9 5 L13 12 M19 14 L21 5 L17 12' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5' stroke-linejoin='round'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`strawberry`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 22 C12 22 4 15 4 8 C4 5 7 2 12 2 C17 2 20 5 20 8 C20 15 12 22 12 22' fill='none' stroke='${svgColor(color$2)}' stroke-width='1.5'/%3E%3Cpath d='M8 2 Q12 8 16 2' stroke='${svgColor(color$2)}' fill='none'/%3E%3Ccircle cx='9' cy='10' r='0.5' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='15' cy='10' r='0.5' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='12' cy='15' r='0.5' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`24px 24px`},{id:`cupcake`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 15 L10 25 H20 L22 15' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Cpath d='M7 15 C7 10 10 5 15 5 C20 5 23 10 23 15' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Ccircle cx='15' cy='4' r='1.5' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`planet`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='40' height='30' viewBox='0 0 40 30' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='20' cy='15' r='8' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Cpath d='M5 20 Q20 5 35 15' stroke='${svgColor(color$2)}' fill='none' stroke-width='1'/%3E%3C/svg%3E")`,size:`40px 30px`},{id:`music-note`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='8' cy='18' r='3' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='18' cy='16' r='3' fill='${svgColor(color$2)}'/%3E%3Cpath d='M10 18 V6 L20 4 V16' stroke='${svgColor(color$2)}' stroke-width='1.5' fill='none'/%3E%3C/svg%3E")`,size:`24px 24px`},{id:`paper-plane`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 25 L10 15 L25 5 L15 20 L5 25 Z M25 5 L10 15' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5' stroke-linejoin='round'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`tulip`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='30' viewBox='0 0 24 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 20 V30 M12 20 Q7 10 7 5 Q12 10 17 5 Q17 10 12 20' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3C/svg%3E")`,size:`24px 30px`},{id:`chick`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='12' cy='14' r='6' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Ccircle cx='12' cy='8' r='4' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Cpath d='M15 8 L17 8' stroke='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`24px 24px`},{id:`butterfly`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 12 Q8 4 4 8 Q8 12 12 12 Q16 4 20 8 Q16 12 12 12 M12 12 Q8 20 4 16 Q8 12 12 12 Q16 20 20 16 Q16 12 12 12' stroke='${svgColor(color$2)}' fill='none' stroke-width='1'/%3E%3C/svg%3E")`,size:`24px 24px`},{id:`ghost`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4 20 Q4 22 6 22 H18 Q20 22 20 20 V10 Q20 2 12 2 Q4 2 4 10 V20 Z' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Ccircle cx='8' cy='10' r='1' fill='${svgColor(color$2)}'/%3E%3Ccircle cx='16' cy='10' r='1' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`24px 24px`},{id:`cat-face`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 10 L2 5 L8 7 M25 10 L28 5 L22 7' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Ccircle cx='15' cy='18' r='8' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Cpath d='M10 16 L12 18 L10 20 M20 16 L18 18 L20 20' stroke='${svgColor(color$2)}' fill='none' stroke-width='1'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`shooting-star`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 10 L15 15 M8 12 L12 16 M12 8 L16 12' stroke='${svgColor(color$2)}' stroke-width='1'/%3E%3Cpath d='M20 20 L22 26 L28 28 L22 30 L20 36 L18 30 L12 28 L18 26 Z' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`40px 40px`},{id:`rainbow`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='40' height='30' viewBox='0 0 40 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 25 Q20 5 35 25' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Cpath d='M8 25 Q20 10 32 25' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5' stroke-dasharray='2 2'/%3E%3C/svg%3E")`,size:`40px 30px`},{id:`balloon`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='40' viewBox='0 0 24 40' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='12' cy='12' r='8' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Cpath d='M12 20 V35' stroke='${svgColor(color$2)}' stroke-width='1' stroke-dasharray='2 1'/%3E%3C/svg%3E")`,size:`24px 40px`},{id:`envelope`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='3' y='8' width='24' height='16' rx='2' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Cpath d='M3 8 L15 18 L27 8' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`key-lock`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='8' y='12' width='14' height='10' rx='2' stroke='${svgColor(color$2)}' fill='none'/%3E%3Cpath d='M15 12 V8 Q15 5 11 5 Q7 5 7 8' stroke='${svgColor(color$2)}' fill='none'/%3E%3C/svg%3E")`,size:`30px 30px`},{id:`clover`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 12 Q12 6 8 6 Q4 6 4 10 Q4 12 12 12 M12 12 Q18 12 18 10 Q18 6 14 6 Q12 6 12 12 M12 12 Q12 18 14 18 Q18 18 18 14 Q18 12 12 12 M12 12 Q6 12 6 14 Q6 18 10 18 Q12 18 12 12' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3C/svg%3E")`,size:`24px 24px`},{id:`fish-bone`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='20' viewBox='0 0 30 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 10 L25 10 M10 10 L8 5 M10 10 L8 15 M15 10 L13 5 M15 10 L13 15 M20 10 L18 5 M20 10 L18 15' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Cpath d='M25 10 L28 7 M25 10 L28 13' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3C/svg%3E")`,size:`30px 20px`},{id:`socks`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 2 V12 Q8 16 12 16 H16 Q18 16 18 14 Q18 12 16 12 H14 V2 H8 Z' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3C/svg%3E")`,size:`24px 24px`},{id:`mitten`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 6 V16 Q8 20 12 20 Q16 20 16 16 V6 H8 Z M16 12 Q18 12 20 10' stroke='${svgColor(color$2)}' fill='none' stroke-width='1.5'/%3E%3Crect x='7' y='20' width='10' height='3' rx='1' fill='${svgColor(color$2)}'/%3E%3C/svg%3E")`,size:`24px 24px`},{id:`smile-flower`,name:``,generate:color$2=>`url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='15' cy='15' r='5' stroke='${svgColor(color$2)}' fill='none'/%3E%3Cpath d='M13 14 L13.5 14 M16.5 14 L17 14 M13 16 Q15 18 17 16' stroke='${svgColor(color$2)}' fill='none'/%3E%3Cpath d='M15 8 V5 M15 22 V25 M8 15 H5 M22 15 H25 M10 10 L8 8 M20 20 L22 22 M10 20 L8 22 M20 10 L22 8' stroke='${svgColor(color$2)}' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E")`,size:`30px 30px`}],COVER_ILLUSTRATIONS=[{id:`picnic-day`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='gingham' x='0' y='0' width='40' height='40' patternUnits='userSpaceOnUse'%3E%3Crect width='40' height='40' fill='%23fefce8'/%3E%3Crect width='20' height='20' fill='%23fecaca' opacity='0.5'/%3E%3Crect x='20' y='20' width='20' height='20' fill='%23fecaca' opacity='0.5'/%3E%3Crect x='20' y='0' width='20' height='20' fill='%23f87171' opacity='0.4'/%3E%3Crect x='0' y='20' width='20' height='20' fill='%23f87171' opacity='0.4'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23gingham)'/%3E%3Cpath d='M30 65 L70 65 L65 85 H35 Z' fill='%2392400e'/%3E%3Cpath d='M30 65 Q50 40 70 65' stroke='%2392400e' stroke-width='3' fill='none'/%3E%3Cpath d='M35 65 L65 65' stroke='%23fef3c7' stroke-width='2' stroke-dasharray='4'/%3E%3Ccircle cx='50' cy='65' r='5' fill='%23ef4444'/%3E%3C/svg%3E")`,spineColor:`#f87171`,previewColor:`#fef2f2`,textColor:`#991b1b`},{id:`night-sky`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%230f172a'/%3E%3Ccircle cx='10' cy='15' r='1' fill='white'/%3E%3Ccircle cx='85' cy='10' r='1.5' fill='white'/%3E%3Ccircle cx='50' cy='20' r='1' fill='white'/%3E%3Ccircle cx='25' cy='40' r='0.8' fill='white'/%3E%3Ccircle cx='90' cy='50' r='1' fill='white'/%3E%3Ccircle cx='15' cy='80' r='1.2' fill='white'/%3E%3Ccircle cx='70' cy='85' r='1' fill='white'/%3E%3Ccircle cx='40' cy='90' r='0.8' fill='white'/%3E%3Cpath d='M60 30 L63 38 L70 40 L63 42 L60 50 L57 42 L50 40 L57 38 Z' fill='%23fef3c7'/%3E%3Cpath d='M30 60 L31 63 L34 64 L31 65 L30 68 L29 65 L26 64 L29 63 Z' fill='white' opacity='0.7'/%3E%3C/svg%3E")`,spineColor:`#334155`,previewColor:`#0f172a`,textColor:`#f1f5f9`},{id:`strawberry-milk`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23fff1f2'/%3E%3Cpath d='M30 30 L70 30 L70 90 L30 90 Z' fill='%23fecaca' stroke='%23fb7185' stroke-width='2'/%3E%3Cpath d='M30 30 L50 10 L70 30' fill='%23fecaca' stroke='%23fb7185' stroke-width='2'/%3E%3Ctext x='50' y='60' font-family='sans-serif' font-size='10' fill='%23be123c' text-anchor='middle' font-weight='bold'%3EMILK%3C/text%3E%3Cpath d='M45 70 L48 74 L52 74 L49 78 L50 82 L46 79 L42 82 L43 78 L40 74 L44 74 Z' fill='%23e11d48' transform='scale(0.8) translate(10 10)'/%3E%3Ccircle cx='80' cy='20' r='5' fill='%23fda4af' opacity='0.5'/%3E%3Ccircle cx='15' cy='80' r='8' fill='%23fda4af' opacity='0.5'/%3E%3C/svg%3E")`,spineColor:`#fda4af`,previewColor:`#fff1f2`,textColor:`#9f1239`},{id:`peach-fuzz`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient id='p_bg' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%23fff7ed'/%3E%3Cstop offset='1' stop-color='%23ffedd5'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23p_bg)'/%3E%3Ccircle cx='50' cy='55' r='25' fill='%23fdba74'/%3E%3Cpath d='M50 30 Q60 20 70 30' stroke='%2315803d' stroke-width='2' fill='none'/%3E%3Cpath d='M50 30 Q40 40 30 35 Q40 20 50 30' fill='%2386efac'/%3E%3Ccircle cx='60' cy='50' r='10' fill='%23fb923c' opacity='0.3'/%3E%3C/svg%3E")`,spineColor:`#fdba74`,previewColor:`#ffedd5`,textColor:`#9a3412`},{id:`lemonade`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23fefce8'/%3E%3Ccircle cx='50' cy='50' r='30' fill='%23fef08a' stroke='%23ca8a04' stroke-width='2'/%3E%3Cpath d='M50 50 L50 20 M50 50 L75 35 M50 50 L75 65 M50 50 L50 80 M50 50 L25 65 M50 50 L25 35' stroke='%23ca8a04' stroke-width='1'/%3E%3Ccircle cx='50' cy='50' r='25' fill='none' stroke='white' stroke-width='1' stroke-dasharray='10 5'/%3E%3Cpath d='M70 20 L80 10' stroke='%23a3e635' stroke-width='3' stroke-linecap='round'/%3E%3Ccircle cx='20' cy='80' r='3' fill='%23a3e635' opacity='0.5'/%3E%3Ccircle cx='80' cy='20' r='4' fill='%23a3e635' opacity='0.5'/%3E%3C/svg%3E")`,spineColor:`#fde047`,previewColor:`#fef9c3`,textColor:`#854d0e`},{id:`cotton-candy`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23f0f9ff'/%3E%3Cpath d='M45 80 L55 80 L52 60 L48 60 Z' fill='%23d1d5db'/%3E%3Ccircle cx='40' cy='50' r='15' fill='%23fbcfe8'/%3E%3Ccircle cx='60' cy='50' r='15' fill='%23bae6fd'/%3E%3Ccircle cx='50' cy='40' r='15' fill='%23e9d5ff'/%3E%3Cpath d='M20 20 Q30 10 40 20' stroke='%23fbcfe8' stroke-width='2' fill='none' opacity='0.5'/%3E%3Cpath d='M80 80 Q70 90 60 80' stroke='%23bae6fd' stroke-width='2' fill='none' opacity='0.5'/%3E%3C/svg%3E")`,spineColor:`#f472b6`,previewColor:`#fce7f3`,textColor:`#831843`},{id:`cherry-blossom`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23fff1f2'/%3E%3Cpath d='M20 30 Q30 20 40 30 Q30 40 20 30 M80 70 Q90 60 100 70 Q90 80 80 70' fill='%23fbcfe8'/%3E%3Ccircle cx='50' cy='50' r='5' fill='%23fb7185'/%3E%3Cpath d='M50 50 Q70 30 80 50 Q60 70 50 50' fill='%23fda4af' opacity='0.8'/%3E%3Cpath d='M50 50 Q30 30 20 50 Q40 70 50 50' fill='%23fda4af' opacity='0.8'/%3E%3Cpath d='M50 50 Q30 70 40 90 Q60 60 50 50' fill='%23fda4af' opacity='0.8'/%3E%3C/svg%3E")`,spineColor:`#fda4af`,previewColor:`#fff1f2`,textColor:`#9f1239`},{id:`pudding-jiggle`,name:` `,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23fffbeb'/%3E%3Cpath d='M30 80 L35 40 Q50 35 65 40 L70 80 Z' fill='%23fcd34d'/%3E%3Cpath d='M35 40 Q50 35 65 40 L65 45 Q50 50 35 45 Z' fill='%2392400e'/%3E%3Ccircle cx='80' cy='85' r='5' fill='%23fca5a5' opacity='0.5'/%3E%3Ccircle cx='20' cy='20' r='5' fill='%23fca5a5' opacity='0.5'/%3E%3C/svg%3E")`,spineColor:`#fbbf24`,previewColor:`#fffbeb`,textColor:`#92400e`},{id:`avocado-green`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23ecfccb'/%3E%3Cpath d='M50 20 Q80 20 80 55 Q80 90 50 90 Q20 90 20 55 Q20 20 50 20' fill='%2365a30d'/%3E%3Ccircle cx='50' cy='65' r='12' fill='%233f6212'/%3E%3Cpath d='M50 30 Q65 30 65 55' stroke='%23bef264' stroke-width='2' fill='none' opacity='0.5'/%3E%3C/svg%3E")`,spineColor:`#84cc16`,previewColor:`#ecfccb`,textColor:`#365314`},{id:`space-planet`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%231e1b4b'/%3E%3Ccircle cx='50' cy='50' r='20' fill='%23fcd34d'/%3E%3Cpath d='M30 60 Q50 70 70 40' stroke='%23fda4af' stroke-width='4' fill='none'/%3E%3Ccircle cx='20' cy='20' r='2' fill='white'/%3E%3Ccircle cx='80' cy='80' r='2' fill='white'/%3E%3Ccircle cx='80' cy='20' r='1' fill='white'/%3E%3C/svg%3E")`,spineColor:`#4338ca`,previewColor:`#1e1b4b`,textColor:`#e0e7ff`},{id:`rainy-window`,name:` `,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%2394a3b8'/%3E%3Cpath d='M30 30 Q35 40 30 50' stroke='%23e0f2fe' stroke-width='2' fill='none'/%3E%3Cpath d='M60 40 Q65 50 60 60' stroke='%23e0f2fe' stroke-width='2' fill='none'/%3E%3Cpath d='M45 70 Q50 80 45 90' stroke='%23e0f2fe' stroke-width='2' fill='none'/%3E%3Crect x='10' y='10' width='80' height='80' stroke='%23334155' stroke-width='2' fill='none' rx='5'/%3E%3C/svg%3E")`,spineColor:`#64748b`,previewColor:`#94a3b8`,textColor:`#f1f5f9`},{id:`coffee-time`,name:`  `,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23fff7ed'/%3E%3Cpath d='M35 60 Q35 80 50 80 Q65 80 65 60 L65 40 L35 40 Z' fill='white' stroke='%23c2410c' stroke-width='2'/%3E%3Cpath d='M65 50 Q75 50 75 60 Q75 70 65 70' stroke='%23c2410c' stroke-width='2' fill='none'/%3E%3Cpath d='M40 30 Q45 20 40 10' stroke='%239a3412' stroke-width='1' fill='none' opacity='0.5'/%3E%3Cpath d='M50 35 Q55 25 50 15' stroke='%239a3412' stroke-width='1' fill='none' opacity='0.5'/%3E%3C/svg%3E")`,spineColor:`#fdba74`,previewColor:`#fff7ed`,textColor:`#7c2d12`},{id:`music-playlist`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23f5d0fe'/%3E%3Crect x='20' y='15' width='60' height='60' rx='4' fill='%23e879f9' shadow='blur'/%3E%3Ccircle cx='50' cy='45' r='15' stroke='white' stroke-width='2' fill='none'/%3E%3Ccircle cx='50' cy='45' r='5' fill='white'/%3E%3Crect x='20' y='82' width='60' height='4' rx='2' fill='white' opacity='0.5'/%3E%3Crect x='20' y='82' width='25' height='4' rx='2' fill='white'/%3E%3Ccircle cx='50' cy='45' r='2' fill='white'/%3E%3Cpath d='M42 43 V47 M58 43 V47' stroke='white' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E")`,spineColor:`#e879f9`,previewColor:`#f5d0fe`,textColor:`#701a75`},{id:`birthday-cake`,name:` `,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23fff1f2'/%3E%3Crect x='30' y='60' width='40' height='20' fill='%23fca5a5' rx='2'/%3E%3Crect x='35' y='45' width='30' height='15' fill='%23fda4af' rx='2'/%3E%3Crect x='48' y='30' width='4' height='15' fill='%23fcd34d'/%3E%3Ccircle cx='50' cy='25' r='3' fill='%23ef4444'/%3E%3Cpath d='M30 60 Q40 65 50 60 Q60 65 70 60' stroke='white' stroke-width='2' fill='none'/%3E%3Cpath d='M20 30 L22 32 L20 34 L18 32 Z' fill='%23fcd34d'/%3E%3Cpath d='M80 40 L82 42 L80 44 L78 42 Z' fill='%23fcd34d'/%3E%3Ccircle cx='25' cy='70' r='1.5' fill='%23fda4af'/%3E%3Ccircle cx='75' cy='20' r='2' fill='%23fda4af'/%3E%3Cpath d='M50 15 L51 12 L52 15 L51 18 Z' fill='%23fef3c7'/%3E%3C/svg%3E")`,spineColor:`#fca5a5`,previewColor:`#fff1f2`,textColor:`#be123c`},{id:`soft-clouds`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient id='sky' x1='0%25' y1='100%25' x2='0%25' y2='0%25'%3E%3Cstop offset='0%25' stop-color='%23bae6fd'/%3E%3Cstop offset='100%25' stop-color='%23eff6ff'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23sky)'/%3E%3Cpath d='M10 80 Q25 65 40 80 T70 80 T100 80 V100 H0 V80 Z' fill='white' opacity='0.8'/%3E%3Ccircle cx='20' cy='30' r='10' fill='white' opacity='0.6'/%3E%3Ccircle cx='40' cy='40' r='15' fill='white' opacity='0.6'/%3E%3Ccircle cx='70' cy='25' r='12' fill='white' opacity='0.6'/%3E%3C/svg%3E")`,spineColor:`#7dd3fc`,previewColor:`#e0f2fe`,textColor:`#0c4a6e`},{id:`teddy-bear`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23fef3c7'/%3E%3Ccircle cx='50' cy='60' r='25' fill='%23d97706'/%3E%3Ccircle cx='35' cy='45' r='8' fill='%23d97706'/%3E%3Ccircle cx='65' cy='45' r='8' fill='%23d97706'/%3E%3Ccircle cx='42' cy='58' r='3' fill='%2327272a'/%3E%3Ccircle cx='58' cy='58' r='3' fill='%2327272a'/%3E%3Cellipse cx='50' cy='65' rx='6' ry='4' fill='%23fffbeb'/%3E%3Ccircle cx='50' cy='64' r='2' fill='%2327272a'/%3E%3C/svg%3E")`,spineColor:`#f59e0b`,previewColor:`#fef3c7`,textColor:`#78350f`},{id:`lavender-field`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23f3e8ff'/%3E%3Cpath d='M50 90 V60 M20 90 V70 M80 90 V50' stroke='%23a855f7' stroke-width='1.5'/%3E%3Ccircle cx='50' cy='55' r='4' fill='%23d8b4fe'/%3E%3Ccircle cx='50' cy='48' r='3' fill='%23d8b4fe'/%3E%3Ccircle cx='50' cy='42' r='2' fill='%23d8b4fe'/%3E%3Ccircle cx='20' cy='65' r='3' fill='%23d8b4fe'/%3E%3Ccircle cx='20' cy='59' r='2' fill='%23d8b4fe'/%3E%3Ccircle cx='80' cy='45' r='4' fill='%23d8b4fe'/%3E%3Ccircle cx='80' cy='38' r='3' fill='%23d8b4fe'/%3E%3Ccircle cx='80' cy='32' r='2' fill='%23d8b4fe'/%3E%3C/svg%3E")`,spineColor:`#d8b4fe`,previewColor:`#f3e8ff`,textColor:`#6b21a8`},{id:`mint-choco`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23ccfbf1'/%3E%3Ccircle cx='20' cy='20' r='6' fill='%234b2c20'/%3E%3Ccircle cx='80' cy='50' r='8' fill='%234b2c20'/%3E%3Ccircle cx='40' cy='80' r='5' fill='%234b2c20'/%3E%3Cpath d='M60 20 L70 30 L50 35 Z' fill='%234b2c20'/%3E%3Crect x='10' y='60' width='8' height='8' fill='%234b2c20' transform='rotate(45 14 64)'/%3E%3C/svg%3E")`,spineColor:`#5eead4`,previewColor:`#ccfbf1`,textColor:`#134e4a`},{id:`ocean-blue`,name:``,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23e0f2fe'/%3E%3Cpath d='M0 80 Q25 70 50 80 T100 80 V100 H0 Z' fill='%2338bdf8'/%3E%3Cpath d='M0 90 Q25 80 50 90 T100 90 V100 H0 Z' fill='%230284c7'/%3E%3Ccircle cx='30' cy='40' r='5' fill='%23bae6fd' opacity='0.5'/%3E%3Ccircle cx='70' cy='20' r='8' fill='%23facc15' opacity='0.8'/%3E%3C/svg%3E")`,spineColor:`#0ea5e9`,previewColor:`#38bdf8`,textColor:`#0c4a6e`},{id:`magic-castle`,name:` `,value:`url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' fill='%23f3e8ff'/%3E%3Ccircle cx='10' cy='20' r='1' fill='white'/%3E%3Ccircle cx='90' cy='30' r='2' fill='white'/%3E%3Ccircle cx='20' cy='10' r='1.5' fill='white'/%3E%3Ccircle cx='80' cy='15' r='1' fill='white'/%3E%3Ccircle cx='35' cy='15' r='1' fill='white' opacity='0.7'/%3E%3Ccircle cx='65' cy='10' r='1' fill='white' opacity='0.7'/%3E%3Ccircle cx='5' cy='40' r='1' fill='white' opacity='0.5'/%3E%3Ccircle cx='95' cy='45' r='1' fill='white' opacity='0.5'/%3E%3Cpath d='M15 35 L16 32 L17 35 L16 38 Z' fill='%23fef3c7'/%3E%3Cpath d='M85 40 L86 37 L87 40 L86 43 Z' fill='%23fef3c7'/%3E%3Cpath d='M30 80 V50 L30 40 L40 50 V80 H30 Z' fill='%23c084fc'/%3E%3Cpath d='M60 80 V50 L60 40 L70 50 V80 H60 Z' fill='%23c084fc'/%3E%3Cpath d='M40 80 V40 L50 20 L60 40 V80 H40 Z' fill='%23a855f7'/%3E%3Crect x='45' y='60' width='10' height='20' fill='%23f3e8ff' rx='5'/%3E%3Ccircle cx='50' cy='20' r='2' fill='%23fef3c7'/%3E%3Cpath d='M50 15 L51 12 L52 15 L51 18 Z' fill='white' opacity='0.8'/%3E%3C/svg%3E")`,spineColor:`#a855f7`,previewColor:`#f3e8ff`,textColor:`#6b21a8`}],COVER_COLORS=[{name:``,value:`#fffbeb`,spine:`#fde68a`,text:`#78350f`},{name:``,value:`#f0f9ff`,spine:`#bae6fd`,text:`#0c4a6e`},{name:``,value:`#f5f3ff`,spine:`#ddd6fe`,text:`#4c1d95`},{name:``,value:`#ecfdf5`,spine:`#6ee7b7`,text:`#064e3b`},{name:``,value:`#fff1f2`,spine:`#fda4af`,text:`#881337`},{name:``,value:`#fefce8`,spine:`#fde047`,text:`#713f12`},{name:``,value:`#fff7ed`,spine:`#fdba74`,text:`#7c2d12`},{name:``,value:`#f8fafc`,spine:`#94a3b8`,text:`#0f172a`},{name:``,value:`#0f172a`,spine:`#1e293b`,text:`#f1f5f9`},{name:``,value:`#ffe4e6`,spine:`#fda4af`,text:`#881337`},{name:``,value:`#fef3c7`,spine:`#fcd34d`,text:`#92400e`},{name:``,value:`#ecfccb`,spine:`#bef264`,text:`#3f6212`},{name:``,value:`#ccfbf1`,spine:`#5eead4`,text:`#115e59`},{name:``,value:`#e0f2fe`,spine:`#7dd3fc`,text:`#075985`},{name:``,value:`#e0e7ff`,spine:`#818cf8`,text:`#3730a3`},{name:``,value:`#fae8ff`,spine:`#e879f9`,text:`#86198f`},{name:``,value:`#334155`,spine:`#1e293b`,text:`#f1f5f9`},{name:``,value:`#451a03`,spine:`#78350f`,text:`#fffbeb`},{name:``,value:`#052e16`,spine:`#14532d`,text:`#ecfdf5`},{name:``,value:`#172554`,spine:`#1e3a8a`,text:`#eff6ff`},{name:``,value:`#fce7f3`,spine:`#f9a8d4`,text:`#be185d`}],STICKER_ICONS=`.........................`.split(`.`);var AlbumBook=({config,title,tag,count,onClick,className,showFullTitle=!1})=>{let activeConfig=config||{type:`solid`,value:COVER_COLORS[0].value,spineColor:COVER_COLORS[0].spine,labelColor:COVER_COLORS[0].text},isPattern=activeConfig.type!==`solid`&&activeConfig.type!==`gradient`;return(0,import_jsx_runtime.jsxs)(motion.div,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick,className:`relative aspect-[4/5] rounded-r-2xl rounded-l-md shadow-lg cursor-pointer transition-shadow duration-300 hover:shadow-xl ${className}`,style:{backfaceVisibility:`hidden`,WebkitFontSmoothing:`subpixel-antialiased`,transform:`translateZ(0)`},children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute left-0 top-0 bottom-0 w-6 z-20 rounded-l-md`,style:{background:activeConfig.spineColor||`#e5e7eb`,boxShadow:`inset -2px 0 4px rgba(0,0,0,0.1), inset 2px 0 2px rgba(255,255,255,0.3)`}}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute left-6 top-0 bottom-0 w-1 bg-black/5 z-20`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute inset-0 left-2 w-full h-full rounded-r-2xl overflow-hidden z-10`,style:(()=>{if(activeConfig.type===`image`&&activeConfig.customImage)return{backgroundImage:`url(${activeConfig.customImage})`,backgroundSize:`cover`,backgroundPosition:`center`,backgroundColor:activeConfig.spineColor||`#e5e7eb`};if(activeConfig.type===`illustration`)return{backgroundImage:activeConfig.value,backgroundSize:`cover`,backgroundPosition:`center`};if(isPattern){let baseSize=activeConfig.backgroundSize||`20px 20px`,scale$1=(activeConfig.patternScale||100)/100,[w$1,h$3]=baseSize.split(` `).map(s$3=>parseFloat(s$3)),calculatedSize=w$1&&h$3?`${w$1*scale$1}px ${h$3*scale$1}px`:baseSize;return{backgroundImage:activeConfig.value,backgroundColor:activeConfig.backgroundColor||activeConfig.spineColor||`#ffffff`,backgroundSize:calculatedSize,backgroundPosition:`${activeConfig.patternPositionX||0}% ${activeConfig.patternPositionY||0}%`}}return{backgroundColor:activeConfig.value}})(),children:[activeConfig.sticker&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-4 left-8 w-12 h-12 bg-white/90 rounded-full flex items-center justify-center shadow-sm text-2xl border border-white/40`,children:activeConfig.sticker}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-x-0 bottom-0 h-1/2 bg-gradient-to-t from-black/20 to-transparent pointer-events-none`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute inset-x-0 bottom-0 p-5 flex flex-col justify-end z-20`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 mb-1 flex-wrap`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xl font-bold leading-tight break-words drop-shadow-sm`,style:{color:activeConfig.labelColor||`#1f2937`,textShadow:`0 1px 2px rgba(255,255,255,0.5)`},children:!showFullTitle&&title.length>6?`${title.slice(0,6)}...`:title}),tag&&(0,import_jsx_runtime.jsxs)(`span`,{className:`bg-white/30 backdrop-blur-md px-2 py-0.5 rounded-full text-[10px] font-bold border border-white/40 shadow-sm`,style:{color:activeConfig.labelColor||`#1f2937`},children:[`#`,tag.replace(/^#+/,``)]})]}),count!==void 0&&(0,import_jsx_runtime.jsxs)(`p`,{className:`text-xs font-medium flex items-center gap-1 opacity-90`,style:{color:activeConfig.labelColor||`#1f2937`},children:[(0,import_jsx_runtime.jsx)(`span`,{className:`w-1.5 h-1.5 rounded-full inline-block`,style:{backgroundColor:activeConfig.labelColor||`#1f2937`}}),typeof count==`number`?`${count} `:count]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cardboard-flat.png')] opacity-30 pointer-events-none mix-blend-multiply`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-tr from-black/5 via-transparent to-white/20 pointer-events-none rounded-r-2xl`})]})]})},AlbumBook_default=AlbumBook,CustomColorButton=({value,onChange,size=`md`})=>(0,import_jsx_runtime.jsx)(`div`,{className:`${size===`lg`?`aspect-square`:{sm:`w-8 h-8`,md:`w-9 h-9`,lg:`w-12 h-12`}[size]} rounded-full bg-gradient-to-tr from-pink-500 via-red-500 to-yellow-500 p-[1px] cursor-pointer group relative overflow-hidden shrink-0`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full bg-white rounded-full flex items-center justify-center group-hover:bg-opacity-90 transition`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full rounded-full overflow-hidden relative flex items-center justify-center`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`color`,value:value||`#ffffff`,onChange,className:`absolute inset-0 w-[200%] h-[200%] -top-1/2 -left-1/2 opacity-0 cursor-pointer`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[8px] font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-indigo-500 relative z-10 pointer-events-none`,children:`CUSTOM`})]})})}),CoverCustomizer=({initialConfig,albumTitle,albumTag,onSave,onClose})=>{let[config,setConfig]=(0,import_react.useState)(initialConfig||{type:`solid`,value:COVER_COLORS[0].value,spineColor:COVER_COLORS[0].spine,labelColor:COVER_COLORS[0].text}),[mainTab,setMainTab]=(0,import_react.useState)(`design`),[designSubTab,setDesignSubTab]=(0,import_react.useState)(`color`),[myDesignSubTab,setMyDesignSubTab]=(0,import_react.useState)(`pattern`),[myDesignState,setMyDesignState]=(0,import_react.useState)({bg:COVER_COLORS[0].value,patternId:`dots`,patternColor:`#000000`,spine:COVER_COLORS[0].spine,label:COVER_COLORS[0].text,scale:100,posX:0,posY:0}),[lastPreset]=(0,import_react.useState)(config),handleTabChange=tab$1=>{setMainTab(tab$1),tab$1===`design`&&setConfig(lastPreset)};import_react.useEffect(()=>(document.body.style.overflow=`hidden`,()=>{document.body.style.overflow=`auto`}),[]),import_react.useEffect(()=>{if(mainTab===`my-design`)if(myDesignState.patternId===`none`)setConfig(prev=>({...prev,type:`solid`,value:myDesignState.bg,spineColor:myDesignState.spine,labelColor:myDesignState.label,backgroundColor:void 0,backgroundSize:void 0,patternScale:void 0,patternPositionX:void 0,patternPositionY:void 0}));else{let shape=PATTERN_SHAPES.find(s$3=>s$3.id===myDesignState.patternId);if(shape){let generatedValue=shape.generate(myDesignState.patternColor);setConfig(prev=>({...prev,type:`pattern`,value:generatedValue,backgroundColor:myDesignState.bg,spineColor:myDesignState.spine,labelColor:myDesignState.label,backgroundSize:shape.size,patternScale:myDesignState.scale,patternPositionX:myDesignState.posX,patternPositionY:myDesignState.posY}))}}},[myDesignState,mainTab]);let selectColor=color$2=>{setConfig(prev=>({...prev,type:`solid`,value:color$2.value,spineColor:color$2.spine,labelColor:color$2.text,backgroundColor:void 0,backgroundSize:void 0}))},selectIllustration=illu=>{setConfig(prev=>({...prev,type:`illustration`,value:illu.value,spineColor:illu.spineColor,labelColor:illu.textColor||`#1f2937`}))};return(0,import_jsx_runtime.jsxs)(`div`,{className:`fixed inset-0 z-[60] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4 animate-fade-in`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] w-full max-w-sm rounded-[32px] overflow-hidden shadow-2xl flex flex-col h-[85vh] max-h-[800px] border border-[var(--border-color)] font-sans`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`px-6 py-4 flex items-center justify-between border-b border-[var(--border-color)] bg-[var(--bg-card)] z-10 shrink-0`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`text-[var(--text-secondary)] hover:text-[var(--text-primary)] p-2 transition -ml-2`,children:(0,import_jsx_runtime.jsx)(X,{size:24})}),(0,import_jsx_runtime.jsx)(`h2`,{className:`text-[var(--text-primary)] font-bold text-lg`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center gap-2 -mr-2`,children:(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onSave(config),className:`text-indigo-600 hover:text-indigo-700 font-bold p-2 transition`,children:``})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 bg-[var(--bg-card-secondary)] flex items-center justify-center p-8 min-h-[320px] relative overflow-hidden shrink-0`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-48 h-60 relative z-30 shadow-2xl transform hover:scale-105 transition duration-500`,children:(0,import_jsx_runtime.jsx)(AlbumBook_default,{config,title:albumTitle,tag:albumTag,className:`w-full h-full`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 opacity-[0.03] pointer-events-none z-0`,style:{backgroundImage:`radial-gradient(#000 1px, transparent 1px)`,backgroundSize:`20px 20px`}})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] rounded-t-[32px] -mt-6 pt-2 pb-6 px-4 flex-1 flex flex-col min-h-[400px] shadow-[0_-4px_20px_-4px_rgba(0,0,0,0.05)] relative z-20 shrink-0 h-[55%]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-center gap-8 border-b border-[var(--border-color)] mb-4 shrink-0`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleTabChange(`design`),className:`pb-3 text-sm font-bold transition-all border-b-2 ${mainTab===`design`?`border-indigo-600 text-indigo-600`:`border-transparent text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleTabChange(`my-design`),className:`pb-3 text-sm font-bold transition-all border-b-2 ${mainTab===`my-design`?`border-indigo-600 text-indigo-600`:`border-transparent text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:` `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleTabChange(`sticker`),className:`pb-3 text-sm font-bold transition-all border-b-2 ${mainTab===`sticker`?`border-indigo-600 text-indigo-600`:`border-transparent text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:``})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`overflow-y-auto flex-1 px-1 custom-scrollbar`,children:[mainTab===`design`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex gap-2 mb-5 overflow-x-auto pb-2 no-scrollbar px-1`,children:[{id:`color`,label:``,icon:Palette},{id:`illustration`,label:``,icon:Smile},{id:`image`,label:``,icon:Image$1}].map(tab$1=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setDesignSubTab(tab$1.id),className:`flex items-center gap-1.5 px-3.5 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all border ${designSubTab===tab$1.id?`bg-indigo-600 text-white border-indigo-600 shadow-md transform scale-105`:`bg-[var(--bg-card)] text-[var(--text-secondary)] border-[var(--border-color)] hover:bg-[var(--bg-card-secondary)]`}`,children:[(0,import_jsx_runtime.jsx)(tab$1.icon,{size:12}),tab$1.label]},tab$1.id))}),designSubTab===`color`&&(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-5 gap-3`,children:COVER_COLORS.map(color$2=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>selectColor(color$2),className:`aspect-square rounded-full border border-black/5 relative transition-all ${config.value===color$2.value?`ring-2 ring-offset-2 ring-indigo-500 scale-110 shadow-lg`:`hover:scale-105`}`,style:{backgroundColor:color$2.value},title:color$2.name},color$2.name))}),designSubTab===`illustration`&&(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 gap-3`,children:COVER_ILLUSTRATIONS.map(illu=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>selectIllustration(illu),className:`aspect-[4/3] rounded-xl overflow-hidden border border-[var(--border-color)] relative transition-all group ${config.value===illu.value?`ring-2 ring-indigo-500 shadow-lg scale-[1.02]`:`hover:shadow-md hover:-translate-y-1`}`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full`,style:{backgroundImage:illu.value}}),(0,import_jsx_runtime.jsx)(`span`,{className:`absolute bottom-2 left-2 text-[10px] text-white font-bold drop-shadow-md bg-black/10 backdrop-blur-sm px-2 py-0.5 rounded-full`,children:illu.name})]},illu.id))}),designSubTab===`image`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`pt-2`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`w-full flex flex-col items-center justify-center h-40 border-2 border-dashed border-[var(--border-color)] rounded-2xl cursor-pointer hover:bg-[var(--bg-card-secondary)] hover:border-indigo-400 transition-all group bg-[var(--bg-card-secondary)]/50`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col items-center justify-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-12 h-12 rounded-full bg-[var(--bg-card)] shadow-sm flex items-center justify-center mb-3 group-hover:scale-110 transition-transform`,children:(0,import_jsx_runtime.jsx)(Upload,{className:`w-5 h-5 text-indigo-500`})}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm text-[var(--text-primary)] font-bold`,children:` `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-[var(--text-secondary)] mt-1`,children:`PNG, JPG files supported`})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`file`,className:`hidden`,accept:`image/*`,onChange:e$4=>{let file=e$4.target.files?.[0];if(file){let reader=new FileReader;reader.onloadend=()=>{setConfig(prev=>({...prev,type:`image`,value:`#ffffff`,customImage:reader.result,spineColor:`#e5e7eb`,labelColor:`#1f2937`}))},reader.readAsDataURL(file)}}})]}),config.customImage&&(0,import_jsx_runtime.jsxs)(`div`,{className:`mt-4 relative rounded-xl overflow-hidden h-32 w-full border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:config.customImage,alt:`Uploaded`,className:`w-full h-full object-cover`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute top-2 right-2 bg-green-500 text-white text-[10px] font-bold px-2 py-1 rounded-full flex items-center gap-1 shadow-sm`,children:[(0,import_jsx_runtime.jsx)(Check,{size:10}),`  `]})]})]})]}),mainTab===`my-design`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col h-full`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex bg-[var(--bg-card-secondary)] rounded-xl p-1 mb-6 mx-1 shrink-0`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setMyDesignSubTab(`pattern`),className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg text-xs font-bold transition-all ${myDesignSubTab===`pattern`?`bg-white text-indigo-600 shadow-sm`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:[(0,import_jsx_runtime.jsx)(Layers,{size:14}),` `]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setMyDesignSubTab(`color`),className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg text-xs font-bold transition-all ${myDesignSubTab===`color`?`bg-white text-indigo-600 shadow-sm`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:[(0,import_jsx_runtime.jsx)(Droplet,{size:14}),` `]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 overflow-y-auto custom-scrollbar px-1 pb-4`,children:[myDesignSubTab===`pattern`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`h4`,{className:`text-xs font-bold text-[var(--text-secondary)] mb-3 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Layers,{size:14}),`  `]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-4 gap-2`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setMyDesignState(prev=>({...prev,patternId:`none`})),className:`aspect-square flex flex-col items-center justify-center rounded-xl border transition-all ${myDesignState.patternId===`none`?`border-indigo-500 bg-indigo-50 text-indigo-700 shadow-md ring-1 ring-indigo-200`:`border-[var(--border-color)] bg-[var(--bg-card)] hover:border-[var(--border-color)] hover:shadow-sm text-[var(--text-secondary)]`}`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-lg mb-1.5 border border-black/5 flex items-center justify-center bg-gray-50 text-gray-400`,children:(0,import_jsx_runtime.jsx)(Ban,{size:16})}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] font-bold`,children:``})]}),PATTERN_SHAPES.map(shape=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setMyDesignState(prev=>({...prev,patternId:shape.id})),className:`aspect-square flex flex-col items-center justify-center rounded-xl border transition-all ${myDesignState.patternId===shape.id?`border-indigo-500 bg-indigo-50 text-indigo-700 shadow-md ring-1 ring-indigo-200`:`border-[var(--border-color)] bg-[var(--bg-card)] hover:border-[var(--border-color)] hover:shadow-sm text-[var(--text-secondary)]`}`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-lg mb-1.5 border border-black/5 shadow-inner overflow-hidden`,style:{backgroundImage:shape.generate(myDesignState.patternColor),backgroundColor:myDesignState.bg}}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] font-bold`,children:shape.name})]},shape.id))]})]}),myDesignState.patternId!==`none`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card-secondary)]/50 rounded-2xl p-5 border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`h4`,{className:`text-xs font-bold text-[var(--text-secondary)] mb-4 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(SlidersVertical,{size:14}),`  `]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center mb-1.5`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[11px] font-bold text-gray-500`,children:` ()`}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] font-mono text-indigo-600 bg-indigo-50 px-1.5 py-0.5 rounded`,children:[myDesignState.scale,`%`]})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`50`,max:`200`,value:myDesignState.scale,onChange:e$4=>setMyDesignState(prev=>({...prev,scale:parseInt(e$4.target.value)})),className:`w-full h-1.5 bg-gray-200 rounded-full appearance-none cursor-pointer accent-indigo-600`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center mb-1.5`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[11px] font-bold text-gray-500`,children:` `}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] font-mono text-indigo-600`,children:[myDesignState.posX,`%`]})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`0`,max:`100`,value:myDesignState.posX,onChange:e$4=>setMyDesignState(prev=>({...prev,posX:parseInt(e$4.target.value)})),className:`w-full h-1.5 bg-gray-200 rounded-full appearance-none cursor-pointer accent-indigo-600`})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center mb-1.5`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[11px] font-bold text-gray-500`,children:` `}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] font-mono text-indigo-600`,children:[myDesignState.posY,`%`]})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`range`,min:`0`,max:`100`,value:myDesignState.posY,onChange:e$4=>setMyDesignState(prev=>({...prev,posY:parseInt(e$4.target.value)})),className:`w-full h-1.5 bg-gray-200 rounded-full appearance-none cursor-pointer accent-indigo-600`})]})]})]})]})]}),myDesignSubTab===`color`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`h4`,{className:`text-xs font-bold text-[var(--text-secondary)] mb-3 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Palette,{size:14}),`  `]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap gap-2 items-center`,children:[[...COVER_COLORS,{name:`White`,value:`#ffffff`},{name:`Black`,value:`#000000`}].map(color$2=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setMyDesignState(prev=>({...prev,bg:color$2.value})),className:`w-9 h-9 rounded-full border border-gray-200 flex-shrink-0 transition ${myDesignState.bg===color$2.value?`ring-2 ring-indigo-500 scale-110 shadow-sm`:`hover:scale-105`}`,style:{backgroundColor:color$2.value}},color$2.value)),(0,import_jsx_runtime.jsx)(CustomColorButton,{value:myDesignState.bg,onChange:e$4=>setMyDesignState(prev=>({...prev,bg:e$4.target.value})),size:`md`})]})]}),myDesignState.patternId!==`none`&&(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`h4`,{className:`text-xs font-bold text-[var(--text-secondary)] mb-3 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Layers,{size:14}),`  `]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap gap-2 items-center`,children:[[{name:`Black`,value:`#000000`},{name:`White`,value:`#ffffff`},...COVER_COLORS].map(color$2=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setMyDesignState(prev=>({...prev,patternColor:color$2.value})),className:`w-9 h-9 rounded-lg border border-gray-200 flex-shrink-0 transition ${myDesignState.patternColor===color$2.value?`ring-2 ring-indigo-500 scale-110 shadow-sm`:`hover:scale-105`}`,style:{backgroundColor:color$2.value}},color$2.value)),(0,import_jsx_runtime.jsx)(CustomColorButton,{value:myDesignState.patternColor,onChange:e$4=>setMyDesignState(prev=>({...prev,patternColor:e$4.target.value})),size:`md`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card-secondary)]/30 p-4 rounded-xl border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`h4`,{className:`text-xs font-bold text-gray-500 mb-3 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Book,{size:14}),`  `]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-10 h-10 rounded-full border border-gray-200 overflow-hidden relative shadow-sm hover:scale-105 transition cursor-pointer`,children:(0,import_jsx_runtime.jsx)(`input`,{type:`color`,value:myDesignState.spine,onChange:e$4=>setMyDesignState(prev=>({...prev,spine:e$4.target.value})),className:`absolute inset-0 w-[150%] h-[150%] -top-1/4 -left-1/4 cursor-pointer`})}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] font-mono text-gray-500 uppercase`,children:myDesignState.spine})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card-secondary)]/30 p-4 rounded-xl border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`h4`,{className:`text-xs font-bold text-gray-500 mb-3 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Type,{size:14}),`  `]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-10 h-10 rounded-full border border-gray-200 overflow-hidden relative shadow-sm hover:scale-105 transition cursor-pointer`,children:(0,import_jsx_runtime.jsx)(`input`,{type:`color`,value:myDesignState.label,onChange:e$4=>setMyDesignState(prev=>({...prev,label:e$4.target.value})),className:`absolute inset-0 w-[150%] h-[150%] -top-1/4 -left-1/4 cursor-pointer`})}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] font-mono text-gray-500 uppercase`,children:myDesignState.label})]})]})]})]})]})]}),mainTab===`sticker`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`pt-2`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-sm font-bold text-[var(--text-primary)] mb-4 px-2`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-5 gap-3 p-1`,children:[STICKER_ICONS.map(sticker=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setConfig(prev=>({...prev,sticker})),className:`aspect-square flex items-center justify-center text-2xl rounded-xl transition hover:bg-[var(--bg-card-secondary)] hover:scale-110 ${config.sticker===sticker?`bg-indigo-50 ring-2 ring-indigo-500`:``}`,children:sticker},sticker)),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setConfig(prev=>({...prev,sticker:void 0})),className:`aspect-square flex items-center justify-center rounded-xl bg-[var(--bg-card-secondary)] text-[var(--text-secondary)] hover:text-red-500 hover:bg-red-50 transition border border-dashed border-[var(--border-color)]`,title:` `,children:(0,import_jsx_runtime.jsx)(X,{size:20})})]})]})]})]})]}),(0,import_jsx_runtime.jsx)(`style`,{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 4px;
                    height: 4px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: transparent;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #e2e8f0;
                    border-radius: 4px;
                }
                .no-scrollbar::-webkit-scrollbar {
                    display: none;
                }
                .no-scrollbar {
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                }
            `})]})},CoverCustomizer_default=CoverCustomizer,RoomSettingsModal=({isOpen,onClose,album})=>{let[activeTab,setActiveTab]=(0,import_react.useState)(`invite`),[copiedLink,setCopiedLink]=(0,import_react.useState)(!1),[copiedPw,setCopiedPw]=(0,import_react.useState)(!1),[members,setMembers]=(0,import_react.useState)([]),[isLoadingMembers,setIsLoadingMembers]=(0,import_react.useState)(!1),[currentUserRole,setCurrentUserRole]=(0,import_react.useState)(null),[currentUserEmail,setCurrentUserEmail]=(0,import_react.useState)(null);(0,import_react.useEffect)(()=>{isOpen&&activeTab===`members`&&loadMembers()},[isOpen,activeTab]),(0,import_react.useEffect)(()=>{let token=localStorage.getItem(`accessToken`);if(token)try{let base64=token.split(`.`)[1].replace(/-/g,`+`).replace(/_/g,`/`),jsonPayload=decodeURIComponent(window.atob(base64).split(``).map(function(c$3){return`%`+(`00`+c$3.charCodeAt(0).toString(16)).slice(-2)}).join(``)),payload=JSON.parse(jsonPayload);payload.email?setCurrentUserEmail(payload.email):payload.sub&&payload.sub.includes(`@`)&&setCurrentUserEmail(payload.sub)}catch{}},[]);let loadMembers=async()=>{setIsLoadingMembers(!0);try{setMembers(await fetchRoomMembersApi(album.id))}catch(e$4){console.error(e$4)}finally{setIsLoadingMembers(!1)}};(0,import_react.useEffect)(()=>{if(members.length>0&&currentUserEmail){let me$1=members.find(m$3=>m$3.email===currentUserEmail);me$1&&setCurrentUserRole(me$1.role)}},[members,currentUserEmail]);let handleKick=async userId=>{confirm(`   ?`)&&(await kickMemberApi(album.id,userId)?(alert(` .`),loadMembers()):alert(` `))},handleLeave=async()=>{confirm(`   ?`)&&(await leaveRoomApi(album.id)?(alert(` .`),onClose(),window.location.reload()):alert(` `))},handleDeleteRoom=async()=>{confirm(`   ?
       .`)&&(await deleteRoomApi(album.id)?(alert(` .`),onClose(),window.location.reload()):alert(` `))};if(!isOpen)return null;let inviteLink=`${window.location.origin}/byeory/rooms/${String(album.id).replace(/^room-/,``)}/join`,copyToClipboard=async(text,type)=>{try{await navigator.clipboard.writeText(text),type===`link`?(setCopiedLink(!0),setTimeout(()=>setCopiedLink(!1),2e3)):(setCopiedPw(!0),setTimeout(()=>setCopiedPw(!1),2e3))}catch(err){console.error(`Failed to copy:`,err)}};return(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-modal)] rounded-2xl shadow-xl w-full max-w-md overflow-hidden flex flex-col border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`px-6 py-4 border-b border-[var(--border-color)] flex items-center justify-between`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`font-bold text-lg text-[var(--text-primary)] flex items-center gap-2`,children:[album.roomConfig?.password?(0,import_jsx_runtime.jsx)(`div`,{className:`p-1 bg-indigo-500 rounded text-white`,children:(0,import_jsx_runtime.jsx)(Settings,{size:14})}):(0,import_jsx_runtime.jsx)(Users,{size:18,className:`text-indigo-500`}),album.name]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-2 hover:bg-[var(--bg-card-secondary)] rounded-full text-[var(--text-secondary)] hover:text-[var(--text-primary)]`,children:(0,import_jsx_runtime.jsx)(X,{size:20})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex border-b border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setActiveTab(`invite`),className:`flex-1 py-3 text-sm font-bold transition-colors relative ${activeTab===`invite`?`text-indigo-500`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:[` `,activeTab===`invite`&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-500`})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setActiveTab(`members`),className:`flex-1 py-3 text-sm font-bold transition-colors relative ${activeTab===`members`?`text-indigo-500`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:[` `,activeTab===`members`&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-500`})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`p-6`,children:activeTab===`invite`?(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs font-bold text-[var(--text-secondary)] mb-2 uppercase tracking-wider`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 bg-[var(--bg-card-secondary)] px-3 py-2.5 rounded-xl border border-[var(--border-color)] text-sm text-[var(--text-primary)] truncate font-mono`,children:inviteLink}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>copyToClipboard(inviteLink,`link`),className:`px-4 py-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 rounded-xl font-bold text-sm transition-colors flex items-center gap-2`,children:copiedLink?(0,import_jsx_runtime.jsx)(Check,{size:16}):(0,import_jsx_runtime.jsx)(Copy,{size:16})})]})]}),album.roomConfig?.password&&(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs font-bold text-[var(--text-secondary)] mb-2 uppercase tracking-wider`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 bg-[var(--bg-card-secondary)] px-3 py-2.5 rounded-xl border border-[var(--border-color)] text-sm text-[var(--text-primary)] font-mono tracking-widest text-center`,children:album.roomConfig.password}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>copyToClipboard(album.roomConfig?.password||``,`pw`),className:`px-4 py-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 rounded-xl font-bold text-sm transition-colors flex items-center gap-2`,children:copiedPw?(0,import_jsx_runtime.jsx)(Check,{size:16}):(0,import_jsx_runtime.jsx)(Copy,{size:16})})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs font-bold text-[var(--text-secondary)] mb-2 uppercase tracking-wider`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`bg-[var(--bg-card-secondary)] p-3 rounded-xl border border-[var(--border-color)] text-sm text-[var(--text-primary)] min-h-[80px]`,children:album.roomConfig?.description||` .`})]})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[isLoadingMembers?(0,import_jsx_runtime.jsx)(`div`,{className:`flex justify-center p-8`,children:(0,import_jsx_runtime.jsx)(Loader,{className:`animate-spin text-indigo-500`})}):(0,import_jsx_runtime.jsx)(`div`,{className:`max-h-[300px] overflow-y-auto space-y-2 pr-1`,children:members.map(member=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between p-3 bg-[var(--bg-card-secondary)] rounded-xl border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${member.role===`OWNER`?`bg-indigo-100 text-indigo-600`:`bg-gray-100 text-gray-500`}`,children:member.nickname?.substring(0,2).toUpperCase()||`MB`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`font-bold text-sm text-[var(--text-primary)] flex items-center gap-2`,children:[member.nickname||`Unknown`,member.email===currentUserEmail&&(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-tertiary)]`,children:`()`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs text-[var(--text-secondary)]`,children:member.email})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[member.role===`OWNER`&&(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold bg-indigo-50 text-indigo-600 px-2 py-1 rounded`,children:`Owner`}),currentUserRole===`OWNER`&&member.role!==`OWNER`&&(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleKick(member.userId),className:`p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors`,title:` `,children:(0,import_jsx_runtime.jsx)(LogOut,{size:16})})]})]},member.userId))}),currentUserRole!==`OWNER`&&(0,import_jsx_runtime.jsx)(`div`,{className:`pt-4 border-t border-[var(--border-color)] mt-4`,children:(0,import_jsx_runtime.jsxs)(`button`,{onClick:handleLeave,className:`w-full py-3 rounded-xl bg-red-50 text-red-600 font-bold text-sm hover:bg-red-100 transition flex items-center justify-center gap-2`,children:[(0,import_jsx_runtime.jsx)(LogOut,{size:16}),`  `]})}),currentUserRole===`OWNER`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`pt-4 border-t border-[var(--border-color)] mt-4`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:handleDeleteRoom,className:`w-full py-3 rounded-xl bg-red-600 text-white font-bold text-sm hover:bg-red-700 transition flex items-center justify-center gap-2 shadow-sm`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(LogOut,{size:16,className:`rotate-180`}),` `,(0,import_jsx_runtime.jsx)(`span`,{children:`  ( )`})]})}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-[var(--text-tertiary)] text-center mt-2`,children:`   ,   .`})]})]})})]})})},RoomSettingsModal_default=RoomSettingsModal,PostAlbumView=({posts,customAlbums,onAlbumClick,onCreateAlbum,onStartWriting,onUpdateAlbum,onDeleteAlbum,sortOption,setSortOption,handleToggleAlbumFavorite,showConfirmModal})=>{let[activeDropdownId,setActiveDropdownId]=(0,import_react.useState)(null),[renamingId,setRenamingId]=(0,import_react.useState)(null),[roomSettingsId,setRoomSettingsId]=(0,import_react.useState)(null),[editingCoverId,setEditingCoverId]=(0,import_react.useState)(null),[currentUserEmail,setCurrentUserEmail]=(0,import_react.useState)(null),[isEasterEggOpen,setIsEasterEggOpen]=(0,import_react.useState)(!1),navigate=useNavigate();(0,import_react.useEffect)(()=>{let token=localStorage.getItem(`accessToken`);if(token)try{let base64=token.split(`.`)[1].replace(/-/g,`+`).replace(/_/g,`/`),jsonPayload=decodeURIComponent(window.atob(base64).split(``).map(function(c$3){return`%`+(`00`+c$3.charCodeAt(0).toString(16)).slice(-2)}).join(``)),payload=JSON.parse(jsonPayload);payload.email?setCurrentUserEmail(payload.email):payload.sub&&payload.sub.includes(`@`)&&setCurrentUserEmail(payload.sub)}catch{}},[]);let handleSaveCover=config=>{if(!editingCoverId)return;if(editingCoverId===`__all__`||editingCoverId===`__others__`){showConfirmModal?showConfirmModal(``,`     .`,`info`,void 0,!0):alert(`     .`);return}let album=customAlbums.find(a$4=>a$4.id===editingCoverId);album&&onUpdateAlbum(album.id,{name:album.name,tag:album.tag,parentId:album.parentId,coverConfig:config}),setEditingCoverId(null)};(0,import_react.useEffect)(()=>{let handleClickOutside=()=>{setActiveDropdownId(null)};return activeDropdownId&&window.addEventListener(`click`,handleClickOutside),()=>{window.removeEventListener(`click`,handleClickOutside)}},[activeDropdownId]);let albumStats=(0,import_react.useMemo)(()=>{let stats={};return customAlbums.forEach(a$4=>{stats[a$4.id]={count:a$4.postCount||0,folderCount:a$4.folderCount||0,totalCount:a$4.postCount||0,lastDate:a$4.createdAt?new Date(a$4.createdAt).getTime():0,representativeTag:a$4.tag||null}}),customAlbums.forEach(a$4=>{a$4.parentId&&stats[a$4.parentId]}),posts.forEach(p$3=>{let pDate=0;try{pDate=new Date(p$3.date.replace(/\./g,`-`)).getTime(),isNaN(pDate)&&(pDate=new Date(p$3.date).getTime()),isNaN(pDate)&&(pDate=0)}catch{pDate=0}if(p$3.albumIds&&p$3.albumIds.length>0)p$3.albumIds.forEach(id$3=>{let idStr=String(id$3);stats[idStr]&&(pDate>stats[idStr].lastDate&&(stats[idStr].lastDate=pDate),!stats[idStr].representativeTag&&p$3.tags&&p$3.tags.length>0&&(stats[idStr].representativeTag=p$3.tags[0]))});else{let tags=p$3.tags||[];customAlbums.forEach(album=>{album.tag&&tags.includes(album.tag)&&pDate>stats[album.id].lastDate&&(stats[album.id].lastDate=pDate)})}}),{sortedAlbums:[...customAlbums.filter(a$4=>!a$4.parentId).filter((a$4,index$2,self$1)=>index$2===self$1.findIndex(t$4=>t$4.id===a$4.id))].sort((a$4,b$3)=>sortOption===`name`?a$4.name.localeCompare(b$3.name):sortOption===`count`?stats[b$3.id].totalCount-stats[a$4.id].totalCount:sortOption===`newest`?stats[b$3.id].lastDate-stats[a$4.id].lastDate:sortOption===`favorites`?a$4.isFavorite===b$3.isFavorite?a$4.name.localeCompare(b$3.name):a$4.isFavorite?-1:1:0),stats}},[posts,customAlbums,sortOption]),handleMenuClick=(e$4,id$3)=>{e$4.stopPropagation(),setActiveDropdownId(activeDropdownId===id$3?null:id$3)},handleDeleteClick=(e$4,id$3)=>{e$4.stopPropagation(),customAlbums.find(a$4=>a$4.id===id$3)&&(onDeleteAlbum(id$3),setActiveDropdownId(null))},formatStats=info=>{let parts=[];return info.folderCount>0&&parts.push(` ${info.folderCount}`),info.totalCount>=0&&parts.push(` ${info.totalCount}`),parts.length===0?``:parts.join(`  `)};return(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-start md:items-end mb-8 border-b border-[var(--border-color)] pb-4 space-y-4 md:space-y-0`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`h2`,{className:`text-3xl font-bold text-[var(--text-primary)] flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsEasterEggOpen(!0),className:`transition-transform hover:scale-110 active:scale-95 focus:outline-none`,children:(0,import_jsx_runtime.jsx)(Folder,{className:`text-yellow-400 fill-yellow-400`,size:32})}),` `]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[var(--text-secondary)] text-sm mt-2 ml-1`,children:`  .`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row items-end gap-3 w-full md:w-auto`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full md:w-auto overflow-x-auto hide-scrollbar pb-1 md:pb-0`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`flex bg-[var(--bg-card-secondary)] rounded-lg p-1 h-10 md:h-12 items-center flex-shrink-0 w-max`,children:[`name`,`newest`,`count`,`favorites`].map(opt=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setSortOption(opt),className:`px-3 md:px-3 py-1.5 md:py-3 text-[11px] md:text-xs font-bold rounded-md transition-all whitespace-nowrap ${sortOption===opt?`bg-[var(--bg-card)] shadow-sm text-[var(--text-primary)]`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:{name:``,newest:``,count:` `,favorites:` `}[opt]},opt))})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 w-full md:w-auto justify-end`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:onCreateAlbum,className:`flex items-center gap-1 px-3 h-10 md:h-12 rounded-xl border border-[var(--border-color)] bg-transparent text-[var(--text-primary)] hover:bg-[var(--bg-card-secondary)] transition-all font-medium group flex-shrink-0`,children:[(0,import_jsx_runtime.jsx)(Plus,{size:16,className:`text-[var(--text-secondary)] group-hover:text-[var(--text-primary)] transition-colors`}),(0,import_jsx_runtime.jsx)(Folder,{size:18,className:`text-[var(--text-secondary)] group-hover:text-yellow-500 group-hover:fill-yellow-500 transition-colors`})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>onStartWriting(),className:`flex items-center gap-2 px-4 md:px-5 h-10 md:h-12 rounded-xl bg-[var(--btn-bg)] text-[var(--btn-text)] font-bold hover:opacity-90 transition-all shadow-md shadow-indigo-500/20 whitespace-nowrap flex-shrink-0 flex-1 md:flex-none justify-center`,children:[(0,import_jsx_runtime.jsx)(PenLine,{size:18}),` `]})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6`,children:[albumStats.sortedAlbums.map(album=>{let stats=albumStats.stats[album.id];return(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>onAlbumClick(album.id),className:`relative group cursor-pointer`,children:[(0,import_jsx_runtime.jsx)(AlbumBook_default,{title:album.name,tag:album.tag||stats.representativeTag||void 0,count:album.type===`room`?void 0:formatStats(stats),config:album.coverConfig,className:`shadow-sm border border-transparent group-hover:shadow-md transition-shadow duration-300`}),album.type===`room`&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-2 right-2 z-20 bg-black/60 backdrop-blur-sm text-white p-1 rounded-full shadow-sm`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center justify-center w-5 h-5`,children:album.roomConfig?.password?(0,import_jsx_runtime.jsx)(Lock,{size:12}):(0,import_jsx_runtime.jsx)(Users,{size:12})})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),handleToggleAlbumFavorite(album.id)},className:`absolute top-2 left-2 p-1.5 rounded-full z-30 transition-all ${album.isFavorite?`text-yellow-400 opacity-100`:`text-gray-300 opacity-0 group-hover:opacity-100 hover:text-yellow-400 hover:bg-white/50`}`,children:(0,import_jsx_runtime.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:album.isFavorite?`currentColor`:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,import_jsx_runtime.jsx)(`polygon`,{points:`12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2`})})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute top-2 right-2 z-30`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>handleMenuClick(e$4,album.id),className:`p-1.5 text-gray-600 hover:text-gray-900 transition-colors bg-white/90 backdrop-blur-sm rounded-full shadow-sm`,children:(0,import_jsx_runtime.jsx)(EllipsisVertical,{size:18})}),activeDropdownId===album.id&&(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute top-8 right-0 bg-white border border-gray-200 shadow-xl rounded-xl w-48 py-2 z-50 animate-scale-up origin-top-right cursor-default`,onClick:e$4=>e$4.stopPropagation(),children:[album.type===`room`&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:e$4=>{e$4.stopPropagation(),setRoomSettingsId(album.id),setActiveDropdownId(null)},className:`w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 text-indigo-600 font-medium bg-indigo-50/50`,children:[(0,import_jsx_runtime.jsx)(Users,{size:16}),`  `]}),(album.type!==`room`||album.role===`OWNER`||currentUserEmail&&album.ownerEmail===currentUserEmail)&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:e$4=>{e$4.stopPropagation(),setEditingCoverId(album.id),setActiveDropdownId(null)},className:`w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 text-gray-700`,children:[(0,import_jsx_runtime.jsx)(Sparkles,{size:16}),`  `]}),album.type!==`room`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:e$4=>{e$4.stopPropagation(),setRenamingId(album.id),setActiveDropdownId(null)},className:`w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 text-gray-700`,children:[(0,import_jsx_runtime.jsx)(SquarePen,{size:16}),`  `]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:e$4=>handleDeleteClick(e$4,album.id),className:`w-full text-left px-4 py-2.5 text-sm hover:bg-red-50 flex items-center gap-2 text-red-600`,children:[(0,import_jsx_runtime.jsx)(Trash2,{size:16}),`  `]})]})]})]})]},album.id)}),(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>onAlbumClick(`__all__`),className:`relative group cursor-pointer`,children:[(0,import_jsx_runtime.jsx)(AlbumBook_default,{title:`  `,count:` ${posts.length}`,className:`shadow-sm border border-transparent group-hover:shadow-md transition-shadow duration-300`,showFullTitle:!0}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute top-2 right-2 z-30`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>handleMenuClick(e$4,`__all__`),className:`p-1.5 text-gray-600 hover:text-gray-900 transition-colors bg-white/90 backdrop-blur-sm rounded-full shadow-sm`,children:(0,import_jsx_runtime.jsx)(EllipsisVertical,{size:18})}),activeDropdownId===`__all__`&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-8 right-0 bg-white border border-gray-200 shadow-xl rounded-xl w-48 py-2 z-50 animate-scale-up origin-top-right cursor-default`,onClick:e$4=>e$4.stopPropagation(),children:(0,import_jsx_runtime.jsxs)(`button`,{onClick:e$4=>{e$4.stopPropagation(),setEditingCoverId(`__all__`),setActiveDropdownId(null)},className:`w-full text-left px-4 py-2.5 text-sm hover:bg-gray-50 flex items-center gap-2 text-gray-700`,children:[(0,import_jsx_runtime.jsx)(Sparkles,{size:16}),`  `]})})]})]})]}),(0,import_jsx_runtime.jsx)(RenameAlbumModal_default,{isOpen:!!renamingId,onClose:()=>setRenamingId(null),onSave:newName=>{renamingId&&(onUpdateAlbum(renamingId,{name:newName}),setRenamingId(null))},currentName:renamingId&&customAlbums.find(a$4=>a$4.id===renamingId)?.name||``,showConfirmModal}),editingCoverId&&(0,import_jsx_runtime.jsx)(CoverCustomizer_default,{albumTitle:editingCoverId===`__all__`?`  `:editingCoverId===`__others__`?` `:customAlbums.find(a$4=>a$4.id===editingCoverId)?.name||``,albumTag:editingCoverId===`__all__`||editingCoverId===`__others__`?void 0:customAlbums.find(a$4=>a$4.id===editingCoverId)?.tag||void 0,initialConfig:editingCoverId===`__all__`||editingCoverId===`__others__`?void 0:customAlbums.find(a$4=>a$4.id===editingCoverId)?.coverConfig||void 0,onSave:handleSaveCover,onClose:()=>setEditingCoverId(null)}),roomSettingsId&&(0,import_jsx_runtime.jsx)(RoomSettingsModal_default,{isOpen:!!roomSettingsId,onClose:()=>setRoomSettingsId(null),album:customAlbums.find(a$4=>a$4.id===roomSettingsId)}),isEasterEggOpen&&(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in`,onClick:()=>setIsEasterEggOpen(!1),children:(0,import_jsx_runtime.jsx)(`div`,{className:`bg-[var(--bg-card)] rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border border-[var(--border-color)] animate-scale-up`,onClick:e$4=>e$4.stopPropagation(),children:(0,import_jsx_runtime.jsxs)(`div`,{className:`p-6 flex flex-col items-center text-center space-y-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-16 h-16 bg-yellow-100/50 rounded-full flex items-center justify-center text-yellow-500 mb-2 ring-4 ring-yellow-50`,children:(0,import_jsx_runtime.jsx)(Gift,{size:32})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xl font-bold text-[var(--text-primary)]`,children:` !`}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-[var(--text-secondary)] text-sm mt-2`,children:[`  .`,(0,import_jsx_runtime.jsx)(`br`,{}),`  ?`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 w-full mt-4`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsEasterEggOpen(!1),className:`flex-1 px-4 py-2.5 rounded-xl border border-[var(--border-color)] text-[var(--text-secondary)] font-medium hover:bg-[var(--bg-card-secondary)] transition-colors`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{setIsEasterEggOpen(!1),navigate(`/season-greeting`)},className:`flex-1 px-4 py-2.5 rounded-xl bg-gradient-to-r from-yellow-400 to-orange-400 text-white font-bold hover:opacity-90 transition-opacity shadow-md shadow-orange-500/20`,children:``})]})]})})})]})},PostAlbumView_default=PostAlbumView,CreateFolderModal=({isOpen,onClose,onCreate,showConfirmModal})=>{let[name,setName]=(0,import_react.useState)(``);if(!isOpen)return null;let handleCreate=async()=>{if(!name.trim()){showConfirmModal?showConfirmModal(` `,`  .`,`danger`,void 0,!0):alert(`  .`);return}await onCreate(name)&&(setName(``),onClose())};return(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in`,onClick:onClose,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-modal)] rounded-2xl w-full max-w-sm p-6 shadow-2xl transform transition-all animate-scale-up border border-[var(--border-color)] backdrop-blur-md`,onClick:e$4=>e$4.stopPropagation(),children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center mb-6`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`text-xl font-bold text-[var(--text-primary)] flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Folder,{className:`text-indigo-500`,size:24}),` `]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition`,children:(0,import_jsx_runtime.jsx)(X,{size:24})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-5`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`block text-sm font-bold text-[var(--text-secondary)] mb-2`,children:[`  `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:name,onChange:e$4=>setName(e$4.target.value),onKeyDown:e$4=>{e$4.key===`Enter`&&handleCreate()},autoFocus:!0,placeholder:`: , , `,className:`w-full px-4 py-3 rounded-xl border border-[var(--border-color)] bg-[var(--bg-card-secondary)] text-[var(--text-primary)] focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3 mt-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`flex-1 py-3 px-4 bg-[var(--bg-card-secondary)] text-[var(--text-secondary)] rounded-xl font-bold hover:bg-[var(--border-color)] transition`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleCreate,className:`flex-1 py-3 px-4 bg-[var(--btn-bg)] text-[var(--btn-text)] rounded-xl font-bold hover:opacity-90 shadow-lg shadow-indigo-500/20 transition`,children:``})]})]})]})})},CreateFolderModal_default=CreateFolderModal,getAuthHeaders=()=>{let token=localStorage.getItem(`accessToken`);return{"Content-Type":`application/json`,Authorization:`Bearer ${token}`}},BASE_URL$1=``;const createCycleApi=async(roomId,payload)=>{let numericId=cleanId(roomId),response=await fetch(`${BASE_URL$1}/api/rooms/${numericId}/cycles`,{method:`POST`,headers:getAuthHeaders(),body:JSON.stringify(payload)});if(!response.ok){let errorMsg=`  .`;try{let errData=await response.json();errData.message&&(errorMsg=errData.message)}catch{try{let text=await response.text();text&&text.length<200&&(errorMsg=text)}catch{}}throw response.status===403||response.status===400||errorMsg.includes(``)||errorMsg.includes(`Access Denied`)||errorMsg.toLowerCase().includes(`owner`)?Error(`     .`):Error(errorMsg)}return await response.json()},fetchRoomCyclesApi=async roomId=>{let numericId=cleanId(roomId),response=await fetch(`${BASE_URL$1}/api/rooms/${numericId}/cycles`,{headers:getAuthHeaders()});return response.ok?await response.json():(console.warn(`Fetched cycles failed or empty`),[])},fetchCycleDetailApi=async cycleId=>{let response=await fetch(`${BASE_URL$1}/api/cycles/${cycleId}`,{headers:getAuthHeaders()});if(!response.ok)throw Error(`Failed to fetch cycle detail`);return await response.json()},fetchCycleContentApi=async cycleId=>{let response=await fetch(`${BASE_URL$1}/api/cycles/${cycleId}/content`,{headers:getAuthHeaders()});if(response.status===204||response.status===404)return null;if(!response.ok)throw Error(`Failed to fetch cycle content`);let text=await response.text();return text?JSON.parse(text):null},saveCycleContentApi=async(cycleId,data)=>{if(!(await fetch(`${BASE_URL$1}/api/cycles/${cycleId}/content`,{method:`POST`,headers:getAuthHeaders(),body:JSON.stringify(data)})).ok)throw Error(`Failed to save cycle content`)},passTurnApi=async cycleId=>{let response=await fetch(`${BASE_URL$1}/api/cycles/${cycleId}/pass`,{method:`POST`,headers:getAuthHeaders()});if(!response.ok)throw Error(`Failed to pass turn`);return await response.json()};var NewCycleModal=({isOpen,onClose,roomId,onSuccess,showConfirmModal})=>{let[title,setTitle]=(0,import_react.useState)(``),[type,setType]=(0,import_react.useState)(`ROLLING_PAPER`),[members,setMembers]=(0,import_react.useState)([]),[selectedMemberIds,setSelectedMemberIds]=(0,import_react.useState)([]),[isLoading,setIsLoading]=(0,import_react.useState)(!1),[isSubmitting,setIsSubmitting]=(0,import_react.useState)(!1);(0,import_react.useEffect)(()=>{isOpen&&(loadMembers(),setTitle(``),setSelectedMemberIds([]),setType(`ROLLING_PAPER`))},[isOpen]);let loadMembers=async()=>{setIsLoading(!0);try{setMembers(await fetchRoomMembersApi(String(roomId)))}catch(e$4){console.error(e$4)}finally{setIsLoading(!1)}},handleToggleMember=userId=>{selectedMemberIds.includes(userId)?setSelectedMemberIds(prev=>prev.filter(id$3=>id$3!==userId)):setSelectedMemberIds(prev=>[...prev,userId])};return isOpen?(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-modal)] rounded-2xl shadow-xl w-full max-w-md overflow-hidden flex flex-col border border-[var(--border-color)] max-h-[85vh]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`px-6 py-4 border-b border-[var(--border-color)] flex items-center justify-between`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold text-lg text-[var(--text-primary)]`,children:`  `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-2 hover:bg-[var(--bg-card-secondary)] rounded-full text-[var(--text-secondary)] hover:text-[var(--text-primary)]`,children:(0,import_jsx_runtime.jsx)(X,{size:20})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-6 overflow-y-auto space-y-6 custom-scrollbar`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-sm font-bold text-[var(--text-primary)] mb-2`,children:``}),(0,import_jsx_runtime.jsx)(`input`,{value:title,onChange:e$4=>setTitle(e$4.target.value),placeholder:`:  , `,className:`w-full p-3 rounded-xl bg-[var(--bg-card-secondary)] border border-[var(--border-color)] focus:border-indigo-500 outline-none transition-colors`})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-sm font-bold text-[var(--text-primary)] mb-2`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setType(`ROLLING_PAPER`),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${type===`ROLLING_PAPER`?`bg-indigo-50 border-indigo-500 text-indigo-700`:`bg-[var(--bg-card)] border-[var(--border-color)] text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)]`}`,children:[(0,import_jsx_runtime.jsx)(ScrollText,{size:24}),(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-sm`,children:``})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setType(`EXCHANGE_DIARY`),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${type===`EXCHANGE_DIARY`?`bg-indigo-50 border-indigo-500 text-indigo-700`:`bg-[var(--bg-card)] border-[var(--border-color)] text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)]`}`,children:[(0,import_jsx_runtime.jsx)(BookOpen,{size:24}),(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-sm`,children:``})]})]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-[var(--text-tertiary)] mt-2 pl-1`,children:type===`ROLLING_PAPER`?`      .    .`:`  .     ,    .`})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`block text-sm font-bold text-[var(--text-primary)] mb-2`,children:[`    (`,selectedMemberIds.length,`)`]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-[var(--text-secondary)] mb-3`,children:`  .`}),isLoading?(0,import_jsx_runtime.jsx)(`div`,{className:`py-4 text-center text-sm text-[var(--text-tertiary)]`,children:`  ...`}):(0,import_jsx_runtime.jsx)(`div`,{className:`space-y-2 max-h-[200px] overflow-y-auto pr-1 custom-scrollbar`,children:members.map(member=>{let selectedIndex=selectedMemberIds.indexOf(member.userId),isSelected=selectedIndex!==-1;return(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>handleToggleMember(member.userId),className:`flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all ${isSelected?`bg-indigo-50 border-indigo-200`:`bg-[var(--bg-card-secondary)] border-[var(--border-color)] hover:border-indigo-300`}`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${isSelected?`bg-indigo-200 text-indigo-700`:`bg-gray-200 text-gray-500`}`,children:member.nickname?.substring(0,2).toUpperCase()}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-medium ${isSelected?`text-indigo-900`:`text-[var(--text-primary)]`}`,children:member.nickname})]}),isSelected&&(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold bg-indigo-500 text-white px-2 py-0.5 rounded-full`,children:selectedIndex+1})})]},member.userId)})})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-6 border-t border-[var(--border-color)] flex justify-end gap-3`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`px-5 py-2.5 rounded-xl font-bold text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)] transition-colors`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:async()=>{if(!title.trim()){showConfirmModal?showConfirmModal(` `,`  .`,`danger`,void 0,!0):alert(`  .`);return}if(selectedMemberIds.length===0){showConfirmModal?showConfirmModal(` `,`   1  .`,`danger`,void 0,!0):alert(`   1  .`);return}setIsSubmitting(!0);try{await createCycleApi(roomId,{title,type,targetMemberIds:selectedMemberIds,timeLimitHours:type===`EXCHANGE_DIARY`?24:720}),onSuccess(),onClose()}catch(error$1){console.error(error$1);let errMsg=error$1.message||`    .`;showConfirmModal?showConfirmModal(` `,errMsg,`danger`,void 0,!0):alert(errMsg)}finally{setIsSubmitting(!1)}},disabled:isSubmitting||!title||selectedMemberIds.length===0,className:`px-6 py-2.5 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-500/30 disabled:opacity-50 disabled:shadow-none`,children:isSubmitting?` ...`:` `})]})]})}):null},NewCycleModal_default=NewCycleModal,RoomCycleList=({roomId,refreshTrigger})=>{let navigate=useNavigate(),[cycles,setCycles]=(0,import_react.useState)([]),[isLoading,setIsLoading]=(0,import_react.useState)(!1);(0,import_react.useEffect)(()=>{loadCycles()},[roomId,refreshTrigger]);let loadCycles=async()=>{setIsLoading(!0);try{setCycles(await fetchRoomCyclesApi(roomId))}catch(e$4){console.error(e$4)}finally{setIsLoading(!1)}};if(isLoading&&cycles.length===0)return(0,import_jsx_runtime.jsx)(`div`,{className:`py-4 text-center text-xs text-gray-400`,children:`  ...`});if(cycles.length===0)return null;let ongoing=cycles.filter(c$3=>c$3.status!==`COMPLETED`),completed=cycles.filter(c$3=>c$3.status===`COMPLETED`),renderCycleCard=cycle=>(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>navigate(`/cycles/${cycle.id}`),className:`bg-white p-5 rounded-xl border border-[var(--border-color)] shadow-sm hover:shadow-md transition-all cursor-pointer group flex items-start gap-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-3 rounded-xl ${cycle.type===`ROLLING_PAPER`?`bg-orange-50 text-orange-500`:`bg-blue-50 text-blue-500`}`,children:cycle.type===`ROLLING_PAPER`?(0,import_jsx_runtime.jsx)(ScrollText,{size:24}):(0,import_jsx_runtime.jsx)(BookOpen,{size:24})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between mb-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold text-[var(--text-tertiary)] bg-[var(--bg-main)] px-1.5 py-0.5 rounded`,children:cycle.type===`ROLLING_PAPER`?``:``}),cycle.status===`COMPLETED`?(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 text-green-500 text-xs font-bold`,children:[(0,import_jsx_runtime.jsx)(CircleCheck,{size:12}),` `]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 text-xs font-bold ${cycle.isMyTurn?`text-indigo-500`:`text-[var(--text-tertiary)]`}`,children:[cycle.isMyTurn?(0,import_jsx_runtime.jsx)(Clock,{size:12}):(0,import_jsx_runtime.jsx)(Lock,{size:12}),cycle.isMyTurn?` `:` `]})]}),(0,import_jsx_runtime.jsx)(`h4`,{className:`font-bold truncate mb-1 transition-colors ${cycle.isMyTurn?`text-[var(--text-primary)] group-hover:text-indigo-600`:`text-[var(--text-secondary)]`}`,children:cycle.title}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-xs text-[var(--text-secondary)] flex items-center gap-2`,children:[(0,import_jsx_runtime.jsxs)(`span`,{children:[` `,cycle.totalMembers??`-`,``]}),cycle.status===`IN_PROGRESS`&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`w-1 h-1 rounded-full bg-gray-300`}),(0,import_jsx_runtime.jsx)(`span`,{className:cycle.isMyTurn?`text-indigo-600 font-bold`:``,children:(()=>{if(cycle.isMyTurn)return`!`;let currentMember=cycle.members?.find(m$3=>(m$3.order??m$3.turnOrder)===cycle.currentTurnOrder);return currentMember?`${currentMember.nickname}  `:`  `})()})]})]})]})]},cycle.id);return(0,import_jsx_runtime.jsxs)(`div`,{className:`mb-8 space-y-8`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-indigo-500`,children:``}),`   `]}),ongoing.length===0?(0,import_jsx_runtime.jsx)(`div`,{className:`text-sm text-[var(--text-secondary)] py-4`,children:`   .`}):(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4`,children:ongoing.map(renderCycleCard)})]}),completed.length>0&&(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-green-500`,children:``}),`  `]}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4`,children:completed.map(renderCycleCard)})]})]})},RoomCycleList_default=RoomCycleList,PostThumbnail=({post,width=300,height=300})=>{let baseWidth=800,scale$1=width/800,noop$10=()=>{};return(0,import_jsx_runtime.jsx)(`div`,{style:{width:`100%`,height:`100%`,overflow:`hidden`,position:`relative`,backgroundColor:`#ffffff`},className:`pointer-events-none select-none`,children:(0,import_jsx_runtime.jsx)(`div`,{style:{transform:`scale(${scale$1})`,transformOrigin:`top left`,width:`800px`,height:`${height/scale$1}px`,position:`absolute`,top:0,left:0},children:(0,import_jsx_runtime.jsx)(EditorCanvas_default,{title:post.title,setTitle:noop$10,titleStyles:post.titleStyles||{fontSize:`30px`,fontWeight:`bold`,fontFamily:`'Noto Sans KR', sans-serif`,color:`#000000`,textAlign:`left`},paperStyles:post.styles||{},viewMode:`read`,blocks:post.blocks||[],setBlocks:noop$10,stickers:post.stickers||[],floatingTexts:post.floatingTexts||[],floatingImages:post.floatingImages||[],selectedId:null,selectedType:null,onSelect:noop$10,onUpdate:noop$10,onDelete:noop$10,onBlockImageUpload:noop$10,onBackgroundClick:noop$10})})})},PostThumbnail_default=PostThumbnail,DraggablePost=({id:id$3,children:children$1})=>{let{attributes,listeners,setNodeRef,transform:transform$1,isDragging:isDragging$2}=useDraggable({id:id$3});return(0,import_jsx_runtime.jsx)(`div`,{ref:setNodeRef,style:{transform:CSS$1.Translate.toString(transform$1),zIndex:isDragging$2?100:void 0,opacity:isDragging$2?.5:1,touchAction:`none`},...listeners,...attributes,children:children$1})},DroppableFolder=({id:id$3,children:children$1})=>{let{setNodeRef,isOver}=useDroppable({id:id$3});return(0,import_jsx_runtime.jsx)(`div`,{ref:setNodeRef,style:{transform:isOver?`scale(1.05)`:void 0,transition:`transform 0.2s ease`,boxShadow:isOver?`0 0 0 2px var(--btn-bg, #6366f1)`:void 0,borderRadius:`12px`},children:children$1})},PostFolderView=({albumId,allPosts,onPostClick,onStartWriting,onCreateAlbum,customAlbums,onAlbumClick,onDeletePost,onDeleteAlbum,onToggleFavorite,onRefresh,showConfirmModal})=>{let[isCreateFolderOpen,setIsCreateFolderOpen]=(0,import_react.useState)(!1),[roomSettingsId,setRoomSettingsId]=(0,import_react.useState)(null),[isCycleModalOpen,setIsCycleModalOpen]=(0,import_react.useState)(!1),[showFavoritesOnly,setShowFavoritesOnly]=(0,import_react.useState)(!1),[contents,setContents]=(0,import_react.useState)([]),[currentAlbum,setCurrentAlbum]=(0,import_react.useState)(null),[isLoading,setIsLoading]=(0,import_react.useState)(!1),[isAddModalOpen,setIsAddModalOpen]=(0,import_react.useState)(!1),[refreshKey,setRefreshKey]=(0,import_react.useState)(0),loadContents=async()=>{if(albumId){contents.length===0&&setIsLoading(!0);try{let api=await __vitePreload(()=>import(`./api-CMlSC-gz.js`),[]),type=customAlbums.find(a$4=>String(a$4.id)===String(albumId))?.type||`album`,realId=String(albumId).replace(`room-`,``);if(setContents(await api.fetchAlbumContents(realId,allPosts,customAlbums,type)),albumId!==`__all__`&&albumId!==`__others__`){let albumInfo;albumInfo=type===`room`?await api.fetchRoomApi(realId):await api.fetchAlbumApi(realId),albumInfo&&setCurrentAlbum({id:String(albumId),name:albumInfo.name,parentId:albumInfo.parentId?String(albumInfo.parentId):null,type:albumInfo.type||type})}else setCurrentAlbum(null)}catch(e$4){console.error(`Failed to load album contents`,e$4)}finally{setIsLoading(!1)}}};(0,import_react.useEffect)(()=>{loadContents()},[albumId,allPosts,customAlbums]);let folders=contents.filter(c$3=>c$3.type===`FOLDER`).map(c$3=>c$3.data),localPosts=contents.filter(c$3=>c$3.type===`POST`).map(c$3=>c$3.data),displayedPosts=showFavoritesOnly?localPosts.filter(p$3=>p$3.isFavorite):localPosts,isRoom=import_react.useMemo(()=>albumId?customAlbums.find(a$4=>String(a$4.id)===String(albumId))?.type===`room`||String(albumId).startsWith(`room-`):!1,[albumId,customAlbums]),augmentedAlbums=import_react.useMemo(()=>!currentAlbum||customAlbums.some(a$4=>String(a$4.id)===String(currentAlbum.id))?customAlbums:[...customAlbums,currentAlbum],[customAlbums,currentAlbum]),breadcrumbItems=useBreadcrumbs(albumId,augmentedAlbums,onAlbumClick),handleManageItem=async(action,type,id$3)=>{if(!albumId)return;let api=await __vitePreload(()=>import(`./api-CMlSC-gz.js`),[]),realAlbumId=String(albumId).replace(`room-`,``),containerType=customAlbums.find(a$4=>String(a$4.id)===String(albumId))?.type===`room`||String(albumId).startsWith(`room-`)?`room`:`album`;await api.manageAlbumItem(realAlbumId,action,type,id$3,void 0,containerType),loadContents(),onRefresh?.()},getRecursiveStats=targetId=>{let count=customAlbums.find(a$4=>String(a$4.id)===targetId)?.postCount??0;return{count,totalCount:count}},handleCreateFolder=name=>onCreateAlbum(name,[],albumId),handleDragEnd=async event=>{let{active,over}=event;if(!over||!localPosts.some(p$3=>String(p$3.id)===String(active.id)))return;let overData=over.data.current,targetFolderId=null;if(targetFolderId=overData?.type===`BREADCRUMB`?overData.albumId===void 0||overData.albumId===null?null:String(overData.albumId):String(over.id),String(active.id)===String(targetFolderId))return;let previousContents=[...contents];setContents(prev=>{let newContents=[];return prev.forEach(item=>{if(!(item.type===`POST`&&String(item.data.id)===String(active.id))){if(item.type===`FOLDER`&&String(item.data.id)===String(targetFolderId)){newContents.push({...item,data:{...item.data,postCount:(item.data.postCount||0)+1}});return}newContents.push(item)}}),newContents});try{let api=await __vitePreload(()=>import(`./api-CMlSC-gz.js`),[]),success=!1,targetIsRoom=targetFolderId?String(targetFolderId).startsWith(`room-`):!1,realTargetId=targetFolderId?String(targetFolderId).replace(`room-`,``):`__all__`;if(albumId&&albumId!==`__all__`&&albumId!==`__others__`){let realAlbumId=String(albumId).replace(`room-`,``);success=await api.manageAlbumItem(realTargetId,`MOVE`,`POST`,active.id,realAlbumId,targetIsRoom?`room`:`album`)}else success=await api.manageAlbumItem(realTargetId,`ADD`,`POST`,active.id,void 0,targetIsRoom?`room`:`album`);if(success)onRefresh?.();else throw Error(`API Failed`)}catch(e$4){console.error(`Move failed, rolling back`,e$4),setContents(previousContents),alert(` .`)}},sensors=useSensors(useSensor(MouseSensor,{activationConstraint:{distance:10}}),useSensor(TouchSensor,{activationConstraint:{delay:250,tolerance:5}})),[selectedPickerIds,setSelectedPickerIds]=(0,import_react.useState)([]),pickerCandidates=allPosts.filter(p$3=>!localPosts.some(lp=>lp.id===p$3.id));return(0,import_jsx_runtime.jsx)(DndContext,{onDragEnd:handleDragEnd,sensors,children:(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row items-start md:items-center justify-between mb-8 relative z-50 space-y-4 md:space-y-0`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-4 w-full md:w-auto`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{let parent=augmentedAlbums.find(a$4=>String(a$4.id)===String(albumId))?.parentId;onAlbumClick(parent||null)},className:`p-3 hover:bg-[var(--bg-card-secondary)] rounded-full transition text-[var(--text-secondary)] hover:text-[var(--text-primary)]`,children:(0,import_jsx_runtime.jsx)(ArrowLeft,{size:24})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center text-lg font-medium overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(PostBreadcrumb_default,{items:breadcrumbItems}),!isRoom&&(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setShowFavoritesOnly(!showFavoritesOnly),className:`ml-3 p-1.5 rounded-full transition-all ${showFavoritesOnly?`bg-yellow-100 text-yellow-500 shadow-sm`:`text-[var(--text-tertiary)] hover:bg-[var(--bg-card-secondary)] hover:text-yellow-400`}`,title:showFavoritesOnly?`  `:` `,children:(0,import_jsx_runtime.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:showFavoritesOnly?`currentColor`:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,import_jsx_runtime.jsx)(`polygon`,{points:`12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2`})})}),(()=>augmentedAlbums.find(a$4=>String(a$4.id)===String(albumId))?.type===`room`?(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setRoomSettingsId(albumId),className:`ml-2 p-1.5 text-indigo-500 hover:bg-indigo-50 rounded-full transition-colors`,title:` `,children:(0,import_jsx_runtime.jsx)(Users,{size:18})}):null)()]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-wrap items-center gap-2 md:gap-3 w-full md:w-auto justify-start md:justify-end pb-2 md:pb-0`,children:(()=>customAlbums.find(a$4=>String(a$4.id)===String(albumId))?.type===`room`||String(albumId).startsWith(`room-`)?(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsCycleModalOpen(!0),className:`flex items-center gap-2 px-4 md:px-6 h-10 md:h-12 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-700 transition-all shadow-md shadow-indigo-500/20 text-sm md:text-base whitespace-nowrap flex-shrink-0 flex-1 md:flex-none justify-center`,children:[(0,import_jsx_runtime.jsx)(PenLine,{size:20}),`  `]}):(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[albumId&&albumId!==`__all__`&&albumId!==`__others__`&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsAddModalOpen(!0),className:`flex items-center gap-2 px-4 h-10 md:h-12 text-sm md:text-base font-bold text-[var(--text-secondary)] bg-[var(--bg-card)] border border-[var(--border-color)] hover:bg-[var(--bg-card-secondary)] hover:text-[var(--text-primary)] rounded-xl transition-colors whitespace-nowrap flex-shrink-0`,children:[(0,import_jsx_runtime.jsx)(Folder,{size:18}),` `]}),albumId!==`__all__`&&!augmentedAlbums.find(a$4=>String(a$4.id)===String(albumId))?.parentId&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsCreateFolderOpen(!0),className:`flex items-center gap-2 px-4 h-10 md:h-12 text-sm md:text-base font-bold text-indigo-600 bg-indigo-50 hover:bg-indigo-100 rounded-xl transition-colors border border-transparent hover:border-indigo-200 whitespace-nowrap flex-shrink-0`,children:[(0,import_jsx_runtime.jsx)(Folder,{size:18}),` `]}),albumId&&albumId!==`__all__`&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>onStartWriting(albumId),className:`flex items-center gap-2 px-4 md:px-6 h-10 md:h-12 rounded-xl bg-[var(--btn-bg)] text-[var(--btn-text)] font-bold hover:opacity-90 transition-all shadow-md shadow-indigo-500/20 text-sm md:text-base whitespace-nowrap flex-shrink-0 flex-1 md:flex-none justify-center`,children:[(0,import_jsx_runtime.jsx)(PenLine,{size:20}),` `]})]}))()})]}),(()=>customAlbums.find(a$4=>String(a$4.id)===String(albumId))?.type===`room`||String(albumId).startsWith(`room-`)?(0,import_jsx_runtime.jsx)(RoomCycleList_default,{roomId:String(albumId).replace(`room-`,``),refreshTrigger:refreshKey}):null)(),folders.length>0&&(0,import_jsx_runtime.jsxs)(`div`,{className:`mb-8`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Folder,{size:20,className:`text-yellow-500`}),``]}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4`,children:folders.map(album=>(0,import_jsx_runtime.jsx)(DroppableFolder,{id:album.id,children:(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>onAlbumClick(album.id),className:`bg-[var(--bg-card)] p-4 rounded-xl border border-[var(--border-color)] hover:shadow-md transition cursor-pointer flex flex-col items-center justify-center gap-2 group relative h-full`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onDeleteAlbum(album.id)},className:`absolute top-2 right-2 p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full opacity-0 group-hover:opacity-100 transition-all z-10`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:16})}),album.type===`room`&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-2 left-2 z-20 bg-black/60 backdrop-blur-sm text-white p-1 rounded-full shadow-sm`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center justify-center w-4 h-4`,children:album.roomConfig?.password?(0,import_jsx_runtime.jsx)(Lock,{size:10}):(0,import_jsx_runtime.jsx)(Users,{size:10})})}),(0,import_jsx_runtime.jsx)(Folder,{size:40,className:`transition-colors ${album.type===`room`?`text-indigo-400`:`text-indigo-200 group-hover:text-indigo-400`}`}),album.parentName&&(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-indigo-500 font-medium bg-indigo-50 px-1.5 py-0.5 rounded-md truncate max-w-full`,children:album.parentName}),(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-[var(--text-primary)] truncate max-w-full text-center`,children:album.name}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] text-[var(--text-secondary)]`,children:[album.type===`room`?``:album.id===`__others__`?` `:``,(0,import_jsx_runtime.jsx)(`span`,{className:`mx-1`,children:``}),(()=>album.postCount===void 0?`${getRecursiveStats(String(album.id)).totalCount}`:`${album.postCount}`)()]})]})},album.id))})]}),!isRoom&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2`,children:showFavoritesOnly?(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-yellow-500`,children:``}),` (`,displayedPosts.length,`)`]}):` (${displayedPosts.length})`}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4`,children:displayedPosts.length===0?(0,import_jsx_runtime.jsx)(`div`,{className:`col-span-full py-20 text-center text-gray-400`,children:isLoading?` ...`:showFavoritesOnly?`  .`:`    .`}):displayedPosts.map(p$3=>(0,import_jsx_runtime.jsx)(DraggablePost,{id:p$3.id,children:(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>onPostClick(p$3),className:`bg-[var(--bg-card)] rounded-xl shadow-sm border border-[var(--border-color)] hover:shadow-md cursor-pointer transition transform hover:-translate-y-1 relative group h-80 flex flex-col overflow-hidden`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`h-[60%] w-full bg-white relative overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(PostThumbnail_default,{post:p$3,width:400,height:320}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-black/10 to-transparent pointer-events-none`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`h-[40%] p-5 flex flex-col justify-between bg-[var(--bg-card)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-start justify-between gap-2`,children:[(0,import_jsx_runtime.jsx)(`h4`,{className:`font-bold text-[var(--text-primary)] text-lg line-clamp-1 leading-tight`,children:p$3.title}),p$3.visibility===`private`&&(0,import_jsx_runtime.jsx)(`div`,{className:`text-gray-400 p-0.5`,title:` `,children:(0,import_jsx_runtime.jsx)(Lock,{size:14})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap gap-1.5 items-center`,children:[p$3.tags?.includes(`#`)&&(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] font-bold text-orange-600 bg-orange-50 border border-orange-100 px-2 py-0.5 rounded-md flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`w-1.5 h-1.5 rounded-full bg-orange-500 animate-pulse`}),``]}),p$3.tags&&p$3.tags.filter(t$4=>t$4!==`#`).length>0?(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[p$3.tags.filter(t$4=>t$4!==`#`).slice(0,2).map(t$4=>(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[11px] font-medium text-indigo-500 bg-indigo-50/50 px-2 py-0.5 rounded-md truncate max-w-[80px]`,children:[`#`,t$4]},t$4)),p$3.tags.filter(t$4=>t$4!==`#`).length>2&&(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] text-[var(--text-secondary)] font-medium`,children:[`+`,p$3.tags.filter(t$4=>t$4!==`#`).length-2]})]}):!p$3.tags?.includes(`#`)&&(0,import_jsx_runtime.jsx)(`span`,{className:`text-[11px] text-[var(--text-secondary)] opacity-50`,children:` `})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-end justify-between mt-2 pt-2 border-t border-[var(--border-color)]/50`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[11px] font-medium text-[var(--text-secondary)] tracking-tight`,children:p$3.date}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-1`,onPointerDown:e$4=>e$4.stopPropagation(),children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onToggleFavorite(p$3.id)},className:`p-1.5 rounded-lg transition-all ${p$3.isFavorite?`text-yellow-400 bg-yellow-400/10`:`text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)] hover:text-[var(--text-primary)]`}`,title:``,children:(0,import_jsx_runtime.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:p$3.isFavorite?`currentColor`:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,import_jsx_runtime.jsx)(`polygon`,{points:`12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2`})})}),albumId===`__all__`||albumId===`__others__`?(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onDeletePost(p$3.id)},className:`p-1.5 text-[var(--text-secondary)] hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors`,title:` `,children:(0,import_jsx_runtime.jsx)(Trash2,{size:16})}):(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),showConfirmModal&&showConfirmModal(` `,`  ?`,`danger`,()=>{handleManageItem(`REMOVE`,`POST`,p$3.id)})},className:`p-1.5 text-[var(--text-secondary)] hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors`,title:` `,children:(0,import_jsx_runtime.jsx)(Trash2,{size:16})})]})]})]})]})},p$3.id))})]}),(0,import_jsx_runtime.jsx)(CreateFolderModal_default,{isOpen:isCreateFolderOpen,onClose:()=>setIsCreateFolderOpen(!1),onCreate:handleCreateFolder,showConfirmModal}),isAddModalOpen&&(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-modal)] rounded-2xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col max-h-[80vh] border border-[var(--border-color)] backdrop-blur-md`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`px-6 py-4 border-b border-[var(--border-color)] flex items-center justify-between`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold text-lg text-[var(--text-primary)]`,children:` `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsAddModalOpen(!1),className:`p-2 hover:bg-[var(--bg-card-secondary)] rounded-full text-[var(--text-secondary)] hover:text-[var(--text-primary)]`,children:(0,import_jsx_runtime.jsx)(X,{size:24})})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 overflow-y-auto space-y-2 flex-1 custom-scrollbar`,children:pickerCandidates.length===0?(0,import_jsx_runtime.jsx)(`div`,{className:`text-center py-10 text-[var(--text-tertiary)]`,children:`    .`}):pickerCandidates.map(p$3=>(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>{selectedPickerIds.includes(String(p$3.id))?setSelectedPickerIds(prev=>prev.filter(id$3=>id$3!==String(p$3.id))):setSelectedPickerIds(prev=>[...prev,String(p$3.id)])},className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-colors ${selectedPickerIds.includes(String(p$3.id))?`border-indigo-500 bg-indigo-50/10`:`border-[var(--border-color)] hover:bg-[var(--bg-card-secondary)]`}`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-5 h-5 rounded-full border flex items-center justify-center ${selectedPickerIds.includes(String(p$3.id))?`bg-indigo-500 border-indigo-500`:`border-[var(--border-color)] bg-[var(--bg-card-secondary)]`}`,children:selectedPickerIds.includes(String(p$3.id))&&(0,import_jsx_runtime.jsx)(`div`,{className:`w-2 h-2 bg-white rounded-full`})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`div`,{className:`font-bold text-sm text-[var(--text-primary)]`,children:p$3.title}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs text-[var(--text-secondary)]`,children:p$3.date})]})]},p$3.id))}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 border-t border-[var(--border-color)] flex justify-end gap-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsAddModalOpen(!1),className:`px-4 py-2 text-sm font-bold text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)] rounded-lg transition-colors`,children:``}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:async()=>{for(let id$3 of selectedPickerIds)await handleManageItem(`ADD`,`POST`,id$3);setSelectedPickerIds([]),setIsAddModalOpen(!1)},disabled:selectedPickerIds.length===0,className:`px-6 py-2 text-sm font-bold bg-[var(--btn-bg)] text-[var(--btn-text)] rounded-lg hover:opacity-90 disabled:opacity-50 transition-all shadow-md shadow-indigo-500/20`,children:[selectedPickerIds.length,` `]})]})]})}),roomSettingsId&&(0,import_jsx_runtime.jsx)(RoomSettingsModal_default,{isOpen:!!roomSettingsId,onClose:()=>setRoomSettingsId(null),album:augmentedAlbums.find(a$4=>a$4.id===roomSettingsId)}),(0,import_jsx_runtime.jsx)(NewCycleModal_default,{isOpen:isCycleModalOpen,onClose:()=>setIsCycleModalOpen(!1),roomId:String(albumId).replace(`room-`,``),showConfirmModal,onSuccess:()=>{loadContents(),onRefresh?.(),setRefreshKey(prev=>prev+1)}})]})})},PostFolderView_default=PostFolderView,CreateAlbumModal=({isOpen,onClose,onSave,showConfirmModal})=>{let[name,setName]=(0,import_react.useState)(``),[selectedTag,setSelectedTag]=(0,import_react.useState)(null),[mode,setMode]=(0,import_react.useState)(`album`),[description,setDescription]=(0,import_react.useState)(``),[password,setPassword]=(0,import_react.useState)(``),[coverConfig,setCoverConfig]=(0,import_react.useState)({type:`solid`,value:COVER_COLORS[0].value,spineColor:COVER_COLORS[0].spine,labelColor:COVER_COLORS[0].text}),[isEditingCover,setIsEditingCover]=(0,import_react.useState)(!1);if(!isOpen)return null;let generatePassword=()=>{let chars=`0123456789`,pw=``;for(let i$4=0;i$4<4;i$4++)pw+=`0123456789`.charAt(Math.floor(Math.random()*10));setPassword(pw)},handleSave=async()=>{if(!name.trim()){showConfirmModal?showConfirmModal(` `,` .`,`danger`,void 0,!0):alert(` .`);return}try{mode===`room`?await onSave(name,selectedTag||null,null,`room`,{description,password:password||void 0},coverConfig):await onSave(name,selectedTag||null,null,`album`,void 0,coverConfig),handleClose()}catch{}},handleClose=()=>{setName(``),setSelectedTag(null),setMode(`album`),setDescription(``),setPassword(``),setCoverConfig({type:`solid`,value:COVER_COLORS[0].value,spineColor:COVER_COLORS[0].spine,labelColor:COVER_COLORS[0].text}),setIsEditingCover(!1),onClose()};return(0,import_jsx_runtime.jsxs)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-modal)] rounded-2xl w-full max-w-2xl p-6 shadow-2xl transform transition-all animate-scale-up max-h-[90vh] overflow-y-auto custom-scrollbar backdrop-blur-md ${isEditingCover?`hidden`:``}`,children:[` `,(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center mb-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 bg-[var(--bg-card-secondary)] p-1 rounded-lg`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setMode(`album`),className:`px-3 py-1.5 rounded-md text-sm font-bold transition-all flex items-center gap-1.5 ${mode===`album`?`bg-white shadow text-black`:`text-gray-500 hover:text-gray-700 hover:bg-black/5`}`,children:[(0,import_jsx_runtime.jsx)(Folder,{size:14}),`  `]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setMode(`room`),className:`px-3 py-1.5 rounded-md text-sm font-bold transition-all flex items-center gap-1.5 ${mode===`room`?`bg-indigo-500 shadow text-white`:`text-gray-500 hover:text-gray-700 hover:bg-black/5`}`,children:[(0,import_jsx_runtime.jsx)(Users,{size:14}),` `]})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleClose,className:`text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition`,children:(0,import_jsx_runtime.jsx)(X,{size:24})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-5`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`block text-sm font-bold text-[var(--text-secondary)] mb-2`,children:[mode===`room`?` `:` `,` `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:name,onChange:e$4=>setName(e$4.target.value),placeholder:mode===`room`?`:  `:`:  ,  `,className:`w-full px-4 py-3 rounded-xl border border-[var(--border-color)] bg-[var(--bg-card-secondary)] text-[var(--text-primary)] focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition`})]}),mode===`room`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4 animate-fade-in`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-sm font-bold text-[var(--text-secondary)] mb-2`,children:` `}),(0,import_jsx_runtime.jsx)(`textarea`,{value:description,onChange:e$4=>setDescription(e$4.target.value),placeholder:`   .`,rows:2,className:`w-full px-4 py-3 rounded-xl border border-[var(--border-color)] bg-[var(--bg-card-secondary)] text-[var(--text-primary)] focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition resize-none`})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`block text-sm font-bold text-[var(--text-secondary)] flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Lock,{size:14}),`   `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:generatePassword,className:`text-xs text-indigo-500 font-bold hover:underline`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:password,onChange:e$4=>setPassword(e$4.target.value),placeholder:`    `,className:`w-full px-4 py-3 rounded-xl border border-[var(--border-color)] bg-[var(--bg-card-secondary)] text-[var(--text-primary)] focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition pl-10`,maxLength:8}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute left-3 top-1/2 -translate-y-1/2 text-gray-400`,children:(0,import_jsx_runtime.jsx)(Lock,{size:16})})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`block text-sm font-bold text-[var(--text-secondary)] mb-2`,children:[` `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-normal text-[var(--text-tertiary)]`,children:`()`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full px-4 py-3 rounded-xl border border-[var(--border-color)] focus-within:border-indigo-500 focus-within:ring-2 focus-within:ring-indigo-200 transition bg-[var(--bg-card-secondary)] flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-indigo-500 font-bold ml-1`,children:`#`}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:selectedTag||``,onChange:e$4=>setSelectedTag(e$4.target.value),placeholder:` `,className:`flex-1 outline-none bg-transparent font-medium text-[var(--text-primary)] placeholder-[var(--text-secondary)]`,maxLength:10})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-sm font-bold text-[var(--text-secondary)]`,children:` `}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsEditingCover(!0),className:`text-indigo-600 text-xs font-bold flex items-center gap-1 hover:underline`,children:[(0,import_jsx_runtime.jsx)(Sparkles,{size:12}),``]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-center bg-[var(--bg-card-secondary)] rounded-xl p-6 border border-[var(--border-color)] relative`,children:[(0,import_jsx_runtime.jsx)(AlbumBook_default,{title:name||(mode===`room`?` `:` `),tag:selectedTag||void 0,config:coverConfig,className:`w-32 shadow-md`}),mode===`room`&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-4 right-4 bg-white/50 backdrop-blur-sm p-1.5 rounded-full z-10`,children:(0,import_jsx_runtime.jsx)(Users,{size:16,className:`text-indigo-600`})})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3 mt-4 pt-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:handleClose,className:`flex-1 py-3 px-4 bg-[var(--bg-card-secondary)] text-[var(--text-secondary)] rounded-xl font-bold hover:bg-[var(--border-color)] transition`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleSave,className:`flex-1 py-3 px-4 rounded-xl font-bold hover:opacity-90 shadow-lg shadow-indigo-500/20 transition text-[var(--btn-text)] ${mode===`room`?`bg-indigo-600`:`bg-[var(--btn-bg)]`}`,children:mode===`room`?` `:selectedTag?` `:` `})]})]})]}),isEditingCover&&(0,import_jsx_runtime.jsx)(CoverCustomizer_default,{albumTitle:name||(mode===`room`?` `:` `),albumTag:selectedTag||void 0,initialConfig:coverConfig,onSave:newConfig=>{setCoverConfig(newConfig),setIsEditingCover(!1)},onClose:()=>setIsEditingCover(!1)})]})},CreateAlbumModal_default=CreateAlbumModal,Post=()=>{let editor=usePostEditor(),isMobile$1=useIsMobile(),[isAlbumModalOpen,setIsAlbumModalOpen]=(0,import_react.useState)(!1);import_react.useEffect(()=>{(editor.viewMode===`album`||editor.viewMode===`folder`)&&editor.refreshPosts()},[editor.viewMode]),import_react.useEffect(()=>{let handlePostTabClick=()=>{editor.viewMode===`editor`?editor.isDirty?editor.showConfirmModal(` `,`      .
  ?`,`danger`,()=>{editor.setViewMode(`album`),editor.closeConfirmModal()}):editor.setViewMode(`album`):editor.viewMode!==`album`&&editor.setViewMode(`album`)};return window.addEventListener(`post-tab-click`,handlePostTabClick),()=>window.removeEventListener(`post-tab-click`,handlePostTabClick)},[editor.viewMode,editor.setViewMode,editor.isDirty,editor.showConfirmModal]),import_react.useEffect(()=>{let handleBeforeUnload=e$4=>{editor.viewMode===`editor`&&editor.isDirty&&(e$4.preventDefault(),e$4.returnValue=``)};return window.addEventListener(`beforeunload`,handleBeforeUnload),()=>window.removeEventListener(`beforeunload`,handleBeforeUnload)},[editor.viewMode,editor.isDirty]);let blocker=useBlocker(({currentLocation,nextLocation})=>editor.viewMode===`editor`&&editor.isDirty&&currentLocation.pathname!==nextLocation.pathname),{showConfirmModal,closeConfirmModal}=editor;import_react.useEffect(()=>{blocker.state===`blocked`&&showConfirmModal(` `,`    .
 ?`,`danger`,()=>{blocker.proceed(),closeConfirmModal()},!1,()=>{blocker.reset(),closeConfirmModal()})},[blocker.state,showConfirmModal,closeConfirmModal]);let handleImagesUpload=e$4=>{if(e$4.target.files){let files=Array.from(e$4.target.files);Promise.all(files.map(f$3=>new Promise(r$4=>{let rd=new FileReader;rd.onloadend=()=>r$4(rd.result),rd.readAsDataURL(f$3)}))).then(u$3=>editor.setTempImages(p$3=>[...p$3,...u$3]))}},filteredPosts=editor.selectedAlbumId===null||editor.selectedAlbumId===`__others__`?editor.posts.filter(p$3=>!p$3.albumIds||p$3.albumIds.length===0):editor.posts.filter(p$3=>{if(editor.selectedAlbumId===`__all__`||p$3.albumIds?.includes(editor.selectedAlbumId))return!0;if(!p$3.albumIds||p$3.albumIds.length===0){let targetAlbum=editor.customAlbums.find(a$4=>a$4.id===editor.selectedAlbumId);if(targetAlbum?.tag&&p$3.tags?.includes(targetAlbum.tag))return!0}return!1});return(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen pb-32`,children:[(0,import_jsx_runtime.jsx)(Navigation_default,{}),(0,import_jsx_runtime.jsx)(FloatingSettingsPanel_default,{defaultOpen:!1,isMobile:isMobile$1}),(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-7xl mx-auto px-4 py-8`,children:[editor.viewMode===`album`&&(0,import_jsx_runtime.jsx)(PostAlbumView_default,{posts:editor.posts,customAlbums:editor.customAlbums,onAlbumClick:editor.handleAlbumClick,onCreateAlbum:()=>setIsAlbumModalOpen(!0),onStartWriting:editor.handleStartWriting,onUpdateAlbum:editor.handleUpdateAlbum,onDeleteAlbum:editor.handleDeleteAlbum,sortOption:editor.sortOption,setSortOption:editor.setSortOption,onPostClick:editor.handlePostClick,onToggleFavorite:id$3=>{let post=editor.posts.find(p$3=>p$3.id===id$3);post&&editor.handleToggleFavorite(post)},handleToggleAlbumFavorite:id$3=>{let album=editor.customAlbums.find(a$4=>a$4.id===id$3);album&&editor.handleToggleAlbumFavorite(album)},showConfirmModal:editor.showConfirmModal}),editor.viewMode===`folder`&&(0,import_jsx_runtime.jsx)(PostFolderView_default,{albumId:editor.selectedAlbumId,posts:filteredPosts,allPosts:editor.posts,onPostClick:editor.handlePostClick,onStartWriting:editor.handleStartWriting,onCreateAlbum:(name,tags,parentId)=>editor.handleCreateAlbum(name,tags,parentId||void 0),customAlbums:editor.customAlbums,onAlbumClick:editor.handleAlbumClick,onDeletePost:id$3=>editor.handleDeletePost(Number(id$3)),onDeleteAlbum:editor.handleDeleteAlbum,onToggleFavorite:id$3=>{let post=editor.posts.find(p$3=>p$3.id===id$3);post&&editor.handleToggleFavorite(post)},onMovePost:()=>{},onRefresh:editor.refreshPosts,showConfirmModal:editor.showConfirmModal}),editor.viewMode===`read`&&(0,import_jsx_runtime.jsx)(PostReadView_default,{editor}),editor.viewMode===`editor`&&!editor.currentPostId&&(0,import_jsx_runtime.jsx)(PostCreateView_default,{editor,handleImagesUpload}),editor.viewMode===`editor`&&editor.currentPostId&&(0,import_jsx_runtime.jsx)(PostEditorView_default,{editor,handleImagesUpload})]}),(0,import_jsx_runtime.jsx)(CreateAlbumModal_default,{isOpen:isAlbumModalOpen,onClose:()=>setIsAlbumModalOpen(!1),albums:editor.customAlbums,showConfirmModal:editor.showConfirmModal,onSave:async(name,tag,parentId,type,roomConfig,coverConfig)=>{let tags=tag?[tag]:[],pId=parentId||void 0;await editor.handleCreateAlbum(name,tags,pId,type,roomConfig,coverConfig)&&setIsAlbumModalOpen(!1)}}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:editor.confirmModal.isOpen,title:editor.confirmModal.title,message:editor.confirmModal.message,type:editor.confirmModal.type,singleButton:editor.confirmModal.singleButton,onConfirm:()=>{editor.confirmModal.onConfirm()},onCancel:editor.confirmModal.onCancel||editor.closeConfirmModal})]})},PostPage_default=Post;function TodoItem({todo,onToggleComplete,onEdit,isReadOnly=!1}){return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3 md:gap-4 p-3 md:p-4 theme-bg-card border theme-border rounded-xl hover:shadow-md transition-all ${todo.completed?`opacity-60`:``}`,children:[!isReadOnly&&(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onToggleComplete(todo.id),className:`flex-shrink-0 theme-text-secondary transition-colors hover:opacity-80`,style:{color:todo.completed?`var(--btn-bg)`:void 0},children:todo.completed?(0,import_jsx_runtime.jsx)(CircleCheck,{className:`w-5 h-5 md:w-6 md:h-6`}):(0,import_jsx_runtime.jsx)(Circle,{className:`w-5 h-5 md:w-6 md:h-6`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-sm md:text-lg font-medium ${todo.completed?`line-through theme-text-secondary`:`theme-text-primary`}`,children:todo.title}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs md:text-sm theme-text-secondary mt-1 truncate`,children:(()=>isReadOnly?` : ${todo.startTime||``}`:todo.allDay?todo.startDate===todo.endDate?``:`${todo.startDate} - ${todo.endDate}`:todo.startDate===todo.endDate?`${todo.startTime||``} - ${todo.endTime||``}`:`${todo.startDate} ${todo.startTime||``} - ${todo.endDate} ${todo.endTime||``}`)()})]}),!isReadOnly&&(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onEdit(todo),className:`flex-shrink-0 p-2 theme-text-secondary hover:text-[var(--btn-bg)] hover:bg-black/5 rounded-lg transition-colors`,children:(0,import_jsx_runtime.jsx)(Pencil,{className:`w-4 h-4 md:w-5 md:h-5`})})]})}function TodoModal({onClose,todo,onUpdate,onDelete,onAdd:onAdd$1,initialDate}){let isEditMode=!!todo,[title,setTitle]=(0,import_react.useState)(``),[startDate,setStartDate]=(0,import_react.useState)(initialDate||`2025-12-06`),[endDate,setEndDate]=(0,import_react.useState)(initialDate||`2025-12-06`),[startTime$1,setStartTime]=(0,import_react.useState)(`09:00`),[endTime,setEndTime]=(0,import_react.useState)(`10:00`),[allDay,setAllDay]=(0,import_react.useState)(!1),[showDeleteConfirm,setShowDeleteConfirm]=(0,import_react.useState)(!1);return(0,import_react.useEffect)(()=>{isEditMode&&todo&&(setTitle(todo.title),setStartDate(todo.startDate),setEndDate(todo.endDate),setStartTime(todo.startTime||`09:00`),setEndTime(todo.endTime||`10:00`),setAllDay(todo.allDay))},[isEditMode,todo]),(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-3 backdrop-blur-sm rounded-xl`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-modal rounded-xl shadow-2xl max-w-md w-full border theme-border`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between p-3 md:p-5 border-b theme-border`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-lg md:text-xl font-bold theme-text-primary`,children:isEditMode?`  `:`  `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-1.5 md:p-2 hover:bg-black/5 rounded-lg transition-colors theme-icon`,children:(0,import_jsx_runtime.jsx)(X,{className:`w-5 h-5`})})]}),(0,import_jsx_runtime.jsxs)(`form`,{onSubmit:e$4=>{if(e$4.preventDefault(),!title.trim()){alert(`   `);return}let todoData={title:title.trim(),startDate,endDate:allDay?startDate:endDate,startTime:allDay?void 0:startTime$1,endTime:allDay?void 0:endTime,allDay};isEditMode&&todo&&onUpdate?onUpdate(todo.id,todoData):!isEditMode&&onAdd$1&&onAdd$1({...todoData,completed:!1}),onClose()},className:`p-3 md:p-5 space-y-2 md:space-y-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs md:text-sm font-medium mb-1 theme-text-secondary`,children:` `}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:title,onChange:e$4=>setTitle(e$4.target.value),placeholder:`  `,className:`w-full px-2 py-2 md:px-3 border theme-border rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] bg-transparent theme-text-primary placeholder-gray-400 text-sm md:text-base`,autoFocus:!0})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between py-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs md:text-sm font-medium theme-text-secondary`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:()=>setAllDay(!allDay),className:`relative w-10 h-6 rounded-full transition-colors ${allDay?``:`bg-gray-300`}`,style:{backgroundColor:allDay?`var(--btn-bg)`:void 0},children:(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform shadow-sm ${allDay?`translate-x-4`:``}`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid ${allDay?`grid-cols-1`:`grid-cols-2`} gap-2 md:gap-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs md:text-sm font-medium mb-1 theme-text-secondary`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`date`,value:startDate,onChange:e$4=>{setStartDate(e$4.target.value),!allDay&&new Date(e$4.target.value)>new Date(endDate)&&setEndDate(e$4.target.value)},className:`w-full px-2 py-1.5 md:px-3 md:py-2 border theme-border rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] bg-transparent theme-text-primary [&::-webkit-calendar-picker-indicator]:opacity-0 text-sm`}),(0,import_jsx_runtime.jsx)(Calendar,{className:`absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 theme-text-secondary pointer-events-none`})]})]}),!allDay&&(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs md:text-sm font-medium mb-1 theme-text-secondary`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`date`,value:endDate,onChange:e$4=>setEndDate(e$4.target.value),min:startDate,className:`w-full px-2 py-1.5 md:px-3 md:py-2 border theme-border rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] bg-transparent theme-text-primary [&::-webkit-calendar-picker-indicator]:opacity-0 text-sm`}),(0,import_jsx_runtime.jsx)(Calendar,{className:`absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 theme-text-secondary pointer-events-none`})]})]})]}),!allDay&&(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 md:gap-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs md:text-sm font-medium mb-1 theme-text-secondary`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`time`,value:startTime$1,onChange:e$4=>setStartTime(e$4.target.value),className:`w-full px-2 py-1.5 md:px-3 md:py-2 border theme-border rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] bg-transparent theme-text-primary [&::-webkit-calendar-picker-indicator]:opacity-0 text-sm`}),(0,import_jsx_runtime.jsx)(Clock,{className:`absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 theme-text-secondary pointer-events-none`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs md:text-sm font-medium mb-1 theme-text-secondary`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`time`,value:endTime,onChange:e$4=>setEndTime(e$4.target.value),className:`w-full px-2 py-1.5 md:px-3 md:py-2 border theme-border rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] bg-transparent theme-text-primary [&::-webkit-calendar-picker-indicator]:opacity-0 text-sm`}),(0,import_jsx_runtime.jsx)(Clock,{className:`absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 theme-text-secondary pointer-events-none`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 md:gap-3 pt-4 md:pt-6`,children:[isEditMode&&(0,import_jsx_runtime.jsxs)(`button`,{type:`button`,onClick:()=>{showDeleteConfirm&&onDelete&&todo?(onDelete(todo.id),onClose()):setShowDeleteConfirm(!0)},className:`px-3 py-2 md:px-4 md:py-3 rounded-xl transition-colors flex items-center gap-2 text-sm md:text-base ${showDeleteConfirm?`bg-red-600 text-white hover:bg-red-700`:`border border-red-200 text-red-500 hover:bg-red-50`}`,children:[(0,import_jsx_runtime.jsx)(Trash2,{className:`w-4 h-4 md:w-5 md:h-5`}),showDeleteConfirm?` `:``]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1`}),(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:onClose,className:`px-4 py-2 md:px-6 md:py-3 border theme-border rounded-xl hover:bg-black/5 transition-colors theme-text-secondary text-sm md:text-base font-medium`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{type:`submit`,className:`px-4 py-2 md:px-6 md:py-3 text-white rounded-xl transition-all hover:opacity-90 shadow-lg shadow-blue-500/30 text-sm md:text-base font-medium`,style:{backgroundColor:`var(--btn-bg)`},children:isEditMode?``:``})]})]})]})})}function DailyView({todos,onAddTodo,onUpdateTodo,onDeleteTodo,onToggleComplete,currentDate,onDateChange,isReadOnly=!1}){let[showAddModal,setShowAddModal]=(0,import_react.useState)(!1),[editingTodo,setEditingTodo]=(0,import_react.useState)(null),[showCompleted,setShowCompleted]=(0,import_react.useState)(!0),[showIncomplete,setShowIncomplete]=(0,import_react.useState)(!0),goToPreviousDay=()=>{let newDate=new Date(currentDate);newDate.setDate(newDate.getDate()-1),onDateChange(newDate)},goToNextDay=()=>{let newDate=new Date(currentDate);newDate.setDate(newDate.getDate()+1),onDateChange(newDate)},formatDate=date=>`${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,`0`)}-${String(date.getDate()).padStart(2,`0`)}`,formatDisplayDate=date=>`${date.getFullYear()} ${date.getMonth()+1} ${date.getDate()} (${[``,``,``,``,``,``,``][date.getDay()]})`,currentDateString=formatDate(currentDate),dailyTodos=todos.filter(todo=>{let start$2=new Date(todo.startDate),end$1=new Date(todo.endDate),current=new Date(currentDateString);return current>=start$2&&current<=end$1}).filter(todo=>!(!showCompleted&&todo.completed||!showIncomplete&&!todo.completed)),incompleteTodos=dailyTodos.filter(t$4=>!t$4.completed),completedTodos=dailyTodos.filter(t$4=>t$4.completed);return(0,import_jsx_runtime.jsxs)(`div`,{className:`mx-auto w-full p-2 md:p-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row items-stretch xl:items-center justify-between gap-2 xl:gap-4 mb-3 xl:mb-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 md:gap-4 justify-center md:justify-start`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:goToPreviousDay,className:`p-1 md:p-2 theme-text-secondary hover:text-[var(--text-primary)] transition-colors`,children:(0,import_jsx_runtime.jsx)(ChevronLeft,{className:`w-5 h-5 md:w-6 md:h-6`})}),(0,import_jsx_runtime.jsx)(`h2`,{className:`text-base md:text-lg xl:text-2xl font-bold min-w-[140px] md:min-w-[200px] xl:min-w-[300px] text-center theme-text-primary`,children:formatDisplayDate(currentDate)}),(0,import_jsx_runtime.jsx)(`button`,{onClick:goToNextDay,className:`p-1 md:p-2 theme-text-secondary hover:text-[var(--text-primary)] transition-colors`,children:(0,import_jsx_runtime.jsx)(ChevronRight,{className:`w-5 h-5 md:w-6 md:h-6`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 md:gap-4 justify-between md:justify-end`,children:[!isReadOnly&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3 md:gap-4 md:border-r theme-border md:pr-4`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-1.5 cursor-pointer select-none`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,checked:showIncomplete,onChange:e$4=>setShowIncomplete(e$4.target.checked),className:`w-3.5 h-3.5 md:w-4 md:h-4 rounded text-blue-600 focus:ring-blue-500 theme-border`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs md:text-sm font-medium theme-text-secondary`,children:``})]}),(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-1.5 cursor-pointer select-none`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,checked:showCompleted,onChange:e$4=>setShowCompleted(e$4.target.checked),className:`w-3.5 h-3.5 md:w-4 md:h-4 rounded text-blue-600 focus:ring-blue-500 theme-border`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs md:text-sm font-medium theme-text-secondary`,children:``})]})]}),!isReadOnly&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setShowAddModal(!0),className:`flex items-center gap-1.5 px-3 md:px-4 py-1.5 md:py-2 text-white rounded-lg transition-colors hover:opacity-90`,style:{backgroundColor:`var(--btn-bg)`},children:[(0,import_jsx_runtime.jsx)(Plus,{className:`w-4 h-4 md:w-5 md:h-5`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs md:text-sm xl:text-base font-medium`,children:`  `})]})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`theme-bg-card-secondary rounded-2xl p-2`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`bg-transparent rounded-xl px-2 py-2`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`space-y-3 h-60 md:h-130 overflow-y-auto pr-1 scrollbar-hide`,style:{scrollbarWidth:`none`,msOverflowStyle:`none`},children:incompleteTodos.length===0&&completedTodos.length===0?(0,import_jsx_runtime.jsx)(`div`,{className:`h-full flex items-center justify-center theme-text-secondary opacity-60`,children:`     `}):(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[incompleteTodos.map(todo=>(0,import_jsx_runtime.jsx)(TodoItem,{todo,onToggleComplete:isReadOnly?()=>{}:onToggleComplete,onEdit:isReadOnly?()=>{}:setEditingTodo,isReadOnly},todo.id)),completedTodos.map(todo=>(0,import_jsx_runtime.jsx)(TodoItem,{todo,onToggleComplete:isReadOnly?()=>{}:onToggleComplete,onEdit:isReadOnly?()=>{}:setEditingTodo,isReadOnly},todo.id))]})})})}),showAddModal&&(0,import_jsx_runtime.jsx)(TodoModal,{onClose:()=>setShowAddModal(!1),onAdd:onAddTodo,initialDate:currentDateString}),editingTodo&&(0,import_jsx_runtime.jsx)(TodoModal,{todo:editingTodo,onClose:()=>setEditingTodo(null),onUpdate:onUpdateTodo,onDelete:onDeleteTodo})]})}var parseLocalDate=dateStr=>{let[year,month,day]=dateStr.split(`-`).map(Number);return new Date(year,month-1,day)},formatLocalDate=date=>`${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,`0`)}-${String(date.getDate()).padStart(2,`0`)}`;function DraggableTodoItem({todo,onSelect}){let[{isDragging:isDragging$2},drag$1]=useDrag(()=>({type:`TODO`,item:{todo},collect:monitor=>({isDragging:monitor.isDragging()})}),[todo]);return(0,import_jsx_runtime.jsx)(`div`,{ref:drag$1,style:{opacity:isDragging$2?.5:1,backgroundColor:`var(--btn-bg)`,color:`var(--btn-text)`},className:`p-2 rounded-lg shadow-sm cursor-pointer hover:opacity-90 transition-opacity`,onClick:()=>onSelect(todo),children:(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs md:text-sm truncate ${todo.completed?`line-through opacity-70`:``}`,children:todo.title})})}function DayColumn({date,dayName,todos,isToday,onDrop,onSelectDate,onAddClick,isSelected,isReadOnly}){let[{isOver},drop$1]=useDrop(()=>({accept:`TODO`,drop:item=>{onDrop(item.todo,date)},collect:monitor=>({isOver:monitor.isOver()})}),[date,onDrop]),day=parseLocalDate(date).getDate();return(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>onSelectDate(date),className:`flex-1 min-w-0 flex flex-col cursor-pointer p-1 md:p-2 rounded-xl transition-all border-2 border-transparent ${isOver?`bg-blue-50`:isSelected?`bg-blue-50/50 dark:bg-white/5 shadow-sm`:``}`,style:{borderColor:isSelected?`var(--btn-bg)`:`transparent`},children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col items-center mb-1 md:mb-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] md:text-sm theme-text-secondary font-bold mb-0.5 md:mb-2 w-auto text-center`,children:dayName}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-6 h-6 md:w-16 md:h-16 
          rounded-full flex items-center justify-center text-[10px] md:text-base transition-colors font-bold ${isToday?`text-white`:``}`,style:{backgroundColor:isToday?`var(--btn-bg)`:`rgba(128, 128, 128, 0.15)`,color:isToday?`#ffffff`:`var(--text-primary)`},children:day})]}),(0,import_jsx_runtime.jsxs)(`div`,{ref:drop$1,className:`flex-1 px-0.5 md:px-1 space-y-1.5 md:space-y-2 min-h-[30px] max-h-[100px] md:min-h-25 md:max-h-25 overflow-y-auto scrollbar-hide ${isOver?`bg-blue-100/30 rounded-lg`:``}`,style:{scrollbarWidth:`none`,msOverflowStyle:`none`},children:[(0,import_jsx_runtime.jsx)(`div`,{className:`hidden md:block space-y-1.5 md:space-y-2`,children:todos.map(todo=>(0,import_jsx_runtime.jsx)(DraggableTodoItem,{todo,onSelect:isReadOnly?()=>{}:()=>onSelectDate(date)},todo.id))}),!isReadOnly&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onAddClick(date)},className:`w-full py-1 md:py-3 text-[10px] md:text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-1 ${todos.length>0?`md:hidden`:``}`,style:{color:`var(--btn-bg)`,backgroundColor:`rgba(var(--btn-bg-rgb), 0.1)`},children:[(0,import_jsx_runtime.jsx)(Plus,{className:`w-3 h-3 md:w-4 md:h-4`}),(0,import_jsx_runtime.jsx)(`span`,{className:`hidden md:inline`,children:` `})]})]})]})}function WeeklyViewContent({todos,onAddTodo,onUpdateTodo,onDeleteTodo,onToggleComplete,currentDate,onDateChange,isReadOnly=!1}){let[showAddModal,setShowAddModal]=(0,import_react.useState)(!1),[editingTodo,setEditingTodo]=(0,import_react.useState)(null),[selectedDate,setSelectedDate]=(0,import_react.useState)(formatLocalDate(new Date)),[showCompleted,setShowCompleted]=(0,import_react.useState)(!0),[showIncomplete,setShowIncomplete]=(0,import_react.useState)(!0),getWeekDates=baseDate=>{let current=new Date(baseDate),day=current.getDay(),diffToMonday=day===0?-6:1-day,monday=new Date(current);monday.setDate(current.getDate()+diffToMonday);let week=[];for(let i$4=0;i$4<7;i$4++){let d$3=new Date(monday);d$3.setDate(monday.getDate()+i$4),week.push(d$3)}return week},goToPreviousWeek=()=>{let newDate=new Date(currentDate);newDate.setDate(newDate.getDate()-7),onDateChange(newDate)},goToNextWeek=()=>{let newDate=new Date(currentDate);newDate.setDate(newDate.getDate()+7),onDateChange(newDate)},formatWeekRange=dates=>{let first=dates[0],last=dates[6];return`${first.getFullYear()} ${first.getMonth()+1} ${first.getDate()} - ${last.getMonth()+1} ${last.getDate()}`},isDateInRange=(dateStr,startStr,endStr)=>dateStr>=startStr&&dateStr<=endStr,weekDates=getWeekDates(currentDate),dayNames=[``,``,``,``,``,``,``],today=formatLocalDate(new Date),handleDrop=(todo,targetDateStr)=>{if(todo.startDate===targetDateStr)return;let originalStart=parseLocalDate(todo.startDate),diffTime=parseLocalDate(todo.endDate).getTime()-originalStart.getTime(),newStartDate=parseLocalDate(targetDateStr),newEndDate=new Date(newStartDate.getTime()+diffTime);onUpdateTodo(todo.id,{startDate:targetDateStr,endDate:formatLocalDate(newEndDate)})},filteredTodos=todos.filter(todo=>!showCompleted&&!showIncomplete?!0:!(!showCompleted&&todo.completed||!showIncomplete&&!todo.completed));return(0,import_jsx_runtime.jsxs)(`div`,{className:`mx-auto w-full p-2 md:p-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-2 sm:gap-4 mb-3 sm:mb-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 md:gap-4 justify-center md:justify-start`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:goToPreviousWeek,className:`p-1 md:p-2 theme-text-secondary hover:text-[var(--text-primary)] transition-colors`,children:(0,import_jsx_runtime.jsx)(ChevronLeft,{className:`w-5 h-5 md:w-6 md:h-6`})}),(0,import_jsx_runtime.jsx)(`h2`,{className:`text-base md:text-lg xl:text-2xl font-bold min-w-[200px] md:min-w-[350px] text-center theme-text-primary`,children:formatWeekRange(weekDates)}),(0,import_jsx_runtime.jsx)(`button`,{onClick:goToNextWeek,className:`p-1 md:p-2 theme-text-secondary hover:text-[var(--text-primary)] transition-colors`,children:(0,import_jsx_runtime.jsx)(ChevronRight,{className:`w-5 h-5 md:w-6 md:h-6`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 md:gap-4 justify-between md:justify-end`,children:[!isReadOnly&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3 md:gap-4 md:border-r theme-border md:pr-4`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-1.5 cursor-pointer select-none`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,checked:showIncomplete,onChange:e$4=>setShowIncomplete(e$4.target.checked),className:`w-3.5 h-3.5 md:w-4 md:h-4 rounded text-blue-600 focus:ring-blue-500 theme-border`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs md:text-sm font-medium theme-text-secondary`,children:``})]}),(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-1.5 cursor-pointer select-none`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,checked:showCompleted,onChange:e$4=>setShowCompleted(e$4.target.checked),className:`w-3.5 h-3.5 md:w-4 md:h-4 rounded text-blue-600 focus:ring-blue-500 theme-border`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs md:text-sm font-medium theme-text-secondary`,children:``})]})]}),!isReadOnly&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setShowAddModal(!0),className:`flex items-center gap-1.5 px-3 md:px-4 py-1.5 md:py-2 text-white rounded-lg transition-colors hover:opacity-90`,style:{backgroundColor:`var(--btn-bg)`},children:[(0,import_jsx_runtime.jsx)(Plus,{className:`w-4 h-4 md:w-5 md:h-5`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs md:text-sm xl:text-base font-medium`,children:`  `})]})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-row gap-1 md:gap-4`,children:weekDates.map((date,index$2)=>{let dateString=formatLocalDate(date),dayTodos=filteredTodos.filter(todo=>isDateInRange(dateString,todo.startDate,todo.endDate));return(0,import_jsx_runtime.jsx)(DayColumn,{date:dateString,dayName:dayNames[index$2],todos:dayTodos,isToday:dateString===today,onDrop:handleDrop,onToggleComplete,onEdit:setEditingTodo,onSelectDate:setSelectedDate,onAddClick:date$1=>{setSelectedDate(date$1),setShowAddModal(!0)},isSelected:dateString===selectedDate,isReadOnly},dateString)})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-card-secondary rounded-lg p-3 md:p-6 mt-4 md:mt-6`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`text-sm md:text-lg mb-3 md:mb-4 theme-text-primary font-bold`,children:[new Date(selectedDate).getFullYear(),` `,new Date(selectedDate).getMonth()+1,` `,` `,new Date(selectedDate).getDate(),`  `]}),(0,import_jsx_runtime.jsx)(`div`,{className:`space-y-3 h-30 md:h-[400px] overflow-y-auto pr-1 scrollbar-hide`,style:{scrollbarWidth:`none`,msOverflowStyle:`none`},children:todos.filter(todo=>{let start$2=new Date(todo.startDate),end$1=new Date(todo.endDate),selectedTime=new Date(selectedDate).setHours(0,0,0,0),startTime$1=start$2.setHours(0,0,0,0),endTime=end$1.setHours(0,0,0,0);return selectedTime>=startTime$1&&selectedTime<=endTime}).filter(todo=>!showCompleted&&!showIncomplete?!0:!(!showCompleted&&todo.completed||!showIncomplete&&!todo.completed)).length===0?(0,import_jsx_runtime.jsx)(`div`,{className:`h-full flex items-center justify-center theme-text-secondary opacity-60 text-xs md:text-sm`,children:`     `}):todos.filter(todo=>{let start$2=new Date(todo.startDate),end$1=new Date(todo.endDate),selectedTime=new Date(selectedDate).setHours(0,0,0,0),startTime$1=start$2.setHours(0,0,0,0),endTime=end$1.setHours(0,0,0,0);return selectedTime>=startTime$1&&selectedTime<=endTime}).filter(todo=>!showCompleted&&!showIncomplete?!0:!(!showCompleted&&todo.completed||!showIncomplete&&!todo.completed)).map(todo=>(0,import_jsx_runtime.jsx)(TodoItem,{todo,onToggleComplete:isReadOnly?()=>{}:onToggleComplete,onEdit:isReadOnly?()=>{}:setEditingTodo,isReadOnly},todo.id))})]}),showAddModal&&(0,import_jsx_runtime.jsx)(TodoModal,{onClose:()=>setShowAddModal(!1),onAdd:onAddTodo,initialDate:selectedDate}),editingTodo&&(0,import_jsx_runtime.jsx)(TodoModal,{todo:editingTodo,onClose:()=>setEditingTodo(null),onUpdate:onUpdateTodo,onDelete:onDeleteTodo})]})}function WeeklyView(props){return(0,import_jsx_runtime.jsx)(WeeklyViewContent,{...props})}function MonthlyViewContent({todos,onAddTodo,onUpdateTodo,onDeleteTodo,onToggleComplete,currentDate,onDateChange,isReadOnly=!1}){let[selectedDate,setSelectedDate]=(0,import_react.useState)(()=>{let today=new Date;return`${today.getFullYear()}-${String(today.getMonth()+1).padStart(2,`0`)}-${String(today.getDate()).padStart(2,`0`)}`}),[showAddModal,setShowAddModal]=(0,import_react.useState)(!1),[editingTodo,setEditingTodo]=(0,import_react.useState)(null),[showCompleted,setShowCompleted]=(0,import_react.useState)(!0),[showIncomplete,setShowIncomplete]=(0,import_react.useState)(!0),goToPreviousMonth=()=>{let newDate=new Date(currentDate);newDate.setMonth(newDate.getMonth()-1),onDateChange(newDate)},goToNextMonth=()=>{let newDate=new Date(currentDate);newDate.setMonth(newDate.getMonth()+1),onDateChange(newDate)},formatDate=date=>`${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,`0`)}-${String(date.getDate()).padStart(2,`0`)}`,calendarDays=(date=>{let year=date.getFullYear(),month=date.getMonth(),firstDay=new Date(year,month,1),lastDay=new Date(year,month+1,0),startDay=firstDay.getDay(),daysInMonth=lastDay.getDate(),days=[],prevMonthLastDay=new Date(year,month,0).getDate();for(let i$4=startDay-1;i$4>=0;i$4--){let d$3=new Date(year,month-1,prevMonthLastDay-i$4);days.push({date:d$3,isCurrentMonth:!1})}for(let i$4=1;i$4<=daysInMonth;i$4++){let d$3=new Date(year,month,i$4);days.push({date:d$3,isCurrentMonth:!0})}let remaining=42-days.length;for(let i$4=1;i$4<=remaining;i$4++){let d$3=new Date(year,month+1,i$4);days.push({date:d$3,isCurrentMonth:!1})}return days})(currentDate),dayNames=[``,``,``,``,``,``,``],handleDrop=(todo,newDate)=>{let daysDiff=Math.ceil((new Date(todo.endDate).getTime()-new Date(todo.startDate).getTime())/(1e3*60*60*24)),newEndDate=new Date(newDate);newEndDate.setDate(newEndDate.getDate()+daysDiff),onUpdateTodo(todo.id,{startDate:newDate,endDate:formatDate(newEndDate)})},selectedDateTodos=todos.filter(todo=>{let start$2=new Date(todo.startDate),end$1=new Date(todo.endDate),selected$1=new Date(selectedDate);return selected$1>=start$2&&selected$1<=end$1}).filter(todo=>!showCompleted&&!showIncomplete?!0:!(!showCompleted&&todo.completed||!showIncomplete&&!todo.completed)),getMultiDayTodos=dateString=>todos.filter(todo=>{let start$2=new Date(todo.startDate),end$1=new Date(todo.endDate),current=new Date(dateString);return todo.startDate!==todo.endDate&&current>=start$2&&current<=end$1?!showCompleted&&!showIncomplete?!0:!(!showCompleted&&todo.completed||!showIncomplete&&!todo.completed):!1}),getSingleDayTodos=dateString=>todos.filter(todo=>todo.startDate===todo.endDate&&todo.startDate===dateString?!showCompleted&&!showIncomplete?!0:!(!showCompleted&&todo.completed||!showIncomplete&&!todo.completed):!1),getTodoPosition=(todo,dateString)=>formatDate(new Date(todo.startDate))===dateString?`start`:formatDate(new Date(todo.endDate))===dateString?`end`:`middle`;function CalendarTodoItem({todo,dateString,isReadOnly:isReadOnly$1}){let[{isDragging:isDragging$2},drag$1]=useDrag(()=>({type:`TODO`,item:{todo},collect:monitor=>({isDragging:monitor.isDragging()})})),position$1=getTodoPosition(todo,dateString),isMultiDay=todo.startDate!==todo.endDate,baseStyle={opacity:isDragging$2?.3:1,backgroundColor:`var(--btn-bg)`,color:`var(--btn-text)`};return isMultiDay?(0,import_jsx_runtime.jsx)(`div`,{ref:drag$1,style:baseStyle,className:`text-[10px] md:text-xs px-1 py-0.5 truncate cursor-move hover:opacity-90 transition-opacity ${position$1===`start`?`rounded-l`:``} ${position$1===`end`?`rounded-r`:``}  ${todo.completed?`opacity-70 line-through`:``}`,title:todo.title,onClick:e$4=>e$4.stopPropagation(),children:position$1===`start`&&todo.title}):(0,import_jsx_runtime.jsxs)(`div`,{ref:drag$1,style:baseStyle,className:`text-[10px] md:text-xs px-1 py-0.5 truncate rounded cursor-move hover:opacity-90 transition-opacity ${todo.completed?`opacity-70 line-through`:``}`,title:todo.title,onClick:e$4=>e$4.stopPropagation(),children:[isReadOnly$1?``:todo.allDay?``:``,` `,todo.title]})}function CalendarCell({day,index:index$2,dateString,isSelected,isToday,onSelect,onDrop,isReadOnly:isReadOnly$1}){let dayNum=day.date.getDate(),multiDayTodos=getMultiDayTodos(dateString),singleDayTodos=getSingleDayTodos(dateString),[{isOver},drop$1]=useDrop(()=>({accept:`TODO`,drop:item=>{onDrop(item.todo,dateString)},collect:monitor=>({isOver:monitor.isOver()})})),dayColorClass=index$2%7==0?`text-red-500`:index$2%7==6?`text-blue-500`:`theme-text-primary`;return(0,import_jsx_runtime.jsxs)(`div`,{ref:drop$1,onClick:()=>onSelect(dateString),className:`theme-bg-card h-17 md:h-[120px] p-1 md:p-2 cursor-pointer transition-all border border-transparent flex flex-col ${day.isCurrentMonth?``:`opacity-40`} ${isOver?`bg-blue-50`:`hover:brightness-95`}`,style:{borderColor:isSelected?`var(--btn-bg)`:`transparent`},children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs md:text-sm mb-1 w-6 h-6 md:w-8 md:h-8 flex-shrink-0 flex items-center justify-center rounded-full mx-auto md:mx-0 ${isToday?`text-white font-bold`:dayColorClass}`,style:{backgroundColor:isToday?`var(--btn-bg)`:void 0},children:dayNum}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-0.5 md:space-y-1 flex-1 overflow-y-auto scrollbar-hide min-h-0`,children:[multiDayTodos.map(todo=>(0,import_jsx_runtime.jsx)(CalendarTodoItem,{todo,dateString,isReadOnly:isReadOnly$1},todo.id)),singleDayTodos.map(todo=>(0,import_jsx_runtime.jsx)(CalendarTodoItem,{todo,dateString,isReadOnly:isReadOnly$1},todo.id))]})]})}return(0,import_jsx_runtime.jsxs)(`div`,{className:`mx-auto w-full p-2 md:p-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-2 sm:gap-4 mb-3 sm:mb-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 md:gap-4 justify-center md:justify-start`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:goToPreviousMonth,className:`p-1 md:p-2 theme-text-secondary hover:text-[var(--text-primary)] transition-colors`,children:(0,import_jsx_runtime.jsx)(ChevronLeft,{className:`w-5 h-5 md:w-6 md:h-6`})}),(0,import_jsx_runtime.jsxs)(`h2`,{className:`text-base md:text-lg xl:text-2xl font-bold min-w-[150px] md:min-w-[250px] text-center theme-text-primary`,children:[currentDate.getFullYear(),` `,currentDate.getMonth()+1,``]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:goToNextMonth,className:`p-1 md:p-2 theme-text-secondary hover:text-[var(--text-primary)] transition-colors`,children:(0,import_jsx_runtime.jsx)(ChevronRight,{className:`w-5 h-5 md:w-6 md:h-6`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 md:gap-4 justify-between md:justify-end`,children:[!isReadOnly&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3 md:gap-4 md:border-r theme-border md:pr-4`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-1.5 cursor-pointer select-none`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,checked:showIncomplete,onChange:e$4=>setShowIncomplete(e$4.target.checked),className:`w-3.5 h-3.5 md:w-4 md:h-4 rounded text-blue-600 focus:ring-blue-500 theme-border`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs md:text-sm font-medium theme-text-secondary`,children:``})]}),(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-1.5 cursor-pointer select-none`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,checked:showCompleted,onChange:e$4=>setShowCompleted(e$4.target.checked),className:`w-3.5 h-3.5 md:w-4 md:h-4 rounded text-blue-600 focus:ring-blue-500 theme-border`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs md:text-sm font-medium theme-text-secondary`,children:``})]})]}),!isReadOnly&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setShowAddModal(!0),className:`flex items-center gap-1.5 px-3 md:px-4 py-1.5 md:py-2 text-white rounded-lg transition-colors hover:opacity-90`,style:{backgroundColor:`var(--btn-bg)`},children:[(0,import_jsx_runtime.jsx)(Plus,{className:`w-4 h-4 md:w-5 md:h-5`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs md:text-sm xl:text-base font-medium`,children:`  `})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`mb-4 md:mb-6`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-7 gap-px border theme-border mb-px bg-[var(--border-color)]`,children:dayNames.map((day,index$2)=>(0,import_jsx_runtime.jsx)(`div`,{className:`theme-bg-card py-1 md:py-2 text-center text-[10px] md:text-sm font-bold ${index$2===0?`text-red-500`:index$2===6?`text-blue-500`:`theme-text-secondary`}`,children:day},day))}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-7 gap-px border theme-border bg-[var(--border-color)] rounded-b-lg overflow-hidden`,children:calendarDays.map((day,index$2)=>{let dateString=formatDate(day.date);return(0,import_jsx_runtime.jsx)(CalendarCell,{day,index:index$2,dateString,isSelected:dateString===selectedDate,isToday:(()=>{let today=new Date;return dateString===`${today.getFullYear()}-${String(today.getMonth()+1).padStart(2,`0`)}-${String(today.getDate()).padStart(2,`0`)}`})(),onSelect:setSelectedDate,onDrop:handleDrop,isReadOnly},index$2)})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-card-secondary rounded-lg p-3 md:p-6`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`text-sm md:text-lg mb-3 md:mb-4 theme-text-primary font-bold`,children:[new Date(selectedDate).getFullYear(),` `,new Date(selectedDate).getMonth()+1,` `,` `,new Date(selectedDate).getDate(),`  `]}),(0,import_jsx_runtime.jsx)(`div`,{className:`space-y-3 h-30 md:h-[300px] overflow-y-auto pr-1 scrollbar-hide`,style:{scrollbarWidth:`none`,msOverflowStyle:`none`},children:selectedDateTodos.length===0?(0,import_jsx_runtime.jsx)(`div`,{className:`h-full flex items-center justify-center theme-text-secondary opacity-60 text-xs md:text-sm`,children:`     `}):selectedDateTodos.map(todo=>(0,import_jsx_runtime.jsx)(TodoItem,{todo,onToggleComplete:isReadOnly?()=>{}:onToggleComplete,onEdit:isReadOnly?()=>{}:setEditingTodo,isReadOnly},todo.id))})]}),showAddModal&&(0,import_jsx_runtime.jsx)(TodoModal,{onClose:()=>setShowAddModal(!1),onAdd:onAddTodo,initialDate:selectedDate}),editingTodo&&(0,import_jsx_runtime.jsx)(TodoModal,{todo:editingTodo,onClose:()=>setEditingTodo(null),onUpdate:onUpdateTodo,onDelete:onDeleteTodo})]})}function MonthlyView(props){return(0,import_jsx_runtime.jsx)(MonthlyViewContent,{...props})}var TodoContext=(0,import_react.createContext)(void 0),API_BASE_URL$1=`/api/todos`;const TodoProvider=({children:children$1})=>{let[todos,setTodos]=(0,import_react.useState)([]),{isLoggedIn}=useAuth(),getAuthHeader$1=()=>{let token=localStorage.getItem(`accessToken`);return token?{Authorization:`Bearer ${token}`}:{}},fetchTodos=async()=>{if(!localStorage.getItem(`accessToken`)){setTodos([]);return}try{let response=await fetch(API_BASE_URL$1,{headers:{...getAuthHeader$1()}});response.ok?setTodos(await response.json()):console.error(`Failed to fetch todos`)}catch(error$1){console.error(`Error fetching todos:`,error$1)}};(0,import_react.useEffect)(()=>{fetchTodos()},[isLoggedIn]);let addTodo=async newTodo=>{try{let response=await fetch(API_BASE_URL$1,{method:`POST`,headers:{"Content-Type":`application/json`,...getAuthHeader$1()},body:JSON.stringify(newTodo)});if(response.ok){let savedTodo=await response.json();setTodos(prev=>[...prev,savedTodo])}else console.error(`Failed to add todo`),alert(`   .`)}catch(error$1){console.error(`Error adding todo:`,error$1)}},updateTodo=async(id$3,updates)=>{setTodos(prev=>prev.map(todo=>todo.id===id$3?{...todo,...updates}:todo));try{let currentTodo=todos.find(t$4=>t$4.id===id$3);if(!currentTodo)return;let updatedTodo={...currentTodo,...updates};(await fetch(`${API_BASE_URL$1}/${id$3}`,{method:`PUT`,headers:{"Content-Type":`application/json`,...getAuthHeader$1()},body:JSON.stringify(updatedTodo)})).ok||(console.error(`Failed to update todo`),fetchTodos())}catch(error$1){console.error(`Error updating todo:`,error$1),fetchTodos()}};return(0,import_jsx_runtime.jsx)(TodoContext.Provider,{value:{todos,addTodo,updateTodo,deleteTodo:async id$3=>{setTodos(prev=>prev.filter(todo=>todo.id!==id$3));try{(await fetch(`${API_BASE_URL$1}/${id$3}`,{method:`DELETE`,headers:{...getAuthHeader$1()}})).ok||(console.error(`Failed to delete todo`),fetchTodos())}catch(error$1){console.error(`Error deleting todo:`,error$1),fetchTodos()}},toggleTodo:async id$3=>{let todo=todos.find(t$4=>t$4.id===id$3);todo&&await updateTodo(id$3,{completed:!todo.completed})}},children:children$1})},useTodoContext=()=>{let context=(0,import_react.useContext)(TodoContext);if(!context)throw Error(`useTodoContext must be used within a TodoProvider`);return context},useSharedTodo=()=>{let{todos,addTodo,updateTodo,deleteTodo,toggleTodo}=useTodoContext(),getTodosByDate=(0,import_react.useMemo)(()=>date=>{let dateString=date.toISOString().split(`T`)[0];return todos.filter(todo=>{let start$2=new Date(todo.startDate),end$1=new Date(todo.endDate),current=new Date(dateString);return current>=start$2&&current<=end$1})},[todos]);return{todos,addTodo,updateTodo,deleteTodo,toggleTodo,getTodosByDate,getTodayTodos:()=>getTodosByDate(new Date)}};var TodoPage=()=>{let isMobile$1=useIsMobile(),[viewMode,setViewMode]=(0,import_react.useState)(`daily`),[appMode,setAppMode]=(0,import_react.useState)(`todo`),[currentDate,setCurrentDate]=(0,import_react.useState)(new Date),[postTodos,setPostTodos]=(0,import_react.useState)([]),{todos:sharedTodos,addTodo,updateTodo,deleteTodo,toggleTodo}=useSharedTodo();(0,import_react.useEffect)(()=>{appMode===`post`&&fetchCalendarPosts(currentDate.getFullYear(),currentDate.getMonth()+1)},[appMode,currentDate.getFullYear(),currentDate.getMonth()]);let fetchCalendarPosts=async(year,month)=>{try{let token=localStorage.getItem(`accessToken`),headers=token?{Authorization:`Bearer ${token}`}:{},response=await fetch(`/api/posts/summary?year=${year}&month=${month}`,{headers});response.ok?setPostTodos(transformPostsToTodos(await response.json())):console.error(`Failed to fetch posts`)}catch(error$1){console.error(`Error fetching posts:`,error$1)}},transformPostsToTodos=posts=>posts.map(post=>{let dateObj=new Date(post.createdAt),dateStr=`${dateObj.getFullYear()}-${String(dateObj.getMonth()+1).padStart(2,`0`)}-${String(dateObj.getDate()).padStart(2,`0`)}`,timeStr=`${String(dateObj.getHours()).padStart(2,`0`)}:${String(dateObj.getMinutes()).padStart(2,`0`)}`;return{id:String(post.id),title:post.title,completed:!1,startDate:dateStr,endDate:dateStr,startTime:timeStr,endTime:timeStr,allDay:!1}}),handleAddTodo=newTodo=>{appMode===`todo`&&addTodo(newTodo)},handleUpdateTodo=(id$3,updates)=>{appMode===`todo`&&updateTodo(id$3,updates)},handleDeleteTodo=id$3=>{appMode===`todo`&&deleteTodo(id$3)},handleToggleComplete=id$3=>{appMode===`todo`&&toggleTodo(id$3)},displayTodos=appMode===`todo`?sharedTodos:postTodos;return(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen flex flex-col transition-colors duration-300`,children:[(0,import_jsx_runtime.jsx)(Navigation_default,{}),(0,import_jsx_runtime.jsx)(FloatingSettingsPanel_default,{defaultOpen:!1,isMobile:isMobile$1}),(0,import_jsx_runtime.jsxs)(`main`,{className:`flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-8`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-6`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`py-2 pr-4 min-w-[100px]`,children:(0,import_jsx_runtime.jsx)(`h1`,{className:`text-3xl font-bold theme-text-primary`,children:appMode===`todo`?`Todo`:`Post`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-card-secondary p-1 rounded-xl flex`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setAppMode(`todo`),className:`px-3 sm:px-6 py-2 rounded-lg text-sm font-medium transition-all ${appMode===`todo`?`theme-btn shadow-md`:`theme-text-secondary hover:text-[var(--text-primary)]`}`,children:`Todo`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setAppMode(`post`),className:`px-3 sm:px-6 py-2 rounded-lg text-sm font-medium transition-all ${appMode===`post`?`theme-btn shadow-md`:`theme-text-secondary hover:text-[var(--text-primary)]`}`,children:`Post`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex theme-bg-card-secondary p-1 rounded-xl self-end md:self-auto`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setViewMode(`daily`),className:`px-3 sm:px-6 py-2 rounded-lg text-sm font-medium transition-all ${viewMode===`daily`?`theme-btn shadow-md`:`theme-text-secondary hover:text-[var(--text-primary)]`}`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setViewMode(`weekly`),className:`px-3 sm:px-6 py-2 rounded-lg text-sm font-medium transition-all ${viewMode===`weekly`?`theme-btn shadow-md`:`theme-text-secondary hover:text-[var(--text-primary)]`}`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setViewMode(`monthly`),className:`px-3 sm:px-6 py-2 rounded-lg text-sm font-medium transition-all ${viewMode===`monthly`?`theme-btn shadow-md`:`theme-text-secondary hover:text-[var(--text-primary)]`}`,children:``})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-card rounded-2xl shadow-sm border theme-border p-3 md:p-6 min-h-[350px] md:min-h-[600px]`,children:[viewMode===`monthly`&&(0,import_jsx_runtime.jsx)(MonthlyView,{todos:displayTodos,onAddTodo:handleAddTodo,onUpdateTodo:handleUpdateTodo,onDeleteTodo:handleDeleteTodo,onToggleComplete:handleToggleComplete,currentDate,onDateChange:setCurrentDate,isReadOnly:appMode===`post`}),viewMode===`weekly`&&(0,import_jsx_runtime.jsx)(WeeklyView,{todos:displayTodos,onAddTodo:handleAddTodo,onUpdateTodo:handleUpdateTodo,onDeleteTodo:handleDeleteTodo,onToggleComplete:handleToggleComplete,currentDate,onDateChange:setCurrentDate,isReadOnly:appMode===`post`}),viewMode===`daily`&&(0,import_jsx_runtime.jsx)(DailyView,{todos:displayTodos,onAddTodo:handleAddTodo,onUpdateTodo:handleUpdateTodo,onDeleteTodo:handleDeleteTodo,onToggleComplete:handleToggleComplete,currentDate,onDateChange:setCurrentDate,isReadOnly:appMode===`post`})]})]})]})},TodoPage_default=TodoPage,InviteAcceptPage=()=>{let{code}=useParams(),navigate=useNavigate(),[password,setPassword]=(0,import_react.useState)(``),[error$1,setError]=(0,import_react.useState)(null),[targetRoom,setTargetRoom]=(0,import_react.useState)(null),[isLoading,setIsLoading]=(0,import_react.useState)(!0);return(0,import_react.useEffect)(()=>{code&&(async()=>{setIsLoading(!0);try{let album=await(await __vitePreload(()=>import(`./api-CMlSC-gz.js`),[])).fetchAlbumApi(code);album?setTargetRoom(album):setError(`     .`)}catch{setError(` .`)}finally{setIsLoading(!1)}})()},[code]),code?isLoading?(0,import_jsx_runtime.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,children:`Loading...`}):(0,import_jsx_runtime.jsx)(`div`,{className:`min-h-screen bg-transparent flex items-center justify-center p-4`,style:{fontFamily:`var(--font-family)`},children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] rounded-2xl shadow-xl w-full max-w-md overflow-hidden border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`px-6 py-8 flex flex-col items-center text-center border-b border-[var(--border-color)] bg-[var(--bg-card-secondary)]`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-16 h-16 rounded-2xl bg-indigo-100 text-indigo-600 flex items-center justify-center mb-4 shadow-inner`,children:(0,import_jsx_runtime.jsx)(Users,{size:32})}),(0,import_jsx_runtime.jsx)(`h2`,{className:`text-xl font-bold text-[var(--text-primary)] mb-2`,children:targetRoom?` `:`   `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[var(--text-secondary)] text-sm px-4`,children:targetRoom?.name||``})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-6 space-y-6`,children:[targetRoom?(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`label`,{className:`block text-xs font-bold text-[var(--text-secondary)] mb-2 uppercase tracking-wider`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`password`,value:password,onChange:e$4=>{setPassword(e$4.target.value),setError(null)},placeholder:targetRoom.roomConfig?.password?`  `:` `,className:`w-full bg-[var(--bg-card-secondary)] border border-[var(--border-color)] rounded-xl px-4 py-3 text-[var(--text-primary)] focus:outline-none focus:ring-2 focus:ring-indigo-500 pl-10`,style:{fontFamily:`inherit`}}),(0,import_jsx_runtime.jsx)(Lock,{size:16,className:`absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-secondary)]`})]}),error$1&&(0,import_jsx_runtime.jsx)(`p`,{className:`text-red-500 text-xs mt-2 pl-1`,children:error$1})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:async()=>{if(targetRoom){if(targetRoom.roomConfig?.password&&targetRoom.roomConfig.password!==password){setError(`  .`);return}navigate(`/post#album/`+targetRoom.id)}},className:`w-full py-3 bg-[var(--btn-bg)] hover:bg-[var(--btn-hover)] text-[var(--btn-text)] font-bold rounded-xl transition-colors shadow-lg`,children:``})]}):(0,import_jsx_runtime.jsx)(`div`,{className:`text-center text-red-500`,children:error$1||`    .`}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>navigate(`/`),className:`w-full py-3 text-[var(--text-secondary)] hover:text-[var(--text-primary)] text-sm font-bold flex items-center justify-center gap-2`,children:[(0,import_jsx_runtime.jsx)(ArrowLeft,{size:16}),`  `]})]})]})}):(0,import_jsx_runtime.jsx)(`div`,{children:`Invalid Link`})},InviteAcceptPage_default=InviteAcceptPage,RoomJoinPage=()=>{let{roomId}=useParams(),navigate=useNavigate(),location$1=useLocation(),[password,setPassword]=(0,import_react.useState)(``),[confirmModal,setConfirmModal]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}}),closeConfirmModal=()=>{setConfirmModal(prev=>({...prev,isOpen:!1}))},showModal=(title,message,type=`info`,onConfirm)=>{setConfirmModal({isOpen:!0,title,message,type,singleButton:!0,onConfirm:onConfirm||closeConfirmModal})};import_react.useEffect(()=>{localStorage.getItem(`accessToken`)||showModal(``,`  .`,`danger`,()=>{navigate(`/login`,{state:{from:location$1}})})},[navigate,location$1]);let[isLoading,setIsLoading]=(0,import_react.useState)(!1),[error$1,setError]=(0,import_react.useState)(null),handleJoin=async()=>{if(roomId){if(!localStorage.getItem(`accessToken`)){setError(`   .`),setTimeout(()=>navigate(`/login`),1500);return}setIsLoading(!0),setError(null);try{await joinRoomApi(roomId,password),showModal(` `,` !`,`success`,()=>navigate(`/post`))}catch(err){err.message===`  .`?setError(`   .`):setError(err.message||` .  .`)}finally{setIsLoading(!1)}}};return(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen bg-[var(--bg-primary)] flex items-center justify-center p-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] max-w-md w-full rounded-2xl shadow-xl border border-[var(--border-color)] p-8 animate-scale-up`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`text-center mb-8`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-16 h-16 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4`,children:(0,import_jsx_runtime.jsx)(Users,{size:32})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-2xl font-bold text-[var(--text-primary)] mb-2`,children:` `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-[var(--text-secondary)]`,children:[`    .`,(0,import_jsx_runtime.jsx)(`br`,{}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-tertiary)]`,children:`(     )`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`block text-sm font-bold text-[var(--text-secondary)] mb-2 flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Lock,{size:14}),` `]}),(0,import_jsx_runtime.jsx)(`input`,{type:`password`,value:password,onChange:e$4=>setPassword(e$4.target.value),onKeyDown:e$4=>{e$4.key===`Enter`&&handleJoin()},placeholder:` `,className:`w-full px-4 py-3 rounded-xl border border-[var(--border-color)] bg-[var(--bg-card-secondary)] text-[var(--text-primary)] focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition`})]}),error$1&&(0,import_jsx_runtime.jsx)(`div`,{className:`text-red-500 text-sm font-bold text-center bg-red-50 py-2 rounded-lg`,children:error$1}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleJoin,disabled:isLoading,className:`w-full py-4 rounded-xl bg-indigo-600 text-white font-bold text-lg hover:bg-indigo-700 transition shadow-lg shadow-indigo-500/30 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:isLoading?(0,import_jsx_runtime.jsx)(Loader,{className:`animate-spin`,size:20}):(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[` `,(0,import_jsx_runtime.jsx)(ArrowRight,{size:20})]})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/home`),className:`w-full py-2 text-sm text-[var(--text-secondary)] hover:text-[var(--text-primary)]`,children:`  `})]})]}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmModal.isOpen,title:confirmModal.title,message:confirmModal.message,type:confirmModal.type,singleButton:confirmModal.singleButton,onConfirm:()=>{confirmModal.onConfirm(),confirmModal.singleButton&&closeConfirmModal()},onCancel:closeConfirmModal})]})},RoomJoinPage_default=RoomJoinPage,BASE_URL=`/api`,normalizeTags=tags=>tags?tags.map(t$4=>typeof t$4==`string`?t$4:t$4.name||t$4.tagName||``).filter(t$4=>t$4.length>0):[],getAuthHeader=()=>{let token=localStorage.getItem(`accessToken`);return token?(token.startsWith(`"`)&&token.endsWith(`"`)&&(token=token.slice(1,-1)),{Authorization:`Bearer ${token}`}):{}};const fetchMyProfile=async()=>{try{return(await axios_default.get(`${BASE_URL}/user/profile`,{headers:getAuthHeader()})).data}catch{return null}},getCommunities=async(page,size=10,userId,hashtag)=>{let params={page,size};userId&&(params.userId=userId),hashtag&&(params.hashtag=hashtag);let data=(await axios_default.get(`${BASE_URL}/communities`,{params,headers:getAuthHeader()})).data;return data&&data.content&&(data.content=data.content.map(item=>({...item,tags:(item.tags||item.hashtags||[]).map(t$4=>typeof t$4==`string`?t$4:t$4.name||t$4.tagName||``).filter(t$4=>t$4.length>0)}))),data};var sanitizeCoordinate=val=>{if(typeof val==`number`)return val;if(typeof val==`string`){if(/^-?\d+(\.\d+)?%$/.test(val))return val;let parsed=parseFloat(val);return isNaN(parsed)?0:parsed}return 0};const getCommunityDetail=async(postId,userId)=>{let params={};userId&&(params.userId=userId);let data=(await axios_default.get(`${BASE_URL}/communities/${postId}`,{params,headers:getAuthHeader()})).data;return data&&(data.tags=(data.tags||data.hashtags||[]).map(t$4=>typeof t$4==`string`?t$4:t$4.name||t$4.tagName||``).filter(t$4=>t$4.length>0),data.stickers&&=data.stickers.map(s$3=>({...s$3,x:sanitizeCoordinate(s$3.x),y:sanitizeCoordinate(s$3.y),w:sanitizeCoordinate(s$3.w),h:sanitizeCoordinate(s$3.h),widgetType:s$3.url&&s$3.url.startsWith(`widget://`)?decodeURIComponent(s$3.url.split(`widget://`)[1].split(`?`)[0]):void 0,widgetProps:s$3.url&&s$3.url.startsWith(`widget://`)?JSON.parse(decodeURIComponent(new URLSearchParams(s$3.url.split(`?`)[1]).get(`props`)||`{}`)):void 0})),data.floatingTexts&&=data.floatingTexts.map(t$4=>({...t$4,x:sanitizeCoordinate(t$4.x),y:sanitizeCoordinate(t$4.y),w:sanitizeCoordinate(t$4.w),h:sanitizeCoordinate(t$4.h)})),data.floatingImages&&=data.floatingImages.map(i$4=>({...i$4,x:sanitizeCoordinate(i$4.x),y:sanitizeCoordinate(i$4.y),w:sanitizeCoordinate(i$4.w),h:sanitizeCoordinate(i$4.h)}))),data},toggleCommunityLike=async(postId,userId)=>{await axios_default.post(`${BASE_URL}/communities/${postId}/like`,null,{params:{userId},headers:getAuthHeader()})},getCommunityMessages=async postId=>(await axios_default.get(`${BASE_URL}/posts/${postId}/messages`,{headers:getAuthHeader()})).data,createCommunityMessage=async(postId,content,userId)=>{try{return(await axios_default.post(`${BASE_URL}/posts/${postId}/messages`,{content},{params:{userId},headers:getAuthHeader()})).data}catch(error$1){throw console.error(`Failed to create message. Status:`,error$1.response?.status,`Data:`,error$1.response?.data),error$1}},updateCommunityMessage=async(messageId,content,userId)=>(await axios_default.patch(`${BASE_URL}/messages/${messageId}`,{content},{params:{userId},headers:getAuthHeader()})).data,deleteCommunityMessage=async(messageId,userId)=>{await axios_default.delete(`${BASE_URL}/messages/${messageId}`,{params:{userId},headers:getAuthHeader()})},getCommunitycardDetail=async(postId,userId)=>{try{let params=userId?{userId}:{},data=(await axios_default.get(`${BASE_URL}/communities/card/${postId}`,{params,headers:getAuthHeader()})).data;return data&&(data.tags=normalizeTags(data.tags||data.hashtags)),data}catch(error$1){throw console.error(`   :`,error$1),error$1}},increaseViewCount=async postId=>{try{await axios_default.get(`${BASE_URL}/communities/scroll/${postId}`,{headers:getAuthHeader()})}catch(error$1){console.error(`   :`,error$1)}};var MiniPostViewer=({title,titleStyles={},styles:styles$1={},blocks=[],stickers=[],floatingTexts=[],floatingImages=[],scale:scale$1=1,minHeight=`auto`})=>{let ORIGINAL_WIDTH=800,getSafeStyle=(item,defaultSize$1=150)=>{let x$2=item.x??item.left??0,y$2=item.y??item.top??0,width=item.w??item.width??defaultSize$1,height=item.h??item.height??`auto`;return{position:`absolute`,left:`${x$2}px`,top:`${y$2}px`,width:typeof width==`number`?`${width}px`:width,height:typeof height==`number`?`${height}px`:height,transform:`rotate(${item.rotation||0}deg)`,zIndex:item.zIndex||10,opacity:item.opacity??1}};return(0,import_jsx_runtime.jsxs)(`div`,{className:`origin-top-left bg-white shadow-sm relative select-none`,style:{width:`800px`,minHeight,height:`auto`,zoom:scale$1,...styles$1,position:`relative`},children:[(0,import_jsx_runtime.jsx)(`style`,{children:`
                @keyframes post-marquee {
                    0% { transform: translateX(100%); }
                    100% { transform: translateX(-100%); }
                }
                .title-marquee {
                    display: inline-block;
                    white-space: nowrap !important;
                    animation: post-marquee 12s linear infinite;
                    will-change: transform;
                    padding-right: 50px;
                }
            `}),(0,import_jsx_runtime.jsx)(`div`,{className:`p-8 pb-4 border-b border-gray-100 mb-8 overflow-hidden whitespace-nowrap`,style:{backgroundColor:titleStyles.backgroundColor||`transparent`},children:(0,import_jsx_runtime.jsx)(`h1`,{className:`title-marquee`,style:{fontSize:titleStyles.fontSize||`36px`,fontWeight:titleStyles.fontWeight||`bold`,color:titleStyles.color||`#1a1a1a`,fontFamily:titleStyles.fontFamily||`sans-serif`,textAlign:titleStyles.textAlign||`left`,lineHeight:1.4},children:title||` `})}),(0,import_jsx_runtime.jsx)(`div`,{className:`px-12 pb-20 space-y-6 relative z-0`,children:blocks.map((block,index$2)=>{let textStyle={fontFamily:block.styles?.fontFamily||`sans-serif`,fontSize:block.styles?.fontSize||`18px`,fontWeight:block.styles?.fontWeight||`normal`,textAlign:block.styles?.textAlign||`left`,color:block.styles?.color||`#333`,backgroundColor:block.styles?.backgroundColor||`transparent`,lineHeight:1.6,whiteSpace:`pre-wrap`},imgHeight=block.styles?.imageHeight||`350px`,imgFit=block.imageFit||`cover`;return(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[block.type===`image-full`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[block.imageUrl&&(0,import_jsx_runtime.jsx)(`img`,{src:block.imageUrl,className:`w-full rounded-lg bg-gray-100`,style:{height:imgHeight,objectFit:imgFit},alt:``}),block.text&&(0,import_jsx_runtime.jsx)(`div`,{style:textStyle,children:block.text})]}),block.type===`image-double`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3`,children:[block.imageUrl&&(0,import_jsx_runtime.jsx)(`img`,{src:block.imageUrl,className:`w-1/2 rounded-lg bg-gray-100`,style:{height:imgHeight,objectFit:imgFit},alt:``}),block.imageUrl2&&(0,import_jsx_runtime.jsx)(`img`,{src:block.imageUrl2,className:`w-1/2 rounded-lg bg-gray-100`,style:{height:imgHeight,objectFit:imgFit},alt:``})]}),block.text&&(0,import_jsx_runtime.jsx)(`div`,{style:textStyle,children:block.text})]}),(block.type===`image-left`||block.type===`image-right`)&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-6 items-start ${block.type===`image-right`?`flex-row-reverse`:``}`,children:[block.imageUrl&&(0,import_jsx_runtime.jsx)(`img`,{src:block.imageUrl,className:`w-1/2 rounded-lg bg-gray-100 flex-shrink-0`,style:{height:imgHeight,objectFit:imgFit},alt:``}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 min-w-0 pt-1`,style:textStyle,children:block.text})]}),block.type===`paragraph`&&(0,import_jsx_runtime.jsx)(`div`,{style:{...textStyle,padding:block.styles?.backgroundColor?`12px`:`0`,borderRadius:`4px`},children:block.text||(0,import_jsx_runtime.jsx)(`span`,{className:`opacity-0`,children:`Empty`})})]},`block-${block.id||`none`}-${index$2}`)})}),stickers.map((stk,index$2)=>(0,import_jsx_runtime.jsx)(`img`,{src:stk.url,style:{...getSafeStyle(stk,120),pointerEvents:`none`},alt:`sticker`},`stk-${stk.id||`none`}-${index$2}`)),floatingImages.map((img,index$2)=>(0,import_jsx_runtime.jsx)(`img`,{src:img.url,style:{...getSafeStyle(img,200),objectFit:`cover`,borderRadius:`8px`,pointerEvents:`none`},alt:`floating`},`img-${img.id||`none`}-${index$2}`)),floatingTexts.map((txt,index$2)=>(0,import_jsx_runtime.jsx)(`div`,{style:{...getSafeStyle(txt,200),padding:`8px`,fontFamily:txt.styles?.fontFamily,fontSize:txt.styles?.fontSize||`16px`,fontWeight:txt.styles?.fontWeight||`normal`,color:txt.styles?.color||`#000`,backgroundColor:txt.styles?.backgroundColor||`transparent`,textAlign:txt.styles?.textAlign||`left`,fontStyle:txt.styles?.fontStyle||`normal`,textDecoration:txt.styles?.textDecoration||`none`,whiteSpace:`pre-wrap`,overflow:`hidden`,wordBreak:`break-word`},children:txt.text},`txt-${txt.id||`none`}-${index$2}`))]})},MiniPostPreview_default=MiniPostViewer,CommunityCard=({data,onClick,onLike,onComment})=>{let containerRef=(0,import_react.useRef)(null),[scale$1,setScale]=(0,import_react.useState)(1);(0,import_react.useEffect)(()=>{let calculateScale=()=>{containerRef.current&&setScale(containerRef.current.clientWidth/800)},observer=new ResizeObserver(()=>{calculateScale()});return containerRef.current&&observer.observe(containerRef.current),()=>observer.disconnect()},[]);let[hasViewed,setHasViewed]=(0,import_react.useState)(!1),tags=data.tags||[],hasContent=data.blocks&&data.blocks.length>0||data.stickers&&data.stickers.length>0||data.floatingImages&&data.floatingImages.length>0||data.title;return(0,import_jsx_runtime.jsxs)(`div`,{className:`group relative w-full aspect-[3/4] rounded-3xl overflow-hidden bg-white cursor-pointer transition-transform duration-300 hover:-translate-y-1 hover:shadow-2xl`,onClick,children:[(0,import_jsx_runtime.jsx)(`div`,{ref:containerRef,onScroll:e$4=>{hasViewed||e$4.currentTarget.scrollTop>50&&(console.log(` (${data.postId})  !`),increaseViewCount(data.postId),setHasViewed(!0))},className:`absolute inset-0 bg-white overflow-y-auto scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent`,children:hasContent?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full min-h-full`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`origin-top-left`,children:(0,import_jsx_runtime.jsx)(MiniPostPreview_default,{title:data.title,titleStyles:data.titleStyles||{},styles:data.styles||{},blocks:data.blocks||[],stickers:data.stickers||[],floatingTexts:data.floatingTexts||[],floatingImages:data.floatingImages||[],scale:scale$1,minHeight:`100%`})})}):(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full flex flex-col items-center justify-center bg-gray-100 text-gray-400`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-4xl mb-2 grayscale`,children:``}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm`,children:` `})]})}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-b from-black/5 via-transparent to-black/60 pointer-events-none z-10`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-3 right-3 z-20`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 bg-black/20 backdrop-blur-md px-2 py-1 rounded-full border border-white/10 shadow-sm`,children:[(0,import_jsx_runtime.jsx)(Eye,{className:`w-3 h-3 text-white/80`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[9px] sm:text-[10px] font-medium text-white/90`,children:data.viewCount})]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute bottom-3 left-3 right-3 sm:bottom-4 sm:left-4 sm:right-4 flex flex-col gap-1.5 sm:gap-2 z-20`,children:[tags.length>0&&(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-wrap gap-1`,children:tags.slice(0,3).map((tag,idx)=>(0,import_jsx_runtime.jsxs)(`span`,{className:`px-1.5 py-0.5 rounded bg-white/20 backdrop-blur-md text-white text-[9px] sm:text-[10px] font-medium border border-white/10`,children:[`#`,tag]},idx))}),(0,import_jsx_runtime.jsx)(`span`,{className:`self-end text-[9px] text-white/70 bg-black/20 px-1.5 py-[2px] rounded-md backdrop-blur-sm whitespace-nowrap`,children:new Date(data.createdAt).toLocaleDateString()}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 rounded-full bg-gradient-to-tr from-indigo-400 to-purple-400 flex items-center justify-center text-[9px] sm:text-[10px] text-white font-bold shadow-sm transition-all`,children:data.writerNickname.charAt(0)}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] sm:text-[11px] font-semibold text-white drop-shadow-md truncate max-w-[70px] sm:max-w-[100px]`,children:data.writerNickname})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1.5 sm:gap-2 bg-black/40 backdrop-blur-md px-2 py-1 sm:px-2.5 sm:py-1 rounded-full border border-white/10 shadow-lg transition-all`,children:[(0,import_jsx_runtime.jsxs)(`div`,{onClick:e$4=>{e$4.stopPropagation(),onLike?.()},className:`flex items-center gap-0.5 cursor-pointer hover:scale-110 transition-transform ${data.isLiked?`text-pink-400`:`text-white`}`,children:[(0,import_jsx_runtime.jsx)(Heart,{className:`w-3 h-3 sm:w-3.5 sm:h-3.5`,fill:data.isLiked?`currentColor`:`none`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[9px] sm:text-[10px] font-medium text-white ml-0.5`,children:data.likeCount})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-[1px] h-2 sm:h-2.5 bg-white/20`}),(0,import_jsx_runtime.jsxs)(`div`,{onClick:e$4=>{e$4.stopPropagation(),onComment?.()},className:`flex items-center gap-0.5 text-white cursor-pointer hover:scale-110 transition-transform`,children:[(0,import_jsx_runtime.jsx)(MessageCircle,{className:`w-3 h-3 sm:w-3.5 sm:h-3.5`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[9px] sm:text-[10px] font-medium ml-0.5`,children:data.commentCount||0})]})]})]})]})]})},CommunityCard_default=CommunityCard,CommunityDetailModal=({data,isOpen,onClose,currentUserId,onLikeToggle,initialView=`content`})=>{let[postDetail,setPostDetail]=(0,import_react.useState)(null),[likeState,setLikeState]=(0,import_react.useState)({isLiked:data.isLiked,count:data.likeCount}),[messages,setMessages]=(0,import_react.useState)([]),[newMessage,setNewMessage]=(0,import_react.useState)(``),[isSubmitting,setIsSubmitting]=(0,import_react.useState)(!1),messagesEndRef=(0,import_react.useRef)(null),commentsRef=(0,import_react.useRef)(null),inputRef=(0,import_react.useRef)(null),[editingMessageId,setEditingMessageId]=(0,import_react.useState)(null),[editContent,setEditContent]=(0,import_react.useState)(``),[confirmModal,setConfirmModal]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}}),closeConfirmModal=()=>{setConfirmModal(prev=>({...prev,isOpen:!1}))};(0,import_react.useEffect)(()=>{setLikeState({isLiked:data.isLiked,count:data.likeCount}),setPostDetail(null),isOpen&&(fetchMessages(),fetchDetail())},[data,isOpen]),(0,import_react.useEffect)(()=>{isOpen&&initialView===`comments`&&commentsRef.current&&setTimeout(()=>{commentsRef.current?.scrollIntoView({behavior:`smooth`,block:`start`}),inputRef.current?.focus()},300)},[isOpen,initialView]);let fetchDetail=async()=>{try{let detail=await getCommunityDetail(data.postId,currentUserId);detail&&(setPostDetail(detail),setLikeState({isLiked:detail.isLiked,count:detail.likeCount}))}catch(error$1){console.error(`Failed to fetch community detail:`,error$1)}},fetchMessages=async()=>{try{setMessages((await getCommunityMessages(data.postId)).map(m$3=>({...m$3,isOwner:currentUserId?Number(m$3.userId)===Number(currentUserId):!1})))}catch(error$1){console.error(`Failed to fetch messages:`,error$1)}},handleMessageSubmit=async e$4=>{if(e$4.preventDefault(),!(!newMessage.trim()||!currentUserId)){setIsSubmitting(!0);try{let created=await createCommunityMessage(data.postId,newMessage,currentUserId);setMessages(prev=>[...prev,{...created,isOwner:!0}]),setNewMessage(``),setTimeout(()=>messagesEndRef.current?.scrollIntoView({behavior:`smooth`}),100)}catch{setConfirmModal({isOpen:!0,title:` `,message:`    .`,type:`danger`,singleButton:!0,onConfirm:closeConfirmModal})}finally{setIsSubmitting(!1),setTimeout(()=>inputRef.current?.focus(),100)}}},handleDeleteMessage=messageId=>{currentUserId&&setConfirmModal({isOpen:!0,title:` `,message:`   ?`,type:`danger`,onConfirm:async()=>{let backup=[...messages];setMessages(prev=>prev.filter(m$3=>m$3.messageId!==messageId)),closeConfirmModal();try{await deleteCommunityMessage(messageId,currentUserId)}catch{setConfirmModal({isOpen:!0,title:` `,message:`  .`,type:`danger`,singleButton:!0,onConfirm:()=>{setMessages(backup),closeConfirmModal()}})}}})},handleUpdateMessage=async messageId=>{if(!currentUserId||!editContent.trim())return;let backup=[...messages];setMessages(prev=>prev.map(m$3=>m$3.messageId===messageId?{...m$3,content:editContent}:m$3)),setEditingMessageId(null);try{await updateCommunityMessage(messageId,editContent,currentUserId)}catch{setConfirmModal({isOpen:!0,title:` `,message:`  .`,type:`danger`,singleButton:!0,onConfirm:()=>{setMessages(backup),setEditingMessageId(messageId),closeConfirmModal()}})}};return isOpen?(0,import_jsx_runtime.jsxs)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity`,onClick:onClose}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative w-full max-w-2xl max-h-[90vh] flex flex-col theme-bg-modal rounded-3xl shadow-2xl animate-in fade-in zoom-in-95 duration-200 overflow-hidden`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-shrink-0 flex items-center justify-between p-6 border-b theme-border theme-bg-header backdrop-blur-md text-white z-10`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-xl font-bold truncate pr-8 theme-text-primary`,children:data.title}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-2 rounded-full hover:bg-black/5 transition-colors theme-icon`,children:(0,import_jsx_runtime.jsx)(X,{size:24})})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 overflow-y-auto p-6 md:p-8`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-8`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-gradient-to-br from-indigo-400 to-purple-400 flex items-center justify-center text-white font-bold text-lg shadow-inner`,children:data.writerNickname.charAt(0)}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`p`,{className:`font-bold theme-text-primary`,children:data.writerNickname}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs theme-text-secondary opacity-70`,children:new Date(data.createdAt).toLocaleString()})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full min-h-[300px] rounded-xl overflow-hidden`,children:postDetail?(0,import_jsx_runtime.jsx)(EditorCanvas_default,{title:postDetail.title||data.title,setTitle:()=>{},titleStyles:postDetail.titleStyles||data.titleStyles||{},viewMode:`read`,paperStyles:postDetail.styles||data.styles||{},blocks:postDetail.blocks||[],setBlocks:()=>{},stickers:postDetail.stickers||[],floatingTexts:postDetail.floatingTexts||[],floatingImages:postDetail.floatingImages||[],selectedId:null,onSelect:()=>{},onUpdate:()=>{},onDelete:()=>{},onBlockImageUpload:()=>{},onBackgroundClick:()=>{}}):(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center justify-center w-full h-[300px] text-gray-400 bg-black/5 dark:bg-white/5 animate-pulse rounded-xl`,children:`  ...`})}),(postDetail?.tags||data.tags)&&(postDetail?.tags||data.tags).length>0&&(0,import_jsx_runtime.jsx)(`div`,{className:`w-full flex flex-wrap gap-2 mt-6`,children:(postDetail?.tags||data.tags).map((tag,idx)=>(0,import_jsx_runtime.jsxs)(`span`,{className:`px-4 py-1.5 rounded-full theme-bg-card theme-border border text-sm font-medium theme-text-secondary shadow-sm hover:shadow-md transition-all duration-300 cursor-default select-none`,children:[`#`,tag]},idx))})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-4 py-4 border-t theme-border`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:async e$4=>{if(e$4.stopPropagation(),!currentUserId){setConfirmModal({isOpen:!0,title:` `,message:`    .`,type:`info`,singleButton:!0,onConfirm:closeConfirmModal});return}let newIsLiked=!likeState.isLiked;setLikeState({isLiked:newIsLiked,count:newIsLiked?likeState.count+1:likeState.count-1}),onLikeToggle(newIsLiked);try{await toggleCommunityLike(data.postId,currentUserId)}catch(error$1){setLikeState({isLiked:!newIsLiked,count:likeState.count}),onLikeToggle(!newIsLiked),console.error(`Failed to toggle like:`,error$1)}},className:`flex items-center gap-2 px-6 py-2.5 rounded-full transition-all duration-300 font-medium border ${likeState.isLiked?`bg-red-500 border-red-500 text-white shadow-lg shadow-red-500/30 hover:bg-red-600`:`theme-bg-card theme-border theme-text-primary hover:bg-black/5`}`,children:[(0,import_jsx_runtime.jsx)(Heart,{size:20,className:likeState.isLiked?`fill-current`:``}),(0,import_jsx_runtime.jsxs)(`span`,{children:[` `,likeState.count]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 theme-text-secondary`,children:[(0,import_jsx_runtime.jsx)(Eye,{size:20}),(0,import_jsx_runtime.jsxs)(`span`,{children:[data.viewCount,` `]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{ref:commentsRef,className:`space-y-6 pt-4 border-t theme-border`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`text-lg font-bold theme-text-primary flex items-center gap-2`,children:[` `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-indigo-500`,children:messages.length})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[messages.length===0?(0,import_jsx_runtime.jsx)(`p`,{className:`text-center text-gray-400 py-8 text-sm`,children:`  !`}):messages.map((msg,index$2)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`group flex gap-3 p-4 rounded-2xl bg-gray-50 dark:bg-white/5 hover:bg-gray-100 dark:hover:bg-white/10 transition-colors`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex-shrink-0 w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-500 dark:text-gray-300`,children:(msg.nickname||`?`).charAt(0)}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-baseline justify-between mb-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-sm theme-text-primary`,children:msg.nickname||`  `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-gray-400`,children:new Date(msg.createdAt).toLocaleDateString()})]}),editingMessageId===msg.messageId?(0,import_jsx_runtime.jsxs)(`div`,{className:`mt-1`,children:[(0,import_jsx_runtime.jsx)(`textarea`,{value:editContent,onChange:e$4=>setEditContent(e$4.target.value),className:`w-full p-2 text-sm rounded-lg border theme-border bg-white dark:bg-black/20 theme-text-primary focus:ring-2 focus:ring-indigo-500 outline-none resize-none`,rows:2,autoFocus:!0}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-end gap-2 mt-2`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setEditingMessageId(null),className:`px-3 py-1 text-xs rounded-lg hover:bg-gray-200 dark:hover:bg-white/10 theme-text-secondary`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleUpdateMessage(msg.messageId),className:`px-3 py-1 text-xs rounded-lg bg-indigo-600 text-white hover:bg-indigo-700`,children:` `})]})]}):(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm text-gray-700 dark:text-gray-300 break-words leading-relaxed whitespace-pre-wrap`,children:msg.content})]}),msg.isOwner&&!editingMessageId&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{setEditingMessageId(msg.messageId),setEditContent(msg.content)},className:`p-1.5 text-gray-400 hover:text-indigo-500 transition-colors`,children:(0,import_jsx_runtime.jsx)(PenLine,{size:14})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleDeleteMessage(msg.messageId),className:`p-1.5 text-gray-400 hover:text-red-500 transition-colors`,children:(0,import_jsx_runtime.jsx)(Trash2,{size:14})})]})]},`comment-${msg.messageId||`none`}-${index$2}`)),(0,import_jsx_runtime.jsx)(`div`,{ref:messagesEndRef})]})]})]})}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-shrink-0 p-4 border-t theme-border theme-bg-header bg-opacity-95 backdrop-blur-sm z-10`,children:(0,import_jsx_runtime.jsxs)(`form`,{onSubmit:handleMessageSubmit,className:`flex gap-2 relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{ref:inputRef,type:`text`,value:newMessage,onChange:e$4=>setNewMessage(e$4.target.value),placeholder:currentUserId?` ...`:`     .`,disabled:!currentUserId||isSubmitting,className:`flex-1 px-4 py-3 rounded-xl bg-gray-100 dark:bg-white/10 border-transparent focus:bg-white dark:focus:bg-black/30 focus:ring-2 focus:ring-indigo-500 transition-all outline-none theme-text-primary text-sm`}),(0,import_jsx_runtime.jsx)(`button`,{type:`submit`,disabled:!newMessage.trim()||!currentUserId||isSubmitting,className:`px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md shadow-indigo-500/20 active:scale-95 flex items-center justify-center min-w-[50px]`,children:isSubmitting?(0,import_jsx_runtime.jsx)(`div`,{className:`w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin`}):(0,import_jsx_runtime.jsx)(Send,{size:20})})]})})]}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmModal.isOpen,title:confirmModal.title,message:confirmModal.message,type:confirmModal.type,singleButton:confirmModal.singleButton,onConfirm:()=>{confirmModal.onConfirm(),confirmModal.singleButton&&closeConfirmModal()},onCancel:closeConfirmModal})]}):null},CommunityDetailModal_default=CommunityDetailModal,CommunityFeed=({currentUserId,selectedTag})=>{let[posts,setPosts]=(0,import_react.useState)([]),[page,setPage]=(0,import_react.useState)(0),[loading,setLoading]=(0,import_react.useState)(!1),[hasMore,setHasMore]=(0,import_react.useState)(!0),[selectedPost,setSelectedPost]=(0,import_react.useState)(null),[isModalOpen,setIsModalOpen]=(0,import_react.useState)(!1),[initialModalView,setInitialModalView]=(0,import_react.useState)(`content`),observer=(0,import_react.useRef)(null),lastElementRef=(0,import_react.useCallback)(node=>{loading||(observer.current&&observer.current.disconnect(),observer.current=new IntersectionObserver(entries=>{entries[0].isIntersecting&&hasMore&&setPage(prevPage=>prevPage+1)}),node&&observer.current.observe(node))},[loading,hasMore]),fetchPosts=async()=>{if(!(!hasMore&&page>0)){setLoading(!0);try{let response=await getCommunities(page,12,currentUserId,selectedTag||void 0);console.log(`Values from fetchPosts:`,{page,last:response.last,empty:response.empty,contentLen:response.content?.length});let publicPosts=response.content.filter(p$3=>p$3.isPublic);setPosts(prev=>{if(page===0)return publicPosts;let existingIds=new Set(prev.map(p$3=>p$3.postId)),newPosts=publicPosts.filter(p$3=>!existingIds.has(p$3.postId));return[...prev,...newPosts]});let isLast=response.last===void 0?response.content.length<12:response.last,isEmpty=response.content.length===0;setHasMore(!isLast&&!isEmpty)}catch(error$1){console.error(`Failed to fetch communities:`,error$1),setHasMore(!1)}finally{setLoading(!1)}}};(0,import_react.useEffect)(()=>{fetchPosts()},[page,currentUserId,selectedTag]),(0,import_react.useEffect)(()=>{setPosts([]),setPage(0),setHasMore(!0)},[currentUserId,selectedTag]);let handleCardClick=async(post,view=`content`)=>{try{let detail=await getCommunitycardDetail(post.postId,currentUserId);setSelectedPost(detail),setInitialModalView(view),setIsModalOpen(!0),setPosts(prev=>prev.map(p$3=>p$3.postId===post.postId?{...p$3,viewCount:detail.viewCount}:p$3))}catch(error$1){console.error(`Failed to open detail:`,error$1)}},handleCardLikeClick=async post=>{if(!currentUserId){alert(`  .`);return}let newIsLiked=!post.isLiked,newCount=newIsLiked?post.likeCount+1:post.likeCount-1;setPosts(prev=>prev.map(p$3=>p$3.postId===post.postId?{...p$3,isLiked:newIsLiked,likeCount:newCount}:p$3));try{await toggleCommunityLike(post.postId,currentUserId)}catch(error$1){console.error(`Failed to toggle like:`,error$1),setPosts(prev=>prev.map(p$3=>p$3.postId===post.postId?{...p$3,isLiked:!newIsLiked,likeCount:post.likeCount}:p$3))}};return(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-8`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center justify-between mb-6 px-2`,children:(0,import_jsx_runtime.jsxs)(`h3`,{className:`text-xl font-bold text-[var(--text-primary)]`,children:[` (`,posts.length,`)`]})}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5 w-full`,children:posts.map((post,index$2)=>(0,import_jsx_runtime.jsx)(`div`,{className:`w-full`,children:(0,import_jsx_runtime.jsx)(CommunityCard_default,{data:post,onClick:()=>handleCardClick(post,`content`),onLike:()=>handleCardLikeClick(post),onComment:()=>handleCardClick(post,`comments`)})},`post-${post.postId||`none`}-${index$2}`))}),(0,import_jsx_runtime.jsx)(`div`,{ref:lastElementRef,className:`h-4`}),!loading&&!hasMore&&posts.length>0&&(0,import_jsx_runtime.jsx)(`div`,{className:`text-center py-8 flex items-center justify-center`,children:(0,import_jsx_runtime.jsx)(`span`,{className:`px-4 py-1.5 rounded-full bg-white/40 dark:bg-black/20 backdrop-blur-md border border-white/30 shadow-sm text-sm font-medium theme-text-secondary flex items-center gap-2`,children:`   `})}),!loading&&!hasMore&&posts.length===0&&(0,import_jsx_runtime.jsx)(`div`,{className:`text-center py-20 text-gray-600 dark:text-gray-300`,children:(0,import_jsx_runtime.jsx)(`p`,{className:`text-xl font-light`,children:`   .   !`})}),selectedPost&&(0,import_jsx_runtime.jsx)(CommunityDetailModal_default,{isOpen:isModalOpen,onClose:()=>setIsModalOpen(!1),data:selectedPost,currentUserId,onLikeToggle:newStatus=>{selectedPost&&setPosts(prev=>prev.map(p$3=>p$3.postId===selectedPost.postId?{...p$3,isLiked:newStatus,likeCount:newStatus?p$3.likeCount+1:p$3.likeCount-1}:p$3))},initialView:initialModalView})]})},CommunityFeed_default=CommunityFeed,Community=()=>{let isMobile$1=useIsMobile(),[userId,setUserId]=(0,import_react.useState)(void 0),[searchQuery,setSearchQuery]=(0,import_react.useState)(``),[selectedTag,setSelectedTag]=(0,import_react.useState)(null),[recentTags,setRecentTags]=(0,import_react.useState)([]),[isAuthChecking,setIsAuthChecking]=(0,import_react.useState)(!0),[isEditMode,setIsEditMode]=(0,import_react.useState)(!1);(0,import_react.useEffect)(()=>{let initUser=async()=>{try{let profile=await fetchMyProfile();profile&&setUserId(profile.id)}catch(error$1){console.error(`Auth check failed:`,error$1)}finally{setIsAuthChecking(!1)}},savedTags=localStorage.getItem(`community_recent_tags`);savedTags&&setRecentTags(JSON.parse(savedTags)),initUser()},[]);let handleSearch=e$4=>{if(e$4.preventDefault(),!searchQuery.trim())return;let tag=searchQuery.trim().replace(/^#/,``);setSelectedTag(tag);let updatedTags=[tag,...recentTags.filter(t$4=>t$4!==tag)].slice(0,10);setRecentTags(updatedTags),localStorage.setItem(`community_recent_tags`,JSON.stringify(updatedTags)),setSearchQuery(``),setIsEditMode(!1)},handleTagClick=tag=>{setSelectedTag(selectedTag===tag?null:tag)},handleRemoveTag=(tag,e$4)=>{e$4.stopPropagation();let updatedTags=recentTags.filter(t$4=>t$4!==tag);setRecentTags(updatedTags),localStorage.setItem(`community_recent_tags`,JSON.stringify(updatedTags)),selectedTag===tag&&setSelectedTag(null),updatedTags.length===0&&setIsEditMode(!1)};return(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen`,children:[(0,import_jsx_runtime.jsx)(Navigation_default,{}),(0,import_jsx_runtime.jsx)(FloatingSettingsPanel_default,{defaultOpen:!1,isMobile:isMobile$1}),(0,import_jsx_runtime.jsxs)(`main`,{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-9 pb-32`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center justify-between mb-8 pb-4 border-b border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`h2`,{className:`text-3xl font-bold text-[var(--text-primary)] flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(Globe,{className:`text-indigo-500 fill-indigo-500/20`,size:32}),``]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[var(--text-secondary)] text-sm mt-2 ml-1`,children:`   .`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`mt-4 md:mt-0 w-full md:w-96`,children:(0,import_jsx_runtime.jsxs)(`form`,{onSubmit:handleSearch,className:`relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:searchQuery,onChange:e$4=>setSearchQuery(e$4.target.value),placeholder:`  (Enter)`,className:`w-full pl-10 pr-4 py-2 rounded-full bg-[var(--bg-secondary)] border border-[var(--border-color)] text-[var(--text-primary)] focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-shadow`}),(0,import_jsx_runtime.jsx)(Search,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400`,size:18})]})})]}),(recentTags.length>0||selectedTag)&&(0,import_jsx_runtime.jsxs)(`div`,{className:`mb-8 animate-fade-in-up`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)]`,children:` :`}),recentTags.length>0&&(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setIsEditMode(!isEditMode),className:`text-xs font-medium px-2 py-1 rounded transition-colors ${isEditMode?`text-indigo-500 bg-indigo-50`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:isEditMode?``:``})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2`,children:[recentTags.map((tag,index$2)=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>handleTagClick(tag),className:`pl-3 pr-3 py-1.5 rounded-full text-sm font-medium transition-all flex items-center gap-1.5 border ${selectedTag===tag?`bg-indigo-500 border-indigo-500 text-white shadow-md transform scale-105`:`bg-[var(--bg-card)] border-[var(--border-color)] text-[var(--text-secondary)] hover:border-indigo-300 hover:text-indigo-500`} 
                                        /* 3.       (X   ) -  */
                                        ${isEditMode?`pr-1.5`:``}
                                        `,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`opacity-70`,children:`#`}),tag,isEditMode&&(0,import_jsx_runtime.jsx)(`div`,{onClick:e$4=>handleRemoveTag(tag,e$4),className:`rounded-full p-0.5 ml-1 transition-colors cursor-pointer ${selectedTag===tag?`hover:bg-indigo-600 text-white`:`hover:bg-[var(--bg-card-secondary)] text-[var(--text-secondary)]`}`,children:(0,import_jsx_runtime.jsx)(X,{size:14})})]},`tag-${tag}-${index$2}`)),selectedTag&&!recentTags.includes(selectedTag)&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>handleTagClick(selectedTag),className:`px-3 py-1.5 rounded-full text-sm font-medium bg-indigo-500 border border-indigo-500 text-white shadow-md flex items-center gap-1.5`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`opacity-70`,children:`#`}),selectedTag,(0,import_jsx_runtime.jsx)(X,{size:12,className:`cursor-pointer`,onClick:e$4=>{e$4.stopPropagation(),setSelectedTag(null)}})]}),selectedTag&&(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setSelectedTag(null),className:`ml-2 text-sm text-[var(--text-secondary)] hover:text-[var(--text-primary)] underline decoration-dotted underline-offset-4`,children:``})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-full`,children:isAuthChecking?(0,import_jsx_runtime.jsx)(`div`,{className:`flex justify-center py-20`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500`})}):(0,import_jsx_runtime.jsx)(CommunityFeed_default,{currentUserId:userId,selectedTag})})]})]})},CommunityPage_default=Community;const applyThemeStyles=(mode,config)=>{document.documentElement.setAttribute(`data-theme`,mode);let getVal=(key$1,defaultVal)=>localStorage.getItem(key$1)||defaultVal,storedFontFamily=getVal(`fontFamily`,`'Noto Sans KR', sans-serif`),storedFontSize=getVal(`fontSize`,`16px`),fontFamily=config?.font?.family||storedFontFamily,fontSize=config?.font?.size||storedFontSize;if(document.documentElement.style.setProperty(`--font-family`,fontFamily),document.documentElement.style.setProperty(`--font-size`,fontSize),mode===`manual`){let manualConfig=config?.manualConfig,textColor=manualConfig?.text?.color||getVal(`manualTextColor`,`#1a1a1a`),textIntensity=manualConfig?.text?.intensity??parseInt(getVal(`manualTextIntensity`,`100`)),tr=parseInt(textColor.slice(1,3),16),tg=parseInt(textColor.slice(3,5),16),tb=parseInt(textColor.slice(5,7),16);document.documentElement.style.setProperty(`--manual-text-color`,`${tr}, ${tg}, ${tb}`),document.documentElement.style.setProperty(`--manual-text-intensity`,`${textIntensity/100}`);let bgImage=manualConfig?.background?.image||getVal(`manualBgImage`,``),isGradient=manualConfig?.background?.isGradient??getVal(`manualIsGradient`,`false`)===`true`,bgSize=manualConfig?.background?.size||getVal(`manualBgSize`,`cover`);if(bgImage)document.documentElement.style.setProperty(`--manual-gradient`,`url(${bgImage})`),document.documentElement.style.setProperty(`--manual-bg-intensity`,`0`),document.documentElement.style.setProperty(`--manual-bg-size`,bgSize===`repeat`?`auto`:bgSize),document.documentElement.style.setProperty(`--manual-bg-repeat`,bgSize===`repeat`?`repeat`:`no-repeat`);else if(isGradient){let dir=manualConfig?.background?.gradientDirection||getVal(`manualGradientDirection`,`to bottom right`),start$2=manualConfig?.background?.gradientStart||getVal(`manualGradientStartColor`,`#ffffff`),end$1=manualConfig?.background?.gradientEnd||getVal(`manualGradientEndColor`,`#3b82f6`);document.documentElement.style.setProperty(`--manual-gradient`,`linear-gradient(${dir}, ${start$2}, ${end$1})`),document.documentElement.style.setProperty(`--manual-bg-intensity`,`1`),document.documentElement.style.setProperty(`--manual-bg-size`,`cover`),document.documentElement.style.setProperty(`--manual-bg-repeat`,`no-repeat`)}else{let bgColor=manualConfig?.background?.color||getVal(`manualBgColor`,`#ffffff`),bgIntensity=manualConfig?.background?.intensity??parseInt(getVal(`manualBgIntensity`,`100`));document.documentElement.style.setProperty(`--manual-gradient`,`none`);let r$4=parseInt(bgColor.slice(1,3),16),g$3=parseInt(bgColor.slice(3,5),16),b$3=parseInt(bgColor.slice(5,7),16);document.documentElement.style.setProperty(`--manual-bg-color`,`${r$4}, ${g$3}, ${b$3}`),document.documentElement.style.setProperty(`--manual-bg-intensity`,`${bgIntensity/100}`),document.documentElement.style.setProperty(`--manual-bg-size`,`cover`),document.documentElement.style.setProperty(`--manual-bg-repeat`,`no-repeat`)}let cardColor=manualConfig?.component?.cardColor||getVal(`manualCardColor`,`#ffffff`),cr=parseInt(cardColor.slice(1,3),16),cg=parseInt(cardColor.slice(3,5),16),cb=parseInt(cardColor.slice(5,7),16);document.documentElement.style.setProperty(`--manual-card-color`,`${cr}, ${cg}, ${cb}`);let btnColor=manualConfig?.component?.btnColor||getVal(`manualBtnColor`,`#2563eb`),btnTextColor=manualConfig?.component?.btnTextColor||getVal(`manualBtnTextColor`,`#ffffff`);document.documentElement.style.setProperty(`--manual-btn-bg`,btnColor),document.documentElement.style.setProperty(`--manual-btn-text`,btnTextColor)}},saveThemeToLocalStorage=data=>{if(!data)return;let themeData=data.theme;if(themeData&&(localStorage.setItem(`theme`,themeData.mode),themeData.font&&(localStorage.setItem(`fontFamily`,themeData.font.family),localStorage.setItem(`fontSize`,themeData.font.size)),themeData.manualConfig)){let mc=themeData.manualConfig;mc.text&&(localStorage.setItem(`manualTextColor`,mc.text.color),localStorage.setItem(`manualTextIntensity`,mc.text.intensity.toString())),mc.background&&(localStorage.setItem(`manualIsGradient`,mc.background.isGradient.toString()),localStorage.setItem(`manualBgColor`,mc.background.color),localStorage.setItem(`manualBgIntensity`,mc.background.intensity.toString()),localStorage.setItem(`manualGradientDirection`,mc.background.gradientDirection),localStorage.setItem(`manualGradientStartColor`,mc.background.gradientStart),localStorage.setItem(`manualGradientEndColor`,mc.background.gradientEnd),localStorage.setItem(`manualBgImage`,mc.background.image),localStorage.setItem(`manualBgSize`,mc.background.size)),mc.component&&(localStorage.setItem(`manualCardColor`,mc.component.cardColor),localStorage.setItem(`manualBtnColor`,mc.component.btnColor),localStorage.setItem(`manualBtnTextColor`,mc.component.btnTextColor))}};var ThemeContext=(0,import_react.createContext)(void 0);const ThemeProvider=({children:children$1})=>{let{isLoggedIn}=useAuth(),[theme,setTheme]=(0,import_react.useState)(()=>localStorage.getItem(`theme`)||`default`),applyStyles=(mode,config)=>{applyThemeStyles(mode,config)},saveToLocalStorage=data=>{saveThemeToLocalStorage(data)},fetchThemeSettings=async()=>{let token=localStorage.getItem(`accessToken`);if(!token){applyStyles(localStorage.getItem(`theme`)||`default`);return}try{let response=await fetch(`/api/setting/all`,{method:`GET`,headers:{Authorization:`Bearer ${token}`}});if(response.ok){let data=await response.json();data.theme?(saveToLocalStorage(data),setTheme(data.theme.mode),applyStyles(data.theme.mode,data.theme)):applyStyles(localStorage.getItem(`theme`)||`default`),data.page&&data.page.defaultPage&&localStorage.setItem(`defaultPage`,data.page.defaultPage)}else applyStyles(localStorage.getItem(`theme`)||`default`);try{let pageRes=await fetch(`/api/setting/page`,{method:`GET`,headers:{Authorization:`Bearer ${token}`}});if(pageRes.ok){let pageData=await pageRes.json();pageData.defaultPage&&localStorage.setItem(`defaultPage`,pageData.defaultPage)}}catch(e$4){console.error(`Failed to fetch specific page setting`,e$4)}}catch(error$1){console.error(`Error fetching settings:`,error$1),applyStyles(localStorage.getItem(`theme`)||`default`)}};return(0,import_react.useEffect)(()=>{fetchThemeSettings();let handleStorageChange=()=>{let storedTheme=localStorage.getItem(`theme`)||`default`;setTheme(storedTheme),applyStyles(storedTheme)};return window.addEventListener(`storage`,handleStorageChange),window.addEventListener(`themeChange`,handleStorageChange),()=>{window.removeEventListener(`storage`,handleStorageChange),window.removeEventListener(`themeChange`,handleStorageChange)}},[isLoggedIn]),(0,import_jsx_runtime.jsx)(ThemeContext.Provider,{value:{theme,setTheme:newTheme=>{setTheme(newTheme),localStorage.setItem(`theme`,newTheme),applyStyles(newTheme),newTheme===`dark`||newTheme===`dracula`?document.documentElement.classList.add(`dark`):document.documentElement.classList.remove(`dark`),window.dispatchEvent(new Event(`themeChange`))},refreshTheme:fetchThemeSettings},children:children$1})};var MarketLayout=({children:children$1,header})=>(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen bg-[var(--bg-primary)] transition-colors duration-300`,children:[header,(0,import_jsx_runtime.jsx)(`div`,{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`animate-in slide-in-from-bottom-4 duration-500 fade-in`,children:children$1})})]}),MarketLayout_default=MarketLayout,API_BASE_URL=`/api`,ItemDetailModal=({item,onClose,onBuy,onToggleWishlist,checkOwned,isWishlisted,effectivePrice,initialTab=`details`,onFilterBySeller,onSearchTag,reviewTargetId,onReviewChange,marketItems})=>{let isOwned=checkOwned(item.id),{userId}=useCredits(),[activeTab,setActiveTab]=(0,import_react.useState)(initialTab),[reviews,setReviews]=(0,import_react.useState)([]),[newRating,setNewRating]=(0,import_react.useState)(5),[newReviewContent,setNewReviewContent]=(0,import_react.useState)(``),[isSubmitting,setIsSubmitting]=(0,import_react.useState)(!1),tabsRef=import_react.useRef(null),[confirmation,setConfirmation]=(0,import_react.useState)({isOpen:!1,title:``,message:``,type:`info`,singleButton:!0,onConfirm:()=>{}}),showAlert=(title,message,type=`info`)=>{setConfirmation({isOpen:!0,title,message,type,singleButton:!0,onConfirm:()=>setConfirmation(prev=>({...prev,isOpen:!1}))})},scrollToTabs=()=>{window.innerWidth<768&&tabsRef.current&&tabsRef.current.scrollIntoView({behavior:`smooth`,block:`start`})};import_react.useEffect(()=>{item&&fetchReviews()},[item,reviewTargetId]),import_react.useEffect(()=>(document.body.style.overflow=`hidden`,()=>{document.body.style.overflow=`unset`}),[]);let fetchReviews=async()=>{let token=localStorage.getItem(`accessToken`),targetId=reviewTargetId||item.id;try{let headers={};token&&(headers.Authorization=`Bearer ${token} `);let res=await fetch(`${API_BASE_URL}/market/reviews/${targetId}`,{headers});if(res.ok){let data=await res.json();return data.sort((a$4,b$3)=>{let isMyReviewA=String(a$4.userId)===String(userId),isMyReviewB=String(b$3.userId)===String(userId);return isMyReviewA&&!isMyReviewB?-1:!isMyReviewA&&isMyReviewB?1:b$3.id-a$4.id}),setReviews(data),data}}catch(e$4){console.error(`Failed to fetch reviews`,e$4)}return null},handlePostReview=async()=>{let token=localStorage.getItem(`accessToken`),targetId=reviewTargetId||item.id;if(!token){showAlert(` `,` .`,`danger`);return}if(!newReviewContent.trim()){showAlert(` `,`  .`,`danger`);return}setIsSubmitting(!0);try{let res=await fetch(`${API_BASE_URL}/market/reviews`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({marketItemId:targetId,content:newReviewContent,rating:newRating})});if(res.ok){await fetchReviews(),setNewReviewContent(``),setNewRating(5),showAlert(`  `,`  !`,`success`);let updatedReviews=await fetchReviews();if(updatedReviews&&onReviewChange){let count=updatedReviews.length,avg=updatedReviews.reduce((acc,r$4)=>acc+r$4.rating,0)/count;onReviewChange(item.id,{averageRating:avg,reviewCount:count})}}else{let errorText=await res.text();res.status===400||res.status===409?showAlert(`  `,`${errorText||`   .`}`,`danger`):showAlert(`  `,`   .`,`danger`)}}catch(e$4){console.error(`Failed to post review`,e$4),showAlert(` `,`    .`,`danger`)}finally{setIsSubmitting(!1)}},handleDeleteReview=reviewId=>{setConfirmation({isOpen:!0,title:` `,message:`   ?`,type:`danger`,singleButton:!1,onConfirm:async()=>{let token=localStorage.getItem(`accessToken`);if(token)try{if((await fetch(`${API_BASE_URL}/market/reviews/${reviewId}`,{method:`DELETE`,headers:{Authorization:`Bearer ${token}`}})).ok){setConfirmation(prev=>({...prev,isOpen:!1})),await fetchReviews(),setTimeout(()=>showAlert(` `,` .`,`success`),300);let updatedReviews=await fetchReviews();if(updatedReviews&&onReviewChange){let count=updatedReviews.length,avg=count>0?updatedReviews.reduce((acc,r$4)=>acc+r$4.rating,0)/count:0;onReviewChange(item.id,{averageRating:avg,reviewCount:count})}else onReviewChange&&onReviewChange(item.id,{averageRating:0,reviewCount:0})}else showAlert(` `,`  .`,`danger`)}catch(e$4){console.error(`Failed to delete review`,e$4),showAlert(``,` .`,`danger`)}}})},packRecommendation=import_react.useMemo(()=>{if(!item||!marketItems)return null;let targetId=item.referenceId||item.id,stickerDef=STICKERS.find(s$3=>s$3.id===String(targetId));return stickerDef&&stickerDef.packId?marketItems.find(m$3=>m$3.referenceId===stickerDef.packId):null},[item,marketItems]),packContents=import_react.useMemo(()=>{let typeStr=(item.type||``).toLowerCase();if(typeStr!==`package`&&typeStr!==`start_pack`)return[];let packRefId=item.referenceId||item.id;return STICKERS.filter(s$3=>s$3.packId===packRefId)},[item]);return item?(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200`,onClick:onClose,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] w-full max-w-4xl h-[85vh] md:h-auto md:max-h-[90vh] rounded-t-3xl rounded-b-none md:rounded-3xl overflow-y-auto md:overflow-hidden shadow-2xl border-t md:border border-[var(--border-color)] flex flex-col md:flex-row relative animate-in slide-in-from-bottom duration-300 md:zoom-in-95`,onClick:e$4=>e$4.stopPropagation(),children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`absolute top-4 right-4 z-50 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full transition-colors`,children:(0,import_jsx_runtime.jsx)(X,{size:20})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full md:w-1/2 h-56 md:h-auto shrink-0 bg-[var(--bg-card-secondary)] flex items-center justify-center p-8 relative`,children:[item.imageUrl?(0,import_jsx_runtime.jsx)(`img`,{src:item.imageUrl,alt:item.title,draggable:!1,className:`w-full h-full object-contain drop-shadow-xl select-none`}):item.widgetType===`custom-block`||item.type===`custom-block`||typeof item.widgetType==`string`&&item.widgetType.startsWith(`custom-`)||item.type===`template_widget`&&item.content?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full flex items-center justify-center p-2`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full transform scale-150 md:scale-125 origin-center pointer-events-none select-none flex items-center justify-center`,children:(0,import_jsx_runtime.jsx)(CustomWidgetPreview_default,{content:{...item.content,decorations:item.decorations||[]},defaultSize:item.defaultSize||`2x2`})})}):(0,import_jsx_runtime.jsxs)(`div`,{className:`text-[var(--text-secondary)] flex flex-col items-center gap-4`,children:[(0,import_jsx_runtime.jsx)(ShoppingBag,{className:`w-20 h-20 opacity-20`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xl font-bold opacity-50`,children:` `})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute bottom-6 left-6 flex gap-2 flex-wrap`,children:item.tags?.map(tag=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{onSearchTag&&(onSearchTag(tag),onClose())},className:`px-3 py-1 bg-black/10 backdrop-blur-md rounded-full text-xs font-bold text-[var(--text-secondary)] hover:bg-black/20 hover:text-white transition-colors`,children:[`#`,tag]},tag))})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full md:w-1/2 flex flex-col flex-1 md:overflow-hidden md:h-full bg-[var(--bg-card)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`p-6 md:p-8 border-b border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-start mb-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`px-2 py-1 bg-[var(--bg-card-secondary)] rounded-md text-[10px] font-bold uppercase tracking-wider text-[var(--text-secondary)]`,children:item.type.toLowerCase()===`template_widget`?` `:item.type.toLowerCase()===`template_post`?` `:item.type.toLowerCase()===`sticker`?``:item.type.toLowerCase()===`package`||item.type.toLowerCase()===`start_pack`?``:item.type?.replace(`_`,` `)}),(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>{scrollToTabs(),setActiveTab(`reviews`)},className:`flex items-center gap-1 text-yellow-500 font-bold text-sm cursor-pointer hover:bg-[var(--bg-card-secondary)] rounded-lg px-2 -ml-2 transition-colors py-1`,children:[(0,import_jsx_runtime.jsx)(Star,{className:`w-4 h-4 fill-yellow-500`}),(0,import_jsx_runtime.jsx)(`span`,{children:reviews.length>0?(reviews.reduce((a$4,b$3)=>a$4+b$3.rating,0)/reviews.length).toFixed(1):item.averageRating?item.averageRating.toFixed(1):`0.0`}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[var(--text-secondary)] font-normal ml-1`,children:[`(`,reviews.length>0?reviews.length:item.reviewCount||0,` )`]})]})]}),(0,import_jsx_runtime.jsx)(`h2`,{className:`text-2xl md:text-3xl font-black text-[var(--text-primary)] mb-2 leading-tight`,children:item.title}),(0,import_jsx_runtime.jsxs)(`div`,{onClick:()=>{onFilterBySeller&&(onFilterBySeller(item.sellerId?String(item.sellerId):`0`),onClose())},className:`flex items-center gap-2 text-[var(--text-secondary)] text-sm font-medium cursor-pointer hover:text-[var(--text-primary)] hover:underline`,children:[(0,import_jsx_runtime.jsx)(User,{className:`w-4 h-4`}),(0,import_jsx_runtime.jsx)(`span`,{children:item.author||`System`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{ref:tabsRef,className:`flex border-b border-[var(--border-color)] md:sticky md:top-0 bg-[var(--bg-card)] z-10`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{scrollToTabs(),setActiveTab(`details`)},className:`flex-1 py-4 text-sm font-bold border-b-2 transition-colors ${activeTab===`details`?`border-[var(--btn-bg)] text-[var(--text-primary)]`:`border-transparent text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:` `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{scrollToTabs(),setActiveTab(`reviews`),reviews.length===0&&fetchReviews()},className:`flex-1 py-4 text-sm font-bold border-b-2 transition-colors ${activeTab===`reviews`?`border-[var(--btn-bg)] text-[var(--text-primary)]`:`border-transparent text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:``})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`md:flex-1 md:overflow-y-auto p-5 md:p-8`,children:activeTab===`details`?(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold text-[var(--text-primary)] mb-2`,children:` `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[var(--text-secondary)] leading-relaxed whitespace-pre-wrap`,children:item.description||` .`})]}),packContents.length>0&&(0,import_jsx_runtime.jsxs)(`div`,{className:`pt-4 border-t border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`font-bold text-[var(--text-primary)] mb-4 flex items-center justify-between`,children:[(0,import_jsx_runtime.jsxs)(`span`,{children:[`  (`,packContents.length,`)`]}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] text-[var(--text-disabled)] font-normal`,children:[` `,packContents.length,`  `,packContents.filter(s$3=>checkOwned(s$3.id)).length,` `]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 sm:grid-cols-3 gap-3`,children:packContents.map(sticker=>{let stickerOwned=checkOwned(sticker.id);return(0,import_jsx_runtime.jsxs)(`div`,{className:`p-3 rounded-xl border flex flex-col items-center gap-2 transition-all ${stickerOwned?`bg-[var(--bg-card-secondary)] border-green-500/20 opacity-80`:`bg-[var(--bg-card)] border-[var(--border-color)]`}`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`w-12 h-12 relative flex items-center justify-center`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:sticker.url,alt:sticker.name,className:`w-full h-full object-contain`}),stickerOwned&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute -top-1 -right-1 bg-green-500 text-white rounded-full p-0.5 shadow-sm`,children:(0,import_jsx_runtime.jsx)(Star,{className:`w-2.5 h-2.5 fill-current`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] font-bold text-[var(--text-primary)] truncate max-w-full`,children:sticker.name}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[9px] font-medium ${stickerOwned?`text-green-500`:`text-[var(--text-secondary)]`}`,children:stickerOwned?` `:``})]})]},sticker.id)})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 bg-[var(--bg-card-secondary)] rounded-xl border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`h4`,{className:`font-bold text-[var(--text-primary)] text-sm mb-2`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-2 gap-4 text-xs text-[var(--text-secondary)]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[`: `,new Date().toLocaleDateString()]}),(0,import_jsx_runtime.jsx)(`div`,{children:`: 1.0.0`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[`: `,packContents.length>0?`${(packContents.length*.4).toFixed(1)} MB`:`2.1 MB`]}),(0,import_jsx_runtime.jsx)(`div`,{children:`:  `})]})]})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-6`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center justify-between`,children:(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold text-[var(--text-primary)]`,children:` `})}),isOwned&&(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card-secondary)] p-4 rounded-xl mb-4`,children:[(0,import_jsx_runtime.jsx)(`h4`,{className:`text-sm font-bold mb-2`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex gap-2 mb-2`,children:[1,2,3,4,5].map(star=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setNewRating(star),children:(0,import_jsx_runtime.jsx)(Star,{className:`w-5 h-5 ${star<=newRating?`fill-yellow-500 text-yellow-500`:`text-[var(--text-disabled)]`}`})},star))}),(0,import_jsx_runtime.jsx)(`textarea`,{value:newReviewContent,onChange:e$4=>setNewReviewContent(e$4.target.value),placeholder:`  ...`,className:`w-full p-2 text-sm bg-[var(--bg-card)] rounded-lg border border-[var(--border-color)] mb-2`,rows:3}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handlePostReview,disabled:isSubmitting,className:`px-4 py-2 bg-[var(--btn-bg)] text-white text-xs font-bold rounded-lg hover:brightness-110 disabled:opacity-50`,children:isSubmitting?` ...`:` `})]}),reviews.length===0?(0,import_jsx_runtime.jsx)(`p`,{className:`text-center text-[var(--text-secondary)] py-8`,children:`   .`}):reviews.map(review=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-4 border-b border-[var(--border-color)] pb-4 last:border-0`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-8 h-8 rounded-full bg-gradient-to-br from-purple-400 to-blue-500 shrink-0 flex items-center justify-center text-white text-xs font-bold`,children:review.userNickname?.[0]?.toUpperCase()||`U`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 mb-1`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-sm text-[var(--text-primary)]`,children:review.userNickname}),String(review.userId)===String(userId)&&(0,import_jsx_runtime.jsx)(`span`,{className:`px-1.5 py-0.5 bg-[var(--btn-bg)] text-white text-[10px] font-bold rounded-md ml-2`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex text-yellow-500 gap-0.5 ml-auto md:ml-2`,children:[...[,,,,,]].map((_$1,j$2)=>(0,import_jsx_runtime.jsx)(Star,{className:`w-3 h-3 ${j$2<review.rating?`fill-current`:`text-[var(--text-disabled)] opacity-30`}`},j$2))}),String(review.userId)===String(userId)&&(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleDeleteReview(review.id),className:`p-1 text-[var(--text-secondary)] hover:text-red-500 transition-colors ml-1`,title:` `,children:(0,import_jsx_runtime.jsx)(Trash2,{size:14})})]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-[var(--text-secondary)] whitespace-pre-wrap`,children:review.content}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-[var(--text-disabled)] mt-2 block`,children:review.createdAt?new Date(review.createdAt).toLocaleString():new Date().toLocaleDateString()})]})]},review.id))]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 md:p-6 border-t border-[var(--border-color)] bg-[var(--bg-card)] flex flex-col sticky bottom-0 z-20 gap-3`,children:[packRecommendation&&!isOwned&&(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-3 flex items-center justify-between animate-in slide-in-from-bottom-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xl`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold text-yellow-600 dark:text-yellow-400`,children:` `}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-sm text-[var(--text-primary)]`,children:[`  `,(0,import_jsx_runtime.jsxs)(`span`,{className:`font-bold`,children:[`'`,packRecommendation.title,`'`]}),`  !`]})]})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{},className:`hidden px-3 py-1 bg-yellow-500 text-white text-xs font-bold rounded-lg hover:bg-yellow-600 transition-colors`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-4`,children:[!isOwned&&String(item.sellerId)!==String(userId)?(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col`,children:[Number(effectivePrice)<Number(item.price)&&(0,import_jsx_runtime.jsxs)(`span`,{className:`text-xs text-red-500 line-through decoration-red-500/50`,children:[Number(item.price).toLocaleString(),` C`]}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-2xl font-black ${Number(effectivePrice)<Number(item.price)&&Number(effectivePrice)>0||Number(effectivePrice)===0?`text-red-500`:`text-[var(--text-primary)]`}`,children:Number(effectivePrice)===0?``:`${Number(effectivePrice).toLocaleString()} C`})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col opacity-60`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs text-[var(--text-secondary)] font-medium`,children:``}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-2xl font-black text-[var(--text-secondary)]`,children:Number(item.price)===0?``:`${Number(item.price).toLocaleString()} C`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 flex gap-3`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onToggleWishlist(item),className:`p-4 rounded-xl border-2 transition-colors ${isWishlisted?`border-red-500/20 bg-red-500/10 text-red-500`:`border-[var(--border-color)] text-[var(--text-secondary)] hover:border-[var(--btn-bg)]`}`,children:(0,import_jsx_runtime.jsx)(Heart,{className:`w-6 h-6 ${isWishlisted?`fill-current`:``}`})}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>onBuy(item),disabled:isOwned||String(item.sellerId)===String(userId),className:`flex-1 py-4 rounded-xl font-bold flex items-center justify-center gap-2 text-lg shadow-lg transition-all transform active:scale-95
                                    ${isOwned?`bg-green-500/10 text-green-600 border border-green-500/20 cursor-default shadow-none`:String(item.sellerId)===String(userId)?`bg-[var(--bg-card-secondary)] text-[var(--text-secondary)] border border-[var(--border-color)] cursor-default`:`bg-[var(--btn-bg)] text-[var(--btn-text)] hover:brightness-110`}`,children:isOwned?``:String(item.sellerId)===String(userId)?` `:Number(effectivePrice)===0?` `:``})]})]})]})]}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmation.isOpen,title:confirmation.title,message:confirmation.message,type:confirmation.type,onConfirm:confirmation.onConfirm,onCancel:()=>setConfirmation(prev=>({...prev,isOpen:!1})),singleButton:confirmation.singleButton,confirmText:``})]})}):null},ItemDetailModal_default=ItemDetailModal,SellModal=({item,onClose,onSubmit})=>{let[price,setPrice]=(0,import_react.useState)(item.price?String(item.price):`1000`),[description,setDescription]=(0,import_react.useState)(item.description||``),[tags,setTags]=(0,import_react.useState)(item.tags||[]),[tagInput,setTagInput]=(0,import_react.useState)(``),previewUrl=item.imageUrl||item.thumbnailUrl||null,handleAddTag=()=>{tagInput.trim()&&!tags.includes(tagInput.trim())&&(setTags([...tags,tagInput.trim()]),setTagInput(``))},handleKeyDown=e$4=>{e$4.key===`Enter`&&(e$4.preventDefault(),handleAddTag())},removeTag=tagToRemove=>{setTags(tags.filter(tag=>tag!==tagToRemove))},handleSubmit=()=>{let numPrice=parseInt(price,10);if(isNaN(numPrice)||numPrice<0){alert(`  .`);return}onSubmit({price:numPrice,description,tags,imageFile:null})};return(0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] w-full max-w-md rounded-3xl overflow-hidden shadow-2xl border border-[var(--border-color)] animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`p-6 border-b border-[var(--border-color)] flex justify-between items-center bg-[var(--bg-card-secondary)] shrink-0`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-xl font-black text-[var(--text-primary)]`,children:` `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-[var(--text-secondary)] mt-1`,children:item.title})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-2 hover:bg-black/10 rounded-full transition-colors`,children:(0,import_jsx_runtime.jsx)(X,{size:20,className:`text-[var(--text-secondary)]`})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-6 space-y-6 overflow-y-auto custom-scrollbar`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`block text-xs font-bold text-[var(--text-secondary)] mb-2 uppercase flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Image$1,{size:12}),`  `]}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-full aspect-video bg-[var(--bg-card-secondary)] rounded-xl border border-[var(--border-color)] flex flex-col items-center justify-center overflow-hidden relative`,children:previewUrl?(0,import_jsx_runtime.jsx)(`img`,{src:previewUrl,alt:`Thumbnail`,className:`w-full h-full object-cover`}):item.widgetType===`custom-block`||item.type===`custom-block`||item.type===`template_widget`&&item.content?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full flex items-center justify-center p-4`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full transform scale-90 origin-center pointer-events-none select-none`,children:(0,import_jsx_runtime.jsx)(CustomWidgetPreview_default,{content:{...item.content,decorations:item.decorations||[]},defaultSize:item.defaultSize||`2x2`})})}):item.widgetType?item.widgetType.startsWith(`custom-`)?(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col items-center justify-center text-[var(--btn-bg)]`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-4xl`,children:``}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold mt-2`,children:`Custom Widget`})]}):(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/thumbnails/${item.widgetType}.png`,alt:item.label,className:`w-full h-full object-contain p-4`,onError:e$4=>{e$4.currentTarget.style.display=`none`,e$4.currentTarget.parentElement?.classList.add(`flex`,`flex-col`,`items-center`,`justify-center`)}}):(0,import_jsx_runtime.jsxs)(`div`,{className:`text-center`,children:[(0,import_jsx_runtime.jsx)(Image$1,{className:`w-8 h-8 text-[var(--text-secondary)] mx-auto mb-2`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold text-[var(--text-secondary)]`,children:`  `})]})}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[10px] text-[var(--text-secondary)] mt-2`,children:`*   `})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`block text-xs font-bold text-[var(--text-secondary)] mb-2 uppercase flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(DollarSign,{size:12}),`   (Credit)`]}),(0,import_jsx_runtime.jsx)(`input`,{type:`number`,value:price,onChange:e$4=>setPrice(e$4.target.value),className:`w-full p-3 bg-[var(--bg-card-secondary)] rounded-xl font-bold text-lg text-[var(--text-primary)] border border-transparent focus:border-[var(--btn-bg)] outline-none transition-all`,placeholder:`0`})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`block text-xs font-bold text-[var(--text-secondary)] mb-2 uppercase flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(FileText,{size:12}),`  `]}),(0,import_jsx_runtime.jsx)(`textarea`,{value:description,onChange:e$4=>setDescription(e$4.target.value),className:`w-full p-3 bg-[var(--bg-card-secondary)] rounded-xl text-sm text-[var(--text-primary)] border border-transparent focus:border-[var(--btn-bg)] outline-none transition-all resize-none h-24`,placeholder:`   ...`})]}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`block text-xs font-bold text-[var(--text-secondary)] mb-2 uppercase flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Tag,{size:12}),`  (Enter )`]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 mb-2`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:tagInput,onChange:e$4=>setTagInput(e$4.target.value),onKeyDown:handleKeyDown,className:`flex-1 p-2 bg-[var(--bg-card-secondary)] rounded-lg text-sm text-[var(--text-primary)] border border-transparent focus:border-[var(--btn-bg)] outline-none transition-all`,placeholder:`: , , ...`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleAddTag,className:`px-4 py-2 bg-[var(--bg-card-secondary)] text-[var(--text-secondary)] font-bold text-xs rounded-lg hover:bg-[var(--btn-bg)] hover:text-white transition-colors`,children:``})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:tags.map(tag=>(0,import_jsx_runtime.jsxs)(`span`,{className:`px-2 py-1 bg-[var(--btn-bg)]/10 text-[var(--btn-bg)] rounded-md text-xs font-bold flex items-center gap-1`,children:[`#`,tag,(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>removeTag(tag),className:`hover:text-red-500`,children:(0,import_jsx_runtime.jsx)(X,{size:10})})]},tag))})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-6 border-t border-[var(--border-color)] bg-[var(--bg-card-secondary)] shrink-0 flex gap-3`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`flex-1 py-3 bg-[var(--bg-card-secondary)] text-[var(--text-secondary)] font-bold rounded-xl hover:bg-black/5 active:scale-95 transition-all border border-[var(--border-color)]`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleSubmit,className:`flex-1 py-3 bg-[var(--btn-bg)] text-white font-bold rounded-xl hover:brightness-110 active:scale-95 transition-all shadow-lg`,children:``})]})]})})},SellModal_default=SellModal,ScrollToTopButton=()=>{let[isVisible,setIsVisible]=(0,import_react.useState)(!1);return(0,import_react.useEffect)(()=>{let toggleVisibility=()=>{window.scrollY>300?setIsVisible(!0):setIsVisible(!1)};return window.addEventListener(`scroll`,toggleVisibility),()=>window.removeEventListener(`scroll`,toggleVisibility)},[]),isVisible?(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{window.scrollTo({top:0,behavior:`smooth`})},className:`fixed bottom-24 right-6 p-3 rounded-full bg-[var(--btn-bg)] text-white shadow-lg hover:bg-[var(--btn-bg-hover)] transition-all transform hover:scale-110 z-50 animate-fade-in`,"aria-label":`Scroll to top`,children:(0,import_jsx_runtime.jsx)(ArrowUp,{size:24})}):null},ScrollToTopButton_default=ScrollToTopButton,MarketHeader=({onMyShopClick,isMyShopActive,onHistoryClick,isHistoryActive})=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-start md:items-end gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h1`,{className:`text-4xl font-black text-[var(--text-primary)] mb-2 tracking-tight`,children:`Market`}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[var(--text-secondary)]`,children:`   .`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[onMyShopClick&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:onMyShopClick,className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all font-bold ${isMyShopActive?`bg-[var(--btn-bg)] text-white shadow-md`:`bg-[var(--bg-card)] text-[var(--text-secondary)] border border-[var(--border-color)] hover:bg-[var(--bg-card-secondary)]`}`,children:[(0,import_jsx_runtime.jsx)(FolderOpen,{size:18}),` `]}),onHistoryClick&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:onHistoryClick,className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all font-bold ${isHistoryActive?`bg-[var(--btn-bg)] text-white shadow-md`:`bg-[var(--bg-card)] text-[var(--text-secondary)] border border-[var(--border-color)] hover:bg-[var(--bg-card-secondary)]`}`,children:[(0,import_jsx_runtime.jsx)(History,{size:18}),` `]})]})]}),MarketHeader_default=MarketHeader,TABS=[{id:`all`,label:``},{id:`wishlist`,label:` `,icon:Heart},{id:`package`,label:` `},{id:`sticker`,label:``},{id:`template_widget`,label:` `},{id:`template_post`,label:` `}],MarketTabs=({activeTab,setActiveTab,searchTerm,setSearchTerm})=>{let scrollRef=import_react.useRef(null),[isDragging$2,setIsDragging]=import_react.useState(!1),[startX,setStartX]=import_react.useState(0),[scrollLeft,setScrollLeft]=import_react.useState(0),[dragMoved,setDragMoved]=import_react.useState(!1);return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row gap-4 sticky top-16 md:top-20 z-40 py-4 -mx-4 px-4 transition-all mt-4 theme-bg-header backdrop-blur-xl md:items-center overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`div`,{ref:scrollRef,onMouseDown:e$4=>{scrollRef.current&&(setIsDragging(!0),setDragMoved(!1),setStartX(e$4.pageX-scrollRef.current.offsetLeft),setScrollLeft(scrollRef.current.scrollLeft))},onMouseLeave:()=>{setIsDragging(!1)},onMouseUp:()=>{setIsDragging(!1)},onMouseMove:e$4=>{if(!isDragging$2||!scrollRef.current)return;e$4.preventDefault();let walk=(e$4.pageX-scrollRef.current.offsetLeft-startX)*1.5;Math.abs(walk)>5&&setDragMoved(!0),scrollRef.current.scrollLeft=scrollLeft-walk},className:`flex overflow-x-auto py-2 gap-3 flex-1 scrollbar-hide px-1 select-none active:cursor-grabbing ${isDragging$2?`cursor-grabbing`:`cursor-grab`}`,children:TABS.map(tab$1=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{dragMoved||(activeTab===tab$1.id?window.scrollTo({top:0,behavior:`smooth`}):setActiveTab(tab$1.id))},className:`px-4 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all flex items-center gap-2
                                    ${activeTab===tab$1.id?`bg-[var(--btn-bg)] text-white shadow-md transform scale-105 ml-1`:`bg-[var(--bg-card)] text-[var(--text-secondary)] border border-[var(--border-color)] hover:bg-[var(--bg-card-secondary)]`}`,children:[tab$1.icon&&(0,import_jsx_runtime.jsx)(tab$1.icon,{size:16}),tab$1.label]},tab$1.id))}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative w-full md:w-64 shrink-0`,children:[(0,import_jsx_runtime.jsx)(Search,{className:`absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-secondary)] w-4 h-4`}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,placeholder:` ...`,value:searchTerm,onChange:e$4=>setSearchTerm(e$4.target.value),className:`w-full theme-bg-card-secondary border border-[var(--border-color)] rounded-xl py-2.5 pl-10 pr-4 text-sm text-[var(--text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] transition-all`})]})]})},MarketTabs_default=MarketTabs,SORT_OPTIONS=[{id:`popular`,label:``},{id:`latest`,label:``},{id:`price_low`,label:``},{id:`price_high`,label:``}],MarketFilterBar=({totalCount,sellerId,sellerName,filterBySeller,selectedTags,filterByTag,keyword,onClearSearch,onClearAll,hideOwned,setHideOwned,sort,changeSort,isFree,setIsFree})=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-4 px-2`,children:[(sellerId||selectedTags.length>0||keyword&&keyword.trim()!==``)&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap items-center gap-3 py-1 border-b border-[var(--border-color)] pb-4 animate-in fade-in slide-in-from-top-2 duration-300`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] font-black text-[var(--text-secondary)] flex items-center gap-1.5 uppercase tracking-widest opacity-60`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[keyword&&keyword.trim()!==``&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 px-3 py-1.5 bg-[var(--bg-card-secondary)] text-[var(--text-primary)] border border-[var(--border-color)] rounded-full text-sm font-bold shadow-sm`,children:[(0,import_jsx_runtime.jsx)(Search,{size:14,className:`text-[var(--text-secondary)]`}),(0,import_jsx_runtime.jsxs)(`span`,{children:[`: "`,keyword,`"`]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClearSearch,className:`hover:bg-[var(--border-color)] rounded-full p-0.5 transition-colors`,title:` `,children:(0,import_jsx_runtime.jsx)(X,{size:14})})]}),sellerId&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 px-3 py-1.5 bg-[var(--btn-bg)] text-white rounded-full text-sm font-bold shadow-sm transition-all hover:brightness-110`,children:[(0,import_jsx_runtime.jsx)(User,{size:14}),(0,import_jsx_runtime.jsxs)(`span`,{children:[`: `,sellerName||sellerId]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>filterBySeller(null),className:`hover:bg-white/20 rounded-full p-0.5 transition-colors`,title:`  `,children:(0,import_jsx_runtime.jsx)(X,{size:14})})]}),selectedTags.map(tag=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 px-3 py-1.5 bg-[var(--bg-card-secondary)] text-[var(--text-primary)] border border-[var(--border-color)] rounded-full text-sm font-bold shadow-sm animate-in zoom-in duration-200`,children:[(0,import_jsx_runtime.jsx)(Tag,{size:14,className:`text-[var(--btn-bg)]`}),(0,import_jsx_runtime.jsxs)(`span`,{children:[`#`,tag]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>filterByTag(tag),className:`hover:bg-[var(--border-color)] rounded-full p-0.5 transition-colors`,title:` `,children:(0,import_jsx_runtime.jsx)(X,{size:14})})]},tag))]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClearAll,className:`text-xs font-bold text-[var(--text-secondary)] hover:text-[var(--btn-bg)] underline-offset-4 hover:underline transition-all ml-auto`,children:`  `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-start md:items-center gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-baseline gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xl font-black text-[var(--text-primary)]`,children:totalCount.toLocaleString()}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-bold text-[var(--text-secondary)] tracking-tight`,children:`  `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-start sm:items-center gap-6 w-full md:w-auto`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-5 shrink-0`,children:[setIsFree&&(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-2.5 cursor-pointer select-none group`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-5 h-5 rounded-md border-2 flex items-center justify-center transition-all duration-200 ${isFree?`bg-[var(--btn-bg)] border-[var(--btn-bg)] shadow-sm`:`border-[var(--border-color)] group-hover:border-[var(--text-secondary)]`}`,children:isFree&&(0,import_jsx_runtime.jsx)(Check,{size:14,className:`text-white stroke-[3px]`})}),(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,checked:isFree,onChange:e$4=>setIsFree(e$4.target.checked),className:`hidden`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-bold transition-colors ${isFree?`text-[var(--text-primary)]`:`text-[var(--text-secondary)]`}`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-2.5 cursor-pointer select-none group`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-5 h-5 rounded-md border-2 flex items-center justify-center transition-all duration-200 ${hideOwned?`bg-[var(--btn-bg)] border-[var(--btn-bg)] shadow-sm`:`border-[var(--border-color)] group-hover:border-[var(--text-secondary)]`}`,children:hideOwned&&(0,import_jsx_runtime.jsx)(Check,{size:14,className:`text-white stroke-[3px]`})}),(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,checked:hideOwned,onChange:e$4=>setHideOwned(e$4.target.checked),className:`hidden`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-bold transition-colors ${hideOwned?`text-[var(--text-primary)]`:`text-[var(--text-secondary)]`}`,children:`  `})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`hidden sm:block h-6 w-px bg-[var(--border-color)] opacity-50`}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center p-1 bg-[var(--bg-card-secondary)] border border-[var(--border-color)] rounded-xl w-full sm:w-auto overflow-x-auto scrollbar-hide`,children:SORT_OPTIONS.map(opt=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>changeSort(opt.id),className:`px-4 py-1.5 rounded-lg text-xs font-black transition-all whitespace-nowrap ${sort===opt.id?`bg-[var(--btn-bg)] text-white shadow-sm`:`text-[var(--text-secondary)] hover:text-[var(--text-primary)]`}`,children:opt.label},opt.id))})]})]})]}),MarketFilterBar_default=MarketFilterBar,MerchCard=({item,onBuy,onToggleWishlist,isOwned,isWishlisted,effectivePrice,onClick,onClickRating,isMyItem})=>{let{credits}=useCredits(),currentPrice=effectivePrice===void 0?item.price:effectivePrice,canAfford=credits>=currentPrice,isDiscounted=effectivePrice!==void 0&&effectivePrice<item.price,parseDate=date=>date?Array.isArray(date)?new Date(date[0],date[1]-1,date[2],date[3]||0,date[4]||0,date[5]||0):new Date(date):null;return(0,import_jsx_runtime.jsxs)(`div`,{onClick,className:`group relative bg-[var(--bg-card)] rounded-2xl border border-[var(--border-color)] overflow-hidden hover:border-[var(--btn-bg)] hover:shadow-lg transition-all duration-300 flex flex-col h-full ${onClick?`cursor-pointer`:``}`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`aspect-square bg-[var(--bg-card-secondary)] relative overflow-hidden flex items-center justify-center p-6`,children:[item.imageUrl?(0,import_jsx_runtime.jsx)(`img`,{src:item.imageUrl,alt:item.title,draggable:!1,className:`w-full h-full object-contain group-hover:scale-110 transition-transform duration-500 drop-shadow-sm select-none`}):item.widgetType===`custom-block`||item.type===`custom-block`||typeof item.widgetType==`string`&&item.widgetType.startsWith(`custom-`)||item.type===`template_widget`&&item.content?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full flex items-center justify-center p-2`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full transform scale-90 origin-center pointer-events-none select-none`,children:(0,import_jsx_runtime.jsx)(CustomWidgetPreview_default,{content:{...item.content,decorations:item.decorations||[]},defaultSize:item.defaultSize||`2x2`})})}):(0,import_jsx_runtime.jsx)(`div`,{className:`text-[var(--text-secondary)] font-medium text-xs`,children:` `}),onToggleWishlist&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-3 right-3 transition-opacity z-10 ${isWishlisted?`opacity-100`:`opacity-0 group-hover:opacity-100`}`,children:(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onToggleWishlist(item)},className:`p-2 rounded-full backdrop-blur-md transition-colors ${isWishlisted?`bg-red-50 text-red-500`:`bg-white/10 text-white hover:bg-black/40`}`,children:(0,import_jsx_runtime.jsx)(Heart,{className:`w-5 h-5`,fill:isWishlisted?`currentColor`:`none`})})}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-3 left-3`,children:(0,import_jsx_runtime.jsx)(`span`,{className:`px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider theme-bg-card-secondary text-[var(--text-secondary)] backdrop-blur-sm`,children:item.type.toLowerCase()===`template_widget`?` `:item.type.toLowerCase()===`template_post`?` `:item.type.toLowerCase()===`sticker`?``:item.type.toLowerCase()===`package`||item.type.toLowerCase()===`start_pack`?``:item.type.replace(`_`,` `)})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 flex flex-col flex-1`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold text-[var(--text-primary)] mb-1 truncate`,children:item.title}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-[var(--text-secondary)] line-clamp-2 mb-4 flex-1`,children:item.description}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between mt-auto`,children:[(()=>{let createdDate=parseDate(item.createdAt),isNew=createdDate?new Date().getTime()-createdDate.getTime()<10080*60*1e3:!1;return(item.averageRating||0)>0||(item.reviewCount||0)>0?(0,import_jsx_runtime.jsxs)(`div`,{onClick:e$4=>{e$4.stopPropagation(),onClickRating?.()},className:`flex items-center gap-1 text-[var(--text-secondary)] text-xs font-medium cursor-pointer hover:bg-[var(--bg-card-secondary)] rounded px-1 transition-colors`,children:[(0,import_jsx_runtime.jsx)(Star,{className:`w-3 h-3 fill-yellow-500 text-yellow-500`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[var(--text-primary)] font-bold`,children:item.averageRating?.toFixed(1)||`0.0`}),(0,import_jsx_runtime.jsxs)(`span`,{className:`opacity-50`,children:[`(`,item.reviewCount||0,`)`]})]}):isNew?(0,import_jsx_runtime.jsx)(`div`,{className:`text-[10px] text-[var(--text-disabled)] font-medium bg-[var(--bg-card-secondary)] px-1.5 py-0.5 rounded-md`,children:`New`}):(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1 text-[var(--text-secondary)] text-xs font-medium opacity-50`,children:[(0,import_jsx_runtime.jsx)(Star,{className:`w-3 h-3 text-[var(--text-disabled)]`}),(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold`,children:`0.0`}),(0,import_jsx_runtime.jsx)(`span`,{children:`(0)`})]})})(),(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-col items-end gap-0.5 ml-auto`,children:!isOwned&&!isMyItem?(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[isDiscounted&&(0,import_jsx_runtime.jsxs)(`span`,{className:`text-[10px] text-red-400 line-through decoration-red-400/50`,children:[item.price.toLocaleString(),` C`]}),Number(currentPrice)===0?(0,import_jsx_runtime.jsx)(`div`,{className:`font-bold text-[var(--text-primary)]`,children:``}):(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1.5 font-bold ${isDiscounted?`text-red-500`:`text-[var(--text-primary)]`}`,children:[(0,import_jsx_runtime.jsx)(Coins,{className:`w-4 h-4 ${isDiscounted?`text-red-500`:`text-yellow-500`}`}),Number(currentPrice).toLocaleString()]})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-1.5 font-bold text-[var(--text-secondary)] opacity-70`,children:[(0,import_jsx_runtime.jsx)(Coins,{className:`w-4 h-4 text-[var(--text-secondary)]`}),Number(item.price)===0?``:Number(item.price).toLocaleString()]})})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),onBuy(item)},disabled:isOwned||isMyItem,className:`mt-4 w-full py-2.5 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all 
                        ${isOwned?`bg-green-500/10 text-green-600 border border-green-500/20 cursor-default`:isMyItem?`bg-[var(--bg-card-secondary)] text-[var(--text-disabled)] border border-[var(--border-color)] cursor-default`:Number(currentPrice)===0?`bg-[var(--btn-bg)] text-white hover:brightness-110 active:scale-95 shadow-md hover:shadow-lg`:canAfford?`bg-[var(--btn-bg)] text-[var(--btn-text)] hover:brightness-110 active:scale-95 shadow-md hover:shadow-lg`:`bg-red-500/10 text-red-500 border border-red-500/20 hover:bg-red-500/20 active:scale-95`}`,children:isOwned?``:isMyItem?(0,import_jsx_runtime.jsx)(`span`,{className:`text-[var(--text-secondary)]`,children:` `}):(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(ShoppingBag,{className:`w-4 h-4`}),Number(currentPrice)===0?` `:canAfford?``:` `]})})]})]})},MerchCard_default=MerchCard,MarketHistoryView=({purchasedItems,setSelectedItem,onToggleWishlist,isWishlisted})=>(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6 animate-in fade-in slide-in-from-bottom-4`,children:purchasedItems.length===0?(0,import_jsx_runtime.jsxs)(`div`,{className:`col-span-full py-20 text-center text-[var(--text-secondary)] flex flex-col items-center`,children:[(0,import_jsx_runtime.jsx)(ShoppingBag,{className:`w-12 h-12 mb-4 opacity-20`}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-lg font-bold`,children:`  .`})]}):purchasedItems.map(item=>(0,import_jsx_runtime.jsx)(MerchCard_default,{item,onBuy:()=>{},isOwned:!0,effectivePrice:item.price,onClick:()=>setSelectedItem(item),onClickRating:()=>setSelectedItem({...item,initialTab:`reviews`}),onToggleWishlist:()=>onToggleWishlist(item),isWishlisted:isWishlisted(item.id)},`history-${item.id}`))}),MarketHistoryView_default=MarketHistoryView,MarketMyShopView=({sellingItems,mySellableCandidates,handleSell,cancelItem})=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-12 animate-in fade-in slide-in-from-bottom-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-3 gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] p-4 rounded-2xl border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xs text-[var(--text-secondary)] font-bold uppercase`,children:` `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-2xl font-black text-[var(--text-primary)] mt-1`,children:[sellingItems.reduce((acc,cur)=>acc+(cur.price||0)*(cur.salesCount||0),0).toLocaleString(),` C`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] p-4 rounded-2xl border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xs text-[var(--text-secondary)] font-bold uppercase`,children:` `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-2xl font-black text-blue-500 mt-1`,children:sellingItems.reduce((acc,cur)=>acc+(cur.salesCount||0),0)})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] p-4 rounded-2xl border border-[var(--border-color)]`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xs text-[var(--text-secondary)] font-bold uppercase`,children:` `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-2xl font-black text-green-500 mt-1`,children:sellingItems.filter(i$4=>i$4.status===`ON_SALE`).length})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-4`,children:[(0,import_jsx_runtime.jsxs)(`h2`,{className:`text-xl font-bold px-1 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`w-2 h-2 rounded-full bg-green-500`}),` `]}),sellingItems.length===0?(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm text-[var(--text-secondary)] px-1`,children:`  .`}):(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6`,children:[...sellingItems].filter(item=>item.status!==`CANCELLED`).sort((a$4,b$3)=>{let dateA=new Date(a$4.createdAt||0).getTime();return new Date(b$3.createdAt||0).getTime()-dateA}).map((item,idx)=>{let isCanceled=(item.status||`ON_SALE`)===`CANCELLED`,badgeColor=isCanceled?`bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 border-gray-200 dark:border-gray-700`:`bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border-green-200 dark:border-green-900`,statusText=isCanceled?` `:` `,sourceCandidate=mySellableCandidates.find(c$3=>String(c$3.id)===String(item.referenceId)),displayItem=sourceCandidate?{...item,content:item.content||sourceCandidate.content,decorations:item.decorations||sourceCandidate.decorations,widgetType:item.widgetType||sourceCandidate.widgetType||sourceCandidate.type}:item;return(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] rounded-2xl border border-[var(--border-color)] p-4 flex flex-col gap-3 relative transition-colors ${isCanceled?``:`hover:border-green-500/50`} ${isCanceled?`opacity-60`:``}`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-3 right-3 px-2 py-1 text-[10px] font-bold rounded-full border ${badgeColor}`,children:statusText}),(0,import_jsx_runtime.jsx)(`div`,{className:`aspect-video bg-[var(--bg-card-secondary)] rounded-xl flex items-center justify-center text-[var(--text-secondary)] font-bold text-xs uppercase tracking-wider overflow-hidden`,children:displayItem.imageUrl||displayItem.thumbnailUrl?(0,import_jsx_runtime.jsx)(`img`,{src:displayItem.imageUrl||displayItem.thumbnailUrl,alt:displayItem.title,className:`w-full h-full object-cover`}):displayItem.widgetType===`custom-block`||displayItem.type===`custom-block`||typeof displayItem.widgetType==`string`&&displayItem.widgetType.startsWith(`custom-`)||displayItem.type===`template_widget`&&displayItem.content?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full flex items-center justify-center p-2`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full transform scale-90 origin-center pointer-events-none select-none`,children:(0,import_jsx_runtime.jsx)(CustomWidgetPreview_default,{content:{...displayItem.content,decorations:displayItem.decorations||[]},defaultSize:displayItem.defaultSize||`2x2`})})}):displayItem.type.toLowerCase()===`template_widget`?` `:displayItem.type.toLowerCase()===`template_post`?` `:displayItem.type.toLowerCase()===`sticker`?``:displayItem.type.toLowerCase()===`package`||displayItem.type.toLowerCase()===`start_pack`?``:displayItem.type}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold text-[var(--text-primary)]`,children:displayItem.title}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-xs text-[var(--text-secondary)] font-mono mt-1`,children:[displayItem.price,` C`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 w-full mt-auto`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{confirm(`'${displayItem.title}'  ?`)&&cancelItem(displayItem.id)},disabled:isCanceled,className:`flex-1 py-2 rounded-lg border text-xs font-bold transition-colors
                                                ${isCanceled?`border-transparent text-[var(--text-disabled)] cursor-not-allowed bg-[var(--bg-card-secondary)]`:`border-red-200 dark:border-red-900/50 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20`}`,children:isCanceled?` `:` `}),!isCanceled&&(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleSell(displayItem,!0),className:`flex-1 py-2 rounded-lg border border-[var(--border-color)] text-[var(--text-primary)] hover:bg-[var(--bg-card-secondary)] text-xs font-bold transition-colors`,children:``})]})]},`${displayItem.id}-${idx}`)})})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`px-1`,children:[(0,import_jsx_runtime.jsxs)(`h2`,{className:`text-xl font-bold flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Plus,{className:`w-5 h-5 text-[var(--btn-bg)]`}),`  `]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm text-[var(--text-secondary)] mt-1`,children:`     .`})]}),mySellableCandidates.length===0?(0,import_jsx_runtime.jsx)(`div`,{className:`py-20 text-center text-[var(--text-secondary)] bg-[var(--bg-card-secondary)] rounded-2xl border border-dashed border-[var(--border-color)]`,children:(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm`,children:`    .`})}):(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6`,children:mySellableCandidates.map((item,idx)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--bg-card)] rounded-2xl border border-[var(--border-color)] p-4 flex flex-col gap-3 group hover:border-[var(--btn-bg)] transition-colors relative`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`aspect-video bg-[var(--bg-card-secondary)] rounded-xl flex items-center justify-center text-[var(--text-secondary)] font-bold text-xs uppercase tracking-wider overflow-hidden`,children:item.imageUrl||item.thumbnailUrl?(0,import_jsx_runtime.jsx)(`img`,{src:item.imageUrl||item.thumbnailUrl,alt:item.title,className:`w-full h-full object-cover`}):item.widgetType===`custom-block`||item.type===`custom-block`||typeof item.widgetType==`string`&&item.widgetType?.startsWith(`custom-`)||item.type===`template_widget`&&item.content?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full flex items-center justify-center p-2`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full transform scale-90 origin-center pointer-events-none select-none`,children:(0,import_jsx_runtime.jsx)(CustomWidgetPreview_default,{content:{...item.content,decorations:item.decorations||[]},defaultSize:item.defaultSize||`2x2`})})}):item.type===`template_widget`?` `:item.type===`sticker`?``:item.type===`template_post`?` `:item.type===`package`||item.type===`start_pack`?``:` `}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold text-[var(--text-primary)]`,children:item.title}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-[var(--text-secondary)] line-clamp-2 mt-1`,children:item.description})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleSell(item),disabled:item.isAlreadySelling,className:`mt-auto w-full py-2 rounded-lg text-xs font-bold transition-colors
                                        ${item.isAlreadySelling?`bg-[var(--bg-card-secondary)] text-[var(--text-disabled)] cursor-not-allowed border border-[var(--border-color)]`:`bg-[var(--bg-card-secondary)] text-[var(--text-primary)] hover:bg-[var(--btn-bg)] hover:text-white`}`,children:item.isAlreadySelling?` `:` `})]},`${item.source}-${item.id}-${idx}`))})]})]}),MarketMyShopView_default=MarketMyShopView,MarketProductGrid=({filteredItems,setSelectedItem,hasMore,loadMore,onBuy,getPackPrice,isOwned,toggleWishlist,isWishlisted,marketItems,purchasedItems})=>{let{userId}=useCredits();return(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6 animate-in fade-in slide-in-from-bottom-4`,children:filteredItems.length===0?(0,import_jsx_runtime.jsxs)(`div`,{className:`col-span-full py-20 text-center text-[var(--text-secondary)] flex flex-col items-center`,children:[(0,import_jsx_runtime.jsx)(Search,{className:`w-12 h-12 mb-4 opacity-20`}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-lg font-bold`,children:` .`})]}):(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[filteredItems.map(item=>{let effectivePrice=item.referenceId?getPackPrice(item.referenceId,item.price):item.price,displayItem=item,stickerDef=STICKERS.find(s$3=>s$3.id===item.referenceId);if(stickerDef&&stickerDef.packId){let packItem=marketItems.find(m$3=>m$3.referenceId===stickerDef.packId);packItem||=purchasedItems.find(p$3=>p$3.referenceId===stickerDef.packId),packItem&&(packItem.reviewCount||0)>0&&(displayItem={...item,averageRating:packItem.averageRating,reviewCount:packItem.reviewCount})}return(0,import_jsx_runtime.jsx)(MerchCard_default,{item:displayItem,onBuy:()=>onBuy(item),onToggleWishlist:()=>toggleWishlist(item),isOwned:isOwned(item.id),isWishlisted:isWishlisted(item.id),isMyItem:item.sellerId===String(userId),effectivePrice,onClick:()=>setSelectedItem(item),onClickRating:()=>setSelectedItem({...item,initialTab:`reviews`})},item.id)}),hasMore&&filteredItems.length>0&&(0,import_jsx_runtime.jsx)(`div`,{className:`col-span-full flex justify-center py-8`,children:(0,import_jsx_runtime.jsxs)(`button`,{onClick:loadMore,className:`px-8 py-3 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-full text-sm font-bold text-[var(--text-secondary)] hover:bg-[var(--bg-card-secondary)] hover:text-[var(--text-primary)] transition-all shadow-sm flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Plus,{size:16}),` `]})})]})})},MarketProductGrid_default=MarketProductGrid,Market=()=>{let{credits}=useCredits(),navigate=useNavigate(),isMobile$1=useIsMobile(),{marketItems,purchasedItems,buyItem,getPackPrice,sellingItems,isWishlisted,toggleWishlist,registerItem,cancelItem,isOwned,loadMore,search,hasMore,sort,filterBySeller,sellerId,filterByTag,selectedTags,updateItem,totalCount,changeSort,wishlistItems,filterByCategory,filterByFree,updateItemInState,wishlistDetails}=useMarket(),[activeTab,setActiveTab]=(0,import_react.useState)(`all`),[searchTerm,setSearchTerm]=(0,import_react.useState)(``),[hideOwned,setHideOwned]=(0,import_react.useState)(!1),[isFreeFilter,setIsFreeFilter]=(0,import_react.useState)(!1),shouldSkipSearch=import_react.useRef(!1);(0,import_react.useEffect)(()=>{window.scrollTo({top:0,behavior:`smooth`});let isFree=isFreeFilter,category=`all`;[`sticker`,`template_widget`,`template_post`,`package`].includes(activeTab)&&(category=activeTab),activeTab===`myshop`||activeTab===`history`||activeTab===`wishlist`||(filterByCategory(category),filterByFree(isFree))},[activeTab,filterByCategory,filterByFree,isFreeFilter]),(0,import_react.useEffect)(()=>{if(shouldSkipSearch.current){shouldSkipSearch.current=!1;return}let timer$1=setTimeout(()=>{search(searchTerm)},500);return()=>clearTimeout(timer$1)},[searchTerm,search]);let[mySellableCandidates,setMySellableCandidates]=(0,import_react.useState)([]),[selectedItem,setSelectedItem]=(0,import_react.useState)(null),loadMySellableItems=import_react.useCallback(async()=>{let apiWidgets=[],apiTemplates=[];try{let[widgets,templates]=await Promise.all([getMyWidgets(),fetchMyPostTemplatesApi()]);apiWidgets=widgets,apiTemplates=templates}catch(e$4){console.error(`Failed to load sellable items`,e$4)}let formattedWidgets=apiWidgets.map(w$1=>({...w$1,id:w$1.id||w$1._id,title:w$1.name,type:`template_widget`,widgetType:w$1.type,description:`    .`,price:0,source:`api`})),formattedTemplates=apiTemplates.filter(t$4=>!t$4.tags?.includes(`acquired`)&&!t$4.sourceMarketItemId).map(t$4=>({...t$4,id:t$4.id,title:t$4.name,type:`template_post`,description:`    .`,price:0,source:`api`,originalId:t$4.id,thumbnailUrl:t$4.thumbnailUrl}));setMySellableCandidates([...formattedWidgets,...formattedTemplates].filter(candidate=>!isOwned(candidate.id)).map(candidate=>{let isAlreadySelling=sellingItems.some(s$3=>s$3.referenceId===candidate.id?.toString()&&s$3.status===`ON_SALE`);return{...candidate,isAlreadySelling}}))},[sellingItems,isOwned]);(0,import_react.useEffect)(()=>{activeTab===`myshop`&&loadMySellableItems()},[activeTab,loadMySellableItems]);let[sellModalItem,setSellModalItem]=(0,import_react.useState)(null),[isEditMode,setIsEditMode]=(0,import_react.useState)(!1),[confirmation,setConfirmation]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}}),handleBuy=item=>{if(isOwned(item.id))return;let effectivePrice=getPackPrice(item.referenceId||item.id,item.price);if(credits<effectivePrice){setConfirmation({isOpen:!0,title:`  `,message:`  .\n(: ${credits.toLocaleString()} C / : ${effectivePrice.toLocaleString()} C)\n\n  ?`,type:`danger`,singleButton:!1,onConfirm:()=>{setConfirmation(prev=>({...prev,isOpen:!1})),navigate(`/charge`)}});return}setConfirmation({isOpen:!0,title:` `,message:`'${item.title}'() ${effectivePrice.toLocaleString()}  \n?`,type:`info`,singleButton:!1,onConfirm:async()=>{if(setConfirmation(prev=>({...prev,isOpen:!1})),setConfirmation(prev=>({...prev,isOpen:!1})),await buyItem(item.id,effectivePrice,item)){let ownedValue=STICKERS.filter(s$3=>s$3.packId===(item.referenceId||item.id)).filter(s$3=>isOwned(s$3.id)).reduce((sum,s$3)=>sum+(s$3.price||0),0),packOriginalPrice=item.price||effectivePrice+ownedValue,discountApplied=Math.min(ownedValue,packOriginalPrice);setConfirmation({isOpen:!0,title:` ! `,message:`'${item.title}'  .${discountApplied>0?`\n( : ${discountApplied.toLocaleString()} C  )`:``}\n      .`,type:`success`,singleButton:!1,confirmText:`  `,cancelText:``,onConfirm:()=>{setConfirmation(prev=>({...prev,isOpen:!1})),setSelectedItem(null),setActiveTab(`history`)}})}else setConfirmation({isOpen:!0,title:` `,message:`   .`,type:`danger`,singleButton:!0,onConfirm:()=>setConfirmation(prev=>({...prev,isOpen:!1}))})}})},handleSell=(item,isEdit=!1)=>{setSellModalItem(item),setIsEditMode(isEdit)},handleRegisterSubmit=async data=>{if(!sellModalItem)return;let imageUrl=sellModalItem.imageUrl||sellModalItem.thumbnailUrl;if(data.imageFile){let uploadedUrl=await uploadImageToSupabase(data.imageFile);uploadedUrl?imageUrl=uploadedUrl:alert(`  . ( )  .`)}if([`template_post`,`TEMPLATE_POST`,`template_widget`,`custom-block`].includes(sellModalItem.type)||typeof sellModalItem.type==`string`&&sellModalItem.type.startsWith(`custom-`)){let templateId=isEditMode?sellModalItem.referenceId:sellModalItem.id,candidate=mySellableCandidates.find(c$3=>String(c$3.id)===String(templateId));candidate?.thumbnailUrl&&(imageUrl=candidate.thumbnailUrl)}isEditMode?await updateItem(sellModalItem.id,{...sellModalItem,price:data.price,description:data.description,tags:data.tags,imageUrl})&&alert(`'${sellModalItem.title}'  !`):(await registerItem({...sellModalItem,price:data.price,description:data.description,tags:data.tags,imageUrl}),alert(`'${sellModalItem.title}'() !`)),setSellModalItem(null),setIsEditMode(!1)},filteredItems=(0,import_react.useMemo)(()=>{if(activeTab===`wishlist`)return wishlistDetails||[];let items=marketItems;return activeTab===`package`?items=items.filter(item=>item.type===`package`):activeTab===`sticker`?items=items.filter(item=>item.type===`sticker`):activeTab===`template_widget`?items=items.filter(item=>item.type===`template_widget`):activeTab===`template_post`&&(items=items.filter(item=>item.type===`template_post`)),hideOwned&&(items=items.filter(item=>!isOwned(item.id))),items},[marketItems,hideOwned,isOwned,activeTab,wishlistDetails]);return(0,import_jsx_runtime.jsxs)(MarketLayout_default,{header:(0,import_jsx_runtime.jsx)(Navigation_default,{}),children:[(0,import_jsx_runtime.jsx)(FloatingSettingsPanel_default,{defaultOpen:!1,isMobile:isMobile$1}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col gap-8 pb-20`,children:[(0,import_jsx_runtime.jsx)(MarketHeader_default,{onMyShopClick:()=>setActiveTab(`myshop`),isMyShopActive:activeTab===`myshop`,onHistoryClick:()=>setActiveTab(`history`),isHistoryActive:activeTab===`history`}),(0,import_jsx_runtime.jsx)(MarketTabs_default,{activeTab,setActiveTab,searchTerm,setSearchTerm}),activeTab!==`myshop`&&activeTab!==`history`&&(0,import_jsx_runtime.jsx)(MarketFilterBar_default,{totalCount:activeTab===`package`?filteredItems.length:activeTab===`wishlist`?wishlistItems.length:totalCount,sellerId,sellerName:sellerId?marketItems.find(i$4=>String(i$4.sellerId)===String(sellerId))?.author:null,filterBySeller,selectedTags,filterByTag,keyword:searchTerm,onClearSearch:()=>{setSearchTerm(``),search(``)},onClearAll:()=>{shouldSkipSearch.current=!0,setSearchTerm(``),filterByTag(null),filterBySeller(null),search(``)},hideOwned,setHideOwned,sort,changeSort,isFree:isFreeFilter,setIsFree:setIsFreeFilter}),activeTab===`history`?(0,import_jsx_runtime.jsx)(MarketHistoryView_default,{purchasedItems,setSelectedItem,onToggleWishlist:item=>toggleWishlist(item),isWishlisted}):activeTab===`myshop`?(0,import_jsx_runtime.jsx)(MarketMyShopView_default,{sellingItems,mySellableCandidates,handleSell,cancelItem}):(0,import_jsx_runtime.jsx)(MarketProductGrid_default,{filteredItems,setSelectedItem,hasMore,loadMore,onBuy:handleBuy,getPackPrice,isOwned,toggleWishlist:item=>toggleWishlist(item),isWishlisted,marketItems,purchasedItems})]}),selectedItem&&(0,import_jsx_runtime.jsx)(ItemDetailModal_default,{item:selectedItem,onClose:()=>setSelectedItem(null),onBuy:handleBuy,onToggleWishlist:item=>toggleWishlist(item),checkOwned:isOwned,isWishlisted:isWishlisted(selectedItem.id),effectivePrice:getPackPrice(selectedItem.referenceId||selectedItem.id,selectedItem.price),initialTab:selectedItem.initialTab,onFilterBySeller:filterBySeller,onSearchTag:filterByTag,reviewTargetId:(()=>{if(!selectedItem.referenceId)return;let stickerDef=STICKERS.find(s$3=>s$3.id===selectedItem.referenceId);if(stickerDef&&stickerDef.packId){let packItem=marketItems.find(m$3=>m$3.referenceId===stickerDef.packId)||purchasedItems.find(p$3=>p$3.referenceId===stickerDef.packId);if(packItem)return packItem.id}})(),onReviewChange:(itemId,newStats)=>{updateItemInState(itemId,newStats),setSelectedItem(prev=>prev?{...prev,...newStats}:null)},marketItems}),sellModalItem&&(0,import_jsx_runtime.jsx)(SellModal_default,{item:sellModalItem,onClose:()=>setSellModalItem(null),onSubmit:handleRegisterSubmit}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmation.isOpen,title:confirmation.title,message:confirmation.message,onConfirm:confirmation.onConfirm,onCancel:()=>setConfirmation(prev=>({...prev,isOpen:!1})),type:confirmation.type||`info`,singleButton:confirmation.singleButton,confirmText:confirmation.confirmText||(confirmation.singleButton?``:``),cancelText:confirmation.cancelText||``}),(0,import_jsx_runtime.jsx)(ScrollToTopButton_default,{})]})},MarketPage_default=Market,ProfileHeader=({profile})=>{let userName=profile?.nickname||profile?.name||``,userEmail=profile?.email||``;return(0,import_jsx_runtime.jsx)(`div`,{className:`rounded-2xl p-6 shadow-lg text-[var(--btn-text)]`,style:{backgroundColor:`var(--btn-bg)`},children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-20 h-20 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center overflow-hidden`,children:profile?.profilePhoto?(0,import_jsx_runtime.jsx)(`img`,{src:profile.profilePhoto,alt:`Profile`,className:`w-full h-full object-cover`}):(0,import_jsx_runtime.jsx)(User,{className:`w-10 h-10 text-white`})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`h1`,{className:`text-2xl font-bold mb-1`,children:[userName,``]}),(0,import_jsx_runtime.jsx)(`p`,{className:`opacity-90`,children:userEmail})]})]})})},ProfileHeader_default=ProfileHeader,ProfileStats=({profile})=>(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-3 gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-2xl p-4 shadow-sm border text-center theme-bg-card theme-border`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center mx-auto mb-2`,style:{backgroundColor:`var(--bg-solid)`},children:(0,import_jsx_runtime.jsx)(Calendar,{className:`w-5 h-5 theme-icon`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-2xl font-bold mb-1 theme-text-primary`,children:profile?.totalEntries||0}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs theme-text-secondary`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-2xl p-4 shadow-sm border text-center theme-bg-card theme-border`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center mx-auto mb-2`,style:{backgroundColor:`var(--bg-solid)`},children:(0,import_jsx_runtime.jsx)(ChartColumn,{className:`w-5 h-5 theme-icon`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-2xl font-bold mb-1 theme-text-primary`,children:profile?.streakDays||0}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs theme-text-secondary`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-2xl p-4 shadow-sm border text-center theme-bg-card theme-border`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center mx-auto mb-2`,style:{backgroundColor:`var(--bg-solid)`},children:(0,import_jsx_runtime.jsx)(Heart,{className:`w-5 h-5 theme-icon text-red-500 fill-red-500`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-2xl font-bold mb-1 theme-text-primary`,children:profile?.receivedLikes||0}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs theme-text-secondary`,children:` `})]})]}),ProfileStats_default=ProfileStats,FloatingPanelSettings=()=>{let{settings,updateSettings}=useHeaderSettings();return(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{updateSettings({showFloatingPanel:!settings.showFloatingPanel})},className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between border-b hover:opacity-80 theme-border`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(SlidersVertical,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`block theme-text-primary`,children:`  `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm theme-text-secondary`,children:`     `})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${settings.showFloatingPanel?`bg-[var(--btn-bg)]`:`bg-gray-300`}`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${settings.showFloatingPanel?`right-1`:`left-1`}`})})]})},FloatingPanelSettings_default=FloatingPanelSettings,SessionSettings=()=>{let{settings,updateSettings}=useHeaderSettings();return(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{updateSettings({showTimer:!settings.showTimer})},className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between border-b hover:opacity-80 theme-border`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(Clock,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`block theme-text-primary`,children:`  `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm theme-text-secondary`,children:`    `})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${settings.showTimer?`bg-[var(--btn-bg)]`:`bg-gray-300`}`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${settings.showTimer?`right-1`:`left-1`}`})})]})},SessionSettings_default=SessionSettings,CreditSettings=()=>{let{settings,updateSettings}=useHeaderSettings();return(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{updateSettings({showCredit:!settings.showCredit})},className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between border-b hover:opacity-80 theme-border`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(Coins,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`block theme-text-primary`,children:` `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm theme-text-secondary`,children:`  () `})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${settings.showCredit?`bg-[var(--btn-bg)]`:`bg-gray-300`}`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${settings.showCredit?`right-1`:`left-1`}`})})]})},CreditSettings_default=CreditSettings,WidgetZoomSettings=()=>{let{settings,updateSettings}=useHeaderSettings();return(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{updateSettings({showWidgetZoom:!settings.showWidgetZoom})},className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between border-b hover:opacity-80 theme-border`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(Maximize,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`block theme-text-primary`,children:`  `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm theme-text-secondary`,children:`     `})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${settings.showWidgetZoom?`bg-[var(--btn-bg)]`:`bg-gray-300`}`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${settings.showWidgetZoom?`right-1`:`left-1`}`})})]})},WidgetZoomSettings_default=WidgetZoomSettings,ProfileMenu=({provider})=>{let navigate=useNavigate();return(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-2xl shadow-sm border overflow-hidden theme-bg-card theme-border`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`px-6 py-4 border-b font-medium theme-text-primary theme-border`,children:` `}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>navigate(`/profile/analysis`),className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between border-b hover:opacity-80 theme-border`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(ChartColumn,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`block font-medium theme-text-primary`,children:` & `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm theme-text-secondary`,children:` ,  ,  `})]})]}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-secondary`,children:``})]}),(0,import_jsx_runtime.jsxs)(`button`,{className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between hover:opacity-80`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(Image$1,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`block font-medium theme-text-primary`,children:` `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm theme-text-secondary`,children:`AI  ,  `})]})]}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-secondary`,children:``})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-2xl shadow-sm border overflow-hidden theme-bg-card theme-border`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`px-6 py-4 border-b font-medium theme-text-primary theme-border`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/profile/edit`),className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between border-b hover:opacity-80 theme-border`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(User,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-primary`,children:` `})]})}),(0,import_jsx_runtime.jsx)(FloatingPanelSettings_default,{}),(0,import_jsx_runtime.jsx)(SessionSettings_default,{}),(0,import_jsx_runtime.jsx)(CreditSettings_default,{}),(0,import_jsx_runtime.jsx)(WidgetZoomSettings_default,{}),![`GOOGLE`,`NAVER`].includes(provider)&&(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/profile/password`),className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between border-b hover:opacity-80 theme-border`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(Lock,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-primary`,children:` `})]})})]})]})},ProfileMenu_default=ProfileMenu,import_react_dom=__toESM(require_react_dom(),1),PinInputModal=({title=`PIN `,subtitle=`6  `,isLocked=!1,onClose,onSubmit,onUnlockRequest})=>{let[pin,setPin]=(0,import_react.useState)(``),[isSubmitting,setIsSubmitting]=(0,import_react.useState)(!1),[error$1,setError]=(0,import_react.useState)(null),[statusMessage,setStatusMessage]=(0,import_react.useState)(null),numbers=[1,2,3,4,5,6,7,8,9,0];(0,import_react.useEffect)(()=>{pin.length===6?handleSubmit(pin):pin.length>0&&error$1&&setError(null)},[pin]);let handleNumberClick=num=>{pin.length<6&&!isSubmitting&&setPin(prev=>prev+num.toString())},handleDelete=()=>{isSubmitting||setPin(prev=>prev.slice(0,-1))},handleRequestCode=async()=>{if(!(!onUnlockRequest||isSubmitting)){setIsSubmitting(!0),setError(null),setStatusMessage(null);try{let err=await onUnlockRequest();err?setError(err):setStatusMessage(` .`)}catch{setError(`    .`)}finally{setIsSubmitting(!1)}}},handleSubmit=async currentPin=>{setIsSubmitting(!0),setError(null),setStatusMessage(null);try{let errorMsg=await onSubmit(currentPin);errorMsg?(setPin(``),setError(errorMsg),setIsSubmitting(!1)):(setPin(``),setIsSubmitting(!1))}catch(error$2){console.error(`PIN submission error:`,error$2),setPin(``),setError(` .`),setIsSubmitting(!1)}};return import_react_dom.createPortal((0,import_jsx_runtime.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-[2px] animate-fade-in px-4`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-card rounded-[2.5rem] w-full max-w-sm overflow-hidden flex flex-col shadow-2xl animate-scale-up border theme-border`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-4 flex justify-end`,children:(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`p-2.5 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors`,"aria-label":`Close`,children:(0,import_jsx_runtime.jsx)(X,{className:`w-6 h-6 theme-text-secondary`})})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`px-8 pb-4 text-center`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-3xl font-bold mb-2 theme-text-primary tracking-tight`,children:title}),(0,import_jsx_runtime.jsx)(`p`,{className:`theme-text-secondary mb-2 font-medium opacity-80 text-sm leading-relaxed`,children:subtitle}),(0,import_jsx_runtime.jsxs)(`div`,{className:`h-6 mb-4`,children:[error$1&&(0,import_jsx_runtime.jsx)(`p`,{className:`text-red-500 font-bold animate-shake text-sm drop-shadow-sm`,children:error$1}),statusMessage&&(0,import_jsx_runtime.jsx)(`p`,{className:`text-green-500 font-bold text-sm drop-shadow-sm`,children:statusMessage})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex justify-center gap-3 mb-6 mt-2`,children:[...[,,,,,,]].map((_$1,i$4)=>(0,import_jsx_runtime.jsx)(`div`,{className:`transition-all duration-300 flex items-center justify-center ${isLocked?`w-10 h-13 rounded-2xl text-xl font-bold ${i$4<pin.length?`bg-[var(--btn-bg)] text-white shadow-lg scale-105 border-transparent`:`bg-black/5 dark:bg-white/5 border-2 border-dashed theme-border`}`:`w-4 h-4 rounded-full ${i$4<pin.length?error$1?`bg-red-500 shadow-[0_0_10px_rgba(239,68,68,0.5)]`:`bg-[var(--btn-bg)] scale-125 shadow-md shadow-[var(--btn-bg)]/30`:`bg-black/10 dark:bg-white/10`}`}`,children:isLocked&&i$4<pin.length&&(0,import_jsx_runtime.jsx)(`span`,{className:`animate-in fade-in zoom-in duration-200`,children:pin[i$4]})},i$4))}),isLocked&&(0,import_jsx_runtime.jsx)(`button`,{onClick:handleRequestCode,disabled:isSubmitting,className:`mb-4 px-6 py-2 rounded-full theme-bg-subtle hover:bg-black/10 dark:hover:bg-white/10 theme-text-primary border theme-border transition-all text-xs font-semibold disabled:opacity-50`,children:statusMessage?` `:`  `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-card border-t theme-border p-8 grid grid-cols-3 gap-y-4 gap-x-6`,children:[numbers.slice(0,9).map(num=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleNumberClick(num),className:`h-14 flex items-center justify-center text-2xl font-semibold rounded-2xl hover:bg-black/5 dark:hover:bg-white/5 transition-all theme-text-primary active:scale-90 hover:scale-105`,disabled:isSubmitting,children:num},num)),(0,import_jsx_runtime.jsx)(`div`,{className:`col-start-1`}),` `,(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>handleNumberClick(0),className:`h-14 flex items-center justify-center text-2xl font-semibold rounded-2xl hover:bg-black/5 dark:hover:bg-white/5 transition-all theme-text-primary active:scale-90 hover:scale-105`,disabled:isSubmitting,children:`0`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleDelete,className:`h-14 flex items-center justify-center rounded-2xl hover:bg-black/5 dark:hover:bg-white/5 transition-all theme-text-primary active:scale-90 hover:scale-105`,disabled:isSubmitting,"aria-label":`Delete`,children:(0,import_jsx_runtime.jsx)(Delete,{className:`w-7 h-7 opacity-70`})})]})]})}),document.body)},PinInputModal_default=PinInputModal,PinSettings=({confirmModal,closeConfirmModal})=>{let{checkPinStatus,unlockRequest,unlockVerify}=useAuth(),[usePin,setUsePin]=(0,import_react.useState)(!1),[isPinExpanded,setIsPinExpanded]=(0,import_react.useState)(!1),[showPinInputModal,setShowPinInputModal]=(0,import_react.useState)(!1),[tempNewPin,setTempNewPin]=(0,import_react.useState)(``),[pinModalConfig,setPinModalConfig]=(0,import_react.useState)({title:`PIN `,subtitle:`6  `,mode:`REGISTER`});(0,import_react.useEffect)(()=>{(async()=>{setUsePin(await checkPinStatus())})()},[checkPinStatus]);let openPinModal=mode=>{let title=`PIN `,subtitle=`6  `;switch(mode){case`REGISTER`:title=`PIN `,subtitle=`   6  `;break;case`VERIFY_OLD`:title=` PIN `,subtitle=`  6 PIN `;break;case`SET_NEW`:title=` PIN `,subtitle=` 6  `;break;case`CONFIRM_NEW`:title=`PIN `,subtitle=`    `;break;case`DISABLE`:title=`PIN `,subtitle=`  6 PIN `;break;case`LOCKED_EMAIL_VERIFY`:title=` `,subtitle=`     `;break}setPinModalConfig({title,subtitle,mode}),setShowPinInputModal(!0)};return(0,import_jsx_runtime.jsxs)(`div`,{className:`border-b theme-border`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsPinExpanded(!isPinExpanded),className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between hover:opacity-80`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(Lock,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`block theme-text-primary`,children:`PIN `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm theme-text-secondary`,children:`    `})]})]}),(0,import_jsx_runtime.jsx)(ChevronDown,{className:`w-5 h-5 theme-text-secondary transition-transform duration-200 ${isPinExpanded?`transform rotate-180`:``}`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`overflow-hidden transition-all duration-300 ${isPinExpanded?`max-h-40 opacity-100`:`max-h-0 opacity-0`}`,children:[(0,import_jsx_runtime.jsxs)(`button`,{className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between border-t theme-border hover:opacity-80 pl-10`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(Shield,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`block theme-text-primary`,children:`PIN `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm theme-text-secondary`,children:`   PIN  `})]})]}),(0,import_jsx_runtime.jsx)(`div`,{onClick:e$4=>{e$4.stopPropagation(),openPinModal(usePin?`DISABLE`:`REGISTER`)},className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${usePin?`bg-[var(--btn-bg)]`:`bg-gray-300`}`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${usePin?`right-1`:`left-1`}`})})]}),usePin&&(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>openPinModal(`VERIFY_OLD`),className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between border-t theme-border hover:opacity-80 pl-10`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(RefreshCw,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`block theme-text-primary`,children:`PIN  `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm theme-text-secondary`,children:` PIN   `})]})]}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-secondary`,children:``})]})]}),showPinInputModal&&(0,import_jsx_runtime.jsx)(PinInputModal_default,{title:pinModalConfig.title,subtitle:pinModalConfig.subtitle,isLocked:pinModalConfig.mode===`LOCKED_EMAIL_VERIFY`,onClose:()=>setShowPinInputModal(!1),onSubmit:async pin=>{let token=localStorage.getItem(`accessToken`);try{if(pinModalConfig.mode===`REGISTER`)return(await fetch(`/api/pin/register`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({pin})})).ok?(setUsePin(!0),setShowPinInputModal(!1),null):`PIN  .`;if(pinModalConfig.mode===`VERIFY_OLD`){if(await(await fetch(`/api/pin/verify`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({pin})})).json()===!0)return openPinModal(`SET_NEW`),null;{let statusRes=await fetch(`/api/pin/status`,{headers:{Authorization:`Bearer ${token}`}});if(statusRes.ok){let status=await statusRes.json();return status.locked?(openPinModal(`LOCKED_EMAIL_VERIFY`),` .   .`):`PIN  . (${status.failureCount}/5)`}return`PIN  .`}}else if(pinModalConfig.mode===`SET_NEW`)return setTempNewPin(pin),openPinModal(`CONFIRM_NEW`),null;else if(pinModalConfig.mode===`CONFIRM_NEW`)return pin===tempNewPin?(await fetch(`/api/pin/register`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({pin})})).ok?(setShowPinInputModal(!1),setTempNewPin(``),null):`PIN  .  .`:`PIN   .`;else if(pinModalConfig.mode===`DISABLE`){if(await(await fetch(`/api/pin/verify`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({pin})})).json()===!0)return(await fetch(`/api/pin`,{method:`DELETE`,headers:{Authorization:`Bearer ${token}`}})).ok?(setUsePin(!1),setShowPinInputModal(!1),null):`PIN  .`;{let statusRes=await fetch(`/api/pin/status`,{headers:{Authorization:`Bearer ${token}`}});if(statusRes.ok){let status=await statusRes.json();return status.locked?(openPinModal(`LOCKED_EMAIL_VERIFY`),` .   .`):`PIN  . (${status.failureCount}/5)`}return`PIN  .`}}else if(pinModalConfig.mode===`LOCKED_EMAIL_VERIFY`)return await unlockVerify(pin)||(setShowPinInputModal(!1),setUsePin(!1),confirmModal({isOpen:!0,title:`PIN `,message:`PIN  , PIN  .`,type:`success`,singleButton:!0,onConfirm:closeConfirmModal}),null)}catch(error$1){return console.error(`PIN processing error`,error$1),` .`}return`   `},onUnlockRequest:unlockRequest})]})},PinSettings_default=PinSettings,TagSettings=()=>{let[isTagExpanded,setIsTagExpanded]=(0,import_react.useState)(!1),[privateTags,setPrivateTags]=(0,import_react.useState)([]),[tagInput,setTagInput]=(0,import_react.useState)(``),[isSavingTags,setIsSavingTags]=(0,import_react.useState)(!1);(0,import_react.useEffect)(()=>{isTagExpanded&&(async()=>{let token=localStorage.getItem(`accessToken`);if(token)try{let response=await fetch(`/api/persona/settings`,{headers:{Authorization:`Bearer ${token}`}});if(response.ok){let data=await response.json();data&&Array.isArray(data.excludedHashtags)?setPrivateTags(data.excludedHashtags):setPrivateTags(data&&Array.isArray(data)?data:[])}}catch(e$4){console.error(`Failed to fetch excluded tags`,e$4)}})()},[isTagExpanded]);let handleAddTag=()=>{let tag=tagInput.trim().replace(/^#/,``);tag&&(privateTags.includes(tag)||(setPrivateTags(prev=>[...prev,tag]),setTagInput(``)))},handleRemoveTag=tagToRemove=>{setPrivateTags(prev=>prev.filter(tag=>tag!==tagToRemove))};return(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setIsTagExpanded(!isTagExpanded),className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between hover:opacity-80`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(Lock,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`span`,{className:`block theme-text-primary`,children:`  `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm theme-text-secondary`,children:`AI   `})]})]}),(0,import_jsx_runtime.jsx)(ChevronDown,{className:`w-5 h-5 theme-text-secondary transition-transform duration-200 ${isTagExpanded?`transform rotate-180`:``}`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`overflow-hidden transition-all duration-300 ${isTagExpanded?`max-h-96 opacity-100`:`max-h-0 opacity-0`}`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`px-6 py-4 theme-bg-card-secondary border-t theme-border`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 mb-4`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:tagInput,onChange:e$4=>setTagInput(e$4.target.value),onKeyDown:e$4=>{(e$4.key===`Enter`||e$4.key===` `)&&(e$4.preventDefault(),handleAddTag())},placeholder:`#  ( )`,className:`flex-1 px-4 py-2 rounded-xl text-sm border theme-border theme-bg-card theme-text-primary focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] placeholder:text-gray-400`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:async()=>{let token=localStorage.getItem(`accessToken`);if(token){setIsSavingTags(!0);try{(await fetch(`/api/persona/settings`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({excludedHashtags:privateTags})})).ok?alert(`.`):alert(` .`)}catch(e$4){console.error(`Failed to save excluded tags`,e$4),alert(`   .`)}finally{setIsSavingTags(!1)}}},disabled:!!tagInput.trim()||isSavingTags,className:`px-6 py-2 rounded-xl text-sm font-bold text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md`,style:{backgroundColor:`var(--btn-bg)`},children:isSavingTags?` ...`:``})]}),tagInput.trim().length>0&&(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs text-red-500 mb-2 pl-2`,children:`*    .    .`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[privateTags.length===0&&(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs theme-text-secondary py-2`,children:`   .`}),privateTags.map(tag=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>handleRemoveTag(tag),className:`group flex items-center gap-1.5 pl-3 pr-2 py-1.5 rounded-full text-sm font-medium transition-all hover:bg-red-100 hover:text-red-600 theme-bg-card theme-text-primary border theme-border`,children:[(0,import_jsx_runtime.jsxs)(`span`,{children:[`#`,tag]}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-4 h-4 rounded-full theme-bg-card-secondary group-hover:bg-red-200 flex items-center justify-center`,children:(0,import_jsx_runtime.jsxs)(`svg`,{width:`10`,height:`10`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`3`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,import_jsx_runtime.jsx)(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),(0,import_jsx_runtime.jsx)(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})]})})]},tag))]}),(0,import_jsx_runtime.jsxs)(`p`,{className:`mt-3 text-xs theme-text-secondary flex items-center gap-1`,children:[(0,import_jsx_runtime.jsx)(Lock,{className:`w-3 h-3`}),`    AI    .`]})]})})]})},TagSettings_default=TagSettings;function ProfilePage(){let{logout}=useAuth(),navigate=useNavigate(),isMobile$1=useIsMobile(),[profile,setProfile]=(0,import_react.useState)(null),[provider,setProvider]=(0,import_react.useState)(`LOCAL`),[confirmModal,setConfirmModal]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}}),closeConfirmModal=()=>{setConfirmModal(prev=>({...prev,isOpen:!1}))};return(0,import_react.useEffect)(()=>{(async()=>{let token=localStorage.getItem(`accessToken`);if(token){try{let payload=JSON.parse(atob(token.split(`.`)[1]));payload.provider&&setProvider(payload.provider)}catch(e$4){console.error(`Token decode error`,e$4)}try{let response=await fetch(`/api/user/profile`,{headers:{Authorization:`Bearer ${token}`}});response.ok?setProfile(await response.json()):response.status===404?(console.log(`Profile not found, redirecting to setup...`),navigate(`/setup-profile`)):(response.status===401||response.status===403)&&(logout(),navigate(`/login`))}catch(error$1){console.error(`Error fetching profile:`,error$1)}}})()},[logout,navigate]),(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen pb-20 md:pb-0`,children:[(0,import_jsx_runtime.jsx)(Navigation_default,{}),(0,import_jsx_runtime.jsx)(FloatingSettingsPanel_default,{defaultOpen:!1,isMobile:isMobile$1}),(0,import_jsx_runtime.jsxs)(`main`,{className:`pt-16 md:pt-20 px-4 animate-fade-in`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-4xl mx-auto space-y-6`,children:[(0,import_jsx_runtime.jsx)(ProfileHeader_default,{profile}),(0,import_jsx_runtime.jsx)(ProfileStats_default,{profile}),(0,import_jsx_runtime.jsx)(ProfileMenu_default,{provider}),(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-2xl shadow-sm border overflow-hidden theme-bg-card theme-border`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`px-6 py-4 border-b font-medium flex items-center gap-2 theme-text-primary theme-border`,children:[(0,import_jsx_runtime.jsx)(Shield,{className:`w-5 h-5 theme-icon`}),``]}),(0,import_jsx_runtime.jsx)(PinSettings_default,{confirmModal:setConfirmModal,closeConfirmModal}),(0,import_jsx_runtime.jsx)(TagSettings_default,{}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/profile/delete`),className:`w-full px-6 py-4 text-left transition-colors flex items-center justify-between hover:opacity-80`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`w-5 h-5 flex items-center justify-center`,children:(0,import_jsx_runtime.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`w-5 h-5 theme-text-secondary`,children:(0,import_jsx_runtime.jsx)(`path`,{d:`M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z`})})}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-primary`,children:``})]})})]}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>{logout(),navigate(`/login`)},className:`w-full rounded-2xl shadow-sm border py-4 px-6 text-left transition-colors flex items-center gap-3 hover:opacity-80 theme-bg-card theme-border`,children:[(0,import_jsx_runtime.jsx)(LogOut,{className:`w-5 h-5 theme-text-secondary`}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-primary font-medium`,children:``})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-center py-4 text-sm theme-text-secondary`,children:(0,import_jsx_runtime.jsx)(`p`,{children:` 2025 . All rights reserved.`})})]}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmModal.isOpen,title:confirmModal.title,message:confirmModal.message,type:confirmModal.type,singleButton:confirmModal.singleButton,onConfirm:()=>{confirmModal.onConfirm(),confirmModal.singleButton&&closeConfirmModal()},onCancel:closeConfirmModal})]})]})}var ProfilePage_default=ProfilePage,ProfileEditPage=()=>{let navigate=useNavigate(),[name,setName]=(0,import_react.useState)(``),[nickname,setNickname]=(0,import_react.useState)(``),[email,setEmail]=(0,import_react.useState)(``),[birthDate,setBirthDate]=(0,import_react.useState)(``),[gender,setGender]=(0,import_react.useState)(`unspecified`),[phone,setPhone]=(0,import_react.useState)(``),[bio,setBio]=(0,import_react.useState)(``),[profilePhoto,setProfilePhoto]=(0,import_react.useState)(``),[isUploading,setIsUploading]=(0,import_react.useState)(!1),[isLoading,setIsLoading]=(0,import_react.useState)(!0),[confirmModal,setConfirmModal]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}}),closeConfirmModal=()=>{setConfirmModal(prev=>({...prev,isOpen:!1}))},showModal=(title,message,type=`info`,onConfirm)=>{setConfirmModal({isOpen:!0,title,message,type,singleButton:!0,onConfirm:onConfirm||closeConfirmModal})};return(0,import_react.useEffect)(()=>{(async()=>{let token=localStorage.getItem(`accessToken`);if(!token){showModal(``,`  .`,`danger`,()=>navigate(`/login`));return}try{let response=await fetch(`/api/user/profile`,{headers:{Authorization:`Bearer ${token}`}});if(response.ok){let data=await response.json();if(setName(data.name||``),setNickname(data.nickname||``),setBirthDate(data.birthDate||``),setPhone(data.phone||``),setBio(data.bio||``),setProfilePhoto(data.profilePhoto||``),data.gender===`MALE`?setGender(`male`):data.gender===`FEMALE`?setGender(`female`):setGender(`unspecified`),data.email)setEmail(data.email);else try{let payload=token.split(`.`)[1],decoded=JSON.parse(atob(payload));setEmail(decoded.sub||decoded.email||``)}catch(e$4){console.error(`Failed to decode token for email`,e$4)}}else console.error(`Failed to fetch profile`)}catch(error$1){console.error(`Error fetching profile:`,error$1)}finally{setIsLoading(!1)}})()},[navigate]),isLoading?(0,import_jsx_runtime.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500`})}):(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen`,children:[(0,import_jsx_runtime.jsx)(Navigation_default,{}),(0,import_jsx_runtime.jsxs)(`div`,{className:`pt-16 pb-24 md:pt-15 md:pb-15`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-2xl mx-auto px-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`mb-6 flex items-center gap-4`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/profile`),className:`p-2 -ml-2 rounded-full hover:bg-black/5 transition-colors`,children:(0,import_jsx_runtime.jsx)(ArrowLeft,{className:`w-6 h-6 theme-text-primary`})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-xl font-bold theme-text-primary`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-card rounded-3xl shadow-sm p-8 border theme-border relative overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-[var(--btn-bg)] to-[var(--icon-color)] opacity-50`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-5`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-col items-center`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`relative group cursor-pointer`,onClick:()=>{let input=document.createElement(`input`);input.type=`file`,input.accept=`image/*`,input.onchange=async e$4=>{let file=e$4.target.files?.[0];if(file){if(file.size>2*1024*1024){showModal(` `,`   2MB`,`danger`);return}try{setIsUploading(!0),profilePhoto&&await deleteOldImage(profilePhoto);let uploadedUrl=await uploadImageToSupabase(file);uploadedUrl?setProfilePhoto(uploadedUrl):(console.error(`  `),showModal(` `,`  .`,`danger`))}catch(error$1){console.error(`   :`,error$1)}finally{setIsUploading(!1)}}},input.click()},children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-24 h-24 rounded-full overflow-hidden theme-border border-4 shadow-lg flex items-center justify-center theme-bg-card-secondary transition-transform group-hover:scale-105`,children:profilePhoto?(0,import_jsx_runtime.jsx)(`img`,{src:profilePhoto,alt:`Profile`,className:`w-full h-full object-cover`}):(0,import_jsx_runtime.jsx)(User,{className:`w-10 h-10 theme-icon opacity-50`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute bottom-0 right-0 w-8 h-8 theme-btn rounded-full flex items-center justify-center shadow-md`,children:isUploading?(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px]`,children:`...`}):(0,import_jsx_runtime.jsx)(Camera,{size:14})})]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(Mail,{className:`absolute left-3 top-4 theme-icon w-5 h-5 scale-90 opacity-70`}),(0,import_jsx_runtime.jsx)(`input`,{type:`email`,value:email,readOnly:!0,disabled:!0,className:`w-full pl-10 pr-4 py-3 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none opacity-60 cursor-not-allowed theme-text-primary`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:[` `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(User,{className:`absolute left-3 top-4 theme-icon w-5 h-5 scale-90 opacity-70`}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:name,onChange:e$4=>setName(e$4.target.value),placeholder:` `,className:`w-full pl-10 pr-4 py-3 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] theme-text-primary`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:[` `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(Smile,{className:`absolute left-3 top-4 theme-icon w-5 h-5 scale-90 opacity-70`}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:nickname,onChange:e$4=>setNickname(e$4.target.value),placeholder:` `,className:`w-full pl-10 pr-4 py-3 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] theme-text-primary`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(Calendar,{className:`absolute left-3 top-4 theme-icon w-5 h-5 scale-90 opacity-70`}),(0,import_jsx_runtime.jsx)(`input`,{type:`date`,value:birthDate,onChange:e$4=>setBirthDate(e$4.target.value),className:`w-full pl-10 pr-4 py-3 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] theme-text-primary`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(Phone,{className:`absolute left-3 top-4 theme-icon w-5 h-5 scale-90 opacity-70`}),(0,import_jsx_runtime.jsx)(`input`,{type:`tel`,value:phone,onChange:e$4=>{let raw=e$4.target.value.replace(/\D/g,``),formatted=raw;raw.length>3&&raw.length<=7?formatted=`${raw.slice(0,3)}-${raw.slice(3)}`:raw.length>7&&(formatted=`${raw.slice(0,3)}-${raw.slice(3,7)}-${raw.slice(7,11)}`),setPhone(formatted)},maxLength:13,placeholder:`010-0000-0000`,className:`w-full pl-10 pr-4 py-3 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] theme-text-primary`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative flex p-1 theme-bg-card-secondary rounded-xl theme-border border`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-1 bottom-1 rounded-lg theme-btn shadow-sm transition-all duration-300 ease-[cubic-bezier(0.25,1,0.5,1)]`,style:{width:`calc((100% - 8px) / 3)`,left:`4px`,transform:`translateX(${[`male`,`female`,`unspecified`].indexOf(gender)*100}%)`}}),[`male`,`female`,`unspecified`].map(g$3=>(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:()=>setGender(g$3),className:`relative z-10 flex-1 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${gender===g$3?`text-[var(--btn-text)]`:`theme-text-secondary hover:theme-text-primary`}`,children:g$3===`male`?``:g$3===`female`?``:``},g$3))]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(FileText,{className:`absolute left-3 top-4 theme-icon w-5 h-5 scale-90 opacity-70`}),(0,import_jsx_runtime.jsx)(`textarea`,{value:bio,onChange:e$4=>setBio(e$4.target.value),maxLength:50,placeholder:`   ( 50)`,rows:3,className:`w-full pl-10 pr-4 py-3 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] theme-text-primary resize-none`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute right-3 bottom-3 text-xs theme-text-secondary opacity-70 pointer-events-none`,children:[bio.length,`/50`]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3 pt-4`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/profile`),className:`flex-1 py-3 rounded-xl transition-colors font-medium theme-bg-card theme-text-primary border theme-border hover:bg-black/5 dark:hover:bg-white/5`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:async()=>{if(!name.trim()){showModal(` `,` !`,`danger`);return}if(!nickname.trim()){showModal(` `,` !`,`danger`);return}if(birthDate){let birthYear=new Date(birthDate).getFullYear(),currentYear=new Date().getFullYear();if(birthYear<1900||birthYear>currentYear){showModal(` `,`  1900 ${currentYear}  .`,`danger`);return}}if(phone&&phone.replace(/-/g,``).length!==11){showModal(` `,` 11 .`,`danger`);return}let token=localStorage.getItem(`accessToken`);if(!token){showModal(``,`  .`,`danger`,()=>navigate(`/login`));return}let mappedGender=`PRIVATE`;gender===`male`?mappedGender=`MALE`:gender===`female`&&(mappedGender=`FEMALE`);let payload={profilePhoto:profilePhoto||``,name,nickname,birthDate,phone,gender:mappedGender,bio};try{let response=await fetch(`/api/user/profile`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify(payload)});if(response.ok)showModal(``,` .`,`success`,()=>{navigate(`/profile`,{replace:!0}),window.location.reload()});else if(response.status===409)showModal(` `,`  .`,`danger`);else{let errorData=await response.text();console.error(`Profile update failed:`,errorData),showModal(` `,`  .`,`danger`)}}catch(error$1){console.error(`Error updating profile:`,error$1),showModal(``,`    .`,`danger`)}},className:`flex-1 py-3 rounded-xl shadow-lg transition-all font-medium theme-btn hover:opacity-90`,children:``})]})]})]})]}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmModal.isOpen,title:confirmModal.title,message:confirmModal.message,type:confirmModal.type,singleButton:confirmModal.singleButton,onConfirm:()=>{confirmModal.onConfirm(),confirmModal.singleButton&&closeConfirmModal()},onCancel:closeConfirmModal})]})]})},ProfileEditPage_default=ProfileEditPage,PasswordChangePage=()=>{let navigate=useNavigate(),[currentPassword,setCurrentPassword]=(0,import_react.useState)(``),[newPassword,setNewPassword]=(0,import_react.useState)(``),[confirmPassword,setConfirmPassword]=(0,import_react.useState)(``),[showCurrentPassword,setShowCurrentPassword]=(0,import_react.useState)(!1),[showNewPassword,setShowNewPassword]=(0,import_react.useState)(!1),[showConfirmPassword,setShowConfirmPassword]=(0,import_react.useState)(!1),[confirmModal,setConfirmModal]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}}),closeConfirmModal=()=>{setConfirmModal(prev=>({...prev,isOpen:!1}))},showModal=(title,message,type=`info`,onConfirm)=>{setConfirmModal({isOpen:!0,title,message,type,singleButton:!0,onConfirm:onConfirm||closeConfirmModal})},hasMinLength=newPassword.length>=8,hasUpperCase=/[A-Z]/.test(newPassword),hasLowerCase=/[a-z]/.test(newPassword),hasNumber=/[0-9]/.test(newPassword),hasSpecialChar=/[!@#$%^&*(),.?":{}|<>]/.test(newPassword),isPasswordValid=hasMinLength&&hasUpperCase&&hasLowerCase&&hasNumber,passwordsMatch=newPassword&&confirmPassword&&newPassword===confirmPassword,handleSave=async()=>{if(!currentPassword){showModal(` `,`  `,`danger`);return}if(!isPasswordValid){showModal(` `,`  `,`danger`);return}if(!passwordsMatch){showModal(` `,`  `,`danger`);return}let token=localStorage.getItem(`accessToken`);if(!token){showModal(``,`  .`,`danger`,()=>navigate(`/login`));return}try{(await fetch(`/auth/password`,{method:`PUT`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({currentPassword,newPassword})})).ok?showModal(``,` .`,`success`,()=>navigate(`/profile`)):showModal(` `,`   `,`danger`)}catch(error$1){console.error(`Error changing password:`,error$1),showModal(``,`    .`,`danger`)}},ValidationItem=({isValid,text})=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 text-sm transition-colors`,children:[isValid?(0,import_jsx_runtime.jsx)(CircleCheck,{className:`w-4 h-4 text-green-600`}):(0,import_jsx_runtime.jsx)(CircleX,{className:`w-4 h-4 theme-text-secondary`}),(0,import_jsx_runtime.jsx)(`span`,{className:isValid?`text-green-600`:`theme-text-secondary`,children:text})]});return(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen`,children:[(0,import_jsx_runtime.jsx)(Navigation_default,{}),(0,import_jsx_runtime.jsxs)(`div`,{className:`pt-16 pb-24 md:pt-20 md:pb-20`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-2xl mx-auto px-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`mb-6 flex items-center gap-4`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/profile`),className:`p-2 -ml-2 rounded-full hover:bg-black/5 transition-colors`,children:(0,import_jsx_runtime.jsx)(ArrowLeft,{className:`w-6 h-6 theme-text-primary`})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-xl font-bold theme-text-primary`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-2xl p-6 shadow-sm border theme-bg-card theme-border space-y-6`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`rounded-2xl p-5 border theme-bg-card-secondary theme-border`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,import_jsx_runtime.jsx)(Lock,{className:`w-6 h-6 flex-shrink-0 mt-1 theme-icon`}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`mb-2 font-medium theme-text-primary`,children:` `}),(0,import_jsx_runtime.jsx)(`p`,{className:`leading-relaxed text-sm theme-text-secondary`,children:`      .    .`})]})]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-2 font-medium theme-text-primary`,children:[(0,import_jsx_runtime.jsx)(Lock,{className:`w-5 h-5 theme-icon`}),(0,import_jsx_runtime.jsx)(`span`,{children:` `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:showCurrentPassword?`text`:`password`,value:currentPassword,onChange:e$4=>setCurrentPassword(e$4.target.value),placeholder:`  `,className:`w-full px-4 py-3 pr-12 border rounded-xl focus:outline-none focus:ring-2 focus:border-transparent transition-all theme-bg-card theme-border theme-text-primary`}),(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:()=>setShowCurrentPassword(!showCurrentPassword),className:`absolute right-3 top-1/2 -translate-y-1/2 p-2 transition-colors theme-text-secondary`,children:showCurrentPassword?(0,import_jsx_runtime.jsx)(EyeOff,{className:`w-5 h-5`}):(0,import_jsx_runtime.jsx)(Eye,{className:`w-5 h-5`})})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-2 font-medium theme-text-primary`,children:[(0,import_jsx_runtime.jsx)(Lock,{className:`w-5 h-5 theme-icon`}),(0,import_jsx_runtime.jsx)(`span`,{children:` `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:showNewPassword?`text`:`password`,value:newPassword,onChange:e$4=>setNewPassword(e$4.target.value),placeholder:`  `,className:`w-full px-4 py-3 pr-12 border rounded-xl focus:outline-none focus:ring-2 focus:border-transparent transition-all theme-bg-card theme-border theme-text-primary`}),(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:()=>setShowNewPassword(!showNewPassword),className:`absolute right-3 top-1/2 -translate-y-1/2 p-2 transition-colors theme-text-secondary`,children:showNewPassword?(0,import_jsx_runtime.jsx)(EyeOff,{className:`w-5 h-5`}):(0,import_jsx_runtime.jsx)(Eye,{className:`w-5 h-5`})})]}),newPassword&&(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-xl p-4 border space-y-2 theme-bg-card-secondary theme-border`,children:[(0,import_jsx_runtime.jsx)(`p`,{className:`mb-2 font-medium theme-text-primary`,children:` :`}),(0,import_jsx_runtime.jsx)(ValidationItem,{isValid:hasMinLength,text:`8 `}),(0,import_jsx_runtime.jsx)(ValidationItem,{isValid:hasUpperCase,text:` `}),(0,import_jsx_runtime.jsx)(ValidationItem,{isValid:hasLowerCase,text:` `}),(0,import_jsx_runtime.jsx)(ValidationItem,{isValid:hasNumber,text:` `}),(0,import_jsx_runtime.jsx)(ValidationItem,{isValid:hasSpecialChar,text:`  ()`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-2 font-medium theme-text-primary`,children:[(0,import_jsx_runtime.jsx)(Lock,{className:`w-5 h-5 theme-icon`}),(0,import_jsx_runtime.jsx)(`span`,{children:`  `}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:showConfirmPassword?`text`:`password`,value:confirmPassword,onChange:e$4=>setConfirmPassword(e$4.target.value),placeholder:`   `,className:`w-full px-4 py-3 pr-12 border rounded-xl focus:outline-none focus:ring-2 focus:border-transparent transition-all theme-bg-card theme-border theme-text-primary`}),(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:()=>setShowConfirmPassword(!showConfirmPassword),className:`absolute right-3 top-1/2 -translate-y-1/2 p-2 transition-colors theme-text-secondary`,children:showConfirmPassword?(0,import_jsx_runtime.jsx)(EyeOff,{className:`w-5 h-5`}):(0,import_jsx_runtime.jsx)(Eye,{className:`w-5 h-5`})})]}),confirmPassword&&(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center gap-2 ${passwordsMatch?`text-green-600`:`text-red-500`}`,children:passwordsMatch?(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(CircleCheck,{className:`w-4 h-4`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm`,children:` `})]}):(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(CircleX,{className:`w-4 h-4`}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm`,children:`  `})]})})]}),newPassword&&(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-xl p-4 border theme-bg-card-secondary theme-border`,children:[(0,import_jsx_runtime.jsx)(`p`,{className:`mb-3 font-medium theme-text-primary`,children:` :`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2 mb-2`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`h-2 flex-1 rounded-full ${hasMinLength?`bg-red-500`:`bg-gray-200`}`}),(0,import_jsx_runtime.jsx)(`div`,{className:`h-2 flex-1 rounded-full ${hasMinLength&&hasUpperCase&&hasLowerCase?`bg-amber-500`:`bg-gray-200`}`}),(0,import_jsx_runtime.jsx)(`div`,{className:`h-2 flex-1 rounded-full ${isPasswordValid&&hasSpecialChar?`bg-green-500`:`bg-gray-200`}`})]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm theme-text-secondary`,children:hasMinLength?!hasUpperCase||!hasLowerCase||!hasNumber?``:hasSpecialChar?``:``:``})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-3 pt-4`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/profile`),className:`flex-1 py-3 rounded-xl transition-colors font-medium theme-bg-card theme-text-primary border theme-border`,children:``}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleSave,disabled:!currentPassword||!isPasswordValid||!passwordsMatch,className:`flex-1 py-3 rounded-xl shadow-lg transition-all font-medium text-white disabled:opacity-50 disabled:cursor-not-allowed theme-btn`,children:``})]})]})]}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmModal.isOpen,title:confirmModal.title,message:confirmModal.message,type:confirmModal.type,singleButton:confirmModal.singleButton,onConfirm:()=>{confirmModal.onConfirm(),confirmModal.singleButton&&closeConfirmModal()},onCancel:closeConfirmModal})]})]})},PasswordChangePage_default=PasswordChangePage,GetOutPage=()=>{let navigate=useNavigate(),{logout}=useAuth(),[inputConfirmation,setInputConfirmation]=(0,import_react.useState)(``),[confirmModal,setConfirmModal]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}}),closeConfirmModal=()=>{setConfirmModal(prev=>({...prev,isOpen:!1}))},handleDelete=async()=>{inputConfirmation===``&&setConfirmModal({isOpen:!0,title:` ?`,message:` ?   .`,type:`danger`,singleButton:!1,onConfirm:async()=>{closeConfirmModal(),await executeDelete()}})},executeDelete=async()=>{try{let token=localStorage.getItem(`accessToken`),response=await fetch(`/api/user`,{method:`DELETE`,headers:{Authorization:`Bearer ${token}`}});response.ok?setConfirmModal({isOpen:!0,title:` `,message:`   .
    .`,type:`success`,singleButton:!0,onConfirm:()=>{logout(),navigate(`/`)}}):setConfirmModal({isOpen:!0,title:` `,message:`  : `+await response.text(),type:`danger`,singleButton:!0,onConfirm:closeConfirmModal})}catch(e$4){console.error(`Delete error`,e$4),setConfirmModal({isOpen:!0,title:` `,message:`   .`,type:`danger`,singleButton:!0,onConfirm:closeConfirmModal})}};return(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen pt-20 px-4 pb-12 animate-fade-in`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-2xl mx-auto space-y-8`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(-1),className:`p-2 rounded-full theme-bg-card theme-border border hover:opacity-80 transition-colors`,children:(0,import_jsx_runtime.jsx)(ArrowLeft,{className:`w-6 h-6 theme-text-primary`})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-2xl font-bold theme-text-primary`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-2xl p-8 shadow-lg theme-bg-card theme-border border text-center space-y-6`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-24 h-24 rounded-full flex items-center justify-center mx-auto animate-pulse theme-bg-card-secondary`,children:(0,import_jsx_runtime.jsx)(HeartCrack,{className:`w-12 h-12 theme-icon`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-xl font-bold theme-text-primary`,children:` ?`}),(0,import_jsx_runtime.jsxs)(`p`,{className:`theme-text-secondary leading-relaxed`,children:[`      .`,(0,import_jsx_runtime.jsx)(`br`,{}),` ,   ,   `,(0,import_jsx_runtime.jsx)(`br`,{}),(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold theme-text-primary`,children:`   `}),`   .`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-xl p-6 text-left space-y-3 theme-bg-card-secondary`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`font-bold theme-text-primary flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(ShieldAlert,{className:`w-5 h-5 theme-icon`}),`  `]}),(0,import_jsx_runtime.jsxs)(`ul`,{className:`text-sm theme-text-secondary space-y-2 list-disc list-inside`,children:[(0,import_jsx_runtime.jsx)(`li`,{children:`     .`}),(0,import_jsx_runtime.jsx)(`li`,{children:`     .`}),(0,import_jsx_runtime.jsx)(`li`,{children:`        .`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`rounded-2xl p-6 shadow-sm theme-bg-card theme-border border space-y-6`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold theme-text-primary text-lg`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-4`,children:[(0,import_jsx_runtime.jsxs)(`p`,{className:`text-sm theme-text-secondary`,children:[`    `,(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold theme-text-primary`,children:``}),`  .`]}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:inputConfirmation,onChange:e$4=>setInputConfirmation(e$4.target.value),placeholder:``,className:`w-full p-4 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none focus:ring-2 focus:ring-opacity-50 transition-all theme-text-primary`,style:{"--tw-ring-color":`var(--btn-bg)`}})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleDelete,disabled:inputConfirmation!==``,className:`w-full py-4 rounded-xl font-bold transition-all transform active:scale-[0.98] theme-btn ${inputConfirmation===``?`hover:shadow-lg`:`opacity-50 cursor-not-allowed`}`,children:` `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(-1),className:`w-full py-4 rounded-xl font-medium theme-text-secondary hover:opacity-80 transition-opacity theme-bg-card-secondary`,children:`  ()`})]})]}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmModal.isOpen,title:confirmModal.title,message:confirmModal.message,type:confirmModal.type,singleButton:confirmModal.singleButton,onConfirm:()=>{confirmModal.onConfirm()},onCancel:closeConfirmModal})]})},GetOutPage_default=GetOutPage,InitialProfileSetup=()=>{let navigate=useNavigate(),[name,setName]=(0,import_react.useState)(``),[nickname,setNickname]=(0,import_react.useState)(``),[birthDate,setBirthDate]=(0,import_react.useState)(``),[gender,setGender]=(0,import_react.useState)(`unspecified`),[phone,setPhone]=(0,import_react.useState)(``),[bio,setBio]=(0,import_react.useState)(``),[profilePhoto,setProfilePhoto]=(0,import_react.useState)(``),[isUploading,setIsUploading]=(0,import_react.useState)(!1);return import_react.useEffect(()=>{let storedData=localStorage.getItem(`temp_social_profile`);if(storedData)try{let data=JSON.parse(storedData);data.name&&setName(data.name),data.nickname&&setNickname(data.nickname),data.profileImage&&setProfilePhoto(data.profileImage),data.gender===`M`?setGender(`male`):data.gender===`F`?setGender(`female`):setGender(`unspecified`),data.birthyear&&data.birthday&&setBirthDate(`${data.birthyear}-${data.birthday}`),data.mobile&&setPhone(data.mobile)}catch(e$4){console.error(`Failed to parse temp profile data`,e$4)}},[]),(0,import_jsx_runtime.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4 transition-colors duration-500 overflow-y-auto`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-xl w-full theme-bg-card rounded-3xl shadow-2xl p-8 border theme-border relative overflow-hidden my-8`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-[var(--btn-bg)] to-[var(--icon-color)] opacity-50`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-center mb-6`,children:[(0,import_jsx_runtime.jsx)(`h1`,{className:`text-2xl font-bold theme-text-primary mb-2`,children:` `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`theme-text-secondary text-sm`,children:[`     .`,(0,import_jsx_runtime.jsx)(`br`,{}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs opacity-70`,children:`(     )`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-5`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-col items-center`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`relative group cursor-pointer`,onClick:()=>{let input=document.createElement(`input`);input.type=`file`,input.accept=`image/*`,input.onchange=async e$4=>{let file=e$4.target.files?.[0];if(file){if(file.size>2*1024*1024){alert(`   2MB`);return}try{setIsUploading(!0);let uploadedUrl=await uploadImageToSupabase(file);uploadedUrl?setProfilePhoto(uploadedUrl):console.error(`  `)}catch(error$1){console.error(`   :`,error$1)}finally{setIsUploading(!1)}}},input.click()},children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-24 h-24 rounded-full overflow-hidden theme-border border-4 shadow-lg flex items-center justify-center theme-bg-card-secondary transition-transform group-hover:scale-105`,children:profilePhoto?(0,import_jsx_runtime.jsx)(`img`,{src:profilePhoto,alt:`Profile`,className:`w-full h-full object-cover`}):(0,import_jsx_runtime.jsx)(User,{className:`w-10 h-10 theme-icon opacity-50`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute bottom-0 right-0 w-8 h-8 theme-btn rounded-full flex items-center justify-center shadow-md`,children:isUploading?(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px]`,children:`...`}):(0,import_jsx_runtime.jsx)(Camera,{size:14})})]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:[` `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(User,{className:`absolute left-3 top-4 theme-icon w-5 h-5 scale-90 opacity-70`}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:name,onChange:e$4=>setName(e$4.target.value),placeholder:` `,className:`w-full pl-10 pr-4 py-3 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] theme-text-primary`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:[` `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(Smile,{className:`absolute left-3 top-4 theme-icon w-5 h-5 scale-90 opacity-70`}),(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:nickname,onChange:e$4=>setNickname(e$4.target.value),placeholder:` `,className:`w-full pl-10 pr-4 py-3 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] theme-text-primary`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(Calendar,{className:`absolute left-3 top-4 theme-icon w-5 h-5 scale-90 opacity-70`}),(0,import_jsx_runtime.jsx)(`input`,{type:`date`,value:birthDate,onChange:e$4=>setBirthDate(e$4.target.value),className:`w-full pl-10 pr-4 py-3 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] theme-text-primary`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(Phone,{className:`absolute left-3 top-4 theme-icon w-5 h-5 scale-90 opacity-70`}),(0,import_jsx_runtime.jsx)(`input`,{type:`tel`,value:phone,onChange:e$4=>{let raw=e$4.target.value.replace(/\D/g,``),formatted=raw;raw.length>3&&raw.length<=7?formatted=`${raw.slice(0,3)}-${raw.slice(3)}`:raw.length>7&&(formatted=`${raw.slice(0,3)}-${raw.slice(3,7)}-${raw.slice(7,11)}`),setPhone(formatted)},maxLength:13,placeholder:`010-0000-0000`,className:`w-full pl-10 pr-4 py-3 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] theme-text-primary`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative flex p-1 theme-bg-card-secondary rounded-xl theme-border border`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-1 bottom-1 rounded-lg theme-btn shadow-sm transition-all duration-300 ease-[cubic-bezier(0.25,1,0.5,1)]`,style:{width:`calc((100% - 8px) / 3)`,left:`4px`,transform:`translateX(${[`male`,`female`,`unspecified`].indexOf(gender)*100}%)`}}),[`male`,`female`,`unspecified`].map(g$3=>(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:()=>setGender(g$3),className:`relative z-10 flex-1 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${gender===g$3?`text-[var(--btn-text)]`:`theme-text-secondary hover:theme-text-primary`}`,children:g$3===`male`?``:g$3===`female`?``:``},g$3))]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-1`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`text-xs font-bold theme-text-secondary uppercase tracking-wider ml-1`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative`,children:[(0,import_jsx_runtime.jsx)(FileText,{className:`absolute left-3 top-4 theme-icon w-5 h-5 scale-90 opacity-70`}),(0,import_jsx_runtime.jsx)(`textarea`,{value:bio,onChange:e$4=>setBio(e$4.target.value),maxLength:50,placeholder:`   ( 50)`,rows:3,className:`w-full pl-10 pr-4 py-3 rounded-xl theme-bg-card-secondary theme-border border focus:outline-none focus:ring-2 focus:ring-[var(--btn-bg)] theme-text-primary resize-none`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute right-3 bottom-3 text-xs theme-text-secondary opacity-70 pointer-events-none`,children:[bio.length,`/50`]})]})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`mt-8 flex flex-col gap-3`,children:(0,import_jsx_runtime.jsxs)(`button`,{onClick:async()=>{if(!name.trim()){alert(` !`);return}if(!nickname.trim()){alert(` !`);return}if(birthDate){let birthYear=new Date(birthDate).getFullYear(),currentYear=new Date().getFullYear();if(birthYear<1900||birthYear>currentYear){alert(`  1900 ${currentYear}  .`);return}}if(phone&&phone.replace(/-/g,``).length!==11){alert(` 11 .`);return}let token=localStorage.getItem(`accessToken`);if(!token){alert(`  .  .`),navigate(`/login`);return}let mappedGender=`PRIVATE`;gender===`male`?mappedGender=`MALE`:gender===`female`&&(mappedGender=`FEMALE`);let payload={profilePhoto:profilePhoto||``,name,nickname,birthDate,phone,gender:mappedGender,bio};try{let response=await fetch(`/api/user/profile`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify(payload)});if(response.ok)localStorage.setItem(`isProfileSetupCompleted`,`true`),navigate(`/home`,{replace:!0}),window.location.reload();else if(response.status===409)alert(`  .`);else{let errorData=await response.text();console.error(`Profile update failed:`,errorData),alert(`  .`)}}catch(error$1){console.error(`Error submitting profile:`,error$1),alert(`    .`)}},className:`w-full py-4 rounded-xl theme-btn font-bold text-lg shadow-lg transition-all flex items-center justify-center gap-2 group`,children:[`  `,(0,import_jsx_runtime.jsx)(ArrowRight,{className:`w-5 h-5 group-hover:translate-x-1 transition-transform`})]})})]})})},InitialProfileSetup_default=InitialProfileSetup,ChargePage=()=>{let navigate=useNavigate(),isMobile$1=useIsMobile(),[modalConfig,setModalConfig]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}});(0,import_react.useEffect)(()=>{window.scrollTo(0,0)},[]);let chargeOptions=[{amount:1e3,price:1e3,bonus:0},{amount:5e3,price:5e3,bonus:500},{amount:1e4,price:1e4,bonus:1500},{amount:3e4,price:3e4,bonus:5e3},{amount:5e4,price:5e4,bonus:1e4}],showAlert=(title,message,type=`info`)=>{setModalConfig({isOpen:!0,title,message,type,singleButton:!0,onConfirm:()=>setModalConfig(prev=>({...prev,isOpen:!1}))})},handleCharge=async option=>{let token=localStorage.getItem(`accessToken`);if(!token){showAlert(` `,`    .`,`info`);return}setModalConfig({isOpen:!0,title:`  `,message:`${option.price.toLocaleString()}  ${option.amount.toLocaleString()} C (+ ${option.bonus.toLocaleString()} C) ?`,type:`info`,singleButton:!1,onConfirm:async()=>{setModalConfig(prev=>({...prev,isOpen:!1}));try{let response=await fetch(`/payment/ready`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({amount:option.amount+option.bonus})});if(!response.ok)throw Error(`Payment ready failed`);let data=await response.json();localStorage.setItem(`kakaopay_tid`,data.tid);let redirectUrl=isMobile$1&&data.next_redirect_mobile_url?data.next_redirect_mobile_url:data.next_redirect_pc_url;window.location.href=redirectUrl}catch(e$4){console.error(e$4),showAlert(` `,`    .    .`,`danger`)}}})};return(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen bg-[var(--bg-primary)] pb-20 md:pb-0 animate-fade-in relative z-50`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`sticky top-0 z-50 bg-[var(--bg-header)]/80 backdrop-blur-md border-b border-[var(--border-color)] px-4 h-16 flex items-center gap-4`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(-1),className:`p-2 -ml-2 hover:bg-[var(--bg-secondary)] rounded-full transition-colors`,children:(0,import_jsx_runtime.jsx)(ArrowLeft,{className:`w-6 h-6 text-[var(--text-primary)]`})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-lg font-bold text-[var(--text-primary)]`,children:` `})]}),(0,import_jsx_runtime.jsxs)(`main`,{className:`max-w-2xl mx-auto p-4 space-y-6 pt-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-[var(--btn-bg)] rounded-2xl p-6 text-white shadow-lg relative overflow-hidden`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`relative z-10`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-2xl font-black mb-2`,children:`Credit Charge`}),(0,import_jsx_runtime.jsxs)(`p`,{className:`opacity-90`,children:[`   `,(0,import_jsx_runtime.jsx)(`br`,{}),`  !`]})]}),(0,import_jsx_runtime.jsx)(Wallet,{className:`absolute right-4 bottom-[-20px] w-32 h-32 text-white/10 rotate-[-15deg]`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid gap-3`,children:chargeOptions.map((option,index$2)=>(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>handleCharge(option),className:`bg-[var(--bg-card)] p-4 rounded-xl border border-[var(--border-color)] flex items-center justify-between hover:border-[var(--btn-bg)] transition-all group active:scale-[0.98]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-[var(--bg-secondary)] flex items-center justify-center group-hover:bg-[var(--btn-bg)]/10 transition-colors`,children:(0,import_jsx_runtime.jsx)(CreditCard,{className:`w-5 h-5 text-[var(--text-secondary)] group-hover:text-[var(--btn-bg)]`})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-left`,children:[(0,import_jsx_runtime.jsxs)(`span`,{className:`block font-bold text-lg text-[var(--text-primary)]`,children:[option.amount.toLocaleString(),` C`]}),option.bonus>0&&(0,import_jsx_runtime.jsxs)(`span`,{className:`text-xs text-green-500 font-bold`,children:[`+`,option.bonus.toLocaleString(),` Bonus`]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,import_jsx_runtime.jsxs)(`span`,{className:`font-medium text-[var(--text-secondary)]`,children:[option.price.toLocaleString(),``]}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-6 h-6 rounded-full bg-[var(--btn-bg)] flex items-center justify-center`,children:(0,import_jsx_runtime.jsx)(ArrowLeft,{className:`w-3 h-3 text-white rotate-180`})})]})]},index$2))}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-start gap-2 p-4 bg-[var(--bg-secondary)]/50 rounded-xl text-xs text-[var(--text-secondary)]`,children:[(0,import_jsx_runtime.jsx)(CircleAlert,{className:`w-4 h-4 shrink-0 mt-0.5`}),(0,import_jsx_runtime.jsx)(`p`,{children:`    .    ,   .   .`})]})]}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{...modalConfig,onCancel:()=>setModalConfig(prev=>({...prev,isOpen:!1}))})]})},ChargePage_default=ChargePage,PaymentSuccessPage=()=>{let[searchParams]=useSearchParams(),navigate=useNavigate(),{refreshCredits}=useCredits(),[loading,setLoading]=(0,import_react.useState)(!0),[error$1,setError]=(0,import_react.useState)(null),calledRef=import_react.useRef(!1);return(0,import_react.useEffect)(()=>{(async()=>{if(calledRef.current)return;calledRef.current=!0;let pg_token=searchParams.get(`pg_token`),tid=localStorage.getItem(`kakaopay_tid`);if(!pg_token||!tid){setError(`    .`),setLoading(!1);return}try{let token=localStorage.getItem(`accessToken`),response=await fetch(`/api/payment/approve`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${token}`},body:JSON.stringify({pg_token,tid})});if(response.ok)await refreshCredits(),localStorage.removeItem(`kakaopay_tid`),setLoading(!1);else if((await response.json()).error_code===-702)await refreshCredits(),localStorage.removeItem(`kakaopay_tid`),setLoading(!1);else throw Error(`Payment approval failed`)}catch(e$4){console.error(e$4),setError(`     .`),setLoading(!1)}})()},[searchParams,refreshCredits]),loading?(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen bg-[var(--bg-primary)] flex flex-col items-center justify-center p-4`,children:[(0,import_jsx_runtime.jsx)(LoaderCircle,{className:`w-12 h-12 text-[var(--btn-bg)] animate-spin mb-4`}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[var(--text-primary)] font-medium`,children:`   ...`})]}):error$1?(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen bg-[var(--bg-primary)] flex flex-col items-center justify-center p-4 text-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-6`,children:(0,import_jsx_runtime.jsx)(CircleCheckBig,{className:`w-10 h-10 text-red-500`})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-2xl font-bold text-[var(--text-primary)] mb-2`,children:` `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[var(--text-secondary)] mb-8`,children:error$1}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full max-w-xs space-y-3`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/charge`),className:`w-full py-4 bg-[var(--btn-bg)] text-white font-bold rounded-xl shadow-lg hover:brightness-110 active:scale-95 transition-all`,children:` `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/`),className:`w-full py-4 bg-[var(--bg-secondary)] text-[var(--text-primary)] font-bold rounded-xl border border-[var(--border-color)] hover:bg-[var(--bg-tertiary)] active:scale-95 transition-all`,children:` `})]})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen bg-[var(--bg-primary)] flex flex-col items-center justify-center p-4 text-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6`,children:(0,import_jsx_runtime.jsx)(CircleCheckBig,{className:`w-10 h-10 text-green-500`})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-2xl font-bold text-[var(--text-primary)] mb-2`,children:` ! `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-[var(--text-secondary)] mb-8`,children:[`   .`,(0,import_jsx_runtime.jsx)(`br`,{}),`   !`]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/`),className:`w-full max-w-xs py-4 bg-[var(--btn-bg)] text-white font-bold rounded-xl shadow-lg hover:brightness-110 active:scale-95 transition-all`,children:` `})]})},PaymentSuccessPage_default=PaymentSuccessPage,PaymentCancelPage=()=>{let navigate=useNavigate();return(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen bg-[var(--bg-primary)] flex flex-col items-center justify-center p-4 text-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mb-6`,children:(0,import_jsx_runtime.jsx)(CircleX,{className:`w-10 h-10 text-orange-500`})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-2xl font-bold text-[var(--text-primary)] mb-2`,children:` `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-[var(--text-secondary)] mb-8`,children:[` .`,(0,import_jsx_runtime.jsx)(`br`,{}),`   .`]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full max-w-xs space-y-3`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/charge`),className:`w-full py-4 bg-[var(--btn-bg)] text-white font-bold rounded-xl shadow-lg hover:brightness-110 active:scale-95 transition-all`,children:` `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/`),className:`w-full py-4 bg-[var(--bg-secondary)] text-[var(--text-primary)] font-bold rounded-xl border border-[var(--border-color)] hover:bg-[var(--bg-tertiary)] active:scale-95 transition-all`,children:` `})]})]})},PaymentCancelPage_default=PaymentCancelPage,PaymentFailPage=()=>{let navigate=useNavigate();return(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen bg-[var(--bg-primary)] flex flex-col items-center justify-center p-4 text-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-6`,children:(0,import_jsx_runtime.jsx)(TriangleAlert,{className:`w-10 h-10 text-red-500`})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-2xl font-bold text-[var(--text-primary)] mb-2`,children:` `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-[var(--text-secondary)] mb-8`,children:[`    .`,(0,import_jsx_runtime.jsx)(`br`,{}),`     .`]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full max-w-xs space-y-3`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/charge`),className:`w-full py-4 bg-[var(--btn-bg)] text-white font-bold rounded-xl shadow-lg hover:brightness-110 active:scale-95 transition-all`,children:` `}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(`/`),className:`w-full py-4 bg-[var(--bg-secondary)] text-[var(--text-primary)] font-bold rounded-xl border border-[var(--border-color)] hover:bg-[var(--bg-tertiary)] active:scale-95 transition-all`,children:` `})]})]})},PaymentFailPage_default=PaymentFailPage,GoogleLoginButton=({onSuccess,onError})=>(0,import_jsx_runtime.jsxs)(`button`,{type:`button`,onClick:()=>{if(!window.google||!window.google.accounts||!window.google.accounts.oauth2){console.error(`Google script not loaded`),onError&&onError();return}window.google.accounts.oauth2.initTokenClient({client_id:``,scope:`email profile`,callback:async tokenResponse=>{if(tokenResponse.access_token)try{let userInfo=await(await fetch(`https://www.googleapis.com/oauth2/v3/userinfo`,{headers:{Authorization:`Bearer ${tokenResponse.access_token}`}})).json();onSuccess({email:userInfo.email,providerId:userInfo.sub,provider:`GOOGLE`})}catch(error$1){console.error(`Failed to fetch user info`,error$1),onError&&onError()}else onError&&onError()}}).requestAccessToken()},className:`w-full h-12 rounded-lg border theme-border theme-bg-card theme-text-primary flex items-center justify-center gap-2 transition-all hover:brightness-95 hover:shadow-md active:scale-[0.98]`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:`https://www.svgrepo.com/show/475656/google-color.svg`,alt:`Google`,className:`w-5 h-5`}),(0,import_jsx_runtime.jsx)(`span`,{className:`font-medium`,children:`Google `})]}),GoogleLoginButton_default=GoogleLoginButton,NaverLoginButton=({onSuccess,onError})=>{let isProcessed=import_react.useRef(!1);return(0,import_react.useEffect)(()=>{let{naver}=window;if(!naver)return;let naverLogin=new naver.LoginWithNaverId({clientId:``,callbackUrl:window.location.origin+`/byeory/login`,isPopup:!1,loginButton:{color:`green`,type:3,height:48},callbackHandle:!0});naverLogin.init(),naverLogin.getLoginStatus(async status=>{if(status){if(isProcessed.current)return;isProcessed.current=!0;let user=naverLogin.user,email=user.email||user.getEmail(),id$3=user.id||user.getId();email&&id$3?(onSuccess({email,providerId:id$3,provider:`NAVER`,name:user.name,nickname:user.nickname,profileImage:user.profile_image,gender:user.gender,birthday:user.birthday,birthyear:user.birthyear,mobile:user.mobile}),localStorage.removeItem(`com.naver.nid.access_token`),localStorage.removeItem(`com.naver.nid.oauth.state_token`)):(console.error(`Naver login success but missing email or id`),onError&&onError())}})},[onSuccess,onError]),(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(`div`,{id:`naverIdLogin`,className:`hidden`}),(0,import_jsx_runtime.jsxs)(`button`,{type:`button`,onClick:()=>{let{naver}=window;if(naver&&naver.LoginWithNaverId){let loginBtn=document.getElementById(`naverIdLogin`)?.firstChild;loginBtn?loginBtn.click():console.error(`Naver login button not initialized properly`)}},className:`w-full h-12 rounded-lg border flex items-center justify-center gap-2 transition-all hover:brightness-95 hover:shadow-md active:scale-[0.98] mt-3`,style:{backgroundColor:`#03C75A`,color:`white`,borderColor:`#03C75A`},children:[(0,import_jsx_runtime.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`currentColor`,className:`w-4 h-4 text-white`,children:(0,import_jsx_runtime.jsx)(`path`,{d:`M16.273 12.845L7.376 0H0v24h7.726V11.156L16.624 24H24V0h-7.727v12.845z`})}),(0,import_jsx_runtime.jsx)(`span`,{className:`font-medium`,children:`Naver `})]})]})},NaverLoginButton_default=NaverLoginButton;function LoginPage(){let navigate=useNavigate(),location$1=useLocation(),{socialLogin,localLogin}=useAuth(),{refreshCredits}=useCredits(),[email,setEmail]=(0,import_react.useState)(``),[password,setPassword]=(0,import_react.useState)(``),[showPassword,setShowPassword]=(0,import_react.useState)(!1);return(0,import_jsx_runtime.jsx)(`div`,{className:`flex min-h-screen items-center justify-center px-4 py-12`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full max-w-md`,children:[(0,import_jsx_runtime.jsxs)(Link,{to:`/`,className:`mb-8 block text-center`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/logo.png`,alt:``,className:`mx-auto w-32 mb-4`}),(0,import_jsx_runtime.jsx)(`h1`,{className:`theme-text-primary mb-2 text-3xl font-bold`,children:``}),(0,import_jsx_runtime.jsx)(`p`,{className:`theme-text-secondary text-sm`,children:`   `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-card theme-border rounded-2xl border p-8 shadow-lg backdrop-blur-md`,children:[(0,import_jsx_runtime.jsxs)(`form`,{onSubmit:async e$4=>{e$4.preventDefault(),email&&password&&await localLogin(email,password)&&(await refreshCredits(),navigate(localStorage.getItem(`isProfileSetupCompleted`)===`true`?location$1.state?.from||`/`:`/setup-profile`))},className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{htmlFor:`email`,className:`theme-text-primary block text-sm font-medium`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative border rounded-lg`,children:[(0,import_jsx_runtime.jsx)(`input`,{id:`email`,type:`email`,value:email,onChange:e$4=>setEmail(e$4.target.value),placeholder:`example@email.com`,required:!0,className:`theme-border theme-text-primary placeholder:text-gray-400 w-full rounded-lg border bg-transparent px-4 py-3 pl-10 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all`}),(0,import_jsx_runtime.jsx)(Mail,{className:`theme-icon absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 opacity-70`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{htmlFor:`password`,className:`theme-text-primary block text-sm font-medium`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative border rounded-lg`,children:[(0,import_jsx_runtime.jsx)(`input`,{id:`password`,type:showPassword?`text`:`password`,value:password,onChange:e$4=>setPassword(e$4.target.value),placeholder:``,required:!0,className:`theme-border theme-text-primary placeholder:text-gray-400 w-full rounded-lg border bg-transparent px-4 py-3 pl-10 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all`}),(0,import_jsx_runtime.jsx)(Lock,{className:`theme-icon absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 opacity-70`}),(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:()=>setShowPassword(!showPassword),className:`theme-text-secondary hover:theme-text-primary absolute right-3 top-1/2 -translate-y-1/2 transition-colors`,children:showPassword?(0,import_jsx_runtime.jsx)(EyeOff,{className:`w-5 h-5`}):(0,import_jsx_runtime.jsx)(Eye,{className:`w-5 h-5`})})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,import_jsx_runtime.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,className:`accent-blue-500 h-4 w-4 rounded`}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-secondary text-sm`,children:` `})]}),(0,import_jsx_runtime.jsx)(Link,{to:`/find-password`,className:`theme-text-primary hover:underline text-sm transition-colors`,children:` `})]}),(0,import_jsx_runtime.jsx)(`button`,{type:`submit`,className:`theme-btn w-full rounded-lg h-12 font-semibold shadow-lg`,children:``})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`my-6 flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`theme-border flex-1 border-t`}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-secondary text-sm`,children:``}),(0,import_jsx_runtime.jsx)(`div`,{className:`theme-border flex-1 border-t`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(GoogleLoginButton_default,{onSuccess:async credential=>{await socialLogin(credential)?(await refreshCredits(),navigate(localStorage.getItem(`isProfileSetupCompleted`)===`true`?location$1.state?.from||`/`:`/setup-profile`)):alert(`Social Login Failed`)},onError:()=>console.error(`Google Login Failed`)}),(0,import_jsx_runtime.jsx)(NaverLoginButton_default,{onSuccess:async credential=>{await socialLogin(credential)?(await refreshCredits(),navigate(localStorage.getItem(`isProfileSetupCompleted`)===`true`?location$1.state?.from||`/`:`/setup-profile`)):alert(`Naver Login Failed`)},onError:()=>console.error(`Naver Login Failed`)})]}),(0,import_jsx_runtime.jsxs)(`p`,{className:`theme-text-secondary mt-6 text-center text-sm w-full flex justify-center gap-2`,children:[` ?`,` `,(0,import_jsx_runtime.jsx)(Link,{to:`/join`,className:`theme-text-primary font-medium hover:underline transition-colors`,children:``})]})]})]})})}var LoginPage_default=LoginPage;function JoinPage(){let navigate=useNavigate(),{socialLogin,signup}=useAuth(),[email,setEmail]=(0,import_react.useState)(``),[password,setPassword]=(0,import_react.useState)(``),[passwordConfirm,setPasswordConfirm]=(0,import_react.useState)(``),[showPassword,setShowPassword]=(0,import_react.useState)(!1),[showPasswordConfirm,setShowPasswordConfirm]=(0,import_react.useState)(!1),[verificationCode,setVerificationCode]=(0,import_react.useState)(``),[isCodeSent,setIsCodeSent]=(0,import_react.useState)(!1),[isVerified,setIsVerified]=(0,import_react.useState)(!1),[isSending,setIsSending]=(0,import_react.useState)(!1);return(0,import_jsx_runtime.jsx)(`div`,{className:`flex min-h-screen items-center justify-center px-4 py-12`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full max-w-md`,children:[(0,import_jsx_runtime.jsxs)(Link,{to:`/`,className:`mb-8 block text-center`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/logo.png`,alt:``,className:`mx-auto w-32 mb-4`}),(0,import_jsx_runtime.jsx)(`h1`,{className:`theme-text-primary mb-2 text-3xl font-bold`,children:``}),(0,import_jsx_runtime.jsx)(`p`,{className:`theme-text-secondary text-sm`,children:`   `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-card theme-border rounded-2xl border p-8 shadow-lg backdrop-blur-md`,children:[(0,import_jsx_runtime.jsxs)(`form`,{onSubmit:async e$4=>{if(e$4.preventDefault(),password!==passwordConfirm){alert(`  .`);return}if(!isVerified){alert(`  .`);return}await signup(email,password)&&(alert(` .`),navigate(`/login`))},className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{htmlFor:`email`,className:`theme-text-primary block text-sm font-medium`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`relative border rounded-lg flex-1`,children:[(0,import_jsx_runtime.jsx)(`input`,{id:`email`,type:`email`,value:email,onChange:e$4=>{setEmail(e$4.target.value),setIsVerified(!1),setIsCodeSent(!1)},placeholder:`example@email.com`,required:!0,className:`theme-border theme-text-primary placeholder:text-gray-400 w-full rounded-lg border bg-transparent px-4 py-3 pl-10 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all`}),(0,import_jsx_runtime.jsx)(Mail,{className:`theme-icon absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 opacity-70`})]}),(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:async()=>{if(!email){alert(` .`);return}setIsSending(!0);try{let res=await fetch(`/auth/email/send`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({email})});if(res.ok){let code=await res.text();console.log(`Validation Sent:`,code),setIsCodeSent(!0),setIsVerified(!1),alert(` .  .`)}else alert(`  .  .`)}catch(error$1){console.error(`Email send error:`,error$1),alert(`    .`)}finally{setIsSending(!1)}},disabled:isVerified||isSending,className:`p-4 rounded-lg font-medium transition-all flex items-center justify-center aspect-square ${isVerified?`bg-green-500/10 text-green-500 cursor-default`:isCodeSent?`theme-btn bg-green-500 border-green-500 hover:bg-green-600`:`theme-btn`}`,title:isVerified?` `:isCodeSent?``:` `,children:isSending?(0,import_jsx_runtime.jsx)(LoaderCircle,{className:`w-5 h-5 animate-spin`}):isVerified?(0,import_jsx_runtime.jsx)(CircleCheckBig,{className:`w-5 h-5`}):isCodeSent?(0,import_jsx_runtime.jsx)(Check,{className:`w-5 h-5`}):(0,import_jsx_runtime.jsx)(Send,{className:`w-5 h-5`})})]})]}),isCodeSent&&!isVerified&&(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2 animate-in fade-in slide-in-from-top-2 duration-300`,children:[(0,import_jsx_runtime.jsx)(`label`,{htmlFor:`verificationCode`,className:`theme-text-primary block text-sm font-medium`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`relative border rounded-lg flex-1`,children:(0,import_jsx_runtime.jsx)(`input`,{id:`verificationCode`,type:`text`,value:verificationCode,onChange:e$4=>setVerificationCode(e$4.target.value),placeholder:` 6`,className:`theme-border theme-text-primary placeholder:text-gray-400 w-full rounded-lg border bg-transparent px-4 py-3 pl-4 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all`})}),(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:async()=>{if(!verificationCode){alert(` .`);return}try{await(await fetch(`/auth/email/check`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({email,authNum:verificationCode})})).text()===`true`?(setIsVerified(!0),alert(`  .`)):(alert(`  .`),setIsVerified(!1))}catch(error$1){console.error(`Verification error:`,error$1),alert(`    .`)}},className:`theme-btn px-4 py-2 rounded-lg font-medium whitespace-nowrap`,children:``})]})]}),isVerified&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 text-green-500 text-sm animate-in fade-in duration-300`,children:[(0,import_jsx_runtime.jsx)(CircleCheckBig,{className:`w-4 h-4`}),(0,import_jsx_runtime.jsx)(`span`,{children:`  .`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{htmlFor:`password`,className:`theme-text-primary block text-sm font-medium`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative border rounded-lg`,children:[(0,import_jsx_runtime.jsx)(`input`,{id:`password`,type:showPassword?`text`:`password`,value:password,onChange:e$4=>setPassword(e$4.target.value),placeholder:``,required:!0,className:`theme-border theme-text-primary placeholder:text-gray-400 w-full rounded-lg border bg-transparent px-4 py-3 pl-10 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all`}),(0,import_jsx_runtime.jsx)(Lock,{className:`theme-icon absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 opacity-70`}),(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:()=>setShowPassword(!showPassword),className:`theme-text-secondary hover:theme-text-primary absolute right-3 top-1/2 -translate-y-1/2 transition-colors`,children:showPassword?(0,import_jsx_runtime.jsx)(EyeOff,{className:`w-5 h-5`}):(0,import_jsx_runtime.jsx)(Eye,{className:`w-5 h-5`})})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{htmlFor:`passwordConfirm`,className:`theme-text-primary block text-sm font-medium`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative border rounded-lg`,children:[(0,import_jsx_runtime.jsx)(`input`,{id:`passwordConfirm`,type:showPasswordConfirm?`text`:`password`,value:passwordConfirm,onChange:e$4=>setPasswordConfirm(e$4.target.value),placeholder:``,required:!0,className:`theme-border theme-text-primary placeholder:text-gray-400 w-full rounded-lg border bg-transparent px-4 py-3 pl-10 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all`}),(0,import_jsx_runtime.jsx)(Lock,{className:`theme-icon absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 opacity-70`}),(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:()=>setShowPasswordConfirm(!showPasswordConfirm),className:`theme-text-secondary hover:theme-text-primary absolute right-3 top-1/2 -translate-y-1/2 transition-colors`,children:showPasswordConfirm?(0,import_jsx_runtime.jsx)(EyeOff,{className:`w-5 h-5`}):(0,import_jsx_runtime.jsx)(Eye,{className:`w-5 h-5`})})]})]}),(0,import_jsx_runtime.jsx)(`button`,{type:`submit`,disabled:!isVerified,className:`w-full rounded-lg h-12 font-semibold shadow-lg transition-all ${isVerified?`theme-btn`:`bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400`}`,children:``})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`my-6 flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`theme-border flex-1 border-t`}),(0,import_jsx_runtime.jsx)(`span`,{className:`theme-text-secondary text-sm`,children:``}),(0,import_jsx_runtime.jsx)(`div`,{className:`theme-border flex-1 border-t`})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-3`,children:[(0,import_jsx_runtime.jsx)(GoogleLoginButton_default,{onSuccess:async credential=>{await socialLogin(credential)?navigate(`/`):alert(`   .`)},onError:()=>console.error(`   .`)}),(0,import_jsx_runtime.jsx)(NaverLoginButton_default,{onSuccess:async credential=>{await socialLogin(credential)?navigate(`/`):alert(`   .`)},onError:()=>console.error(`   .`)})]}),(0,import_jsx_runtime.jsxs)(`p`,{className:`theme-text-secondary mt-6 text-center text-sm w-full flex justify-center gap-2`,children:[`  ?`,` `,(0,import_jsx_runtime.jsx)(Link,{to:`/login`,className:`theme-text-primary font-medium hover:underline transition-colors`,children:``})]})]})]})})}var JoinPage_default=JoinPage;function FindPasswordPage(){let[step,setStep]=(0,import_react.useState)(`email`),[isLoading,setIsLoading]=(0,import_react.useState)(!1),[email,setEmail]=(0,import_react.useState)(``),[code,setCode]=(0,import_react.useState)(``),[password,setPassword]=(0,import_react.useState)(``),[confirmPassword,setConfirmPassword]=(0,import_react.useState)(``),[resetToken,setResetToken]=(0,import_react.useState)(``),[showPassword,setShowPassword]=(0,import_react.useState)(!1),[timer$1,setTimer]=(0,import_react.useState)(180);(0,import_react.useEffect)(()=>{let interval$1;return step===`verify`&&timer$1>0&&(interval$1=setInterval(()=>{setTimer(prev=>prev-1)},1e3)),()=>clearInterval(interval$1)},[step,timer$1]);let formatTime=seconds=>{let mins=Math.floor(seconds/60),secs=seconds%60;return`${mins}:${secs<10?`0`:``}${secs}`},handleSendCode=async e$4=>{e$4.preventDefault(),setIsLoading(!0);try{let response=await fetch(`/auth/password-reset/request`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({email})}),data=await response.json().catch(()=>({}));response.ok?(setStep(`verify`),setTimer(180)):response.status===404?alert(`  .`):response.status===400&&data.code===`SOCIAL_ACCOUNT`?alert(`Google    .
Google  .`):alert(data.message||`  .`)}catch(error$1){console.error(`Email send error:`,error$1),alert(`    .`)}finally{setIsLoading(!1)}};return(0,import_jsx_runtime.jsx)(`div`,{className:`flex min-h-screen items-center justify-center px-4 py-12`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full max-w-md`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`mb-8 text-center`,children:[(0,import_jsx_runtime.jsx)(Link,{to:`/login`,className:`mb-4 inline-block`,children:(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/logo.png`,alt:``,className:`mx-auto w-32`})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`theme-text-primary mb-2 text-2xl font-bold`,children:` `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`theme-text-secondary text-sm`,children:[step===`email`&&`    .`,step===`verify`&&`   .`,step===`reset`&&`  .`,step===`complete`&&`  .`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`theme-bg-card theme-border rounded-2xl border p-8 shadow-lg backdrop-blur-md relative overflow-hidden`,children:[step===`email`&&(0,import_jsx_runtime.jsxs)(`form`,{onSubmit:handleSendCode,className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`theme-text-primary block text-sm font-medium`,children:``}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative border rounded-lg`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`email`,value:email,onChange:e$4=>setEmail(e$4.target.value),placeholder:`example@email.com`,required:!0,className:`theme-border theme-text-primary placeholder:text-gray-400 w-full rounded-lg border bg-transparent px-4 py-3 pl-10 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all`}),(0,import_jsx_runtime.jsx)(Mail,{className:`theme-icon absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 opacity-70`})]})]}),(0,import_jsx_runtime.jsxs)(`button`,{type:`submit`,disabled:isLoading,className:`theme-btn w-full rounded-lg py-3 font-semibold shadow-lg flex items-center justify-center gap-2`,children:[isLoading?` ...`:` `,!isLoading&&(0,import_jsx_runtime.jsx)(ArrowRight,{className:`w-4 h-4`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`mt-6 text-center`,children:(0,import_jsx_runtime.jsxs)(Link,{to:`/login`,className:`theme-text-secondary hover:theme-text-primary text-sm inline-flex items-center gap-2 transition-colors`,children:[(0,import_jsx_runtime.jsx)(ArrowLeft,{className:`w-4 h-4`}),` `]})})]}),step===`verify`&&(0,import_jsx_runtime.jsxs)(`form`,{onSubmit:async e$4=>{e$4.preventDefault(),setIsLoading(!0);try{let response=await fetch(`/auth/password-reset/verify`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({email,code})}),data=await response.json().catch(()=>({}));response.ok?(data.resetToken&&setResetToken(data.resetToken),setStep(`reset`)):alert(data.message||`  .`)}catch(error$1){console.error(`Verification error:`,error$1),alert(`    .`)}finally{setIsLoading(!1)}},className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`theme-text-primary block text-sm font-medium`,children:``}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-red-500 text-sm font-medium`,children:formatTime(timer$1)})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative border rounded-lg`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:`text`,value:code,onChange:e$4=>setCode(e$4.target.value),placeholder:`6 `,maxLength:6,required:!0,className:`theme-border theme-text-primary placeholder:text-gray-400 w-full rounded-lg border bg-transparent px-4 py-3 pl-10 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all tracking-widest`}),(0,import_jsx_runtime.jsx)(CircleCheckBig,{className:`theme-icon absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 opacity-70`})]}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-xs theme-text-secondary mt-1`,children:[`  ?`,` `,(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:()=>{setTimer(180),handleSendCode({preventDefault:()=>{}})},className:`theme-text-primary underline hover:opacity-80`,children:``})]})]}),(0,import_jsx_runtime.jsx)(`button`,{type:`submit`,disabled:isLoading,className:`theme-btn w-full rounded-lg py-3 font-semibold shadow-lg flex items-center justify-center gap-2`,children:isLoading?` ...`:``})]}),step===`reset`&&(0,import_jsx_runtime.jsxs)(`form`,{onSubmit:async e$4=>{if(e$4.preventDefault(),password!==confirmPassword){alert(`  .`);return}setIsLoading(!0);try{let response=await fetch(`/auth/password-reset/confirm`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({email,password,resetToken})});if(response.ok)setStep(`complete`);else{let data=await response.json().catch(()=>({}));alert(data.message||`  .`)}}catch(error$1){console.error(`Password reset error:`,error$1),alert(`    .`)}finally{setIsLoading(!1)}},className:`space-y-6`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`theme-text-primary block text-sm font-medium`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative border rounded-lg`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:showPassword?`text`:`password`,value:password,onChange:e$4=>setPassword(e$4.target.value),placeholder:``,required:!0,className:`theme-border theme-text-primary placeholder:text-gray-400 w-full rounded-lg border bg-transparent px-4 py-3 pl-10 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all`}),(0,import_jsx_runtime.jsx)(Lock,{className:`theme-icon absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 opacity-70`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`label`,{className:`theme-text-primary block text-sm font-medium`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative border rounded-lg`,children:[(0,import_jsx_runtime.jsx)(`input`,{type:showPassword?`text`:`password`,value:confirmPassword,onChange:e$4=>setConfirmPassword(e$4.target.value),placeholder:``,required:!0,className:`theme-border theme-text-primary placeholder:text-gray-400 w-full rounded-lg border bg-transparent px-4 py-3 pl-10 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all`}),(0,import_jsx_runtime.jsx)(Lock,{className:`theme-icon absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 opacity-70`}),(0,import_jsx_runtime.jsx)(`button`,{type:`button`,onClick:()=>setShowPassword(!showPassword),className:`theme-text-secondary hover:theme-text-primary absolute right-3 top-1/2 -translate-y-1/2 transition-colors`,children:showPassword?(0,import_jsx_runtime.jsx)(EyeOff,{className:`w-5 h-5`}):(0,import_jsx_runtime.jsx)(Eye,{className:`w-5 h-5`})})]})]}),(0,import_jsx_runtime.jsx)(`button`,{type:`submit`,disabled:isLoading,className:`theme-btn w-full rounded-lg py-3 font-semibold shadow-lg`,children:isLoading?` ...`:` `})]}),step===`complete`&&(0,import_jsx_runtime.jsxs)(`div`,{className:`text-center py-6`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`mx-auto w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-4`,children:(0,import_jsx_runtime.jsx)(CircleCheckBig,{className:`w-8 h-8 text-green-600 dark:text-green-400`})}),(0,import_jsx_runtime.jsx)(`h3`,{className:`theme-text-primary text-lg font-bold mb-2`,children:` !`}),(0,import_jsx_runtime.jsxs)(`p`,{className:`theme-text-secondary text-sm mb-6`,children:[`  .`,(0,import_jsx_runtime.jsx)(`br`,{}),`  .`]}),(0,import_jsx_runtime.jsx)(Link,{to:`/login`,className:`theme-btn w-full rounded-lg py-3 font-semibold shadow-lg block`,children:` `})]})]})]})})}var FindPasswordPage_default=FindPasswordPage,ProtectedRoute=()=>localStorage.getItem(`accessToken`)?(0,import_jsx_runtime.jsx)(Outlet,{}):(0,import_jsx_runtime.jsx)(Navigate,{to:`/login`,replace:!0}),ProtectedRoute_default=ProtectedRoute,WelcomePage=()=>{let navigate=useNavigate(),handleStart=()=>{navigate(`/login`)},scrollToFeatures=()=>{document.getElementById(`features`)?.scrollIntoView({behavior:`smooth`})},elementsRef=(0,import_react.useRef)([]);(0,import_react.useEffect)(()=>{let observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{entry.isIntersecting&&(entry.target.classList.add(`opacity-100`,`translate-y-0`),entry.target.classList.remove(`opacity-0`,`translate-y-10`))})},{threshold:.1});return elementsRef.current.forEach(el=>el&&observer.observe(el)),()=>observer.disconnect()},[]);let addToRefs=el=>{el&&!elementsRef.current.includes(el)&&elementsRef.current.push(el)};return(0,import_jsx_runtime.jsxs)(`div`,{className:`h-screen overflow-y-auto bg-slate-50 dark:bg-slate-900 transition-colors duration-500 font-sans show-scrollbar`,children:[(0,import_jsx_runtime.jsxs)(`section`,{className:`min-h-screen flex items-center justify-center px-4 relative overflow-hidden`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute top-0 left-1/2 -translate-x-1/2 w-full h-full max-w-7xl pointer-events-none opacity-30 dark:opacity-10`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-20 left-10 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl animate-blob`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-20 right-10 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl animate-blob animation-delay-2000`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute bottom-20 left-1/3 w-72 h-72 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl animate-blob animation-delay-4000`})]}),(0,import_jsx_runtime.jsxs)(`div`,{ref:addToRefs,className:`max-w-7xl mx-auto text-center relative z-10 opacity-0 translate-y-10 transition-all duration-1000`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`inline-block mb-8 animate-fade-in-up`,children:(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/logo.png`,alt:`Byeory`,className:`w-40 md:w-56 mx-auto drop-shadow-2xl`})}),(0,import_jsx_runtime.jsxs)(`h1`,{className:`text-5xl md:text-7xl font-extrabold text-slate-900 dark:text-white mb-8 tracking-tight animate-fade-in-up animation-delay-100`,children:[` , `,(0,import_jsx_runtime.jsx)(`span`,{className:`text-blue-600 dark:text-blue-400`,children:``})]}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-xl md:text-2xl text-slate-600 dark:text-slate-300 max-w-3xl mx-auto mb-12 animate-fade-in-up animation-delay-200 leading-relaxed font-medium`,children:[`   ,   .`,(0,import_jsx_runtime.jsx)(`br`,{className:`hidden md:block`}),`    .`]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-center justify-center gap-6 animate-fade-in-up animation-delay-300`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:handleStart,className:`px-10 py-5 rounded-2xl bg-blue-600 hover:bg-blue-700 text-white font-bold text-xl shadow-xl shadow-blue-500/20 hover:shadow-blue-500/40 hover:-translate-y-1 transition-all flex items-center gap-2 group w-full sm:w-auto justify-center`,children:[``,(0,import_jsx_runtime.jsx)(ArrowRight,{className:`w-6 h-6 group-hover:translate-x-1 transition-transform`})]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:scrollToFeatures,className:`px-10 py-5 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 font-bold text-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-all w-full sm:w-auto`,children:` `})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce cursor-pointer`,onClick:scrollToFeatures,children:(0,import_jsx_runtime.jsx)(ChevronDown,{className:`w-8 h-8 text-slate-400`})})]}),(0,import_jsx_runtime.jsx)(`section`,{id:`features`,className:`py-20 bg-white dark:bg-slate-900`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`,children:[(0,import_jsx_runtime.jsxs)(`div`,{ref:addToRefs,className:`text-center mb-16 opacity-0 translate-y-10 transition-all duration-700`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-3xl font-bold text-slate-900 dark:text-white mb-4`,children:` `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-slate-600 dark:text-slate-400`,children:`    `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12`,children:[(0,import_jsx_runtime.jsxs)(`div`,{ref:addToRefs,className:`text-center group hover:-translate-y-2 transition-transform duration-300 opacity-0 translate-y-10 transition-all duration-700 delay-100`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-20 h-20 mx-auto bg-blue-100 dark:bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-blue-200 dark:group-hover:shadow-blue-900/20 transition-all`,children:(0,import_jsx_runtime.jsx)(PenTool,{className:`w-10 h-10 text-blue-600 dark:text-blue-400`})}),(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xl font-bold text-slate-900 dark:text-white mb-3`,children:`1. `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-slate-600 dark:text-slate-400 leading-relaxed`,children:[`  ,  `,(0,import_jsx_runtime.jsx)(`br`,{}),` .`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{ref:addToRefs,className:`text-center group hover:-translate-y-2 transition-transform duration-300 opacity-0 translate-y-10 transition-all duration-700 delay-200`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-20 h-20 mx-auto bg-purple-100 dark:bg-purple-900/30 rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-purple-200 dark:group-hover:shadow-purple-900/20 transition-all`,children:(0,import_jsx_runtime.jsx)(Palette,{className:`w-10 h-10 text-purple-600 dark:text-purple-400`})}),(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xl font-bold text-slate-900 dark:text-white mb-3`,children:`2. `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-slate-600 dark:text-slate-400 leading-relaxed`,children:[`  `,(0,import_jsx_runtime.jsx)(`br`,{}),`   .`]})]}),(0,import_jsx_runtime.jsxs)(`div`,{ref:addToRefs,className:`text-center group hover:-translate-y-2 transition-transform duration-300 opacity-0 translate-y-10 transition-all duration-700 delay-300`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-20 h-20 mx-auto bg-pink-100 dark:bg-pink-900/30 rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-pink-200 dark:group-hover:shadow-pink-900/20 transition-all`,children:(0,import_jsx_runtime.jsx)(MessageCircle,{className:`w-10 h-10 text-pink-600 dark:text-pink-400`})}),(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xl font-bold text-slate-900 dark:text-white mb-3`,children:`3. `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-slate-600 dark:text-slate-400 leading-relaxed`,children:[`  `,(0,import_jsx_runtime.jsx)(`br`,{}),`  .`]})]})]})]})}),(0,import_jsx_runtime.jsx)(`section`,{className:`py-24 bg-slate-50 dark:bg-slate-800/50`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-2 gap-12 items-center`,children:[(0,import_jsx_runtime.jsxs)(`div`,{ref:addToRefs,className:`order-2 lg:order-1 space-y-8 opacity-0 translate-y-10 transition-all duration-700`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-4 items-start`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg`,children:(0,import_jsx_runtime.jsx)(PanelsTopLeft,{className:`w-6 h-6 text-blue-600 dark:text-blue-400`})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xl font-bold text-slate-900 dark:text-white mb-2`,children:`  `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-slate-600 dark:text-slate-400`,children:`   UI    .     .`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-4 items-start`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg`,children:(0,import_jsx_runtime.jsx)(Share2,{className:`w-6 h-6 text-purple-600 dark:text-purple-400`})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xl font-bold text-slate-900 dark:text-white mb-2`,children:`  & `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-slate-600 dark:text-slate-400`,children:`   ,       .`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-4 items-start`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-3 bg-green-100 dark:bg-green-900/30 rounded-lg`,children:(0,import_jsx_runtime.jsx)(Shield,{className:`w-6 h-6 text-green-600 dark:text-green-400`})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xl font-bold text-slate-900 dark:text-white mb-2`,children:`  `}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-slate-600 dark:text-slate-400`,children:`    .    .`})]})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{ref:addToRefs,className:`order-1 lg:order-2 relative opacity-0 translate-y-10 transition-all duration-700 delay-200`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`relative rounded-2xl shadow-2xl bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 p-2 transform rotate-2 hover:rotate-0 transition-transform duration-500`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`h-64 sm:h-80 bg-slate-100 dark:bg-slate-800 rounded-xl overflow-hidden flex flex-col`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`h-8 border-b border-slate-200 dark:border-slate-700 flex items-center px-4 gap-2`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-red-400`}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-amber-400`}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-3 h-3 rounded-full bg-green-400`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 p-6 flex items-center justify-center`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`text-center space-y-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900/30 mx-auto flex items-center justify-center`,children:(0,import_jsx_runtime.jsx)(PenTool,{className:`w-8 h-8 text-blue-500`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-slate-400 font-medium`,children:`  `})]})})]})}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute -bottom-6 -left-6 p-4 rounded-xl bg-white dark:bg-slate-800 shadow-xl border border-slate-100 dark:border-slate-700 animate-bounce-slow`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`p-2 bg-pink-100 dark:bg-pink-900/30 rounded-lg`,children:(0,import_jsx_runtime.jsx)(Heart,{className:`w-5 h-5 text-pink-500`,fill:`currentColor`})}),(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`div`,{className:`text-xs text-slate-500 dark:text-slate-400`,children:` `}),(0,import_jsx_runtime.jsx)(`div`,{className:`font-bold text-slate-900 dark:text-white`,children:` 100%`})]})]})})]})]})})}),(0,import_jsx_runtime.jsx)(`section`,{className:`py-20 bg-slate-50 dark:bg-slate-800/30`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-3xl mx-auto px-4 sm:px-6 lg:px-8`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-3xl font-bold text-center text-slate-900 dark:text-white mb-10`,children:`  `}),(0,import_jsx_runtime.jsx)(`div`,{className:`space-y-4`,children:[{q:` ?`,a:`,        .`},{q:`  ?`,a:` >       ,        .`},{q:`     ?`,a:`.    ,      .`}].map((item,idx)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`bg-white dark:bg-slate-800 rounded-xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 opacity-0 translate-y-10 transition-all duration-700`,ref:addToRefs,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`flex items-center gap-2 font-bold text-lg text-slate-900 dark:text-white mb-2`,children:[(0,import_jsx_runtime.jsx)(CircleQuestionMark,{className:`w-5 h-5 text-blue-500`}),item.q]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-slate-600 dark:text-slate-400 pl-7`,children:item.a})]},idx))})]})}),(0,import_jsx_runtime.jsx)(`footer`,{className:`bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800 pt-20 pb-10`,children:(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-3xl font-bold text-slate-900 dark:text-white mb-6`,children:`   `}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-slate-600 dark:text-slate-400 mb-8 max-w-xl mx-auto`,children:[`     .`,(0,import_jsx_runtime.jsx)(`br`,{}),`    .`]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleStart,className:`px-10 py-4 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-bold text-lg shadow-xl shadow-blue-500/20 hover:shadow-blue-500/40 hover:-translate-y-1 transition-all mb-20`,children:` `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`border-t border-slate-100 dark:border-slate-800 pt-10 flex flex-col md:relative md:flex-row items-center justify-center gap-6`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`md:absolute md:left-0 flex items-center gap-2`,children:(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/logo.png`,alt:`Byeory`,className:`w-20 md:w-28 grayscale opacity-80`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`text-sm text-slate-400`,children:` 2025 Byeory. All rights reserved.`})]})]})})]})},WelcomePage_default=WelcomePage,MoodChart=({moods})=>{let accumulatedPercent=0,radius=16,circumference=2*Math.PI*16,colors=[`#4ADE80`,`#FACC15`,`#F87171`,`#60A5FA`,`#A78BFA`];return(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 justify-center`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`relative w-48 h-48`,children:[(0,import_jsx_runtime.jsx)(`svg`,{viewBox:`0 0 40 40`,className:`w-full h-full transform -rotate-90`,children:moods.map((mood,idx)=>{let strokeDasharray=`${mood.percentage/100*circumference} ${circumference}`,strokeDashoffset=-(accumulatedPercent/100*circumference);return accumulatedPercent+=mood.percentage,(0,import_jsx_runtime.jsx)(`circle`,{cx:`20`,cy:`20`,r:16,fill:`transparent`,stroke:colors[idx%colors.length],strokeWidth:`5`,strokeDasharray,strokeDashoffset,className:`transition-all duration-1000 ease-out`},idx)})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute inset-0 flex flex-col items-center justify-center text-center`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-3xl animate-bounce`,children:moods[0]?.emoji}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-bold theme-text-secondary mt-1`,children:` `})]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-2 gap-3 w-full max-w-xs`,children:moods.map((mood,idx)=>(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 p-2 rounded-lg theme-bg-card-secondary border theme-border`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:colors[idx%colors.length]}}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-lg`,children:mood.emoji}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-sm font-semibold theme-text-primary`,children:mood.mood}),(0,import_jsx_runtime.jsxs)(`span`,{className:`text-xs theme-text-secondary`,children:[mood.percentage,`%`]})]})]},idx))})]})},WordMindMap=({words})=>{let maxVal=Math.max(...words.map(w$1=>w$1.value)),minVal=Math.min(...words.map(w$1=>w$1.value)),getSize$1=val=>1+(val-minVal)/(maxVal-minVal||1)*2,textColors=[`text-blue-500`,`text-pink-500`,`text-purple-500`,`text-green-500`,`text-indigo-500`];return(0,import_jsx_runtime.jsx)(`div`,{className:`p-6 theme-bg-card rounded-3xl shadow-sm border theme-border min-h-[200px] flex flex-wrap items-center justify-center gap-x-6 gap-y-2 content-center`,children:words.map((word,idx)=>(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold transition-all duration-500 hover:scale-110 cursor-default ${textColors[idx%textColors.length]}`,style:{fontSize:`${getSize$1(word.value)}rem`,opacity:.7+word.value/maxVal*.3},children:word.text},idx))})};function AnalysisPage(){let[data,setData]=(0,import_react.useState)(null),[loading,setLoading]=(0,import_react.useState)(!0),[analyzing,setAnalyzing]=(0,import_react.useState)(!1),[filterMode,setFilterMode]=(0,import_react.useState)(`ALL`),[selectedDate,setSelectedDate]=(0,import_react.useState)(new Date().toISOString().slice(0,7)),[confirmModal,setConfirmModal]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}}),closeConfirmModal=()=>{setConfirmModal(prev=>({...prev,isOpen:!1}))},fetchPersona=async()=>{let token=localStorage.getItem(`accessToken`);if(token)try{let response=await fetch(`/api/persona`,{headers:{Authorization:`Bearer ${token}`}});if(response.ok&&response.status!==204)try{let text=await response.text();if(!text){setData(null);return}let json=JSON.parse(text);if(Array.isArray(json)&&json.length===0){setData(null);return}if(typeof json.analysisResult==`string`)try{setData(JSON.parse(json.analysisResult))}catch{console.warn(`Legacy data format`),setData(null)}else setData(json)}catch(e$4){console.error(`Data parsing error:`,e$4),setData(null)}else setData(null)}catch(e$4){console.error(e$4)}finally{setLoading(!1)}};return(0,import_react.useEffect)(()=>{fetchPersona()},[]),loading?(0,import_jsx_runtime.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,children:`Loading...`}):(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen pb-20 theme-bg animate-fade-in relative`,children:[(0,import_jsx_runtime.jsx)(Navigation_default,{}),(0,import_jsx_runtime.jsxs)(`main`,{className:`w-full max-w-3xl mx-auto px-4 py-8 pt-20 space-y-8`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col md:flex-row md:items-center justify-between gap-4`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h1`,{className:`text-2xl font-bold theme-text-primary`,children:`AI Analysis`}),(0,import_jsx_runtime.jsx)(`p`,{className:`theme-text-secondary text-sm`,children:`    `})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 theme-bg-card p-1 rounded-xl shadow-sm border theme-border`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setFilterMode(`ALL`),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${filterMode===`ALL`?`theme-btn`:`theme-text-secondary hover:theme-bg-card-secondary`}`,children:`All Posts`}),(0,import_jsx_runtime.jsx)(`div`,{className:`h-4 w-[1px] theme-border`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center relative`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:()=>setFilterMode(`MONTH`),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-1 ${filterMode===`MONTH`?`theme-btn`:`theme-text-secondary hover:theme-bg-card-secondary`}`,children:[(0,import_jsx_runtime.jsx)(Calendar,{className:`w-3 h-3`}),(0,import_jsx_runtime.jsx)(`span`,{children:`Monthly`})]}),filterMode===`MONTH`&&(0,import_jsx_runtime.jsx)(`input`,{type:`month`,value:selectedDate,onChange:e$4=>setSelectedDate(e$4.target.value),className:`absolute inset-0 opacity-0 cursor-pointer`})]})]})]}),data?(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsxs)(`section`,{className:`theme-bg-card rounded-3xl p-6 md:p-8 shadow-sm border theme-border relative overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-0 right-0 w-32 h-32 bg-yellow-100 rounded-full blur-3xl opacity-50 -mr-10 -mt-10`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative z-10 flex flex-col items-center text-center space-y-6`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-20 h-20 rounded-full bg-gradient-to-tr from-purple-400 to-pink-400 p-1`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full rounded-full theme-bg-card flex items-center justify-center text-4xl`,children:data.representativeEmoji||``})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`space-y-2`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-sm font-bold text-orange-500 tracking-wide uppercase`,children:`  ?`}),(data.digitalSelf||[]).map((sent,idx)=>(0,import_jsx_runtime.jsx)(`p`,{className:`theme-text-primary font-medium leading-relaxed`,children:sent},idx))]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex flex-wrap justify-center gap-2 pt-2`,children:(data.characteristics||[]).map((char,idx)=>(0,import_jsx_runtime.jsx)(`span`,{className:`px-4 py-1.5 rounded-full bg-orange-50 text-orange-700 text-sm font-semibold border border-orange-100`,children:char},idx))})]})]}),(0,import_jsx_runtime.jsxs)(`section`,{className:`theme-bg-card rounded-3xl p-6 shadow-sm border theme-border`,children:[(0,import_jsx_runtime.jsxs)(`h3`,{className:`font-bold theme-text-primary mb-6 flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`w-2 h-6 bg-green-400 rounded-full`}),`Mood Analytics`]}),(0,import_jsx_runtime.jsx)(`div`,{className:`theme-bg-card-secondary rounded-2xl p-6`,children:(0,import_jsx_runtime.jsx)(MoodChart,{moods:data.moods||[]})}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-center theme-text-secondary text-sm mt-4`,children:[filterMode===`MONTH`?` `:` `,`     `,` `,(0,import_jsx_runtime.jsx)(`strong`,{className:`theme-text-primary`,children:data.moods?.[0]?.mood||``}),` `,`.`]})]}),(0,import_jsx_runtime.jsxs)(`section`,{children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`font-bold theme-text-primary mb-4 px-2`,children:`Word Mind Map`}),(0,import_jsx_runtime.jsx)(WordMindMap,{words:data.wordCloud||[]})]})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`py-20 text-center space-y-4`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-20 h-20 theme-bg-card-secondary rounded-full flex items-center justify-center mx-auto text-3xl`,children:``}),(0,import_jsx_runtime.jsxs)(`p`,{className:`theme-text-secondary`,children:[`   .`,(0,import_jsx_runtime.jsx)(`br`,{}),`   !`]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`sticky bottom-8 flex justify-center z-20`,children:(0,import_jsx_runtime.jsxs)(`button`,{onClick:async()=>{let token=localStorage.getItem(`accessToken`);setAnalyzing(!0);let url=`/api/persona/analyze`;if(filterMode===`MONTH`){let[y$2,m$3]=selectedDate.split(`-`);url+=`?year=${y$2}&month=${m$3}`}try{let savedTags=localStorage.getItem(`excludedTags`),excludedTags=savedTags?JSON.parse(savedTags):[];(await fetch(url,{method:`POST`,headers:{Authorization:`Bearer ${token}`,"Content-Type":`application/json`},body:JSON.stringify({excludedTags})})).ok?await fetchPersona():setConfirmModal({isOpen:!0,title:` `,message:`   .`,type:`danger`,singleButton:!0,onConfirm:closeConfirmModal})}catch(e$4){console.error(e$4)}finally{setAnalyzing(!1)}},disabled:analyzing,className:`theme-btn px-8 py-4 rounded-full font-bold shadow-xl hover:scale-105 active:scale-95 transition-transform flex items-center gap-3 disabled:opacity-70 disabled:cursor-not-allowed`,children:[analyzing?(0,import_jsx_runtime.jsx)(RefreshCw,{className:`animate-spin w-5 h-5`}):(0,import_jsx_runtime.jsx)(Sparkles,{className:`w-5 h-5`}),(0,import_jsx_runtime.jsx)(`span`,{children:analyzing?`AI  ...`:` `})]})})]}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmModal.isOpen,title:confirmModal.title,message:confirmModal.message,type:confirmModal.type,singleButton:confirmModal.singleButton,onConfirm:()=>{confirmModal.onConfirm()},onCancel:closeConfirmModal})]})}var AnalysisPage_default=AnalysisPage,RollingPaperView=({cycle,onPassTurn})=>{let[isSubmitting,setIsSubmitting]=(0,import_react.useState)(!1),editor=usePostEditor(),[completedData,setCompletedData]=(0,import_react.useState)(null),[confirmation,setConfirmation]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}});import_react.useEffect(()=>{(async()=>{if(cycle.status===`IN_PROGRESS`&&cycle.isMyTurn||cycle.status===`COMPLETED`)try{let data=await fetchCycleContentApi(cycle.id);if(data){if(cycle.status===`COMPLETED`){setCompletedData(data);return}let lockedBlocks=data.blocks?.map(b$3=>({...b$3,locked:!0}))||[],lockedStickers=data.stickers?.map(s$3=>({...s$3,locked:!0}))||[],lockedTexts=data.floatingTexts?.map(t$4=>({...t$4,locked:!0}))||[],lockedImages=data.floatingImages?.map(i$4=>({...i$4,locked:!0}))||[];editor.setTitle(data.title||cycle.title||``),lockedBlocks.length===0?editor.setBlocks([{id:`new-${Date.now()}`,type:`paragraph`,text:``}]):editor.setBlocks([...lockedBlocks,{id:`new-${Date.now()}`,type:`paragraph`,text:``}]),editor.setStickers(lockedStickers),editor.setFloatingTexts(lockedTexts),editor.setFloatingImages(lockedImages)}}catch(e$4){console.error(`Failed to load shared content`,e$4)}})()},[cycle.isMyTurn,cycle.id,cycle.status]);let handleImagesUpload=_e$1=>{console.log(`Image upload not fully supported in Rolling Paper MVP`)},handleCompleteTurn=async()=>{if(!(editor.blocks.some(b$3=>!b$3.locked&&(b$3.text?.trim()||b$3.imageUrl))||editor.stickers.some(s$3=>!s$3.locked)||editor.floatingTexts.some(t$4=>!t$4.locked&&t$4.text?.trim())||editor.floatingImages.some(i$4=>!i$4.locked))){setConfirmation({isOpen:!0,title:` `,message:`  .
   .`,type:`danger`,singleButton:!0,onConfirm:()=>setConfirmation(prev=>({...prev,isOpen:!1}))});return}setConfirmation({isOpen:!0,title:` `,message:`    ?
    .`,type:`info`,onConfirm:async()=>{setConfirmation(prev=>({...prev,isOpen:!1})),setIsSubmitting(!0);try{let contentPayload={title:editor.title||cycle.title,blocks:editor.blocks,stickers:editor.stickers,floatingTexts:editor.floatingTexts,floatingImages:editor.floatingImages,titleStyles:editor.titleStyles};await saveCycleContentApi(cycle.id,contentPayload),await onPassTurn()}catch(e$4){console.error(e$4),setConfirmation({isOpen:!0,title:` `,message:` .  .`,type:`danger`,singleButton:!0,onConfirm:()=>setConfirmation(prev=>({...prev,isOpen:!1}))})}finally{setIsSubmitting(!1)}}})},handleTempSave=async()=>{setIsSubmitting(!0);try{let contentPayload={title:editor.title,blocks:editor.blocks,stickers:editor.stickers,floatingTexts:editor.floatingTexts,floatingImages:editor.floatingImages,titleStyles:editor.titleStyles};await saveCycleContentApi(cycle.id,contentPayload),setConfirmation({isOpen:!0,title:`  `,message:`    .`,type:`success`,singleButton:!0,onConfirm:()=>{setConfirmation(prev=>({...prev,isOpen:!1})),editor.setIsDirty(!1)}})}catch(e$4){console.error(e$4),setConfirmation({isOpen:!0,title:` `,message:`    .`,type:`danger`,singleButton:!0,onConfirm:()=>setConfirmation(prev=>({...prev,isOpen:!1}))})}finally{setIsSubmitting(!1)}};return import_react.useEffect(()=>{let handleBeforeUnload=e$4=>{editor.isDirty&&(e$4.preventDefault(),e$4.returnValue=``)};return window.addEventListener(`beforeunload`,handleBeforeUnload),()=>window.removeEventListener(`beforeunload`,handleBeforeUnload)},[editor.isDirty]),cycle.status===`IN_PROGRESS`&&!cycle.isMyTurn?(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col items-center justify-center min-h-[60vh] text-center p-8`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6 animate-pulse`,children:(0,import_jsx_runtime.jsx)(Lock,{size:40,className:`text-gray-400`})}),(0,import_jsx_runtime.jsx)(`h2`,{className:`text-2xl font-bold text-[var(--text-primary)] mb-2`,children:(()=>{let currentMember=cycle.members?.find(m$3=>(m$3.order??m$3.turnOrder)===cycle.currentTurnOrder);return currentMember?`${currentMember.nickname}  ...`:`  ...`})()}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-[var(--text-secondary)]`,children:` !     .`}),(0,import_jsx_runtime.jsx)(`div`,{className:`mt-8 flex gap-2`,children:cycle.members?.map(m$3=>(0,import_jsx_runtime.jsx)(`div`,{className:`w-3 h-3 rounded-full ${m$3.isCompleted?`bg-indigo-500`:(m$3.order??m$3.turnOrder)===cycle.currentTurnOrder?`bg-yellow-400 animate-bounce`:`bg-gray-200`}`},m$3.userId))})]}):cycle.status===`IN_PROGRESS`&&cycle.isMyTurn?(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col h-full overflow-hidden bg-gray-50 relative`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`shrink-0 h-16 bg-white border-b flex items-center justify-between px-6 z-50`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-lg`,children:`  `}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex gap-2`,children:[(0,import_jsx_runtime.jsxs)(`button`,{onClick:handleTempSave,disabled:isSubmitting,className:`px-3 py-1.5 md:px-4 md:py-2 text-xs md:text-sm bg-white border border-indigo-200 text-indigo-600 rounded-xl font-bold hover:bg-indigo-50 transition shadow-sm flex items-center gap-1 md:gap-2 disabled:opacity-50`,children:[(0,import_jsx_runtime.jsx)(Save,{size:14,className:`md:w-[18px] md:h-[18px]`}),` `]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleCompleteTurn,disabled:isSubmitting,className:`px-4 py-1.5 md:px-6 md:py-2 text-xs md:text-sm bg-[var(--btn-bg)] text-[var(--btn-text)] rounded-xl font-bold hover:opacity-90 transition shadow-lg shadow-indigo-500/20 disabled:opacity-50`,children:isSubmitting?` ...`:` `})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex-1 flex flex-col md:flex-row overflow-hidden relative`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 bg-gray-100 overflow-hidden relative`,children:(0,import_jsx_runtime.jsx)(EditorCanvas_default,{title:editor.title,setTitle:editor.setTitle,titleStyles:editor.titleStyles,viewMode:`editor`,blocks:editor.blocks,setBlocks:editor.setBlocks,stickers:editor.stickers,floatingTexts:editor.floatingTexts,floatingImages:editor.floatingImages,selectedId:editor.selectedId,selectedType:editor.selectedType,onSelect:(id$3,type)=>{editor.setSelectedId(id$3),editor.setSelectedType(type)},onUpdate:editor.handleUpdate,onDelete:()=>{editor.selectedId&&editor.handleDelete(editor.selectedId)},onBlockImageUpload:(id$3,file)=>{editor.handleBlockImageUpload(file,id$3)},onBackgroundClick:()=>{editor.setSelectedId(null),editor.setSelectedType(null)},paperStyles:editor.paperStyles})}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-full md:w-80 h-[45vh] md:h-full border-t md:border-t-0 md:border-l bg-white shrink-0 overflow-y-auto`,children:(0,import_jsx_runtime.jsx)(`div`,{className:`p-4`,children:(0,import_jsx_runtime.jsx)(EditorSidebar_default,{containerClassName:``,showActionButtons:!1,isSaving:editor.isSaving,onSave:()=>{},onTempSave:handleTempSave,onCancel:()=>{},onAddBlock:()=>editor.setBlocks([...editor.blocks,{id:`m-${Date.now()}`,type:`paragraph`,text:``}]),onAddFloatingText:editor.addFloatingText,onAddSticker:editor.addSticker,onAddFloatingImage:editor.addFloatingImage,onAddWidgetSticker:editor.addWidgetSticker,rawInput:editor.rawInput,setRawInput:editor.setRawInput,selectedLayoutId:editor.selectedLayoutId,setSelectedLayoutId:editor.setSelectedLayoutId,tempImages:editor.tempImages,setTempImages:editor.setTempImages,fileInputRef:editor.fileInputRef,handleImagesUpload,onAiGenerate:editor.handleAiGenerate,isAiProcessing:editor.isAiProcessing,currentTags:editor.currentTags,onTagsChange:editor.setTags,applyPaperPreset:editor.applyPaperPreset,onSaveAsTemplate:()=>{},myTemplates:editor.myTemplates,applyTemplate:editor.applyTemplate})})})]}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmation.isOpen,onClose:()=>setConfirmation(prev=>({...prev,isOpen:!1})),title:confirmation.title,message:confirmation.message,onConfirm:confirmation.onConfirm,onCancel:()=>setConfirmation(prev=>({...prev,isOpen:!1})),type:confirmation.type,singleButton:confirmation.singleButton})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col h-full overflow-hidden bg-gray-50 relative`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`shrink-0 h-16 bg-white border-b flex items-center justify-center px-6 z-50`,children:(0,import_jsx_runtime.jsxs)(`h2`,{className:`text-xl font-bold flex items-center gap-2`,children:[(0,import_jsx_runtime.jsx)(CheckCheck,{className:`text-green-500`}),` `]})}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 bg-gray-100 overflow-hidden relative`,children:completedData?(0,import_jsx_runtime.jsx)(EditorCanvas_default,{title:completedData.title||cycle.title,setTitle:()=>{},titleStyles:completedData.titleStyles,viewMode:`read`,blocks:completedData.blocks||[],setBlocks:()=>{},stickers:completedData.stickers||[],floatingTexts:completedData.floatingTexts||[],floatingImages:completedData.floatingImages||[],selectedId:null,selectedType:null,onSelect:()=>{},onUpdate:()=>{},onDelete:()=>{},onBlockImageUpload:()=>{},onBackgroundClick:()=>{}}):(0,import_jsx_runtime.jsx)(`div`,{className:`flex items-center justify-center h-full text-gray-400`,children:` ...`})})]})},RollingPaperView_default=RollingPaperView,WeatherIcon=({type,selected:selected$1,onClick})=>{let Icon$1={SUNNY:Sun,CLOUDY:Cloud,RAINY:CloudRain,SNOWY:Snowflake}[type]||Sun;return(0,import_jsx_runtime.jsx)(`button`,{onClick,className:`p-1.5 rounded-full transition-all ${selected$1?`bg-orange-100 text-orange-500 ring-2 ring-orange-200`:`text-gray-400 hover:bg-gray-100`}`,children:(0,import_jsx_runtime.jsx)(Icon$1,{size:18})})},FeelingIcon=({type,selected:selected$1,onClick})=>{let Icon$1={HAPPY:Smile,SAD:Meh,ANGRY:Angry,CRYING:Frown}[type]||Smile;return(0,import_jsx_runtime.jsx)(`button`,{onClick,className:`p-1.5 rounded-full transition-all ${selected$1?`bg-indigo-100 text-indigo-500 ring-2 ring-indigo-200`:`text-gray-400 hover:bg-gray-100`}`,children:(0,import_jsx_runtime.jsx)(Icon$1,{size:18})})},WeatherIconDisplay=({type})=>(0,import_jsx_runtime.jsx)({SUNNY:Sun,CLOUDY:Cloud,RAINY:CloudRain,SNOWY:Snowflake}[type]||Sun,{size:16,className:`text-gray-400`}),FeelingIconDisplay=({type})=>(0,import_jsx_runtime.jsx)({HAPPY:Smile,SAD:Meh,ANGRY:Angry,CRYING:Frown}[type]||Smile,{size:16,className:`text-gray-400`}),ExchangeDiaryView=({cycle,onPassTurn})=>{let[feeling,setFeeling]=(0,import_react.useState)(`HAPPY`),[weather,setWeather]=(0,import_react.useState)(`SUNNY`),[content,setContent]=(0,import_react.useState)(``),[isSubmitting,setIsSubmitting]=(0,import_react.useState)(!1),[myEmail,setMyEmail]=(0,import_react.useState)(null),[sharedContent,setSharedContent]=(0,import_react.useState)(null),[isDirty,setIsDirty]=(0,import_react.useState)(!1);(0,import_react.useEffect)(()=>{content.length>0&&!isSubmitting&&setIsDirty(!0)},[content,feeling,weather]);let[displayDate,setDisplayDate]=(0,import_react.useState)(``);(0,import_react.useEffect)(()=>{let now$4=new Date;setDisplayDate(`${String(now$4.getFullYear()).slice(-2)}-${String(now$4.getMonth()+1).padStart(2,`0`)}-${String(now$4.getDate()).padStart(2,`0`)} / ${String(now$4.getHours()).padStart(2,`0`)}:${String(now$4.getMinutes()).padStart(2,`0`)}`)},[]),(0,import_react.useEffect)(()=>{(async()=>{try{let token=localStorage.getItem(`accessToken`);if(token){let payload=JSON.parse(atob(token.split(`.`)[1]));setMyEmail(payload.sub||payload.email)}}catch(e$4){console.warn(`Token parse failed`,e$4)}if(cycle.status===`COMPLETED`||cycle.isMyTurn)try{let data=await fetchCycleContentApi(cycle.id);data&&setSharedContent(data)}catch(e$4){console.error(`Failed to load diary content`,e$4)}})()},[cycle.id,cycle.status,cycle.isMyTurn]);let[timeLeft,setTimeLeft]=(0,import_react.useState)(``);(0,import_react.useEffect)(()=>{if(!cycle.nextTurnTime)return;let target=new Date(cycle.nextTurnTime).getTime(),tick=()=>{let diff=target-new Date().getTime();if(diff<=0){setTimeLeft(`00:00:00`);return}let h$3=Math.floor(diff%(1e3*60*60*24)/(1e3*60*60)),m$3=Math.floor(diff%(1e3*60*60)/(1e3*60)),s$3=Math.floor(diff%(1e3*60)/1e3);setTimeLeft(`${String(h$3).padStart(2,`0`)}:${String(m$3).padStart(2,`0`)}:${String(s$3).padStart(2,`0`)}`)},timer$1=setInterval(tick,1e3);return tick(),()=>clearInterval(timer$1)},[cycle.nextTurnTime]);let handleSubmit=async()=>{if(!content.trim())return alert(`  .`);if(confirm(` ?     .`)){setIsSubmitting(!0);try{let previousBlocks=sharedContent?.blocks||[];await onPassTurn(JSON.stringify({title:cycle.title,blocks:[...previousBlocks,{type:`paragraph`,text:content,date:displayDate,feeling,weather}]}))}catch(e$4){console.error(e$4),alert(` `)}finally{setIsSubmitting(!1)}}},handleTempSave=async()=>{setIsSubmitting(!0);try{let previousBlocks=sharedContent?.blocks||[],payload={title:cycle.title,blocks:[...previousBlocks,{type:`paragraph`,text:content,date:displayDate,feeling,weather}]};await saveCycleContentApi(cycle.id,payload),alert(` .`),setIsDirty(!1)}catch(e$4){console.error(e$4),alert(`  `)}finally{setIsSubmitting(!1)}};return(0,import_react.useEffect)(()=>{let handleBeforeUnload=e$4=>{isDirty&&(e$4.preventDefault(),e$4.returnValue=``)};return window.addEventListener(`beforeunload`,handleBeforeUnload),()=>window.removeEventListener(`beforeunload`,handleBeforeUnload)},[isDirty]),(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-4xl mx-auto p-4 md:p-8`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center justify-between mb-8`,children:[(0,import_jsx_runtime.jsxs)(`div`,{children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-2xl font-bold font-serif text-[var(--text-primary)]`,children:cycle.title}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-sm text-[var(--text-secondary)] font-serif italic`,children:`Shared Exchange Diary`})]}),cycle.status===`IN_PROGRESS`&&cycle.nextTurnTime&&(0,import_jsx_runtime.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 bg-black/5 rounded-full font-mono text-sm font-bold text-[var(--text-secondary)]`,children:[(0,import_jsx_runtime.jsx)(Clock,{size:16}),timeLeft||`--:--:--`]})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-6 bg-[url('https://www.transparenttextures.com/patterns/notebook.png')] bg-[#fdfbf7] p-8 rounded-xl shadow-lg border border-[#e5e0d8]`,children:cycle.members?.map((member,index$2)=>{let isCurrent=(member.order??member.turnOrder)===cycle.currentTurnOrder,isMeMatchingCurrentTurn=isCurrent&&myEmail&&member.email===myEmail,canIWrite=cycle.isMyTurn&&isCurrent&&(member.userId===(cycle.myTurnOrder??-1)||member.email===myEmail)||isMeMatchingCurrentTurn,itemKey=member.userId||member.id||`member-${index$2}`,memberEntry=sharedContent?.blocks?.[index$2];return cycle.status===`COMPLETED`||member.isCompleted&&sharedContent?(0,import_jsx_runtime.jsxs)(`div`,{className:`aspect-[4/3] bg-white p-5 border-b-2 border-r-2 border-gray-100 shadow-sm flex flex-col rotate-1 hover:rotate-0 transition-transform cursor-pointer`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`border-b pb-2 mb-3 flex flex-col gap-1`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center text-xs text-gray-400 font-serif`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-gray-600`,children:member.nickname}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex gap-2 items-center`,children:memberEntry&&(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(FeelingIconDisplay,{type:memberEntry.feeling}),(0,import_jsx_runtime.jsx)(WeatherIconDisplay,{type:memberEntry.weather})]})})]}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-[10px] text-gray-300 font-mono`,children:memberEntry?.date||``})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 font-serif text-sm leading-loose overflow-y-auto custom-scrollbar whitespace-pre-wrap`,children:memberEntry?memberEntry.text:`  .`})]},itemKey):cycle.status===`IN_PROGRESS`&&canIWrite?(0,import_jsx_runtime.jsxs)(`div`,{className:`aspect-[4/3] bg-white shadow-xl ring-4 ring-indigo-100 rounded-lg p-5 flex flex-col relative z-10 scale-105 transition-transform`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex flex-col border-b pb-3 mb-4 gap-2`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,import_jsx_runtime.jsxs)(`span`,{className:`font-bold text-sm text-indigo-900 shrink-0`,children:[member.nickname,` `]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex gap-1`,children:[`HAPPY`,`SAD`,`ANGRY`,`CRYING`].map(f$3=>(0,import_jsx_runtime.jsx)(FeelingIcon,{type:f$3,selected:feeling===f$3,onClick:()=>setFeeling(f$3)},f$3))})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-xs font-mono text-gray-400 font-bold`,children:displayDate}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex gap-1 items-center`,children:[`SUNNY`,`CLOUDY`,`RAINY`,`SNOWY`].map(w$1=>(0,import_jsx_runtime.jsx)(WeatherIcon,{type:w$1,selected:weather===w$1,onClick:()=>setWeather(w$1)},w$1))})]})]}),(0,import_jsx_runtime.jsx)(`textarea`,{value:content,onChange:e$4=>setContent(e$4.target.value),placeholder:`  ?`,className:`flex-1 resize-none outline-none text-sm leading-loose font-serif bg-transparent placeholder:text-gray-300`,autoFocus:!0}),(0,import_jsx_runtime.jsx)(`button`,{onClick:handleSubmit,disabled:isSubmitting,className:`mt-3 w-full py-2 bg-indigo-600 text-white rounded-lg font-bold text-xs hover:bg-indigo-700 transition`,children:isSubmitting?` ...`:` `}),(0,import_jsx_runtime.jsxs)(`button`,{onClick:handleTempSave,disabled:isSubmitting,className:`mt-2 w-full py-2 bg-white border border-indigo-200 text-indigo-600 rounded-lg font-bold text-xs hover:bg-indigo-50 transition flex items-center justify-center gap-2`,children:[(0,import_jsx_runtime.jsx)(Save,{size:14}),` `]})]},itemKey):(0,import_jsx_runtime.jsx)(`div`,{className:`aspect-[4/3] border-2 border-dashed border-gray-200 rounded-lg flex flex-col items-center justify-center bg-gray-50/50 opacity-70`,children:isCurrent?(0,import_jsx_runtime.jsxs)(`div`,{className:`text-center animate-pulse`,children:[(0,import_jsx_runtime.jsx)(`span`,{className:`text-2xl mb-2 block`,children:``}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-xs font-bold text-gray-400`,children:[member.nickname,`  ...`]})]}):member.isCompleted?(0,import_jsx_runtime.jsxs)(`div`,{className:`text-center`,children:[(0,import_jsx_runtime.jsx)(Check,{className:`mx-auto text-green-400 mb-2`}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs font-bold text-gray-400`,children:`  ()`})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`text-center`,children:[(0,import_jsx_runtime.jsx)(Lock,{className:`mx-auto text-gray-300 mb-2`,size:16}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-xs text-gray-300`,children:[member.order??member.turnOrder,` `]}),(0,import_jsx_runtime.jsx)(`p`,{className:`text-xs font-bold text-gray-400`,children:member.nickname})]})},itemKey)})})]})},ExchangeDiaryView_default=ExchangeDiaryView,RoomCyclePage=()=>{let{cycleId}=useParams(),navigate=useNavigate(),[cycle,setCycle]=(0,import_react.useState)(null),[isLoading,setIsLoading]=(0,import_react.useState)(!0),[error$1,setError]=(0,import_react.useState)(null),[confirmModal,setConfirmModal]=(0,import_react.useState)({isOpen:!1,title:``,message:``,onConfirm:()=>{}}),closeConfirmModal=()=>{setConfirmModal(prev=>({...prev,isOpen:!1}))},showModal=(title,message,type=`info`,onConfirm)=>{setConfirmModal({isOpen:!0,title,message,type,singleButton:!0,onConfirm:onConfirm||closeConfirmModal})},loadCycle=async()=>{if(cycleId){setIsLoading(!0);try{let data=await fetchCycleDetailApi(cycleId);try{let token=localStorage.getItem(`accessToken`);if(token){let payload=JSON.parse(atob(token.split(`.`)[1])),myEmail=payload.sub||payload.email;if(myEmail&&data.members){let currentMember=data.members.find(m$3=>(m$3.order??m$3.turnOrder)===data.currentTurnOrder);currentMember&&currentMember.email===myEmail&&(data.isMyTurn=!0)}}}catch(jsonError){console.warn(`Failed to parse token for turn verification`,jsonError)}setCycle(data)}catch(e$4){console.error(e$4),setError(`  .`)}finally{setIsLoading(!1)}}};(0,import_react.useEffect)(()=>{loadCycle()},[cycleId]);let handlePassTurn=async content=>{if(cycleId)try{content&&await saveCycleContentApi(cycleId,typeof content==`string`?JSON.parse(content):content),setCycle(await passTurnApi(cycleId)),showModal(` `,` !`,`success`)}catch(e$4){console.error(e$4),showModal(``,`   .`,`danger`)}};return isLoading?(0,import_jsx_runtime.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-[var(--bg-main)]`,children:(0,import_jsx_runtime.jsx)(Loader,{className:`animate-spin text-indigo-500`,size:40})}):error$1||!cycle?(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen flex flex-col items-center justify-center bg-[var(--bg-main)] gap-4`,children:[(0,import_jsx_runtime.jsx)(`p`,{className:`text-red-500 font-bold`,children:error$1||`  .`}),(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>navigate(-1),className:`px-4 py-2 bg-gray-200 rounded-lg font-bold`,children:``})]}):(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen bg-[var(--bg-main)] flex flex-col`,children:[(0,import_jsx_runtime.jsx)(Navigation_default,{}),(0,import_jsx_runtime.jsxs)(`div`,{className:`p-4 flex items-center gap-4`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>{cycle?.roomId?navigate(`/post?albumId=room-${cycle.roomId}`):navigate(-1)},className:`p-2 hover:bg-[var(--bg-card-secondary)] rounded-full transition-colors`,children:(0,import_jsx_runtime.jsx)(ArrowLeft,{size:24,className:`text-[var(--text-primary)]`})}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-lg font-bold text-[var(--text-primary)]`,children:cycle.title}),(0,import_jsx_runtime.jsx)(`span`,{className:`px-2 py-0.5 rounded text-xs font-bold bg-indigo-50 text-indigo-600`,children:cycle.type===`ROLLING_PAPER`?``:``})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1`,children:cycle.type===`ROLLING_PAPER`?(0,import_jsx_runtime.jsx)(RollingPaperView_default,{cycle,onPassTurn:handlePassTurn}):(0,import_jsx_runtime.jsx)(ExchangeDiaryView_default,{cycle,onPassTurn:handlePassTurn})}),(0,import_jsx_runtime.jsx)(ConfirmationModal_default,{isOpen:confirmModal.isOpen,title:confirmModal.title,message:confirmModal.message,type:confirmModal.type,singleButton:confirmModal.singleButton,onConfirm:()=>{confirmModal.onConfirm(),confirmModal.singleButton&&closeConfirmModal()},onCancel:closeConfirmModal})]})},RoomCyclePage_default=RoomCyclePage,YearModalPage=({onClose})=>{let[spreadIndex,setSpreadIndex]=(0,import_react.useState)(0),totalSpreads=6,nextPage=()=>{spreadIndex<5&&setSpreadIndex(prev=>prev+1)},prevPage=()=>{spreadIndex>0&&setSpreadIndex(prev=>prev-1)},PageContent=({pageNum})=>pageNum===1?(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-full bg-[#fdfbf7]`}):pageNum===2?(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full bg-[#fdfbf7] p-8 flex flex-col justify-center items-center font-serif text-[#4a4a4a]`,children:[(0,import_jsx_runtime.jsx)(`h2`,{className:`text-3xl font-bold mb-12 border-b-2 border-[#d4c5b0] pb-4`,children:``}),(0,import_jsx_runtime.jsxs)(`ul`,{className:`space-y-6 text-lg w-full max-w-[200px]`,children:[(0,import_jsx_runtime.jsxs)(`li`,{className:`flex justify-between`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:`Spring`}),` `,(0,import_jsx_runtime.jsx)(`span`,{children:`..... 3`})]}),(0,import_jsx_runtime.jsxs)(`li`,{className:`flex justify-between`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:`Summer`}),` `,(0,import_jsx_runtime.jsx)(`span`,{children:`..... 5`})]}),(0,import_jsx_runtime.jsxs)(`li`,{className:`flex justify-between`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:`Autumn`}),` `,(0,import_jsx_runtime.jsx)(`span`,{children:`..... 7`})]}),(0,import_jsx_runtime.jsxs)(`li`,{className:`flex justify-between`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:`Winter`}),` `,(0,import_jsx_runtime.jsx)(`span`,{children:`..... 9`})]})]})]}):pageNum===3?(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full relative overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/year/spring_field.png`,className:`w-full h-full object-cover`,alt:`Spring Field`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-black/10`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-8 left-8 text-white font-serif text-4xl font-bold drop-shadow-md`,children:`Spring`})]}):pageNum===4?(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full bg-[#fdfbf7] p-6 flex flex-col items-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full aspect-square bg-white p-3 shadow-md rotate-2 mb-4`,children:(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/year/puppy_run.png`,className:`w-full h-full object-cover`,alt:`Puppy`})}),(0,import_jsx_runtime.jsx)(`div`,{className:`flex-1 flex items-center`,children:(0,import_jsx_runtime.jsxs)(`p`,{className:`font-serif text-sm leading-7 text-gray-700 text-center`,children:[`     `,(0,import_jsx_runtime.jsx)(`br`,{}),`   .`,(0,import_jsx_runtime.jsx)(`br`,{}),`  `,(0,import_jsx_runtime.jsx)(`br`,{}),`    .`]})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-12 border-t border-dashed border-gray-300 mt-auto flex items-center justify-center gap-2 text-gray-400 text-xs`,children:[(0,import_jsx_runtime.jsx)(`span`,{children:``}),` `,(0,import_jsx_runtime.jsx)(`span`,{children:`2025.04.12`}),` `,(0,import_jsx_runtime.jsx)(`span`,{children:``})]})]}):pageNum===5?(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full relative overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/year/summer_heat.png`,className:`w-full h-full object-cover`,alt:`Summer Heat`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-8 left-8 text-white font-serif text-4xl font-bold drop-shadow-md`,children:`Summer`})]}):pageNum===6?(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full bg-[#fdfbf7] p-6 flex flex-col items-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-1/2 flex items-center justify-center p-4`,children:(0,import_jsx_runtime.jsxs)(`p`,{className:`font-serif text-sm leading-7 text-gray-700 text-center`,children:[`   ..`,(0,import_jsx_runtime.jsx)(`br`,{}),`  .`,(0,import_jsx_runtime.jsx)(`br`,{}),` `,(0,import_jsx_runtime.jsx)(`br`,{}),`   .`]})}),(0,import_jsx_runtime.jsx)(`div`,{className:`w-full h-1/2 bg-yellow-50 p-4 border border-yellow-100 m-4 rounded-lg shadow-inner flex items-center justify-center`,children:(0,import_jsx_runtime.jsx)(`span`,{className:`text-4xl`,children:``})})]}):pageNum===7?(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full bg-[#fdfbf7] p-6 flex flex-col items-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full aspect-[4/3] bg-white p-2 shadow-md -rotate-1 mb-6`,children:(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/year/grandma_food.png`,className:`w-full h-full object-cover`,alt:`Grandma Food`})}),(0,import_jsx_runtime.jsxs)(`p`,{className:`font-serif text-sm leading-7 text-gray-700 text-center`,children:[`"   .."`,(0,import_jsx_runtime.jsx)(`br`,{}),`   .`,(0,import_jsx_runtime.jsx)(`br`,{}),`   `,(0,import_jsx_runtime.jsx)(`br`,{}),`   .`,(0,import_jsx_runtime.jsx)(`br`,{}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-orange-600 font-bold mt-2 block`,children:`# # #`})]})]}):pageNum===8?(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full relative overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/year/autumn_leaves.png`,className:`w-full h-full object-cover`,alt:`Autumn Leaves`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute bottom-8 right-8 text-white font-serif text-4xl font-bold drop-shadow-md text-right`,children:`Autumn`})]}):pageNum===9?(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full bg-[#fdfbf7] p-6 flex flex-col items-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full aspect-square bg-white p-3 shadow-md rotate-1 mb-4`,children:(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/year/winter_study.png`,className:`w-full h-full object-cover`,alt:`Winter Study`})}),(0,import_jsx_runtime.jsxs)(`p`,{className:`font-serif text-sm leading-7 text-gray-700 text-center`,children:[`   .`,(0,import_jsx_runtime.jsx)(`br`,{}),`   .`,(0,import_jsx_runtime.jsx)(`br`,{}),`  ,`,(0,import_jsx_runtime.jsx)(`br`,{}),`   .`]})]}):pageNum===10?(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full relative overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`img`,{src:`/byeory/year/snowman.png`,className:`w-full h-full object-cover`,alt:`Snowman`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-t from-white/80 via-transparent to-transparent`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute bottom-12 w-full text-center text-[#2c3e50] font-serif text-2xl font-bold`,children:`Winter Wonderland`})]}):pageNum===11?(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full bg-[#fdfbf7] p-10 flex flex-col justify-center items-center text-center`,children:[(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xl font-bold text-indigo-900 mb-8 font-serif`,children:`Dear. Me`}),(0,import_jsx_runtime.jsxs)(`p`,{className:`font-serif text-base leading-9 text-gray-700`,children:[`    ?`,(0,import_jsx_runtime.jsx)(`br`,{}),(0,import_jsx_runtime.jsx)(`br`,{}),`  ,`,(0,import_jsx_runtime.jsx)(`br`,{}),`   `,(0,import_jsx_runtime.jsx)(`br`,{}),`     .`,(0,import_jsx_runtime.jsx)(`br`,{}),(0,import_jsx_runtime.jsx)(`br`,{}),`  `,(0,import_jsx_runtime.jsx)(`br`,{}),`   ?`]})]}):pageNum===12?(0,import_jsx_runtime.jsxs)(`div`,{className:`w-full h-full bg-[#1a237e] flex flex-col justify-center items-center text-[#ffd700]`,children:[(0,import_jsx_runtime.jsx)(Sparkles,{className:`w-12 h-12 mb-6 animate-pulse`}),(0,import_jsx_runtime.jsx)(`h1`,{className:`text-4xl font-serif font-bold mb-4 tracking-widest`,children:`Adieu 2025`}),(0,import_jsx_runtime.jsx)(`p`,{className:`font-serif text-sm opacity-80`,children:`See you in 2026`})]}):null;return(0,import_jsx_runtime.jsxs)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4`,children:[(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,className:`absolute top-6 right-6 text-white/80 hover:text-white transition-colors z-50`,children:(0,import_jsx_runtime.jsx)(X,{size:32})}),(0,import_jsx_runtime.jsxs)(`div`,{className:`relative w-full max-w-4xl aspect-[3/2] flex shadow-2xl rounded-lg overflow-hidden bg-[#fdfbf7]`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`w-1/2 h-full relative border-r border-[#e0e0e0] overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-0 bottom-0 right-0 w-8 bg-gradient-to-l from-black/10 to-transparent pointer-events-none z-10`}),(0,import_jsx_runtime.jsx)(PageContent,{pageNum:spreadIndex*2+1})]}),(0,import_jsx_runtime.jsxs)(`div`,{className:`w-1/2 h-full relative overflow-hidden`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-0 bottom-0 left-0 w-8 bg-gradient-to-r from-black/10 to-transparent pointer-events-none z-10`}),(0,import_jsx_runtime.jsx)(PageContent,{pageNum:spreadIndex*2+2})]}),spreadIndex>0&&(0,import_jsx_runtime.jsx)(`button`,{onClick:prevPage,className:`absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 rounded-full shadow-lg flex items-center justify-center hover:bg-white text-gray-800 z-20`,children:(0,import_jsx_runtime.jsx)(ChevronLeft,{})}),spreadIndex<5&&(0,import_jsx_runtime.jsx)(`button`,{onClick:nextPage,className:`absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 rounded-full shadow-lg flex items-center justify-center hover:bg-white text-gray-800 z-20`,children:(0,import_jsx_runtime.jsx)(ChevronRight,{})})]})]})},YearModalPage_default=YearModalPage,YearPage=()=>{let[stage,setStage]=(0,import_react.useState)(`intro`),[postCount]=(0,import_react.useState)(82),[coverImage]=(0,import_react.useState)(`/year/cat.jpg`),[isDetailOpen,setIsDetailOpen]=(0,import_react.useState)(!1),papers=Array.from({length:20}).map((_$1,i$4)=>({id:i$4,x:Math.random()*1e3-500,y:Math.random()*1e3-500,rotate:Math.random()*360,delay:Math.random()*.5}));return(0,import_react.useEffect)(()=>{if(stage===`intro`){let timer$1=setTimeout(()=>{setStage(`album`)},2500);return()=>clearTimeout(timer$1)}},[stage]),(0,import_jsx_runtime.jsxs)(`div`,{className:`min-h-screen bg-[var(--bg-primary)] pb-32 overflow-hidden perspective-1000`,children:[(0,import_jsx_runtime.jsx)(Navigation_default,{}),(0,import_jsx_runtime.jsxs)(`div`,{className:`max-w-4xl mx-auto px-4 py-8 flex flex-col items-center justify-center min-h-[80vh] text-center relative`,children:[(0,import_jsx_runtime.jsx)(AnimatePresence,{children:stage===`intro`&&(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center pointer-events-none`,children:papers.map(paper=>(0,import_jsx_runtime.jsx)(motion.div,{initial:{opacity:0,x:paper.x*2,y:paper.y*2,scale:.5,rotate:paper.rotate},animate:{opacity:[0,1,1,0],x:0,y:0,scale:[1,1,.2],rotate:paper.rotate+720},transition:{duration:2,ease:`easeInOut`,delay:paper.delay},className:`absolute w-24 h-32 bg-white shadow-lg border border-gray-200`},paper.id))})}),(0,import_jsx_runtime.jsxs)(motion.div,{initial:{opacity:0},animate:{opacity:stage===`intro`?0:1},transition:{duration:1,delay:.5},className:`flex flex-col items-center w-full z-10`,children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`mb-12 space-y-4`,children:[(0,import_jsx_runtime.jsx)(motion.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1},className:`text-4xl md:text-6xl font-black text-[var(--text-primary)]`,children:`Good Bye 2025!`}),(0,import_jsx_runtime.jsxs)(motion.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1.2},className:`text-lg md:text-xl text-[var(--text-secondary)] font-medium max-w-2xl whitespace-pre-line leading-relaxed`,children:[`   !        !`,(0,import_jsx_runtime.jsx)(`br`,{}),`   !`]})]}),(0,import_jsx_runtime.jsxs)(motion.div,{className:`relative w-64 h-80 md:w-80 md:h-[400px] cursor-pointer perspective-1000`,onClick:()=>setStage(`opened`),animate:{x:stage===`opened`?`50%`:`0%`},transition:{duration:1,ease:`easeInOut`},children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute inset-0 bg-[#fdfbf7] rounded-r-lg shadow-xl shadow-black/20`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`h-full w-full p-6 flex flex-col items-center justify-center`,children:(0,import_jsx_runtime.jsxs)(motion.div,{initial:{opacity:0},animate:{opacity:stage===`opened`?1:0},transition:{delay:.5,duration:1},className:`text-center w-full`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`w-full aspect-[4/3] bg-gray-100 rounded-lg mb-6 flex flex-col items-center justify-center text-gray-400 text-xs border-2 border-dashed border-gray-200 group-hover:border-indigo-200 transition-colors overflow-hidden relative`,children:coverImage?(0,import_jsx_runtime.jsx)(`img`,{src:coverImage,alt:`Cover`,className:`w-full h-full object-cover`}):(0,import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment,{children:[(0,import_jsx_runtime.jsx)(Sparkles,{className:`w-8 h-8 text-gray-300 mb-2`}),(0,import_jsx_runtime.jsx)(`span`,{children:`2025 Memories`})]})}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-gray-700 font-serif text-sm leading-relaxed mb-6`,children:[` 2025 `,(0,import_jsx_runtime.jsx)(`br`,{}),(0,import_jsx_runtime.jsx)(`span`,{className:`font-bold text-indigo-600 text-2xl`,children:postCount}),` `]}),(0,import_jsx_runtime.jsx)(`button`,{onClick:e$4=>{e$4.stopPropagation(),setIsDetailOpen(!0)},className:`px-8 py-3 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 hover:scale-105 active:scale-95 transition-all shadow-lg shadow-indigo-500/30 flex items-center gap-2 mx-auto`,children:` `})]})}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-1 bottom-1 -right-2 w-2 bg-white rounded-r border border-gray-100 -z-10`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute top-2 bottom-2 -right-3 w-2 bg-white rounded-r border border-gray-100 -z-20`})]}),(0,import_jsx_runtime.jsxs)(motion.div,{className:`absolute inset-0 w-full h-full preserve-3d origin-left`,animate:{rotateY:stage===`opened`?-180:0},transition:{duration:1.5,ease:[.4,0,.2,1]},children:[(0,import_jsx_runtime.jsxs)(`div`,{className:`absolute inset-0 bg-[#1a237e] rounded-r-lg shadow-2xl backface-hidden z-20 flex flex-col items-center justify-center border-l-4 border-[#0d1450]`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-3 border border-[#ffd700]/30 rounded-r-md`}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-4 border-2 border-[#ffd700] rounded-r-md`}),(0,import_jsx_runtime.jsxs)(`div`,{className:`text-[#ffd700] font-serif text-4xl font-bold tracking-widest text-center relative z-10`,children:[`MEMORIES`,(0,import_jsx_runtime.jsx)(`br`,{}),(0,import_jsx_runtime.jsx)(`span`,{className:`text-2xl font-light opacity-80`,children:`2025`})]}),(0,import_jsx_runtime.jsx)(Sparkles,{className:`text-[#ffd700] mt-6 animate-pulse`,size:40}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute bottom-8 text-[#ffd700]/60 text-xs font-serif tracking-widest`,children:`BYEORY YEARBOOK`})]}),(0,import_jsx_runtime.jsx)(`div`,{className:`absolute inset-0 bg-[#fdfbf7] rounded-l-lg shadow-inner backface-hidden z-10`,style:{transform:`rotateY(180deg)`},children:(0,import_jsx_runtime.jsxs)(`div`,{className:`h-full w-full p-8 flex flex-col justify-center items-center text-center`,children:[(0,import_jsx_runtime.jsx)(`div`,{className:`mb-6`,children:(0,import_jsx_runtime.jsx)(Sparkles,{className:`text-indigo-400 w-8 h-8 mx-auto`,strokeWidth:1})}),(0,import_jsx_runtime.jsx)(`h3`,{className:`text-xl font-bold text-gray-800 mb-6 font-serif`,children:`Dear. You`}),(0,import_jsx_runtime.jsxs)(`p`,{className:`text-gray-600 leading-8 font-serif`,children:[`  `,(0,import_jsx_runtime.jsx)(`br`,{}),`  .`,(0,import_jsx_runtime.jsx)(`br`,{}),(0,import_jsx_runtime.jsx)(`br`,{}),`2025  `,(0,import_jsx_runtime.jsx)(`br`,{}),`  `,(0,import_jsx_runtime.jsx)(`br`,{}),`  .`]}),(0,import_jsx_runtime.jsx)(`div`,{className:`mt-10 text-indigo-900 font-script text-3xl`,children:`Thank you`})]})})]}),(0,import_jsx_runtime.jsx)(AnimatePresence,{children:stage===`album`&&(0,import_jsx_runtime.jsx)(motion.div,{className:`absolute -bottom-16 left-0 right-0 text-center`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},children:(0,import_jsx_runtime.jsx)(`p`,{className:`text-[var(--text-tertiary)] text-sm animate-bounce mb-2`,children:`  `})})})]})]})]}),(0,import_jsx_runtime.jsx)(`style`,{children:`
                .preserve-3d {
                    transform-style: preserve-3d;
                }
                .backface-hidden {
                    backface-visibility: hidden;
                }
                .perspective-1000 {
                    perspective: 1000px;
                }
                .font-script {
                    font-family: 'Dancing Script', cursive, sans-serif;
                }
            `}),(0,import_jsx_runtime.jsx)(AnimatePresence,{children:isDetailOpen&&(0,import_jsx_runtime.jsx)(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50`,children:(0,import_jsx_runtime.jsx)(YearModalPage_default,{onClose:()=>setIsDetailOpen(!1)})})})]})},YearPage_default=YearPage,isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Backend=isMobile?TouchBackend:HTML5Backend,backendOptions=isMobile?{enableMouseEvents:!0}:{},savedTheme=localStorage.getItem(`theme`)||`default`;document.documentElement.setAttribute(`data-theme`,savedTheme);var savedFontFamily=localStorage.getItem(`fontFamily`),savedFontSize=localStorage.getItem(`fontSize`);savedFontFamily&&document.documentElement.style.setProperty(`--font-family`,savedFontFamily),savedFontSize&&document.documentElement.style.setProperty(`--font-size`,savedFontSize);var savedManualTextColor=localStorage.getItem(`manualTextColor`),savedManualTextIntensity=localStorage.getItem(`manualTextIntensity`),savedManualBgColor=localStorage.getItem(`manualBgColor`),savedManualBgIntensity=localStorage.getItem(`manualBgIntensity`),savedManualCardColor=localStorage.getItem(`manualCardColor`);if(savedManualTextColor){let r$4=parseInt(savedManualTextColor.slice(1,3),16),g$3=parseInt(savedManualTextColor.slice(3,5),16),b$3=parseInt(savedManualTextColor.slice(5,7),16);document.documentElement.style.setProperty(`--manual-text-color`,`${r$4}, ${g$3}, ${b$3}`)}if(savedManualTextIntensity&&document.documentElement.style.setProperty(`--manual-text-intensity`,`${parseInt(savedManualTextIntensity)/100}`),savedManualBgColor){let r$4=parseInt(savedManualBgColor.slice(1,3),16),g$3=parseInt(savedManualBgColor.slice(3,5),16),b$3=parseInt(savedManualBgColor.slice(5,7),16);document.documentElement.style.setProperty(`--manual-bg-color`,`${r$4}, ${g$3}, ${b$3}`)}if(savedManualBgIntensity&&document.documentElement.style.setProperty(`--manual-bg-intensity`,`${parseInt(savedManualBgIntensity)/100}`),savedManualCardColor){let r$4=parseInt(savedManualCardColor.slice(1,3),16),g$3=parseInt(savedManualCardColor.slice(3,5),16),b$3=parseInt(savedManualCardColor.slice(5,7),16);document.documentElement.style.setProperty(`--manual-card-color`,`${r$4}, ${g$3}, ${b$3}`)}var savedManualBgImage=localStorage.getItem(`manualBgImage`),savedIsGradient=localStorage.getItem(`manualIsGradient`)===`true`,savedGradientDirection=localStorage.getItem(`manualGradientDirection`),savedGradientStartColor=localStorage.getItem(`manualGradientStartColor`),savedGradientEndColor=localStorage.getItem(`manualGradientEndColor`);if(savedManualBgImage){let savedBgSize=localStorage.getItem(`manualBgSize`)||`cover`;document.documentElement.style.setProperty(`--manual-gradient`,`url(${savedManualBgImage})`),document.documentElement.style.setProperty(`--manual-bg-intensity`,`0`),document.documentElement.style.setProperty(`--manual-bg-size`,savedBgSize===`repeat`?`auto`:savedBgSize),document.documentElement.style.setProperty(`--manual-bg-repeat`,savedBgSize===`repeat`?`repeat`:`no-repeat`)}else if(savedIsGradient&&savedGradientDirection&&savedGradientStartColor&&savedGradientEndColor){let gradientValue=`linear-gradient(${savedGradientDirection}, ${savedGradientStartColor}, ${savedGradientEndColor})`;document.documentElement.style.setProperty(`--manual-gradient`,gradientValue),document.documentElement.style.setProperty(`--manual-bg-intensity`,`0`),document.documentElement.style.setProperty(`--manual-bg-size`,`cover`),document.documentElement.style.setProperty(`--manual-bg-repeat`,`no-repeat`)}else document.documentElement.style.setProperty(`--manual-gradient`,`none`),document.documentElement.style.setProperty(`--manual-bg-size`,`cover`),document.documentElement.style.setProperty(`--manual-bg-repeat`,`no-repeat`);var savedManualBtnColor=localStorage.getItem(`manualBtnColor`);savedManualBtnColor&&document.documentElement.style.setProperty(`--manual-btn-bg`,savedManualBtnColor);var savedManualBtnTextColor=localStorage.getItem(`manualBtnTextColor`);savedManualBtnTextColor&&document.documentElement.style.setProperty(`--manual-btn-text`,savedManualBtnTextColor);var RootRouting=()=>{let token=localStorage.getItem(`accessToken`),defaultPage=localStorage.getItem(`defaultPage`)||`/home`;return token?(0,import_jsx_runtime.jsx)(Navigate,{to:defaultPage,replace:!0}):(0,import_jsx_runtime.jsx)(WelcomePage_default,{})},router=createBrowserRouter([{path:`/`,element:(0,import_jsx_runtime.jsx)(RootRouting,{})},{path:`/login`,element:(0,import_jsx_runtime.jsx)(LoginPage_default,{})},{path:`/join`,element:(0,import_jsx_runtime.jsx)(JoinPage_default,{})},{path:`/find-password`,element:(0,import_jsx_runtime.jsx)(FindPasswordPage_default,{})},{path:`/invite/:code`,element:(0,import_jsx_runtime.jsx)(InviteAcceptPage_default,{})},{path:`/rooms/:roomId/join`,element:(0,import_jsx_runtime.jsx)(RoomJoinPage_default,{})},{element:(0,import_jsx_runtime.jsx)(ProtectedRoute_default,{}),children:[{path:`/home`,element:(0,import_jsx_runtime.jsx)(MainPage_default,{})},{path:`/post`,element:(0,import_jsx_runtime.jsx)(PostPage_default,{})},{path:`/cycles/:cycleId`,element:(0,import_jsx_runtime.jsx)(RoomCyclePage_default,{})},{path:`/todo`,element:(0,import_jsx_runtime.jsx)(TodoPage_default,{})},{path:`/community`,element:(0,import_jsx_runtime.jsx)(CommunityPage_default,{})},{path:`/market`,element:(0,import_jsx_runtime.jsx)(MarketPage_default,{})},{path:`/profile`,element:(0,import_jsx_runtime.jsx)(ProfilePage_default,{})},{path:`/profile/edit`,element:(0,import_jsx_runtime.jsx)(ProfileEditPage_default,{})},{path:`/profile/password`,element:(0,import_jsx_runtime.jsx)(PasswordChangePage_default,{})},{path:`/profile/delete`,element:(0,import_jsx_runtime.jsx)(GetOutPage_default,{})},{path:`/setup-profile`,element:(0,import_jsx_runtime.jsx)(InitialProfileSetup_default,{})},{path:`/profile/analysis`,element:(0,import_jsx_runtime.jsx)(AnalysisPage_default,{})},{path:`/season-greeting`,element:(0,import_jsx_runtime.jsx)(YearPage_default,{})},{path:`/charge`,element:(0,import_jsx_runtime.jsx)(ChargePage_default,{})},{path:`/payment/success`,element:(0,import_jsx_runtime.jsx)(PaymentSuccessPage_default,{})},{path:`/payment/cancel`,element:(0,import_jsx_runtime.jsx)(PaymentCancelPage_default,{})},{path:`/payment/fail`,element:(0,import_jsx_runtime.jsx)(PaymentFailPage_default,{})}]}],{basename:`/byeory/`});(0,import_client.createRoot)(document.getElementById(`root`)).render((0,import_jsx_runtime.jsx)(import_react.StrictMode,{children:(0,import_jsx_runtime.jsx)(DndProvider,{backend:Backend,options:backendOptions,children:(0,import_jsx_runtime.jsx)(AuthProvider,{children:(0,import_jsx_runtime.jsx)(MenuProvider,{children:(0,import_jsx_runtime.jsx)(ThemeProvider,{children:(0,import_jsx_runtime.jsx)(CreditProvider,{children:(0,import_jsx_runtime.jsx)(TodoProvider,{children:(0,import_jsx_runtime.jsx)(RouterProvider2,{router})})})})})})})}));export{Search as $,savePostToApi as A,require_react_dom as At,Zap as B,generateBlogContent as C,Camera as Ct,manageAlbumContentApi as D,Activity as Dt,leaveRoomApi as E,ArrowLeftRight as Et,motion as F,Trash2 as G,User as H,AnimatePresence as I,Star as J,Tag as K,axios_default as L,updateAlbumApi as M,__commonJSMin as Mt,updateRoomApi as N,__toESM as Nt,manageAlbumItem as O,createLucideIcon as Ot,uploadImageToSupabase as P,Send as Q,useAuth as R,fetchRoomsFromApi as S,Check as St,kickMemberApi as T,BookOpen as Tt,Upload as U,X as V,Type as W,Snowflake as X,Sparkles as Y,Settings as Z,fetchMyPostTemplatesApi as _,Cloud as _t,cleanId as a,Palette as at,fetchRoomApi as b,CircleX as bt,createRoomApi as c,MessageCircle as ct,deletePostApi as d,Highlighter as dt,RotateCcw as et,deletePostTemplateApi as f,FileText as ft,fetchAlbumsFromApi as g,Copy as gt,fetchAlbumContents as h,Delete as ht,API_TEMPLATE_URL as i,Pause as it,supabase as j,require_react as jt,restorePostTemplateApi as k,useNavigate as kt,deleteAlbumApi as l,MapPin as lt,fetchAlbumApi as m,EllipsisVertical as mt,_extends as n,Plus as nt,createAlbumApi as o,Moon as ot,deleteRoomApi as p,ExternalLink as pt,Sun as q,require___vite_browser_external as r,Play as rt,createPostTemplateApi as s,Minus as st,useSharedTodo as t,RefreshCw as tt,deleteOldImage as u,Lock as ut,fetchPostTemplateById as v,CloudRain as vt,joinRoomApi as w,Bot as wt,fetchRoomMembersApi as x,ChevronRight as xt,fetchPostsFromApi as y,Clock as yt,require_jsx_runtime as z};